[
    {
        "content": "\u628a\u6bcf\u4e00\u79cd\u4ef7\u683c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u626b\u63cf\u3002\n\n\u82e5\u5f53\u524d\u662f\u7b2c\u4e00\u6b21\u4e70\u7684\u4ef7\u683c\uff0c\u76f4\u63a5\u4e70\u3002\n\n\u5426\u5219\uff0c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u82e5\u7b2c\u4e00\u6b21\u5df2\u7ecf\u4e70\u8fc7\u4e86\uff0c\u5219\u5c06\u6240\u6709\u5269\u4f59\u7684\u5168\u90e8\u7528\u6765\u4e70\u8fd9\u79cd\u5c31\u884c\u3002\n- \u5426\u5219\u6709\u4e24\u79cd\u9009\u62e9\uff1a\n  -  \u5148\u4e8f\u4e00\u70b9\uff0c\u4f4e\u4ef7\u4e70\u7b2c\u4e00\u6b21\uff0c\u7136\u540e\u5269\u4f59\u7684\u5168\u90e8\u4e70\u8fd9\u79cd\uff1b\n  -  \u5f80\u540e\u4e70\uff0c\u8d70\u7740\u77a7\u3002\u5047\u5982\u80fd\u4e70\u5230\u7b2c\u4e00\u6b21\uff0c\u5219\u505c\u4e0b\u6765\uff0c\u5269\u4f59\u7684\u5168\u90e8\u4e70\u8fd9\u79cd\u3002\n\n\u54ea\u4e00\u79cd\u66f4\u597d\u5462\uff1f\u6211\u4eec\u4e0d\u77e5\u9053\uff0c\u6240\u4ee5\u90fd\u8bd5\u8bd5\uff0c\u53cd\u6b63\u603b\u51b3\u7b56\u6570\u662f $O(n)$ \u7684\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u9012\u5f52\u51fd\u6570 `int f(int i,int n)`\uff0c\u5b83\u8fd4\u56de\u4e70\u5230\u7b2c $i$ \u4e2a\u4ef7\u683c\uff0c\u8fd8\u53ef\u4ee5\u4e70 $n$ \u679d\u82b1\u7684\u6700\u5927\u8d39\u7528\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u65b9\u4fbf\u5730\u5904\u7406\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n\\log n)$\uff0c\u74f6\u9888\u5728\u6392\u5e8f\uff0c\u91c7\u7528\u57fa\u6570\u6392\u5e8f\u53ef\u4ee5\u505a\u5230 $O(n)$\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nll N,m,f[200005],p[200005],g[200005][2];\nstruct Thing{\n\tll id,x,tp;\n\tbool operator <(const Thing p) const {\n\t\treturn x>p.x;\n\t}\n}a[200005];\nll calc(int i,int n){\n\tif(i>2*m||n<=0)return 0;\n\tll ans=0;\n\tif(a[i].tp==1){\n\t\tans+=a[i].x,n--;\n\t\tif(p[a[i].id])return ans+a[p[a[i].id]].x*n;\n\t\telse {\n\t\t\tf[a[i].id]=1;\n\t\t\treturn ans+calc(i+1,n);\n\t\t}\n\t}\n\tif(a[i].tp==2){\n\t\tif(f[a[i].id]){\n\t\t\tans+=n*a[i].x,n=0;\n\t\t\treturn ans;\n\t\t}\n\t\telse {\n\t\t\tll tmp=ans+g[a[i].id][0]+(n-1)*g[a[i].id][1];\n\t\t\tp[a[i].id]=i;\n\t\t\treturn max(tmp,ans+calc(i+1,n));\n\t\t}\n\t}\n\t//cout<<i<<' '<<a[i].id<<' '<<a[i].x<<' '<<ans<<endl;\n}\nint main(){\n\tint T;\n\tcin>>T;\n\twhile(T--){\n\t\tcin>>N>>m;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tcin>>g[i][0]>>g[i][1];\n\t\t\ta[i]={i,g[i][0],1},a[i+m]={i,g[i][1],2};\n\t\t}\n\t\tsort(a+1,a+2*m+1);\n\t\tcout<<calc(1,N)<<endl;\n\t\tfor(int i=1;i<=2*m;i++)f[i]=p[i]=0;\n\t}\n} \n```",
        "postTime": 1595164328,
        "uid": 42156,
        "name": "feecle6418",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1379C \u3010Choosing flowers\u3011"
    },
    {
        "content": "\u4e8c\u5206\u6c34\u9898\u3002\n\n\n\u53ef\u4ee5\u63a8\u51fa\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6700\u4f18\u65b9\u6848\uff0c\u53ea\u6709\u4e0d\u9009 $b_i$ \u4e0e\u9009\u4e00\u79cd $b_i$ \u4e24\u4e2a\u9009\u62e9\uff0c\u53c8\u8bbe $a_j>b_i$ ,\u90a3\u4e48 $a_j$ \u4e5f\u5fc5\u5b9a\u8981\u9009\u3002\n\n\u5f53\u4f7f\u7528\u4ee5\u4e0a\u65b9\u6cd5\u590d\u6742\u5ea6\u4e3a $O(n^2)$\uff0c\u663e\u7136\u4f1a\u8d85\u65f6\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u4e8c\u5206\u4f18\u5316\u3002\n\u5c06 $a_i$ \u6570\u7ec4\u8fdb\u884c\u5347\u5e8f\u6392\u5217\uff0c\u7136\u540e\u4e8c\u5206\uff0c\u603b\u590d\u6742\u5ea6\u4e3a $O(n log n)$\n\n\u6e29\u99a8\u63d0\u793a\uff1a\u5341\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00long long\u89c1\u7956\u5b97\n\n\u8fd9\u91cc\u53ea\u653e\u90e8\u5206\u4ee3\u7801\uff0c\u5b8c\u6574\u4ee3\u7801\u7559\u7ed9\u8bfb\u8005\u601d\u8003\u3002\n\n$Code$ :\n\n```C++\nint q=lower_bound(a+1,a+m+1,ud(a[i].y))-(a+1);\nif(q<i)\n\tif(q<(n-1))\n\t\tans=max(ans,v[q]+a[i].x+((long long)(n-(q+1))*a[i].y));\nelse\n\tif(q<n)\n\t\tans=max(ans,v[q]+((long long)(n-q)*a[i].y));\n```\n\n\u611f\u8c22\u9605\u8bfb\uff01\n",
        "postTime": 1601858559,
        "uid": 263414,
        "name": "Sktic",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1379C \u3010Choosing flowers\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u4e8c\u5206\u7684\u6c34\u9898\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u8bc1\u660e\u4e00\u4e2a\u4e8b\uff1a\u5982\u679c\u4e70\u7684\u4e2a\u6570\u4e00\u5b9a\uff0c\u90a3\u4e48\u4e24\u4e2a\u90fd\u4e70 $\\geq 2$ \u4e2a\u4e0d\u5982\u5c31\u4e00\u4e2a\u4e70 $\\geq 2$ \u4e2a\u597d\u3002\u5982\u679c\u6211\u4eec\u8bbe $b_i \\geq b_j$\uff0c\u90a3\u4e48\uff1a\n\n\u90fd\u591a\u4e70\u7684\u4ef7\u503c\u662f\uff1a$(a_i+(x_i-1) \\times b_i)+(a_j+(x_j-1) \\times b_j)$\n\n\u5c31\u591a\u4e70\u4e00\u4e2a\u7684\u4ef7\u503c\u662f\uff1a$(a_i+(x_i+x_j-2) \\times b_i)+a_j$\n\n\u53c8\u56e0\u4e3a $b_i \\geq b_j$\uff0c\u6240\u4ee5\u5c31\u591a\u4e70\u4e00\u4e2a\u7684\u65b9\u6848\u66f4\u4f18\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u679a\u4e3e\u591a\u4e70\u7684\u662f\u54ea\u4e2a\uff0c\u8fd9\u91cc\u8bbe\u4e3a $i$\uff0c\u7136\u540e\u5904\u7406\u5269\u4e0b\u7684\uff1a\n\n\u5176\u5b9e\u4ece\u5269\u4e0b\u7684\u6311\u51fa\u4e00\u4e2a\u4e70\u76f8\u5f53\u4e8e\u603b\u4ef7\u503c\u8981 $a_j-b_i$\uff0c\u663e\u7136\u53ea\u6709 $a_j \\gt b_i$ \u7684\u60c5\u51b5\u624d\u4f1a\u66f4\u4f18\uff0c\u6240\u4ee5\u4e8c\u5206 $a$ \u5373\u53ef\u3002\u5f53\u7136\u6709\u4e00\u5806\u7279\u5224\uff0c\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct apple\n{\n\tint a,b;\n\tbool operator<(const apple &other)const\n\t{\n\t\treturn a<other.a;\n\t}\n}f[100005];\nlong long z[100005],l[100005];\nint main()\n{\n\tint t;\n\tcin>>t;\n\twhile(t--)\n\t{\n\t\tint n,m;\n\t\tcin>>n>>m;\n\t\tfor(int i=1;i<=m;i++)scanf(\"%d%d\",&f[i].a,&f[i].b);\n\t\tsort(f+1,f+m+1);\n\t\tz[m+1]=0;\n\t\tfor(int i=m;i>=1;i--)z[i]=z[i+1]+(l[i]=f[i].a);\n\t\tlong long ans=0;\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tint wz=upper_bound(l+1,l+m+1,f[i].b)-l;\n\t\t\tint gs=m-wz+1;\n\t\t\tif(f[i].a>f[i].b)gs--;\n\t\t\tif(n<=gs)gs=n-1;\n\t\t\tlong long anss=f[i].a+1ll*(n-gs-1)*f[i].b;\n\t\t\twz=m-gs+1;\n\t\t\tint flag=0;\n\t\t\tif(i>=wz)wz--,flag=1;\n\t\t\tanss+=z[wz]-flag*f[i].a;\n\t\t\tans=max(ans,anss);\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1595420540,
        "uid": 107484,
        "name": "wmy_goes_to_thu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1379C \u3010Choosing flowers\u3011"
    },
    {
        "content": "~~\u611f\u89c9\u96be\u5ea6\u865a\u9ad8~~\n\n\u9996\u5148\u5f88\u663e\u7136\u7684\uff0c\u6211\u4eec\u628a\u6bcf\u4e00\u79cd\u7269\u54c1\u62c6\u6210 $2$ \u4e2a\uff0c\u4e00\u4e2a\u8d21\u732e\u662f $a_i$\uff0c\u4e00\u4e2a\u8d21\u732e\u662f $b_i$\u3002\u7136\u540e\u6309\u8d21\u732e\u6392\u5e8f\uff08\u663e\u7136\u5c3d\u91cf\u53d6\u8d21\u732e\u5927\u7684\uff09\u3002\n\n\u6211\u4eec\u518d\u8bbe $solve(t,nn)$ \u8868\u793a\u4ece\u4e0b\u6807\u4e3a $t$ \u7684\u7269\u54c1\u5f80\u540e\u53d6\uff0c\u8fd8\u80fd\u53d6 $nn$ \u4e2a\u3002\u5728\u904d\u5386\u7684\u65f6\u5019\u5206 $3$ \u79cd\u60c5\u51b5\u3002\n\n- \u5982\u679c $i$ \u662f\u7b2c\u4e00\u6b21\u4e70\u7684\u8d21\u732e\uff0c\u90a3\u5f88\u663e\u7136 $ans$ \u76f4\u63a5\u52a0\u8d21\u732e, $nn$ \u51cf\u4e00\u3002\n- \u5982\u679c $i$ \u662f\u7b2c\u4e8c\u6b21\u4e70\u7684\u8d21\u732e\u4e14\u7b2c\u4e00\u6b21\u4e70\u8fc7\u4e86\uff0c\u90a3\u5269\u4e0b $nn$ \u4e2a\u80af\u5b9a\u90fd\u4e70\u8fd9\u4e2a\u4e86\u3002\n- \u5982\u679c $i$ \u662f\u7b2c\u4e8c\u6b21\u4e70\u7684\u8d21\u732e\u4e14\u7b2c\u4e00\u6b21\u6ca1\u6709\u4e70\uff0c\u90a3\u4e48\u6211\u4eec\u5148\u7b97\u4e70\u8fd9\u79cd\u7684\u8d21\u732e\uff0c\u7136\u540e\u548c\u4e0d\u4e70\u8fd9\u79cd\u7684\uff08\u5373 $solve(i+1,nn)$\uff09\u53d6\u6700\u5927\u503c\u3002\n\n\u5177\u4f53\u7b2c\u4e00\u6b21\u662f\u5426\u4e70\u8fc7\u4e86\u53ef\u4ee5\u7528\u6570\u7ec4\u6807\u8bb0\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=100005;\nstruct node{\n    ll x;\n    int y,id;\n}p[N*2];\nint T,m,tot;\nll n,a[N][2];\nbool flag[N];\nbool cmp(node a,node b){return a.x>b.x;}\nll solve(int t,int nn){\n    ll res=0;\n    for(int i=t;i<=tot&&nn;i++){\n        if(p[i].id==0){\n            res+=p[i].x;nn--;\n            flag[p[i].y]=1;\n        }\n        else{\n            if(flag[p[i].y]){\n                res+=nn*p[i].x;\n                break;\n            }\n            else{\n                ll val=a[p[i].y][0]+(nn-1)*p[i].x;\n                res+=max(val,solve(i+1,nn));\n                break;\n            }\n        }\n    }\n    return res;\n}\nint main(){\n    scanf(\"%d\",&T);\n    while(T--){\n        tot=0;\n        scanf(\"%lld%d\",&n,&m);\n        for(int i=1;i<=m;i++){\n            scanf(\"%lld%lld\",&a[i][0],&a[i][1]);\n            flag[i]=0;\n            p[++tot]=(node){a[i][0],i,0};\n            p[++tot]=(node){a[i][1],i,1};\n        }\n        sort(p+1,p+tot+1,cmp);\n        printf(\"%lld\\n\",solve(1,n));\n    }\n    return 0;\n}\n```\n",
        "postTime": 1631364702,
        "uid": 188389,
        "name": "QQH08",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1379C Choosing flowers"
    },
    {
        "content": "\u9996\u5148\u6709\u4e2a\u663e\u7136\u7684\u7ed3\u8bba\uff1a\n\n\u5728\u6700\u4f18\u89e3\u4e2d\uff0c\u81f3\u591a\u53ea\u6709\u4e00\u79cd\u7269\u54c1\u4f1a\u88ab\u9009\u591a\u4e2a\u3002\n\n\u56e0\u4e3a\u5982\u679c\u5f53\u6709\u591a\u79cd\u7269\u54c1\u88ab\u9009\u591a\u4e2a\u65f6\uff0c\u7528$b$\u503c\u6700\u5927\u7684\u53bb\u66ff\u6362$b$\u503c\u8f83\u5c0f\u7684\u7269\u54c1\uff0c\u4e00\u5b9a\u66f4\u4f18\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u5f97\u51fa\u4e00\u79cd\u6734\u7d20\u7684\u505a\u6cd5\uff1a\n\n\u679a\u4e3e\u9009\u591a\u4e2a\u7684\u7269\u54c1\uff0c\u8ba1\u7b97\u51fa\u5f53\u524d\u7269\u54c1\u9009\u591a\u4e2a\u65f6\u7684\u6700\u5927\u6536\u76ca\u3002\n\n\u5bf9\u4e8e\u6bcf\u79cd\u7269\u54c1\uff0c\u4f9d\u6b21\u679a\u4e3e\u9009$2,3,4,5...n$\u4e2a\uff0c\u5176\u9009$i$\u4e2a\u7269\u54c1\u7684\u6700\u5927\u503c\uff0c\u663e\u7136\u662f\u4ece\u9664\u4e86\u5f53\u524d\u7269\u54c1\u7684\u7269\u54c1\u7ec4\u91cc\u9009\u51fa\u524d$n-i$\u5927\u7684\u7269\u54c1\u6536\u76ca\u52a0\u4e0a\u9009$i$\u4e2a\u7269\u54c1\u7684\u6536\u76ca\u3002\n\n\u53cd\u7740\u601d\u8003\uff1a\n\n\u5c06\u7269\u54c1\u6309$a$\u503c\u9012\u51cf\u6392\u5e8f\u5f97\u5230\u5e8f\u5217$c[]$\u3002\u6211\u4eec\u8003\u8651\u4ece$n$\u5f80\u524d\u679a\u4e3e\uff0c\u8003\u8651\u9009$i$\u4e2a\u662f\u5426\u6bd4\u9009$i+1$\u4e2a\u8981\u66f4\u4f18\uff0c\u9009$i$\u4e2a\u6bd4\u9009$i+1$\u4e2a\u66f4\u4f18\u5f53\u4e14\u4ec5\u5f53$c[i]>b,c[i]\\ne a$\uff0c\u5373\u4f9d\u6b21\u7528$c[i]$\u66ff\u6362$b$\u3002\n\n\u590d\u6742\u5ea6$O(m^2)$\n\n\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u6309$a$\u503c\u9012\u51cf\u6392\u5e8f\uff0c\u6240\u4ee5\u7269\u54c1\u7ec4\u7684\u4ef7\u503c\u662f\u5355\u8c03\u7684\u3002\n\n\u8003\u8651\u500d\u589e\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u500d\u589e\u6216\u4e8c\u5206\u5230\u5927\u4e8e$b$\u7684\u6700\u5c0f\u503c\u7684\u4f4d\u7f6e\u3002\n\n\n\u7279\u5224\u4ee5\u4e0b\u5176\u524d\u7f00\u662f\u5426\u5305\u62ec$a$\u5373\u53ef\n\n\u590d\u6742\u5ea6$O(m\\log m)$\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cstdio>\n\nnamespace wxy{\n    const int N = 1e5 + 5;\n    typedef long long ll;\n    ll b[N],c[N],s[N];\n    int pp[N];\n    std::pair<ll,int> a[N];\n    inline void main(){\n        int t;\n        std::cin >> t;\n        while (t--){\n            int n,m;\n            scanf(\"%d%d\",&n,&m);\n            for (int i = 1; i <= m; i++){\n                scanf(\"%lld%lld\",&a[i].first,&b[i]);\n                c[i] = a[i].first;\n                a[i].second = i;\n            } \n            std::sort(a + 1,a + 1 + m);\n            std::reverse(a + 1,a + 1 + m);\n            for (int i = 1; i <= m; i++) pp[a[i].second] = i;\n            ll ans = 0;\n            s[0] = 0;\n            for (int i = 1; i <= m; i++){\n                s[i] = s[i - 1] + a[i].first;\n                if (i <= n) ans += a[i].first;\n            }\n            int p = std::min(m,n-1);\n            int k = 0;\n            for (;(1 << k) <= p; k++);\n            k++;\n            for (int i = 1; i <= m; i++){\n                ll pos = c[i] + b[i] * (n - 1);\n                int loc = 0;\n                for (int j = k; j >= 0; j--){\n                    if (((loc + (1 << j)) <= p) && a[loc + (1 << j)].first > b[i]) loc += 1 << j;\n                }\n                if (loc >= pp[i]){\n                    pos = pos - c[i] + s[loc];\n                    loc--;\n                    pos -= loc * b[i];\n                }else{\n                    pos = pos - loc * b[i] + s[loc];\n                }\n                ans = std::max(pos,ans);\n            }\n            printf(\"%lld\\n\",ans);\n        }\n    }\n}signed main(){wxy::main();return 0;}\n```\n\n\n",
        "postTime": 1605317890,
        "uid": 317459,
        "name": "RyexAwl",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1379C \u3010Choosing flowers\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1379C)\n\n---\n\n\u8d2a\u5fc3\u9898\uff0c\u5f88\u5bb9\u6613 duang \u51fa\u6765\uff0c\u6700\u4f18\u65b9\u6848\u4e2d\u8981\u4e48\u4e0d\u9009 $\\operatorname b$\uff0c\u8981\u4e48\u53ea\u9009\u4e00\u79cd $\\operatorname b$\uff0c\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7b80\u5355\u7684\u601d\u60f3\uff0c\u4e8c\u5206\u6bd4\u5f53\u524d\u8fd9\u4e2a $\\operatorname b$\uff0c\u5927\u7684 $\\operatorname a$\uff0c\u9009\u8fd9\u4e9b $\\operatorname a$\uff0c\n\n\u518d\u770b\u8fd8\u53ef\u4ee5\u9009\u5417\uff0c\u53ef\u4ee5\u9009\u5c31\u9009\u5269\u4e0b\u7684\u9009 $b$\u3002\n\n\u4f46\u6709\u8bb8\u591a\u7279\u5224\uff0c\u56e0\u4e3a\u53ef\u80fd\u5f53\u524d\u8fd9\u4e2a $\\operatorname a$\u5df2\u7ecf\u9009\u4e86\uff0c\u6240\u4ee5\u8981\u7279\u5224\uff0c\u8fd8\u8981\u5f00 $\\text{long long}$\u3002\n\n\n```cpp\n#include <cmath>\n#include <queue>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define int long long\nusing namespace std;\n\ntemplate<typename T>void read(T &x) {\n\tT f = 1;x = 0;char s = getchar();\n\twhile(s < '0' || s > '9') {if(s == '-')f = -1;s = getchar();}\n\twhile(s >= '0' && s <= '9') {x = x * 10 + s - '0';s = getchar();}\n\tx *= f;\n}\ntemplate<typename T>void print(T x) {\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\n\nconst int maxn = 1e5 + 5;\nint n,m,b[maxn],sum[maxn];\nint ans,times;\n\nstruct node {\n\tint x,y;\n}a[maxn];\n\nbool cmp(node x,node y) {\n\treturn x.x < y.x;\n}\n\nsigned main () {\n\tread(times);\n\twhile (times --) {\n\t\tmemset(a,0,sizeof a);\n\t\tmemset(b,0,sizeof b);\n\t\tmemset(sum,0,sizeof sum);\n\t\tread(n);read(m);\n\t\tfor (int i = 1 ; i <= m ; ++ i) {\n\t\t\tread(a[i].x);read(a[i].y);\n\t\t}\n\t\tsort(a + 1,a + 1 + m,cmp);\n\t\tsum[m + 1] = 0;\n\t\tfor (int i = m ; i >= 1 ; -- i) b[i] = a[i].x,sum[i] = sum[i + 1] + b[i];\n\t\tans = sum[max(m - n + 1,0ll)];\n\t\tfor (int i = 1 ; i <= m ; ++ i) {\n\t\t\tint k = lower_bound(b + 1,b + 1 + m,a[i].y) - b;\n\t\t\tint p = m - k + 1,q = n;\n\t\t\tif (p >= q) ans = max(ans,sum[m - n + 1]);\n\t\t\telse {\n\t\t\t\tint flag = 0;\n\t\t\t\tif (i < k) flag = 1;\n\t\t\t\tif (flag) ans = max(ans,(q - p - 1) * a[i].y + a[i].x + sum[k]);\n\t\t\t\telse ans = max(ans,(q - p) * a[i].y + sum[k]);\n\t\t\t}\n\t\t}\n\t\tprint(ans),putchar('\\n');\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1598229784,
        "uid": 163516,
        "name": "Strelitzia",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1379C \u3010Choosing flowers\u3011"
    }
]
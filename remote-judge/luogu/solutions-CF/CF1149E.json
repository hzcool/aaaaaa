[
    {
        "content": "\u5728\u672c\u7bc7\u9898\u89e3\u4e2d\uff0c\u6211\u4eec\u79f0\u9898\u76ee\u4e2d\u7684 \"\u62c9\u7968\" \u4e3a \"\u64cd\u4f5c\"\u3002\n\n\u4ee4 $mex\\{S\\}$ ( $S$ \u662f\u4e00\u4e2a\u81ea\u7136\u6570\u96c6\u5408 ) \u4e3a $S$ \u4e2d\u6ca1\u6709\u51fa\u73b0\u7684\u6700\u5c0f\u81ea\u7136\u6570\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u89c4\u5b9a $mex\\{\\emptyset\\}=0$\u3002\n\n\u4ee4 $xor\\{S\\}$ ( $S$ \u662f\u4e00\u4e2a\u81ea\u7136\u6570\u96c6\u5408 ) \u4e3a $S$ \u4e2d\u6240\u6709\u5143\u7d20\u7684\u5f02\u6216\u548c\u3002\n\n\u6211\u4eec\u8003\u8651\u5bf9\u7ed9\u4e00\u4e2a\u57ce\u5e02\u4e00\u4e2a\u6743\u503c $val[u]$\uff0c\u4ee4\n\n$val[u] = mex\\{val[v]\\ |\\ \\text{\u5b58\u5728\u6709\u5411\u8fb9}\\ u\\to v\\}$\n\n\u5b9a\u597d\u6743\u503c\u4e4b\u540e\uff0c\u6211\u4eec\u8bc1\u660e\u51e0\u4e2a\u4e1c\u897f\uff1a\n\n**\u5f15\u74061 \uff1a** \u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u8fb9 $u \\to v$\uff0c$val[u] \\neq val[v]$\u3002\n\n**\u8bc1\u660e \uff1a** \u7531\u4e8e $val[v]$ \u4e00\u5b9a\u5728 $u$ \u5bf9\u5e94\u7684\u96c6\u5408 $S_u$ \u4e2d\u51fa\u73b0\u8fc7\uff0c\u56e0\u6b64 $val[u] = mex\\{S_u\\}\\neq val[v]$\n\n**\u5f15\u7406 2\uff1a** \u4ee4 $X(p)$ \u8868\u793a\u6240\u6709 $val[u] = p$ \u7684 $u$ \u7684 $h[u]$ \u7684\u5f02\u6216\u548c\uff0c\u5373 $X(p) = xor\\{h[u]\\ |\\ val[u] = p\\}$\u3002\u5148\u624b\u80fd\u591f\u83b7\u80dc\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728 $p$\uff0c\u4f7f\u5f97 $X(p)\\neq0$\u3002\n\n\u4e3a\u4e86\u8bc1\u660e\u8fd9\u4e2a\u5f15\u7406\uff0c\u6211\u4eec\u5148\u6765\u8bc1\u660e\u5176\u4ed6\u4e24\u4e2a\u4e1c\u897f\uff1a\n\n**\u5f15\u7406 2.1\uff1a** \u82e5\u5bf9\u4e8e\u6240\u6709 $p$\uff0c\u6709 $X(p)=0$\uff0c\u90a3\u4e48\u5728\u6267\u884c\u4e00\u6b21\u64cd\u4f5c\u540e\uff0c\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a $t$ \u4f7f\u5f97 $X(t) \\neq 0$\u3002\n\n**\u8bc1\u660e\uff1a** \u8bbe\u8fd9\u6b21\u64cd\u4f5c\u7684\u70b9\u4e3a $u$\uff0c\u7531 \u5f15\u7406 1 \u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e0d\u5b58\u5728\u7b2c\u4e8c\u4e2a\u70b9 $v$ \u4f7f\u5f97\u5b58\u5728\u8fb9 $u \\to v$ \u5e76\u4e14 $val[u] = val[v]$\uff0c\u56e0\u6b64\u80fd\u5f71\u54cd\u5230 $X(val[u])$ \u7684\u53ea\u6709 $h[u]$\u3002\n\n\u800c\u6211\u4eec\u5728\u8fd9\u6b21\u64cd\u4f5c\u4e2d\u5fc5\u987b\u4ee4 $h[u]$ \u51cf\u5c0f\uff08\u4e5f\u5c31\u662f\u4ee4 $h[u]$ \u53d1\u751f\u53d8\u5316\uff09\uff0c\u7531\u4e8e $X(val[u])$ \u4e00\u5f00\u59cb\u662f $0$\uff0c$h[u]$ \u53d1\u751f\u53d8\u5316\u540e $X(val[u])$ \u5c31\u4e00\u5b9a\u975e $0$\u3002\u5f15\u7406 2.1 \u5f97\u8bc1\u3002\n\n**\u5f15\u7406 2.2\uff1a** \u82e5\u5b58\u5728\u4e00\u4e2a $p$ \u4f7f\u5f97 $X(p)\\neq 0$\uff0c\u90a3\u4e48\u4e00\u5b9a\u5b58\u5728\u4e00\u79cd\u6267\u884c\u64cd\u4f5c\u7684\u65b9\u5f0f\u4f7f\u5f97\u64cd\u4f5c\u540e\u5bf9\u4e8e\u6240\u6709 $t$\uff0c$X(t) = 0$\u3002\n\n**\u8bc1\u660e\uff1a** \u8bbe $q$ \u6700\u5927\u7684\u6ee1\u8db3 $X(q) \\neq 0$ \u7684\u6570\u3002\u9996\u5148\u6211\u4eec\u9700\u8981\u8bc1\u660e\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u70b9 $u$\uff0c\u4f7f\u5f97\u5728\u5bf9\u8fd9\u4e2a\u70b9\u8fdb\u884c\u64cd\u4f5c\u540e\u53ef\u4ee5\u8ba9 $X(q) = 0$\u3002\n\n\u8f6c\u5316\u4e00\u4e0b\u547d\u9898\uff1a\u5bf9\u4e8e\u4e00\u4e2a $val[u] = q$ \u7684\u70b9 $u$\uff0c\u6211\u4eec\u60f3\u8981\u8ba9 $X(q)$ \u5f52\u96f6\uff0c\u5c31\u8981\u5c06 $h[u]$ \u4fee\u6539\u4e3a $X(q) \\bigoplus h[u]$\u3002\u73b0\u5728\u547d\u9898\u53d8\u6210\u4e86\u8bc1\u660e\u5b58\u5728\u4e00\u4e2a\u70b9 $u$\uff0c\u4f7f\u5f97 $(h[u] \\bigoplus X(q)) < h[u]$\uff08$\\bigoplus$ \u8868\u793a\u5f02\u6216\uff09\u3002\n\n\u6211\u4eec\u8003\u8651 $X(q)$ \u6700\u9ad8\u7684\u4e3a $1$ \u7684\u90a3\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff08\u8bbe\u8fd9\u4e00\u4f4d\u4e3a $i$\uff0c\u4e14\u7531\u4e8e $X(q) \\neq 0$\uff0c\u8fd9\u6837\u7684 $i$ \u4e00\u5b9a\u5b58\u5728\uff09\u3002\u56e0\u4e3a $X(q)$ \u662f\u82e5\u5e72\u4e2a\u6570\u7684\u5f02\u6216\u548c\uff0c\u56e0\u6b64\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a $u$ \u4f7f\u5f97 $h[u]$ \u7684\u8fd9\u4e00\u4f4d\u4e5f\u4e3a $1$\uff0c\u6211\u4eec\u4ece\u6ee1\u8db3 $h[u]$ \u7684\u7b2c $i$ \u4f4d\u4e3a $1$ \u7684 $u$ \u4e2d\u4efb\u9009\u4e00\u4e2a\uff0c\u8bb0\u4f5c $w$\u3002\n\n\u6211\u4eec\u8bbe $t = h[w] \\bigoplus X(q)$\uff0c\u663e\u7136 $t$ \u53ea\u6709\u540e $i$ \u4f4d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u5e76\u4e14 $t$ \u5728\u7b2c $i$ \u4f4d\u4e3a $0$\uff0c\u800c $h[w]$ \u5728\u7b2c $i$ \u4f4d\u4e3a $1$\uff0c\u56e0\u6b64 $t < h[w]$\u3002\u6545 $w$ \u5408\u6cd5\uff0c\u8bc1\u660e\u5b8c\u6bd5\u3002\n\n\u8bc1\u660e\u4e86\u5b58\u5728 $u$\uff0c\u63a5\u4e0b\u6765\u7684\u4efb\u52a1\u5c31\u5f88\u8f7b\u677e\u4e86\uff1a\u7531\u4e8e $val[u] = mex\\{S_u\\}$\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5c0f\u4e8e $q$ \u7684\u6570 $p$\uff0c\u90fd\u5b58\u5728\u4e00\u6761\u8fb9 $u \\to v$ \u4f7f\u5f97 $val[v] = p$\u3002\n\n\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u4efb\u610f\u64cd\u4f5c $h[v]$\uff0c\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a $p,\\ X(p) \\neq 0$ \u90fd\u627e\u5230\u4e00\u4e2a $v,\\ val[v] = p$ \u7136\u540e\u8ba9 $h[v]$ \u53d8\u4e3a $h[v] \\bigoplus X(p)$ \u5373\u53ef\u3002\u5f15\u7406 2.2 \u5f97\u8bc1\u3002\n\n\u8bc1\u660e\u4e86\u4e0a\u8ff0\u7684\u4e24\u4e2a\u5c0f\u5f15\u7406\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u6765\u8bc1\u660e\u8fd9\u4e2a\u5927\u5f15\u7406\u4e86\u3002\n\n**\u8bc1\u660e\uff1a** \u4e0d\u53ef\u64cd\u4f5c\u7684\u72b6\u6001\uff08\u7ec8\u6b62\u72b6\u6001\uff09\u5c31\u662f\u6240\u6709\u70b9\u7684 $h$ \u90fd\u5df2\u7ecf\u7b49\u4e8e $0$\uff0c\u6b64\u65f6\u663e\u7136\u6709\u6240\u6709\u7684 $X(p) = 0$\u3002\n\n\u82e5\u4e00\u5f00\u59cb\u5b58\u5728 $p$ \u4f7f\u5f97 $X(p) \\neq 0$\uff0c\u90a3\u4e48\u5148\u624b\u5c31\u80fd\u901a\u8fc7\u4e00\u6b21\u64cd\u4f5c\u8ba9\u6240\u6709 $X(p)$ \u5f52\u96f6\uff08\u7531\u5f15\u7406 2.2\uff09\uff0c\u800c\u540e\u624b\u4e0d\u7ba1\u600e\u4e48\u64cd\u4f5c\uff0c\u53c8\u90fd\u4f1a\u81f3\u5c11\u8ba9\u4e00\u4e2a $X(p)$ \u53d8\u6210\u975e $0$\uff08\u7531\u5f15\u7406 2.1\uff09\u3002\u6211\u4eec\u53ea\u9700\u8981\u8bc1\u660e\u8fd9\u6837\u64cd\u4f5c\u4e0b\u53bb\u603b\u4f1a\u8ba9\u6240\u6709\u70b9\u7684 $h$ \u90fd\u5f52\u96f6\uff08\u6e38\u620f\u4f1a\u7ed3\u675f\uff09\u5c31\u884c\u4e86\u3002\uff08\u6ce8\uff1a\u9898\u76ee\u5df2\u7ecf\u8bf4\u660e\u4e86\u4e00\u5b9a\u80fd\u7ed3\u675f\uff0c\u8fd9\u91cc\u53ea\u662f\u518d\u8bc1\u660e\u4e00\u6b21\uff0c\u5982\u679c\u4e0d\u611f\u5174\u8da3\u53ef\u4ee5\u8df3\u8fc7\uff09\n\n\u56e0\u4e3a\u539f\u56fe\u662f\u4e00\u5f20 `DAG`\uff0c\u6211\u4eec\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\u6765\u8bc1\u660e\u6e38\u620f\u4e00\u5b9a\u4f1a\u7ed3\u675f\u3002\n\n\u6211\u4eec\u5c06\u8fd9\u5f20\u56fe\u7684\u62d3\u6251\u5e8f\u5012\u7740\u5199\u4e0b\u6765\uff0c\u4ee4\u8fd9\u4e2a\u5012\u7740\u7684\u62d3\u6251\u5e8f\u4e3a $s$\u3002\n\n\u5bf9\u4e8e $s[1]$\uff0c\u53ef\u4ee5\u8bf4\u660e\u5b83\u6ca1\u6709\u4efb\u4f55\u51fa\u8fb9\uff0c\u6240\u4ee5\u82e5\u8fdb\u884c\u53ea\u5305\u542b $s[1]$ \u7684\u5b50\u6e38\u620f\uff0c\u4e0d\u7ba1 $h[s[1]]$ \u662f\u4ec0\u4e48\uff0c\u6e38\u620f\u4e00\u5b9a\u80fd\u7ed3\u675f\u3002\n\n\u5bf9\u4e8e $s[k](k>1)$\uff0c\u5047\u8bbe\u6211\u4eec\u8bf4\u660e\u4e86\u8fdb\u884c\u5305\u542b $s[1],s[2],...,s[k-1]$ \u7684\u5b50\u6e38\u620f\uff0c\u4e0d\u7ba1 $h[s[1...k-1]]$ \u662f\u4ec0\u4e48\uff0c\u6e38\u620f\u4e00\u5b9a\u80fd\u7ed3\u675f\u3002\n\n\u6211\u4eec\u77e5\u9053\uff0c\u7531\u4e8e\u62d3\u6251\u5e8f\u7684\u6027\u8d28\uff0c\u5bf9 $s[1],...,s[k-1]$ \u8fdb\u884c\u7684\u64cd\u4f5c\u4e00\u5b9a\u4e0d\u80fd\u5f71\u54cd $h[s[k]]$\u3002\u800c\u5bf9 $s[k]$ \u8fdb\u884c\u7684\u64cd\u4f5c\u4e00\u5b9a\u662f\u7f29\u5c0f $h[s[k]]$\uff0c\u7136\u540e\u518d\u6539\u53d8 $s[1],...,s[k-1]$ \u4e2d\u67d0\u4e9b\u70b9\u7684 $h$\u3002\n\n\u6211\u4eec\u77e5\u9053\u4e0d\u7ba1 $h[s[1...k-1]]$ \u662f\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u5b50\u6e38\u620f\u4e00\u5b9a\u80fd\u7ed3\u675f\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u6211\u4eec\u4f1a\u56de\u5230\u53ea\u80fd\u64cd\u4f5c $s[k]$ \u7684\u72b6\u6001\u3002\n\n\u800c\u64cd\u4f5c $s[k]$ \u53ea\u80fd\u7f29\u5c0f $h[s[k]]$\uff0c$h[s[k]]$ \u4e5f\u4e0d\u4f1a\u88ab\u5305\u542b $s[1...k-1]$ \u7684\u5b50\u6e38\u620f\u5f71\u54cd\uff0c\u6240\u4ee5 $h[s[k]]$ \u4e00\u5b9a\u4f1a\u5f52\u96f6\u3002\u56e0\u6b64\u5305\u542b $s[1...k]$ \u7684\u5b50\u6e38\u620f\u4e0d\u7ba1 $h[s[1...k]]$ \u662f\u4ec0\u4e48\u4e00\u5b9a\u80fd\u7ed3\u675f\u3002\n\n\u901a\u8fc7\u5f52\u7eb3\uff0c\u8bc1\u660e\u5b8c\u6bd5\u3002\u4e8e\u662f \u5f15\u7406 2 \u5f97\u8bc1\u3002\n\n\u6709\u4e86\u4e0a\u9762\u7684\u4e24\u4e2a\u5f15\u7406\uff0c\u63a5\u4e0b\u6765\u7684\u6784\u9020\u65b9\u6848\u662f\u7b80\u5355\u7684\uff1a\u82e5\u6240\u6709 $X(p) = 0$\uff0c\u8f93\u51fa `LOSE`\uff0c\u5426\u5219\u8f93\u51fa `WIN`\uff0c\u7136\u540e\u627e\u5230\u6700\u5927\u7684\u4f7f\u5f97 $X(p)\\neq 0$ \u7684 $p$\uff0c\u518d\u627e\u5230\u4e00\u4e2a\u4f7f\u5f97 $h[u] \\bigoplus X(p) < h[u]$ \u7684 $u$\uff0c\u66f4\u65b0 $u$ \u4ee5\u53ca\u5b83\u51fa\u8fb9 $v$ \u7684 $h$ \u4f7f\u5f97\u6240\u6709 $X(p)$ \u5f52\u96f6\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n,m;\nvector<int> edge[200050];\nint val[200050];\nlong long h[200050],X[705];\nint maxn;\n\nvoid dfs(int pos)\n{\n\tif(val[pos] != -1) return ;\n\tbool vis[705] = {0};\n\tfor(auto v : edge[pos])\n\t{\n\t\tdfs(v);\n\t\tvis[val[v]] = 1;\n\t}\n\tfor(int i = 0;; ++ i)\n\t\tif(!vis[i])\n\t\t{\n\t\t\tval[pos] = i;\n\t\t\tbreak;\n\t\t}\n\tmaxn = max(maxn,val[pos]);\n\tX[val[pos]] ^= h[pos];\n}\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i = 1;i <= n; ++ i) scanf(\"%lld\",&h[i]);\n\tmemset(val,-1,sizeof(val));\n\tfor(int i = 1;i <= m; ++ i)\n\t{\n\t\tint u,v; scanf(\"%d%d\",&u,&v);\n\t\tedge[u].push_back(v);\n\t}\n\tfor(int i = 1;i <= n; ++ i)\n\t\tdfs(i);\n\tfor(int i = maxn;i >= 0; -- i)\n\t\tif(X[i])\n\t\t{\n\t\t\tprintf(\"WIN\\n\");\n\t\t\tfor(int j = 1;j <= n; ++ j)\n\t\t\t\tif(val[j] == i && (h[j] ^ X[i]) < h[j])\n\t\t\t\t{\n\t\t\t\t\th[j] = h[j] ^ X[i];\n\t\t\t\t\tX[i] = 0;\n\t\t\t\t\tfor(auto v : edge[j])\n\t\t\t\t\t\tif(X[val[v]])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\th[v] = X[val[v]] ^ h[v];\n\t\t\t\t\t\t\tX[val[v]] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tfor(int j = 1;j <= n; ++ j)\n\t\t\t\tprintf(\"%lld \",h[j]);\n\t\t\tputs(\"\");\n\t\t\treturn 0;\n\t\t}\n\tprintf(\"LOSE\\n\");\n}\n```",
        "postTime": 1584626006,
        "uid": 25308,
        "name": "Wen_kr",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1149E \u3010Election Promises\u3011"
    },
    {
        "content": "\u9996\u5148\u5982\u679c\u6ca1\u6709\u4efb\u610f\u5730\u53bb\u6539\u53d8\u540e\u7ee7\u8282\u70b9\u7684\u6743\u503c\u7684\u8bdd\uff0c\u8fd9\u9053\u9898\u5c31\u662f\u4e00\u4e2a$nim$\u6e38\u620f\u7684\u677f\u5b50\u3002\n\n\u6709\u7684\u8bdd\u9996\u5148\u8003\u8651\u4e00\u4e0b\u5206\u7ec4\uff0c\u5206\u7ec4\u7684\u8fc7\u7a0b\u662f\u8fd9\u6837\uff1a\n\n- \u5c06\u6240\u6709\u51fa\u5ea6\u4e3a$0$\u7684\u70b9\u7684\u6807\u53f7\u8bbe\u4e3a$0$\u3002\n- \u7136\u540e\u62d3\u6251\u6392\u5e8f\uff0c\u6bcf\u4e2a\u70b9\u7684\u6807\u53f7\u662f\u5b83\u7684\u540e\u7ee7\u8282\u70b9\u7f16\u53f7\u7684$mex$\u3002\n\n\u8003\u8651\u8fd9\u6837\u5206\u7ec4\u7684\u7279\u70b9\uff1a\n\n- \u5bf9\u4e8e\u56fe\u4e2d\u7684\u4efb\u610f\u4e00\u6761\u8fb9$(u,v)$\uff0c$u$\u548c$v$\u5fc5\u5b9a\u4e0d\u5728\u4e00\u4e2a\u7ec4\u5185\u3002\n- \u5047\u8bbe\u4e00\u4e2a\u70b9$i$\u7684\u6807\u53f7\u662f$id[x]$\uff0c\u90a3\u4e48$x$\u7684\u540e\u7ee7\u8282\u70b9\u4e2d\uff0c$[0,id[x])$\u4efb\u610f\u4e00\u4e2a\u7ec4\u5fc5\u5b9a\u81f3\u5c11\u6709\u4e00\u4e2a\u3002\n\n\u90a3\u4e48\u8003\u8651\u6bcf\u4e00\u4e2a\u7ec4\u5185\u6240\u6709\u70b9\u7684\u5f02\u6216\u548c\uff0c\u8bbe\u5176\u4e3a$val[i]$\u3002\n\n\u90a3\u4e48\u8003\u8651\u53d1\u73b0\u4e00\u4e0b$val$\u7684\u4e00\u4e9b\u6027\u8d28\uff1a\n\n- \u5982\u679c\u4e00\u4e2a\u7ec4\u7684$val=0$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u7ec4\u4e2d\u7684\u67d0\u4e2a\u70b9\u8fdb\u884c\u64cd\u4f5c\u4e4b\u540e\uff0c\u8fd9\u4e2a\u70b9\u7684\u6743\u503c\u4e00\u5b9a\u4e0d\u4e3a$0$\u3002\uff08\u663e\u7136\uff09\n- \u5bf9\u4e8e\u4e00\u4e2a\u7ec4$i$\u800c\u8a00\uff0c\u90a3\u4e48\u5bf9\u5b83\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5c06\u6807\u53f7\u4e3a$[0,i-1]$\u7684\u96c6\u5408\u7684$val$\u5168\u90e8\u53d8\u6210$0$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u901a\u8fc7\u4e0a\u9762\u4e24\u4e2a\u6027\u8d28\u53ef\u4ee5\u77e5\u9053\uff1a\n\n- \u5bf9\u4e8e\u4e00\u4e2a\u6240\u6709\u7ec4\u7684$val$\u4e0d\u5168\u90fd$=0$\u7684\u72b6\u6001\uff0c\u4e00\u5b9a\u53ef\u4ee5\u7528\u4e00\u6b65\u64cd\u4f5c\u5c06\u6240\u6709\u7684$val$\u53d8\u4e3a$0$\u3002\u5177\u4f53\u64cd\u4f5c\u5c31\u662f\u5c06\u4e00\u4e2a\u6807\u53f7\u6700\u5927\u7684$val$\u4e0d\u4e3a$0$\u7684\u70b9\u964d\u4f4e\u6210$0$\uff0c\u7136\u540e\u5c06\u524d\u9762\u6240\u6709$val$\u4e0d\u4e3a$0$\u7684\u8282\u70b9\u4fee\u6539\u6210$0$\u3002\n- \u5bf9\u4e8e\u4e00\u4e2a\u6240\u6709\u7ec4\u7684$val$\u90fd\u4e3a$0$\u7684\u72b6\u6001\uff0c\u901a\u8fc7\u4e00\u6b21\u64cd\u4f5c\u53ea\u80fd\u8f6c\u79fb\u5230\u5168$0$\u7684\u72b6\u6001\u3002\n\n\u90a3\u4e48\u901a\u8fc7\u4e0a\u9762\u7684\u5206\u6790\uff0c\u5bf9\u4e8e\u521d\u59cb\u5c40\u9762\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u7ec4\u7684$val$\u4e3a$0$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c40\u9762\u5c31\u662f\u5148\u624b\u5fc5\u80dc\uff0c\u5426\u5219\u5c31\u662f\u5148\u624b\u5fc5\u8d25\u3002\n\n\u81f3\u4e8e\u8f93\u51fa\u65b9\u6848\u7684\u8bdd\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u4e8e\u90a3\u4e2a\u6807\u53f7\u6700\u5927\u7684$val$\u4e0d\u4e3a$0$\u7684\u7ec4\u627e\u5230\u4e00\u4e2a\u80fd\u5c06$val$\u964d\u6210$0$\u7684\u70b9\u964d\u6210$0$\uff0c\u7136\u540e\u5c06\u5b83\u7684\u540e\u7ee7\u8282\u70b9\u4fee\u6539\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6$O(n)$\u3002\n\ncode:\n```cpp\n#include<bits/stdc++.h>\n#define maxn 200010\nusing namespace std;\ntypedef long long ll;\nll read()\n{\n    ll x=0,f=1;\n    char ch=getchar();\n    while(ch-'0'<0||ch-'0'>9){if(ch=='-') f=-1;ch=getchar();}\n    while(ch-'0'>=0&&ch-'0'<=9){x=x*10+ch-'0';ch=getchar();}\n    return x*f;\n}\nint n,m,top,mx;\nint head[maxn],nxt[maxn],to[maxn],tot;\nvoid add(int u,int v)\n{\n    tot++;\n    nxt[tot]=head[u];\n    head[u]=tot;\n    to[tot]=v;\n}\nll a[maxn],val[maxn];\nint deg[maxn],p[maxn],vis[maxn],id[maxn];\nqueue<int>q;\nvoid top_sort()\n{\n    for(int i=1;i<=n;i++)\n      if(!deg[i])  q.push(i);\n    while(q.size())\n    {\n        int now=q.front();q.pop();\n        p[++top]=now;\n        for(int i=head[now];i;i=nxt[i])\n        {\n            deg[to[i]]--;\n            if(!deg[to[i]])  q.push(to[i]);\n        }\n    }\n    for(int i=n;i>=1;i--)\n    {\n        int x=p[i];\n        for(int j=head[x];j;j=nxt[j])  vis[id[to[j]]]=1;\n        while(vis[id[x]])  id[x]++;\n        val[id[x]]^=a[x];mx=max(mx,id[x]);\n        for(int j=head[x];j;j=nxt[j])  vis[id[to[j]]]=0;\n    }\n}\nint main()\n{\n    n=read();m=read();\n    for(int i=1;i<=n;i++)  a[i]=read();\n    for(int i=1;i<=m;i++)\n    {\n        int q=read(),w=read();\n        add(q,w);deg[w]++;\n    }\n    top_sort();\n    int pos=-1;\n    for(int i=0;i<=mx;i++)\n      if(val[i])  pos=i;\n    if(pos==-1)  return puts(\"LOSE\"),0;\n    puts(\"WIN\");\n    for(int i=1;i<=n;i++)\n    {\n        if(id[i]==pos)\n        {\n            if((val[id[i]]^a[i])>a[i])  continue;\n            a[i]^=val[id[i]];val[id[i]]=0;\n            for(int j=head[i];j;j=nxt[j])\n              a[to[j]]^=val[id[to[j]]],val[id[to[j]]]=0;\n        }\n    }\n    for(int i=1;i<=n;i++)  printf(\"%lld \",a[i]);\n    puts(\"\");\n    return 0;\n}\n```",
        "postTime": 1584263849,
        "uid": 46396,
        "name": "justin_cao",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1149E \u3010Election Promises\u3011"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u6709\u5411\u56fe\uff08\u4e0d\u4e00\u5b9a\u8fde\u901a\uff09\uff0c\u6bcf\u4e2a\u70b9\u6709\u4e00\u4e2a\u6743\u503c $a_i$\uff0c\u4e24\u4eba\u8f6e\u6d41\u8fdb\u884c\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u8282\u70b9 $u$ \u5e76\u5c06\u5176\u70b9\u6743 **\u51cf\u5c0f** \u4e3a\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u4e4b\u540e\u53ef\u4ee5\u5c06\u6240\u6709\u8282\u70b9 $v\\in\\{v|\\,\\exists$ \u6709\u5411\u8fb9 $u\\rightarrow v\\}$ \u7684\u6743\u503c **\u66f4\u6539** \u4e3a\u4efb\u610f\u975e\u8d1f\u6574\u6570\uff0c\u6700\u5148\u4e0d\u80fd\u64cd\u4f5c\u8005\u8f93\uff0c\u6c42\u5148\u624b\u6709\u65e0\u5fc5\u80dc\u7b56\u7565\uff0c\u82e5\u6709\u5219\u63a5\u4e0b\u6765\u8f93\u51fa\u7b2c\u4e00\u6b21\u64cd\u4f5c\u540e\u80fd\u591f\u786e\u4fdd\u83b7\u80dc\u7684\u6bcf\u4e2a\u8282\u70b9\u7684\u6743\u503c\uff08$1\\le n\\le 2\\times10^5$\uff0c$0\\le m\\le 2\\times10^5$\uff0c\u65f6\u9650 $2s$\uff09\u3002\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u50cf\u4e00\u4e2a Nim \u548c\u6709\u5411\u56fe\u6e38\u620f\u7684\u5408\u6210\u7248\uff0c\u4e8e\u662f\u8003\u8651\u8ba1\u7b97 SG \u503c\u4e0e Nim \u548c\u3002\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u6bcf\u4e00\u4e2a\u70b9\u7684 SG \u503c\uff0c\u4ee4 $f_x = \\bigoplus\\limits_{SG_p\\ =\\ x}a_p$\uff0c\u5f53\u4e14\u4ec5\u5f53 $\\forall x,f_x = 0$ \u65f6\u5148\u624b\u5fc5\u8d25\uff0c\u5426\u5219\u5148\u624b\u5fc5\u80dc\uff0c\u6211\u4eec\u7528 N - position \u548c P - position \u6765\u8bc1\u660e\u3002\n\n\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a P - position\uff0c\u5373 $\\forall x,f_x = 0$ \u65f6\uff0c\u4efb\u610f\u4fee\u6539\u90fd\u4f1a\u4f7f\u5f97 $\\exists x,f_x\\neq 0$\uff0c\u5177\u4f53\u601d\u8def\u540c Nim \u6e38\u620f\u3002\n\n\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a N - position\uff0c\u5373 $\\exists x,f_x\\neq 0$ \u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u627e\u5230\u6700\u5927\u7684 $x$ \u4f7f\u5f97 $f_x\\neq 0$\uff0c\u5e76\u627e\u5230\u4e00\u4e2a $u$ \u4f7f\u5f97 $SG_u = x,a_u\\oplus f_x < a_u$\uff08\u53c2\u8003 Nim \u6e38\u620f\u7684\u8bc1\u660e\uff0c\u4e00\u5b9a\u5b58\u5728\u8fd9\u6837\u7684 $u$\uff09\uff0c\u5c06 $a_u\\leftarrow a_u\\oplus f_x$\uff0c\u6b64\u65f6\u5c31\u5c06 $f_x$ \u6e05\u96f6\u4e86\u3002\u800c\u5bf9\u4e8e\u5176\u5b83 $f_y\\neq 0(y < x)$\uff0c\u7531\u4e8e SG \u503c\u7531 mex \u5f97\u5230\uff0c$u$ \u7684\u540e\u7ee7\u4e2d\u4e00\u5b9a\u5b58\u5728 $v\\in\\{v|\\ SG_v = y,f_y\\neq 0,y < x\\}$\uff0c\u6240\u4ee5\u53ea\u8981\u5c06 $a_v\\leftarrow a_v\\oplus f_y$ \u5373\u53ef\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<queue>\n#include<map>\n#define maxn 200005\n#define ll long long\nusing namespace std;\nint n,m,u,v,deg[maxn]; ll mmax,a[maxn],sg[maxn],xxor[maxn]; queue<int> q; map<int,int> mp[maxn];\nstruct node{int to,nex;}g[maxn],g2[maxn]; int head[maxn],head2[maxn],cnt=0,cnt2=0;\nvoid add(int from,int to){g[++cnt].to=to; g[cnt].nex=head[from]; head[from]=cnt;}\nvoid add2(int from,int to){g2[++cnt2].to=to; g2[cnt2].nex=head2[from]; head2[from]=cnt2;}\nint main(){\n\tscanf(\"%d%d\",&n,&m); for(int i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n\tfor(int i=1;i<=m;i++){scanf(\"%d%d\",&u,&v); add(v,u); add2(u,v); deg[u]++;}\n        for(int i=1;i<=n;i++) if(deg[i]==0) q.push(i);\n\twhile(!q.empty()){\n\t\tint top=q.front(); q.pop(); for(int i=0;;i++) if(!mp[top][i]){sg[top]=i; break;}\n\t\tfor(int i=head[top];i;i=g[i].nex)\n                        {deg[g[i].to]--; mp[g[i].to][sg[top]]=1; if(!deg[g[i].to]) q.push(g[i].to);}\n\t}\n\tfor(int i=1;i<=n;i++){xxor[sg[i]]^=a[i]; mmax=max(mmax,sg[i]);}\n\tfor(int i=mmax;i>=0;i--){\n\t\tif(xxor[i]){\n\t\t\tfor(int j=1;j<=n;j++) if(sg[j]==i&&((a[j]^xxor[i])<a[j])){\n                                a[j]^=xxor[i]; xxor[i]=0;\n                                for(int k=head2[j];k;k=g2[k].nex) if(xxor[sg[g2[k].to]])\n                                        {a[g2[k].to]^=xxor[sg[g2[k].to]]; xxor[sg[g2[k].to]]=0;} break;\n                        }\n\t\t\tprintf(\"WIN\\n\"); for(int i=1;i<=n;i++) printf(\"%lld \",a[i]); return 0;\n\t\t}\n\t\tif(i==0){printf(\"LOSE\"); return 0;}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1663076438,
        "uid": 294382,
        "name": "qzhwlzy",
        "ccfLevel": 5,
        "title": "CF1149E Election Promises \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u7684\u601d\u60f3\u8fd8\u662f\u5f88\u5999\u7684\u554a\u2026\u2026\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\u64cd\u4f5c\u7684\u6027\u8d28\u3002\u4e00\u6b21\u64cd\u4f5c\u53ef\u4ee5**\u51cf\u5c11**\u4e00\u4e2a\u70b9\u7684\u503c\u5e76**\u6539\u53d8**\u5176\u6240\u6709\u540e\u7ee7\u7684\u503c\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u5c06\u5177\u6709\u76f8\u4f3c\u5730\u4f4d\u7684\u70b9\u5206\u5165\u540c\u4e00\u7ec4\u3002\u5177\u4f53\u5730\uff0c\u4e00\u4e2a\u70b9\u5206\u7ec4\u7f16\u53f7\u4e3a\u5176\u6240\u6709\u540e\u7ee7\u7f16\u53f7\u7684 $\\operatorname{mex}$\u3002\u8fd9\u91cc $\\operatorname{mex}$ \u7684\u4f5c\u7528\u5c31\u662f\u4f7f\u5f97\u4e00\u4e2a\u70b9\u7684\u540e\u7ee7\u53ef\u4ee5\u8986\u76d6\u5230\u6240\u6709\u7f16\u53f7\u66f4\u5c0f\u7684\u7ec4\uff0c\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u5206\u7ec4\u7f16\u53f7\u5f88\u5927\u70b9\u4f7f\u5f97\u4e00\u6b21\u64cd\u4f5c\u7684\u6548\u76ca\u6700\u5927\u3002\n\n\u663e\u7136\u8fd9\u6837\u7684\u5206\u7ec4\u53ef\u4ee5\u7528\u4e00\u6b21\u62d3\u6251\u6392\u5e8f\u6c42\u51fa\u3002\u7531\u4e8e\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u5206\u7ec4\u7f16\u53f7\u4e3a $i$ \u7684\u70b9\u81f3\u5c11\u9700\u8981\u7684\u8fb9\u6570\u662f $i$\uff0c\u5904\u7406\u4e00\u4e2a\u5206\u7ec4\u7f16\u53f7 $i$ \u7684\u70b9\u9700\u8981\u7684\u8ba1\u7b97\u6b21\u6570\u4e5f\u662f $O(i)$ \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5904\u7406\u6240\u6709\u70b9\u7684\u5206\u7ec4\u7f16\u53f7\u7684\u603b\u590d\u6742\u5ea6\u662f $O(m)$ \u7684\u3002\n\n\u6c42\u51fa\u4e86\u5206\u7ec4\u4e4b\u540e\u6211\u4eec\u8003\u8651\u5982\u4f55\u5904\u7406\u4e00\u4e2a\u72b6\u6001\u7684\u80dc\u8d1f\u60c5\u51b5\u3002\u7531\u4e8e\u6211\u4eec\u5206\u7ec4\u5f97\u5230\u7684\u7ed3\u679c\u662f\u5728\u4e00\u4e2a\u7ec4\u5185\u4fee\u6539\u4e00\u4e2a\u503c\uff0c\u56e0\u6b64\u6211\u4eec\u60f3\u5230\u628a\u6bcf\u4e2a\u7ec4\u770b\u4f5c\u4e00\u4e2a\u7c7b\u4f3c Nim \u6e38\u620f\u7684\u4e1c\u897f\uff0c\u4f46\u662f\u5b83\u548c Nim \u4e0d\u540c\u7684\u5730\u65b9\u5728\u4e8e\u5b83\u53ef\u80fd\u53ef\u4ee5\u589e\u52a0\u67d0\u4e2a\u6570\u7684\u503c\u3002\u8fd9\u4e2a\u9650\u5236\u5bbd\u677e\u7684\u5730\u65b9\u6211\u4eec\u5728\u540e\u9762\u4f1a\u7528\u5230\u3002\n\n\u5148\u6c42\u51fa\u7b2c $i$ \u7ec4\u5185\u6240\u6709\u70b9 $h$ \u503c\u7684\u5f02\u6216\u548c $v_i$\uff0c\u73b0\u5728\u6211\u4eec\u8003\u8651 $v_i$ \u662f\u5426\u4e3a $0$\u3002\u4e0b\u9762\u7ed9\u51fa\u7ed3\u8bba\u4e3a\u5f53\u4e14\u4ec5\u5f53 $v_i$ \u5168\u4e3a $0$ \u65f6\u5148\u624b\u5fc5\u8d25\u3002\n\n\u663e\u7136\u5982\u679c $v_i$ \u5168\u4e3a $0$\uff0c\u5148\u624b\u65e0\u8bba\u5982\u4f55\u64cd\u4f5c\u81f3\u5c11\u4f1a\u6539\u53d8\u4e00\u4e2a $v_i$\uff0c\u53d8\u6210\u4e0d\u5168\u4e3a $0$ \u7684\u60c5\u51b5\u3002\n\n\u5982\u679c\u6709 $v_i$ \u4e0d\u4e3a $0$\uff0c\u6211\u4eec\u627e\u4f7f\u5f97 $v_i \\neq 0$ \u7684\u6700\u5927 $i$\uff0c\u8bbe\u5176\u4e3a $mxi$\u3002\u90a3\u4e48\u7b2c $mxi$ \u7ec4\u4e2d\u5fc5\u6709\u4e00\u70b9 $u$ \u4f7f\u5f97 $h_u \\operatorname{xor} v_{mxi}<h_u$\u3002\u8fd9\u4e2a\u548c Nim \u7c7b\u4f3c\u3002\u6211\u4eec\u5c06 $h_u$ \u53d8\u4e3a $h_u \\operatorname{xor} v_{mxi}$\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6bcf\u4e2a $i<mxi$\uff0c\u82e5 $v_i \\neq 0$ \u5219\u9009\u62e9 $u$ \u7684\u4e00\u4e2a\u5728\u7b2c $i$ \u7ec4\u4e2d\u7684\u540e\u7ee7 $t$\uff0c\u5c06 $h_t$ \u53d8\u4e3a $h_t \\operatorname{xor} v_{i}$\u3002\u6ce8\u610f\u5230\u8fd9\u91cc\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1 $h_t \\operatorname{xor} v_{i}<h_t$\uff0c\u8fd9\u662f\u548c Nim \u7684\u4e0d\u540c\u4e4b\u5904\u3002\n\n\u8fd9\u6837\u64cd\u4f5c\u540e\u6240\u6709 $v_i$ \u5747\u53d8\u6210\u4e86 $0$\u3002\u4e8e\u662f\u6211\u4eec\u5728 $O(m)$ \u7684\u65f6\u95f4\u5185\u89e3\u51b3\u4e86\u6b64\u9898\u3002\n\n\u5410\u69fd\uff1a\u7b2c\u4e00\u6b21\u4ea4\u7684\u65f6\u5019\u6211\u6ca1\u6709\u5728\u52a0\u8fb9\u65f6\u66f4\u65b0\u5ea6\u6570\u6570\u7ec4\u8fd8\u80fd\u8fc7 $11$ \u4e2a\u70b9\uff0c\u5c31\u79bb\u8c31\u3002\n\nCode:\n```cpp\n#include<queue>\n#include<cstdio>\n#define rg register\nusing std::queue;\nint head[200003],cnt;\nstruct edge\n{\n\tint nxt,to;\n}e[200003];\ninline void add(int x,int y)\n{\n\te[++cnt].nxt=head[x];\n\te[cnt].to=y,head[x]=cnt;\n}\nqueue<int>q;\nint n,top,mxi;\nint d[200003];\nint h[200003];\nint id[200003];\nint pos[200003];\nint val[200003];\nint vis[200003];\ninline void topo()\n{\n\trg int u;\n\tfor(rg int i=1;i<=n;++i)if(!d[i])q.push(i);\n\twhile(!q.empty())\n\t{\n\t\tu=q.front();q.pop(),pos[++top]=u;\n\t\tfor(rg int i=head[u],v;i;i=e[i].nxt)\n\t\t{\n\t\t\tv=e[i].to;--d[v];\n\t\t\tif(!d[v])q.push(v);\n\t\t}\n\t}\n\tfor(rg int i=top;i;--i)\n\t{\n\t\tu=pos[i];id[u]=0;\n\t\tfor(rg int j=head[u];j;j=e[j].nxt)vis[id[e[j].to]]=1;\n\t\twhile(vis[id[u]])++id[u];\n\t\tval[id[u]]^=h[u],(id[u]>mxi)&&(mxi=id[u]);\n\t\tfor(rg int j=head[u];j;j=e[j].nxt)vis[id[e[j].to]]=0;\n\t}\n}\nint m,x,y,mxx;\nint main()\n{\n\tscanf(\" %d %d\",&n,&m);\n\tfor(rg int i=1;i<=n;++i)scanf(\" %d\",&h[i]);\n\tfor(rg int i=0;i<m;++i)scanf(\" %d %d\",&x,&y),add(x,y),++d[y];\n\ttopo(),mxx=-1;\n\tfor(rg int i=0;i<=mxi;++i)if(val[i])mxx=i;\n\tif(mxx==-1)return 0&puts(\"LOSE\");\n\tputs(\"WIN\");\n\tfor(rg int u=1;u<=n;++u)\n\t{\n\t\tif(id[u]==mxx&&(h[u]^val[mxx])<h[u])\n\t\t{\n\t\t\th[u]^=val[mxx];\n\t\t\tfor(rg int i=head[u],v;i;i=e[i].nxt)\n\t\t\t{\n\t\t\t\tv=e[i].to;\n\t\t\t\tif(val[id[v]])h[v]^=val[id[v]],val[id[v]]=0;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(rg int i=1;i<=n;++i)printf(\"%d \",h[i]);\n\treturn 0;\n}\n```",
        "postTime": 1618985763,
        "uid": 59388,
        "name": "VinstaG173",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1149E \u3010Election Promises\u3011"
    },
    {
        "content": "[CF1149E](https://www.luogu.com.cn/problem/CF1149E)\n\n***\n\n~~\u535a\u5f08\u8bba\u771f\u597d\u73a9\u3002~~\n\n\u521a\u521a\u4e86\u89e3 SG \u51fd\u6570 $1ms$\uff0c\u5199\u51e0\u9053\u9898\u7ec3\u624b\u3002\n\n\u60f3\u8981\u6784\u9020\u51fa\u4e00\u79cd\u8ba1\u7b97 SG \u503c\u7684\u65b9\u6848\uff0c\u4f7f\u5f97\uff1a\n\n- \u7ed3\u675f\u6761\u4ef6\u65f6 SG \u503c\u4e3a $0$\uff1b\n- SG \u503c\u4e3a $0$ \u65f6\u64cd\u4f5c\u5fc5\u5b9a\u4f1a\u4f7f\u5f97 SG \u503c\u975e $0$\uff1b\n- SG \u503c\u975e\u96f6\u65f6\u5b58\u5728\u4e00\u79cd\u64cd\u4f5c\u65b9\u5f0f\u4f7f\u5f97\u64cd\u4f5c\u540e SG \u503c\u4e3a $0$\u3002\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u5224\u65ad\u80dc\u8d1f\u3002\n\n\n\u600e\u4e48\u529e\u5462\uff0cMEX \u786e\u5b9e\u662f\u4e2a\u795e\u5947\u7684\u4e1c\u897f\uff0c\u6211\u4eec\u8ba9 $u\\in S_i,i=mex\\{v_1,v_2,\\cdots,v_{deg_u}\\}$\uff0c$f(x) = \\bigoplus_{u\\in S_x} h_u$ \u5982\u679c $\\forall x, f(x)=0$ \u5148\u624b\u5fc5\u8d25\uff0c\u5426\u5219\u5fc5\u80dc\uff0c\u5373 SG \u662f\u5426\u4e3a $0$\u3002\n\n\u524d\u4e24\u4e2a\u8981\u6c42\u663e\u7136\u6ee1\u8db3\uff0c\u90a3\u4e48\u7b2c\u4e09\u4e2a\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff1f\n\n\u5047\u8bbe\u6b64\u65f6\u6709\u82e5\u5e72\u4e2a $x_0$ \u4f7f\u5f97 $f(x_0) > 0$\uff0c\u8bbe $x$ \u662f\u6700\u5927\u7684\u4f7f\u5f97 $f(x)$ \u975e\u96f6\u7684\u6570\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6240\u6709\u7684 $x_0 \\neq x$\uff0c\u53ea\u8981\u64cd\u4f5c\u4e00\u4e2a\u5c5e\u4e8e $S_x$ \u7684\u70b9\u4ee5\u53ca\u5b83\u80fd\u5230\u7684\u70b9\uff0c\u4e00\u5b9a\u53ef\u4ee5\u4f7f\u5f97 $\\forall x_0 \\neq x,f(x_0)=0$\u3002\uff08\u56e0\u4e3a\u662f\u6309\u7167 MEX \u5206\u7ec4\u7684\uff0c\u6240\u4ee5\u4e00\u5b9a\u80fd\u4f7f\u5f97\u9664\u4e86 $x$ \u4ee5\u5916\u7684 $f(x_0)=0$\uff09\u3002  \n\u90a3\u4e48\u662f\u5426\u4e00\u5b9a\u53ef\u4ee5\u8ba9 $f(x)$ \u4e5f\u53d8\u6210 $0$ \u5462\uff1f\u6ce8\u610f\u5230\u64cd\u4f5c\u70b9 $u$ \u65f6\uff0c${h'}_u < h_u$\uff0c\u6211\u4eec\u60f3\u8981 $h_u \\leftarrow f(x) \\oplus h_u$ \u5c31\u5fc5\u987b\u8981\u8ba9 $h_u > f(x) \\oplus h_u$\u3002\u5bf9\u4e8e $f(x)$ \u6700\u9ad8\u4f4d\u7684 $1$ \u627e\u5230\u4e00\u4e2a $u\\in S_x$ \u4f7f\u5f97 $h_u$ \u5728\u8fd9\u4e00\u4f4d\u4e0a\u4e5f\u662f $1$\uff0c\u90a3\u4e48 $f(x) \\oplus h_i$ **\u5728\u8fd9\u4e00\u4f4d\u4e0a\u4e00\u5b9a\u662f** $0$\uff0c\u5728\u66f4\u9ad8\u4f4d\u4e0a\uff0c$h_u$ \u548c $f(x) \\oplus h_i$ \u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u8fd9\u6837\u7684\u70b9\u4e00\u5b9a\u5b58\u5728\uff01\n\n\u5269\u4e0b\u6ca1\u4ec0\u4e48\u7ec6\u8282\uff0c\u4e71\u641e\u5c31\u884c\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace IO {\n#define ll long long\n    inline ll read() {\n        char c = getchar();\n        ll x = 0;\n        bool f = 1;\n        while (c < '0' || c > '9') {\n            if (c == '-')\n                f = 0;\n            c = getchar();\n        }\n        while (c >= '0' && c <= '9') {\n            x = (x << 1) + (x << 3) + (c ^ 48);\n            c = getchar();\n        }\n        return f ? x : ~(x - 1);\n    }\n    inline void write(ll x) {\n        if (x < 0) {\n            x = ~(x - 1);\n            putchar('-');\n        }\n        if (x > 9)\n            write(x / 10);\n        putchar(x % 10 + '0');\n    }\n#undef ll\n}\nusing namespace IO;\ntemplate <typename T>\n#define Clear(x) memset(x, 0, sizeof(x))\n#define SetN1(x) memset(x, -1, sizeof(x))\n#define UEdge(x, u, v) x[u].emplace_back(v), x[v].emplace_back(u)\n#define DEdge(x, u, v) x[u].emplace_back(v)\n#define eb(x) emplace_back(x)\n#define ep(x) emplace(x)\n#define ld long double\n#define ll long long\nll Pow(ll a, ll b) {\n    ll res = 1;\n    while (b) {\n        if (b & 1)\n            res *= a;\n        a *= a, b >>= 1;\n    }\n    return res;\n}\nll Pow(ll a, ll b, ll mod) {\n    ll res = 1;\n    while (b) {\n        if (b & 1)\n            res = res * a % mod;\n        a = a * a % mod, b >>= 1;\n    }\n    return res;\n}\nconst int maxn = 2e5 + 10;\nint gp[maxn];\nvector<int> pt[maxn];\nvector<int> G[maxn];\nvector<int> R[maxn];\nset<int> num[maxn];\nint sg[maxn];\nint h[maxn];\nint n, m;\nvoid dfs(int u) {\n    for (int v : G[u]) {\n        if (gp[v] == -1)\n            dfs(v);\n        num[u].ep(gp[v]);\n    }\n    for (int i = 0; i <= n; i++) {\n        if (!num[u].count(i)) {\n            gp[u] = i;\n            pt[i].eb(u);\n            break;\n        }\n    }\n    sg[gp[u]] ^= h[u];\n}\nsigned main() {\n    SetN1(gp);\n    n = read(), m = read();\n    for (int i = 1; i <= n; i++) {\n        h[i] = read();\n    }\n    for (int i = 1; i <= m; i++) {\n        int u = read(), v = read();\n        DEdge(G, u, v);\n        DEdge(R, v, u);\n    }\n    for (int i = 1; i <= n; i++) {\n        if (gp[i] == -1) {\n            int st = i;\n            while (R[st].size()) {\n                st = R[st].front();\n            }\n            dfs(st);\n        }\n    }\n    bool win = false;\n    for (int i = 0; i <= n; i++) {\n        if (sg[i]) {\n            win = true;\n            break;\n        }\n    }\n    if (!win) {\n        printf(\"LOSE\\n\");\n        return 0;\n    }\n    for (int i = n; ~i; i--) {\n        if (sg[i]) {\n            int u;\n            for (int j : pt[i]) {\n                if ((h[j] ^ sg[i]) < h[j]) {\n                    h[j] = h[j] ^ sg[i];\n                    sg[i] = 0;\n                    u = j;\n                    break;\n                }\n            }\n            for (int v : G[u]) {\n                if (sg[gp[v]]) {\n                    h[v] = sg[gp[v]] ^ h[v];\n                    sg[gp[v]] = 0;\n                }\n            }\n            break;\n        }\n    }\n    printf(\"WIN\\n\");\n    for (int i = 1; i <= n; i++) {\n        write(h[i]), putchar(' ');\n    }\n    putchar('\\n');\n    return 0;\n}\n```",
        "postTime": 1677315217,
        "uid": 401583,
        "name": "a_z_c",
        "ccfLevel": 6,
        "title": "CF1149E"
    },
    {
        "content": "### [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1149E)\n\n## \u9898\u610f\n\n- \u7ed9\u5b9a\u4e00\u5f20\u56fe\u3002\n\n- \u6bcf\u6b21\u64cd\u4f5c\u9009\u5b9a\u4e00\u4e2a\u70b9\uff0c\u8be5\u4f4d\u6743\u503c\u9700\u51cf\u53bb\u4e00\u4e2a\u6b63\u6570\u3002\uff08\u4e0d\u53ef\u6210\u4e3a\u8d1f\u6570\uff09\n\n- \u5bf9\u8be5\u70b9\u6709\u76f4\u8fde\u8fb9\u7684\u6240\u6709\u70b9\u8fdb\u884c\u4efb\u610f\u653e\u7f29\u3002\uff08\u4e0d\u53ef\u7f29\u81f3\u8d1f\u6570\uff09\n\n- \u7ec8\u5c40\u4e3a\u6240\u6709\u4f4d\u5168\u5f52\u96f6\u3002\n\n- \u95ee\u5982\u679c\u4e24\u4eba\u90fd\u5f88\u806a\u660e\uff0c\u5148\u624b\u80dc\u8fd8\u662f\u540e\u624b\u80dc\u3002\n\n### \u9898\u5916\u8bdd\uff08\n\n\u53ef\u4ee5\u4ece CF1451F \u91cc\u53d1\u73b0\u4e00\u4e2a\u7c7b\u4f3c\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u800c\u4e14\u90a3\u9053\u660e\u663e\u66f4\u597d\u60f3\uff0c\u5efa\u8bae\u5148\u505a\u90a3\u9053\u3002\uff08\n\n## Sol\n\n\u5f53\u505a\u5b81\u5df2\u7ecf\u505a\u8fc7\u5e76\u638c\u63e1\u4e86 CF1451F \u4e86qaq\u3002~~[\u53ef\u4ee5\u770b\u8fd9\u7bc7\u9898\u89e3\uff08\uff08\uff08](https://www.luogu.com.cn/blog/danieljiang/cf1451f-nullify-the-matrix-ti-xie-bo-yi)~~\n\n\u770b\u5230\u8fd9\u4e1c\u897f\uff0c\u7b2c\u4e00\u773c\u80fd\u60f3\u5230\u7684\u5c31\u662f $\\text{XOR}$\u3002\n\n\u4f46\u6211\u4eec\u8981\u8003\u8651\u7684\u662f\u5982\u4f55\u5206\u7ec4\uff0c\u8fd9\u8981\u6c42\u4e24\u79cd\u5c40\u9762\u5fc5\u987b\u53ef\u4ee5\u5207\u6362\u3002\n\n\u8003\u8651\u5230\u6709\u5411\u56fe\uff0c\u6709\u5e8f\uff0c\u4e0d\u96be\u60f3\u5230\u62d3\u6251\u5e8f\u3002\n\n\u90a3\u5c31\u5148\u62d3\u6251\u6392\u4e00\u4e0b\u5427qaq\u3002\n\n\u53ef\u4ee5\u7528\u62d3\u6251\u5e8f\u6c42\u51fa\u6bcf\u4e2a\u70b9\u7684 $\\text{mex}$\uff0c\u5176\u4e2d $\\text{mex}$ \u4ee5\u76f4\u8fde\u8fb9\u4e3a\u57fa\u7840\u3002\n\n\u56e0 $\\text{mex}$ \u80fd\u4fdd\u8bc1\u5f71\u54cd\u5230\u5168\u90e8 $i \\le \\text{mex}$ \u7684\u7ec4\u522b\uff0c\u8003\u8651\u4ee5 $\\text{mex}$ \u5206\u7ec4\u3002\n\n\u7136\u540e\u8003\u8651\u5207\u6362\u5c40\u9762\u3002\n\n\u90a3\u4e48 $\\forall i, sum_i=0$ \u5207\u6362\u5230 $\\exists i, sum_i>0$ \u968f\u4fbf\u64cd\u4f5c\u5c31\u884c\uff0c\u6211\u4eec\u6700\u4e3b\u8981\u7684\u8fd8\u662f\u53bb\u8bc1\u660e $\\exists i, sum_i>0$ \u5207\u6362\u5230 $\\forall i, sum_i=0$\u3002\n\n\u8003\u8651\u53d6 $max\\{i | sum_i >0\\}$\u3002\n\n\u7136\u540e\u548c CF1451F \u505a\u6cd5\u5c31\u4e00\u6837\u4e86\uff0c\u56e0\u4e3a\u7b2c\u4e00\u7ec4\u548c\u540e\u9762\u7684\u5904\u7406\u771f\u5c31\u6ca1\u6709\u5dee\u522b\u3002\uff08\n\n\u7136\u540e\u5c31\u5f97\u5230\u4e00\u6837\u7684\u7ed3\u8bba\u3002\uff08\n\n\u4f46\u8fd9\u9898\u8fd8\u8981\u6211\u4eec\u8f93\u51fa\u7b2c\u4e00\u7ec4\u64cd\u4f5c\u540e\u7684\u5404\u70b9\u6743\u3002\n\n\u8003\u8651\u5c31\u628a $\\exists i,sum_i>0$ \u8f6c\u6362\u6210 $\\forall i,sum_i=0$ \u7684\u6b65\u9aa4\u6a21\u62df\u4e00\u904d\u5373\u53efqaq\u3002\n\n### $\\text{Code}$\n\n```cpp\n// wish to get better qwq\n\n#include<bits/stdc++.h>\n#define re register int\n#define pb push_back\n\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T> void rd(T &x){\n\tll fl=1;x=0;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') fl=-fl;\n\tfor(;isdigit(c);c=getchar()) x=(x<<3)+(x<<1)+c-'0';\n\tx*=fl;\n}\nvoid wr(ll x){\n\tif(x<0) x=-x,putchar('-');\n\tif(x<10) putchar(x+'0');\n\tif(x>9) wr(x/10),putchar(x%10+'0');\n}\n\n// ---------- IO ---------- //\n\nconst int N=2e5+5,G=1005;\nint n,m,cnt,mex[N],hd[N],g;\nbool vst[N],qaq[G],del[G];\nll sum[G],h[N];\n\nstruct edge{int t,nxt;}e[N];\ninline void add(int x,int y){e[++cnt]=(edge){y,hd[x]};hd[x]=cnt;}\n\nvector<int> topo;\n\nbool dfs(int x){\n\tvst[x]=-1;\n\tfor(re i=hd[x];i;i=e[i].nxt){\n\t\tif(vst[e[i].t]==-1) return 0;\n\t\tif(vst[e[i].t]==0) if(!dfs(e[i].t)) return 0;\n\t}\n\tvst[x]=1;\n\ttopo.push_back(x);\n\treturn 1;\n}\n\ninline void toposort(){\n\tfor(re i=1;i<=n;i++) if(!vst[i]) dfs(i);\n//\treverse(topo.begin(),topo.end());\n}\n\n// ---------- toposort ---------- //\n\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\trd(n);rd(m);\n\tfor(re i=1;i<=n;i++) rd(h[i]);\n\tfor(re i=1;i<=m;i++){\n\t\tint u,v;rd(u);rd(v);\n\t\tadd(u,v);\n\t}\n\ttoposort();\n\tfor(re i=0;i<n;i++){\n\t\tint nw=topo[i];\n\t\tfor(re j=hd[nw];j;j=e[j].nxt) qaq[mex[e[j].t]]=1;\n\t\twhile(qaq[mex[nw]]) mex[nw]++;g=max(g,mex[nw]);\n\t\tsum[mex[nw]]^=h[nw];\n\t\tfor(re j=hd[nw];j;j=e[j].nxt) qaq[mex[e[j].t]]=0;\n\t}\n\tfor(re i=g;i>=0;i--)\n\t\tif(sum[i]){\n\t\t\tputs(\"WIN\");\n\t\t\tfor(re j=1;j<=n;j++)\n\t\t\t\tif(mex[j]==i&&(h[j]^sum[i])<h[j]){\n\t\t\t\t\th[j]^=sum[i];del[i]=1;\n\t\t\t\t\tfor(re k=hd[j];k;k=e[k].nxt)\n\t\t\t\t\t\tif(sum[mex[e[k].t]]&&!del[mex[e[k].t]]) h[e[k].t]^=sum[mex[e[k].t]],del[mex[e[k].t]]=1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tfor(re j=1;j<=n;j++) wr(h[j]),putchar(' ');puts(\"\");\n\t\t\treturn 0;\n\t\t}\n\tputs(\"LOSE\");\n\treturn 0;\n}\n\n// ---------- Main ---------- //\n\n```",
        "postTime": 1606399811,
        "uid": 83999,
        "name": "Demoe",
        "ccfLevel": 7,
        "title": "CF1149E Election Promises \u9898\u89e3 \u535a\u5f08"
    },
    {
        "content": "\u795e\u4ed9\u535a\u5f08\uff01\n\n\u5bf9\u7ed3\u70b9\u5206\u7ec4\uff0c\u5b9a\u4e49\u7ed3\u70b9 $u$ \u7684 **\u7ec4\u522b** $\\text{Id}_u$ \u4e3a $u$ \u7684\u540e\u7ee7\u7ed3\u70b9 $\\text{Id}$ \u7684 $\\operatorname{mex}$\u3002\n\n\u5b9a\u4e49\u7ec4\u522b\u4e3a $x$ \u7684\u70b9\u7684\u96c6\u5408\u4e3a $S_x$\uff0c\u7ec4\u522b $x$ \u7684 **\u6743\u503c** \u4e3a $S_x$ \u4e2d\u6240\u6709\u7ed3\u70b9\u503c\u7684\u5f02\u6216\u548c\u3002\n\n\u4e00\u4e9b\u663e\u800c\u6613\u89c1\u7684\u6027\u8d28\uff1a\n\n- \u5bf9\u4e8e\u4e00\u6761\u8fb9 $u\\to v$\uff0c$\\text{Id}_u\\ne \\text{Id}_v$\u3002\n- \u5bf9\u4e8e $u$\uff0c\u6ee1\u8db3\u5b58\u5728 $u\\to v$\uff0c$\\text{Id}_v$ \u6784\u6210\u7684\u96c6\u5408\u5305\u542b\u6240\u6709\u5c0f\u4e8e $\\text{Id}_u$ \u7684\u6570\u3002\n\n\u4e00\u4e9b\u6316\u6398\u53ef\u5f97\u7684\u6027\u8d28\uff1a\n\n- \u5bf9\u4e8e\u7ec4\u522b $x$\uff0c\u82e5\u6743\u503c\u4e3a\u96f6\uff0c\u64cd\u7eb5 $S_x$ \u4e2d\u7684\u70b9\u4e00\u5b9a\u4f1a\u5bfc\u81f4\u6743\u503c\u975e\u96f6\u3002\n- \u5bf9\u4e8e\u7ec4\u522b $x$\uff0c\u82e5\u6743\u503c\u975e\u96f6\uff0c\u64cd\u7eb5 $S_x$ \u4e2d\u7684\u70b9\u4e00\u5b9a**\u53ef\u4ee5**\u5bfc\u81f4 $y\\le x$\uff0c$y$ \u7684\u6743\u503c\u4e3a $0$\u3002\n\n\u56e0\u6b64\uff1a\n\n- \u82e5\u5f53\u524d\u72b6\u6001\u4e2d\uff0c\u6240\u6709\u7ec4\u522b\u7684\u6743\u503c\u5747\u4e3a\u96f6\uff0c\u5148\u624b\u5fc5\u8d25\uff1b\u5426\u5219\u5fc5\u80dc\uff0c\u6b64\u65f6\u64cd\u7eb5\u6743\u503c\u4e0d\u4e3a $0$ \u7684\u6700\u5927\u7f16\u53f7\u7684\u7ec4\u4e2d\uff0c\u8be5\u7ec4\u7684\u6743\u503c\u6700\u9ad8\u4f4d \u5305\u542b\u7684\u70b9\u5373\u53ef\u505a\u5230\uff0c\u7c7b\u4f3c Nim\u3002\n\n\n\n",
        "postTime": 1685718596,
        "uid": 996129,
        "name": "Fykst",
        "ccfLevel": 0,
        "title": "CF1149E Election Promises"
    },
    {
        "content": "\u8003\u8651\u7528 $\\text{SG}$ \u51fd\u6570\u6765\u89e3\u51b3\u672c\u9898\uff0c\u56e0\u4e3a\u964d\u4f4e\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u540e\uff0c\u53ef\u4ee5\u4efb\u610f\u4fee\u6539\u8be5\u70b9\u7684\u540e\u7ee7\u8282\u70b9\u7684\u70b9\u6743\uff0c\u6240\u4ee5\u4e00\u4e2a\u72b6\u6001\u53ef\u4ee5\u5230\u8fbe\u7684\u72b6\u6001\u662f\u6709\u65e0\u7a77\u591a\u4e2a\u7684\u3002\n\n\u8bbe $w_k$ \u4e3a $k$ \u9636\u65e0\u7a77\u5927\u3002\u82e5\u4e00\u4e2a\u8282\u70b9\u6ca1\u6709\u51fa\u8fb9\uff0c\u5219\u5176 $\\text{SG}$ \u503c\u4e3a $w_0$\u3002\u5bf9\u4e8e\u65e0\u7a77\u5927\uff0c$\\text{SG}$ \u503c\u4e5f\u662f\u6ee1\u8db3 $\\text{mex}$ \u8fd0\u7b97\u7684\uff0c\u5373\u82e5\u4e00\u4e2a\u8282\u70b9\u7684\u540e\u7ee7\u8282\u70b9\u7684 $\\text{SG}$ \u503c\u51fa\u73b0\u4e86 $w_0,w_1,\\dots,w_{k-1}$\uff0c\u5219\u8be5\u70b9\u7684 $\\text{SG}$ \u503c\u4e3a $w_k$\u3002\n\n\u56e0\u4e3a\u56fe\u662f $DAG$\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u62d3\u6251\u6392\u5e8f\u5904\u7406\u51fa $\\text{SG}$ \u503c\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u72b6\u6001\uff0c\u82e5\u5bf9\u4e8e $\\forall k \\in [0,n]$\uff0c\u90fd\u6ee1\u8db3\uff1a\n$$\n\\large\\underset{\\text{SG}(x)=w_k}{\\text{xor}}\\ v_x=0\n$$\n\u5219\u8be5\u72b6\u6001\u4e3a\u5fc5\u8d25\u72b6\u6001\u3002\u6240\u4ee5\u5148\u624b\u8981\u5c06\u81ea\u5df1\u5f53\u524d\u7684\u72b6\u6001\u8f6c\u5316\u4e3a\u6bcf\u4e2a\u65e0\u7a77\u5927\u7684\u5f02\u6216\u548c\u90fd\u4e3a $0$ \u7684\u72b6\u6001\u7ed9\u540e\u624b\u3002\n\n\u8003\u8651\u5982\u4f55\u6784\u9020\u65b9\u6848\u3002\u5148\u627e\u5230\u6700\u5927\u7684\u4e0d\u6ee1\u8db3\u5f02\u6216\u548c\u4e3a $0$ \u7684 $k$\uff0c\u7136\u540e\u9009\u4e00\u4e2a $\\text{SG}$ \u503c\u4e3a $w_k$ \u7684\u70b9 $x$\uff0c\u5c06\u5176\u70b9\u6743\u5f02\u6216\u4e0a $w_k$ \u7684\u5f02\u6216\u548c\uff0c\u4f7f $w_k$ \u7684\u5f02\u6216\u548c\u53d8\u4e3a $0$\uff0c\u8fd9\u91cc\u8981\u4fdd\u8bc1\u5f02\u6216\u540e\u5f97\u5230\u7684\u503c\u6bd4\u539f\u5148\u7684\u503c\u5c0f\u3002\u6839\u636e $\\text{mex}$ \u7684\u5b9a\u4e49\uff0c\u5bf9\u4e8e $\\forall k \\in [0,k-1]$\uff0c\u70b9 $x$ \u90fd\u53ef\u4ee5\u5230\u8fbe $\\text{SG}$ \u503c\u4e3a $w_k$ \u7684\u81f3\u5c11\u4e00\u4e2a\u70b9\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u70b9\u82e5\u5176\u5bf9\u5e94\u7684\u65e0\u7a77\u5927\u7684\u5f02\u6216\u548c\u4e0d\u4e3a $0$\uff0c\u7528\u540c\u6837\u7684\u65b9\u6cd5\u5c06\u5176\u8c03\u6574\u4e3a $0$ \u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define maxn 200010\nusing namespace std;\ntemplate<typename T> inline void read(T &x)\n{\n    x=0;char c=getchar();bool flag=false;\n    while(!isdigit(c)){if(c=='-')flag=true;c=getchar();}\n    while(isdigit(c)){x=(x<<1)+(x<<3)+(c^48);c=getchar();}\n    if(flag)x=-x;\n}\nint n,m;\nint v[maxn],w[maxn],s[maxn],d[maxn],tag[maxn];\nvector<int> ve[maxn];\nstruct edge\n{\n    int to,nxt;\n}e[maxn];\nint head[maxn],edge_cnt;\nvoid add(int from,int to)\n{\n    e[++edge_cnt]={to,head[from]},head[from]=edge_cnt;\n}\nvoid topo()\n{\n    queue<int> q;\n    for(int i=1;i<=n;++i)\n        if(!d[i])\n            q.push(i);\n    while(!q.empty())\n    {\n        int x=q.front();\n        q.pop();\n        for(int i=head[x];i;i=e[i].nxt)\n            if(--d[e[i].to]==0)\n                q.push(e[i].to);\n        for(int i=0;i<ve[x].size();++i) tag[w[ve[x][i]]]=x;\n        while(tag[w[x]]==x) w[x]++;\n        s[w[x]]^=v[x];\n    }\n}\nint main()\n{\n    read(n),read(m);\n    for(int i=1;i<=n;++i) read(v[i]);\n    for(int i=1;i<=m;++i)\n    {\n        int x,y;\n        read(x),read(y);\n        ve[x].push_back(y),add(y,x),d[x]++;\n    }\n    topo();\n    for(int i=n;i>=0;--i)\n    {\n        if(!s[i]) continue;\n        int pos;\n        for(int j=1;j<=n;++j)\n            if(w[j]==i&&v[j]>(v[j]^s[i]))\n                pos=j;\n        v[pos]^=s[i];\n        for(int j=0;j<ve[pos].size();++j)\n        {\n            int x=ve[pos][j];\n            v[x]^=s[w[x]],s[w[x]]=0;\n        }\n        puts(\"WIN\");\n        for(int j=1;j<=n;++j) printf(\"%d \",v[j]);\n        return 0;\n    }\n    puts(\"LOSE\");\n    return 0;\n}\n```",
        "postTime": 1600953490,
        "uid": 172489,
        "name": "lhm_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1149E \u3010Election Promises\u3011"
    },
    {
        "content": "## \u9898\u89e3\u601d\u8def\n\n\u9996\u5148\uff0c\u5148\u5bf9\u539f\u56fe\u8fdb\u884c\u62d3\u6251\u6392\u5e8f\u3002\n\n\u6211\u4eec\u6c42\u51fa\u6bcf\u4e2a\u70b9\u7684 SG \u503c\u3002\n\n\u90a3\u4e48 $u$ \u70b9\u7684 SG \u503c\uff0c\u5373\uff1a$SG(u) = \\operatorname{mex}_{v\\in son_u}(SG(v))$\u3002\n\n\u7136\u540e\u6c42\u51fa $sum_x = \\operatorname{xor}_{SG(u) = x} a_u$\n\n\u90a3\u4e48\u5148\u624b\u5fc5\u8d62\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728 $sum_x$ \u975e\u96f6\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u627e\u5230\u6700\u5927\u7684 $i$ \u4f7f\u5f97 $sum_x$ \u975e\u96f6\u3002\n\n\u7136\u540e\u5bf9\u4e8e $i$\uff0c\u5f53\u6709\u4e00\u4e2a $u$ \u6ee1\u8db3\uff0c$SG_u=i$ \u4e14 $w_u \\oplus sum_i < w_u$\uff0c\u5c31\u662f\u5b58\u5728\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684 $u$\u3002\n\n\u90a3\u4e48\u5c31\u4fee\u6539 $w_i$\uff0c\u7136\u540e\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n\n## AC CODE\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 200010;\nint n, m;\nint w[N];//\u8bfb\u5165\u7684\u6570\u7ec4\nint d[N];//\u5ea6\u6570\uff0ctopsort\u65f6\u8981\u7528\u7684\u5ea6\u6570\nint SG[N], sum[N];//\u8fd9\u4e2a\u5206\u522b\u5c31\u662fSG\u51fd\u6570\uff0c\u548cSG(x)=i\u7684w_i\u4e4b\u548c\nvector<int> e[N], p;//\u5b58\u8fb9\u7684\uff0cp\u662ftopsort\u7684\u987a\u5e8f\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; ++i)\n\t\tscanf(\"%d\", &w[i]);\n\tfor (int i = 1; i <= m; ++i) {\n\t\tint u, v;\n\t\tscanf(\"%d%d\", &u, &v);\n\t\td[v] ++;\n\t\te[u].push_back(v);\n\t}\n\t//================topsort================\n\tqueue<int> q;\n\tfor (int i = 1; i <= n; ++i)\n\t\tif (!d[i])\n\t\t\tq.push(i);\n\twhile (q.size()) {\n\t\tint t = q.front();\n\t\tq.pop();\n\t\tp.push_back(t);\n\t\tfor (auto v : e[t])\n\t\t\tif (!--d[v])\n\t\t\t\tq.push(v);\n\t}\n\t//================topsort end================\n\tfor (int i = p.size() - 1; i >= 0; --i) {//\u8ba1\u7b97SG\u51fd\u6570\n\t\tset<int> mex;\n\t\tfor (auto v : e[p[i]])\n\t\t\tmex.insert(SG[v]);\n\t\tfor (int j = 0; ; ++j) {\n\t\t\tif (!mex.count(j)) {\n\t\t\t\tSG[p[i]] = j;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i = n; i; --i)\n\t\tsum[SG[i]] ^= w[i];//\u8ba1\u7b97SG\u503c\u4e3aSG(i)\u7684w[i]\u7684\u5f02\u6216\u548c\n\tfor (int i = n - 1; i >= 0; --i) {\n\t\tif (sum[i]) {//\u8fd9\u4e2a\u503c\u4e0d\u662f0\n\t\t\tputs(\"WIN\");//\u4e00\u5b9a\u80fd\u8d62\u3002\n\t\t\tfor (int u = 1; u <= n; ++u) {\n\t\t\t\tif (SG[u] == i && (w[u] ^ sum[i]) < w[u]) {\n\t\t\t\t\tw[u] ^= sum[i];\n\t\t\t\t\tfor (auto v : e[u]) {\n\t\t\t\t\t\tw[v] ^= sum[SG[v]];\n\t\t\t\t\t\tsum[SG[v]] = 0;//\u53ea\u6709\u4e00\u6b21\u4fee\u6539\uff0c\u6240\u4ee5\u4fee\u6539\u5b8c\u4e86\u8981\u521d\u59cb\u5316\u62100\u3002\n\t\t\t\t\t}\n\t\t\t\t\tfor (int j = 1; j <= n; ++j) printf(\"%d \", w[j]);\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tputs(\"LOSE\");\n\treturn 0;\n}\n```",
        "postTime": 1669987040,
        "uid": 528430,
        "name": "FiraCode",
        "ccfLevel": 0,
        "title": "CF1149Etj"
    }
]
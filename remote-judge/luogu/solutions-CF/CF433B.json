[
    {
        "content": "## Content\n\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u7ec4 $a_1,a_2,a_3,...,a_n$\u3002\u6709 $m$ \u6b21\u8be2\u95ee\uff0c\u8be2\u95ee\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a\n\n- $1~l~r$\uff0c\u6c42 $\\sum\\limits_{i=l}^ra_i$\u3002\n- $2~l~r$\uff0c\u5c06\u6570\u7ec4\u975e\u964d\u5e8f\u6392\u5217\u540e\u518d\u4f9d\u6b21\u6807\u53f7\uff0c\u7136\u540e\u518d\u6c42 $\\sum\\limits_{i=l}^ra_i$\u3002\n\n**\u6570\u636e\u8303\u56f4\uff1a$1\\leqslant l\\leqslant r\\leqslant n\\leqslant 10^5,1\\leqslant m\\leqslant 10^5,1\\leqslant a_i\\leqslant 10^9$\u3002**\n## Solution\n\u8fd9\u9053\u9898\u65e8\u5728\u8003\u5bdf\u5bf9\u524d\u7f00\u548c\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u8bf4\u8fd9\u9053\u9898\u76ee\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u5f88\u597d\u5730\u6c42\u89e3\u3002\u5177\u4f53\u5982\u4e0b\uff1a\n\n\u6211\u4eec\u5148\u5c06\u6ca1\u6709\u6392\u5e8f\u7684\u6570\u7ec4\u6c42\u51fa\u4ed6\u4eec\u7684\u524d\u7f00\u548c $s_i=\\sum\\limits_{j=1}^ia_j$\uff0c\u7136\u540e\u518d\u6309\u7167\u9898\u76ee\u8981\u6c42\u6392\u5e8f\u5f97\u5230 $a'$ \u6570\u7ec4\uff0c\u518d\u6c42\u51fa $s'_i=\\sum\\limits_{j=1}^ia_j$\u3002\u518d\u63a5\u7740\uff0c\u6211\u4eec\u6839\u636e\u4e24\u79cd\u4e0d\u540c\u7684\u64cd\u4f5c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1. \u5bf9\u4e8e\u7b2c\u4e00\u79cd\u64cd\u4f5c\uff0c\u6211\u4eec\u77e5\u9053\uff1a$s_{l-1}=\\sum\\limits_{i=1}^{l-1} a_i,s_r=\\sum\\limits_{i=1}^n a_i$\u3002\u7531\u6b64\u6211\u4eec\u5f97\u5230 $s_r-s_{l-1}=a_r+a_{r-1}+...+a_l+a_{l-1}+...+a_1-(a_l+a_{l-1}+...+a_l)=a_l+a_{l+1}+...+a_r$\u3002\u6b63\u597d\u5c31\u662f\u6211\u4eec\u6240\u8981\u6c42\u7684 $[l,r]$ \u8fd9\u4e2a\u533a\u95f4\u5185\u6240\u6709\u6570\u7684\u603b\u548c\u3002\u7531\u6b64\u6211\u4eec\u5c31\u77e5\u9053\u4e86\uff0c\u7b2c\u4e00\u79cd\u64cd\u4f5c\u7684\u7b54\u6848\u5c31\u662f $s_r-s_{l-1}$\u3002\n2. \u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u64cd\u4f5c\uff0c\u548c\u7b2c\u4e00\u79cd\u64cd\u4f5c\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u53d8\u6210\u4e86\u6392\u5e8f\u540e\u7684\u6570\u7ec4\u7684\u524d\u7f00\u548c\u7f62\u4e86\uff0c\u9664\u4e86\u6392\u5e8f\u4ee5\u5916\u51e0\u4e4e\u6ca1\u4ec0\u4e48\u5dee\u522b\uff0c\u7b54\u6848\u5c31\u662f $s'_r-s'_{l-1}$\u3002\n\n## Code\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nint n, m, a1[100007], a2[100007];\nlong long sum[3][100007];\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; ++i) {\n\t\tscanf(\"%d\", &a1[i]);\n\t\ta2[i] = a1[i];\n\t}\n\tsort(a2 + 1, a2 + n + 1);\n\tfor(int i = 1; i <= n; ++i)\n\t\tsum[1][i] = sum[1][i - 1] + a1[i], sum[2][i] = sum[2][i - 1] + a2[i];\n\tscanf(\"%d\", &m);\n\twhile(m--) {\n\t\tint opt, l, r;\n\t\tscanf(\"%d%d%d\", &opt, &l, &r);\n\t\tprintf(\"%lld\\n\", sum[opt][r] - sum[opt][l - 1]);\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1602769874,
        "uid": 112917,
        "name": "Eason_AC",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF433B \u3010Kuriyama Mirai's Stones\u3011"
    },
    {
        "content": "#### \u7b2c\u4e00\u79d2\u770b\u5230\u8fd9\u9053\u9898\u4e4b\u540e\u5c31\u60f3\u5230\u4e86\u6a21\u62df\uff0c\u7136\u540e\u5199\u4e86\u8fd9\u4e2a\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\nlong long val1[100005],val2[100005];\n\nint main()\n{\n    int n,m;\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    {\n        cin>>val1[i];\n        val2[i]=val1[i];\n    }  //\u8bfb\u5165\n    sort(val2+1,val2+1+n); //\u5c06\u628aval2\u6392\u5e8f\u3002\n    cin>>m;\n    while(m--)\n    {\n        int type,r,l;\n        long long ans=0;\n        cin>>type>>l>>r;  //\u6bcf\u6b21\u67e5\u8be2\u3002\n        if(type==1)  //type\u4e3a1\n        {\n            for(int i=l;i<=r;i++)\n            {\n                ans+=val1[i]; //\u7528val1\u8ba1\u7b97\u3002\n            }\n        }\n        else\n        {\n            for(int i=l;i<=r;i++)\n            {\n                ans+=val2[i];\n            }            \n        }\n        cout<<ans<<endl;//\u8f93\u51fa\u7b54\u6848\u3002\n    }\n    return 0;\n}\n```\n### But\uff0c\u5b8c\u7f8e\u7684 TLE \u4e86......\n#### \u6240\u4ee5\u8fd9\u9053\u9898\u8fd8\u662f\u8981\u7528 **\u524d\u7f00\u548c**\uff01\n\n\u5949\u4e0a\u6211\u7684AC\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\nlong long val1[100005],val2[100005];\nlong long s1[100005],s2[100005];  //\u8bb0\u5f55val1,val2\u7684\u524d\u7f00\u548c\n\nint main()\n{\n    int n,m;\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    {\n        cin>>val1[i];\n        val2[i]=val1[i];\n    }  //\u8bfb\u5165\n    sort(val2+1,val2+1+n);  //\u6392\u5e8f\n    for(int i=1;i<=n;i++)\n    {\n        s1[i]=s1[i-1]+val1[i];\n        s2[i]=s2[i-1]+val2[i];\n    }  //\u8ba1\u7b97\u524d\u7f00\u548c\n    cin>>m;\n    while(m--)\n    {\n        int type,r,l;\n        cin>>type>>l>>r;  //\u6bcf\u6b21\u67e5\u8be2\n        if(type==1)\n        {\n            cout<<s1[r]-s1[l-1]<<endl;\n        }\n        else\n        {\n            cout<<s2[r]-s2[l-1]<<endl;\n        }  //\u8ba1\u7b97\u7b54\u6848\u3002\n    }\n    return 0;\n}\n```\n\u62dc\u62dc\uff01",
        "postTime": 1582685121,
        "uid": 291314,
        "name": "MrFish",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF433B \u3010Kuriyama Mirai's Stones\u3011"
    },
    {
        "content": "# \u601d\u8def\n\n\u770b\u5230\u8fd9\u9898\uff0c\u6700\u66b4\u529b\u7684\u65b9\u6cd5\u4e00\u5b9a\u662f\u9700\u8981\u6392\u5e8f\u5219\u6392\u5e8f\uff1b\u53cd\u4e4b\uff0c\u6062\u590d\u539f\u6837\u3002\u6700\u540e\u679a\u4e3e $\\left[ l,r\\right]$ \u4e4b\u95f4\u7684\u8303\u56f4\u6c42\u548c\u3002\n\n\u6beb\u65e0\u7591\u95ee\uff0c\u80af\u5b9a\u4f1a $\\texttt{TLE}$\u3002\u4f1a\u53d1\u73b0\uff0c\u6709\u4e00\u4e0b\u51e0\u4e2a\u4f18\u5316\uff1a\n\n1. \u7528\u4e24\u4e2a\u6570\u7ec4\u5b58\u5df2\u6392\u5e8f\u548c\u672a\u6392\u5e8f\u7684\u539f\u6570\u7ec4\n2. \u56e0\u4e3a\u6709 $\\forall 1 \\leq l \\leq r \\leq n \\sum ^ r _ {i = l} = \\sum ^ r _ {i = 1} - \\sum ^ {l - 1} _ {i = l - 1}$ \u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u548c\u3002\n\n------------\n\n#  \u4ee3\u7801\n\n```cpp\n# include <bits/stdc++.h>\nusing namespace std;\n# define int long long\nconst int N = 1e5 + 10;\nint n, m, a[N], aa[N];\nint sum[3][N];\nsigned main()\n{\n    cin >> n;\n    for (int i = 1; i <= n; ++i)\n        cin >> a[i], aa[i] = a[i];\n    sort(aa + 1, aa + n + 1);//\u6392\u5e8f\n    for (int i = 1; i <= n; ++i) {\n        sum[1][i] = sum[1][i - 1] + a[i];\n        sum[2][i] = sum[2][i - 1] + aa[i];\n    }//\u524d\u7f00\u548c\n    cin >> m;\n    while (m--) {\n        int op, l, r;\n        cin >> op >> l >> r;\n        cout <<  sum[op][r] - sum[op][l - 1] << endl;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1659155816,
        "uid": 531746,
        "name": "fengguangxi",
        "ccfLevel": 0,
        "title": "CF433B Kuriyama Mirai's Stones \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u7b80\u5316\u548c\u5206\u6790\uff1a\n\u4e3a\u4e86\u66f4\u52a0\u5feb\u901f\u7684\u6c42\u51fa\u7b54\u6848\uff0c\u597d\u50cf\u6ca1\u524d\u7f00\u548c\u5feb\u901f\u3002   \n\u4e3a\u4e86\u5927\u5bb6\u66f4\u597d\u7684\u7406\u89e3\u7ebf\u6bb5\u6811\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u7ebf\u6bb5\u6811\u3002 \n\n\u5982\u679c\u60a8\u5e76\u4e0d\u4e86\u89e3\u7ebf\u6bb5\u6811\uff0c\u53ef\u4ee5\u8f6c\u6218\u6a21\u677f\u3002   \n\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u7ebf\u6bb5\u6811\u53ef\u4ee5\u5feb\u901f\u6c42\u533a\u95f4\u548c\uff0c\u4e8e\u662f\u6211\u4eec\u5efa\u4e24\u68f5\u6811\u3002   \n\u4e00\u4e2a\u662f\u539f\u6765\u6570\u7ec4\uff0c\u4e00\u4e2a\u662f\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u3002   \n\u6bcf\u6b21\u67e5\u8be2\u5206\u522b\u7528\u4e0d\u540c\u7684\u7ebf\u6bb5\u6811\u533a\u95f4\u548c\u5c31\u884c\u4e86\u3002     \n\n### Solution:\n\n```cpp\n#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef double db;\n\nconst int N=4e5+50;\nconst int M=1e5+50;\n\ninline ll read(){\n    ll x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-')\n            f=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    return x*f;\n}\n\nll n,m;\nll v[N];\n\nll ans1[N],ans2[N];\nll ls(ll x){return x<<1;}\nll rs(ll x){return x<<1|1;}\nvoid push_up1(ll p){\n\tans1[p]=ans1[ls(p)]+ans1[rs(p)];\t\n}\nvoid push_up2(ll p){\n\tans2[p]=ans2[ls(p)]+ans2[rs(p)];\n}\nvoid build1(ll p,ll l,ll r){\n\tif(l==r){ans1[p]=v[l];return;}\n\tll mid=(l+r)>>1;\n\tbuild1(ls(p),l,mid);\n\tbuild1(rs(p),mid+1,r);\n\tpush_up1(p);\n}\nvoid build2(ll p,ll l,ll r){\n\tif(l==r){ans2[p]=v[l];return;}\n\tll mid=(l+r)>>1;\n\tbuild2(ls(p),l,mid);\n\tbuild2(rs(p),mid+1,r);\n\tpush_up2(p);\n}\nll query1(ll nx,ll ny,ll l,ll r,ll p){\n\tll res=0;\n\tif(nx<=l&&r<=ny) return ans1[p];\n\tll mid=(l+r)>>1;\n\tif(nx<=mid) res+=query1(nx,ny,l,mid,ls(p));\n\tif(ny>mid) res+=query1(nx,ny,mid+1,r,rs(p));\n\treturn res;\n}\nll query2(ll nx,ll ny,ll l,ll r,ll p){\n\tll res=0;\n\tif(nx<=l&&r<=ny) return ans2[p];\n\tll mid=(l+r)>>1;\n\tif(nx<=mid) res+=query2(nx,ny,l,mid,ls(p));\n\tif(ny>mid) res+=query2(nx,ny,mid+1,r,rs(p));\n\treturn res;\n}\nint main()\n{\n\tn=read();\n\tfor(int i=1;i<=n;++i) v[i]=read();\n\tbuild1(1,1,n);\n\tsort(v+1,v+n+1);\n\tbuild2(1,1,n);\n\tm=read();\n\tfor(int i=1;i<=m;++i){\n\t\tll op,l,r;\n\t\top=read();\n\t\tif(op==1){\n\t\t\tl=read(),r=read();\n\t\t\tprintf(\"%lld\\n\",query1(l,r,1,n,1));\n\t\t}else{\n\t\t\tl=read(),r=read();\n\t\t\tprintf(\"%lld\\n\",query2(l,r,1,n,1));\n\t\t}\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1658666642,
        "uid": 750803,
        "name": "_Revenge_",
        "ccfLevel": 0,
        "title": "CF433B"
    }
]
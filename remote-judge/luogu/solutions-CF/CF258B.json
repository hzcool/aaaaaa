[
    {
        "content": "### \u9898\u610f\n\n7\u4e2a\u4eba\u5728[1,m]\u533a\u95f4\u5185\u53d6\u6570\uff0c\u6c42\u7b2c\u4e00\u4e2a\u4eba\u9009\u7684\u6570\u76844\u548c7\u7684\u4e2a\u6570\u5927\u4e8e\u5176\u4ed6\u4eba\u76844\u548c7\u4e2a\u6570\u603b\u548c\u7684\u65b9\u6848\u6570\u3002\n\n$m \\in [1,1e9] $\n\n### \u601d\u8def1\n\n\u6211\u4eec\u9996\u5148\u8003\u8651\u5904\u7406\u51fa\u5bf9\u5e944\u548c7\u4e2a\u6570\u7684\u603b\u6570\uff0c\u56e0\u4e3a\u4f4d\u6570\u5f88\u5c0f\u4eba\u4e5f\u53ea\u67097\u4e2a\uff0c\u6240\u4ee5\u5904\u7406\u5b8c\u4e4b\u540e\u76f4\u63a5dfs\u6c42\u89e3\u5373\u53ef\u3002\u73b0\u5728\u5c31\u662f\u60f3\u7740\u5982\u4f55\u6c42\u51fa\u8fd9\u4e2acnt\u6570\u7ec4\uff0c\u8003\u8651\u6570\u4f4ddp\uff0c$dp[i][j]$\u8868\u793a\u6709i\u4f4d\uff0c\u6709j\u4e2a\u6570\u662f4\u62167\u7684\u79cd\u6570\u3002\u5f53\u7136\u8fd9\u8fd8\u662f\u4e0d\u591f\u7684\uff0c\u56e0\u4e3a\u8981\u628a\u533a\u95f4\u7f29\u5c0f\u5230m\u4ee5\u5185\uff0c\u6240\u4ee5\u53ef\u4ee5\u5148\u5c06m\u7684\u4f4d\u6570\u5206\u79bb\u51fa\u6765\uff0c\u4ece\u9ad8\u4f4d\u5f00\u59cb\u5faa\u73af\uff0c\u5047\u8bbe\u4ecelen\u5f00\u59cb\uff0c\u5faa\u73af\u5230i\u4f4d\u65f6\uff0c\u524d\u9762len\u5230i+1\u4f4d\u5df2\u7ecf\u53d6\u597d\uff08\u5c31\u662f\u539f\u6570\uff09\uff0c\u8bbe\u7b2ci\u4f4d\u4e3a$a[i]$\uff0c\u5219\u5728\u533a\u95f4$[0,a[i])$\u5185\u679a\u4e3e\u6570\uff0c\u518d\u501f\u52a9\u539f\u6765\u9884\u5904\u7406\u7684dp\u6570\u7ec4\uff0c\u8ba1\u7b97\u5269\u4e0b\u7684i-1\u4f4d\u5373\u53ef\uff0c\u540c\u65f6\u6ce8\u610f\u7ec6\u8282\u3002\n\n### \u4ee3\u78011\n\n```c++\n#include<bits/stdc++.h>\n#define LL long long\nusing namespace std;\nconst LL mod=1e9+7;\nint m;\nLL dp[11][11],cnt[10],ans=0;\nvoid Add(LL &x,LL y){\n\tx+=y;\n\tif(x>=mod)x-=mod;\n}\nvoid Init() {\n\tint a[11],len=0,t=m,c=0;\n\twhile(t)a[++len]=t%10,t/=10;\n\tdp[1][0]=8,dp[1][1]=2;\n\tfor(int i=2;i<=len;i++)\n\t\tfor(int j=0;j<=i;j++){//\u9884\u5904\u7406dp\u6570\u7ec4\n\t\t\tif(j)Add(dp[i][j],dp[i-1][j-1]*2);\n\t\t\tAdd(dp[i][j],dp[i-1][j]*8);\n\t\t}\n\tfor(int i=len;i>=1;i--){//\u4ece\u9ad8\u4f4d\u4e00\u4f4d\u4f4d\u679a\u4e3e\u4e0b\u6765\n\t\tfor(int j=0;j<a[i];j++){\n\t\t\tint f=(j==4||j==7);\n\t\t\tfor(int q=0;q+c+f<10;q++)Add(cnt[q+c+f],dp[i-1][q]);\n\t\t\tif(i==1)cnt[f+c]++;//\u6ce8\u610f\u679a\u4e3e\u5230\u6700\u540e\u4e00\u4f4d\u65f6\u7684\u7ec6\u8282\n\t\t}\n\t\tc+=(a[i]==4||a[i]==7);\n\t}\n\tcnt[c]++,cnt[0]--;//\u52a0\u4e0am\uff0c\u51cf\u53bb0\n}\nLL dfs(int sum,int d) {//dfs\u66b4\u641c\u6c42\u89e3\n\tif(d==7)return 1;\n\tLL res=0;\n\tfor(int i=0; i<sum; i++)\n\t\tif(cnt[i]) {//\u6ce8\u610f\u4e0d\u80fd\u53d6\u91cd\n\t\t\tcnt[i]--;\n\t\t\tres=(res+(cnt[i]+1)*dfs(sum-i,d+1)%mod)%mod;\n\t\t\tcnt[i]++;\n\t\t}\n\treturn res;\n}\nint main() {\n\tscanf(\"%d\",&m);\n\tInit();\n\tfor(int i=1; i<=9; i++)\n\t\tif(cnt[i])ans=(ans+dfs(i,1)*cnt[i]%mod)%mod;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\n### \u601d\u8def2\n\n\u4e00\u4e2a\u5927\u4f6c\u60f3\u51fa\u7684\u5947\u8469\u9884\u5904\u7406\u65b9\u6cd5\u2014\u2014\u5206\u5757\u3002\u76f4\u63a5\u5904\u7406\u51fa$[0,99999]$\u5185\u5404\u79cdcnt\u7684\u4e2a\u6570\uff0c\u73b0\u5728\u53ea\u9700\u679a\u4e3e\u9ad8\u4f4di\uff0c\u5c31\u53ef\u4ee5\u5f88\u5feb\u7b97\u51fa$i*100000+[0,99999]$\u5185\u5404\u79cdcnt\u7684\u4e2a\u6570\u4e86\uff0c\u9884\u5904\u7406\u4ee3\u7801\u5982\u4e0b\u3002\n\n### \u4ee3\u78012\n\n```c++\nint calc(int x) {\n\tint c=0;\n\twhile(x) {\n\t\tint k=x%10;\n\t\tc+=(k==4||k==7);\n\t\tx/=10;\n\t}\n\treturn c;\n}\nvoid Init() {\n\tint i;\n\tfor(i=0; i<=min(99999,m); i++)cnt1[calc(i)]++;\n\tfor(i=0; i<10; i++)cnt[i]=cnt1[i]-(i==0);\n\tfor(i=1; i*100000LL+99999<=m; i++) {\n\t\tint r=calc(i);\n\t\tfor(int j=0; j+r<10; j++)\n\t\t\tcnt[j+r]+=cnt1[j];\n\t}\n\tfor(i=i*100000; i<=m; i++)cnt[calc(i)]++;\n}\n```\n\n",
        "postTime": 1537603411,
        "uid": 98922,
        "name": "\u757f\u738b",
        "ccfLevel": 0,
        "title": "CodeForces - 258B Little Elephant and Elections"
    }
]
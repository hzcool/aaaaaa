[
    {
        "content": "## \u524d\u8a00:\n~~**\u5982\u679c\u4f60\u4e0d\u60f3\u8ddf\u6211\u4e00\u6837\u4ecerank+100\u53d8\u6210rank-100,\u5199\u7f51\u7edc\u6d41\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u628acnt\uff08\u8fb9\u6570\uff09\u8bbe\u62101**~~\n\n\u8fd9\u6b21CF\u6211\u5c31\u505a\u4e86A,B,G\uff08B\u9898\u8fd8\u8c03\u4e861\u4e2a\u5c0f\u65f6\u5de6\u53f3\uff09\uff0c\u4f60\u80fd\u60f3\u8c61\u6211G\u9898\u88ab\u53c9\u7684\u611f\u53d7\u5417\uff08\u4e5f\u4e0d\u77e5\u9053\u6211cnt\u6ca1\u8bbe\u62101\u662f\u600e\u4e48present accepted\u7684\uff09\n\n## \u601d\u8def:\n\u4e00\u4e2a\u4e0d\u7b97\u592a\u96be\u7684\u6700\u5c0f\u5272\u6a21\u578b\uff0c\u5982\u679c\u4f60\u505a\u8fc7**CTSC2009\u79fb\u6c11\u7ad9\u9009\u5740**\u6216\u8005**HNOI2013\u5207\u7cd5**\u7684\u8bdd\u3002\n\n\u8fd9\u4e09\u9053\u9898\u6709\u4e00\u4e2a\u5171\u540c\u70b9\uff0c\u90a3\u5c31\u662f\u5b83\u4eec\n\n**\u90fd\u628a\u6bcf\u4e2a\u70b9\u6240\u6709\u51b3\u7b56(\u8fb9)\u6392\u6210\u4e00\u6761\u94fe,\u518d\u5904\u7406\u70b9\u4e0e\u70b9\u4e4b\u95f4\u7684\u8054\u7cfb**\n\n\uff08\u6211\u753b\u4e0d\u6765\u56fe\uff0c\u5982\u679c\u4f60\u60f3\u770b\u56fe\u7684\u8bdd\u53ef\u4ee5\u53bb\u770b**CTSC2009\u79fb\u6c11\u7ad9\u9009\u5740**\u90a3\u7bc7\u9898\u89e3\u6211julao\u540c\u5b66\u7684\u56fe\uff09\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\u6765\u8bf4\uff0c\u6bcf\u4e2a\u70b9\u6211\u4eec\u5171\u6709$h+1$\u4e2a\u51b3\u7b56\uff08**\u5373\u8be5\u70b9\u4fee0-h\u4efb\u610f\u9ad8\u5ea6\u7684\u5efa\u7b51**\uff09\n\n\u4f46\u662f\u6bcf\u4e2a\u51b3\u7b56\u5e26\u6765\u7684\u662f**\u6536\u76ca**\uff0c\u4e0d\u662f**\u4ee3\u4ef7**\uff0c\u603b\u4e0d\u53ef\u80fd\u5efa\u8d1f\u7684\u8fb9\u5427\n\n\u6ca1\u4e8b\uff0c\u6211\u4eec**\u5047\u8bbe\u6bcf\u4e2a\u70b9\u5efa\u7684\u9ad8\u5ea6\u90fd\u4e3ah**,\u5982\u679c\u6211\u4eec\u5b9e\u9645\u5efa\u7684\u9ad8\u5ea6\u4e3a$k$,\u90a3\u4e48\u4ee3\u4ef7\u5373\u4e3a$h*h-k*k$\n\n\u90a3\u7f5a\u6b3e\u4e5f\u4e0d\u96be\u89e3\u51b3,\u5c31\u50cf\u7c7b\u4f3c\u4e0e**\u6587\u7406\u5206\u79d1**\uff0c**\u571f\u5730\u5212\u5206**\u4e00\u6837\uff0c\n\n\u65b0\u5efa\u4e00\u4e2a\u70b9\uff0c\n\n**\u8fd9\u4e2a\u70b9\u5411\u6c47\u70b9\u8fdec(\u7f5a\u6b3e)**,\n\n\u7136\u540e**l-r\u6240\u6709\u70b9\u4e2d\u7684\u7b2cx+1\u4e2a\u70b9\u5411\u65b0\u5efa\u70b9\u8fdeinf**\n\n## \u5b9e\u73b0\n\n\u8bbe\u4e00\u4e2a\u4e8c\u5143\u7ec4$(x,y)$\u4e3a\u7b2c$x$\u70b9\u7684\u7b2c$y$\u4e2a\u51b3\u7b56\u70b9\n\n\u5219$s->(x,1)$\u8fde$inf$(\u65e0\u5b9e\u9645\u610f\u4e49)\n\n$(x,i)->(x,i+1)$\u8fde$h^2-(i-1)^2$\uff08\u8868\u793a\u7b2c$x$\u4e2a\u70b9\u5efa\u7b51\u9ad8\u5ea6\u4e3a$i-1$\uff09\n\n($1<=i<=h+1$)\n\n$(x,h+2)->t$\u8fde$inf$\uff08\u65e0\u5b9e\u9645\u610f\u4e49\uff09\n\n\n\u7136\u540e\uff0c\n\n\u5bf9\u4e8e\u7cfb\u6570\u4e3a$l,r,x,c$\u7684\u7f5a\u6b3e\n\n\u5047\u8bbe\u65b0\u5efa\u70b9\u4e3a$V$\n\n$V->t$\u8fde$c$\n\n$(i,x+1)->V$\u8fde$inf$($l<=i<=r$)\n\n(\u5982\u679c\u4f60\u505a\u8fc7\u6587\u7406\u5206\u79d1\u90a3\u8fd9\u90e8\u5206\u5e94\u8be5\u4e0d\u9700\u8981\u6211\u89e3\u91ca)\n\n\uff08~~\u5982\u679c\u4f60\u6ca1\u505a\u8fc7\u90a3\u5c31\u5feb\u53bb\u505a\u5427~~\uff09\n\n## \u4ee3\u7801:\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<queue>\n#include<vector>\n#include<stack>\n#include<map>\n#include<deque>\n#define inf 0x7fffffff/2\n#define eps 1e-6\n#define N 1000010\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ninline ll read()\n{\n\tchar ch=getchar();\n\tint s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\nstruct edge\n{\n\tint next,to,fl;\n}e[N<<1];\nint head[N],cnt=1;//\u6211\u7684200rank\u5206\u5c31\u56e0\u4e3a\u8fd9\u4e2acnt\u6ca1\u4e86555\nint depth[N];queue<int>Q;\nint ans,dcnt;\nint n,h,m;\nint s,t;\ninline void add_edge(int from,int to,int fl){e[++cnt].to=to;e[cnt].next=head[from];e[cnt].fl=fl;head[from]=cnt;}\ninline int bfs()\n{\n\tmemset(depth,0,sizeof(depth));while(!Q.empty())Q.pop();\n\tQ.push(s);depth[s]=1;\n\twhile(!Q.empty())\n\t{\n\t\tint x=Q.front();Q.pop();\n\t\tfor(register int i=head[x];i;i=e[i].next){if(e[i].fl&&!depth[e[i].to])depth[e[i].to]=depth[x]+1,Q.push(e[i].to);}\n\t}\n\treturn depth[t];\n}\nint dfs(int now,int flow)\n{\n\tif(now==t)return flow;\n\tint ret=0;\n\tfor(register int i=head[now];i;i=e[i].next)\n\t{\n\t\tif(ret==flow)return ret;\n\t\tif(depth[e[i].to]==depth[now]+1&&e[i].fl)\n\t\t{\n\t\t\tint fl=dfs(e[i].to,min(e[i].fl,flow-ret));\n\t\t\tif(fl)\n\t\t\t{\n\t\t\t\tret+=fl;\n\t\t\t\te[i].fl-=fl;\n\t\t\t\te[i^1].fl+=fl;\n\t\t\t}\n\t\t}\n\t}\n\tif(!ret)depth[now]=0;\n\treturn ret;\n}\ninline int Dinic()\n{\n\tint sum=0;\n\twhile(bfs())\n\t{\n\t\twhile(int x=dfs(s,inf))sum+=x;\n\t}\n\treturn sum;\n}//\u6700\u5927\u6d41\ninline int idx(int x,int y){return (x-1)*(h+2)+y;}//\u6c42\u70b9\u7684\u7f16\u53f7\u800c\u5df2\nint main()\n{\n\tn=read(),h=read(),m=read();t=N-10;\n\tfor(register int i=1;i<=n;i++)ans+=h*h;//\u5047\u8bbe\u6240\u6709\u70b9\u90fd\u5efa\u9ad8\u5ea6\u4e3ah\u7684\u5efa\u7b51\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tfor(register int j=1;j<=h+1;j++)add_edge(idx(i,j),idx(i,j+1),h*h-(j-1)*(j-1)),add_edge(idx(i,j+1),idx(i,j),0);\n\t}//\u8fd9\u91cc\u524d\u9762\u89e3\u91ca\u8fc7\u4e86\uff0c\u5c31\u662fh+1\u4e2a\u51b3\u7b56\n\tdcnt=n*(h+2);//\u5f53\u524d\u70b9\u6570\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tadd_edge(s,idx(i,1),inf);add_edge(idx(i,1),s,0);\n\t\tadd_edge(idx(i,h+2),t,inf);add_edge(t,idx(i,h+2),0);\n\t}//\u5e94\u8be5\u4e0d\u7528\u89e3\u91ca\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tint l=read(),r=read(),H=read(),val=read();\n\t\tif(H==h)continue;\n\t\t++dcnt;//V\n\t\tadd_edge(dcnt,t,val);add_edge(t,dcnt,0);\n\t\tfor(register int j=l;j<=r;j++)\n\t\t{\n\t\t\tadd_edge(idx(j,H+2),dcnt,inf);add_edge(dcnt,idx(j,H+2),0);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans-Dinic());//\u8f93\u51faans\n\treturn 0;\n}\n```\n**\u5982\u679c\u8ba4\u4e3a\u6211\u8fd9\u7bc7\u9898\u89e3\u5bf9\u4f60\u6709\u5e2e\u52a9\u7684\u53ef\u4ee5\u7ed9\u6211\u70b9\u4e00\u4e0b\u8d5eqwq\u3002\u5982\u679c\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u6216\u8005\u8ba4\u4e3a\u6211\u7684\u9898\u89e3\u6709\u4ec0\u4e48\u95ee\u9898\u7684\u8bdd\uff0c\u8bf7\u52a1\u5fc5\u79c1\u4fe1\u6211\uff0c\u611f\u6fc0\u4e0d\u5c3d\uff01\u6211\u4f1a\u52aa\u529b\u628a\u6211\u7684\u9898\u89e3\u5199\u5f97\u6700\u597d\u7684!**\n\n",
        "postTime": 1555926594,
        "uid": 72419,
        "name": "WAPER4EVER",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1146G \u3010Zoning Restrictions\u3011"
    },
    {
        "content": "## CF1146G \u9898\u89e3\n\n\u7ed9\u4e00\u4e2a `DP` \u7684\u505a\u6cd5\u3002\n\n**\u9898\u610f**\uff1a\n\n\u5bf9\u957f $n$ \u7684\u5e8f\u5217 $a$\uff0c\u8bb0 $f(a)=(\\sum\\limits_{i=1}^na_i^2)+(\\sum\\limits_{i=1}^mc_i[\\max\\limits_{j=l_i}^{r_i}a_j>x_i])$\uff0c\u6c42 $\\max\\limits_{\\forall i\\in[1,n],a_i\\in[0,h]}f(a)$\u3002\n\n**\u505a\u6cd5**\uff1a\n\n\u663e\u7136\u9700\u8981\u533a\u95f4 `DP`\uff0c\u8bbe $f(l,r)$ \u4ee3\u8868\u533a\u95f4 $[l,r]$ \u5185\u7684\u6700\u5927\u6536\u76ca\u3002\n\n\u8003\u8651\u5982\u4f55\u5904\u7406\u5bf9\u533a\u95f4\u9ad8\u5ea6 $\\max$ \u7684\u9650\u5236\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u533a\u95f4\u5185\u6700\u5927\u503c\uff0c\u6765\u5c06\u95ee\u9898\u5212\u5206\u6210\u4e00\u4e9b\u5b50\u95ee\u9898\u3002\n\n\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8ba1\u7b97 $f(l,r)$ \u7684\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u4e8c\u5143\u7ec4 $(p,z)$\uff0c\u4ee3\u8868 $\\max\\limits_{i=l}^ra_i=a_p=z$\uff0c\n\n\u90a3\u4e48\u5bf9\u6240\u6709\u6ee1\u8db3 $l\\le l_i\\le p\\le r_i\\le r,x_i<z$ \u7684\u5206\u533a\u9650\u5236 $i$\uff0c$c_i$ \u7684\u7f5a\u6b3e\u662f\u5fc5\u987b\u8981\u4ed8\u7684\uff0c\n\n\u800c\u5bf9\u4e8e\u5176\u4ed6\u7684\u5206\u533a\u9650\u5236\u662f\u5426\u9700\u8981\u7f34\u7eb3\u7f5a\u6b3e\uff0c\u8fd8\u662f\u6682\u65f6\u4e0d\u80fd\u786e\u5b9a\u7684\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\n\n\u6b64\u65f6\u5bf9\u4e8e\u533a\u95f4 $[l,p-1]$ \u548c $[p+1,r]$\uff0c\u8fd9\u4e24\u6bb5\u533a\u95f4\u662f\u4e24\u4e2a\u5b50\u95ee\u9898\uff0c\u552f\u4e00\u7684\u9650\u5236\u662f\u6700\u5927\u503c $a_p=z$ \u5e26\u6765\u7684\uff0c\n\n\u5373\u8981\u6c42 $\\max\\limits_{i=l}^{p-1}a_i$ \u548c $\\max\\limits_{i=p+1}^ra_i$ \u90fd\u4e0d\u8d85\u8fc7 $z$\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5728 `DP` \u72b6\u6001\u4e2d\u8bb0\u5f55 $z$ \u8fd9\u4e00\u7ef4\uff0c\u6765\u5904\u7406\u8fd9\u4e2a\u9650\u5236\u3002\n\n\u5373\uff0c\u8bb0 $f(l,r,z)$ \u4ee3\u8868\u533a\u95f4 $[l,r]$ \u5185\uff0c\u6ee1\u8db3 $\\max\\limits_{i=l}^ra_i\\le z$ \u7684\u6700\u5927\u6536\u76ca\u3002\n\n\u6b64\u65f6\uff0c\u533a\u95f4 $[l,p-1]$ \u548c $[p+1,r]$ \u5185\u7684\u6700\u5927\u6536\u76ca\uff0c\u5c31\u53ef\u7528 $\\max\\limits_{x\\le z}f(l,p-1,x)$ \u548c $\\max\\limits_{x\\le z}f(p+1,r,x)$ \u8868\u793a\uff0c\n\n\u6211\u4eec\u7ef4\u62a4 `DP` \u6570\u7ec4\u7684\u524d\u7f00\u6700\u5927\u503c\uff0c\u5373\u53ef\u505a\u5230 $O(n^4)$ \u8f6c\u79fb\u3002\n\n**code**\uff1a\n\n```\n#include<bits/stdc++.h>\n#define ckmax(a, b) ((a) = max((a), (b)))\n#define rep(i, a, b) for (int i = (a); i <= (b); i++)\nusing namespace std;\nint read() {/*\u5feb\u8bfb*/}\nconst int N (55);\nint n, m, h, f[N][N][N], lim[N][N][N][N];\nstruct Node { int l, r, x, c; } q[N];\nint dp (int l, int r, int x, int res = -2e9) {\n\tif (x < 0 || l > r) return 0;\n\tif (f[l][r][x] != -1) return f[l][r][x];\n\trep (p, l, r) ckmax (res, dp (l, p - 1, x) + dp (p + 1, r, x) + x * x + lim[l][r][p][x]);\n\treturn f[l][r][x] = max (res, dp (l, r, x - 1));\n}\nint main() {\n\tn = read(), h = read(), m = read();\n\trep (i, 1, m) {\n\t\tint l = read(), r = read(), x = read(), c = read();\n\t\tq[i].l = l, q[i].r = r, q[i].x = x, q[i].c = c;\n\t}\n\trep (l, 1, n) rep (r, l, n) rep (p, l, r) rep (i, 1, m) {\n\t\tint L = q[i].l, R = q[i].r, X = q[i].x, C = q[i].c;\n\t\tif (l <= L && L <= p && p <= R && R <= r) lim[l][r][p][X + 1] -= C;\n\t}\n\trep (l, 1, n) rep (r, l, n) rep (p, l, r) rep (x, 1, h) lim[l][r][p][x] += lim[l][r][p][x - 1];\n\tmemset (f, -1, sizeof(f)), cout << dp (1, n, h); return 0;\n}\n```\n\n",
        "postTime": 1649997296,
        "uid": 100091,
        "name": "GaryH",
        "ccfLevel": 6,
        "title": "CF1146G"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/dd-d/p/16130079.html)\n### Sol  \n\u9898\u89e3\u533a\u597d\u50cf\u90fd\u662f\u7f51\u7edc\u6d41\u7684\u9898\u89e3\uff0c\u8fd9\u91cc\u7ed9\u4e00\u7bc7\u533a\u95f4 dp \u7684\u9898\u89e3\u3002  \n\u601d\u8def by e3c8f1a924  \n\u53d1\u73b0\u6570\u636e\u8303\u56f4\u5f88\u5c0f\uff0c\u8003\u8651\u533a\u95f4 dp\u3002  \n\u5bb9\u6613\u53d1\u73b0\uff0c\u4e00\u4e2a\u9650\u5236\u53ea\u4e0e\u8be5\u533a\u95f4\u5185\u6700\u9ad8\u7684\u623f\u5c4b\u6709\u5173\u3002  \n\u90a3\u4e48\u8bb0 $dp(l,r,k)$ \u8868\u793a \u533a\u95f4 $\\left[l,r\\right]$ \u4e2d\u6700\u9ad8\u623f\u5c4b\u4e3a $k$ \u65f6\u7684\u6700\u5927\u6536\u76ca\u3002  \n\u8f6c\u79fb\u7684\u8bdd\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u95f4\u627e\u51fa\u6240\u6709\u5b8c\u5168\u88ab\u8fd9\u4e2a\u533a\u95f4\u5305\u542b\u7684\u9650\u5236\u3002\u7136\u540e\u66b4\u529b\u679a\u4e3e\u6700\u9ad8\u7684\u623f\u5c4b\u8fdb\u884c\u8f6c\u79fb\u3002\u5728\u7528\u524d\u7f00 max \u4f18\u5316\u5373\u53ef\u3002  \n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u3002  \n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3h)$  \n### Code  \n```cpp\n//LYC_music yyds!\n#include<bits/stdc++.h>\n#define IOS ios::sync_with_stdio(0)\n#define lowbit(x) (x&(-x))\nusing namespace std;\ninline char gc()\n{\n\tstatic char buf[1000000],*p1=buf,*p2=buf;\n\treturn p1==p2&&(p2=(p1=buf)+fread(buf,1,1000000,stdin),p1==p2)?EOF:*p1++;\n}\nint read()\n{\n\tint pos=1,num=0;\n\tchar ch=getchar();\n\twhile (!isdigit(ch))\n\t{\n\t\tif (ch=='-') pos=-1;\n\t\tch=getchar();\n\t}\n\twhile (isdigit(ch))\n\t{\n\t\tnum=num*10+(int)(ch-'0');\n\t\tch=getchar();\n\t}\n\treturn pos*num;\n}\nvoid write(int x)\n{\n\tif (x<0)\n\t{\n\t\tputchar('-');\n\t\twrite(-x);\n\t\treturn;\n\t}\n\tif (x>=10) write(x/10);\n\tputchar(x%10+'0');\n}\nvoid writesp(int x)\n{\n\twrite(x);\n\tputchar(' ');\n}\nvoid writeln(int x)\n{\n\twrite(x);\n\tputchar('\\n');\n}\nconst int N=60;\nint n,h,m,L[N],R[N],x[N],c[N],id[N],dp[N][N][N];\nsigned main()\n{\n\tn=read(); h=read(); m=read();\n\tfor (int i=1;i<=m;i++)\n\t\tL[i]=read(),R[i]=read(),x[i]=read(),c[i]=read(),id[i]=i;\n\tsort(id+1,id+m+1,[](int a,int b)\n\t{\n\t\treturn x[a]>x[b];\n\t});\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tvector<int> G;\n\t\tfor (int j=1;j<=m;j++)\n\t\t\tif (L[id[j]]==i&&R[id[j]]==i) G.emplace_back(id[j]);\n\t\tint tot=0,cnt=(int)G.size()-1;\n\t\tfor (int j=0;j<=h;j++)\n\t\t{\n\t\t\twhile (cnt>=0&&j>x[G[cnt]]) tot+=c[G[cnt]],cnt--;\n\t\t\tdp[i][i][j]=j*j-tot;\n\t\t\tif (j>0) dp[i][i][j]=max(dp[i][i][j],dp[i][i][j-1]); \n\t\t}\n\t}\n\tfor (int len=2;len<=n;len++)\n\t\tfor (int l=1;l<=n-len+1;l++)\n\t\t{\n\t\t\tint r=l+len-1;\n\t\t\tfor (int k=l;k<=r;k++)\n\t\t\t{\n\t\t\t\tvector<int> G;\n\t\t\t\tfor (int j=1;j<=m;j++)\n\t\t\t\t\tif (L[id[j]]>=l&&r>=R[id[j]]&&L[id[j]]<=k&&R[id[j]]>=k) G.emplace_back(id[j]);\n\t\t\t\tint tot=0,cnt=(int)G.size()-1;\n\t\t\t\tfor (int i=0;i<=h;i++)\n\t\t\t\t{\n\t\t\t\t\twhile (cnt>=0&&i>x[G[cnt]]) tot+=c[G[cnt]],cnt--;\n\t\t\t\t\tdp[l][r][i]=max(dp[l][r][i],dp[l][k-1][i]+dp[k+1][r][i]+i*i-tot);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (int i=1;i<=h;i++)\n\t\t\t\tdp[l][r][i]=max(dp[l][r][i],dp[l][r][i-1]);\n\t\t}\n\twriteln(dp[1][n][h]);\n}\n\n \n\n\n```",
        "postTime": 1649660860,
        "uid": 167999,
        "name": "dd_d",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011CF1146G Zoning Restrictions"
    },
    {
        "content": "\u4ece CF1430G \u5b66\u6765\u7684\u601d\u8def\uff0c\u51e0\u4e4e\u4e00\u81f4\u3002\n\n\u9996\u5148\u53d1\u73b0 $h \\le 50$ \uff0c\u6697\u793a\u4e86\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u9ad8\u5ea6\u8fde\u8fb9\u3002\n\n\u6bcf\u4e2a\u70b9\u6211\u4eec\u628a\u5b83\u62c6\u6210 $(h+1)$ \u4e2a\u70b9\uff0c\u7f16\u53f7 $0 \\to h$ \uff0c\u76f8\u90bb\u70b9\u8fde\u8fb9\uff0c\u7b2c $i$ \u6761\u8fb9\u8fde\u63a5 $i$ \u548c $i+1$ \u5bb9\u91cf\u4e3a $i^2$ \u3002\u8fd9\u6837\u6211\u4eec\u9009\u62e9\u9ad8\u5ea6\u4e3a $i$ \u5c31\u662f\u5272\u6389\u54ea\u6761\u8fb9\u3002\u6700\u540e\u628a $0$ \u53f7\u70b9\u548c $S$ \u8fde\u8fb9\uff0c$h$ \u53f7\u70b9\u4e0e $T$ \u8fde\u8fb9\uff08\u7136\u800c\u6211\u56e0\u4e3a\u6ca1\u8003\u8651\u9ad8\u5ea6\u4e3a $0$ WA\u4e86\u65e0\u6570\u53d1\uff0cwtcl\uff09\u3002\n\n\u63a5\u4e0b\u6765\u518d\u8003\u8651\u4ee3\u4ef7\u3002\u53ea\u9700\u8981\u4e00\u79cd\u8fde\u8fb9\u65b9\u5f0f\u8868\u793a\u201c\u9009 $x$ \u4ee5\u4e0a\u7684\u9ad8\u5ea6\u5c31\u9700\u8981 $c$ \u7684\u4ee3\u4ef7\u201d\u3002~~\u6839\u636eCF1430G\u7684\u5957\u8def~~ \u53ea\u9700\u8981\u65b0\u5efa\u4e00\u4e2a\u8282\u70b9\uff0c\u5411 $T$ \u8fde\u8fb9\uff0c\u5bb9\u91cf\u4e3a $-c$ \uff0c\u518d\u4ece $l \\to r$ \u7684\u6bcf\u4e2a\u70b9\u4e2d\u7684\u7b2c $x+1$ \u53f7\u5411\u8fd9\u4e2a\u65b0\u70b9\u8fde\u8fb9\uff0c\u5bb9\u91cf $ +\\infty $ \u3002\u8868\u793a\u4f60\u4e0d\u9009\u8fd9\u4e2a $c$ \u5c31\u5272\u4e0d\u6389\u201c\u9ad8\u5ea6\u201d\u4e3a $x$ \u4ee5\u4e0a\u7684\u8fb9\u3002\n\n\u7136\u540e\u5efa\u56fe\u5c31\u5efa\u5b8c\u4e86\uff0c\u4f46\u662f\u53d1\u73b0\u9898\u76ee\u8981\u6c42\u7684\u662f\u6700\u5927\uff0c\u6240\u4ee5\u628a\u6240\u6709\u8fb9\u7684\u5bb9\u91cf\u53d6\u53cd\u5c31\u662f\u6700\u5927\u5272\u4e86\u3002\u51fa\u73b0\u8d1f\u6570\u5bb9\u91cf\u4e86?\u52a0\u4e0a\u4e00\u4e2a\u503c\u8f6c\u5316\u4e3a\u6b63\u6570\u6700\u540e\u518d\u51cf\u6389\u5c31\u53ef\u4ee5\u3002\u522b\u5fd8\u4e86\u518d\u53d6\u53cd\u56de\u6765\u3002\n\n$code$:\n```\n#include<bits/stdc++.h> \nusing namespace std;\nconst int N=10005;\nconst int inf=0x3f3f3f3f;\nint s,t,n,m,h;\nstruct edge{\n\tint v,nxt,w;\n}e[N*205];\nint head[N],cnt=1,u[N],v[N],d[N],hd[N];\nvoid adde(int u,int v,int w)\n{e[++cnt].v=v;e[cnt].w=w;e[cnt].nxt=head[u];head[u]=cnt;}\nvoid add(int u,int v,int w){adde(u,v,w);adde(v,u,0);}\nbool bfs()\n{\n\tmemset(d,0,sizeof(d));\n\tqueue<int> q;q.push(s);d[s]=1;\n\tfor(int i=1;i<=t;++i)hd[i]=head[i];                                                                                         \n\twhile(!q.empty())\n\t{\n\t\tint u=q.front();q.pop();\n\t\tfor(int i=head[u];i;i=e[i].nxt)\n\t\t{\n\t\t\tint v=e[i].v;if(!e[i].w||d[v])continue;\n\t\t\td[v]=d[u]+1;q.push(v);if(v==t)return 1;\n\t\t}\n\t}\n\treturn d[t];\n}\nint sum,col[N];\nint dfs(int u,int fl)\n{\n\tif(u==t)return fl;int res=0;\n\tfor(int i=hd[u];i;i=e[i].nxt)\n\t{\n\t\thd[u]=i;int v=e[i].v;\n\t\tif(!e[i].w||d[v]!=d[u]+1)continue;\n\t\tint tmp=dfs(v,min(fl-res,e[i].w));\n\t\tif(!tmp)continue;\n\t\te[i].w-=tmp;e[i^1].w+=tmp;\n\t\tres+=tmp;if(fl-res<=0)return fl;\n\t}\n\tif(!res)d[u]=0;return res;\n}\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&h,&m);s=n*(h+2)+m+1;t=n*(h+2)+m+2;\n\tfor(int i=1;i<=n;++i)add(s,i,inf),add(i+n*(h+1),t,inf);\n\tfor(int i=1;i<=n;++i)for(int j=0/*8\u6b21\u63d0\u4ea4\u624d\u53d1\u73b0\u8fd9\u91cc\u9519\u4e86\u2026\u2026*/;j<=h;++j)\n\tadd(i+j*n,i+(j+1)*n,114514-j*j);\n\tfor(int i=1,l,r,x,c;i<=m;++i)\n\t{\n\t\tscanf(\"%d%d%d%d\",&l,&r,&x,&c);\n\t\tfor(int j=l;j<=r;++j)\n\t\tadd(j+(x+1)*n,n*(h+2)+i,inf);\n\t\tadd(n*(h+2)+i,t,c);\n\t}\n\tint ans=0;while(bfs())ans+=dfs(s,inf);\n\tprintf(\"%d\",n*114514-ans);\n\treturn 0;\n}",
        "postTime": 1639104964,
        "uid": 102541,
        "name": "KING_OF_TURTLE",
        "ccfLevel": 7,
        "title": "CF1146G \u9898\u89e3"
    }
]
[
    {
        "content": "\u5bf9\u4e8e\u7b2c $ i $ \u4e2a\u6570\u7ef4\u62a4\u4f7f\u5f97\u5b83\u5728\u8fd9\u6bb5\u533a\u95f4\u4f5c\u4e3a\u6700\u5c0f\u503c\u7684\u5de6\u7aef\u70b9 $ l $ \u548c\u53f3\u7aef\u70b9 $ r $\uff0c\u5f53\u957f\u5ea6\u5728 $ 1 $ ~ $ r - l + 1 $ \u65f6 $ a[i] $ \u53ef\u4ee5\u4f5c\u4e3a\u7b54\u6848\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u5355\u8c03\u6808\u7ef4\u62a4\u5373\u53ef\n\n```cpp\n#pragma GCC target(\"avx\")\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC optimize(\"Ofast\")\n#include <bits/stdc++.h>\n#define Fast_cin ios::sync_with_stdio(false), cin.tie(0);\n#define rep(i, a, b) for(register int i = a; i <= b; i++)\n#define per(i, a, b) for(register int i = a; i >= b; i--)\n#define DEBUG(x) cerr << \"DEBUG\" << x << \" >>> \" << endl;\nusing namespace std;\n\ntypedef unsigned long long ull;\ntypedef pair <int, int> pii;\ntypedef long long ll;\n\ntemplate <typename _T>\ninline void read(_T &f) {\n    f = 0; _T fu = 1; char c = getchar();\n    while(c < '0' || c > '9') { if(c == '-') fu = -1; c = getchar(); }\n    while(c >= '0' && c <= '9') { f = (f << 3) + (f << 1) + (c & 15); c = getchar(); }\n    f *= fu;\n}\n\ntemplate <typename T>\nvoid print(T x) {\n    if(x < 0) putchar('-'), x = -x;\n    if(x < 10) putchar(x + 48);\n    else print(x / 10), putchar(x % 10 + 48);\n}\n\ntemplate <typename T>\nvoid print(T x, char t) {\n    print(x); putchar(t);\n}\n\ntemplate <typename T>\nstruct hash_map_t {\n    vector <T> v, val, nxt;\n    vector <int> head;\n    int mod, tot, lastv;\n    T lastans;\n    bool have_ans;\n\n    hash_map_t (int md = 0) {\n        head.clear(); v.clear(); val.clear(); nxt.clear(); tot = 0; mod = md;\n        nxt.resize(1); v.resize(1); val.resize(1); head.resize(mod);\n        have_ans = 0;\n    }\n\n    bool count(int x) {\n        int u = x % mod;\n        for(register int i = head[u]; i; i = nxt[i]) {\n            if(v[i] == x) {\n                have_ans = 1;\n                lastv = x;\n                lastans = val[i];\n                return 1;\n            }\n        }\n        return 0;\n    }\n\n    void ins(int x, int y) {\n        int u = x % mod;\n        nxt.push_back(head[u]); head[u] = ++tot;\n        v.push_back(x); val.push_back(y);\n    }\n\n    int qry(int x) {\n        if(have_ans && lastv == x) return lastans;\n        count(x);\n        return lastans;\n    }\n};\n\nconst int N = 2e5 + 5;\n\nint st[N], l[N], r[N], val[N], top;\nint a[N], n;\n\nint main() {\n    memset(val, -0x7f, sizeof(val));\n    read(n);\n    for(register int i = 1; i <= n; i++) read(a[i]);\n    for(register int i = 1; i <= n; i++) {\n        while(top && a[st[top]] > a[i]) {\n            r[st[top]] = i - 1;\n            --top;\n        }\n        st[++top] = i;\n    }\n    while(top) {\n        r[st[top]] = n;\n        --top;\n    }\n    for(register int i = n; i >= 1; i--) {\n        while(top && a[st[top]] > a[i]) {\n            l[st[top]] = i + 1;\n            --top;\n        }\n        st[++top] = i;\n    }\n    while(top) {\n        l[st[top]] = 1;\n        --top;\n    }\n    for(register int i = 1; i <= n; i++) val[r[i] - l[i] + 1] = max(val[r[i] - l[i] + 1], a[i]);\n    for(register int i = n - 1; i >= 1; i--) val[i] = max(val[i], val[i + 1]);\n    for(register int i = 1; i <= n; i++) print(val[i], i == n ? '\\n' : ' ');\n    return 0;\n}\n```",
        "postTime": 1554081198,
        "uid": 51815,
        "name": "LJC00118",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "\u56e0\u4e3a\u9700\u8981\u6c42\u51fa\u6bcf\u4e2a\u957f\u5ea6\u6240\u5bf9\u5e94\u7684\u7b54\u6848\uff0c\u5982\u679c\u4ece\u957f\u5ea6\u8003\u8651\u7684\u8bdd\uff0c\u6548\u7387\u4e0d\u9ad8\uff0c\u6211\u4eec\u9700\u8981\u5728 $O(1)$ \u7684\u65f6\u95f4\u5185\u6c42\u51fa\u6bcf\u4e2a\u957f\u5ea6\u7684\u7b54\u6848\uff0c\u5e76\u4e14\u7b54\u6848\u4e0e\u7b54\u6848\u4e4b\u95f4\u5e76\u4e0d\u4e92\u76f8\u5e72\u6d89\u3002\n\n\u6ce8\u610f\u5230\u5728\u8fd9\u9053\u9898\u76ee\u4e2d\uff0c\u6211\u4eec\u5173\u6ce8\u7684\u4ec5\u4ec5\u662f\u201c\u4e2a\u4f53\u201d\uff0c\u4e5f\u5c31\u662f\u5355\u4e2a\u6570\u503c\uff08\u6700\u5c0f\u503c\uff09\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u63a2\u7a76\u6bcf\u4e2a\u4e2a\u4f53\u5bf9\u4e8e\u7b54\u6848\u505a\u51fa\u7684**\u8d21\u732e**\u3002\u4e00\u4e2a\u663e\u7136\u7684\u7ed3\u8bba\uff1a\u5982\u679c\u4e00\u4e2a\u6570\u53ef\u4ee5\u4e3a\u533a\u95f4\u957f\u5ea6\u4e3a $x$ \u7684\u7b54\u6848\uff0c\u90a3\u4e48\u4ed6\u5728 $\\forall y\\in (0,x]$ \u7684\u533a\u95f4\u957f\u5ea6\u4e2d\uff0c\u5fc5\u7136\u53ef\u80fd\u88ab\u53d6\u5230\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\u7531\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u627e\u5230\u6bcf\u4e2a\u6570\u6240\u5bf9\u5e94\u7684\u6700\u957f\u533a\u95f4\uff0c\u4f7f\u5f97\u533a\u95f4\u5185\u7684\u6700\u5c0f\u503c\u4e3a\u8fd9\u4e2a\u6570\uff0c\u518d $O(n)$ \u9012\u63a8\u5904\u7406\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u627e\u5230\u6bcf\u4e2a\u6570\u6240\u5bf9\u5e94\u7684\u6700\u957f\u533a\u95f4\uff0c\u53ef\u4ee5\u6b63\u5e8f\u548c\u5012\u5e8f\u5404\u505a\u4e00\u6b21\u3002\u4ee5\u6b63\u5e8f\u4e3a\u4f8b\uff0c\u5bf9\u4e8e $a_x$\uff0c\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684 $y$\uff0c\u4f7f\u5f97 $\\forall i\\in[y,x],a_i\\geq a_x$\uff08\u7b49\u4e8e\u8bf4\uff0c\u627e\u5230 $x$ \u4e4b\u524d\u4e0b\u6807\u6700\u5927\u7684\u4e00\u4e2a\u6570 $a_{y-1}$\uff0c\u6ee1\u8db3 $a_{y-1}<a_x$\uff09\uff0c\u6b64\u4e3a[\u5355\u8c03\u6808](https://www.luogu.com.cn/problem/P5788)\u7684\u677f\u5b50\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6574\u7406\u7b54\u6848\u4e86\uff0c\u7b54\u6848\u7684\u6574\u7406\u65b9\u5f0f\u5728\u4ee3\u7801\u91cc\u4f1a\u5177\u4f53\u5448\u73b0\u3002\n\n\u53c2\u8003\u4ee3\u7801\u5982\u4e0b\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define db double\nusing namespace std;\ninline int read()\n{\n\tint x = 0; bool op = false;\n\tchar c = getchar();\n\twhile(!isdigit(c))op |= (c == '-'), c = getchar();\n\twhile(isdigit(c))x = (x << 1) + (x << 3) + (c ^ 48), c = getchar();\n\treturn op ? -x : x;\n}\nconst int N = 200010;\nint n;\nint a[N], l[N], r[N], sum[N], ans[N];\nstruct Node\n{\n\tint id, val;\n\tNode(int id = 0, int val = 0):id(id), val(val){}\n};\nstack<Node> s;\nint main()\n{\n\tn = read();\n\tfor(int i = 1; i <= n; i++){a[i] = read(); sum[i] = sum[i - 1] + a[i];}\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\twhile(s.empty() == false && s.top().val >= a[i])\n\t\t\ts.pop();\n\t\tif(s.empty() == false)l[i] = s.top().id + 1;\n\t\telse l[i] = 1;\n\t\ts.push(Node(i, a[i]));\n\t}\n\twhile(s.empty() == false)s.pop();\n\tfor(int i = n; i >= 1; i--)\n\t{\n\t\twhile(s.empty() == false && s.top().val >= a[i])\n\t\t\ts.pop();\n\t\tif(s.empty() == false)r[i] = s.top().id - 1;\n\t\telse r[i] = n;\n\t\ts.push(Node(i, a[i]));\n\t}\n   //\u6574\u7406\u7b54\u6848\n\tfor(int i = 1; i <= n; i++)\n\t\tans[r[i] - l[i] + 1] = max(ans[r[i] - l[i] + 1], a[i]);\n\tfor(int i = n; i >= 1; i--)\n\t\tans[i] = max(ans[i], ans[i + 1]);\n   //\u6574\u7406\u7b54\u6848\uff0c\u539f\u7406\u5982\u4e0a\u9762\u7684\u7ed3\u8bba\n\tfor(int i = 1; i <= n; i++)\n\t\tprintf(\"%d \", ans[i]);\n\treturn 0;\n} \n```\n\n\u76f8\u4f3c\u9898\u76ee\u63a8\u8350\uff1a\n\n[\u826f\u597d\u7684\u611f\u89c9](https://www.luogu.com.cn/problem/P2422) \u540c\u6837\u662f\u8d21\u732e\u7684\u601d\u60f3\u3002\n\n[Imbalanced Array](https://www.luogu.com.cn/problem/CF817D) \u8d21\u732e+\u5bb9\u65a5",
        "postTime": 1602409378,
        "uid": 149192,
        "name": "__gcd",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "\n\n### **\u4e00\u53e5\u8bdd\u9898\u610f\uff1a**\n\n \u7ed9\u4f60\u4e00\u4e2a\u5e8f\u5217\uff0c\u6c42\u51fa\u5bf9\u4e8e\u6bcf\u4e2a\u957f\u5ea6\u4e3a $x$ \u7684\u533a\u95f4\u6700\u5c0f\u503c \u7684\u6700\u5927\u503c\u3002\n\n### \u5206\u6790\uff1a\n\n\u5355\u8c03\u6808\u52a0\u7ebf\u6bb5\u6811\u3002\n\n\u6211\u4eec \u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u5143\u7d20\u4ed6\u505a\u4e3a\u533a\u95f4\u6700\u5c0f\u503c\u7684\u6700\u5927\u533a\u95f4\u957f\u5ea6\u4e3a $len$ \n\n\u90a3\u4e48\u4ed6\u5c31\u53ef\u80fd\u4f1a\u6210\u4e3a $1-len$ \u7684\u7b54\u6848\u3002\n\n\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u6240\u6709\u53ef\u4ee5\u4f5c\u4e3a $len$ \u7b54\u6848\u7684\u503c\uff0c\u53d6\u4e2a $max$ \u5c31\u662f \u957f\u5ea6\u4e3a $len$ \u7684\u7ec4\u7684\u6700\u540e\u7b54\u6848\u3002\n\n\u6c42\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a\u533a\u95f4\u6700\u5c0f\u503c\u7684\u6700\u5927\u957f\u5ea6\uff0c\u641e\u4e2a\u5355\u8c03\u6808\u5c31\u53ef\u4ee5\u3002\n\n\u6c42 $max$ \u7684\u8fc7\u7a0b\uff0c\u62ff\u7ebf\u6bb5\u6811\u6216\u8005\u6811\u72b6\u6570\u7ec4\u4f18\u5316\u4e00\u4e0b\u3002\n\n\u7136\u540e\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6 $O(nlogn)$\n\n**Code**\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define int long long\nconst int inf = 2147483647;\nconst int N = 2e5+10;\nint n,top;\nint ls[N],rs[N],len[N],a[N],sta[N],tr[N<<2];\ninline int read()\n{\n\tint s = 0,w = 1; char ch = getchar();\n\twhile(ch < '0' || ch > '9'){if(ch == '-') w = -1; ch = getchar();}\n\twhile(ch >= '0' && ch <= '9'){s = s * 10 + ch - '0'; ch = getchar();}\n\treturn s * w;\n}\nvoid up(int o)\n{\n\ttr[o] = max(tr[o<<1],tr[o<<1|1]);\n}\nvoid chenge(int o,int l,int r,int x,int val)\n{\n\tif(l == r)\n\t{\n\t\ttr[o] = max(tr[o],val);\n\t\treturn;\n\t}\n\tint mid = (l + r)>>1;\n\tif(x <= mid) chenge(o<<1,l,mid,x,val);\n\tif(x > mid) chenge(o<<1|1,mid+1,r,x,val);\n\tup(o);\n}\nint query(int o,int l,int r,int L,int R)\n{\n\tint res = 0;\n\tif(L <= l && R >= r) return tr[o];\n\tint mid = (l + r)>>1;\n\tif(L <= mid) res = max(res,query(o<<1,l,mid,L,R));\n\tif(R > mid) res = max(res,query(o<<1|1,mid+1,r,L,R));\n\treturn res;\n}\nvoid YYCH()//\u6c42\u6bcf\u4e2a\u5143\u7d20\u4f5c\u4e3a\u533a\u95f4\u6700\u5c0f\u503c\u7684\u6700\u957f\u533a\u95f4\u957f\u5ea6\n{\n\ta[0] = a[n+1] = -inf;\n\ttop = 0; sta[++top] = 0;\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\twhile(top && a[sta[top]] >= a[i]) top--;\n\t\tls[i] = sta[top]; sta[++top] = i;\n\t}\n\ttop = 0; sta[++top] = n+1;\n\tfor(int i = n; i >= 1; i--)\n\t{\n\t\twhile(top && a[sta[top]] >= a[i]) top--;\n\t\trs[i] = sta[top]; sta[++top] = i;\n\t}\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\tlen[i] = rs[i] - ls[i] - 1;\n\t}\n}\nsigned main()\n{\n\tn = read();\n\tfor(int i = 1; i <= n; i++) a[i] = read();\n\tYYCH();\n\tfor(int i = 1; i <= n; i++)//\u7ebf\u6bb5\u6811\u4f18\u5316\u4e00\u4e0b\u6c42\u6700\u503c\u7684\u8fc7\u7a0b\n\t{\n\t\tchenge(1,1,n,len[i],a[i]);\n\t}\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\tprintf(\"%d \",query(1,1,n,i,n));\n\t}\n\treturn 0;\n}\n```\n\n\n\n\n\n",
        "postTime": 1602247655,
        "uid": 248896,
        "name": "genshy",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "\u4ece\u7b54\u6848\u7684\u89d2\u5ea6\u51fa\u53d1\u3002\u6bd4\u5982\u6837\u4f8b\uff1a\n\n```\n10\n\n1 2 3 4 5 4 3 2 1 6\n```\n\n* \u5982\u679c\u961f\u4f0d\u4e2d\u6700\u5c0f\u503c\u4e3a 1\uff0c\u90a3\u4e48\u961f\u4f0d\u957f\u5ea6\u53ef\u4ee5\u8fbe\u5230 10\u3002\n\n* \u5982\u679c\u961f\u4f0d\u4e2d\u6700\u5c0f\u503c\u4e3a 2\uff0c\u90a3\u4e48\u6240\u6709\u7684 \u201c1\u201d \u5c31\u6210\u4e86\u963b\u9694\u70b9\uff0c\u6c42\u6700\u957f\u7684\u8fde\u7eed\u6bb5\u3002\n\n* \u5982\u679c\u961f\u4f0d\u4e2d\u6700\u5c0f\u503c\u4e3a 3\uff0c\u90a3\u4e48\u6240\u6709\u7684 \u201c2\u201d \u53c8\u6210\u4e86\u963b\u9694\u70b9\uff0c\u6c42\u6700\u957f\u7684\u8fde\u7eed\u6bb5\u3002\n\n* \u2026\u2026\n\n\u9898\u76ee\u5c31\u53d8\u6210\uff0c\u968f\u7740\u7b54\u6848\u4e0a\u5347\uff0c\u4e0d\u65ad\u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u65ad\u70b9\uff0c\u7ef4\u62a4\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u957f\u8fde\u7eed\u6bb5\u3002\u7b2c\u4e00\u611f\u89c9\u662f\u65e0\u8111\u7ebf\u6bb5\u6811\uff08~~\u867d\u7136\u6709\u5355\u8c03\u6808\u505a\u6cd5~~\uff09\uff0c\u66f4\u65b0\u8fc7\u7a0b\u5f88\u76f4\u89c2\u5f88\u66b4\u529b\u3002\u4e00\u4e2a\u7ebf\u6bb5\u5185\u7ef4\u62a4\uff1a**\u5de6\u7aef\u6700\u957f\u8fde\u7eed\u6bb5**\u3001**\u53f3\u7aef\u6700\u957f\u8fde\u7eed\u6bb5**\u3001**\u6574\u4e2a\u7ebf\u6bb5\u5185\u7684\u6700\u957f\u8fde\u7eed\u6bb5**\uff0c\u4ee5\u53ca\u4e00\u4e2a\u6807\u8bb0\uff1a**\u8be5\u6bb5\u662f\u5426\u5df2\u6709\u65ad\u70b9**\uff0c\u5982\u679c\u6ca1\u6709\u65ad\u70b9\uff0c\u90a3\u4e48\u5b83\u6574\u6bb5\u90fd\u662f\u7236\u4eb2\u7684\u5de6\u7aef\u6216\u53f3\u7aef\u8fde\u7eed\u6bb5\u3002\n\n```cpp\n#include <cstdio>\n#include <vector>\nusing std::vector;\n#include <algorithm>\nusing std::sort;\nusing std::max;\n\ntypedef vector<int>::iterator It;\n\nconst int N = 2e5 + 10;\n\nstruct Bear {\n  int id, h;\n  bool operator< (const Bear& g) {\n    return h < g.h;\n  }\n}bear[N];\n\nint n, ans[N], v[N], ref[N], cnt = 0;\nvector<int> p[N];\n\n\ninline int ls(int u) { return u * 2; }\ninline int rs(int u) { return u * 2 + 1; }\n\nstruct Node {\n  int lspace, rspace;\n  int maxspace, broken;\n  Node(int gl = 0, int gr = 0, int gm = 0, int gb = 0) {\n    lspace = gl; rspace = gr; maxspace = gm; broken = gb;\n  }\n  friend Node operator+ (const Node& lson, const Node& rson) {\n    Node tmp;\n    int midspace = lson.rspace + rson.lspace;\n    tmp.maxspace = max(midspace, max(lson.maxspace, rson.maxspace));\n    \n    if (not lson.broken)\n      tmp.lspace = lson.maxspace + rson.lspace;\n    else\n      tmp.lspace = lson.lspace;\n    \n    if (not rson.broken)\n      tmp.rspace = lson.rspace + rson.maxspace;\n    else\n      tmp.rspace = rson.rspace;\n    \n    tmp.broken = lson.broken or rson.broken;\n    return tmp;\n  }\n}node[N * 4];\n\nvoid build(int u, int l, int r) {\n  if (l == r) {\n    node[u].lspace = node[u].rspace = node[u].maxspace = 1;\n    return;\n  }\n  int mid = (l + r) / 2;\n  build(ls(u), l, mid);\n  build(rs(u), mid + 1, r);\n  node[u] = node[ls(u)] + node[rs(u)];\n}\n\nvoid add_point(int u, int l, int r, int x) {\n  if (l == r) {\n    node[u].broken = true;\n    node[u].lspace = node[u].rspace = node[u].maxspace = 0;\n    return;\n  }\n  int mid = (l + r) / 2;\n  if (x <= mid)\n    add_point(ls(u), l, mid, x);\n  else\n    add_point(rs(u), mid + 1, r, x);\n  node[u] = node[ls(u)] + node[rs(u)];\n}\n\nint main() {\n  scanf(\"%d\", &n);\n  for (int i = 1; i <= n; ++i)\n    scanf(\"%d\", &bear[i].h), bear[i].id = i;\n  sort(bear + 1, bear + n + 1);\n  for (int i = 1; i <= n; ++i) {\n    if (bear[i].h != bear[i - 1].h)\n      ref[++cnt] = bear[i].h;\n    v[bear[i].id] = cnt;\n  }\n  build(1, 1, n);\n  for (int i = 1; i <= n; ++i)\n    p[v[i]].push_back(i);\n  for (int i = 1; i <= cnt; ++i) { // i : processed val\n    ans[node[1].maxspace] = i;\n    for (It it = p[i].begin(); it < p[i].end(); ++it)\n      add_point(1, 1, n, *it);\n  }\n  for (int i = n; i >= 1; --i)\n    ans[i] = max(ans[i], ans[i + 1]);\n  for (int i = 1; i <= n; ++i)\n    printf(\"%d\\n\", ref[ans[i]]);\n  return 0;\n}\n```",
        "postTime": 1554106633,
        "uid": 49474,
        "name": "\u5b66\u59d4",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "\u4e00\u4e2a\u88f8\u5355\u8c03\u6808\u7684\u9898\n\n\u5bf9\u4e8e\u70b9i\uff0c\u67e5\u51fa\u5b83\u7684\u5de6\u53f3\u7b2c\u4e00\u4e2a\u6bd4\u5b83\u5c0f\u7684\u8282\u70b9\uff0c\u5206\u522b\u8bb0\u5f55le\u548cri\u7684\u503c\uff0c\u90a3\u4e48\uff0cri-1\u4e00\u76f4\u5230le+1\u90fd\u662f\u5408\u6cd5\u7684\u533a\u95f4\uff0c\u6240\u4ee5num[k]=max(a[i]),ri[i]-le[i]+1=k;\n\n\u6700\u540e\uff0c\u53ea\u9700\u8981num[k]=max(num[k],num[k+1]\u5c31\u53ef\u4ee5\u5566\n\u4e0a\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n;\nint a[1001001],le[1001001],ri[1001001],sta[1001001],top,num[1001001];\ninline void push(int x)\n{\n    while(a[x]<a[sta[top]]&&top)\n    ri[sta[top]]=x-1,top--;\n    sta[++top]=x;\n}\ninline void push2(int x)\n{\n    while(a[x]<a[sta[top]]&&top)\n    le[sta[top]]=x+1,top--;\n    sta[++top]=x;\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);a[n+1]=-1;\n    for(int i=1;i<=n;i++)push(i);\n    while(top)ri[sta[top--]]=n;\n    top=0;\n    for(int i=n;i;i--)push2(i);\n    while(top)le[sta[top--]]=1;\n    for(int i=1;i<=n;i++) num[ri[i]-le[i]+1]=max(a[i],num[ri[i]-le[i]+1]);\n    for(int i=n;i;i--) num[i]=max(num[i],num[i+1]);\n    for(int i=1;i<=n;i++)printf(\"%d \",num[i]);\n}\n```\n",
        "postTime": 1553920833,
        "uid": 155047,
        "name": "yanghaokun",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "### P.S.\n\u6211\u5c31\u662f\u4e2a\u5927\u50bb\u903c\uff0c\u4e00\u9053\u7b80\u5355\u7684\u5355\u8c03\u961f\u5217\u9898\u76ee\u8981\u7528 ODT\u3002  \n\n### Problem.\n\u8ba9\u4f60\u6c42\u533a\u95f4\u957f\u5ea6\u4e3a $i$ $(i\\in[1,n])$ \u7684\u533a\u95f4\u6700\u5c0f\u503c\u7684\u6700\u5927\u503c\u3002  \n\n### Solution.\n\u6211\u4eec\u5bf9\u6240\u6709\u5143\u7d20\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002  \n\u90a3\u4e48\u6211\u4eec\u5f53\u524d\u626b\u5230\u7684\u8fd9\u4e2a\u5143\u7d20\u80af\u5b9a\u662f\u76ee\u524d\u7684\u201c\u74f6\u9888\u201d\uff0c\u662f\u6700\u5c0f\u503c\u3002  \n\u7136\u540e\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u4ee5\u5b83\u4e3a\u4e2d\u5fc3\uff0c\u628a\u5b83\u6240\u5728\u7684\u533a\u95f4\u5272\u5f00\u3002  \n\u8fd9\u6837\uff0c\u6bcf\u4e2a\u5143\u7d20\u6240\u5728\u7684\u533a\u95f4\u90fd\u662f\u5b83\u533a\u95f4\u7684\u6700\u5c0f\u503c\u3002  \n\u90a3\u4e48\u6211\u4eec\u5728\u6bcf\u6b21\u5272\u533a\u95f4\u65f6\u66f4\u65b0\u4e00\u4e0b\u957f\u5ea6\u4e3a\u5f53\u524d\u533a\u95f4\u957f\u5ea6\u5185\u7684\u6700\u5c0f\u503c\u5c31\u597d\u4e86\u3002  \n\u800c\u5f53\u524d\u533a\u95f4\u5185\u6700\u5c0f\u503c\u5c31\u662f\u6211\u4eec\u626b\u63cf\u5230\u7684\u5143\u7d20\u3002  \n\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u7c7b\u4f3c ODT \u90a3\u6837\u5b9e\u73b0\u3002  \n\u5b8c\u7ed3\u6492\u82b1\uff0c~~Chtholly~~ \u4e0d\u53ef\u7231\uff0c~~Nephren~~ \u53ef\u7231\u3002  \n\n### Coding.\n```cpp\n//\u613f\u4f60\u6709\u4e00\u5929\u80fd\u548c\u4f60\u91cd\u8981\u7684\u4eba\u91cd\u9022\u3002\n//\u5927\u5207\u306a\u4eba\u3068\u3044\u3064\u304b\u307e\u305f\u5de1\u308a\u4f1a\u3048\u307e\u3059\u3088\u3046\u306b\n#include<bits/stdc++.h>\nusing namespace std;const int INF=1e9+9;\ntemplate<typename T>inline void read(T &x)\n{\n\tx=0;char c=getchar(),f=0;\n\tfor(;c<'0'||c>'9';c=getchar()) if(!(c^45)) f=1;\n\tfor(;c>='0'&&c<='9';c=getchar()) x=(x<<1)+(x<<3)+(c^48);\n\tif(f) x=-x;\n}\nstruct node{int w,v;bool operator<(node b) const {return v<b.v;}}a[200005];\n//\u6bcf\u4e2a\u8282\u70b9\u7684\u4f4d\u7f6e\uff0c\u6309\u7167\u8282\u70b9\u6743\u503c\u6392\u5e8f\nstruct seg{mutable int l,r;bool operator<(seg b) const {return l<b.l;}};\n//ODT \u7684\u533a\u95f4\nint n,rs[200005];typedef set<seg>::iterator IT;set<seg>s;\ninline void split(int w,int vl)\n{\n\t// for(IT i=s.begin();i!=s.end();i++) printf(\"[ %d , %d ]\\n\",i->l,i->r);\n\tIT i=s.lower_bound((seg){w,0});//\u627e\n\t// putchar('\\n');cerr<<\"split : \"<<w<<\" ( \"<<i->l<<\" , \"<<i->r<<endl;\n\tif(i!=s.end()&&i->l==w)\n\t{//\u5982\u679c\u5f53\u524d\u533a\u95f4\u5de6\u7aef\u70b9\u521a\u597d\u662f\u76ee\u6807\uff0c\u4e0d\u9700\u8981\u5272\u5f00\n\t\trs[i->r-i->l+1]=max(rs[i->r-i->l+1],vl);//\u66f4\u65b0\u7b54\u6848\n\t\tif(i->l==i->r) return(void)(s.erase(i));else return (void)(i->l++);\n\t\t//\u5272\u5f00\u64cd\u4f5c\n\t}else --i;//ODT \u57fa\u672c\u64cd\u4f5c\n\trs[i->r-i->l+1]=max(rs[i->r-i->l+1],vl);//\u66f4\u65b0\u7b54\u6848\n\t// cerr<<i->l<<\" ~ \"<<i->r<<\" -> \"<<vl<<endl;\n\tint l=i->l,r=i->r;s.erase(i),s.insert((seg){l,w-1});\n\tif(w!=r) s.insert((seg){w+1,r}).first;\n\t//ODT \u57fa\u672c\u64cd\u4f5c\n}\nint main()\n{\n\tread(n);for(int i=1;i<=n;i++) read(a[i].v),a[i].w=i;\n\tsort(a+1,a+n+1),memset(rs,0,sizeof(rs)),s.insert((seg){1,n});//\u521d\u59cb\u5316\n\tfor(int i=1;i<=n;i++) split(a[i].w,a[i].v);//\u626b\u63cf\n\tfor(int i=n;i>=1;i--) rs[i]=max(rs[i],rs[i+1]);\n\tfor(int i=1;i<=n;i++) printf(\"%d%c\",rs[i],i==n?'\\n':' ');\n\treturn 0;\n}\n```",
        "postTime": 1603437888,
        "uid": 44805,
        "name": "Leap_Frog",
        "ccfLevel": 7,
        "title": "CF547B Mike and Feet\uff08\u9898\u89e3\uff09"
    },
    {
        "content": "\u6765\u4e00\u4e2a\u5e76\u67e5\u96c6\u505a\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(nlogn)$\n\n\u5c06\u9ad8\u5ea6\u5148\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u7136\u540e\u4e00\u4e2a\u4e00\u4e2a\u63d2\u5165\u5230\u539f\u5e8f\u5217\u4e2d\uff08\u4f4d\u7f6e\u4e0d\u80fd\u53d8\uff09\n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u627e\u5230\u4e86\u524d $k$ \u4e2a\u7b54\u6848\u4e86\uff0c\u6b64\u65f6\u63d2\u5165\u4e00\u4e2a\u6570\u5c31\u5c06\u5f53\u524d\u4f4d\u7f6e\u4e0e\u4e24\u8fb9\u7684\u5408\u5e76\u6210\u4e00\u5927\u6bb5\uff0c\u7136\u540e\u6b64\u65f6\u82e5\u8be5\u6bb5\u957f\u5ea6 $>k$ \uff0c\u5219\u4ece $k+1$ \u5230 $size$ \u7684\u7b54\u6848\u90fd\u662f\u8be5\u9ad8\u5ea6\uff08\u56e0\u4e3a\u662f\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u6240\u4ee5\u80af\u5b9a\u662f\u6700\u5927\u7684\uff09\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<cctype>\n#include<algorithm>\n\nusing namespace std;\n\n#define maxn 202202\n\ninline int read(){\n\tint r=0,f=0;\n\tchar c;\n\twhile(!isdigit(c=getchar()))f|=(c=='-');\n\twhile(isdigit(c))r=(r<<1)+(r<<3)+(c^48),c=getchar();\n\treturn f?-r:r;\n}\n\ninline void swap(int &a,int &b){\n\tint c=a;\n\ta=b;\n\tb=c;\n}\n\nstruct B{\n\tint h,num;\n\tB() {}\n\tB(int h,int num):h(h),num(num) {}\n\tbool operator <(const B &b) const{\n\t\treturn h<b.h;\n\t}\n}b[maxn];\n\nbool in[maxn];\n\nint n,f[maxn],size[maxn];\n\nint find(int x){\n\treturn x^f[x]?f[x]=find(f[x]):x;\n}\n\ninline void Union(int u,int v){\n\tint fu=find(u),fv=find(v);\n\tif(size[fu]<size[fv])swap(fu,fv);\n\tsize[fu]+=size[fv];\n\tf[fv]=fu;\n}\n\nint main(){\n    n=read();\n\tfor(int i=1;i<=n;i++){\n\t\tb[i]=B(read(),i);//\u8981\u4fdd\u7559\u8be5\u9ad8\u5ea6\u4f4d\u7f6e\n\t\tf[i]=i,size[i]=1;\n\t}\n\tsort(b+1,b+1+n);\n\tint k=1;\n\tfor(int i=n;i>=1;i--){\n\t\tint num=b[i].num;\n\t\tin[num]=1;//\u6807\u8bb0\u8be5\u4f4d\u7f6e\u5df2\u7ecf\u63d2\u5165\u4e86\n\t\tif(in[num-1])Union(num-1,num);//\u770b\u5de6\u53f3\u662f\u5426\u5df2\u7ecf\u63d2\u5165\uff0c\n\t\tif(in[num+1])Union(num,num+1);//\u82e5\u63d2\u5165\u4e86\uff0c\u5c31\u5408\u5e76\u8d77\u6765\n\t\tint s=size[find(num)];\n\t\tfor(;k<=s;k++)printf(\"%d \",b[i].h);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1602648921,
        "uid": 71403,
        "name": "\u4e00\u53f6\u77e5\u79cb\u3002",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "# [\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF547B)\n\u5176\u5b9e\u9898\u76ee\u7ffb\u8bd1\u6709\u70b9\u8be1\u5f02\uff0c\u63d0\u4f9b\u4e00\u4e0b\u6b63\u786e\u7ffb\u8bd1\uff1a\n\n\u7ffb\u8bd1\u6765\u6e90\uff1a[$\\green{apple365}$](https://www.luogu.com.cn/user/123216)\n\n\u8f93\u5165 $n$ \u4e2a\u6574\u6570\u4ee3\u8868 $n$ \u4e2a\u718a\u7684\u9ad8\u5ea6\uff0c\u5bf9\u4e8e\u957f\u5ea6\u4e3a $x$ \u7684\u533a\u95f4 \u5b9a\u4e49\u529b\u91cf\u503c\u4e3a\u8fd9\u4e2a\u533a\u95f4\u4e2d\u718a\u7684\u6700\u5c0f\u7684\u8eab\u9ad8\u503c\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a $x(1<=x<=n)$ \u6c42\u51fa\u6700\u5927\u7684\u529b\u91cf\u503c\u3002\n\n\u8a00\u5f52\u6b63\u4f20\uff0c\u8fd9\u9898\u5927\u81f4\u5c31\u662f\u8981\u6c42\u51fa\u6bcf\u4e00\u4e2a\u70b9\u4e3a\u6700\u5c0f\u503c\u7684\u533a\u95f4\uff0c\u7136\u540e\u628a\u6bcf\u4e2a\u957f\u5ea6\u7684\u503c\u7684\u6240\u6709\u53ef\u80fd\u53d6 $\\max$ \u3002\u8fd9\u91cc\u7684\u5355\u8c03\u6808\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\uff08[\u4e0d\u4f1a\u5c31\u63a5\u53d7\u4e00\u4e0b\u6211\u7684\u5b89\u5229\u5427](https://www.luogu.com.cn/blog/359614/dan-diao-dui-lie-dan-diao-zhan-xue-xi-bi-ji)\uff09\uff0c\u96be\u70b9\u5c31\u662f\u600e\u4e48\u8f93\u51fa\uff0c\u5982\u679c\u7b3c\u7edf\u5730\u628a\u6bcf\u4e00\u4e2a\u957f\u5ea6\u548c\u6bd4\u4ed6\u957f\u5ea6\u5c0f\u7684\u7b54\u6848\u53d6 $\\max$ \u4e00\u5b9a\u4f1a $TLE$ \uff0c\u90a3\u4e48\u600e\u4e48\u529e\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u5148 $O(n)$ \u5904\u7406\u4e0b\u6bcf\u4e2a\u957f\u5ea6\u7684\u6700\u5c0f\u503c\uff0c\u7136\u540e\u5012\u5e8f\u5faa\u73af\uff0c\u76f4\u63a5\n```\nans[i]=max(ans[i],ans[i+1]);\n```\n\u5c31\u884c\u4e86\uff0c\u56e0\u4e3a\u5012\u5e8f\u5faa\u73af\u4e0a\u4e00\u6b21\u6bd4\u8f83\u51fa\u6765\u7684\u503c\u4e5f\u4f1a\u53c2\u4e0e\u4e0b\u4e00\u6b21\u6bd4\u8f83\uff0c\u5b9e\u73b0\u4e86 $O(n)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n$Code:$\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,r[200005],l[200005],a[200005],ans[200005];\nstack<int>stk1,stk2;\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\t\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\twhile(!stk1.empty()&&a[i]<a[stk1.top()]){\n            r[stk1.top()]=i-1;\n            stk1.pop();\n        }\n        stk1.push(i);\n\t}\n\twhile(!stk1.empty()){\n\t\tr[stk1.top()]=n;\n\t\tstk1.pop();//\u627e\u4e0d\u5230\u5c31\u8bbe\u4e3a\u8fb9\u754c\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\twhile(!stk2.empty()&&a[i]<a[stk2.top()]){\n            l[stk2.top()]=i+1;//\u5de6\u53f3\u4e24\u8fb9\u8981\u7ef4\u62a4\u4e24\u6b21\u5355\u8c03\u6808\n            stk2.pop();\n        }\n        stk2.push(i);\n\t}\n\twhile(!stk2.empty()){\n\t\tl[stk2.top()]=1;\n\t\tstk2.pop();\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tans[r[i]-l[i]+1]=max(a[i],ans[r[i]-l[i]+1]);\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\tans[i]=max(ans[i],ans[i+1]);//\u5982\u4e0a\u64cd\u4f5c\n\t}\n\tfor(int i=1;i<=n;i++)cout<<ans[i]<<' ';\n\treturn 0;\n}\n```\n",
        "postTime": 1612499436,
        "uid": 359614,
        "name": "Forever1507",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    },
    {
        "content": "\u5355\u8c03\u6808+\u79bb\u6563\u5316\nsz[i]\u8868\u793a\u4ee5i\u4e3a\u6700\u5c0f\u503c\u7684\u533a\u95f4\u7684\u6700\u5927\u957f\u5ea6\uff0c\u6392\u5e8f\u540e\u8f93\u51fa\u5373\u53ef\n```cpp\n#include<cstdio>\n#include<ctype.h>\n#include<iostream>\n#include<cstring>\n#include<algorithm>\n#include<stdlib.h>\nusing namespace std;\n#define ll long long\n#define ull unsigned long long\ninline ll rd()\n{\n    ll x=0,f=1;char c=getchar();\n    while(!isdigit(c)){if(c=='-') f=-f;c=getchar();}\n    while(isdigit(c)){x=(x<<1)+(x<<3)+(c^48);c=getchar();}\n    return x*f;\n}\nconst int N=2e5+7;\nint a[N],num[N],b[N],s[N],sz[N],l[N];\nbool cmp(int c,int d){return a[c]<a[d];}\nint main()\n{\n\tint n=rd(),cnt=0,top=0;\n\tfor(int i=1;i<=n;i++) a[i]=rd(),num[i]=i;\n\tsort(num+1,num+1+n,cmp);\n\tfor(int i=1;i<=n;i++) {if(a[num[i]]!=a[num[i-1]]) cnt++;b[num[i]]=cnt;}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\twhile(top>0&&b[i]<=b[s[top]]) top--;\n\t\tl[i]=s[top];s[++top]=i;\n\t}\n\ttop=0;s[top]=n+1;\n\tfor(int i=n;i>0;i--)\n\t{\n\t\twhile(top>0&&b[i]<=b[s[top]]) top--;\n\t\tsz[b[i]]=max(sz[b[i]],s[top]-l[i]-1);s[++top]=i;\n\t}\n\tint j=n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\twhile(j>0&&sz[b[num[j]]]<i) j--;\n\t\tprintf(\"%d \",a[num[j]]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1553830222,
        "uid": 87455,
        "name": "\u8001\u563f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF547B \u3010Mike and Feet\u3011"
    }
]
[
    {
        "content": "**\u826f\u5fc3\u8d85\u7ec6\u9898\u89e3qwq**\n\n$m$ \u4e2a\u5df2\u70b9\u4eae\u7684\u706f\u5c06\u5e8f\u5217\u5206\u6210 $m+1$ \u6bb5\uff0c\u4ee5 $[1, m+1]$ \u7ed9\u6bcf\u6bb5\u7f16\u53f7\u3002\u6211\u4eec\u6bcf\u6b21\u53ea\u80fd\u70b9\u4eae\u4e00\u6bb5\u6700\u5de6\u8fb9\u7684\u706f\u6216\u8005\u6700\u53f3\u8fb9\u7684\u706f\u3002\uff08\u6709\u4e24\u4e2a\u4f8b\u5916\uff1a\u6700\u5de6\u8fb9\u7684\u6bb5\u53ea\u80fd\u70b9\u4eae\u6700\u53f3\u8fb9\u7684\u706f\uff0c\u6700\u53f3\u8fb9\u7684\u6bb5\u53ea\u80fd\u70b9\u4eae\u6700\u5de6\u8fb9\u7684\u706f\u3002\uff09\n\n\u6211\u4eec\u8981\u64cd\u4f5c $n-m$ \u6b21\uff0c\u4e5f\u5c31\u662f\u7ed9\u51fa\u4e00\u4e2a\u957f\u4e3a $n-m$ \u7684\u64cd\u4f5c\u5e8f\u5217 $op$\uff0c\u6309\u987a\u5e8f\u4f9d\u6b21\u64cd\u4f5c $op_i$\uff08$1 \\le i \\le n-m$\uff09\u3002$op$ \u4e2d\u7684\u6bcf\u9879\u90fd\u662f\u4e00\u79cd\u64cd\u4f5c\uff0c\u5373\u70b9\u4eae\u7684\u6bb5\u7684\u7f16\u53f7\u4e0e\u70b9\u4eae\u7684\u706f\u5728\u8be5\u6bb5\u6700\u5de6\u8fd8\u662f\u6700\u53f3\u3002\n\n\u4f8b\u5982\uff0c\u5bf9\u4e8e\u8f93\u5165\uff1a\n```\n7 2\n2 5\n```\n\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u64cd\u4f5c $2l$(\u70b9\u4eae\u7b2c $2$ \u6bb5\u6700\u5de6\u8fb9\u7684\u706f)\uff0c\u5219\u7b2c $3$ \u4e2a\u706f\u88ab\u70b9\u4eae\u3002\n$op$ \u53ef\u4ee5\u4e3a $2l, 2r, 1r, 3l, 3l$\u3002\n\n\u6211\u4eec\u5148\u4e0d\u8003\u8651\u6bcf\u6b21\u53d6\u5de6\u8fd8\u662f\u53d6\u53f3\u7684\uff0c\u53ea\u8003\u8651\u6bcf\u6b21\u53d6\u5f97\u662f\u7b2c\u51e0\u6bb5\uff08\u8fd9\u6837\u521a\u624d\u90a3\u4e2a $op$ \u5c31\u53d8\u6210\u4e86 $2, 2, 1, 3, 3$\uff09\uff0c\u90a3\u6709\u591a\u5c11\u79cd\u53ef\u80fd\uff1f\n\n\u6211\u4eec\u79f0\u7b2c $i$ \u6bb5\u7684\u957f\u5ea6\u4e3a $l_i$\uff0c\u5219\u603b\u60c5\u51b5\u6570\u4e3a\uff1a\n$$\n\\frac{(n-m)!}{\\prod_{i=1}^{m+1}{l_i!}}\n$$\n\n\u8fd9\u4e2a\u80af\u5b9a\u770b\u5f97\u61c2\u5427\uff01\n\n\u5982\u679c\u8fd9\u770b\u4e0d\u61c2\uff0c\u4f60\u8fd9\u4e48\u7406\u89e3\uff1a\u628a $op$ \u5168\u6392\u5217\uff08\u5373 $(n-m)!$ \u79cd\u4e0d\u540c\u60c5\u51b5\uff09\uff0c\u56e0\u4e3a\u6709 $l_i$ \u4e2a\u6570\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u6240\u6709\u6392\u5217\u5206\u6210 $l_i!$ \u7ec4\uff0c\u7ec4\u90fd\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002\u6240\u4ee5\u8981\u9664\u4ee5\u4e0a $l_i!$\u3002\n\n\u7136\u540e\u6bcf\u4e2a\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4e3a\u5de6\u4e5f\u53ef\u4ee5\u4e3a\u53f3\uff0c\u6240\u4ee5\u6bcf\u6b21\u90fd\u6709 $2$ \u79cd\u64cd\u4f5c\u65b9\u5f0f\u3002**\u4f46\u662f\u6700\u540e\u4e00\u6b21\u53ea\u6709\u4e00\u79cd\u53d6\u6cd5\uff01\uff01\uff01\u8ba9\u4f60\u70b9\u4eae\u4e00\u76cf\u706f\uff0c\u6709\u51e0\u79cd\u70b9\u6cd5\uff1f\uff01**\n\n\u7efc\u4e0a\uff0c\u7b54\u6848\u662f\n$$\n\\frac{(n-m)!}{\\prod_{i=1}^{m+1}{l_i!}}\\prod_{i=1}^{m+1}{2^{l_i-1}}\n$$\n\n\u53ef\u4ee5\u7528[\u4e58\u6cd5\u9006\u5143](https://www.luogu.com.cn/problem/P3811)\u5728\u6a21\u7684\u610f\u4e49\u4e0b\u5c06\u9664\u6cd5\u8f6c\u4e3a\u4e58\u6cd5\uff0c\u5728\u6b64\u4e0d\u8d58\u8ff0\u3002\u4e0d\u8fc7\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e $10^9+5$ \u5e76\u4e0d\u662f\u8d28\u6570\uff0c\u6240\u4ee5\u65e0\u6cd5\u901a\u8fc7\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u51fa $l_i!$ \u5728\u6a21 $10^9+7$ \u610f\u4e49\u4e0b\u7684\u4e58\u6cd5\u9006\u5143\uff0c\u6240\u4ee5\u5e94\u8be5\u9884\u5904\u7406 $l_i!$ \u7684\u9006\u5143\uff1a\n$$\n(x!)^{-1} \\equiv [(x-1)!]^{-1}x^{-1}\\pmod{10^9+7}\n$$\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e3, MOD = 1e9+7;\nint n, m, ans;\nint pos[N+2]; // \u6bcf\u4e2a\u706f\u7684\u4f4d\u7f6e\nint inv[N+1]; // \u4e58\u6cd5\u9006\u5143\nint invfac[N+1]; // i! \u7684\u9006\u5143\nint two[N+1]; // 2^i;\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for(int i = 1; i <= m; ++i) scanf(\"%d\", &pos[i]);\n\n    sort(pos+1, pos+m+1);\n\n    inv[1] = 1;\n    for(int i = 2; i <= n; ++i) {\n        inv[i] = ((long long)(MOD-MOD/i)*inv[MOD%i])%MOD;\n    }\n\n    invfac[1] = 1;\n    for(int i = 2; i <= n; ++i) invfac[i] = ((long long)invfac[i-1]*inv[i])%MOD;\n\n    two[0] = 1;\n    for(int i = 1; i <= n; ++i) two[i] = (two[i-1]<<1)%MOD;\n\n    ans = 1;\n    for(int i = 2; i <= n-m; ++i) ans = ((long long)ans*i)%MOD;\n\n    pos[m+1] = n+1;\n    for(int i = 0; i <= m; ++i) {\n        int l = pos[i+1]-pos[i]-1;\n        if(l <= 0) continue;\n        if(i > 0 && i < m) ans = ((long long)ans*two[l-1])%MOD;\n        ans = ((long long)ans*invfac[l])%MOD;\n    }\n\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```",
        "postTime": 1650114328,
        "uid": 150956,
        "name": "StillEmpty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 \u2014\u2014 CF294C Shaass and Lights"
    },
    {
        "content": "# \u89e3\u9898\u601d\u8def\n\n\u597d\u6c34\u7684\u7d2b\u9898\uff0c\u611f\u89c9\u662f\u9ec4 or \u7eff\u3002\n\n\u5728\u4ee5\u4e0b\u7684\u63a8\u5bfc\u4e2d\uff0c\u53e6 $l$ \u4e3a\u76ee\u524d\u533a\u95f4\u957f\u5ea6\uff0c$k$ \u4e3a\u76ee\u524d\u533a\u95f4\u4e2d\u5df2\u70b9\u4eae\u7684\u706f\u7684\u4e2a\u6570\u3002\n\n\u6211\u4eec\u5206\u4e09\u7c7b\u8ba8\u8bba\u3002\n\n1. \u5bf9\u4e8e\u6b63\u5e38\u60c5\u51b5\uff0c\u9009\u62e9\u706f\u7684\u65b9\u6cd5\u6709 $C_l^k$ \u79cd\uff0c\u5bf9\u4e8e\u6bcf\u79cd\u65b9\u6cd5\u90fd\u53ef\u4ee5\u4ece\u533a\u95f4\u4e2d\u9009\u51fa\u82e5\u5e72\u4e2a $k'=0$ \u7684\u533a\u95f4\uff08$k'=l$ \u7684\u533a\u95f4\u4e0d\u9700\u8981\u5904\u7406\uff09\u7528 \u7b2c\u4e8c\u7c7b\u7684\u65b9\u6cd5\u5904\u7406\u3002\n\n2. \u5bf9\u4e8e $k=0$ \u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ea\u80fd\u4ece\u4e24\u7aef\u5411\u4e2d\u95f4\u70b9\uff0c\u6bcf\u6b21\u53ef\u4ee5\u70b9\u5de6\u8fb9\u4e5f\u53ef\u4ee5\u70b9\u53f3\u8fb9\uff0c\u4e2d\u5fc3\u70b9\u4e0d\u9700\u8981\u9009\u62e9\uff0c\u6240\u6709\u5171\u6709 $2^{l-1}$ \u79cd\u65b9\u6cd5\u3002\n\n3. \u5bf9\u4e8e\u533a\u95f4\u4e00\u6bb5\u662f\u7aef\u70b9\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ea\u80fd\u4ece\u6709\u4eae\u706f\u7684\u5730\u65b9\u5f80\u53e6\u4e00\u7aef\u70b9\uff0c$1$ \u79cd\u3002\n\n# \u4ee3\u7801\u5b9e\u73b0\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1005, P = 1e9 + 7;\nll a[N], C[N][N];\nvoid init_C() {\n\tfor (int i = 0; i < N; ++i) {\n\t\tfor (int j = 0; j <= i; ++j) {\n\t\t\tif (i == 0 || j == 0 || i == j) {\n\t\t\t\tC[i][j] = 1;\n\t\t\t} else {\n\t\t\t\tC[i][j] = (C[i - 1][j] + C[i - 1][j - 1]) % P;\n\t\t\t}\n\t\t}\n\t}\n}\nll qpow(ll x, ll y) {\n\tll res = 1;\n\twhile (y) {\n\t\tif (y & 1) {\n\t\t\tres = res * x % P;\n\t\t}\n\t\tx = x * x % P;\n\t\ty >>= 1;\n\t}\n\treturn res;\n}\nint main() {\n\tios :: sync_with_stdio(0);\n\tinit_C();\n\tint n, m;\n\tcin >> n >> m;\n\tfor (int i = 1; i <= m; ++i) {\n\t\tcin >> a[i];\n\t}\n\tsort(a + 1, a + m + 1);\n\tll res = 1;\n\tint k = n - m;\n\tfor (int i = 1; i < m; ++i) {\n\t\tint l = a[i + 1] - a[i] - 1;\n\t\tif (!l) {\n\t\t\tcontinue;\n\t\t}\n\t\tres = res * C[k][l] % P * qpow(2, l - 1) % P;\n\t\tk -= l;\n\t}\n\tres = res * C[k][a[1] - 1] % P;\n\tcout << res << '\\n';\n\treturn 0;\n}\n\n```\n\nGood Good \u8d3a\u9898\uff0cDay Day Up\uff01\uff01",
        "postTime": 1643895171,
        "uid": 308106,
        "name": "_rockyyue_",
        "ccfLevel": 0,
        "title": "\u849f\u84bb\u541b\u7684\u5237\u9898\u65e5\u8bb0\u4e4b\u6570\u5b66\u4e13\u9898T3\uff1aCF294C Shaass and Lights"
    },
    {
        "content": "[$\\Large\\texttt{CF294C}$](https://www.luogu.com.cn/problem/CF294C)\n\n[$\\tiny\\texttt{In my cnblogs}$](https://www.cnblogs.com/RedreamMer/p/14076452.html)\n\n\u5410\u69fd\u4e00\u53e5\uff1a\u771f\u7684\u662f\u6076\u8bc4\uff0c\u8fd8\u6709\u6570\u636e\u8303\u56f4\u5b8c\u5168\u53ef\u4ee5\u5f00\u5230 $1e5$ \u7684\u3002\n\n\u505a\u6cd5\uff1a\u63a8\u5f0f\u5b50\n\n## \u9898\u610f\n\n\u4e0d\u4f5c\u8d58\u8ff0\u3002\n\n## \u601d\u8def\n\n+ \u9996\u5148\u5206\u522b\u8ba1\u7b97\u5bf9\u4e8e\u6240\u6709\u706f\u5c06\u8fd9\u6761\u7ebf\u6bb5\u6240\u56f4\u6210\u7684\u6bcf\u6761\u7ebf\u6bb5\u7684\u70b9\u706f\u65b9\u6cd5\uff0c\u56e0\u4e3a\u6bcf\u6761\u7ebf\u6bb5\u4e0a\u8981\u70b9\u7684\u706f\u7684\u4e2a\u6570\u4e00\u5b9a\uff0c\u4f46\u662f\u53ef\u4ee5\u7531\u5de6\u7aef\u70b9\u5411\u53f3\u4e5f\u53ef\u4ee5\u4ece\u53f3\u7aef\u70b9\u5411\u5de6\uff08\u9664\u4e86\u8d77\u59cb\u548c\u7ed3\u5c3e\u7684\u4e24\u6761\u7ebf\u6bb5\uff09\uff0c\u70b9\u706f\u7684\u4ea4\u9519\u91cd\u590d\u6784\u6210\u4e86\u4e00\u6bb5\u5e8f\u5217\u3002\n\n\t\u5219\u6211\u4eec\u8981\u6c42\u7684\u4fbf\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a\u5728\u4e00\u6bb5\u5e8f\u5217\u4e0a\u6d82\u8272\uff0c\u4e24\u79cd\u989c\u8272\uff0c\u5219\u6d82\u8272\u65b9\u6848\u4fbf\u662f $2^{len}$ \u3002\n   \n   \u4f46\u662f\u8fd9\u662f\u9519\u7684\uff0c\u5f53\u4e24\u8fb9\u7684\u706f\u70b9\u5230\u53ea\u5269\u4e00\u4e2a\u706f\u65f6\uff0c\u70b9\u4e0b\u4e00\u4e2a\u706f\u5bf9\u4e8e\u4ece\u5de6\u8fd8\u662f\u4ece\u53f3\u6765\u8bf4\u90fd\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u65b9\u6848\u662f $2^{len-1}$\u3002\n   \n+ \uff08\u5176\u5b9e\u8fd9\u662f\u4e2a\u7ecf\u5178\u95ee\u9898\uff09\u56e0\u4e3a\u6bcf\u6bb5\u7ebf\u6bb5\u70b9\u706f\u7684\u6b65\u9aa4\u4e92\u4e0d\u5e72\u6270\u3002\n\n\t\u5148\u8003\u8651\u4e24\u6bb5\u533a\u95f4 $A$ \uff0c $B$ \u4e00\u5171\u7684\u70b9\u4eae\u65b9\u6848\uff0c\u4e00\u79cd\u70b9\u4eae $A$ \u533a\u95f4\u7684\u65b9\u6848\u53ef\u4ee5\u5bf9\u5e94\u4e00\u79cd\u70b9\u4eae $B$ \u533a\u95f4\u7684\u65b9\u6848\uff0c\u9996\u5148\u7684\u65b9\u6848\u6570\u4fbf\u662f $calc_A\\times calc_B$ \uff0c\u5176\u6b21\uff0c**\u5408\u8d77\u6765\u7684\u6bcf\u4e00\u79cd\u70b9\u4eae\u65b9\u6848**\u53ef\u4ee5\u662f $A$ \uff0c $B$ \u533a\u95f4\u4ea4\u7ec7\u8d77\u6765\uff0c\u5e76\u4e14\u662f**\u4efb\u610f**\u4ea4\u7ec7\uff0c\u6240\u4ee5**\u5408\u8d77\u6765\u6bcf\u4e00\u79cd\u65b9\u6848**\u5bf9\u5e94\u4e86 $C(len_A+len_B,len_A)$ \u79cd\u65b9\u6848\uff0c\u76f8\u4e58\u4fbf\u662f\u4e24\u4e2a\u533a\u95f4\u4e00\u8d77\u70b9\u4eae\u7684\u65b9\u6848\u6570\uff0c\u6269\u5c55\u5230\u7b2c\u4e09\u4e2a\u533a\u95f4\u4e5f\u662f\u5982\u6b64\u3002\n    \n\u9884\u5904\u7406\u51fa\u9636\u4e58\u548c\u9006\u5143\uff0c\u901a\u8fc7 $\\texttt{O(1)}$ \u7b97\u7ec4\u5408\u6570\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\texttt{O(NlogN)}$ \uff08\u6392\u5e8f\u590d\u6742\u5ea6\uff09\u3002\n\n\u6ce8\u610f\u7279\u5224\u5f00\u5934\u7684\u533a\u95f4\u548c\u7ed3\u5c3e\u7684\u533a\u95f4\uff0c\u8fd8\u6709\u4e24\u76cf\u706f\u4e4b\u95f4\u6ca1\u6709\u706f\u53ef\u4ee5\u70b9\u4eae\u7684\u60c5\u51b5\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n #define int long long\n const int N = 1000;\n const int mod = 1e9+7;\ninline int read()\n{\n    int s = 0;\n    register bool neg = 0;\n    register char c = getchar();\n    for (; c < '0' || c > '9'; c = getchar())\n        neg |= (c == '-');\n    for (; c >= '0' && c <= '9'; s = s * 10 + (c ^ 48), c = getchar())\n        ;\n    s = (neg ? -s : s);\n    return s;\n}\n\nint a,b,fac[N+10],inv[N+10],power[N+10],s[N+10];\n\ninline void init() {\n\tfac[0]=fac[1]=inv[0]=inv[1]=power[0]=1;\n\tfor(int i=2;i<=N;i++) fac[i]=fac[i-1]*i%mod,inv[i]=(mod-mod/i)*inv[mod%i]%mod;\n\tfor(int i=1;i<=N;i++) inv[i]=inv[i-1]*inv[i]%mod,power[i]=power[i-1]*2%mod;\n}\n\ninline int C(int n,int m) {\n\treturn fac[n]*inv[n-m]%mod*inv[m]%mod;\n}\n\nsigned main()\n{\n//\tfreopen(\"in.txt\",\"r\",stdin);\n\tinit();\n\ta=read();\n\tb=read();\n\tint pre=0,sum=0,ans=1,x=0;\n\tfor(int i=1;i<=b;i++) s[i]=read();\n\tsort(s+1,s+b+1);\n\tfor(int i=1;i<=b;i++) {\n\t\tx=s[i];\n\t\tsum+=x-pre-1;\n\t\tif(pre!=0&&pre<x-1) ans=(ans*C(sum,x-pre-1)%mod*(power[x-pre-2]))%mod;\n\t\tpre=x;\n\t}\n\tsum+=a-pre;\n\tans=(ans*C(sum,a-x))%mod;\n\tprintf(\"%lld\",ans);\n    return 0;\n}\n```",
        "postTime": 1606914186,
        "uid": 184549,
        "name": "RedreamMer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF294C \u3010Shaass and Lights\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898 \u7ec4\u5408\u6570\u5b66\u597d\u9898\n\n\u9996\u5148\u5bf9\u4e8e\u533a\u95f4$[a[i], a[i + 1]]$\u548c$[1, a[1]], [a[m], n]$ \u6211\u4eec\u5206\u5f00\u8ba8\u8bba\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u95f4\u987a\u5e8f\u53ea\u6709$2^d$\u4e2a$d = a[i] - a[i-1] - 2$ \u53ef\u4ee5\u753b\u56fe\u8003\u8651 \u5982\u679c\u53ea\u9009\u5f53\u524d\u533a\u95f4 \u8981\u4e48 \u9009\u5de6\u7aef\u70b9\u8981\u4e48\u9009\u53f3\u7aef\u70b9 \u4e0d\u65ad\u7f29\u77ed\u533a\u95f4\u957f\u5ea6 \u76f4\u5230\u533a\u95f4\u957f\u5ea6\u4e3a1\u65f6\u53ea\u80fd\u9009\u4ed6\n\n\u7136\u540e\u524d\u5bfc\u548c\u540e\u7f00 \u56e0\u4e3a\u9009\u62e9\u4ed6\u4eec\u7684\u987a\u5e8f\u662f\u56fa\u5b9a\u7684 \u9009\u4e86 $i$ \u624d\u80fd\u9009 $i - 1$ \u6240\u4ee5\u4ed6\u4eec\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u53ea\u6709$c[num][a[1] - 1]$ $num$\u8868\u793a\u5269\u4e0b\u7684\u6570\n\n\u6838\u5fc3\u4ee3\u7801\n\n```cpp\n\tll num = n - m, ans = 1;\n\tfor (int i = 2; i <= m; i ++ ) {\n\t\tint d = a[i] - a[i - 1] - 1;\n\t\tif (d)\n\t\t\tans = ans * c[num][d] % mod * qpow (2, d - 1) % mod;\n\t\telse \n\t\t\tans = ans * c[num][d] % mod;\n\t\tnum -= d;\n\t}\n\tans = ans * c[num][a[1] - 1] % mod;\n\tnum -= a[1] - 1;\n\tans = ans * c[num][n - a[m]] % mod;\n```",
        "postTime": 1570616758,
        "uid": 107377,
        "name": "Cryin",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF294C \u3010Shaass and Lights\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\uff1a\n\u6709n\u76cf\u706f\uff0c(0<=n<=1000),\u6709m\u76cf\u5df2\u7ecf\u70b9\u4eae\uff0c\u6bcf\u6b21\u53ea\u80fd\u70b9\u4eae\u4e0e\u5df2\u7ecf\u70b9\u4eae\u7684\u706f\u76f8\u90bb\u7684\u706f\uff0c\u6c42\u603b\u65b9\u6848\u6570\uff0c\u7b54\u6848\u5bf91e9+7\u53d6\u6a21\n\n\u7b2c\u4e00\u884c\uff1a\u4e24\u4e2a\u6574\u6570n,m\u8868\u793a\u706f\u7684\u603b\u6570\u548c\u5df2\u70b9\u4eae\u7684\u706f\u7684\u6570\u76ee \u7b2c\u4e8c\u884cm\u4e2a\u6570\uff0c\u8868\u793a\u5df2\u70b9\u4eae\u7684\u706f\u7684\u7f16\u53f7\n\n### \u5206\u6790\uff1a\n\n\u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u5df2\u7ecf\u88ab\u70b9\u4eae\u7684\u706f\u4f5c\u4e3a\u5206\u754c\u70b9\uff0c\u627e\u5230\u82e5\u5e72\u4e2a\u957f\u5ea6\u4e0d\u4e3a0\u7684\u5f00\u533a\u95f4\u3002\n\n\u5bf9\u4e8e\u4e24\u8fb9\u90fd\u6709\u5f00\u7740\u7684\u706f\u7684\u533a\u95f4\uff0c\u6211\u4eec\u70b9\u4eae\u5b83\u6bcf\u6b21\u53ef\u4ee5\u70b9\u4eae\u6700\u5de6\u8fb9\u4e00\u76cf\u6216\u8005\u6700\u53f3\u8fb9\u4e00\u76cf\uff0c\u800c\u6700\u540e\u4e00\u76cf\u706f\u53ea\u6709\u4e00\u79cd\u65b9\u6cd5\uff0c\u6240\u4ee5\u70b9\u4eae\u957f\u5ea6\u4e3alen\u7684\u533a\u95f4\u7684\u65b9\u6848\u6570\u4e3a\uff1a2^(len-1)\n\n\u7279\u522b\u5730\uff0c\u5bf9\u4e8e\u4e24\u7aef\u7684\u533a\u95f4\uff08\u4e00\u8fb9\u6709\u706f\u5f00\u7740\uff0c\u4e00\u8fb9\u662f\u8fb9\u754c\uff081\u6216\u8005n\uff09\uff09\uff0c\u53ea\u6709\u4e00\u79cd\u65b9\u6848\u6570\uff08\u987a\u7740\u4e00\u8def\u70b9\u4e0b\u53bb\uff09\n\n\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u53ef\u4ee5\u5148\u8ba1\u7b97\u51faans*=2^(len2-1)2^(len-2-1)...2^(len(cnt-1)-1)\u6ce8\u610f\u5f00\u59cb\u7684\u65f6\u5019\u662fi=2\uff0c\u6700\u540e\u4e00\u6bb5\u662fi=cnt-1\uff1b\uff08\u6700\u521d\u6700\u672b\u4e24\u7aef\u7b97\u4e0a\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff09\n\n\u4f46\u662f\u7531\u4e8e\u70b9\u706f\u7684\u65f6\u5019\u53ef\u4ee5\u4ea4\u53c9\u5728\u6bcf\u4e2a\u533a\u95f4\u5185\u70b9\u706f\uff0c\u6240\u4ee5\u8fd9\u6837\u7684ans\u8fd8\u662f\u5c11\u4e86\u5f88\u591a\u3002\n\n\u6240\u4ee5\u6211\u4eec\u91cd\u65b0\u8fd9\u6837\u8003\u8651\uff1a\n\u8003\u8651\u5c06\u6bcf\u4e2a\u533a\u95f4\u5185\u8003\u8651\u6210\u989c\u8272\u76f8\u540c\u7684len\u4e2a\u7403\uff0c\u4e0d\u540c\u533a\u95f4\u7403\u7684\u989c\u8272\u4e0d\u540c\u3002\u6bcf\u4e00\u4e2a\u6392\u5217\u53ef\u4ee5\u5f53\u505a\u662f\u4e00\u4e2a\u6307\u4ee4\uff0c\u4e0d\u540c\u7684\u5408\u6cd5\u7684\u6307\u4ee4\u662f\u4e0d\u540c\u7684\u65b9\u6848\u6570\u3002\n\n\u5bb9\u6613\u77e5\u9053\u6700\u521d\u7684\u65b9\u6848\u6570\u4e3a\uff1a\uff08n-m\uff09\uff01\u6211\u4eec\u5c06\u5b83\u5904\u7406\u6210\u591a\u91cd\u96c6\u5408\u7684\u6392\u5217\uff0c(n-m)!/len1!len2!...lencnt!\u3002\u8fd9\u6837\u4fdd\u8bc1\u4e86\u6bcf\u4e2a\u533a\u95f4\u5185\u7684\u540c\u4e00\u79cd\u989c\u8272\u7684\u7403\u7684\u201c\u5355\u7eaf\u76f8\u5bf9\u987a\u5e8f\u201d\uff08\u53ea\u662f\u8fd9\u4e9b\u7403\u4e4b\u95f4\u4ea4\u6362\u987a\u5e8f\uff09\u53d8\u5316\u90fd\u7b97\u4f5c\u662f\u4e00\u79cd\u65b9\u6848\u3002\n\n\u4f46\u662f\u4e00\u4e2a\u533a\u95f4\u5185\uff0c\u5e76\u4e0d\u662f\u4e00\u79cd\u65b9\u6848\uff0c\u5bf9\u4e8elen\u7684\u7403\u6570\uff0c\u53ef\u4ee5\u67092^(len-1)\u79cd\u5408\u6cd5\u6392\u5217\uff0c\u5229\u7528\u4e58\u6cd5\u539f\u7406\u518d\u5c06\u5b83\u4eec\u76f8\u4e58\uff0c\u5c31\u53ef\u4ee5\u5f97\u51fa\u6b63\u786e\u7684\u7b54\u6848\u3002\n\n(\u9700\u8981\uff1a\u5feb\u901f\u5e42\uff0c\u4e58\u65b9\u7684\u4e58\u6cd5\u9006\u5143\uff09\n\u9644\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define int long long\nusing namespace std;\nconst int mod=1e9+7;\nconst int N=1005;\nint n,m;\nint len[N];//\u533a\u95f4\u957f\u5ea6;\nll fac[N];//\u9636\u4e58;\nll ifac[N];//\u9636\u4e58\u9006\u5143;\nll qm(int x,int y)\n{\n\tll base=x;\n\tll ans=1;\n\twhile(y)\n\t{\n\t\tif(y&1) ans=(ans*base)%mod;\n\t\tbase=(base*base)%mod;\n\t\ty>>=1;\n\t}\n\treturn ans%mod;\n}//\u5feb\u901f\u5e42 \nint cnt;\nll anss=1;\nint h[N];\nsigned main()\n{\n\tscanf(\"%lld%lld\",&n,&m);\n\tint last=0;\n\tint x;\n\tfor(int i=1;i<=m;i++)\n\t{scanf(\"%lld\",&h[i]);}\n\tsort(h+1,h+m+1);//\u6ce8\u610f\uff0c\u7f16\u53f7\u53ef\u80fd\u4e0d\u662f\u5355\u8c03\u7684\u3002 \n\tlen[++cnt]=h[1]-last-1;\n\tfor(int i=2;i<=m;i++)\n\t{\n\t\tif(h[i]-h[i-1]>1) len[++cnt]=h[i]-h[i-1]-1;\n\t}\n\tlen[++cnt]=n-h[m];\n\tfor(int i=2;i<=cnt-1;i++)\n\t anss=(anss*qm(2,len[i]-1))%mod;//\u5148\u5904\u74062^len \n\tfac[0]=1;\n\tifac[0]=1;\n\tfor(int i=1;i<=n-m;i++)\n\t fac[i]=(fac[i-1]*i)%mod;//\u9636\u4e58 \n\tifac[n-m]=qm(fac[n-m],mod-2)%mod;//\u8d39\u9a6c\u5c0f\u5b9a\u7406\u5148\u7b97n-m \n\tfor(int i=n-m-1;i>=1;i--)\n\t ifac[i]=(ifac[i+1]*(i+1))%mod;//\u9012\u63a8\u7b97\u9636\u4e58\u9006\u5143 \n\tanss=(anss*fac[n-m])%mod;\n\tfor(int i=1;i<=cnt;i++)\n\t anss=(anss*ifac[len[i]])%mod;//\u591a\u91cd\u96c6\u5408\u6392\u5217\u5904\u7406 \n\tprintf(\"%lld\",anss%mod);\n\treturn 0;\n}\n```\n\n\u8fd8\u6709\u4e00\u79cd\u7ec4\u5408\u6570\u5b66\u7684\u601d\u60f3\uff0c\n\n\u5c31\u662f\u5229\u7528\u4e58\u6cd5\u539f\u7406\uff0c\u6bcf\u6b21\u4e58\u4e0a\uff1a\u5728\u6bcf\u6b21\u5269\u4f59\u7684\u4f4d\u7f6e\u653e\u4e0alen\u4e2a\u6570\u7684\u65b9\u6848\u6570\u3002\n\n\u53cb\u94fe\uff1a\nhttps://blog.csdn.net/qq_38538733/article/details/76409237\n\n\n",
        "postTime": 1524020373,
        "uid": 56672,
        "name": "\u67ab\u6797\u665a",
        "ccfLevel": 9,
        "title": "CF294C Shaass and Lights"
    },
    {
        "content": "\u6076\u8bc4\u9898\u3002 \u4e2a\u4eba\u7684\u8bc4\u5206\u662f\u7eff\u3002\n\n\u7531\u4e8e\u5176\u4ed6\u7684\u9898\u89e3\u6211\u6ca1\u770b\u61c2~~\u8fd8\u4e0d\u662f\u56e0\u4e3a\u4f60\u7406\u89e3\u529b\u592a\u5dee~~\uff0c\u6240\u4ee5\u5199\u4e86\u4e00\u7bc7\u81ea\u8ba4\u4e3a\u76f8\u5f53\u597d\u7406\u89e3\u7684\u9898\u89e3\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u5c06\u9898\u76ee\u6240\u63cf\u8ff0\u7684\u706f\u6ce1\u95ee\u9898\u62bd\u8c61\u5982\u4e0b\uff1a\n\n> \u5728\u6709$n$\u4e2a\u5143\u7d20\u768401\u5e8f\u5217\u4e2d\uff0c$m$\u4e2a\u5143\u7d20\u7684\u503c\u4e3a$1$\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u4e0e\u503c\u4e3a$1$\u7684\u5143\u7d20\u76f8\u90bb\u7684\u503c\u4e3a$0$\u7684\u5143\u7d20\u8d4b\u503c\u4e3a$1$\uff0c\u6c42\u5c06\u6240\u6709\u5143\u7d20\u53d8\u4e3a$1$\u7684\u6709\u5e8f\u65b9\u6848\u6570\u3002\n\n\u9996\u5148\u5ffd\u7565\u9898\u76ee\u7684\u6570\u636e\u8303\u56f4\uff0c\u5c06\u5b83\u5f53\u4f5c\u4e00\u9053\u7b80\u5355\u7684\u6570\u5b66\u9898\u53bb\u770b\u5f85\u3002\uff08\u987a\u5e26\u4e00\u63d0\uff0c\u8fd9\u6837\u7684\u7b80\u5355\u6392\u5217\u7ec4\u5408\u5728\u5c0f\u5b66\u806a\u660e\u9898\u4e2d\u76f8\u5f53\u5e38\u89c1\uff09\n\n\u5176\u5b9e\u5c31\u662f\u4e00\u4e9b$1$\u628a\u4e00\u5806$0$\u5206\u6210\u4e86\u5f88\u591a\u5757\uff0c\u7136\u540e\u53eb\u4f60\u7b97\u4e00\u70b9\u4e1c\u897f\u3002~~\u4e0d\u8d1f\u8d23\u4efb\u7684\u6001\u5ea6~~\n\n\u90a3\u4e48\uff0c\u53ef\u4ee5\u5c06\u8fd9\u9053\u9898\u5206\u6210\u4e24\u4e2a\u90e8\u5206\u6765\u8003\u8651\uff1a\n\n1. \u67d0\u5757\u5728\u64cd\u4f5c\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\n\n\u4e00\u5757\u4e00\u5757\u7b97\u3002\n\n\u7b2c\u4e00\u5757\u7684\u60c5\u51b5\uff1a\u5728\u603b\u957f\u5ea6\u4e3a$n-m$\u7684\u64cd\u4f5c\u5e8f\u5217\u4e2d\uff0c\u9009\u51fa\u5f53\u524d\u5757\u6240\u542b\u5143\u7d20\u6570\u91cf\uff08\u8bbe\u4e3a$l_1$\uff09\u7684\u4f4d\u7f6e\uff0c\u5e76\u628a\u5f53\u524d\u5757\u6240\u542b\u5143\u7d20\u6309\u4e00\u5b9a\u7684\u987a\u5e8f\u653e\u5165\u64cd\u4f5c\u5e8f\u5217\u3002\n\n\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7ec4\u5408\u95ee\u9898\uff0c\u4e0e\u201c\u4ece$n-m$\u4e2a\u5c0f\u7403\u91cc\u9762\u6311\u51fa$l_1$\u4e2a\u201d\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002\u7b54\u6848\u662f$A_1=C^{l_1}_{n-m}$\u3002\n\n\u5176\u5b9e\u63a5\u4e0b\u6765\u7684\u5757\u4e5f\u5dee\u4e0d\u591a\u3002\u53ea\u662f\u64cd\u4f5c\u5e8f\u5217\u7684\u6240\u5269\u4e0b\u7684\u4f4d\u7f6e\u8d8a\u6765\u8d8a\u5c11\uff0c\u56e0\u4e3a\u6709\u5f88\u591a\u4f4d\u7f6e\u5df2\u7ecf\u88ab\u4e4b\u524d\u7684\u5757\u5360\u636e\u4e86\u3002\u7b2c$i$\u5757\u7684\u65b9\u6848\u6570\u5e94\u8be5\u5982\u4e0b\uff1a\n\n$A_i=C^{l_i}_{n-m-\\sum^{i-1}_{j=1} l_j}$~~\u592a\u81c3\u80bf\u4e86~~\n\n\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u65b9\u6848\u6570\u7b49\u4e8e$\\prod A_i$\u3002\n\n\u8fd8\u6709\u4e00\u79cd\u7b97\u6cd5\u5728\u5176\u4ed6\u7684\u9898\u89e3\u91cc\u5df2\u7ecf\u8bb2\u5f97\u6bd4\u8f83\u6e05\u695a\u3002\n\n2. \u5355\u5757\u5185\u90e8\u7684\u64cd\u4f5c\u987a\u5e8f\n\n\u5355\u5757\u5176\u5b9e\u6709\u4e24\u79cd\uff1a\u4e00\u79cd\u662f\u4e24\u7aef\u5404\u6709\u4e00\u4e2a$1$\u7684\uff0c\u8fd8\u6709\u4e00\u79cd\u662f\u53ea\u6709\u4e00\u7aef\u6709$1$\uff0c\u53e6\u4e00\u7aef\u662f\u7531\u4e8e\u5230\u4e86\u5e8f\u5217\u7684\u5934\u5c3e\u800c\u88ab\u8feb\u7ed3\u675f\u7684\u3002\n\n\u5bf9\u4e8e\u524d\u8005\uff0c\u53ef\u4ee5\u8fd9\u6837\u8003\u8651\uff1a\n\n\u6bcf\u4e00\u6b21\u64cd\u4f5c\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u5c06\u5757\u7684\u4e24\u7aef\u7684$0$\u53d8\u6210$1$\u3002\u6240\u4ee5\uff0c\u8fd9\u53ef\u4ee5\u7406\u89e3\u6210\u4e00\u4e2a\u9009\u62e9\u95ee\u9898\uff1a\u6bcf\u6b21\u53ef\u4ee5\u9009\u62e9\u5728\u5757\u7684\u5de6\u7aef\u6216\u8005\u662f\u53f3\u7aef\u628a$0$\u53d8\u6210$1$\u3002\u7279\u6b8a\u5730\uff0c\u5f53\u53ea\u5269\u4e0b\u6700\u540e\u4e00\u5757\u65f6\uff0c\u5de6\u7aef\u548c\u53f3\u7aef\u662f\u4e00\u6837\u7684\u3002\n\n\u6240\u4ee5\uff0c\u5bf9\u4e8e\u7b2c$i$\u5757\uff0c\u7b54\u6848\u662f$2^{l_{i}-1}$\u3002\n\n\u7efc\u5408\u6765\u770b\uff0c\u603b\u7684\u7ed3\u679c\u662f$\\prod A_i\\cdot 2^{l_{i}-1}$\u3002\n\n---\n\n\u4f46\u8fd9\u9053\u9898\u76ee\u7684\u96be\u5ea6\u5b8c\u5168\u4e0d\u5728\u4e0a\u9762\u7684\u6570\u5b66\u5185\u5bb9\u4e0a\uff01\u800c\u662f\u5728\uff1a\n\n1. \u7ec4\u5408\u6570\u53d6\u6a21\n\n2. \u4ee3\u7801\u7ec6\u8282\n\n\u7ec4\u5408\u6570\u7531\u4e8e\u5e26\u6709\u9664\u6cd5\uff0c\u4e0d\u80fd\u76f4\u63a5\u53d6\u6a21\uff0c\u4f46\u662f\u53ef\u4ee5\u5229\u7528\u4e58\u6cd5\u9006\u5143\uff08\u7c7b\u4f3c\u4e8e\u53d6\u5012\u6570\uff09\u8fbe\u5230\u5316\u4e58\u4e3a\u9664\u7684\u6548\u679c\u3002\n\n\u6240\u4ee5\u8fd9\u9053\u9898\u76ee\u7684\u96be\u5ea6\u5e94\u8be5\u4e0e\u4e58\u6cd5\u9006\u5143\u76f8\u5f53\u3002\n\n\u81f3\u4e8e\u5c11\u91cf\u7684\u7ec6\u8282\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u3002\uff08\u4f46\u8fd8\u662f\u63a8\u8350\u81ea\u5df1\u8c03\u8bd5\uff09\n\nCode:\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int mod = 1e9 + 7, maxn = 1e3 + 5;\nint n, m, ans, num;\nint frat[maxn], fratinv[maxn], pow2[maxn], temp;\nvector<int> l;\nvoid exgcd(int a, int b, int &x, int &y)\n{\n    if (!b)\n        x = 1, y = 0;\n    else\n        exgcd(b, a % b, y, x), y -= a / b * x;\n}\nvoid init()\n{\n    frat[0] = 1, pow2[0] = 1;\n    for (int i = 1; i < maxn; ++i)\n        frat[i] = frat[i - 1] * i % mod;\n    for (int i = 0; i < maxn; ++i)\n        exgcd(frat[i], mod, fratinv[i], temp), fratinv[i] = (fratinv[i] % mod + mod) % mod;\n        //\u8fd9\u91cc\u4f7f\u7528\u7684\u662fO(nlogn)\u7684\u6c42\u9636\u4e58\u9006\u5143\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684O(n)\u89e3\u51b3\u3002\n    for (int i = 1; i < maxn; ++i)\n        pow2[i] = pow2[i - 1] * 2 % mod;\n}\nint C(int n, int m) { return ((frat[n] * fratinv[m] % mod + mod) % mod * fratinv[n - m] % mod + mod) % mod; }\nsigned main()\n{\n    init();\n    scanf(\"%lld%lld\", &n, &m);\n    for (int i = 1, x; i <= m; ++i)\n    {\n        scanf(\"%lld\", &x);\n        l.push_back(x);\n    }\n    sort(l.begin(), l.end());\n    num = n - m;\n    ans = C(num, l[0] - 1), num -= l[0] - 1;\n    for (int i = 1, len; i < m; ++i)\n    {\n        len = l[i] - l[i - 1] - 1;\n        ans = (ans * C(num, len) % mod + mod) % mod, num -= len;\n        if (len)\n            ans = (ans * pow2[len - 1] % mod + mod) % mod;\n    }\n    printf(\"%lld\", ans);\n    return 0;\n}\n```",
        "postTime": 1581685165,
        "uid": 87668,
        "name": "nanatsuhi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF294C \u3010Shaass and Lights\u3011"
    }
]
[
    {
        "content": "## \u9898\u76ee\u5927\u610f\r\n\r\n\u6709\u4e09\u4e2a\u6570\u5217 $A_i,B_i,C_i$\uff0c\u8be2\u95ee\u6709\u591a\u5c11\u4e2a $i$\uff0c\u4f7f\u5f97\u5b58\u5728 $j$\uff0c\u4f7f\u5f97 $A_i<A_j,B_i<B_j,C_i<C_j$\u3002\r\n\r\n## \u9898\u89e3\r\n\r\n\u9898\u9762\u867d\u7136\u770b\u4e0a\u53bb\u50cf\u662f\u4e09\u7ef4\u504f\u5e8f\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4e00\u7cfb\u5217\u8f6c\u6362\u6c42\u89e3\u3002\r\n\r\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167 $A_i$ \u8fdb\u884c\u6392\u5e8f\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u7b26\u5408\u9898\u610f\u7684 $j>i$\u3002\u7136\u540e\u8003\u8651\u5982\u4f55\u5bfb\u627e\u6ee1\u8db3 $B_j>B_i$ \u7684 $j$\u3002\r\n\r\n\u8fd9\u91cc\u4f7f\u7528**\u503c\u57df\u7ebf\u6bb5\u6811+\u52a8\u6001\u5f00\u70b9**\u3002\r\n\r\n\u5177\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u5728\u503c\u57df $[1,10^9]$ \u4e0a\u7ef4\u62a4\u4e00\u4e2a\u7ebf\u6bb5\u6811\u3002\u6bcf\u6b21\u8ba1\u7b97\u5b8c\u5143\u7d20 $i$ \u7684\u7ed3\u679c\uff0c\u5c31\u5c06\u7ebf\u6bb5\u6811\u4e0a**\u4e0b\u6807**\u4e3a $B_i$ \u7684\u4f4d\u7684\u6700\u5927\u503c\u7528 $C_i$ \u8fdb\u884c\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u8bbf\u95ee\u5927\u4e8e $B_i$ \u7684\u6240\u6709\u5143\u7d20\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u8bbf\u95ee\u7ebf\u6bb5\u6811\u4e0a $(B_i,10^9]$ \u7684\u8fd9\u4e00\u6bb5\u3002\u53d6\u5176\u4e2d $C_i$ \u7684\u6700\u5927\u503c\uff0c\u5c31\u80fd\u77e5\u9053\u662f\u5426\u5b58\u5728\u5143\u7d20 $j$\uff0c\u4f7f\u5f97$A_i<A_j,B_i<B_j,C_i<C_j$\u3002\r\n\r\n\u52a8\u6001\u5f00\u70b9\u7684\u597d\u5904\u662f\uff0c\u53ea\u6709\u9700\u8981\u8bbf\u95ee\u7ebf\u6bb5\u6811\u5bf9\u5e94\u8282\u70b9\u65f6\uff0c\u518d\u7533\u8bf7\u8be5\u8282\u70b9\u7a7a\u95f4\u3002\r\n\r\n\u5f53\u7136\uff0c\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5143\u7d20 $j$ \u53ef\u4ee5\u88ab\u52a0\u5165\u7ebf\u6bb5\u6811\u5f53\u4e14\u4ec5\u5f53 $A_j>A_i$\u3002\r\n\r\n## \u53c2\u8003\u4ee3\u7801\r\n\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\n#define up(l,r,i) for(int i=l;i<=r;i++)\r\n#define dn(l,r,i) for(int i=l;i>=r;i--)\r\nusing namespace std;\r\nconst int MAXN =4e6+3,MAXM=1e9+3;\r\nint tot,n,ans;\r\nint qread(){\r\n    int w=1,c,ret;\r\n    while((c=getchar())> '9'||c< '0')\r\n    w=(c=='-'?-1:1); ret=c-'0';\r\n    while((c=getchar())>='0'&&c<='9')\r\n    ret=ret*10+c-'0';\r\n    return ret*w;\r\n}\r\n#define lc(t) (L[t]?L[t]:(L[t]=++tot))\r\n#define rc(t) (R[t]?R[t]:(R[t]=++tot))\r\nclass Seg{\r\n    public:\r\n        int L[MAXN*4],R[MAXN*4],M[MAXN*4];\r\n        void cng(int t,int a,int b,int k,int w){ \r\n            M[t]=max(M[t],w);if(a==b) return; int mid=(a+b)>>1;\r\n            if(k<=mid) cng(lc(t),a,mid,k,w);\r\n            if(k> mid) cng(rc(t),mid+1,b,k,w);\r\n        }\r\n        int  qry(int t,int a,int b,int l,int r){\r\n            if(l<=a&&b<=r) return M[t];\r\n            int mid=(a+b)>>1,ret=0;\r\n            if(l<=mid) ret=max(ret,qry(lc(t),a,mid,l,r));\r\n            if(r> mid) ret=max(ret,qry(rc(t),mid+1,b,l,r));\r\n            return ret;\r\n        }\r\n}T;\r\nstruct Node{\r\n    int a,b,c;\r\n    bool operator <(Node t){\r\n        return a==t.a?(b==t.b?c<t.c:b<t.b):a<t.a;\r\n    }\r\n}P[MAXN];\r\nint main(){\r\n    n=qread(),++tot;\r\n    up(1,n,i) P[i].a=qread();\r\n    up(1,n,i) P[i].b=qread();\r\n    up(1,n,i) P[i].c=qread();\r\n    sort(P+1,P+1+n),P[n+1].a=MAXM;\r\n    dn(n,1,i){\r\n        if(P[i+1].a!=P[i].a){\r\n            for(int p=i+1;P[p].a==P[i+1].a;++p)\r\n            T.cng(1,0,MAXM,P[p].b,P[p].c);\r\n        }\r\n        if(T.qry(1,0,MAXM,P[i].b+1,MAXM)>P[i].c) ++ans;\r\n    }\r\n    printf(\"%d\\n\",ans);\r\n    return 0;\r\n}\r\n```",
        "postTime": 1587814078,
        "uid": 68344,
        "name": "\u79bb\u6563\u5c0f\u6ce2\u53d8\u6362\u00b0",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF12D \u3010Ball\u3011"
    },
    {
        "content": "### \u9898\u76ee\u6982\u8ff0\n\n\u63cf\u8ff0\u4e00\u4e2a\u6709\u4e09\u4e2a\u5143\u7d20 $a_i,b_i,c_i$ \u7684 $t$ \uff0c\u95ee\u9488\u5bf9 $\\sum_{i=1}^{n} t_i $ \uff0c\u6c42\u51fa\u6240\u6709\u7684 $t_j$ \u6ee1\u8db3 $a_i < a_j , b_i < b_j , c_i < c_j$ \u7684\u4e2a\u6570\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u63d0\u4f9b\u4e00\u79cd\u4e0d\u7528\u4efb\u4f55\u6570\u636e\u7ed3\u6784\u7684\u8f7b\u5de5\u4e1a\u89e3\u6cd5\u3002\n\n\u9996\u5148\u6211\u4eec\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u4e09\u4f4d\u504f\u5e8f\u95ee\u9898\uff0c\u542f\u53d1\u6211\u4eec\u4f7f\u7528 CDQ \u5206\u6cbb\uff0c\u4f46\u9898\u76ee\u8ba9\u6c42\u7684\u662f\u6240\u6709\u6ee1\u8db3\u6761\u4ef6 $i$ \u7684\u4e2a\u6570\uff0c\u800c\u9488\u5bf9 $i$ \u662f\u5426\u6ee1\u8db3\u53ea\u662f\u4e00\u4e2a\u5b58\u5728\u6027\u7684\u95ee\u9898\uff0c\u5982\u679c\u51fa\u73b0\u4e00\u4e2a $i$ \u6ee1\u8db3\u6761\u4ef6\uff0c\u6211\u4eec\u6807\u8bb0 $i$ \u5c31\u53ef\u4ee5\u4e86\uff0c\u4f7f\u7528\u5206\u6cbb\u5957\u5206\u6cbb\u5373\u53ef\u89e3\u51b3\u3002\n\n\u6211\u4eec\u9488\u5bf9\u7b2c\u4e00\u7ef4 $a_i$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u7b2c\u4e8c\u7ef4 $b_i$ \u5206\u6cbb\uff0c\u7136\u540e\u5bf9 $c_i$ \u5224\u65ad\u524d\u4e00\u534a\u7684\u6700\u5927\u6570\u662f\u5426\u5927\u4e8e\u76ee\u524d\u7684 $c_i$ \uff0c\u5982\u679c\u5b58\u5728\u5c31\u6807\u8bb0\u5f53\u524d\u7684 $st[i]$ \uff0c\u7ed3\u675f\u540e\u904d\u5386\u4e00\u904d\u7edf\u8ba1 $st[i]=1$ \u7684\u6570\u91cf\u5c31\u53ef\u4ee5\u4e86\u3002\n\n### Code.\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=5e5+10; int res,st[N],n;\nstruct node {int a,b,c,id;} q[N];\nbool cmp1(node a,node b) {return a.a > b.a;}\nbool cmp2(node a,node b) {return a.b > b.b;}\nvoid cdq(int l,int r)\n{\n    if(l == r) return; int mid = l + r >> 1;\n    int t1=q[mid].a,d1=0,d2=0; cdq(l,mid); cdq(mid+1,r);\n    stable_sort(q+l,q+mid+1,cmp2); stable_sort(q+mid+1,q+r+1,cmp2);\n    for(int i=mid+1,j=l;i<=r;i++)\n\t{\n        while(j <= mid && q[j].b > q[i].b)\n\t\t{\n            d1=max(d1,q[j].c);\n            if(q[j].a > t1) d2=max(d2,q[j].c);\n            j++;\n        }\n        if(q[i].a == t1) {if(d2 > q[i].c) st[q[i].id]=1;} \n\t\telse {if(d1 > q[i].c) st[q[i].id]=1;}\n    }\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++) q[i].id=i;\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&q[i].a);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&q[i].b);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&q[i].c);\n\tstable_sort(q+1,q+1+n,cmp1); cdq(1,n);\n\tfor(int i=1;i<=n;i++) if(st[i]) res++;\n\tprintf(\"%d\",res); \n\treturn 0;\n}\n```",
        "postTime": 1660825595,
        "uid": 230865,
        "name": "EastPorridge",
        "ccfLevel": 0,
        "title": "CF12D Ball \u9898\u89e3"
    },
    {
        "content": "\u7528\u6811\u72b6\u6570\u7ec4\u4e5f\u80fd\u5199\n### $Idea$\n\u5bf9\u4e8e\u5973\u4eba$i$\uff0c\u60f3\u8981\u77e5\u9053\u5979\u81ea\u4e0d\u81ea\u6740\uff0c\u65e0\u975e\u662f\u6709\u6ca1\u6709\u5973\u4eba$j$\uff0c\u4f7f\u5f97$B_i<B_j\\&\\&I_i<I_j\\&\\&R_i<R_j$\u3002\u8fd9\u91cc\u7528\u6811\u72b6\u6570\u7ec4\u8868\u793a\u524d$i$\u4e2a\u5973\u4eba\u4e2d$R$\u503c\u7684\u6700\u5927\u503c\u5199\uff0c\u7531\u4e8e\u90a3\u4e09\u4e2a\u503c\u5c0f\u4e8e\u7b49\u4e8e$1e9$\uff0c\u6240\u4ee5\u5fc5\u987b\u79bb\u6563\u5316\u3002\u76f8\u5bf9\u5176\u4e2d\u67d0\u4e2a\u91cf\uff08\u8fd9\u91cc\u6211\u6309$B$\u6765\u6392\u5e8f\uff09\u5347\u5e8f\u6392\u5e8f\uff0c\u7136\u540e\u7f16\u53f7\uff0c\u8fd9\u6837\u751f\u6210\u7684\u6811\u72b6\u6570\u7ec4\uff0c\u4fdd\u8bc1\u5728\u67e5\u8be2\u65f6\u6ee1\u8db3$getmax(id+1)$\u4e2d\u6240\u6709\u7684\u5973\u4eba\u7684$B$\u503c\u6bd4\u5f53\u524d\u5973\u4eba\u7684\u8981\u5927\u3002\u4e8e\u662f\u518d\u6309$I$\u503c\u964d\u5e8f\uff0c\u8fd9\u6837\u4fdd\u8bc1\u5728\u4e4b\u540e\u7684\u904d\u5386\u4e2d\uff0c$lady[i].i\\ge lady[i-1].i$\uff0c\u518d\u4ee5$R$\u503c\u66f4\u65b0\u6811\u72b6\u6570\u7ec4\n\n### $Code$\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<cstdlib>\n#include<algorithm>\n#include<string>\n#define ll long long\n#define maxn 500050\n#define inf 2147483647\n#define mod 10003\n#define eps 1e-6\n#define pi acos(-1.0)\n#define de(x) ((x)*(x))\nusing namespace std; \ninline int read(){\n    int x=0,f=1; char ch=getchar();\n    while(!isdigit(ch)) {if(ch=='-')f=-1;ch=getchar();}\n    while(isdigit(ch)) {x=x*10+ch-48;ch=getchar();}\n    return x*f;\n}\nint c[maxn],cnt,n,ans;\nstruct Node{\n\tint b,i,r,id;\n}a[maxn];\ninline void add(int x,int d){\n\twhile(x>0){\n\t\tif(c[x]<d) c[x]=d;\n\t\tx-=x&(-x);\n\t}\n}\ninline int getmax(int x){\n    int res=-1;\n    for(int i=x;i<=cnt;i+=i&(-i))\n        if(res<c[i]) res=c[i];\n    return res;\n}\ninline bool cmp(Node a,Node b){return a.b<b.b;}\ninline bool cmp1(Node a,Node b){return a.i>b.i;}\nsigned main(){\n\tn=read();\n\tint i,j;\n\tfor(i=0;i<n;i++) a[i].b=read();\n\tfor(i=0;i<n;i++) a[i].i=read();\n\tfor(i=0;i<n;i++) a[i].r=read();\n\tsort(a,a+n,cmp); cnt=1; a[0].id=1;\n\tfor(i=1;i<n;i++)\n\t\tif(a[i].b==a[i-1].b) a[i].id=cnt;\n\t\telse a[i].id=++cnt;//\u8fd9\u4e2a\u5730\u65b9\u4e0d\u80fd\u5199\u6210cnt++;\u539f\u56e0\u60a8\u4eec\u61c2\u5f97\n\tsort(a,a+n,cmp1);\n\tfor(i=1;i<=cnt;i++) c[i]=-1;\n\tfor(i=0;i<n;){\n\t\tfor(j=i;j<n&&a[i].i==a[j].i;j++)\n\t\t\tif(getmax(a[j].id+1)>a[j].r) ans++;\n\t\tfor(j=i;j<n&&a[i].i==a[j].i;j++)\n\t\t\tadd(a[j].id,a[j].r);\n\t\ti=j; \n\t}\n\tprintf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1567647475,
        "uid": 126772,
        "name": "\u53f6\u67ab",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF12D \u3010Ball\u3011"
    },
    {
        "content": " ### \u672c\u9898\u89e3\uff0c\u67d0\u4e9b\u8bdd\u6709\u4e9b\u7ed5\uff0c\u5df2\u52a0\u7c97\u6ce8\u660e\u91cd\u70b9\uff0c\u53ef\u80fd\u9700\u8981\u591a\u8bfb\u51e0\u904d\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u753b\u56fe\u7406\u89e3\u3002\n \n\n------------\n\n \u7b2c\u4e00\u6b21\u770b\u5230\u8fd9\u9053\u9898\u5b8c\u5168\u65e0\u5934\u7eea\uff0c\u5076\u7136\u95f4\u770b\u5230\u4e86\u4e00\u79cd\u4e1c\u897f\u53eb**CDQ\u5206\u6cbb**\u2014\u2014\u53ef\u4ee5\u89e3\u51b3\u504f\u5e8f\u95ee\u9898\u7684\u4e00\u79cd\u9ad8\u7aef\u64cd\u4f5c\uff0c\u4e0d\u4f1aCDQ\u5206\u6cbb\u7684\u540c\u5b66\u53ef\u4ee5\u5230B\u7ad9\u6216\u8005Youtube\u4e0a\u770b\u89c6\u9891\uff0c\u8bb2\u7684\u8d85\u7ea7\u8be6\u7ec6\uff01\uff01\u6211\u8fd9\u91cc\u5c31\u7a0d\u5fae\u7b80\u5355\u7684\u8bb2\u4e00\u4e0b\u57fa\u4e8eCDQ\u5206\u6cbb\u5982\u4f55\u89e3\u51b3\u8fd9\u9053\u9898\u3002\n \n \u5f52\u5e76\u6392\u5e8f\u90fd\u4f1a\u7684\u5427\uff1f~~\uff08\u5047\u88c5\u4f60\u4eec\u4f1a\u4e86\uff09~~\u90a3\u4e48\u5c31\u7b80\u5355\u591a\u4e86\uff0c\u6211\u4eec\u9996\u5148\u6309\u6240\u6709lady\u7684\u7b2c\u4e00\u4e2a\u5c5e\u6027\u6392\u5e8f\uff0c\u7136\u540e\u6309\u7167\u7b2c\u4e8c\u4e2a\u5c5e\u6027\u5f52\u5e76\u6392\u5e8f\uff0c\u91cd\u70b9\u6765\u4e86\u2014\u2014\u5f52\u5e76\u6392\u5e8f\u6709\u4ec0\u4e48\u7528\uff1f\n \u9996\u5148\u6211\u4eec\u5df2\u7ecf\u6309\u7b2c\u4e00\u4e2a\u5c5e\u6027\u6392\u5e8f\u8fc7\u4e86\uff0c\u90a3\u4e48\u5728\u5f52\u5e76\u6392\u5e8f\u4e2d\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u5e8f\u5217\u7684\u65f6\u5019\uff0c\n \u53ef\u4ee5\u4fdd\u8bc1\n \n **\u5de6\u5e8f\u5217\u548c\u53f3\u5e8f\u5217\u7684\u6240\u6709\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u5c5e\u6027\u503c\u5fc5\u5b9a\u6ee1\u8db3\u67d0\u79cd\u5927\u5c0f\u5173\u7cfb**\n \n For Example\n \n (5,3,2)(4,3,2)(3,5,1)(2,4,2)(1,4,3)[\u5df2\u7ecf\u6309\u7b2c\u4e00\u4e2a\u5c5e\u6027\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u5b8c\u6210]\n \n** \u90a3\u4e48\u6211\u4eec\u5728\u5f52\u5e76\u6392\u5e8f\u4e2d\u5408\u5e76\u5de6\u53f3\u4e24\u4e2a\u5e8f\u5217\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4fdd\u8bc1\uff0c\u5de6\u5e8f\u5217\u7684\u4efb\u610f\u4e00\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u5c5e\u6027\u5fc5\u5b9a\u5927\u4e8e\u53f3\u5e8f\u5217\u4efb\u610f\u4e00\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u5c5e\u6027\u3002**\n\nOK\uff0c\u4e0d\u77e5\u9053\u4f60\u4eec\u6709\u6ca1\u6709\u89c9\u5f97\u6709\u4e00\u4e1d\u795e\u5947\u3002\u90a3\u4e48\u63a5\u4e0b\u6765\u5728\u5408\u5e76\u5de6\u53f3\u5e8f\u5217\u7684\u65f6\u5019\uff0c**\u5f53\u9047\u5230\u5de6\u5e8f\u5217\u7684\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e8c\u4e2a\u5c5e\u6027\u5927\u4e8e\u53f3\u5e8f\u5217\u7684\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e8c\u4e2a\u5c5e\u6027\u7684\u65f6\u5019**\u6211\u4eec\u5c31\u628a\u5de6\u5e8f\u5217\u7684\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e09\u4e2a\u5c5e\u6027\u4e22\u8fdb**\u6811\u72b6\u6570\u7ec4**\u3002\u5f53\u53f3\u5e8f\u5217\u7684\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e8c\u4e2a\u5c5e\u6027\u5c0f\u4e8e\u7b49\u4e8e\u53f3\u5e8f\u5217\u7684\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e8c\u4e2a\u5c5e\u6027\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u5229\u7528\u6811\u72b6\u6570\u7ec4\uff0c\u901a\u8fc7\u4e00\u4e9b\u8ba1\u7b97\uff0c**\u5f97\u51fa\u5927\u4e8e\u53f3\u5e8f\u5217\u5f53\u524d\u6307\u5411\u5143\u7d20\u7684\u7b2c\u4e09\u4e2a\u5c5e\u6027\u7684\u5c5e\u4e8e\u5de6\u5e8f\u5217\u7684\u5143\u7d20\u7684\u4e2a\u6570**\u4e3a\u4ec0\u4e48\u80fd\u8fd9\u6837\u505a\uff1f\u7b2c\u4e00\u4e2a\u5c5e\u6027\u7edd\u5bf9\u6ee1\u8db3\u5927\u5c0f\u5173\u7cfb\uff0c\u4e0a\u6587\u5df2\u7ecf\u8bf4\u8fc7\u3002\u81f3\u4e8e\u7b2c\u4e8c\u4e2a\u5c5e\u6027\uff0c**\u53ea\u6709\u5927\u4e8e\u53f3\u5e8f\u5217\u5f53\u524d\u5143\u7d20\u7684\u5c5e\u4e8e\u5de6\u5e8f\u5217\u7684\u5143\u7d20\u88ab\u67e5\u8be2\u7684\u65f6\u5019\u624d\u4f1a\u5728\u6811\u72b6\u6570\u7ec4\u91cc**\n\n\u5173\u4e8e\u4ee5\u4e0a\u8fd9\u4e9b\u7279\u6027\u8bf7\u4ed4\u7ec6\u770b\u4ee3\u7801\u548c\u6df1\u5165\u7406\u89e3\u5f52\u5e76\u6392\u5e8f\uff0c\u4ee3\u7801\u4e11\u964b\uff0c\u8bf7\u8c05\u89e3\n                                                 \n                                                      LuckyCloud \n                                                      \n ```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nstruct data\n{\n int a,b,c,id;\n}p[500003],res[500003];\nint n,t,tot,c[500003],ds[500003],f[500003],ans;\ninline int read()\n{\n  register int cnt=0,f=1,ch=getchar();\n  while (ch<'0'||ch>'9'){if (ch=='-')f=-1;ch=getchar();}\n  while (ch>='0'&&ch<='9'){cnt=cnt*10+ch-48;ch=getchar();}\n  return cnt*f;\n}\ninline int find(int x)\n{\n  int l=1,r=tot,mid;\n  while (l<=r)\n  {\n  \tmid=(l+r)>>1;\n  \tif (ds[mid]==x) return mid;\n  \tif (ds[mid]>x) r=mid-1;\n  \tif (ds[mid]<x) l=mid+1;\n  }\n}\ninline void clear(int x)\n{\n  for (int i=x;i<=500000;i+=i&-i)\n   c[i]=0;\n}\ninline void add(int x)\n{ \n  for (int i=x;i<=500000;i+=i&-i)\n   c[i]++;\n}\ninline int query(int x)\n{\n  int res=0;\n  for (int i=x;i;i-=i&-i)\n   res+=c[i];\n  return res;\n}\ninline bool cmp(data x,data y)\n{\n  return x.a>y.a||(x.a==y.a&&x.c<y.c);//(x.a==y.a&&x.c<y.c)\u4e3a\u4e86\u907f\u514d\u4e00\u79cd\u60c5\u51b5\uff0c\u5e0c\u671b\u8bfb\u8005\u81ea\u884c\u7406\u89e3\n}\nvoid solve(int l,int r)\n{\n  int mid=(l+r)>>1,x=l,y=mid+1,len=0;\n  while (x<=mid&&y<=r)\n  {\n  \tif (p[x].b>p[y].b){add(p[x].c);res[++len]=p[x++];}\n  \telse {f[p[y].id]+=x-l-query(p[y].c);res[++len]=p[y++];}//\u5bf9\u4e8e(a,b,c)\uff0c\u5c06x<a,y<b,z<c\uff0c(x,y,z)\u7684\u4e2a\u6570\u5b58\u5165f\u6570\u7ec4\n  }\n  while (x<=mid) res[++len]=p[x++];\n  while (y<=r) {f[p[y].id]+=x-l-query(p[y].c);res[++len]=p[y++];}\n  for (int i=l;i<=mid;i++)\n   clear(p[i].c);\n  for (int i=1;i<=len;i++) \n   p[l+i-1]=res[i];\n}\ninline void CDQ(int l,int r)\n{\n  int mid=(l+r)>>1;\n  if (l==r) return;\n  CDQ(l,mid);\n  CDQ(mid+1,r);\n  solve(l,r);\n}\nint main()\n{\n  n=read();\n  for (int i=1;i<=n;i++)\n   {p[i].id=i;p[i].a=read();}\n  for (int i=1;i<=n;i++)\n   p[i].b=read();\n  for (int i=1;i<=n;i++)\n   ds[i]=p[i].c=read();\n  \n  sort(ds+1,ds+1+n);//\u79bb\u6563\u5316\u90e8\u5206\n  tot=1;\n  t=ds[1];\n  for (int i=2;i<=n;i++)\n   if (ds[i]!=t){ds[++tot]=ds[i];t=ds[i];}\n  for (int i=1;i<=n;i++)\n   p[i].c=find(p[i].c);//\u5c06\u7b2c\u4e09\u4e2a\u5c5e\u6027\u79bb\u6563\u5316\uff0c\u7528\u4e8e\u4e4b\u540e\u7684\u6811\u72b6\u6570\u7ec4\u3002\n   \n  sort(p+1,p+1+n,cmp);//\u6309\u7b2c\u4e00\u4e2a\u5c5e\u6027\u6392\u5e8f\n  \n  CDQ(1,n);//CDQ\u5206\u6cbb\n  \n  for (int i=1;i<=n;i++)\n   if (f[i]>0) ans++;\n  printf(\"%d\\n\",ans);\n  return 0;\n}\n```\n \n \n \n ",
        "postTime": 1528529782,
        "uid": 23977,
        "name": "LuckyCloud",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF12D \u3010Ball\u3011"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u5148\u6309\u7167\u4ee5 $a_i$ \u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\u3001\u4ee5 $b_i$ \u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u3001\u4ee5 $c_i$ \u4e3a\u7b2c\u4e09\u5173\u952e\u5b57\u964d\u5e8f\u6392\u5e8f\uff0c\u6309\u987a\u5e8f\u904d\u5386\uff0c\u904d\u5386\u5230\u7b2c $i$ \u4e2a\u4eba\u7684\u65f6\u5019\uff0c\u628a $(b_i,c_i)$ \u63d2\u8fdb\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u91cc\uff0c\u5e76\u67e5\u8be2\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u4e2d\u6240\u6709\u7684 $b$ \u6743\u503c\u6bd4 $b_i$ \u5927\u7684\u8282\u70b9\u4e2d $c$ \u6743\u503c\u7684\u6700\u5927\u503c\uff0c\u5982\u679c\u6bd4 $c_i$ \u5927\u7684\u8bdd\uff0c\u5c31\u610f\u5473\u7740\u8fd9\u4e2a\u5973\u4eba\u8981\u8df3\u697c\uff0c\u5c06 $cnt$ \u52a0 $1$\u3002\n\n\u5177\u4f53\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u9897\u503c\u57df\u7ebf\u6bb5\u6811\u7ef4\u62a4\uff0c\u5c06 $(b_i,c_i)$ \u63d2\u8fdb\u53bb\u65f6\uff0c\u5c31\u662f\u8ba9 $b_i$ \u8fd9\u4e2a\u4f4d\u7f6e\u7684\u503c\u548c $c_i$ \u53d6\u4e2a $\\max$\uff0c\u800c\u67e5\u8be2\u5c31\u662f\u67e5\u8be2\u540e\u7f00 $\\max$\u3002\n\ncode:\n```cpp\n// Problem: CF12D Ball\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/CF12D\n// Memory Limit: 250 MB\n// Time Limit: 2000 ms\n// Powered by CP Editor (https://cpeditor.org)\n\n#include <algorithm>\n#include <stdio.h>\nconst int maxnlogw = 15e6 + 2, maxn = 5e5 + 1;\ninline int max( int a, int b ) {\n    return a > b ? a : b;\n}\nint n, maxw;\nstruct tree {\n    int a[ maxnlogw ], lc[ maxnlogw ], rc[ maxnlogw ], cnt = 1;\n    int _query( int x, int ql, int qr, int l, int r ) {\n        if ( ql <= l && r <= qr )\n            return a[ x ];\n        int mid = l + r >> 1, ans = 0;\n        if ( ql <= mid )\n            ans = lc[ x ] ? max( ans, _query( lc[ x ], ql, qr, l, mid ) ) : ans;\n        if ( mid < qr )\n            ans = rc[ x ] ? max( ans, _query( rc[ x ], ql, qr, mid + 1, r ) ) : ans;\n        return ans;\n    }\n    int query( int l, int r ) {\n        return _query( 1, l, r, 0, maxw );\n    }\n    void _set( int x, int y, int k, int l, int r ) {\n        if ( l == r ) {\n            a[ x ] = max(a[x],k);\n            return;\n        }\n        int mid = l + r >> 1;\n        if ( y <= mid )\n            _set( lc[ x ] = ( lc[ x ] ? lc[ x ] : ++cnt ), y, k, l, mid );\n        else\n            _set( rc[ x ] = ( rc[ x ] ? rc[ x ] : ++cnt ), y, k, mid + 1, r );\n        a[ x ] = max( a[ lc[ x ] ], a[ rc[ x ] ] );\n    }\n    void set( int x, int y ) {\n        _set( 1, x, y, 0, maxw );\n    }\n} t;\nstruct node {\n    int a, b, c;\n    bool operator<( const node &o ) const {\n        return a != o.a ? a > o.a : ( b != o.b ? b > o.b : c > o.c );\n    }\n} a[ maxn ];\nint main( ) {\n    scanf( \"%d\", &n );\n    for ( int i = 1; i <= n; ++i )\n        scanf( \"%d\", &a[ i ].a );\n    for ( int i = 1; i <= n; ++i )\n        scanf( \"%d\", &a[ i ].b ), maxw = max( maxw, a[ i ].b );\n    for ( int i = 1; i <= n; ++i )\n        scanf( \"%d\", &a[ i ].c );\n    std::sort( a + 1, a + n + 1 );\n    int ans = 0;\n    for ( int i = 1; i <= n; ++i ) {\n        if ( i > 1 && a[ i ].a < a[ i - 1 ].a )\n            for ( int j = i - 1; j && a[ j ].a == a[ i - 1 ].a; --j )\n                t.set( a[ j ].b, a[ j ].c );\n        ans += t.query( a[ i ].b + 1, maxw ) > a[ i ].c;\n    }\n    printf( \"%d\", ans );\n    return 0;\n}\n```",
        "postTime": 1651751498,
        "uid": 203008,
        "name": "toaru",
        "ccfLevel": 5,
        "title": "CF12D Ball"
    }
]
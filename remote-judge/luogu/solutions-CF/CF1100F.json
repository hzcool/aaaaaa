[
    {
        "content": "## \u9898\u610f\n\u7ed9\u5b9a\u4e00\u7ec4\u6570$a$\uff0c\u6709$q$\u7ec4\u8be2\u95ee\u6c42$a_l\\to a_r$\u7684\u5f02\u6216\u6700\u5927\u503c\n## \u9898\u89e3\n\u8fd9\u662f\u4e00\u9053**\u524d\u7f00**\u7ebf\u6027\u57fa\u7684\u677f\u5b50\u9898\n\n\u6211\u4eec\u7684\u524d\u7f00\u7ebf\u6027\u57fa\u9700\u8981\u4e24\u4e2a\u53d8\u91cf\uff1a$p[i]$\u8868\u793a\u7b2c$i$\u4f4d\u7684\u503c\uff0c$pos[i]$\u8868\u793a\u5bf9\u7b2c$i$\u4f4d\u9020\u6210\u5f71\u54cd\u7684\u6570\u7684\u7f16\u53f7\u3002\u90a3\u4e48\u5f88\u663e\u7136\uff0c\u5047\u5982\u6211\u4eec\u5df2\u7ecf\u6c42\u51fa\u4e86$1\\to r$\u7684\u7ebf\u6027\u57fa\uff0c\u5176\u4e2d\u6240\u6709$pos\u2265l$\u7684\u6570\u6784\u6210\u7684\u7ebf\u6027\u57fa\u5c31\u662f\u533a\u95f4$[l,r]$\u7684\u6570\u6784\u6210\u7684\u7ebf\u6027\u57fa\n\n\u6839\u636e**\u8d2a\u5fc3**\u7684\u601d\u60f3\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u6211\u4eec\u8981\u5c3d\u53ef\u80fd\u5730\u8ba9$pos[i]$\u7684\u503c\u6700\u5927\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u6211\u4eec\u901a\u8fc7\u4e0a\u8ff0\u65b9\u6cd5\u6784\u9020\u51fa\u7684\u7ebf\u6027\u57fa\u662f$[l,r]$\u7684\u7ebf\u6027\u57fa\n\n**\u90a3\u4e48\u5982\u4f55\u4fdd\u8bc1$pos[i]$\u7684\u503c\u6700\u5927\u5462\uff1f**\n\n\u5f88\u7b80\u5355\uff0c\u5982\u679c\u6211\u4eec\u63d2\u5165\u4e00\u4e2a\u503c$x$\uff0c\u5b83\u7684\u4f4d\u7f6e\u4e3a$w$\uff0c\u90a3\u4e48\u5982\u679c\u6709\u4e00\u4f4d\u7684$pos<w$\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u8fd9\u4e00\u4f4d\u7684$p$\u53d6\u51fa\u6765\u6362\u6210$x$\uff0c$pos$\u6362\u6210$w$\uff0c\u7136\u540e\u628a$pos,p $\u7ee7\u7eed\u5f80\u4e0b\u63d2\u5165\uff0c\u8fd9\u6837\u6784\u9020\u51fa\u7684\u7ebf\u6027\u57fa$pos$\u5c31\u662f\u6700\u5927\u7684\n## \u4ee3\u7801\n```cpp\n#pragma optimize(2)\n#include<bits/stdc++.h>\nusing namespace std;\ntemplate<typename T>\ninline void read(T &x){\n\tx=0;char c=getchar();bool f=false;\n\tfor(;!isdigit(c);c=getchar())f!=c=='-';\n\tfor(;isdigit(c);c=getchar())x=x*10+c-'0';\n\tif(f)x=-x;\n}\ntemplate<typename T ,typename ...Arg>\ninline void read(T &x,Arg &...args){\n\tread(x);read(args...);\n}\ntemplate<typename T>\ninline void write(T x){\n\tif(x<0)putchar('-'),x=-x;\n\tif(x>=10)write(x/10);\n\tputchar(x%10+'0');\n}\ntypedef long long ll;\nconst int max_wei=30;\nconst int maxn=500000+10;\nstruct Prefix_Linear_Basis{\n\tll p[max_wei+1];int pos[max_wei+1];\n\tinline void init(){memset(p,0,sizeof p);memset(pos,0,sizeof pos);}\n\tinline void insert(Prefix_Linear_Basis A,int w,ll val){\n\t\t*this=A;\n\t\tfor(int i=max_wei;i>=0;i--)if(val>>i&1){\n\t\t\tif(!p[i]){p[i]=val,pos[i]=w;return;}\n\t\t\telse if(pos[i]<w){swap(pos[i],w);swap(p[i],val);}\n\t\t\tval^=p[i];\n\t\t}\n\t}\n\tinline ll Query(int l){\n\t\t//\u67e5\u8be2\u6b64\u57fa\u4e2d\u6240\u6709\u2265l\u7684\u6700\u5927\u503c\n\t\tll ans=0;\n\t\tfor(int i=max_wei;i>=0;i--)\n\t\t\tif(p[i]&&pos[i]>=l)ans=max(ans,ans^p[i]);\n\t\treturn ans; \n\t}\n}a[maxn];\nint n,q,x,l,r;\nsigned main(){\n\tread(n);a[0].init();\n\tfor(int i=1;i<=n;i++)\n\t\tread(x),a[i].insert(a[i-1],i,x);\n\tread(q);\n\twhile(q--){\n\t\tread(l,r);\n\t\twrite(a[r].Query(l));\n\t\tputchar('\\n');\n\t}\n}\n```",
        "postTime": 1592543632,
        "uid": 174304,
        "name": "jun\u5934\u5409\u5409",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "\u56e0\u4e3a$n,q=500000,a[i]=1e6$\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u5206\u6790\u5168\u7528$n$\u8868\u793a\n\n\u770b\u5230$xor$\u6700\u5927\u6211\u4eec\u60f3\u5230\u7ebf\u6027\u57fa\u3002\n\u5148\u4ecb\u7ecd$O(n\\log^3n)$\u7684\u505a\u6cd5\uff1a\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u7ebf\u6027\u57fa\uff0c\u6bcf\u6b21\u66b4\u529b\u5408\u5e76\uff08\u4e00\u4e2a\u7ebf\u6027\u57fa\u7684\u6240\u6709\u5143\u7d20\u63d2\u5165\u5230\u53e6\u4e00\u4e2a\u7ebf\u6027\u57fa\u91cc\uff09\n\u539f\u9898\uff1a\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int Maxn=500005;\nint n,q,a[Maxn];\nint read(int &x)\n{\n\tx=0; \n\tchar ch=getchar();\n\twhile(!isdigit(ch)) ch=getchar();\n\twhile(isdigit(ch)) x*=10,x+=ch-'0',ch=getchar();\n}\nstruct Lin\n{\n\tint val[21];\n\tLin()\n\t{\n\t\tmemset(val,0,sizeof(val));\n\t}\n};\nstruct Tree\n{\n\tint lt,rt;\n\tLin bas;\n}tree[4*Maxn];\nLin tmp;\nvoid insert_base(int x)\n{\n\tif(!x) return ;\n\tint hb=log2(x);\n\tif(!tmp.val[hb]) tmp.val[hb]=x;\n\tif(tmp.val[hb]) insert_base(x^tmp.val[hb]);\n}\nLin merge(Lin x,Lin y)\n{\n\ttmp=y;\n\tfor(int i=0;i<=20;i++)\n\t\tinsert_base(x.val[i]);\n\treturn tmp;\n}\nvoid build(int root,int lt,int rt)\n{\n\ttree[root]=(Tree){lt,rt};\n\tif(lt+1!=rt)\n\t{\n\t\tint mid=(lt+rt)/2;\n\t\tbuild(root<<1,lt,mid);\n\t\tbuild(root<<1|1,mid,rt);\n\t\ttree[root].bas=merge(tree[root<<1].bas,tree[root<<1|1].bas);\n\t}\n\telse \n\t\tif(a[lt]) tree[root].bas.val[(int)log2(a[lt])]=a[lt];\n}\nLin ask(int root,int lt,int rt)\n{\n\tif(lt==tree[root].lt&&rt==tree[root].rt)\n\t\treturn tree[root].bas;\n\telse\n\t{\n\t\tint mid=(tree[root].lt+tree[root].rt)/2;\n\t\tif(lt>=mid) return ask(root<<1|1,lt,rt);\n\t\telse if(rt<=mid) return ask(root<<1,lt,rt);\n\t\telse\n\t\t\treturn merge(ask(root<<1,lt,mid),ask(root<<1|1,mid,rt));\n\t}\n}\nint work(Lin a)\n{\n\tint ans=0;\n\tfor(int i=20;i>=0;i--)\n\t\tif(ans<(ans^a.val[i])) ans=ans^a.val[i];\n\treturn ans;\n}\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++)\n\t\tread(a[i]);\n\tbuild(1,1,n+1);\n\tread(q);\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tint l,r;\n\t\tread(l),read(r);\n\t\tprintf(\"%d\\n\",work(ask(1,l,r+1)));\n\t}\n\treturn 0;\n}\n```\n\n\u4f46\u662f$n,q=500000$\uff0c\u663e\u7136\u4e09\u53ea $\\log$ \u8fc7\u4e0d\u53bb\u3002\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\uff0c\u5bf9\u4e8e$[l,r],[l+1,r],[l+2,r]...[r,r]$\u7684\u7ebf\u6027\u57fa\u6700\u591a\u53ea\u670920(\u4e5f\u5c31\u662f$log_21000000$ \u79cd)\u3002\u5e76\u4e14\u5f53r\u5411\u540e\uff0c\u7ebf\u6027\u57fa\u53d1\u751f\u6539\u53d8\u7684\u8fd8\u662f\u8fd9\u4e9b\u70b9\u4e0e\u65b0\u52a0\u5165\u7684$[r,r]$\u7684\u5b50\u96c6\u3002\n\u6211\u4eec\u53ef\u4ee5\u628a\u8be2\u95ee\u6309$r$\u6392\u5e8f\uff0c\u7ef4\u62a4$[1,r],[2,r],[3,r]...[r,r]$\u7684\u7ebf\u6027\u57fa\u7684\u96c6\u5408\u4e0e\u7ebf\u6027\u57fa\u53d1\u751f\u6539\u53d8\u7684\u70b9\uff0c\u5f53$r$\u5411\u540e\u63a8\u65f6\u628a$a[r]$\u63d2\u5165\u8fd920\u4e2a\u7ebf\u6027\u57fa\u4e2d\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log^2n)$\n\n\u4ee3\u7801:\n\n\uff08\u7384\u5b66WA17\uff0c\u5495\u5495\u5495\u4e2d\uff09\n\n\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u8fd8\u6709\u66f4\u4f18\u79c0\u7684\u505a\u6cd5\u3002\n\n\u6211\u4eec\u8003\u8651\u7ebf\u6027\u57fa\u53d6\u5b50\u96c6\u5f02\u6216\u6700\u5927\u503c\u7684\u8fc7\u7a0b\u3002\u5982\u679c\u7b2c$i$\u4f4d\u6709\u503c\uff0c\u90a3\u4e48\u5c31\u53d6\u7b2c$i$\u4f4d\uff0c\u8fd9\u6837$ans$\u7684\u7b2c$i$\u4f4d\u5c31\u80fd\u4fdd\u8bc1\u662f$1$\u3002\n\n\u6211\u4eec\u8fd8\u662f\u6309$r$\u6392\u5e8f\u3002\u6211\u4eec\u4ee4 $pos[i]$ \u8868\u793a $[l,r]$ \u7ebf\u6027\u57fa\u7b2c $i$ \u4f4d\u6709\u503c\u7684\u6700\u5927\u7684$l$\uff0c\u6bcf\u4e00\u6b21\u6309\u7167\u666e\u901a\u7ebf\u6027\u57fa\u63d2\u5165\u7684\u65b9\u5f0f\u5411\u7ebf\u6027\u57fa$base$\u4e2d\u63d2\u5165$a[i]$\u3002\u5904\u7406\u7b54\u6848\u65f6\uff0c\u5982\u679c$base[i]$\u6709\u503c\uff0c\u4e14$pos[i]\\geq l$\uff0c\u90a3\u4e48\u5c31\u4ee3\u8868\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u8fd9\u4e00\u4f4d\uff0c\u8fd9\u6837\u8d2a\u5fc3\u5730\u53d6\uff0c\u5c31\u662f\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log n)$\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int Maxn=500005;\nint bas[21],pos[21],n,rt,a[Maxn],q;\nstruct quest\n{\n\tint lt,rt,id;\n\tbool operator < (const quest &tmp) const\n\t{\n\t\treturn rt<tmp.rt;\n\t}\n}Q[Maxn];\nvoid insert(int x,int id)\n{\n\tfor(int i=20;i>=0;i--)\n\t{\n\t\tif(x&(1<<i))\n\t\t{\n\t\t\tif(!bas[i])\n\t\t\t{\n\t\t\t\tbas[i]=x;\n\t\t\t\tpos[i]=id;\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif(pos[i]<id) swap(pos[i],id),swap(x,bas[i]);\n\t\t\tx^=bas[i];\n\t\t}\n\t}\n}\nint work(int lt)\n{\n\tint ans=0;\n\tfor(int i=20;i>=0;i--)\n\t\tif(pos[i]>=lt&&ans<(ans^bas[i]))\n\t\t\tans^=bas[i];\n\treturn ans;\n}\nint ans[Maxn];\nint main()\n{ \n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tscanf(\"%d\",&q);\n\tfor(int i=1;i<=q;i++)\n\t\tscanf(\"%d%d\",&Q[i].lt,&Q[i].rt),Q[i].id=i;\n\tsort(Q+1,Q+1+q);\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\twhile(rt<Q[i].rt)\n\t\t{\n\t\t\trt++;\n\t\t\tinsert(a[rt],rt);\n\t\t}\n\t\tans[Q[i].id]=work(Q[i].lt);\n\t}\n\tfor(int i=1;i<=q;i++)\n\t\tprintf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```\n\n\u4e0d\u8fc7\u8fd8\u6ca1\u6709\u7ed3\u675f(\u6ed1\u7a3d)\u3002\n\n\u5b9e\u9645\u4e0a\uff0c$O(n\\log n)$\u7684\u7b97\u6cd5\u53ef\u4ee5\u5f3a\u5236\u5728\u7ebf\u3002\n\n\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a$r$\u90fd\u8fd9\u6837\u9884\u5904\u7406\u4e0b\u6765\uff0c\u5c31\u80fd\u591f\u76f4\u63a5\u67e5\u8be2\u4e86\u3002\n\n",
        "postTime": 1547449317,
        "uid": 49093,
        "name": "_sys",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "\u5982\u679c\u66b4\u529b\u7ef4\u62a4\u7ebf\u6027\u57fa\uff0c\u7ebf\u6bb5\u6811\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log^2n)-O(\\log^3n)$\n\n\u7531\u4e8e\u91cd\u590d\u5143\u7d20\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\uff0c\u4e8e\u662f\u53ef\u4ee5\u7528ST\u8868\u7ef4\u62a4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log^3n)-O(\\log^2n)$\n\n\u4e24\u79cd\u505a\u6cd5\u90fd\u65e0\u6cd5\u901a\u8fc7\u672c\u9898\u3002\n\n\u5982\u679c\u6cbf\u7528\u8fd9\u4e2a\u601d\u8def\uff0c\u74f6\u9888\u663e\u7136\u5728\u7ebf\u6027\u57fa\u5408\u5e76\u7684 $O(\\log^2n)$ \u4e0a\uff0c\u65e0\u6cd5\u518d\u52a0\u4f18\u5316\n\n\u5e38\u89c1\u7684 RMQ \u6709ST\u8868\u7684 $O(n\\log n)-O(1)$ \u7684\u505a\u6cd5\uff0c\u4f46 $O(n)-O(1)$ \u7684\u6807\u51c6RMQ\u5f88\u96be\u5199\u3001\u5e38\u6570\u8f83\u5927\uff0c\u4e14\u65e0\u6cd5\u89e3\u51b3\u672c\u9898\uff0c\u4e8e\u662f\u53ef\u4ee5\u8003\u8651\u5728\u968f\u673a\u6570\u636e\u4e0b\u671f\u671b $O(n)-O(1)$ \u7684 lxl ST\u8868\n\n> \u5206\u5757\uff0c\u5927\u5c0f\u8bbe\u4e3a $x$\n>\n> \u9884\u5904\u7406\u6bcf\u4e2a\u5757\u4e24\u7aef\u5230\u5757\u5185\u6bcf\u4e2a\u70b9\u7684\u524d\u7f00 $\\max$ \u548c\u540e\u7f00 $\\max$\n>\n> \u9884\u5904\u7406\u5757\u95f4ST\u8868\n>\n> \u82e5\u67e5\u8be2 $[l,\\ r]$ \uff0c\u4e14 $l,\\ r$ \u5206\u522b\u5728\u5757 $a,\\ b$ \u4e2d\n>\n> \u5219\u67e5\u5757 $a,\\ b$ \u4e4b\u95f4\u7684 RMQ \uff0c\u4ee5\u53ca $l$ \u5728 $a$ \u5757\u7684\u540e\u7f00 $\\max$ \u548c $r$ \u5728 $b$ \u5757\u7684\u524d\u7f00 $\\max$\n>\n> \u5f53 $l,\\ r$ \u5728\u540c\u4e00\u5757\u4e2d\u65f6\uff0c\u66b4\u529b\u6c42\u89e3\n>\n> \u53ef\u4ee5\u53d6 $x=\\log n$ \uff0c\u5f53 $l,\\ r$ \u4e0d\u5728\u540c\u4e00\u5757\u4e2d\u65f6\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u662f $O(1)$ \u7684\n>\n> \u6458\u81ea [P3793 \u7531\u4e43\u6551\u7237\u7237](https://www.luogu.org/problemnew/show/P3793)\n\n\u5982\u4e0a\u7ef4\u62a4\uff0c\u9884\u5904\u7406\u5757\u4e2d\u524d\u7f00\u540e\u7f00\u7ebf\u6027\u57fa $O(n\\log n)$ \uff0c\u5757\u95f4ST\u8868\u7ebf\u6027\u57fa $O(\\frac{n}{x}\\log n\\log^2n)=O(n\\log^2n)$\n\n\u82e5 $l,\\ r$ \u5728\u540c\u4e00\u5757\u4e2d\uff0c\u5c06 $[l,\\ r]$ \u4e2d\u7684\u5143\u7d20\u66b4\u529b\u63d2\u5165\u7ebf\u6027\u57fa\uff0c $O(x\\log n)=O(\\log^2n)$ \uff1b\u82e5 $l,\\ r$ \u4e0d\u5728\u540c\u4e00\u5757\u4e2d\uff0c\u5408\u5e76\u524d\u7f00\u540e\u7f00\u5757\u95f4\u4e09\u4e2a\u7ebf\u6027\u57fa $O(\\log^2n)$\n\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log^2n)$ \uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u5361\u5361\u5e38\n\n\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int maxn = 5e5 + 10, maxm = 7850, base = 63;\nint n, m, tot, lg[maxm], a[maxn];\n\n#define get(x) (((x) + base) >> 6)\n\nstruct linear_base {\n  int a[20];\n\n  inline void clr() {\n    memset(a, 0, sizeof a);\n  }\n\n  inline void ins(int x, int lim = 19) {\n    for (int i = lim; ~i; --i) {\n      if (x >> i & 1) {\n        if (!a[i]) { a[i] = x; return; }\n        x ^= a[i];\n      }\n    }\n  }\n\n  inline int query() {\n    int res = 0;\n    for (int i = 19; ~i; --i) {\n      if ((res ^ a[i]) > res) res ^= a[i];\n    }\n    return res;\n  }\n} null, lef[maxn], rig[maxn], val[13][maxm];\n\ninline linear_base operator + (linear_base A, const linear_base &B) {\n  for (int i = 19; ~i; --i) {\n    if (B.a[i]) A.ins(B.a[i], i);\n  }\n  return A;\n}\n\nconst int maxn_r = maxn * 23, maxn_w = maxn * 8;\nchar buf_r[maxn_r], *now_r = buf_r;\nchar buf_w[maxn_w], *now_w = buf_w;\n\ninline int read() {\n  int x = 0;\n  while (*now_r < 48) ++now_r;\n  while (*now_r > 47) x = (x << 3) + (x << 1) + (*now_r ^ 48), ++now_r;\n  return x;\n}\n\ninline void write(int x) {\n  static char *tp, st[7];\n  if (!x) *now_w = 48, ++now_w;\n  for (tp = st; x; *++tp = x % 10 | 48, x /= 10);\n  while (tp != st) *now_w = *tp, ++now_w, --tp;\n  *now_w = 10, ++now_w;\n}\n\ninline linear_base query(const int &l, const int &r) {\n  if (l > r) return null;\n  const int k = lg[r - l + 1];\n  return val[k][l] + val[k][r - (1 << k) + 1];\n}\n\nint main() {\n  fread(buf_r, 1, maxn_r, stdin);\n  n = read(), tot = get(n);\n  for (int i = 1; i <= n; ++i) {\n    a[i] = read();\n    val[0][get(i)].ins(a[i]);\n  }\n  for (int i = 2; i <= tot; ++i) {\n    lg[i] = lg[i >> 1] + 1;\n  }\n  linear_base lst;\n  lst.clr();\n  for (int i = 1; i <= n; ++i) {\n    lst.ins(a[i]), lef[i] = lst;\n    if (!(i & base)) lst.clr();\n  }\n  lst.clr();\n  for (int i = n; i; --i) {\n    if (!(i & base)) lst.clr();\n    lst.ins(a[i]), rig[i] = lst;\n  }\n  for (int i = 1; i <= lg[tot]; ++i) {\n    for (int j = 1; j + (1 << i) - 1 <= tot; ++j) {\n      val[i][j] = val[i - 1][j] + val[i - 1][j + (1 << (i - 1))];\n    }\n  }\n  m = read();\n  register linear_base ans;\n  for (int q = 1; q <= m; ++q) {\n    const int l = read(), r = read();\n    const int L = get(l), R = get(r);\n    ans.clr();\n    if (L == R) {\n      for (register int i = l; i <= r; ++i) {\n        ans.ins(a[i]);\n      }\n    } else {\n      ans = rig[l] + lef[r] + query(L + 1, R - 1);\n    }\n    write(ans.query());\n  }\n  fwrite(buf_w, 1, now_w - buf_w, stdout);\n  return 0;\n}\n```",
        "postTime": 1558009821,
        "uid": 73934,
        "name": "Juanzhang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217\uff0c\u6bcf\u6b21\u8be2\u95ee\u4e00\u4e2a\u533a\u95f4\u4e2d\u9009\u53d6\u4e00\u4e9b\u6570\u7684\u5f02\u6216\u6700\u5927\u503c\uff0c\u53ef\u4ee5\u79bb\u7ebf\uff0c$n\\le 5\\times10^5$\u3002\n\n\u663e\u7136 $3\\log$ \u8dd1\u4e0d\u8fc7\u53bb\uff0c\u8003\u8651 $2\\log$ \u505a\u6cd5\u3002\n\n\u601d\u8003\u4e00\u79cd\u795e\u79d8\u7684\u5bf9\u6574\u4f53\u4e8c\u5206\u7684\u505a\u6cd5\u3002\n\n\u5bf9\u503c\u57df $[1,n]$ \u4e8c\u5206\uff0c\u8bb0\u5f55 $mid=\\lfloor\\frac{1+n}{2}\\rfloor$\uff0c\u628a $r$ \u5c0f\u4e8e $mid$ \u7684\u8be2\u95ee\u5206\u5230\u5de6\u8fb9\uff0c\u628a $l$ \u5927\u4e8e $mid$ \u7684\u8be2\u95ee\u5206\u5230\u53f3\u8fb9\uff0c\u518d\u5904\u7406\u6389\u7ecf\u8fc7 $mid$ \u7684\u8be2\u95ee\uff0c\u5bf9\u4e8e\u8fd9\u4e00\u4e2a\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u8bb0\u5f55\u4ece $mid$ \u5f00\u59cb\u7684\u524d\u7f00\u7ebf\u6027\u57fa\u548c\u540e\u7f00\u7ebf\u6027\u57fa\uff0c\u8fd9\u6837\u590d\u6742\u5ea6\u4e00\u5c42\u5c31\u662f $O(n\\log n)$ \u603b\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f $O(n\\log^2n)$\u3002\n\n\u73b0\u5728\u662f $21:20$\uff0c\u6211\u770b\u6211\u4ec0\u4e48\u65f6\u5019\u5199\u5b8c\u3002\n\n\u73b0\u5728\u662f $21:39$\uff0c\u6211\u5199\u5b8c\u4e86\u3002\n\n```cpp\n#define maxn 500010\nstruct xxj{\n\t#define Maxbit 21\n\t#define _Tp int\n\t_Tp p[Maxbit+1];\n\tvoid insert(_Tp x){\n\t  if(!x)return;\n\t\tfor(int i=Maxbit;i+1;i--){\n\t\t\tif(!(x>>i))continue;\n\t\t\tif(!p[i]){p[i]=x;break;}\n\t\t\tx^=p[i];\n\t\t}\n\t}\n\tvoid clear(){memset(p,0,sizeof p);}\n\tvoid insert(xxj h){for(int i=0;i<=Maxbit;i++)insert(h.p[i]);}\n\t_Tp ask(){\n\t\t_Tp ans=0;\n\t\tfor(int i=Maxbit;i+1;i--)\n\t\tif((ans^p[i])>ans)ans^=p[i];\n\t\treturn ans;\n\t}\n}st[maxn];\nint n,m;\nint a[maxn];\nstruct prpr{\n\tint l,r,id;\n}q[maxn],tmpl[maxn],tmpr[maxn];\nint Ans[maxn];\nint work(xxj a,xxj b){\n\treturn a.insert(b),a.ask();\n}\nvoid solve(int l,int r,int L,int R){\n\tif(L>R)return;\n\tif(l==r){\n\t\tfor(int i=L;i<=R;i++)Ans[q[i].id]=a[l];\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tst[mid].clear();\n\tst[mid].insert(a[mid]);\n\tfor(int i=mid-1;i>=l;i--)st[i]=st[i+1],st[i].insert(a[i]);\n\tfor(int i=mid+1;i<=r;i++)st[i]=st[i-1],st[i].insert(a[i]);\n\tint ll=0,rr=0;\n\tfor(int i=L;i<=R;i++){\n\t\tif(q[i].r<mid)tmpl[++ll]=q[i];\n\t\telse if(q[i].l>mid)tmpr[++rr]=q[i];\n\t\telse Ans[q[i].id]=work(st[q[i].l],st[q[i].r]);\n\t}\n\tfor(int i=1;i<=ll;i++)q[L+i-1]=tmpl[i];\n\tfor(int i=1;i<=rr;i++)q[L+ll+i-1]=tmpr[i];\n\tsolve(l,mid,L,L+ll-1);\n\tsolve(mid+1,r,L+ll,L+ll+rr-1);\n}\nsigned main(){\n#ifndef ONLINE_JUDGE\n\tfreopen(\"testdata.in\",\"r\",stdin);\n#endif\n\tcin>>n;for(int i=1;i<=n;i++)cin>>a[i];\n\tcin>>m;for(int i=1;i<=m;i++)cin>>q[i].l>>q[i].r,q[i].id=i;\n\tsolve(1,n,1,m);\n\tfor(int i=1;i<=m;i++)cout<<Ans[i]<<endl;\n#ifndef ONLINE_JUDGE\n\tcerr<<endl<<(double)clock()/CLOCKS_PER_SEC;\n#endif\n}\n```\n\u5408\u5e76\u65f6\u5343\u4e07\u8981\u628a\u4e24\u4e2a\u7ebf\u6027\u57fa\u5408\u5e76\u8d77\u6765\u518d\u8ba1\u7b97\uff0c\u4e0d\u80fd\u4e0d\u5408\u5e76\uff0clike this\n```cpp\nint ans=0;\nfor(int i=21;i+1;i--)if((ans^a.p[i])>ans)ans^=a.p[i];\nfor(int i=21;i+1;i--)if((ans^b.p[i])>ans)ans^=b.p[i];\nreturn ans;\n```",
        "postTime": 1632144042,
        "uid": 100325,
        "name": "peterwuyihong",
        "ccfLevel": 7,
        "title": "CF1100F Ivan and Burgers \u8bb0\u5f55"
    },
    {
        "content": "\u6211\u4eec\u5c06\u4e00\u4e2a\u5e8f\u5217\u8f6c\u4e3a\u4e00\u68f5\u6811(\u94fe)\n\n\u7136\u540e\u5c31\u662f\u6811\u7684\u70b9\u5206\u6cbb\uff0c\u6bcf\u6b21\u6c42\u51fa\u91cd\u5fc3\u540e\uff0c\u6c42\u51fa\u91cd\u5fc3\u5230\u6bcf\u4e2a\u70b9\u8def\u5f84\u4e0a\u7684\u6570\u7684\u7ebf\u6027\u57fa\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\uff0c\u53ea\u9700\u8981\u66b4\u529b\u5408\u5e76\u4e24\u4e2a\u7ebf\u6027\u57fa\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u662f\u4e00\u6761\u94fe\uff0c\u6240\u4ee5\u91cd\u5fc3\u76f4\u63a5\u53d6\u5f53\u524d\u94fe\u4e2d\u70b9\u5373\u53ef\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982$O(30nlogn+900q)$\n\n\u4e0d\u7ed9\u4ee3\u7801\u5566",
        "postTime": 1547431622,
        "uid": 48265,
        "name": "decoqwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "## $\\text{Solution:}$\n\n\u9996\u5148\u770b\u5230\u5f02\u6216\u548c\u6700\u5927\u7acb\u9a6c\u60f3\u5230\u7ebf\u6027\u57fa\uff0c\u7136\u800c $[l,r]$ \u5c31\u5f88\u70e6\u3002\n\n\u6211\u4eec\u53d1\u73b0\u7ebf\u6027\u57fa\u662f\u80fd\u591f\u5408\u5e76\u7684\uff0c\u60f3\u5230\u732b\u6811\u5206\u6cbb\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u7ef4\u62a4 $[l,mid]$ \u7684\u540e\u7f00\u7ebf\u6027\u57fa\u4ee5\u53ca $[mid+1,r]$ \u7684\u524d\u7f00\u7ebf\u6027\u57fa\uff0c\u5bf9\u4e8e\u8be2\u95ee\u5224\u65ad\u662f\u5426\u8de8\u8fc7\u4e24\u8fb9\u5373\u53ef\u3002\n\n\u8bbe $q=n$ \uff0c\u590d\u6742\u5ea6 $O(n \\log^2 n)$\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cmerge \u4e0d\u80fd\u4f20\u53c2\uff01\n\n## $\\text{Code:}$\n\n```cpp\n#include <bits/stdc++.h>\n\n#define N (int)(5e5+5)\n\nusing namespace std;\nint rd() {int f=1,sum=0; char ch=getchar();while(!isdigit(ch)) {if(ch=='-') f=-1;ch=getchar();}while(isdigit(ch)) {sum=(sum<<3)+(sum<<1)+ch-'0';ch=getchar();}return sum*f;}\nstruct ques {\n\tint l,r;\n}q[N];\n\nint a[N],p[N],ans[N],n,m;\n\nstruct node {\n\tint d[22];\n\tvoid clr() {\n\t\tmemset(d,0,sizeof(d));\n\t}\n\tvoid ins(int x) {\n\t\tfor(int i=20;i>=0;i--) {\n\t\t\tif((x>>i)&1) {\n\t\t\t\tif(d[i]) x^=d[i];\n\t\t\t\telse {\n\t\t\t\t\td[i]=x; break;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint qry() {\n\t\tint res=0;\n\t\tfor(int i=20;i>=0;i--) {\n\t\t\tif((res^d[i])>res) res^=d[i];\n\t\t}\n\t\treturn res;\n\t}\n}g[N];\n\nint merge(node x,node y) {\n\tfor(int i=20;i>=0;i--) x.ins(y.d[i]);\n\treturn x.qry();\n}\n\nint tmp[N];\nvoid solve(int l,int r,int L,int R) {\n\tif(L>R) return;\n\tint mid=(l+r)>>1,t1=L-1,t2=0;\n\tg[mid].clr(); g[mid].ins(a[mid]);\n\t//cout<<g[mid].qry()<<endl;\n\tfor(int i=mid+1;i<=r;i++) (g[i]=g[i-1]).ins(a[i]);\n\tfor(int i=mid-1;i>=l;i--) (g[i]=g[i+1]).ins(a[i]);\n\tfor(int i=L,x;i<=R;i++) {\n\t\tx=p[i];\n\t\tif(q[x].r<=mid) p[++t1]=x;\n\t\telse if(q[x].l>mid) tmp[++t2]=x;\n\t\telse {\n\t\t\tans[x]=merge(g[q[x].l],g[q[x].r]); \n\t\t}\n\t}\n\tfor(int i=1;i<=t2;i++) p[t1+i]=tmp[i];\n\tsolve(l,mid,L,t1); solve(mid+1,r,t1+1,t1+t2);\n}\n\nint main() {\n\tn=rd();\n\tfor(int i=1;i<=n;i++) a[i]=rd();\n\tm=rd();\n\tint tot=0;\n\tfor(int i=1;i<=m;i++) {\n\t\tq[i]=ques{rd(),rd()};\n\t\tif(q[i].l==q[i].r) ans[i]=a[q[i].l];\n\t\telse p[++tot]=i;\n\t}\n\tsolve(1,n,1,tot);\n\tfor(int i=1;i<=m;i++) printf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1621755504,
        "uid": 125901,
        "name": "FxorG",
        "ccfLevel": 7,
        "title": "CF1100F Ivan and Burgers"
    },
    {
        "content": "\u5728\u4e00\u4e9b\u6570\u4e2d\u53d6\u82e5\u5e72\u4e2a\u6570\uff0c\u8981\u6c42\u5f02\u6216\u548c\u6700\u5927\uff0c\u4e0d\u96be\u60f3\u5230\u7ebf\u6027\u57fa\u3002\n\n\u76f4\u63a5\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\uff0c\u5219\u590d\u6742\u5ea6\u8fbe\u5230$O((n+q)\\log^3 n)$\uff0c\u7528ST\u8868\u7684\u8bdd\uff0c\u9884\u5904\u7406\u590d\u6742\u5ea6\u4e5f\u8fbe\u5230\u4e86$O(n\\log^3 n)$\uff0c\u96be\u4ee5\u63a5\u53d7\u3002\n\n\u8003\u8651\u79bb\u7ebf\uff0c\u7136\u540e\u5206\u6cbb\u3002\u6bcf\u6b21\u8003\u8651\u89e3\u51b3\u7ecf\u8fc7\u5f53\u524d\u533a\u95f4\u4e2d\u70b9\u7684\u8be2\u95ee\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4\uff0c\u6211\u4eec\u5904\u7406\u51fa\u4e2d\u70b9$mid$\u5f80\u5de6\u7684\u540e\u7f00\u7ebf\u6027\u57fa\u3001\u5f80\u53f3\u7684\u524d\u7f00\u7ebf\u6027\u57fa\uff0c\u5219\u53ef\u4ee5\u5728$O(\\log^2 n)$\uff08\u7ebf\u6027\u57fa\u5408\u5e76\uff09\u7684\u590d\u6742\u5ea6\u89e3\u51b3\u4e00\u4e2a\u7ecf\u8fc7\u4e2d\u70b9\u7684\u8be2\u95ee\u3002\n\n\u7136\u540e\uff0c\u5bf9\u4e8e\u4e24\u7aef\u70b9\u90fd\u5728\u5de6\u8fb9\u7684\u533a\u95f4\uff0c\u5f80\u5de6\u9012\u5f52\u5904\u7406\uff1b\u4e24\u7aef\u70b9\u90fd\u5728\u53f3\u8fb9\u7684\u533a\u95f4\uff0c\u5f80\u53f3\u9012\u5f52\u5904\u7406\u3002\n\n\u5206\u6cbb\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$T(n)=2T(\\frac n 2)+O(n\\log n)=O(n\\log^2 n)$\u3002\u52a0\u4e0a\u5904\u7406\u6240\u6709\u8be2\u95ee\u7684\u590d\u6742\u5ea6$O(q\\log^2 n)$\uff0c\u603b\u590d\u6742\u5ea6$O((n+q)\\log^2 n)$\u3002\n\n## Code\uff1a\n```cpp\n#include<cstdio>\n#include<cctype>\n#include<cstring>\nstruct istream{\n\tchar buf[23333333],*s;\n\tinline istream(){\n\t\tbuf[fread(s=buf,1,23333330,stdin)]='\\n';\n\t\tfclose(stdin);\n\t}\n\tinline istream&operator>>(int&d){\n\t\tfor(d=0;!isdigit(*s);++s);\n\t\twhile(isdigit(*s))d=(d<<3)+(d<<1)+(*s++^'0');\n\t\treturn*this;\n\t}\n}cin;\nstruct ostream{\n\tchar buf[8000005],*s;\n\tostream(){s=buf;}\n\tinline ostream&operator<<(int d){\n\t\tif(!d){*s++='0';}else{\n\t\t\tint w=1;\n\t\t\twhile(w<=d)w*=10;\n\t\t\tfor(;w/=10;d%=w)*s++=d/w^'0';\n\t\t}\n\t\treturn*this;\n\t}\n\tinline ostream&operator<<(const char&c){*s++=c;return*this;}\n\tvoid flush(){fwrite(buf,1,s-buf,stdout);s=buf;}\n\t~ostream(){flush();}\n}cout;\nconst int N=500005;\nstruct base{\n\tint s[20];\n\tinline void ins(int p){\n\t\tif(p)\n\t\tfor(int i=19;~i;--i)\n\t\tif(p>>i&1){\n\t\t\tif(!s[i]){s[i]=p;break;}\n\t\t\tp^=s[i];\n\t\t}\n\t}\n\tinline void clear(){memset(s,0,sizeof s);}\n}d[N];\nint merge(base a,base b){\n\tfor(int i=19;~i;--i)a.ins(b.s[i]);\n\tint ret=0;\n\tfor(int i=19;~i;--i)\n\tif((ret^a.s[i])>ret)ret^=a.s[i];\n\treturn ret;\n}\nint a[N],n,q[N],qL[N],qR[N],ans[N],m;\nvoid solve(int l,int r,int L,int R){\n\tif(L>R)return;\n\tif(l==r){\n\t\tfor(int i=L;i<=R;++i)ans[q[i]]=a[l];return;\n\t}\n\tstatic int tmpL[N],tmpR[N];int tL=0,tR=0;const int mid=l+r>>1;\n\td[mid].clear();d[mid].ins(a[mid]);\n\tfor(int i=mid-1;i>=l;--i)(d[i]=d[i+1]).ins(a[i]);\n\tfor(int i=mid+1;i<=r;++i)(d[i]=d[i-1]).ins(a[i]);\n\tfor(int i=L;i<=R;++i)\n\tif(qL[q[i]]<=mid){\n\t\tif(qR[q[i]]>mid)ans[q[i]]=merge(d[qL[q[i]]],d[qR[q[i]]]);else\n\t\ttmpL[++tL]=q[i];\n\t}else tmpR[++tR]=q[i];\n\tfor(int i=1;i<=tL;++i)q[L+i-1]=tmpL[i];\n\tfor(int i=1;i<=tR;++i)q[L+tL+i-1]=tmpR[i];\n\tsolve(l,mid,L,L+tL-1);\n\tsolve(mid+1,r,L+tL,L+tL+tR-1);\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)cin>>a[i];\n\tcin>>m;\n\tfor(int i=1;i<=m;++i)cin>>qL[i]>>qR[i],q[i]=i;\n\tsolve(1,n,1,m);\n\tfor(int i=1;i<=m;++i)cout<<ans[i]<<'\\n';\n\treturn 0; \n}\n```",
        "postTime": 1547465925,
        "uid": 6813,
        "name": "mrsrz",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "~~\u4ec0\u4e48\u662f\u524d\u7f00\u7ebf\u6027\u57fa\uff0c\u722c\u7f62~~\n\n\u9996\u5148\u6709\u4e2a\u663e\u7136\u7684\u7ebf\u6bb5\u6811\u548c st \u8868\u7ef4\u62a4\u7ebf\u6027\u57fa\u7684\u505a\u6cd5\u3002\u524d\u8005\u662f\u9884\u5904\u7406 2log \u8be2\u95ee 3log\uff0c\u540e\u8005\u662f\u9884\u5904\u7406 3log \u8be2\u95ee 2log \u90fd\u8fc7\u4e0d\u4e86\u3002\u5b83\u660e\u663e 2log \u90fd\u4e0d\u60f3\u8ba9\u4f60\u8fc7\u4e86\u3002\u8003\u8651\u53d1\u660e\u4e00\u4e2a 1log \u7684\u505a\u6cd5\u3002\n\n\u8003\u8651\u628a\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\uff0c\u6309\u7167 $r$ \u5206\u7c7b\uff0c\u626b\u63cf\u7ebf\uff0c\u65f6\u523b\u7ef4\u62a4\u5bf9\u6bcf\u4e2a $l$ \u7684 $[l,r]$ \u7ebf\u6027\u57fa\u3002\n\n\u7ebf\u6027\u57fa\u6709\u4e2a\u8ddf gcd \u5f88\u76f8\u4f3c\u7684\u6982\u5ff5\uff1a\u4ece\u4e00\u5904\u5f80\u53f3\u6269\u5c55\uff0c\u76f8\u7b49\u6bb5\u7684\u6570\u91cf\u662f log \u7684\u3002\u539f\u7406\u4e5f\u8ddf gcd \u5dee\u4e0d\u591a\uff0c\u4e00\u5f00\u59cb\u7ebf\u6027\u57fa\u5927\u5c0f\u4e3a $0$\uff0c\u5f80\u53f3\u79fb\u4e00\u683c\u5c31\u53ef\u80fd\u52a0\u4e00\u6216\u8005\u5927\u5c0f\u4e0d\u53d8\u3002\u5927\u5c0f\u4e0d\u53d8\u8bf4\u660e\u6ca1\u63d2\u8fdb\u53bb\uff0c\u90a3\u5c31\u6574\u4e2a\u90fd\u6ca1\u53d8\u4e86\u3002\n\n\u90a3\u5c31\u65f6\u523b\u7ef4\u62a4\u5bf9\u5f53\u524d $r$ \u7684\u5173\u4e8e $l$ \u7684 log \u4e2a\u7ebf\u6027\u57fa\u76f8\u7b49\u6bb5\u3002\u8003\u8651 $r$ \u53f3\u79fb\u4e00\u4f4d\u7684\u66f4\u65b0\uff1f\u65b0\u52a0\u4e00\u4e2a $([r,r],\\varnothing)$ \u76f8\u7b49\u6bb5\uff0c\u7136\u540e\u628a $a_r$ \u63d2\u8fdb\u524d\u9762 log \u4e2a\u76f8\u7b49\u6bb5\u3002\u6211\u4eec\u9700\u8981\u5408\u5e76\u65b0\u7684\u5927\u5c0f\u76f8\u540c\u7684\u7ebf\u6027\u57fa\u7684\u76f8\u7b49\u6bb5\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u4ee5\u540e\u4e00\u76f4\u90fd\u662f log \u6bb5\u3002\u4f46\u662f\u8981\u77e5\u9053\u4e00\u4e2a\u96c6\u5408\u7684\u7ebf\u6027\u57fa\uff08\u4ec5\u5316\u4e3a\u9636\u68af\u578b\uff09\u4e0e\u63d2\u5165\u987a\u5e8f\u6709\u5173\u3002\u800c\u4e0a\u8ff0\u64cd\u4f5c\u663e\u7136\u90fd\u662f\u4ece\u5de6\u5f80\u53f3\u63d2\u5165\u7684\uff0c\u800c\u53ea\u6709\u4ece\u53f3\u5f80\u5de6\u63d2\u5165\u624d\u80fd\u4fdd\u8bc1\u5927\u5c0f\u76f8\u540c\u7684\u7ebf\u6027\u57fa\u76f8\u540c\u3002\u4f46\u5176\u5b9e\u4e00\u70b9\u5173\u7cfb\u90fd\u6ca1\u6709\uff0c\u56e0\u4e3a\u751f\u6210\u7a7a\u95f4\u76f8\u7b49\u2026\u2026\u6839\u636e\u7684\u662f\u4e00\u4e2a\uff08\u6709\u9650\u7ef4\uff09\u7ebf\u6027\u7a7a\u95f4\u7684\u7b49\u7ef4\u5b50\u7a7a\u95f4\u53ea\u6709\u672c\u8eab\u3002\u90a3\u5c31\u968f\u4fbf\u9009\u4e00\u4e2a\u7ebf\u6027\u57fa\u5c31\u597d\u5566\u3002\n\n\u90a3\u8fd9\u6837\u662f 2log \u7684\uff0c\u74f6\u9888\u5728\u4e8e\u6bcf\u6b21\u90fd\u8981\u8bd5\u56fe\u63d2\u5165 log \u6b21\u3002\u5176\u5b9e\u5bf9\u56fa\u5b9a\u7684 $r$\uff0c\u63d2\u5165\u7684\u6210\u529f\u6027\u662f\u5355\u8c03\u7684\uff0c\u5fc5\u5b9a\u662f\u8fde\u7eed\u6bb5\u5e8f\u5217\u7684\u4e00\u4e2a\u540e\u7f00\u3002\u90a3\u5982\u679c\u5230\u7b2c\u4e00\u4e2a\u5931\u8d25\u5c31 `break`\uff0c\u90a3\u5176\u5b9e\u6210\u529f\u63d2\u5165\u7684\u590d\u6742\u5ea6\u53ef\u4ee5\u7531\u52bf\u80fd\u652f\u4ed8\u6389\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u6700\u591a\u63d2\u5165\u6210\u529f\uff08\u5927\u5c0f\u589e\u52a0\uff09log \u6b21\uff0c\u90a3\u4e48\u603b\u5171 2log\uff0c\u4e00\u6b21\u63d2\u5165 log\uff0c\u603b\u590d\u6742\u5ea6\u5c31\u662f 3log\uff0c\u524d\u9762\u4e0d\u4e58\u4ee5 $n$\u200b \u76f8\u5f53\u4e8e\u5e38\u6570\u3002\u800c\u6bcf\u4e2a\u4f4d\u7f6e\u53ea\u4f1a\u5931\u8d25\u4e00\u6b21\uff0c\u6240\u4ee5\u603b\u590d\u6742\u5ea6 1log\u3002\u8fd9\u6837\u4e00\u6765\u5408\u5e76\u4e5f\u4e0d\u7528\u5199\u7684\u90a3\u4e48\u7cbe\u7ec6\uff0c\u56e0\u4e3a\u5408\u5e76\u6b21\u6570\u4e5f\u80fd\u7531\u52bf\u80fd\u652f\u4ed8\u6389\uff0c\u968f\u4fbf\u66b4\u529b\u679a\u4e3e\u53ef\u5408\u5e76\u76f8\u90bb\u5bf9\u5c31\u884c\u4e86 `vector` \u7684 `erase` \u4e5f\u968f\u4fbf\u7528\uff0c\u4e0d\u7528\u7ba1\u90a3\u4e48\u591a\u3002\n\n~~\uff08\u4f46\u662f\u597d\u50cf\u8dd1\u5f97\u5f88\u6162\uff0c\u6211\u597d\u83dc\u554a\uff09~~\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define pb push_back\n#define mp make_pair\n#define X first\n#define Y second\nconst int N=500010;\nint n,qu;\nint a[N];\nvector<pair<int,int> > qry[N];\nstruct base{\n\tint sz,b[30];\n\tbase(){sz=0;memset(b,0,sizeof(b));}\n\tvoid insert(int x){\n\t\tfor(int i=20;~i;i--)if(x>>i&1)\n\t\t\tif(b[i])x^=b[i];\n\t\t\telse{sz++,b[i]=x;break;}\n\t}\n\tint ask(){\n\t\tint res=0;\n\t\tfor(int i=20;~i;i--)if(!(res>>i&1))res^=b[i];\n\t\treturn res;\n\t}\n};\nvector<pair<pair<int,int>,base> > v;\nint ans[N];\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",a+i);\n\tcin>>qu;\n\tfor(int i=1;i<=qu;i++){\n\t\tint l,r;\n\t\tscanf(\"%d%d\",&l,&r);\n\t\tqry[r].pb(mp(l,i));\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tv.pb(mp(mp(i,i),base()));\n\t\tfor(int j=v.size()-1;~j;j--){\n\t\t\tint sz=v[j].Y.sz;\n\t\t\tv[j].Y.insert(a[i]);\n\t\t\tif(v[j].Y.sz==sz)break;\n\t\t}\n\t\twhile(true){\n\t\t\tbool flg=false;\n\t\t\tfor(int j=0;j+1<v.size();j++)if(v[j].Y.sz==v[j+1].Y.sz){\n\t\t\t\tflg=true;\n\t\t\t\tint r=v[j+1].X.Y;\n\t\t\t\tv.erase(v.begin()+j+1);\n\t\t\t\tv[j].X.Y=r;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(!flg)break;\n\t\t}\n\t\tfor(int j=0;j<qry[i].size();j++)for(int k=0;k<v.size();k++)\n\t\t\tif(v[k].X.X<=qry[i][j].X&&qry[i][j].X<=v[k].X.Y)ans[qry[i][j].Y]=v[k].Y.ask();\n\t}\n\tfor(int i=1;i<=qu;i++)printf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1628776806,
        "uid": 138400,
        "name": "chenxia25",
        "ccfLevel": 9,
        "title": "cf1100F"
    },
    {
        "content": "[CF1100F Ivan and Burgers](https://www.luogu.com.cn/problem/CF1100F)\u89e3\u9898\u62a5\u544a\uff1a\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://zybuluo.com/xiaoziyao/note/1751553)\n\n## \u9898\u610f\n- \u7ed9\u5b9a\u957f\u5ea6\u4e3a$n$\u7684\u5e8f\u5217$c$\uff0c$q$\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u6c42$l$\u5230$r$\u9009\u53d6\u4efb\u610f\u4e2a\u6570\u5f02\u6216\u548c\u6700\u5927\u662f\u591a\u5c11\u3002\n- \u6570\u636e\u8303\u56f4\uff1a$1\\leqslant n,m\\leqslant 5\\times 10^5,1\\leqslant c_i\\leqslant 10^6$\u3002\n\n## \u5206\u6790\n\u8fd9\u9053\u9898\u7684\u6d4b\u8bd5\u70b9\u6570\u662f\u771f\u7684\u591a\u3002\u3002\u3002\n\n\u4e00\u9053[\u732b\u6811\u5206\u6cbb](https://immortalco.blog.uoj.ac/blog/2102)+\u7ebf\u6027\u57fa\u9898\u3002\n\n\u732b\u6811\u5206\u6cbb\u7684\u64cd\u4f5c\uff1a\u4ece\u533a\u95f4$[l,r]$\u4e2d\u9009\u4e00\u4e2a\u5206\u6cbb\u4e2d\u70b9$mid$\uff0c\u9884\u5904\u7406$[l,mid]$\u7684\u4fe1\u606f\uff0c\u9884\u5904\u7406$[mid,r]$\u7684\u4fe1\u606f\uff0c\u7136\u540e\u5bf9\u6240\u6709\u8de8\u8d8a\u4e86$mid$\u7684\u8be2\u95ee\u5feb\u901f\u5408\u5e76\uff0c\u4e0d\u7ecf\u8fc7$mid$\u76f4\u63a5\u5411\u5b50\u533a\u95f4\u5206\u6cbb\u3002\n\n\u8fd9\u9053\u9898\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u628a\u8be2\u95ee\u79bb\u7ebf\uff0c\u7136\u540e\u4e0a\u732b\u6811\u5206\u6cbb\u3002\n\n\u5177\u4f53\u5730\uff0c\u6211\u4eec\u7528$O(\\log c)$\u7684\u66b4\u529b\u9884\u5904\u7406$[a,mid]$\u548c$[mid,b]$\u7684\u7ebf\u6027\u57fa\uff08\u5176\u4e2d$a\\in[l,mid],b\\in[mid,r]$\uff09\uff0c\u7136\u540e\u5728\u5408\u5e76\u7684\u65f6\u5019\u7528$O(\\log^2 c)$\u7684\u66b4\u529b\u5408\u5e76\u8de8\u8d8a$mid$\u7684\u4e24\u4e2a\u7ebf\u6027\u57fa\u3002\n\n\u603b\u590d\u6742\u5ea6\uff1a$O(n\\cdot\\log n\\cdot \\log c+q\\cdot\\log^2 c)$\u3002\n\n## \u4ee3\u7801\n```\n#include<stdio.h>\nconst int maxn=500005,maxm=500005,maxk=31;\nint n,m;\nint a[maxn],ans[maxm];\nstruct question{//\u8be2\u95ee\n\tint l,r,id;\n}q[maxm],tmp1[maxm],tmp2[maxm];\nstruct base{//\u7ebf\u6027\u57fa\n\tint p[maxk];\n\tvoid clear(){\n\t\tfor(int i=0;i<maxk;i++)\n\t\t\tp[i]=0; \n\t}\n}b[maxn];\nvoid insert(base &now,int x){//\u7ebf\u6027\u57fa\u63d2\u5165\n\tfor(int i=30;i>=0;i--){\n\t\tif(((x>>i)&1)==0)\n\t\t\tcontinue;\n\t\tif(now.p[i]==0){\n\t\t\tnow.p[i]=x;\n\t\t\treturn ;\n\t\t}\n\t\tx^=now.p[i];\n\t}\n}\nbase merge(base a,base b){//\u7ebf\u6027\u57fa\u5408\u5e76\n\tfor(int i=0;i<=30;i++)\n\t\tif(b.p[i])\n\t\t\tinsert(a,b.p[i]);\n\treturn a;\n}\nint getmax(base x){//\u7ebf\u6027\u57fa\u6c42\u5f02\u6216\u6700\u5927\u503c\n\tint res=0;\n\tfor(int i=30;i>=0;i--)\n\t\tif((res^x.p[i])>res)\n\t\t\tres^=x.p[i];\n\treturn res;\n}\nvoid solve(int l,int r,int ql,int qr){//\u732b\u6811\u5206\u6cbb\n\tif(ql>qr)\n\t\treturn ;\n\tif(l==r){\n\t\tfor(int i=ql;i<=qr;i++)\n\t\t\tans[q[i].id]=a[l];\n\t\treturn ;\n\t}\n\tint mid=(l+r)>>1,cnt1=0,cnt2=0;\n\tb[mid].clear(),insert(b[mid],a[mid]);\n\tfor(int i=mid-1;i>=l;i--)\n\t\tb[i]=b[i+1],insert(b[i],a[i]);\n\tfor(int i=mid+1;i<=r;i++)\n\t\tb[i]=b[i-1],insert(b[i],a[i]);\n\tfor(int i=ql;i<=qr;i++){//\u5408\u5e76\u5de6\u53f3\u9884\u5904\u7406\u8fc7\u7684\u7ebf\u6027\u57fa\n\t\tif(l<=q[i].l&&q[i].l<=mid&&mid+1<=q[i].r&&q[i].r<=r){\n\t\t\tans[q[i].id]=getmax(merge(b[q[i].l],b[q[i].r]));\n\t\t\tcontinue;\n\t\t}\n\t\tif(q[i].l<=mid&&q[i].r<=mid)\n\t\t\ttmp1[++cnt1]=q[i];\n\t\telse tmp2[++cnt2]=q[i];\n\t}\n\tfor(int i=1;i<=cnt1;i++)\n\t\tq[ql+i-1]=tmp1[i];\n\tfor(int i=1;i<=cnt2;i++)\n\t\tq[ql+cnt1+i-1]=tmp2[i];\n\tsolve(l,mid,ql,ql+cnt1-1),solve(mid+1,r,ql+cnt1,ql+cnt1+cnt2-1);//\u5206\u6cbb\u89e3\u51b3\u5b50\u95ee\u9898\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tscanf(\"%d\",&m);\n\tfor(int i=1;i<=m;i++){\n\t\tscanf(\"%d%d\",&q[i].l,&q[i].r);\n\t\tq[i].id=i;\n\t}\n\tsolve(1,n,1,m);\n\tfor(int i=1;i<=m;i++)\n\t\tprintf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1603626571,
        "uid": 35754,
        "name": "Verdandi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    },
    {
        "content": "\u7ed9\u51fa\u4e00\u4e2a\u57fa\u4e8e\u524d\u7f00\u7ebf\u6027\u57fa\u548c\u7ebf\u6bb5\u6811\u7684\u505a\u6cd5\uff08\u79bb\u7ebf\uff09\n\n\u9996\u5148\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u7ebf\u6027\u57fa\u5408\u5e76\u7684\u590d\u6742\u5ea6log^2n,\u8fd9\u91cc\u590d\u6742\u5ea6\u6ca1\u6709\u5f88\u597d\u7684\u4f18\u5316\u7a7a\u95f4\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8003\u8651\u80fd\u4e0d\u80fd\u4f18\u5316\u4e00\u4e0b\u51cf\u5c11\u5408\u5e76\u6b21\u6570\u3002\u8003\u8651\u7ebf\u6bb5\u6811\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u5230\u6bcf\u4e00\u4e2a\u975e\u53f6\u8282\u70b9\u4e00\u5b9a\u4f1a\u5728\u67d0\u4e2a\u8282\u70b9\u88ab\u5206\u5272\u4e3a\u5f53\u524d\u8282\u70b9\u7684mid\u7684\u524d\u540e\u7f00\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u8fc7\u5148\u628a\u6240\u6709\u7684\u8be2\u95ee\u7684\u5206\u89e3\uff0cL==R\u7684\u8be2\u95ee\u76f4\u63a5\u56de\u7b54\uff0cdfs\u7ebf\u6bb5\u6811\u5bf9\u6bcf\u4e2a\u8282\u70b9\u505a\u524d\u540e\u7f00\u7ebf\u6027\u57fa\uff0c\u7136\u540e\u53ea\u7528\u4e00\u6b21\u5408\u5e76\u5c31\u53ef\u4ee5\u79bb\u7ebf\u56de\u7b54\u8be2\u95ee\uff08\u53ef\u4ee5\u5728\u7ebf\uff0c\u4f46\u662f\u7a7a\u95f4\u80af\u5b9a\u4e0d\u591f\uff09\u3002\n\n\u5177\u4f53\u7ec6\u8282\u770b\u4ee3\u7801\u3002\n\n\nAC\u4ee3\u7801\uff1a\u590d\u6742\u5ea6O((n+q)*log^2n)\uff08CF\u7684\u8bc4\u6d4b\u673a\u662f\u771f\u7684\u5feb\u3002\u3002\u3002n=q=500000\u800c\u4e14\u5b8c\u5168\u8dd1\u6ee1\u590d\u6742\u5ea6\u7684\u4ee3\u7801  \u6700\u5927\u7684case\u8dd1\u5b8c\u53ea\u7528\u4e861.1s\uff09\n\n\n\n```cpp\n\nconst int sigma = 20;\nstruct Base\n{\n\tarray<int, sigma + 1> d;\n\tint base = 1, cntp;\n\tint addtag;\n\tBase()\n\t{\n\t\taddtag = 1;\n\t\td.fill(0);\n\t}\n\tvoid add(int x)\n\t{\n\t\tfor (int i = sigma; i >= 0; i--)\n\t\t{\n\t\t\tif (x&(base << i))\n\t\t\t{\n\t\t\t\tif (d[i])\n\t\t\t\t\tx ^= d[i];\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\td[i] = x;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\taddtag = 0;\n\t}\n\tint MAX()\n\t{\n\t\tint anss = 0;\n\t\tfor (int i = sigma; i >= 0; i--)\n\t\t\tif ((anss^d[i]) > anss)anss ^= d[i];\n\t\treturn anss;\n\t}\n};\narray<int, 510000> arr, ans;\nstruct node2\n{\n\tnode2 *L, *R;\n\tint l, r;\n\tlist<tuple<int, int, int>> query;\n};\nnode2 *root;\nvoid build_root(int L, int R)\n{\n\troot = new node2();\n\troot->l = L, root->r = R;\n}\nvoid pl(node2 *a)\n{\n\tif ((a->L != NULL) || (a->l == a->r))\n\t\treturn;\n\tint mid = (a->l + a->r) / 2;\n\ta->L = new node2();\n\ta->L->l = a->l, a->L->r = mid;\n}\nvoid pr(node2 *a)\n{\n\tif ((a->R != NULL) || (a->l == a->r))\n\t\treturn;\n\tint mid = (a->l + a->r) / 2;\n\ta->R = new node2();\n\ta->R->l = mid + 1, a->R->r = a->r;\n}\nvoid update(node2 *p)\n{\n\tif (p->l == p->r)\n\t\treturn;\n}\nint kk, vall;\nvoid build(node2 *x)\n{\n\tpl(x), pr(x);\n\tif (x->l == x->r)\n\t{\n\t\treturn;\n\t}\n\telse\n\t\tbuild(x->L), build(x->R);\n\tupdate(x);\n}\nint se1;\nnode2 *segment[50];\nvoid split(node2 *p, int l, int r, int k)\n{\n\tint mid = (p->l + p->r) / 2;\n\tif (l <= mid && r > mid)\n\t{\n\t\tp->query.push_back({ l,r,k });\n\t}\n\telse if (r <= mid)\n\t\tsplit(p->L, l, r, k);\n\telse if (l >= mid + 1)\n\t\tsplit(p->R, l, r, k);\n}\nBase b[510000], b2;\nvoid dfs(node2 *p2)\n{\n\tif (p2->l == p2->r)\n\t\treturn;\n\tint mid = (p2->l + p2->r) / 2;\n\tb[mid].d.fill(0);\n\tb[mid].add(arr[mid]);\n\tb[mid + 1].d.fill(0);\n\tb[mid + 1].add(arr[mid + 1]);\n\tfor (int i = mid - 1; i >= p2->l; --i)\n\t{\n\t\tb[i].d = b[i + 1].d;\n\t\tb[i].add(arr[i]);\n\t}\n\tfor (int i = mid + 2; i <= p2->r; ++i)\n\t{\n\t\tb[i].d = b[i - 1].d;\n\t\tb[i].add(arr[i]);\n\t}\n\twhile (!p2->query.empty())\n\t{\n\t\tauto it = p2->query.back();\n\t\tp2->query.pop_back();\n\t\tb2.d = b[get<0>(it)].d;\n\t\tfor (int i = sigma; i >= 0; --i)\n\t\t\tb2.add(b[get<1>(it)].d[i]);\n\t\tans[get<2>(it)] = b2.MAX();\n\t}\n\tdfs(p2->L), dfs(p2->R);\n}\nint32_t main()\n{\n\tint n, m, val, l, r;\n\tio >> n;\n\tbuild_root(1, n);\n\tbuild(root);\n\tfor (int i = 1; i <= n; ++i)\n\t\tio >> arr[i];\n\tio >> m;\n\tfor (int i = 1; i <= m; ++i)\n\t{\n\t\tio >> l >> r;\n\t\tif (l != r)\n\t\t\tsplit(root, l, r, i);\n\t\telse\n\t\t\tans[i] = arr[l];\n\t}\n\tdfs(root);\n\tfor (int i = 1; i <= m; ++i)\n\t\tio << ans[i] << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1565700570,
        "uid": 154957,
        "name": "qiyue7",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1100F \u3010Ivan and Burgers\u3011"
    }
]
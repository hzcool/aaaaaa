[
    {
        "content": "\u5148\u6c42\u51fa$1$\u5230\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\n\n\u7136\u540edfs\u641c\u4e00\u904d\u5373\u53ef\n\n\u5177\u4f53\u89c1\u4ee3\u7801\n\n```cpp\nint n, m;\nvector<int> edge[N];\nint dis[N], book[N], vis[N], f[N];\ninline void bfs() {\n\tqueue<int> q;\n\tq.push(1); book[1] = 1; dis[1] = 0;\n\twhile(!q.empty()) {\n\t\tint x = q.front();\n\t\tq.pop();\n\t\tfor(auto y : edge[x]) {\n\t\t\tif(!book[y]) {\n\t\t\t\tbook[y] = 1;\n\t\t\t\tdis[y] = dis[x] + 1;\n\t\t\t\tq.push(y); \n\t\t\t}\n\t\t}\n\t} \n}\n\ninline void dfs(int x) {\n\tvis[x] = 1;\n\tf[x] = dis[x];\n\tfor(auto y : edge[x]) {\n\t\tif(!vis[y] && dis[x] < dis[y])\n\t\t\tdfs(y);\n\t\tif(dis[x] < dis[y]) f[x] = min(f[x], f[y]);//\u82e5dis[x] < dis[y],\u90a3\u4e48x\u7684\u7b54\u6848\u53ef\u4ee5\u88aby\u66f4\u65b0\n\t\telse f[x] = min(f[x], dis[y]);//\u5426\u5219\u53ea\u80fd\n\u7528\u4e00\u6b21\u9b54\u6cd5\uff08\uff1f\uff09\t} \n}\n\ninline void solve() {\n\tread(n); read(m);\n\tfor(int i = 1; i <= n; i++) {\n\t\tedge[i].clear();\n\t\tbook[i] = dis[i] = vis[i] = f[i] = 0;\n\t}//\u591a\u6d4b\u6e05\u96f6\n\tfor(int i = 1, x, y; i <= m; i++) {\n\t\tread(x); read(y);\n\t\tedge[x].push_back(y); \n\t}\n\tbfs();//\u5148\u6c421\u81f3\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\n\tdfs(1);\n\tfor(int i = 1; i <= n; i++) writesn(f[i]);\n\tputs(\"\");\n}\n```",
        "postTime": 1611558478,
        "uid": 103023,
        "name": "AvA_sleeper",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1472G \u3010Moving to the Capital\u3011"
    },
    {
        "content": "# CF1472G\n\n[CF\u4f20\u9001\u95e8](http://codeforces.com/problemset/problem/1472/G)\n\n[\u6d1b\u8c37\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1472G)\n\n## $QuestionMeaning$\n\n\u6709\u4e00\u4e2a\u7531$n$\u4e2a\u7ed3\u70b9\u7ec4\u6210\u7684\u6709\u5411\u56fe\u3002\u4e00\u4e9b\u7ed3\u70b9\u7531\u8fb9\u957f\u4e3a$1$\u7684\u6709\u5411\u8fb9\u76f8\u8fde\u3002\n\u5df2\u77e5\u4e00\u4e2a\u6570\u7ec4$d_{1 \\sim n}$\uff0c\u5176\u4e2d d_i \u4e3a\u4ece\u7f16\u53f7\u4e3a$1$\u7684\u7ed3\u70b9\u5230\u7f16\u53f7\u4e3a$i$\u7684\u7ed3\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\u3002 \u4f60\u7ad9\u5728\u7b2c$s$\u4e2a\u8282\u70b9\u4e0a\u3002\u4f60\u6709\u4ee5\u4e0b\u51e0\u79cd\u9009\u62e9\uff1a\n\n\u6cbf\u7740\u67d0\u6761\u8fb9\uff0c\u4ece\u7b2c$i$\u4e2a\u7ed3\u70b9\u5230\u7b2c$j$\u4e2a\u7ed3\u70b9\uff0c$d_i<d_j$\uff1b\n\u6cbf\u7740\u67d0\u6761\u8fb9\uff0c\u4ece\u7b2c$i$\u4e2a\u7ed3\u70b9\u5230\u7b2c$j$\u4e2a\u7ed3\u70b9\uff0c$d_i\\geq d_j$\uff1b\uff08\u6bcf\u5c40\u6700\u591a\u53ea\u80fd\u8d70\u4e00\u6b21\uff09\n\n\u4f60\u7684\u76ee\u6807\u662f\uff1a\u9760\u8fd1\u7f16\u53f7\u4e3a$1$\u7684\u70b9\u3002\uff08\u51c6\u786e\u5730\u8bf4\uff0c\u662f\u627e\u5230\u4ece\u4efb\u610f\u4e00\u4e2a\u7ed3\u70b9\u51fa\u53d1\u5230\u7b2c$1$\u4e2a\u7ed3\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\uff09\n\n## $Solution$\n\n\u8003\u8651\u6700\u77ed\u8def\uff1a\n\n\u8bbe$d_i$\u662f\u7f16\u53f7\u4e3a$i$\u7684\u70b9\u5230$1$\u7684\u70b9\u7684\u8ddd\u79bb\u3002\n\n\u5219$d_i<d_j$\u5c31\u662f\u5411\u524d\u8d70\u4e00\u4e2a\u70b9\uff0c$d_i \\geq d_j$\u5c31\u662f\u5411\u56de\u8d70\u4e00\u4e2a\u70b9\u3002\u90a3\u4e48\u53d1\u73b0\uff0c\u8fd9\u4e2a\u5f80\u56de\u8d70\u7684\u8fd9\u4e00\u6b65\u80af\u5b9a\u662f\u6700\u540e\u518d\u5411\u56de\u8d70\u3002\n\n\u6c42\u4e00\u904d\u6700\u77ed\u8def\u7136\u540e\u52a0\u4e0a\u7279\u6b8a\u5904\u7406\u5373\u53ef\uff0c\u5177\u4f53\u8fc7\u7a0b\u89c1\u4ee3\u7801\u3002\n\n## $Code$\n```\n# include <iostream>\n# include <vector>\n\nusing namespace std;\n\nconst int kMaxN = 2e5 + 1;\n\nstruct V {\n  int ans, d;\n  vector<int> e;\n} v[kMaxN];\n\nint t, n, m;\nint q[kMaxN] = {1};\n\nvoid solve() {\n  cin >> n >> m;\n  fill(v + 1, v + 1 + n, v[0]);\n  for (int i = 1, x, y; i <= m; i++) {\n    cin >> x >> y;\n    v[x].e.push_back(y);\n  }\n  v[1].d = v[1].ans = 1;\n  for (int h = 0, t = 0; h <= t; h++) {\n    int top = q[h];\n    for (int to : v[top].e) {\n      if (!v[to].d) {\n        v[to].d = v[top].d + 1;\n        q[++t] = to;\n      }\n    }\n  }\n  for (int i = n; i >= 1; i--) {\n    int id = q[i];\n    v[id].ans = v[id].d;\n    for (int to : v[id].e) {\n      v[id].ans = min(v[id].ans, (v[to].d <= v[id].d ? v[to].d : v[to].ans));\n    }\n  }\n  for (int i = 1; i <= n; i++) {\n    cout << v[i].ans - 1 << \" \";\n  }\n  cout << endl;\n}\n\nint main() {\n  cin >> t;\n  while (t--) {\n    solve();\n  }\n  return 0;\n}\n```",
        "postTime": 1611476860,
        "uid": 369251,
        "name": "\u80d6\u5934\u9c7c\u5b66\u5458",
        "ccfLevel": 5,
        "title": "CF1472G"
    },
    {
        "content": "## CF1472G Moving to the Capital\n\u9898\u76ee\u94fe\u63a5:[CF1472G Moving to the Capital](https://www.luogu.com.cn/problem/CF1472G)\n\n\u9898\u76ee\u5927\u610f:emmm\uff0c\u597d\u957f\u597d\u957f\uff0c\u81ea\u5df1\u770b\u7ffb\u8bd1\u3002\n\n\u9898\u89e3:\u5f88\u663e\u7136\u8981\u5148\u6c42\u51fa$d$\u6570\u7ec4\uff0c\u7136\u540e\u6211\u4eec\u5904\u7406\u6700\u5927\u4f7f\u7528\u4e00\u6b21\u7684\u53cd\u8fb9\uff0c\u5176\u5b9e\u5c31\u662f\u4e0d\u7ba1$d[i]$\u548c$d[to]$\u7684\u5927\u5c0f\uff0c\u6211\u4eec\u76f4\u63a5\u8fdb\u884c\u8f6c\u79fb\u3002\u6700\u540e\u6211\u4eec\u6765\u5904\u7406\u6bcf\u4e00\u4e2a\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u6700\u4f18\u70b9\u3002\n\nAC\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n\n#define ld long double\n#define ll long long\nusing namespace std;\ntemplate<class T>\nvoid read(T& x)\n{\n\tT res = 0, f = 1; char c = getchar();\n\twhile (!isdigit(c)) {\n\t\tif (c == '-')f = -1; c = getchar();\n\t}\n\twhile (isdigit(c)) {\n\t\tres = (res << 3) + (res << 1) + c - '0'; c = getchar();\n\t}\n\tx = res * f;\n}\nconst ll N = 200000 + 10;\nconst int mod = 1e9 + 7;\nint t, n, m,d[N],ans[N];\nvector<int>p[N];\nbool vis[N];\nvoid bfs(int u)\n{\n\tqueue<int>pls;\n\tpls.push(u);\n\t\n\td[u] = 0; vis[u] = 1;\n\twhile (pls.size())\n\t{\n\t\tint f = pls.front(); pls.pop(); vis[f] = 0;\n\t\tfor (auto to : p[f])\n\t\t{\n\t\t\tif (d[to] > d[f] + 1)\n\t\t\t{\n\t\t\t\td[to] = d[f] + 1;\n\t\t\t\tif (!vis[to])\n\t\t\t\t{\n\t\t\t\t\tpls.push(to);\n\t\t\t\t\tvis[to] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\nvoid dfs(int u)\n{\n\tvis[u] = 1;\n\tfor (auto to : p[u])\n\t{\n\t\tif (d[to] <=d[u])continue;\n\t\tif(!vis[to])dfs(to);\n\t\tans[u] = min(ans[u], ans[to]);\n\t}\n}\nint main()\n{\n\t//ios::sync_with_stdio(false);\n#ifndef ONLINE_JUDGE\n\tfreopen(\"test.in\", \"r\", stdin);\n#endif // ONLINE_JUDGE\n\tread(t);\n\twhile (t--)\n\t{\n\t\tread(n); read(m);\n\t\tfor (int i = 1; i <= n; i++)p[i].clear();\n\t\tfor (int i = 1; i <= n; i++)d[i] = 0x3f3f3f3f,ans[i]=d[i],vis[i]=0;\n\t\tfor (int i = 1; i <= m; i++)\n\t\t{\n\t\t\tint x, y; read(x), read(y); p[x].push_back(y);\n\t\t}\n\t\tbfs(1);\n\t\tfor (int i = 1; i <= n; i++)\n\t\t{\n\t\t\tans[i] = d[i];\n\t\t\tfor (auto to : p[i])\n\t\t\t{\n\t\t\t\tans[i] = min(ans[i], d[to]);\n\t\t\t}\n\t\t}\n\t\tdfs(1);\n\t\tfor (int i = 1; i <= n; i++)printf(\"%d \", ans[i]);\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1612079898,
        "uid": 244468,
        "name": "lin_rany",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1472G \u3010Moving to the Capital\u3011"
    },
    {
        "content": "~~\u6211\u592a\u83dc\u4e86\u8fd9\u7ffb\u8bd1\u770b\u4e0d\u61c2\u3002~~\n\n\u7b2c\u4e00\u6b65\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u9700\u8981\u6c42\u4e00\u4e2a $d$ \u6570\u7ec4\uff0c$d_i$ \u8868\u793a $1$ \u53f7\u70b9\u5230 $i$ \u53f7\u70b9\u7684\u6700\u77ed\u8def\uff0c\u5e94\u8be5\u662f\u4fdd\u8bc1\u4e86\u90fd\u53ef\u4ee5\u5230\u3002\u4e8e\u662f\u6211\u5c31 copy \u4e86\u6211\u7684\u6700\u77ed\u8def\u677f\u5b50\uff0c\u5f53\u7136\u8fb9\u6743\u90fd\u4e3a\u4e00\u53ef\u4ee5\u8dd1 bfs\u3002\n\n\u4e24\u79cd\u79fb\u52a8\u65b9\u6cd5\u6ca1\u6709\u95ee\u9898\uff0c\u95ee\u6bcf\u4e00\u4e2a\u70b9\u80fd\u591f\u5230\u8fbe\u7684 $d_i$ \u6700\u5c0f\u7684 $i$\u3002\n\n\u9996\u5148 $1$ \u53f7\u8282\u70b9\u662f $0$\uff0c\u4efb\u4f55\u70b9\u60f3\u8981\u5230 $1$ \u5fc5\u987b\u7528\u4e00\u6b21\u7b2c\u4e8c\u79cd\u8d70\u6cd5\u3002\u6700\u7ec8\u6bcf\u4e2a\u70b9\u7ecf\u8fc7\u7684 $d$ \u7684\u5e8f\u5217\u9664\u4e86\u6700\u540e\u4e00\u4e2a\u4e00\u5b9a\u662f\u5355\u8c03\u9012\u589e\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7528 dfs\uff0c\u6bcf\u6b21\u6bd4\u8f83\u7528\u54ea\u79cd\u65b9\u5f0f\u5f80\u54ea\u8fb9\u8d70\u5373\u53ef\u3002\n\n\u55ef\uff0c\u591a\u6d4b\u8981\u6e05\u7a7a\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define R register\n#define I inline\n#define ll long long\n#define ull unsigned long long\n#define LL __int128\n#define db double\nusing namespace std;\n#define pii pair<int,int>\n#define mp(x,y) make_pair(x,y)\n#define piii pair<pair<int,int>,int>\n#define mp3(x,y,z) make_pair(make_pair(x,y),z)\n#define fi first.first\n#define se first.second\n#define th second\n#define putint(x) printf(\"%d\\n\",x)\n#define putll(x) printf(\"%lld\\n\",x)\n#define putull(x) printf(\"%llu\\n\",x)\n#define lowbit(x) ((x)&(-(x)))\n#define inf (0x7fffffff)\n#define INF (1e18)\nI int read()\n{\n\tchar ch=getchar();\n\tint res=0,flag=1;\n\twhile(ch<'0'||ch>'9')\n\t{\n\t\tif(ch=='-')\n\t\t\tflag=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tres=res*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn res*flag;\n}\nint T,n,m,head[200001],to[200001],nxt[200001],tot,x,y,dis[200001],res[200001];\nbool vis[200001];\nI void add(int x,int y)\n{\n\tto[++tot]=y;\n\tnxt[tot]=head[x];\n\thead[x]=tot;\n}\npriority_queue< pii >q;\nI void dijkstra()\n{\n\tfor(R int i=1;i<=n;++i)\n\t{\n\t\tdis[i]=0x7fffffff/3;\n\t\tvis[i]=0;\n\t}\n\tdis[1]=0;\n\tq.push(mp(0,1));\n\twhile(!q.empty())\n\t{\n\t\tx=q.top().second;\n\t\tq.pop();\n\t\tif(vis[x])\n\t\t\tcontinue;\n\t\tvis[x]=1;\n\t\tfor(R int i=head[x];i;i=nxt[i])\n\t\t{\n\t\t\ty=to[i];\n\t\t\tif(dis[y]>dis[x]+1)\n\t\t\t{\n\t\t\t\tdis[y]=dis[x]+1;\n\t\t\t\tq.push(mp(-dis[y],y));\n\t\t\t}\n\t\t}\n\t}\n}\nvoid dfs(int x)\n{\n\tvis[x]=1;\n\tres[x]=dis[x];\n\tfor(R int i=head[x];i;i=nxt[i])\n\t{\n\t\tint y=to[i];\n\t\tif((!vis[y])&&dis[x]<dis[y])\n\t\t\tdfs(y);\n\t\tif(dis[x]<dis[y])\n\t\t\tres[x]=min(res[x],res[y]);\n\t\telse\n\t\t\tres[x]=min(res[x],dis[y]);\n\t}\n}\nint main()\n{\n\tT=read();\n\twhile(T--)\n\t{\n\t\tn=read();\n\t\tm=read();\n\t\ttot=0;\n\t\tfor(R int i=1;i<=n;++i)\n\t\t\thead[i]=0;\n\t\twhile(m--)\n\t\t{\n\t\t\tx=read();\n\t\t\ty=read();\n\t\t\tadd(x,y);\n\t\t}\n\t\tdijkstra();\n\t\tfor(R int i=1;i<=n;++i)\n\t\t{\n\t\t\tvis[i]=0;\n\t\t\tres[i]=0;\n\t\t}\n\t\tdfs(1);\n\t\tfor(R int i=1;i<=n;++i)\n\t\t\tprintf(\"%d \",res[i]);\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1612073877,
        "uid": 68011,
        "name": "\u53e4\u660e\u5730_ypc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1472G \u3010Moving to the Capital\u3011"
    },
    {
        "content": "~~\u611f\u89c9\u5927\u5bb6\u90fd\u4f1a\u505a\uff0c\u5927\u5bb6\u597d\u5f3a\u554a~~\n\n\u9898\u610f\u5c31\u4e0d\u63cf\u8ff0\u4e86\u3002\n\n\u80af\u5b9a\u60f3\u5230\u8981\u4ece\u81f3\u591a\u5411\u8ddd\u79bb\u66f4\u8fd1\u6216\u76f8\u7b49\u7684\u70b9\u8d70\u4e00\u6b21\u8fd9\u4e2a\u6761\u4ef6\u5165\u624b\u3002\n\n\u5982\u679c\u4f60\u5b66\u8fc7tarjan\u5c31\u4f1a\u60f3\u5230 low \u6570\u7ec4\uff08~~\u6ca1\u5b66\u8fc7\u4e5f\u6ca1\u5173\u7cfb~~\uff09\n\n\u5728\u8fd9\u9898\u5b9a\u4e49\u4e00\u4e2a low \u6570\u7ec4\uff0c\u611f\u6027\u5730\u8bf4\uff0c\u5b83\u8868\u793a\u7684\u662f $i$ \u70b9\u80fd\u5230\u8fbe\u7684\u4e0e $1$ \u70b9\u8ddd\u79bb\u6700\u5c0f\u7684\u8fd9\u4e2a\u8ddd\u79bb\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u521d\u59cb\u5316\uff1a\n\n$low[i]=dis[i],low[i]=\\min_{edge(i,u)\\in E}(low[i],dis[u])$\uff0c\u5176\u4e2d $E$ \u4ee3\u8868\u8fb9\u96c6\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u56fe\u7684\u6240\u6709\u8fb9\u3002\n\n\u90a3\u4e48\u4e0d\u6b62\u662f\u80fd\u8d70\u53bb\u76f8\u90bb\u7684\u70b9\uff0c\u8fd8\u53ef\u4ee5\u4e00\u76f4\u5411\u66f4\u6df1\u7684\u5730\u65b9\u8d70\uff0c\u6700\u540e\u901a\u8fc7\u67d0\u4e2a\u70b9\u8d70\u5411\u8f83\u6d45\u7684\u70b9\uff0c\u4e8e\u662f\u6709\u9012\u63a8\u5f0f\uff1a\n\n$low[i]=min_{edge(i,u)\\in E\\  \\text{and}\\ dis[u]>dis[i]}(low[i],low[u])$\n\n\u90a3\u4e48\u5982\u4f55\u4fdd\u8bc1\u8f6c\u79fb\u7684\u987a\u5e8f\uff1f\n\n\u53ea\u9700\u8981\u5148\u8f6c\u79fb\u6df1\u5ea6\u6df1\u7684\u8282\u70b9\u5373\u53ef\u3002\u6211\u4eec\u4f7f\u7528 BFS \u6c42\u6700\u77ed\u8def\uff08\u56e0\u4e3a\u8fb9\u6743\u4e3a 1\uff09\uff0c\u6700\u540e\u5728\u961f\u5217\u4e2d\u7684\u8282\u70b9\uff0c\u5b83\u4eec\u7684 dis \u662f\u5355\u8c03\u4e0d\u51cf\u7684\uff0c\u5012\u5e8f\u8f6c\u79fb\u5373\u53ef\u3002\n\ncode\uff1a\n\n```cpp\n#define ri register int\n#define ll long long\n#define N 200010\nstruct node{\n    int nxt,to;\n}star[N<<1];\nint n,m,head[N],wl,dis[N],q[N],vis[N],l=0,r=-1,x,y,low[N],t,g[N],f[N][2];\nint main(){\n    t=rd();\n    while(t--){\n        n=rd(),m=rd();\n        for(ri i=1;i<=m;++i){\n            x=rd(),y=rd();\n            add(x,y);//\u52a0\u8fb9\n        }\n        q[++r]=1;for(ri i=1;i<=n;++i) dis[i]=-1;dis[1]=0;\n        while(l<=r){\n           int u=q[l++];\n           for(ri i=head[u];i;i=star[i].nxt){\n               int v=star[i].to;\n               if(dis[v]==-1) dis[v]=dis[u]+1,q[++r]=v;\n           }\n        }\n        for(ri i=n;i>=1;--i){\n            low[q[i]]=dis[q[i]];\n            for(ri j=head[q[i]];j;j=star[j].nxt){\n                int u=star[j].to;\n                if(dis[u]<=dis[q[i]]) low[q[i]]=min(low[q[i]],dis[u]);\n            }\n        }\n        for(ri i=n;i>=1;--i){\n            for(ri j=head[q[i]];j;j=star[j].nxt){\n                int u=star[j].to;\n                if(dis[u]>dis[q[i]]) low[q[i]]=min(low[q[i]],low[u]);\n            }    \n        }\n        for(ri i=1;i<=n;++i) cout<<low[i]<<\" \";cout<<endl;\n        l=0,r=-1;wl=0;\n        for(ri i=1;i<=n;++i) dis[i]=vis[i]=low[i]=head[i]=0;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1610006424,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1472G \u3010Moving to the Capital\u3011"
    }
]
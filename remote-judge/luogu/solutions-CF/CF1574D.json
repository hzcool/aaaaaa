[
    {
        "content": "~~\u83dc\u9e21 Atziluth \u8fde\u7206\u641c\u90fd\u4e0d\u4f1a\u4e86\u3002\u3002\u3002~~\n\n\u8003\u8651\u5806\u4f18\u5316 BFS\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u72b6\u6001 $(sum,\\{t_1,t_2,...,t_n\\})$\uff0c\u5176\u4e2d $sum$ \u4e3a $\\sum\\limits_{i=1}^{n}a_{i,t_i}$\uff0c\u5bf9\u4e8e $\\forall\\ 1 \\le i \\le n \\land t_i \\gt 1$\uff0c\u5b83\u80fd\u8f6c\u79fb\u5230\uff1a\n\n$$(sum-a_{i,t_i}+a_{i,t_i-1},\\{t_1,...,t_{i-1},t_i-1,t_{i+1},...,t_n\\})$$\n\n\u4e00\u4e2a\u72b6\u6001\u7684\u4f18\u5148\u7ea7\u5373\u4e3a $sum$\u3002\u68c0\u9a8c\u4e00\u4e2a\u72b6\u6001\u662f\u5426\u88ab\u7981\u6b62\u4ec5\u9700\u68c0\u6d4b\u54c8\u5e0c\u503c\u5373\u53ef\u3002\n\nCode:\n\n```cpp\n#define prpr make_pair\n#define ll long long\n#define HgSAKIOI 1\n#define il inline\nll n,c[11],m;vector<ll>v[11];\nil ll hash1(vector<ll>f)\n{\n\tll h=0;\n\tfor(int i=0;i<n;++i)h=(h*1333331+f[i])%998244353;\n\tret h;\n}\nil ll hash2(vector<ll>f)\n{\n\tll h=0;\n\tfor(int i=0;i<n;++i)h=(h*1333331+f[i])%1000000007;\n\tret h;\n}\nil ll hash0(vector<ll>f){ret hash1(f)*1000000007+hash2(f);}\nstruct node{ll id,v,d[11];il bool opr<(cst node&_)cst{ret v<_.v;}};\nmultiset<ll>s,vs;priority_queue<pair<ll,vector<ll> > >q;\nint main()\n{\n\tn=rd();ll sum=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tsum+=c[i]=rd();v[i].emplace_back(0);\n\t\tfor(int j=1;j<=c[i];++j)v[i].emplace_back(rd());\n\t}\n\tm=rd();\n\tfor(int i=1;i<=m;++i){vector<ll>tmp;for(int j=1;j<=n;++j)tmp.emplace_back(rd());s.insert(hash0(tmp));}\n\tvector<ll>tmp;for(int i=1;i<=n;++i)tmp.emplace_back(c[i]);\n\tq.push(prpr(sum,tmp));\n\twhile(HgSAKIOI)\n\t{\n\t\tauto p=q.top();q.pop();\n\t\tll h=hash0(p.second);if(vs.count(h))continue;\n\t\tvs.insert(h);\n\t\tif(s.count(h))\n\t\t{\n\t\t\tfor(int i=1;i<=n;++i)\n\t\t\t{\n\t\t\t\t--p.second[i-1];\n\t\t\t\tif(p.second[i-1])q.push(prpr(p.first-v[i][p.second[i-1]+1]+v[i][p.second[i-1]],p.second));\n\t\t\t\t++p.second[i-1];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor(int i=0;i<n;++i)prt(p.second[i],\" \\n\"[i==n-1]);\n\t\t\tbreak;\n\t\t}\n\t}\n\tret 0;\n}\n```",
        "postTime": 1632315466,
        "uid": 224991,
        "name": "Presentation_Emitter",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1574D \u3010The Strongest Build\u3011"
    },
    {
        "content": "\u53d1\u4e00\u79cd\u9634\u95f4\u505a\u6cd5\u3002\n\n\u5efa\u7acb trie \u6811\uff0c\u628a\u9898\u76ee\u4e2d\u7684\u9650\u5236\u63d2\u5165\u8fdb\u53bb\uff0c\u7136\u540e\u5c31\u76f8\u5f53\u4e8e trie \u6811\u4e0a\u7684 $m$ \u6761\u94fe\u4e0d\u80fd\u9009\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u8fd9\u6837\u4e00\u4e2a\u9012\u5f52\u8fc7\u7a0b $dfs(k,dep)$ \u8868\u793a\u5f53\u524d\u5728\u8282\u70b9 $k$\uff0c\u6df1\u5ea6\u4e3a $dep$\u3002\u6709\u82e5\u5e72\u79cd\u9009\u62e9\uff0c\u5982\u679c\u4f60\u5f80\u513f\u5b50\u8d70\u76f8\u5f53\u4e8e\u6309\u7167\u9650\u5236\u8d70\uff0c\u5426\u5219\u76f8\u5f53\u4e8e\u540e\u9762\u7684\u9009\u62e9\u6ca1\u6709\u9650\u5236\u4e86\u3002\n\n\u5982\u679c\u4f60\u76f4\u63a5\u8fd9\u6837\u5199\uff0c\u590d\u6742\u5ea6\u662f\u9519\u7684\uff0c\u56e0\u4e3a\u8fd9\u6837\u5b50\u7406\u8bba\u4e0a\u590d\u6742\u5ea6\u662f $O(nm\\times 10)$\u3002\n\n\u5982\u679c\u6211\u4eec\u53ea\u5411\u4e0d\u5b58\u5728\u7684\u513f\u5b50\u4e2d\u6700\u5927\u7684\u8d70\uff0c\u663e\u7136\u6b63\u786e\u6027\u53ef\u4ee5\u4fdd\u8bc1\uff0c\u5e76\u4e14\u590d\u6742\u5ea6\u964d\u5230\u4e86 $O(m\\times 10)$\u3002\n\n\u7136\u540e\u5c31\u901a\u8fc7\u4e86\u672c\u9898\u3002\n\n```c++\n//QwQcOrZ yyds!!!\n#include<bits/stdc++.h>\n#define ll long long\n#define F(i,a,b) for (int i=(a);i<=(b);i++)\n#define R(i,a,b) for (int i=(a);i<(b);i++)\n#define D(i,a,b) for (int i=(a);i>=(b);i--)\n#define go(i,x) for (int i=head[x];i;i=e[i].nx)\n#define mp make_pair\n#define pb push_back\n#define pa pair < int,int >\n#define fi first\n#define se second\n#define re register\n#define be begin()\n#define en end()\n#define sqr(x) ((x)*(x))\n#define ret return puts(\"-1\"),0;\n#define put putchar('\\n')\n#define inf 1000000005\n#define mod 998244353\n//#define int ll\n#define N 2000005\nusing namespace std;\ninline char gc(){static char buf[100000],*p1=buf,*p2=buf;return p1==p2&&(p2=(p1=buf)+fread(buf,1,100000,stdin),p1==p2)?EOF:*p1++;}\n//#define gc getchar\ninline ll read(){char c=gc();ll su=0,f=1;for (;c<'0'||c>'9';c=gc()) if (c=='-') f=-1;for (;c>='0'&&c<='9';c=gc()) su=su*10+c-'0';return su*f;}\ninline void write(ll x){if (x<0){putchar('-');write(-x);return;}if (x>=10) write(x/10);putchar(x%10+'0');}\ninline void writesp(ll x){write(x),putchar(' ');}\ninline void writeln(ll x){write(x);putchar('\\n');}\nint n,a[15];\nvector<int>W[N];\nint m,x[15];\nint tot;\nunordered_map<int,int>son[N];\nstruct node\n{\n\tint val,p[11];\n\tvoid init() {val=0,memset(p,0,sizeof(p));}\n};\ninline void insert()\n{\n\tre int now=1;\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tif (son[now].count(x[i]))\n\t\t{\n\t\t\tnow=son[now][x[i]];\n\t\t} else\n\t\t\tson[now][x[i]]=++tot,\n\t\t\tnow=son[now][x[i]];\n\t}\n}\ninline node checkmx(node x,node y)\n{\n\tif (x.val<y.val) return y;\n\treturn x;\n}\nnode dfs(int k,int dep,int V)\n{\n\tif (!k)\n\t{\n\t\tre node g;g.init();\n\t\tfor (int i=dep+1;i<=n;i++) g.p[i]=a[i],g.val+=W[i][a[i]-1];\n\t\tg.p[dep]=V;\n\t\tg.val+=W[dep][V-1];\n\t\treturn g;\n\t}\n\tif (dep==n) \n\t{\n\t\tre node g;g.init();\n\t\treturn g;\n\t}\n\tre node g;g.init();\n\tfor (int i=a[dep+1];i>=1;i--)\n\t\tif (son[k].count(i))\n\t\t{\n\t\t\tg=checkmx(g,dfs(son[k][i],dep+1,i));\n\t\t}\n\t\telse \n\t\t{\n\t\t\tg=checkmx(g,dfs(0,dep+1,i));\n\t\t\tbreak;\n\t\t}\n\tif (k==1) return g;\n\tif (g.val==0) return g;\n\tg.p[dep]=V;\n\tg.val+=W[dep][V-1];\n\treturn g;\n}\nsigned main()\n{\n\tn=read();\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\ta[i]=read();\n\t\tfor (int j=1;j<=a[i];j++) W[i].push_back(read());\n\t}\n\tm=read();\n\ttot=1;\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tfor (int j=1;j<=n;j++)\t\n\t\t{\n\t\t\tx[j]=read();\n\t\t}\n\t\tinsert();\n\t}\n\tnode ans=dfs(1,0,0);\n\tfor (int i=1;i<=n;i++) writesp(ans.p[i]);\n}\n/*\n*/\n```",
        "postTime": 1632444292,
        "uid": 120911,
        "name": "Lynkcat",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1574D The Strongest Build"
    },
    {
        "content": "## \u89e3\u9898\u601d\u8def\n\n\u8fd9\u4e2a\u9898\u6709\u4e24\u79cd\u505a\u6cd5\uff0c\u8fd9\u91cc\u53ea\u8be6\u89e3\u4e00\u79cd\u3002\n\n\u9996\u5148\u8003\u8651\u66b4\u529b\u3002\n\n\u6211\u4eec\u627e\u51fa\u6240\u6709\u7684\u7ec4\u5408\uff0c\u54c8\u5e0c\u4e00\u4e0b\uff0c\u6309\u5927\u5c0f\u6392\u4e2a\u5e8f\uff0c\u4ece\u5927\u5230\u5c0f\u4e00\u4e2a\u4e00\u4e2a\u67e5\u8fd9\u4e2a\u7ec4\u5408\u662f\u5426\u88ab ban \u4e86\u3002\u4e00\u65e6\u67e5\u5230\u4e00\u4e2a\u7ec4\u5408\u5408\u6cd5\uff0c\u5c31\u8f93\u51fa\u8fd9\u4e2a\u7ec4\u5408\u3002\u8fd9\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u5f88\u660e\u663e\u65f6\u95f4\u590d\u6742\u5ea6\u7206\u70b8\u4e86\uff0c\u8fd9\u6837\u590d\u6742\u5ea6\u662f\u6307\u6570\u7ea7\u522b\u7684\u3002\n\n\u6211\u4eec\u8003\u8651\u4f18\u5316\u3002\u4f18\u5316\u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u51cf\u5c11\u53c2\u4e0e\u6392\u5e8f\u7684\u7ec4\u5408\u3002\n\n\u6839\u636e\u8d2a\u5fc3\uff0c\u6211\u4eec\u77e5\u9053\u5982\u679c\u8bf4\u9009\u62e9\u6bcf\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e00\u4e2a\u503c\uff0c\u4e00\u5b9a\u662f\u6700\u5927\u7684\u3002\u5982\u679c\u8fd9\u4e2a\u7ec4\u5408\u6ca1\u6709\u88ab ban\uff0c\u90a3\u4e48\u5c31\u8f93\u51fa\u3002\n\n\u6211\u4eec\u8003\u8651\u88ab ban \u4e86\u600e\u4e48\u529e\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u7b54\u6848\u7684\u5f62\u5f0f\u4e00\u5b9a\u662f\u67d0\u4e00\u4e2a\u88ab ban \u7684\u7ec4\u5408\uff0c\u8c03\u6574\u4e00\u4e2a\u53d6\u503c\u6240\u5f97\u5230\u7684\u7ec4\u5408\uff0c\u4e14\u8fd9\u4e2a\u7ec4\u5408\u6ca1\u6709\u88ab ban\u3002\u8fd9\u91cc\u7684\u8c03\u6574\u662f\u5c06\u4e00\u4e2a\u53d6\u503c\u66ff\u6362\u4e3a\u5176\u524d\u4e00\u4e2a\u6570\u3002\n\n\u4e3a\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u7b54\u6848\u662f\u8fd9\u4e2a\u5f62\u5f0f\u5462\uff1f\n\n\u5982\u679c\u8bf4\u6211\u4eec\u6700\u7ec8\u7684\u7b54\u6848\u4e8e\u662f\u67d0\u4e00\u4e2a\u7ec4\u5408\u8c03\u6574\u4e24\u6b21\u6240\u5f97\u5230\u7684\uff0c\u90a3\u4e48\u5c11\u505a\u4e00\u6b21\u8c03\u6574\uff0c\u6240\u5f97\u5230\u7684\u7684\u7b54\u6848\u4f1a\u66f4\u5927\u3002\u77db\u76fe\uff0c\u8bc1\u6bd5\u3002\n\n## \u4ee3\u7801\n\n```cpp\n//Don't act like a loser.\n//This code is written by huayucaiji\n//You can only use the code for studying or finding mistakes\n//Or,you'll be punished by Sakyamuni!!!\n#include<bits/stdc++.h>\n#define pipii pair<int,pair<int,int> >\nusing namespace std;\n\nint read() {\n\tchar ch=getchar();\n\tint f=1,x=0;\n\twhile(ch<'0'||ch>'9') {\n\t\tif(ch=='-')\n\t\t\tf=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9') {\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f*x;\n}\n\nconst int MAXN=2e5+10,b1=1e5+1,b2=3e5+3,m1=20060527,m2=21071179;\n\nint n,m,cnt=1,num;\nint tmp[11],a[11][MAXN],c[MAXN],ban[MAXN>>1][11];\nmap<pair<int,int>,bool> mp;\n\nstruct build {\n\tint ans,p[11];\n\tpair<int,int> hsh; \n}b[MAXN*5];\n\nvoid inw() {\n\tint sum=0,h1=0,h2=0;\n\tnum++;\n\tfor(int i=1;i<=n;i++) {\n\t\tsum+=a[i][tmp[i]];\n\t\tb[num].p[i]=tmp[i];\n\t\th1=(h1*b1%m1+tmp[i])%m1;\n\t\th2=(h2*b2%m2+tmp[i])%m2;\n\t}\n\tb[num].ans=sum;\n\tb[num].hsh=make_pair(h1,h2);\n}\n\nbool cmp(build a,build b) {\n\treturn a.ans>b.ans;\n}\n\nsigned main() {\n\tcin>>n;\n\tfor(int i=1;i<=n;i++) {\n\t\ttmp[i]=c[i]=read();\n\t\t\n\t\tfor(int j=1;j<=c[i];j++) {\n\t\t\ta[i][j]=read();\n\t\t}\n\t}\n\t\n\tinw();\n\t\n\tcin>>m;\n\tfor(int i=1;i<=m;i++) {\n\t\tint h1=0,h2=0;\n\t\tfor(int j=1;j<=n;j++) {\n\t\t\tban[i][j]=tmp[j]=read();\n\t\t\th1=(h1*b1%m1+tmp[j])%m1;\n\t\t\th2=(h2*b2%m2+tmp[j])%m2;\n\t\t}\n\t\tmp[make_pair(h1,h2)]=1;\n\t}\n\t\n\tfor(int i=1;i<=m;i++) {\n\t\tfor(int j=1;j<=n;j++) {\n\t\t\ttmp[j]=ban[i][j];\n\t\t}\n\t\tfor(int j=1;j<=n;j++) {\n\t\t\tif(ban[i][j]==1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttmp[j]--;\n\t\t\tinw();\n\t\t\ttmp[j]++;\n\t\t}\n\t}\n\t\n\tsort(b+1,b+num+1,cmp);\n\t\n\tfor(int i=1;i<=num;i++) {\n\t\tif(!mp[b[i].hsh]) {\n\t\t\tfor(int j=1;j<=n;j++) {\n\t\t\t\tcout<<b[i].p[j]<<\" \";\n\t\t\t}\n\t\t\tputs(\"\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn 0;\n}\n\n\n```",
        "postTime": 1632296984,
        "uid": 132976,
        "name": "huayucaiji",
        "ccfLevel": 6,
        "title": "CF1574D The Strongest Build"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u5b8c\u5168\u4e0d\u7528\u52a8\u8111\u5b50\u7684\u505a\u6cd5\u3002\n\n\u5982\u679c\u88ab ban \u7684\u5e8f\u5217\u4e0d\u5305\u62ec $\\{a_{1, c_1}, a_{2, c_2}, \\cdots, a_{n, c_n}\\}$\uff0c\u90a3\u76f4\u63a5\u8f93\u51fa\u8fd9\u4e2a\u5e8f\u5217\uff0c\u4e0d\u7136\u7684\u8bdd\u7ee7\u7eed\u4e0b\u9762\u7684\u64cd\u4f5c\u3002\n\n\u8003\u8651\u6b64\u65f6\u6700\u4f18\u89e3\u7684\u53ef\u80fd\u60c5\u51b5\uff0c\u4e0d\u96be\u53d1\u73b0\u5fc5\u7136\u662f\u88ab ban \u6389\u7684\u5e8f\u5217\u4e2d\u5c06\u67d0\u4e00\u4e2a\u5143\u7d20\u5f80\u524d\u53d6\u4e00\u4e2a\u5f97\u5230\u7684\u3002\n\n\u679a\u4e3e\u6bcf\u4e2a\u88ab ban \u7684\u5e8f\u5217 $\\{b_i\\}$\uff0c\u7136\u540e\u518d\u679a\u4e3e\u6bcf\u4e2a\u5143\u7d20 $1 \\le i \\le n$\uff0c\u5224\u65ad\u5e8f\u5217 $\\{b_1, b_2, \\cdots, b_i - 1, \\cdots, b_n\\}$ \u662f\u5426\u88ab ban\uff0c\u5982\u679c\u6ca1\u6709\u88ab ban \u5c31\u66f4\u65b0\u7b54\u6848\u3002\n\n\u81f3\u4e8e\u600e\u4e48\u7ef4\u62a4\u67d0\u4e00\u4e2a\u5e8f\u5217\u6709\u6ca1\u6709\u88ab ban\uff0c\u53ef\u4ee5\u7528 `std::map` \u6765\u5b9e\u73b0\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <cmath>\n#include <map>\n\ntemplate <class T>\ninline void read(T &x) {\n    x = 0;\n    int f = 0;\n    char ch = getchar();\n    while (!isdigit(ch))    { f |= ch == '-'; ch = getchar(); }\n    while (isdigit(ch))     { x = (x << 1) + (x << 3) + (ch ^ 48); ch = getchar(); }\n    x = f ? -x : x;\n    return ;\n}\n\ntypedef unsigned long long uLL;\ntypedef long long LL;\n\nstd::vector<int> a[20], b[100010], ans, arr;\nstd::map<std::vector<int>, bool> mp;\nint s[100010];\nint n, tot, max, m;\n\nint main() {\n    read(n);\n    for (int i = 1, x; i <= n; ++i) {\n        read(x);\n        a[i].push_back(x);\n        for (int j = 1; j <= a[i][0]; ++j)    read(x), a[i].push_back(x);\n    }\n    read(m);\n    if (!m) {\n        for (int i = 1; i <= n; ++i)    printf(\"%d \", a[i][0]);\n        puts(\"\");\n        return 0;\n    }\n    for (int i = 1; i <= m; ++i) {\n        for (int j = 1, x; j <= n; ++j)    read(x), s[i] += a[j][x], b[i].push_back(x);\n        mp[b[i]] = true;\n    }\n    for (int i = 1; i <= m; ++i) {\n        for (int j = 0; j < n; ++j) {\n            arr = b[i];\n            if (arr[j] != 1) {\n                --arr[j];\n                if (mp.find(arr) == mp.end()) {\n                    if (s[i] - a[j + 1][arr[j] + 1] + a[j + 1][arr[j]] > max) {\n                        max = s[i] - a[j + 1][arr[j] + 1] + a[j + 1][arr[j]];\n                        ans = arr;\n                    }\n                }   \n            }\n        }\n    }\n    for (int i = 1; i <= n; ++i)    arr[i - 1] = a[i][0];\n    if (mp.find(arr) == mp.end())    ans = arr;\n    for (int i = 0; i < n; ++i)    printf(\"%d \", ans[i]);\n    puts(\"\");\n    return 0;\n}\n```",
        "postTime": 1632543135,
        "uid": 124152,
        "name": "AmamiyaYuuko",
        "ccfLevel": 0,
        "title": "CF1574D The Strongest Build \u9898\u89e3"
    },
    {
        "content": "\u5982\u679c\u6ca1\u6709\u9650\u5236\u7684\u8bdd\u90a3\u80af\u5b9a\u6240\u6709\u6570\u7ec4\u90fd\u9009\u6700\u5927\u7684\u5c31\u884c\u4e86\uff0c\u4f46\u662f\u8fd9\u91cc\u6709\u9650\u5236\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4ece\u6700\u5927\u7684\u5f00\u59cb\u5f80\u4e0b\u51cf\uff0c\u641c\u4e00\u904d\uff0c\u6bcf\u6b21\u90fd\u5224\u65ad\u4e00\u4e0b\u5f53\u524d\u72b6\u6001\u662f\u5426\u5408\u6cd5\u3002\u5982\u679c\u5408\u6cd5\u7684\u8bdd\u5c31\u548c\u7b54\u6848\u53d6\u4e00\u4e0b $\\max$\u3002\u8fd9\u91cc\u5224\u65ad\u5408\u6cd5\u6211\u7528\u4e86\u4e00\u4e2a `set` \u5b58\u4e86\u4e00\u4e2a\u91cd\u8f7d\u4e86 $<$ \u7684\u7ed3\u6784\u4f53\u8868\u793a\u72b6\u6001\uff0c\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u6bd4\u6211\u66f4\u597d\u7684\u65b9\u6cd5\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);++i)\n#define per(i,a,b) for(int i=(a);i>=(b);--i)\nusing namespace std;\nstruct tp{\n    int t[11];\n    tp(){}\n    tp(int t1,int t2,int t3,int t4,int t5,int t6,int t7,int t8,int t9,int t10) {\n        t[1]=t1;\n        t[2]=t2;\n        t[3]=t3;\n        t[4]=t4;\n        t[5]=t5;\n        t[6]=t6;\n        t[7]=t7;\n        t[8]=t8;\n        t[9]=t9;\n        t[10]=t10;\n    }\n    bool operator < (const tp& rhs) const {\n        if(t[1]<rhs.t[1]) return 1;\n        if(t[1]>rhs.t[1]) return 0;\n        if(t[2]<rhs.t[2]) return 1;\n        if(t[2]>rhs.t[2]) return 0;\n        if(t[3]<rhs.t[3]) return 1;\n        if(t[3]>rhs.t[3]) return 0;\n        if(t[4]<rhs.t[4]) return 1;\n        if(t[4]>rhs.t[4]) return 0;\n        if(t[5]<rhs.t[5]) return 1;\n        if(t[5]>rhs.t[5]) return 0;\n        if(t[6]<rhs.t[6]) return 1;\n        if(t[6]>rhs.t[6]) return 0;\n        if(t[7]<rhs.t[7]) return 1;\n        if(t[7]>rhs.t[7]) return 0;\n        if(t[8]<rhs.t[8]) return 1;\n        if(t[8]>rhs.t[8]) return 0;\n        if(t[9]<rhs.t[9]) return 1;\n        if(t[9]>rhs.t[9]) return 0;\n        if(t[10]<rhs.t[10]) return 1;\n        if(t[10]>rhs.t[10]) return 0;\n        return 0;\n    }\n};\nint n,m;\nint c[11];\nint a[11][200005];\nset<tp> s;\nint ans=0x3f3f3f3f;\ntp anss;\nset<tp> vis;\nvoid dfs(tp u,int dee) {\n    if(vis.count(u)) return;\n    vis.insert(u);\n    if(!s.count(u)) {\n        if(dee<ans) {\n            ans=dee;\n            anss=u;\n        }\n        return ;\n    }\n    rep(i,1,n) {\n        if(u.t[i]>1) {\n            --u.t[i];\n            dfs(u,dee+a[i][u.t[i]+1]-a[i][u.t[i]]);\n            ++u.t[i];\n        }\n    }\n}\nint main() {\n    scanf(\"%d\",&n);\n    rep(i,1,n) {\n        scanf(\"%d\",&c[i]);\n        rep(j,1,c[i]) scanf(\"%d\",&a[i][j]);\n    }\n    scanf(\"%d\",&m);\n    tp b(0,0,0,0,0,0,0,0,0,0);\n    rep(i,1,m) {\n        rep(j,1,n) {\n            scanf(\"%d\",&b.t[j]);\n        }\n        s.insert(b);\n    }\n    tp now(0,0,0,0,0,0,0,0,0,0);\n    rep(i,1,n) {\n        now.t[i]=c[i];\n    }\n    dfs(now,0);\n    rep(i,1,n) printf(\"%d \",anss.t[i]);\n    return 0;\n}\n```",
        "postTime": 1632371689,
        "uid": 76156,
        "name": "henrytb",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1574D\u3010The Strongest Build\u3011"
    },
    {
        "content": "# CF1574D \u9898\u89e3\n## \u5199\u5728\u524d\u9762\n\u6ca1\u6709\u66f4\u597d\u7684\u4f53\u9a8c\u4e86 /kk\n\n\u8fd9\u573a CF \u7684 D \u9898\u610f\u5916\u7684\u7b80\u5355\uff0c\u4f46\u4f9d\u65e7\u662f WA \u4e86\u4e24\u904d\u624d A \u6389\u3002\n\n\u8fd9 building \u7ffb\u8bd1\u8fc7\u6765\u5f53\u4f5c\u65b9\u6848\u5b9e\u5c5e\u79bb\u8c31\u3002\n\n~~\u8bdd\u8bf4\u8d5b\u540e\u6211\u8fd8\u53bb\u5410\u69fd\u4e86\u4e00\u4e0b\uff0c\u8bf4\u8fd9\u9898\u53ea\u6709 *1300\u3002~~\n## \u601d\u8def\n\u770b\u5b8c\u9898\u53d1\u73b0\u65b9\u6848\u4e2d\u7684\u6bcf\u4e2a\u503c\u80af\u5b9a\u90fd\u8d8a\u5927\u8d8a\u597d\uff0c\u90a3\u4e48**\u5168\u90e8\u9009\u6ee1**\u80af\u5b9a\u662f\u6700\u597d\u7684\u3002\n\n\u4f46\u662f Ban \u673a\u5236\u6253\u7834\u4e86\u6211\u4eec\u7684\u68a6\u60f3\uff0c\u5bb9\u6613\u53d1\u73b0 $O(nm\\log nm)$ \u7684\u505a\u6cd5\u90fd\u662f\u8dd1\u5f97\u8fc7\u53bb\u7684\uff0c\u4e8e\u662f\u8003\u8651\u7528\u4e00\u4e2a\u5806\u7ef4\u62a4\u72b6\u6001\uff0c\u6bcf\u4e00\u6b21\u9009\u51fa\u5f53\u524d\u6700\u4f18\u8fdb\u884c\u6269\u5c55\uff08\u5373**\u5c1d\u8bd5\u51cf\u5c0f\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u65b9\u6848**\uff09\uff0c\u90a3\u4e48\u5c31\u50cf\u4e00\u9053 **$n$ \u7ef4\u5806\u4f18 dij** \u4e00\u6837\uff0c\u6b63\u786e\u6027\u663e\u7136\u3002\n\n\u63a5\u4e0b\u6765\u53ea\u6709\u4e00\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u72b6\u6001\u662f\u5426\u8bbf\u95ee\u8fc7\uff1f\u8fd9\u5c31\u9700\u8981\u4e00\u4e2a\u4f18\u79c0\u7684\u7ed3\u6784\u4f53\uff0c\u6211\u91c7\u7528\u7684\u662f\u6807\u8bb0\u4e86\u4e00\u4e2a now\uff0c\u4ee3\u8868\u4e0a\u4e00\u6b21\u4fee\u6539\u5230\u4e86\u54ea\u4e2a\u4f4d\u7f6e\uff08\u6ca1\u6709\u5219\u4e3a1\uff09\uff0c\u6bcf\u6b21**\u53ea\u4fee\u6539 now \u53ca\u4e4b\u540e\u7684\u4f4d\u7f6e**\uff0c\u5bb9\u6613\u53d1\u73b0\u8fd9\u6837\u5c31\u6709\u552f\u4e00\u8868\u793a\u6cd5\u4e86\u3002~~\u5176\u5b9e\u8fd9\u4e00\u6bb5\u662f\u6211\u5199\u7684\u65f6\u5019\u968f\u624b\u5199\u7684\u4f18\u5316\u3002~~\n\n\u63a5\u4e0b\u6765\u662f\u5224\u65ad\u662f\u5426 Ban \u6389\u4e86\u8fd9\u4e2a\u65b9\u6848\uff0c\u6211\u9009\u62e9\u7ed9\u7ed3\u6784\u4f53\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u5177\u4f53\u800c\u8a00\u662f\u5148\u6bd4\u8f83\u8fd9\u4e2a\u65b9\u6848\u7684\u4ef7\u503c\uff0c\u63a5\u4e0b\u6765\u6bd4\u8f83\u65b9\u6848\u7684\u5b57\u5178\u5e8f\uff0c\u76f8\u540c\u5219\u8fd4\u56de false\uff0c\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u76f8\u7b49\uff0c\u4e5f\u7b26\u5408 map \u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u56e0\u6b64\u76f4\u63a5\u5c06 Ban \u6389\u7684\u65b9\u6848\u6254\u8fdb\u4e00\u4e2a map\uff0c\u6bcf\u6b21\u76f4\u63a5\u67e5\u5c31\u884c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u5806\u91cc\u6700\u591a\u6709 $nm$ \u4e2a\u4f4d\u7f6e\uff08\u6bcf\u4e2a\u4e0d\u5408\u6cd5\u65b9\u6848\u6269\u5c55\u51fa $n$ \u4e2a\u65b9\u6848\uff09\uff0c\u56e0\u6b64\u7ef4\u62a4\u5806\u7684\u590d\u6742\u5ea6\u4e0d\u8d85\u8fc7 $O(nm\\log nm)$\uff0c\u5f53\u7136\u4e25\u91cd\u8dd1\u4e0d\u6ee1\u3002\n## \u4ee3\u7801\n\u56e0\u4e3a\u4e0d\u60f3\u6709\u4eba\u6284\u6240\u4ee5\u53bb\u6389\u4e86\u5934\u6587\u4ef6\u3002\n```cpp\n#define int long long\nusing namespace std;\ninline bool idigit(register char x){return (x<'0'||x>'9')?0:1;}\ninline int read()\n{\n\tregister int num=0,f=1;\n\tregister char c;\n\twhile(!idigit(c=getchar()))if(c=='-')f=-1;\n\twhile(idigit(c))num=(num<<1)+(num<<3)+(c&15),c=getchar();\n\treturn num*f;\n}\n//\u5feb\u8bfb\nint n,m,len[12];\nvector<int>a[12];\nstruct pa{int a[12],val,now;}o2,o3;\ninline bool operator<(const pa x,const pa y)\n{\n\tif(x.val!=y.val)return x.val>y.val;\n\tfor(register int i=1;i<=n;++i)if(x.a[i]!=y.a[i])return x.a[i]>y.a[i];\n\treturn 0;\n\t//\u56e0\u4e3a\u5c0f\u4e8e\u4e0d\u6210\u7acb\uff0c\u6240\u4ee5\u5fc5\u987b\u8fd4\u56de0\n}\n//\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u540c\u65f6\u7ed9\u4f18\u5148\u961f\u5217\u548cmap\u7528\uff0c\u5927\u5e45\u51cf\u5c0f\u7801\u91cf\npriority_queue<pa>que;\nmap<pa,bool>e;\nsigned main()\n{\n\tn=read();\n\tfor(register int i=1;i<=n;++i)\n\t{\n\t\ta[i].resize((len[i]=read())+10);\n\t\tfor(register int j=1;j<=len[i];++j)a[i][j]=read();\n\t}\n\tm=read(),o2.now=1;\n\twhile(m--)\n\t{\n\t\tfor(register int i=1;i<=n;++i)o2.val+=a[i][len[i]]-a[i][o2.a[i]=read()];\n\t\te[o2]=1,o2.val=0;\n\t}\n\tfor(register int i=1;i<=n;++i)o2.a[i]=len[i];\n\tque.push(o2);\n\twhile(que.size())\n\t{\n\t\to2=que.top(),que.pop();\n\t\tif(e.find(o2)==e.end())\n\t\t{\n\t\t\tfor(register int i=1;i<=n;++i)printf(\"%lld \",o2.a[i]);\n\t\t\treturn 0;\n\t\t}\n\t\tfor(register int i=o2.now;i<=n;++i)if(o2.a[i]>1)\n\t\t{\n\t\t\tfor(register int j=1;j<=n;++j)o3.a[j]=o2.a[j];\n\t\t\to3.now=i,o3.val=o2.val+a[i][o2.a[i]]-a[i][--o3.a[i]],que.push(o3);\n\t\t\t//\u5bf9i\u4f4d\u7f6e\u8fdb\u884c\u51cf\u5c0f\u64cd\u4f5c\n\t\t}\n\t}\n\treturn 1;\n}\n```\n~~\u522b\u770b\u4ee3\u7801\u633a\u957f\uff0c\u5176\u5b9e\u5220\u6389 register \u5c31\u597d\uff1b\u522b\u770b\u4ee3\u7801\u633a\u4e11\uff0c\u5176\u5b9e\u6211[\u539f\u672c\u5199\u7684](https://codeforces.com/contest/1574/submission/129402396)\u66f4\u4e11\uff01~~",
        "postTime": 1632489059,
        "uid": 375895,
        "name": "SSL_wj",
        "ccfLevel": 0,
        "title": "CF1574D"
    }
]
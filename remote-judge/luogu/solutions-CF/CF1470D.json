[
    {
        "content": "\u67d3\u8272\u3002\n\n\u5982\u679c\u4e0d\u8fde\u901a\u5219\u65e0\u89e3\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u968f\u4fbf\u62ff\u51fa\u6765\u4e00\u4e2a\u751f\u6210\u6811\uff0c\u7136\u540e\u6309 dfs \u5e8f\u67d3\u8272\uff0c\u5982\u679c\u5468\u56f4\u6ca1\u6709\u5df2\u7ecf\u9009\u62e9\u7684\u70b9\u5c31\u9009\u62e9\u5f53\u524d\u70b9\u3002\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u662f\u5bf9\u7684\u5462\uff1f\n\n\u5728\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5176\u5b9e\u4fdd\u8bc1\u4e86\u56fe\u7684\u8fde\u901a\uff0c\u5176\u5b9e\u662f\u5728 dfs \u4e2d\u4fdd\u8bc1\u4e86\u4efb\u610f\u7684\u5df2\u8bbf\u95ee\u7684 $i$ \u4e0e\u7236\u4eb2\u8fde\u901a\uff0c\u521d\u59cb\u6ca1\u6709\u70b9\uff0c\u6ee1\u8db3\u8981\u6c42\uff0c\u5728 dfs \u7684\u8fc7\u7a0b\u4e2d\uff1a\n\n\u82e5\u9009\u62e9\u4e86 $i$ \u6216 $fa_i$\uff0c\u5219\u4e00\u5b9a\u8fde\u901a\uff0c\u5426\u5219\u82e5\u90fd\u4e0d\u80fd\u9009\uff0c\u5219\u8bf4\u660e\u90fd\u4e0e\u4e4b\u524d\u7684\u70b9\u8fde\u901a\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a\u70b9\u4f9d\u7136\u8fde\u901a\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define re register\nusing namespace std;\ninline int read(){\n\tre int t=0;re char v=getchar();\n\twhile(v<'0')v=getchar();\n\twhile(v>='0')t=(t<<3)+(t<<1)+v-48,v=getchar();\n\treturn t;\n}\nint n,m,t,head[600002],cnt,vis[300002],fa[300002],d[300002],v[300002],f[300002];\ninline int root(re int x){return x==fa[x]?x:fa[x]=root(fa[x]);}\nstruct edge{int to,next;}e[600002];\ninline void add(re int x,re int y){\n\te[++cnt]=(edge){y,head[x]};\n\thead[x]=cnt,++d[x];\n}\ninline void dfs(re int x,re int y){\n\tf[x]=y;\n\tfor(re int i=head[x];i;i=e[i].next)if(!f[e[i].to])dfs(e[i].to,x);\n}\ninline void dfs1(re int x,re int y){\n\tre bool ia=1;\n\tfor(re int i=head[x];i;i=e[i].next)if(vis[e[i].to])ia=0;\n\tif(ia)vis[x]=1;\n\tfor(re int i=head[x];i;i=e[i].next)if(f[e[i].to]==x)dfs1(e[i].to,x);\n}\nint main(){\n\tt=read();\n\twhile(t--){\n\t\tn=read(),m=read(),cnt=0;\n\t\tfor(re int i=1;i<=n;++i)fa[i]=i,head[i]=vis[i]=d[i]=v[i]=f[i]=0;\n\t\tfor(re int i=1,x,y;i<=m;++i)x=read(),y=read(),add(x,y),add(y,x),fa[root(x)]=root(y);\n\t\tre bool ia=1;\n\t\tfor(re int i=1;i<=n;++i)if(root(i)^root(1))ia=0;\n\t\tif(!ia){\n\t\t\tputs(\"NO\");\n\t\t\tcontinue;\n\t\t}\n\t\tf[1]=1,dfs(1,1),dfs1(1,1);\n\t\tputs(\"YES\");\n\t\tre int s=0;\n\t\tfor(re int i=1;i<=n;++i)s+=vis[i];\n\t\tprintf(\"%d\\n\",s);\n\t\tfor(re int i=1;i<=n;++i)if(vis[i])printf(\"%d \",i);\n\t\tputs(\"\");\n\t}\n}\n\n\n```\n",
        "postTime": 1610178662,
        "uid": 41476,
        "name": "gyh20",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1470D \u3010Strange Housing\u3011"
    },
    {
        "content": "\u60f3\u4e86\u4e00\u4e2a\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u7528\u5f52\u7eb3\u6cd5\u3002\n\n\u5bf9\u4e8e\u524d $n-1$ \u4e2a\u70b9\uff0c\u5982\u679c\u6211\u4eec\u6784\u9020\u51fa\u4e86\u4e00\u79cd\u65b9\u6848\uff0c\u90a3\u4e48\u73b0\u5728\u8003\u8651\u52a0\u5165\u7b2c $n$ \u4e2a\u70b9\uff0c\u5982\u679c\u4e0e\u7b2c $n$ \u4e2a\u70b9\u8fde\u8fb9\u7684\u70b9\u6709\u4e00\u4e2a\u67d3\u4e86\u8272\uff0c\u90a3\u4e48\u5f53\u524d\u70b9\u5c31\u4e0d\u9700\u8981\u67d3\u8272\uff0c\u5426\u5219\u5f53\u524d\u70b9\u5fc5\u5b9a\u67d3\u8272\u3002\n\n$n=1$ \u65f6\uff0c\u8fd9\u4e2a\u70b9\u662f\u5426\u67d3\u8272\u90fd\u662f\u5408\u6cd5\uff0c\u6240\u4ee5\u6211\u4eec\u4f9d\u6b21\u52a0\u5165\u6bcf\u4e2a\u70b9\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(N)$ \u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 300005\nusing namespace std;\nint n,m,v[N],h[N],tot,in[N];\nstruct edge{int to,nxt;}e[N<<1];\nvoid add(int x,int y){e[++tot].nxt=h[x];h[x]=tot;e[tot].to=y;}\nqueue<int>q;\nvoid solve(){\n\tscanf(\"%d%d\",&n,&m);\n\trep(i,1,n)h[i]=0,v[i]=~0,in[i]=0;tot=0;\n\trep(i,1,m){\n\t\tint x,y;scanf(\"%d%d\",&x,&y);\n\t\tadd(x,y);add(y,x);\n\t}\n\twhile(!q.empty())q.pop();\n\tv[1]=in[1]=1;q.push(1);\n\twhile(!q.empty()){\n\t\tint x=q.front();q.pop();\n\t\tbool flag=true;\n\t\tfor(int i=h[x];i;i=e[i].nxt)if(~v[e[i].to])flag&=!v[e[i].to];\n\t\tv[x]=flag;\n\t\tfor(int i=h[x];i;i=e[i].nxt)if(!in[e[i].to])in[e[i].to]=1,q.push(e[i].to);\n\t}\n\trep(i,1,n)if(!in[i]){puts(\"NO\");return ;}\n\tputs(\"YES\");int sum=0;\n\trep(i,1,n)sum+=v[i];\n\tprintf(\"%d\\n\",sum);\n\trep(i,1,n)if(v[i])printf(\"%d \",i);putchar('\\n');\n}\nint main(){\n\tint T;scanf(\"%d\",&T);\n\twhile(T--)solve();\n\treturn 0;\n}\n```",
        "postTime": 1624455376,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011CF1470D Strange Housing"
    },
    {
        "content": "\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u56fe\uff0c\u5982\u679c\u5b83\u672c\u8eab\u6ee1\u8db3\u4efb\u610f\u4e24\u70b9\u4e92\u76f8\u53ef\u8fbe\uff0c\u90a3\u4e48\u6211\u4eec\u603b\u662f\u4f1a\u6709\u4e00\u79cd\u6784\u9020\u65b9\u6cd5\uff1a\n\n1. \u9009\u4e2d\u4e00\u4e2a\u70b9\u5e76\u628a\u5b83\u67d3\u8272\u6210\u9ed1\u8272,\u4e0e\u5b83\u76f8\u8fde\u7684\u6240\u6709\u70b9\u67d3\u6210\u767d\u8272\uff1b\n2. \u9009\u62e9\u4e00\u4e2a\u4e0e\u4efb\u610f\u767d\u8272\u70b9\u76f8\u8fde\u7684\u672a\u67d3\u8272\u70b9\uff0c\u628a\u5b83\u67d3\u6210\u9ed1\u8272,\u4e0e\u5b83\u76f8\u8fde\u7684\u6240\u6709\u70b9\u67d3\u6210\u767d\u8272\uff1b\n3. \u91cd\u590d\u6b65\u9aa4 $2$ \u82e5\u5e72\u6b21\u76f4\u81f3\u6240\u6709\u7684\u70b9\u90fd\u88ab\u67d3\u8272\uff0c\u7b54\u6848\u5c31\u662f\u6240\u6709\u88ab\u67d3\u6210\u9ed1\u8272\u7684\u70b9\u3002\n\n\u8fd9\u6837\u505a\u662f\u6b63\u786e\u7684\uff0c\u56e0\u4e3a\uff1a\n\n- \uff08\u4ee5\u7ffb\u8bd1\u4e3a\u51c6\uff09\u5bf9\u4e8e\u6761\u4ef6 $1$\uff0c\u4e0e\u9ed1\u8272\u70b9\u6240\u8fde\u7684\u70b9\u4e00\u5b9a\u662f\u767d\u8272\u70b9\uff0c\u56e0\u4e3a\u5728\u9ed1\u8272\u70b9\u88ab\u786e\u7acb\u4e4b\u540e\u6240\u6709\u4e0e\u5b83\u76f8\u8fde\u7684\u70b9\u4f1a\u9996\u5148\u88ab\u67d3\u6210\u767d\u8272\u3002\n- \u5bf9\u4e8e\u6761\u4ef6 $2$\uff0c\u5bf9\u4e8e\u6240\u6709\u767d\u8272\u70b9\uff0c\u6211\u4eec\u6784\u9020\u7684\u65b9\u5f0f\u786e\u4fdd\u6240\u6709\u767d\u8272\u70b9\u4e0e\u9ed1\u8272\u70b9\u76f8\u8fde\uff1b\u5bf9\u4e8e\u6240\u6709\u9ed1\u8272\u70b9\uff0c\u4e00\u4e2a\u9ed1\u8272\u70b9\u5fc5\u5b9a\u8981\u4e0e\u81f3\u5c11\u53e6\u4e00\u4e2a\u9ed1\u8272\u70b9\u4ee5\u4e00\u4e2a\u767d\u8272\u70b9\u548c\u4e24\u6761\u8fb9\u76f8\u8fde\uff0c\u6240\u6709\u9ed1\u8272\u70b9\u4e5f\u4e92\u76f8\u53ef\u8fbe\u3002\n\n\u5982\u679c\u6574\u4e2a\u56fe\u4e0d\u6ee1\u8db3\u4efb\u610f\u4e24\u70b9\u4e92\u76f8\u53ef\u8fbe\uff0c\u7b54\u6848\u5fc5\u5b9a\u662f `NO`\u3002\n\n\u597d\u50cf\u662f\u9700\u8981\u4e00\u70b9\u5361\u5e38\uff0c\u6709\u4e9b\u8f93\u5165\u6570\u636e\u91cf\u8f83\u5927\uff0c\u8fd8\u6709\u628a\u6570\u636e\u7ec4\u6570\u62c9\u6ee1\u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define LL long long\ntemplate<typename T> void read(T &x) {\n\tx=0;int f=1;\n\tchar c=getchar();\n\tfor(;!isdigit(c);c=getchar())if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar())x=x*10+c-'0';\n\tx=x*f;\n}\nconst int N=300020;\nvector<int>g[N];\nint T;\nint n,m,u,v,l;\nbool b;\nint c[N],q[3000020],ans[N],tp=0;\nvoid Coloring_Vertices(){\n\ttp++;q[tp]=1;\n\twhile(tp>0){\n\t\tint cur=q[tp];tp--;\n\t\tif(c[cur]==T) continue;\n\t\tc[cur]=T;l++;ans[l]=cur;\n\t\tfor(int i=0;i<g[cur].size();i++){\n\t\t\tint x=g[cur][i];\t\n\t\t\tif(c[x]!=T)\n\t\t\t\tfor(int j=0;j<g[x].size();j++){\n\t\t\t\t\ttp++;\t\n\t\t\t\t\tq[tp]=g[x][j];\n\t\t\t\t}\n\t\t\tc[x]=T;\n\t\t}\n\t}\n}\nint main(){\n\tcin>>T;\n\twhile(T){\n\t\t\n\t\tread(n),read(m);\n\t\tb=1,l=0;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tread(u),read(v);\n\t\t\tg[u].push_back(v);\n\t\t\tg[v].push_back(u);\n\t\t}\n        \n\t\tColoring_Vertices();\n        \n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif(c[i]!=T){\t\n\t\t\t\tb=0;\n\t\t\t\tcout<<\"NO\"<<endl;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(b){\n\t\t\tcout<<\"YES\"<<endl<<l<<endl;\n           \t\tsort(ans+1,ans+1+l);\n\t\t\tfor(int i=1;i<=l;i++)  \n\t\t\t\tcout<<ans[i]<<' ';\n\t\t\tcout<<endl;\n\t\t}\n\t\tfor(int i=1;i<=n;i++) g[i].clear();\n\t\tT--;\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1610105589,
        "uid": 199139,
        "name": "devans",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1470D Strange Housing"
    },
    {
        "content": "$update:$ \u589e\u52a0\u4e86 $\\text{Reference}$\n\n\u9996\u5148\u539f\u56fe\u82e5\u4e0d\u8fde\u901a\uff0c\u90a3\u4e48\u4e00\u5b9a\u65e0\u89e3\u3002\n\n\u82e5\u8fde\u901a\uff0c\u8003\u8651\u5f52\u7eb3\u6cd5\u3002\n\n\u4e0d\u59a8\u8bbe\u4e00\u5b9a\u6709\u89e3\uff0c\u90a3\u4e48 $n=1$ \u65f6\u663e\u7136\u6210\u7acb\uff0c\u5047\u8bbe $n=k-1$ \u65f6\u6210\u7acb\uff0c\u6b32\u8bc1\u660e $n=k$ \u6210\u7acb\u3002\n\n\u73b0\u5c06\u56fe\u4e2d\u7684\u4e00\u4e2a\u975e\u5272\u70b9 $u$ \u5220\u6389\uff0c\u7136\u540e\u8bbe\u5269\u4e0b\u7684\u8fde\u901a\u56fe\u4e2d\u7684\u70b9\u96c6\u4e3a $S'$\uff0c\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n* \u82e5 $S'$ \u4e2d\u6709\u4e0e $u$ \u76f8\u8fde\u7684\u70b9\uff0c\u90a3\u4e48 $S=S'$ \u6210\u7acb\u3002\n\n* \u82e5 $S'$ \u4e2d\u6ca1\u6709\u4e0e $u$ \u76f8\u8fde\u7684\u70b9\uff0c\u90a3\u4e48 $S=S'\\cup \\{u\\}$ \u6210\u7acb\u3002\n\n\u6a21\u62df\u8fd9\u4e2a\u8fc7\u7a0b\u5373\u53ef\u3002\n\n\u7136\u540e\u6ce8\u610f\u6bcf\u6b21\u627e\u975e\u5272\u70b9\u7684\u590d\u6742\u5ea6\u4f1a\u7206\u70b8\uff0c\u4f46\u53ea\u8981\u6309\u4efb\u610f DFS \u5e8f\u52a0\u5165\u4fbf\u6bcf\u6b21\u90fd\u662f\u975e\u5272\u70b9\u3002\n\n$\\texttt{Code:}$\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define ull unsigned long long\n#define rint register int\nusing namespace std;\nnamespace IO{\n\t#define File(x,y) freopen(#x,\"r\",stdin),freopen(#y,\"w\",stdout)\n\tinline int read(){\n\t\tint w=0,f=1; char ch=getchar();\n\t\twhile(ch<'0'||ch>'9'){if(ch=='-') f=-1; ch=getchar();}\n\t\twhile(ch>='0'&&ch<='9'){w=(w<<3)+(w<<1)+(ch^48); ch=getchar();}\n\t\treturn w*f;\n\t}\n\tinline void write(int x){\n  \t\tstatic int sta[35]; int top=0;\n  \t\tif(x<0) putchar('-'),x=-x;\n  \t\tdo{sta[++top]=x%10,x/=10;}while(x);\n  \t\twhile(top) putchar(sta[top--]+48); puts(\"\");\n\t}\n}\nusing namespace IO;\nnamespace CL{\n\t#define fill(x,y) memset(x,y,sizeof(x))\n\t#define copy(x,y) memcpy(x,y,sizeof(y))\n\t\n\tconst int maxn=3e5+5;\n\t\n\tint T,n,m,tim,ans;\n\tint dfn[maxn],uid[maxn];\n\tbool vis[maxn],col[maxn];\n\tnamespace Graph{\n\t\tint head[maxn],id;\n\t\tstruct e{int v,next;}edge[maxn<<1];\n\t\tinline void add(int u,int v){\n\t\t\tedge[++id].v=v;\n\t\t\tedge[id].next=head[u];\n\t\t\thead[u]=id;\n\t\t}\n\t}using namespace Graph;\n\tvoid dfs(int u){\n\t\tvis[u]=1;\n\t\tdfn[u]=++tim,uid[tim]=u;\n\t\tfor(int i=head[u];i;i=edge[i].next){\n\t\t\tint v=edge[i].v;\n\t\t\tif(vis[v]) continue;\n\t\t\tdfs(v);\n\t\t}\n\t}\n\tinline void init(int n,int m){\n\t\tfor(int i=1;i<=n;i++) head[i]=dfn[i]=uid[i]=0,vis[i]=col[i]=0;\n\t\tfor(int i=1;i<=m;i++) edge[i]=(e){0,0};\n\t\tid=tim=ans=0;\n\t}\n\n\tinline int main(){\n\t\tT=read();\n\t\twhile(T--){\n\t\t\tn=read(); m=read();\n\t\t\tfor(int i=1;i<=m;i++){\n\t\t\t\tint x=read(),y=read();\n\t\t\t\tadd(x,y),add(y,x);\n\t\t\t}\n\t\t\tdfs(1); bool flag=0;\n\t\t\tfor(int i=1;i<=n;i++) if(!vis[i]){puts(\"NO\"); flag=1; break;}\n\t\t\tif(flag){init(n,m); continue;}\n\t\t\tputs(\"YES\");\n  \t\t\tfor(int i=1;i<=tim;i++){\n\t\t\t\tint u=uid[i]; bool flag=1;\n\t\t\t\tfor(int j=head[u];j;j=edge[j].next){\n\t\t\t\t\tint v=edge[j].v;\n\t\t\t\t\tif(col[v]){flag=0; break;}\n\t\t\t\t}\n\t\t\t\tif(flag) col[u]=1;\n\t\t\t}\n\t\t\tfor(int i=1;i<=n;i++) if(col[i]) ans++;\n\t\t\tprintf(\"%d\\n\",ans);\n\t\t\tfor(int i=1;i<=n;i++) if(col[i]) printf(\"%d \",i); puts(\"\");\n\t\t\tinit(n,m);\n\t\t}\t\n\t\treturn 0;\n\t}\n}\nsigned main(){return CL::main();}\n```\n\n ## $\\text{Reference}$\n \n $2021$ \u56fd\u5bb6\u96c6\u8bad\u961f\u8bba\u6587 \u300a\u4fe1\u606f\u5b66\u7ade\u8d5b\u4e2d\u6784\u9020\u9898\u7684\u5e38\u7528\u89e3\u9898\u65b9\u6cd5\u300b\u2014\u848b\u51cc\u5b87",
        "postTime": 1628426550,
        "uid": 226113,
        "name": "\u706b\u7fbd\u767d\u65e5\u751f",
        "ccfLevel": 0,
        "title": "\u300c\u9898\u89e3\u300dCF1470D Strange Housing"
    },
    {
        "content": "##### \u89e3\u9898\u601d\u8def\uff1a\n\n\u7531\u4e8e\u672c\u9898\u6ca1\u6709\u8981\u6c42\u56de\u7b54\u6700\u5927/\u6700\u5c0f\u6570\u91cf\uff0c\u4e8e\u662f\u6210\u4e3a\u4e00\u9053\u6784\u9020\u6027\u9898\u76ee\u3002\n\n\u770b\u5230\u5220\u8fb9\uff0c\u53c8\u770b\u5230\u4fdd\u8bc1\u8054\u901a\uff0c\u4e8e\u662f\u60f3\u5230\u751f\u6210\u6811\u76f8\u5173\u3002\n\n\u5047\u5982\u6709\u4e00\u68f5\u751f\u6210\u6811\uff0c\u6700\u663e\u7136\u7684\u505a\u6cd5\u5c31\u662f\u6309\u5c42\u5206\u7c7b\uff0c\u4e00\u5c42\u67d3\uff0c\u4e00\u5c42\u4e0d\u67d3\u3002\n\n\u4f46\u8fd9\u65f6\u4f1a\u51fa\u73b0\u51e0\u6761\u8fb9\uff0c\u5176\u4e24\u7aef\u90fd\u88ab\u67d3\u8272\uff0c\u4e0d\u5408\u9898\u610f\u3002\n\n\u6539\u8fdb\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u4e0d\u59a8\u5047\u8bbe\u4ee51\u53f7\u8282\u70b9\u5f00\u59cb dfs \uff0c\u5982\u679c\u5f53\u524d\u70b9**\u672a\u88ab\u5224\u65ad\u67d3\u6216\u4e0d\u67d3**\uff0c\u5c31\u5c06\u5176**\u67d3\u8272**\uff0c\n\n\u7136\u540e**\u9a6c\u4e0a**\u628a\u4e0e\u88ab\u67d3\u8272\u7684\u70b9\u76f8\u8fde\u7684\u6240\u6709\u672a\u88ab\u67d3\u8272\u7684\u70b9\u5168\u90e8**\u786e\u5b9a\u4e3a\u4e0d\u67d3**\uff08\u7b26\u5408\u7ffb\u8bd1\u4e2d\u7684\u6761\u4ef61\uff09\u3002\n\n\u4e0d\u7ba1**\u5f53\u524d\u70b9**\u6709\u6ca1\u6709\u88ab\u67d3\u8272\uff0c\u9009\u62e9\u5176\u4e2d\u7684\u4e0e\u5f53\u524d\u70b9\u76f8\u8fde\u7684\u672a\u88ab\u8bbf\u95ee\u8fc7\u7684\u70b9\uff0c\u9012\u5f52\u4e0b\u53bb\u3002\n\n\u5982\u679c\u56fe\u4e0d\u8fde\u901a\uff0c\u8f93\u51fa NO\n\n\u5426\u5219\u8fd9\u6837\u4e00\u5b9a\u80fd\u904d\u5386\u6574\u5f20\u8fde\u901a\u56fe\u3002\n\n\u5982\u679c\u8bed\u8a00\u8868\u8ff0\u6709\u4e0d\u8be6\u5c3d\u7684\u5730\u65b9\uff0c\u8bf7\u53c2\u89c1\u4ee3\u7801\u3002\n\n```c++\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm> \n#include<cmath>\nusing namespace std;\nconst int maxn=3e5+5;\nconst int maxm=3e5+5;\nint T,n,m,vis[maxn],sum,ans[maxn];               //vis: 0\u672a\u8bbf\u95ee  1\u6d82\u8272  2\u4e0d\u6d82\u8272 \nbool book[maxn];\nint p[maxn],ept;    \nstruct Edge{int to,next;}E[2*maxm];\nvoid add(int x,int y){\n\tept++,E[ept].next=p[x];\n\tp[x]=ept,E[ept].to=y; \n}\nvoid dfs(int u){\n\tbook[u]=1;\n\tif(!vis[u]){\n\t\tvis[u]=1,ans[++sum]=u;\n\t\tfor(int i=p[u],v;i!=-1;i=E[i].next){\n\t\t\tv=E[i].to;\n\t\t\tif(vis[v])continue;\n\t\t\tvis[v]=2; \n\t\t}\n\t}\n\tfor(int i=p[u],v;i!=-1;i=E[i].next){\n\t\tv=E[i].to;\n\t\tif(book[v]==0)dfs(v);\n\t}\n}\nvoid init(){\n\tept=sum=0;\n\tfor(int i=1;i<=n;i++)\n\t\tans[i]=book[i]=vis[i]=0,p[i]=-1;\n}\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tinit();\n\t\tint u,v,flag=0;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tscanf(\"%d%d\",&u,&v);\n\t\t\tadd(u,v),add(v,u);\n\t\t}\n\t\tdfs(1);\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(vis[i]==0){flag=1;break;}\n\t\tif(flag){printf(\"NO \");}\n\t\telse{\n\t\t\tprintf(\"YES\\n%d\\n\",sum);\n\t\t\tsort(ans+1,ans+sum+1);\n\t\t\tfor(int i=1;i<=sum;i++)\n\t\t\t\tprintf(\"%d \",ans[i]);\n\t\t}\t\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n```\n\n###### ~~\u5982\u679c\u5bf9\u60a8\u6709\u5e2e\u52a9\uff0c\u6c42\u8d5e\u3002~~\n\n",
        "postTime": 1612174600,
        "uid": 142061,
        "name": "zhaocy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1470D \u3010Strange Housing\u3011"
    },
    {
        "content": "### \u601d\u8def\n\n\u5047\u8bbe\u5f53\u524d\u5df2\u7ecf\u5c06\u4e00\u4e2a\u5927\u5c0f\u4e3a $k$ \u7684\u70b9\u96c6\u5408\u6cd5\u67d3\u8272\u3002\u8003\u8651\u5c06\u70b9 $i$ \u52a0\u5165\u5230\u70b9\u96c6\u4e2d\u3002\n\n\u5982\u679c\u70b9\u96c6\u4e2d\u5b58\u5728\u4e00\u4e2a\u70b9 $j$\uff0c\u6ee1\u8db3\u70b9 $j$ \u4e0e\u70b9 $i$ \u6709\u8fb9\u76f4\u63a5\u76f8\u8fde\uff0c\u4e14\u70b9 $j$ \u88ab\u67d3\u8272\u4e86\uff0c\u90a3\u4e48\u76f4\u63a5\u5c06\u70b9 $i$ \u52a0\u5165\u70b9\u4e2d\uff0c\u4ecd\u7136\u5408\u6cd5\uff1b\n\n\u82e5\u70b9\u96c6\u4e2d\u4e0d\u5b58\u5728\u8fd9\u6837\u7684\u70b9 $j$\uff0c\u90a3\u4e48\u5c06\u70b9 $i$ \u67d3\u8272\u540e\u52a0\u5165\u70b9\u96c6\u4e2d\uff0c\u4ecd\u7136\u5408\u6cd5\u3002\n\n\u6309\u7167\u8fd9\u6837\u7684\u6b65\u9aa4\u9010\u6b65\u6269\u5927\u70b9\u96c6\uff0c\u5982\u679c\u539f\u56fe\u8054\u901a\uff0c\u90a3\u4e48\u5fc5\u5b9a\u6709\u89e3\u3002\n\n\u540c\u65f6\u4e3a\u4e86\u4fdd\u8bc1\u65b0\u679a\u4e3e\u7684\u70b9\u4e0e\u70b9\u96c6\u4e2d\u7684\u70b9\u6709\u8fb9\u76f4\u63a5\u76f8\u8fde\uff0c\u53ef\u4ee5\u6309\u7167 dfs \u5e8f\u679a\u4e3e\u56fe\u4e0a\u7684\u6240\u6709\u70b9\u3002\n\n### code\uff1a\n```\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int N=3e5+10,M=6e5+10;\nint h[N],tot,cnt,n,m,idx,q[N];bool vis[N],col[N];\nstruct edge{int v,nex;}e[M];\nvoid add(int u,int v){e[++idx]=edge{v,h[u]};h[u]=idx;}\nvoid dfs(int u)\n{\n\tvis[u]=true,cnt++;bool used=0;\n\tfor(int v,i=h[u];i;i=e[i].nex) if(vis[v=e[i].v]) used|=col[v];col[u]=used^1;tot+=col[u];\n\tfor(int v,i=h[u];i;i=e[i].nex) if(!vis[v=e[i].v]) dfs(v);\n}\nvoid solve()\n{\n\tscanf(\"%d%d\",&n,&m);for(int i=1;i<=n;i++) h[i]=col[i]=vis[i]=0;idx=tot=cnt=0;\n\tfor(int u,v,i=1;i<=m;i++) scanf(\"%d%d\",&u,&v),add(u,v),add(v,u);dfs(1);\n\tif(cnt<n) return puts(\"NO\"),void();puts(\"YES\");printf(\"%d\\n\",tot);\n\tfor(int i=1;i<=n;i++) if(col[i]) printf(\"%d \",i);puts(\"\");\n}\nint main()\n{\n\tint T;scanf(\"%d\",&T);while(T--) solve();\n\treturn 0;\n}\n```",
        "postTime": 1676892039,
        "uid": 288192,
        "name": "ListenSnow",
        "ccfLevel": 7,
        "title": "CF1470D"
    },
    {
        "content": "# F - Strange Housing\n\n**Problem F Strange Housing**\n\n\u7ed9\u5b9a\u4e00\u4e2a $n$ \u4e2a\u8282\u70b9\uff0c$m$ \u6761\u65e0\u5411\u8fb9\u7684\u56fe\uff0c\u73b0\u5728\u4f60\u8981\u7ed9\u4e00\u4e9b\u70b9\u67d3\u8272\uff0c\u4f7f\u5f97\uff1a\n\n- \u4e00\u6761\u8fb9\u6240\u8fde\u63a5\u7684\u4e24\u4e2a\u70b9\u4e0d\u80fd\u90fd\u88ab\u67d3\u8272\u3002\n- \u5728\u6240\u6709\u8fde\u63a5\u4e24\u4e2a\u4e0d\u88ab\u67d3\u8272\u7684\u70b9\u7684\u8fb9\u90fd\u88ab\u5220\u9664\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u56fe\u6ee1\u8db3\u4efb\u610f\u4e24\u4e2a\u70b9\u4e92\u76f8\u53ef\u8fbe\u3002\n\n\u5982\u679c\u6709\u67d3\u8272\u65b9\u6848\u6ee1\u8db3\u4e0a\u8ff0\u8981\u6c42\uff0c\u8f93\u51fa\u4e00\u884c `YES` \u4e4b\u540e\u8f93\u51fa\u8981\u67d3\u8272\u7684\u70b9\u7684\u6570\u91cf\uff0c\u5e76\u5347\u5e8f\u8f93\u51fa\u6240\u6709\u88ab\u67d3\u8272\u7684\u70b9\u7684\u7f16\u53f7;\u5426\u5219\u8f93\u51fa\u4e00\u884c `NO`\u3002\n\n$T$ \u7ec4\u6570\u636e\u3002\n\n$1\\leq T\\leq 10^5;2\\leq n\\leq 3\\times10^5;0\\leq m\\leq 3\\times10^5.$\n\n$\\sum n,\\sum m\\leq 3\\times10^5$\n\n**Solution**\n\n\u53c8\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u9898\u76ee ~ \u5f88\u660e\u663e\uff0c\u5982\u679c\u56fe\u662f\u4e00\u4e2a\u8fde\u901a\u56fe\u7684\u8bdd\uff0c\u5f88\u660e\u663e\u4ed6\u4e00\u5b9a\u53ef\u4ee5\u6ee1\u8db3\u9898\u76ee\u4e2d\u7684\u6761\u4ef6\uff0c\u56e0\u4e3a\u4e00\u4e2a\u8fde\u901a\u56fe\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u751f\u6210\u6811\uff0c\u90a3\u4e48\u6811\u7684\u70b9\uff0c\u67d3\u8272\u6cd5\uff0c\u4e00\u5c42\u67d3\uff0c\u4e00\u5c42\u4e0d\u67d3\uff0c\u4e00\u5b9a\u80fd\u6784\u9020\u51fa\u6765\u4e00\u79cd\u7b54\u6848\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u53bb\u5224\u65ad\u56fe\u662f\u5426\u8fde\u901a\uff0c\u4e0d\u8fde\u901a\u90a3\u80af\u5b9a\u4e3a `No`\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5e76\u67e5\u96c6\u6765\u5224\u65ad\u662f\u5426\u4e3a\u8fde\u901a\u56fe\uff0c\u7136\u540e\u7528 $dfs$ \u67d3\u8272\u5373\u53ef\u3002\u67d3\u8272\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5bf9\u4e8e\u5f53\u524d\u70b9\uff0c\u5982\u679c\u6ca1\u6709\u88ab\u904d\u5386\u8fc7\uff0c\u5c31\u7ed9\u4ed6\u67d3\u4e0a\u8272\uff0c\u7136\u540e\u5bf9\u4e8e\u4ed6\u7684\u6240\u6709\u90bb\u70b9\uff0c\u90fd\u5224\u65ad\u4e00\u4e0b\u662f\u5426\u88ab\u540c\u65f6\u67d3\u8272\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u70b9\u5728\u5b83\u4e4b\u524d\u88ab\u67d3\u4e0a\u8272\u4e86\uff0c\u90a3\u5c31\u628a\u5b83\u81ea\u5df1\u67d3\u4e0a\u7684\u8272\u53bb\u6389\uff0c\u56e0\u4e3a\u6211\u4eec\u5927\u4e0d\u4e86\u5c31\u628a\u8fd9\u6761\u8fb9\u5220\u6389\uff0c\u800c\u70b9\u662f\u4e00\u5b9a\u4e0d\u80fd\u540c\u8272\u7684\uff0c\u539f\u6765\u7684\u70b9\u5df2\u7ecf\u786e\u5b9a\u597d\u4e86\u4e0d\u80fd\u6539\uff0c\u5f53\u524d\u70b9\u53ef\u4ee5\u6539\uff0c\u56e0\u4e3a\u5f53\u524d\u70b9\u67d3\u8272\u4e5f\u662f\u8bd5\u7684 ~ \n\n\u5224\u65ad\u5b8c\u67d3\u8272\u7684\u6b63\u786e\u6027\u4ee5\u540e\uff0c\u518d\u5bf9\u4e8e\u6240\u6709\u7684\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9\uff0cdfs\u91cd\u590d\u4e0a\u8ff0\u52a8\u4f5c\u5373\u53ef\u3002\u81f3\u4e8e\u5347\u5e8f\u8f93\u51fa\u70b9\u7684\u7f16\u53f7\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u5373\u53ef\u3002\n\n**Code**\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <unordered_map>\n\nusing namespace std;\nconst int N = 5000007, M = 5000007, mod = 1e9 + 7;\ntypedef long long ll;\ntypedef int itn;\nint res;\nint n, m, k, t;\nint head[N], ver[M], nex[M], tot;\nint vis[N], col[N], fa[N];\n\nvoid add(int x, int y)\n{\n    ver[tot] = y;\n    nex[tot] = head[x];\n    head[x] = tot ++ ;\n}\n\nint Find(int x)\n{\n    if(fa[x] == x) return x;\n    return fa[x] = Find(fa[x]);\n}\n\nvoid dfs(int x, int father)\n{\n    vis[x] = 1;\n    col[x] = !col[father];\n\n    for(int i = head[x]; ~i; i = nex[i]) {//\u5148\u786e\u5b9a\u5b8c\n        int y = ver[i];\n        if(vis[y]) {\n            if(col[y]) col[x] = 0;\n        }\n    }\n    for(int i = head[x]; ~i; i = nex[i]) {//\u518d\u8d70\n        int y = ver[i];\n        if(vis[y] == 0 && y != father) {\n            dfs(y, x);\n        }\n    }\n}\n\nint main()\n{\n    scanf(\"%d\", &t);\n    while(t -- ) {\n        tot = 0;\n        scanf(\"%d%d\", &n, &m);\n        for(int i = 1; i <= n; ++ i) {\n            vis[i] = 0, fa[i] = i;\n            head[i] = -1, col[i] = 0;\n        }\n        int cnt = n;\n        for(int i = 1; i <= m; ++ i) {\n            int x, y;\n            scanf(\"%d%d\", &x, &y);\n            add(x, y);\n            if(Find(x) != Find(y)) {\n                cnt -- ;\n                fa[Find(x)] = fa[y];\n            }\n            add(x, y), add(y, x);\n        }\n        if(cnt != 1) {//\u8fde\u4e86 n-1 \u6b21\u5c31\u662f\u4e00\u68f5\u6811\n            puts(\"NO\");\n            continue;\n        }\n        puts(\"YES\");\n        dfs(1, 0);\n        cnt = 0;\n        vector<int> ans;\n        for(int i = 1; i <= n; ++ i) {\n            if(col[i]) {\n                ans.push_back(i);\n                cnt ++ ;\n            }\n        }\n        printf(\"%d\\n\", cnt);\n        for(auto x : ans)\n            printf(\"%d \", x);\n        puts(\"\");\n    }\n    return 0;\n}\n\n```\n\n",
        "postTime": 1612263471,
        "uid": 262605,
        "name": "fanfansann",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1470D \u3010Strange Housing\u3011"
    }
]
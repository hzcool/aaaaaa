[
    {
        "content": "# CF1340B Nastya and Scoreboard\n## \u89e3\u6cd5\uff1a\n\u76f4\u63a5 \u8d2a\u5fc3 + DP \u5373\u53ef\u3002\n\n\u6211\u4eec\u4ee4 $dp_{i, j}$ \u4e3a\u4ece \u7b2c $i$ \u4e2a\u6570\u5230\u7b2c $n$ \u4e2a\u6570\uff0c\u4ec5\u6253\u5f00 $j$ \u4e2a\u8367\u5149\u68d2\u6240\u80fd\u5728\u7b2c $i$ \u4e0a\u5f97\u5230\u7684\u5408\u6cd5\u6570\u5b57\u3002(\u6ce8\u610f\uff0c\u5982\u679c\u662f-1\uff0c\u5219\u4ee3\u8868\u4e0d\u53ef\u80fd)\u3002\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u5199\u51fa\u65b9\u7a0b\uff1a\n$$dp_{i, j} = \\max\\{s\\}\\,\\, (dp_{i + 1, s} > -1\\,\\,\\land\\,\\,0 \\le s \\le 9)$$\n\n\u6700\u540e\u76f4\u63a5\u7528 $dp_{1, k}$ \u4e00\u8def\u5728\u4e00\u8def\u63a8\u56de\u53bb\u5373\u53ef\u3002\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\n#include<stack>\n#include<vector>\n#include<map>\n#include<queue>\n#include<cmath>\n#include<set>\n#include<cstdlib>\n#include<cctype>\n#include<ctime>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nconst ll maxn = 1e5 + 5;\nconst ll maxm = 2e3 + 5;\ntemplate<class T>\ninline T qread(T &IEE){\n\tregister T x = 0, f = 1;\n\tregister char ch = getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch == '-'){\n\t\t\tf = -f;\n\t\t}\n\t\tch = getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx = (x << 1) + (x << 3) + (ch ^ 48);\n\t\tch = getchar();\n\t}\n\treturn IEE = x * f;\n}\ntemplate<class T>\ninline void qwrite(T a){\n\tif(!a){\n\t\tputchar('0');\n\t\treturn ;\n\t}\n \tif(a < 0){\n\t\tputchar('-');\n\t\ta = -a;\n\t}\n\tif(a > 9) qwrite(a / 10);\n\tputchar(a % 10 + 48);\n\treturn ;\n}\ntemplate<class T>\ninline T ab(T a){\n\treturn (a > 0) ? a : -a;\n}\ntemplate<class T>\ninline void swa(T &a, T &b){\n\ta ^= b ^= a ^= b;\n\treturn ;\n}\nint n, k;\nint dp[maxm][maxm];\nstring s[maxn];\nstring num[10] = {\"1110111\", \"0010010\", \"1011101\", \"1011011\", \"0111010\", \"1101011\", \"1101111\", \"1010010\", \"1111111\", \"1111011\"};\nint cal(string s, int c){ // \u8ba1\u7b97\u9700\u8981\u6253\u5f00\u7684\u6570\u91cf\n\tint cnt = 0;\n\tfor(int i = 0;i < 7;i++){\n\t\tif(s[i] == '1' && num[c][i] == '0'){\n\t\t\treturn -1;\n\t\t}\n\t\tif(s[i] != num[c][i]){\n\t\t\tcnt++;\n\t\t}\n\t}\n\treturn cnt;\n}\nint main(){\n\tqread(n);\n\tqread(k);\n\tmemset(dp, -1, sizeof(dp));\n\tfor(int i = 1;i <= n;i++){\n\t\tcin >> s[i];\n\t}\n\tfor(int i = n;i >= 1;i--){\n\t\tif(i == n){\n\t\t\tfor(int j = 0;j < 10;j++){\n\t\t\t\tint op = cal(s[i], j);\n\t\t\t\tif(op == -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tdp[n][op] = max(dp[n][op], j);\n\t\t\t}\n\t\t} else {\n\t\t\tfor(int j = 0;j < 10;j++){\n\t\t\t\tint op = cal(s[i], j);\n\t\t\t\tif(op == -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor(int l = op;l <= k;l++){\n\t\t\t\t\tif(dp[i + 1][l - op] != -1){\n\t\t\t\t\t\tdp[i][l] = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(dp[1][k] == -1){\n\t\tputs(\"-1\");\n\t} else {\n\t\tint now = k;\n\t\tbool f = 0;\n\t\tfor(int i = 1;i <= n;i++){\n\t\t\tcout << dp[i][now];\n\t\t\tnow -= cal(s[i], dp[i][now]);\n\t\t}\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}\n```\n\n\u4e0a\u8ff0\u7b97\u6cd5\u7684\u5355\u6b21\u590d\u6742\u5ea6\u5373\u4e3a $\\mathcal O(nk)$ \uff0c \u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002",
        "postTime": 1588773282,
        "uid": 177999,
        "name": "juicyyou",
        "ccfLevel": 9,
        "title": "CF1340B Nastya and Scoreboard"
    },
    {
        "content": "\u672c\u6587\u540c\u6b65\u53d1\u8868\u4e8e\u6211\u7684[cnblog](https://www.cnblogs.com/ZigZagKmp/p/13749280.html)\n\n\u672c\u573a\u9898\u89e3\u89c1[\u6b64](https://www.luogu.com.cn/blog/ZigZagKmp/codeforces-1340-solution)\n## CF1340B\n### \u9898\u610f\u7b80\u8ff0\n\u6709 $n$ \u4e2a\u5982\u4e0b\u56fe\u6240\u793a\u7684\u706f\u7ec4\u539f\u4ef6\uff0c\u6784\u6210\u4e86\u4e00\u4e2a\u8ba1\u5206\u677f\u3002\u6bcf\u4e2a\u706f\u7ec4\u539f\u4ef6\u7531 $7$ \u4e2a\u706f\u7ba1\u7ec4\u6210\uff0c\u7f16\u53f7\u5982\u4e0b\u56fe\u6240\u793a\u3002\n\n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1340B/6c9f45d01bcb06cb8414bdec7143d32cc386df85.png)\n\n\u73b0\u5728\u8fd9 $n$ \u4e2a\u706f\u7ec4\u539f\u4ef6\u4e2d\uff0c\u6709\u4e00\u4e9b\u706f\u7ba1\u4fdd\u6301\u5e38\u4eae\uff0c\u6c42\u518d\u70b9\u4eae\u6070\u597d $k$ \u4e2a\u706f\u7ba1\uff0c\u80fd\u591f\u7ec4\u6210\u7684\u6700\u5927\u7684\u6570\u662f\u591a\u5c11\u3002\n\n\u7b54\u6848\u5141\u8bb8\u6709\u524d\u5bfc\u96f6\u3002\n\n$1\\le n\\le 2000,0\\le k\\le 2000$\u3002\n### \u7b97\u6cd5\u6807\u7b7e\n\u8d2a\u5fc3 dp\n### \u7b97\u6cd5\u5206\u6790\n\u9996\u5148\u8003\u8651\u76f4\u63a5\u4ece\u524d\u5411\u540e\u8d2a\u5fc3\uff0c\u5c3d\u53ef\u80fd\u9009\u8f83\u5927\u7684\u6570\u3002\n\n\u8fd9\u65f6\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u8fd9\u6837\u7684\u8d2a\u5fc3\u53ef\u80fd\u6700\u540e\u65e0\u89e3\u3002\n\n> \u65e0\u89e3\uff1f\u90a3\u5c31\u4e0d\u8ba9\u5b83\u65e0\u89e3\uff01\n\n\u8003\u8651\u53cd\u5411dp\u5224\u65ad\u53ef\u884c\u6027\uff0c$dp(i,j)$\u8868\u793a $i$ \u5230 $n$ \u7684\u706f\u7ec4\u518d\u70b9\u4eae $j$ \u4e2a\u662f\u5426\u80fd\u6784\u6210\u6570\u5b57\u3002\n\n\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u7ecf\u5178\u7684\u80cc\u5305\u53ef\u884c\u6027\u95ee\u9898\uff0c\u53ef\u4ee5\u4ee5 $O(nk)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u6c42\u51fa\u7b54\u6848\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5728\u4ece\u524d\u5411\u540e\u7684\u8d2a\u5fc3\u8fc7\u7a0b\u4e2d\u5728\u4fdd\u8bc1\u6709\u89e3\u7684\u540c\u65f6\u8ba9\u6570\u5b57\u5c3d\u53ef\u80fd\u5927\u5373\u53ef\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(nk)$ \u3002\n### \u4ee3\u7801\u5b9e\u73b0\n\u53ef\u4ee5\u628a\u8f93\u5165\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u5904\u7406\u8f83\u4e3a\u65b9\u4fbf\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 2005\n#define maxm 2000005\n#define inf 0x3f3f3f3f\n#define LL long long\n#define mod 1000000007\n#define local\nvoid file(string s){freopen((s+\".in\").c_str(),\"r\",stdin);freopen((s+\".out\").c_str(),\"w\",stdout);}\ntemplate <typename Tp>void read(Tp &x){\n\tx=0;int fh=1;char c=getchar();\n\twhile(c>'9'||c<'0'){if(c=='-'){fh=-1;}c=getchar();}\n\twhile(c>='0'&&c<='9'){x=x*10+c-'0';c=getchar();}x*=fh;\n}\nint n,m;\nint a[maxn];\nint nm[]={119,18,93,91,58,107,111,82,127,123};\nint cst[maxn][10];\nint siz[200];\nint dp[maxn][maxn];\nsigned main(){\n\tread(n);read(m);\n\tfor(int i=1;i<=127;++i)siz[i]=siz[i-(i&(-i))]+1;\n\tfor(int i=1,x;i<=n;++i){\n\t\tfor(int j=6;~j;--j){\n\t\t\tscanf(\"%1d\",&x);\n\t\t\tif(x)a[i]|=(1<<j);\n\t\t}\n\t\tfor(int j=0;j<10;++j){\n\t\t\tif((a[i]&nm[j])==a[i]){\n\t\t\t\tcst[i][j]=siz[nm[j]^a[i]];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcst[i][j]=-1;\n\t\t\t}\n\t\t}\n\t}\n        //\u53ef\u884c\u6027dp\n\tdp[n+1][0]=1;\n\tfor(int i=n;i;--i){\n\t\tfor(int j=0;j<=m;++j){\n\t\t\tfor(int k=0;k<10;++k){\n\t\t\t\tif(~cst[i][k]){\n\t\t\t\t\tif(j>=cst[i][k])dp[i][j]|=dp[i+1][j-cst[i][k]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n        //\u8d2a\u5fc3\n\tfor(int i=1;i<=n;++i){\n\t\tint fl=-1;\n\t\tfor(int k=9;~k;--k){\n\t\t\tif(cst[i][k]==-1)continue;\n\t\t\tif(dp[i+1][m-cst[i][k]]){\n\t\t\t\tfl=k;break;\n\t\t\t}\n\t\t}\n\t\tif(fl==-1){\n\t\t\tputs(\"-1\");\n\t\t\treturn 0;\n\t\t}\n\t\tprintf(\"%d\",fl);\n\t\tm-=cst[i][fl];\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1601461883,
        "uid": 35871,
        "name": "ZigZagKmp",
        "ccfLevel": 7,
        "title": "CF1340B \u9898\u89e3"
    },
    {
        "content": "\u6302\u4e00\u4e0b[\u535a\u5ba2\u94fe\u63a5](https://www.luogu.com.cn/blog/Fairicle/solution-cf1340b)\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u6570\u5b57\u5355\u72ec\u8003\u8651\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u9898\u76ee\u7ed9\u5b9a\u7684 01 \u4e32\u80fd\u591f\u8f6c\u5316\u6210\u7684\u6570\u5b57\uff0c\u90a3\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u80cc\u5305\u3002\n\n\u91cd\u91cf $w$ \u4e3a\u9700\u8981\u70b9\u4eae\u7684\u6570\u76ee\uff0c\u4ef7\u503c $v$ \u5c31\u662f\u8f6c\u53d8\u6210\u7684\u6570\u5b57\uff08\u4f46\u662f\u8fd9\u91cc\u9700\u8981\u8003\u8651\u4f4d\u6570\uff09\u3002\u6211\u4eec\u5bf9\u6bcf\u4e2a\u4f4d\u7f6e\u5f00 vector \u8bb0\u5f55\u80fd\u8f6c\u5316\u7684\u6570\u5b57\u53ca\u9700\u8981\u70b9\u4eae\u7684\u6570\u76ee\uff0c\u7528\u4e00\u4e2a pair \u5b58\u50a8\u3002\n\n\u8fd9\u9898\u5b58\u5728\u65e0\u89e3\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5224\u65ad\u53ef\u884c\u6027\u3002\n\n\u8bbe $f_{i,j}$ \u8868\u793a\u5728\u76ee\u524d\u5904\u7406\u5230\u7b2c $i$ \u4f4d\uff0c\u603b\u5171\u70b9\u4eae\u4e86 $j$ \u6b21\u7684\u53ef\u884c\u6027\uff081 \u4ee3\u8868\u53ef\u4ee5\uff0c0 \u4ee3\u8868\u4e0d\u884c\uff09\n\n\u521d\u59cb\u5316 $f_{n+1,0}=1$\n\n\u8f6c\u79fb\u65b9\u7a0b $f_{i,j} = f_{i,j}\\ | \\ f_{i+1,j-w}$\n\n\u5982\u679c\u6700\u540e $f_{1,k}=1$ \u4ee3\u8868\u53ef\u884c\uff0c\u63a5\u4e0b\u6765\u8ba1\u7b97\u7b54\u6848\uff0c\u5982\u679c\u7b49\u4e8e 0\uff0c\u5c31\u76f4\u63a5\u8f93\u51fa -1\u3002\n\n\u8ba1\u7b97\u7b54\u6848\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u8d2a\u5fc3\u7684\u505a\uff0c\u4ece\u9ad8\u4f4d\u5411\u4f4e\u4f4d\u8fdb\u884c\u9009\u62e9\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u4ece 9 \u5230 0 \u8fdb\u884c\u9009\u62e9\u3002\u5219\u9009\u62e9\u7b2c\u4e00\u4e2a\u53ef\u884c\u7684\u6570\u5fc5\u5b9a\u80fd\u4f7f\u7b54\u6848\u6700\u5927\u3002\n\n\u5047\u8bbe\u5728\u9009\u62e9\u7b2c $i$ \u4f4d\uff0c\u5269\u4f59\u53ef\u7528\u7684\u70b9\u4eae\u6b21\u6570\u4e3a $res$\uff0c\u8fd9\u4e2a\u6570\u9700\u8981\u70b9\u4eae $w$ \u4e2a\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u7684\u6761\u4ef6\u4e3a $f_{i+1,res-w}=1$ \u3002\n\n\u5177\u4f53\u89c1\u4ee3\u7801\uff0c\u91cc\u9762\u6709\u89e3\u91ca\uff1a\n```cpp\n#include\"bits/stdc++.h\"\nusing namespace std;\n#define ll long long\n#define ul unsigned long long\n#define ui unsigned int\n#define ri register int\n#define pb push_back\nstring p[15]={\"1110111\",\"0010010\",\"1011101\",\"1011011\",\"0111010\",\"1101011\",\"1101111\",\"1010010\",\"1111111\",\"1111011\"};\ninline int rd(){\n\tint x=0,flag=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-') flag=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+(ch^48);ch=getchar();}\n\treturn x*flag;\n}\n#define N 2010\nint n,k,f[N][N];\nchar ch[N];\ntypedef pair<int,int>pp;\nvector<pp>a[N];\nint main()\n{\n\tios::sync_with_stdio(false);\n\tn=rd(),k=rd();\n\tfor(ri i=1;i<=n;++i){\n\t\tscanf(\"%s\",ch);\n\t\tfor(ri j=9;j>=0;--j){\n\t\t\tint cnt=0,flg=0;\n\t\t\tfor(ri k=0;k<7;++k){\n\t\t\t\tif(ch[k]==p[j][k]) continue;\n\t\t\t\tif(ch[k]=='1'){\n\t\t\t\t\tflg=1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcnt++;\n\t\t\t}\n\t\t\tif(flg) continue;\n\t\t\ta[i].pb(make_pair(cnt,j));\n\t\t}\n\t}//\u9884\u5904\u7406\n\tf[n+1][0]=1;\n\tfor(ri i=n;i>=1;--i){\n\t\tfor(ri l=0;l<a[i].size();++l){\n\t\t    for(int j=a[i][l].first;j<=k;j++){\n\t\t\t\tint w=a[i][l].first;\n\t\t\t\tf[i][j]|=f[i+1][j-w];\n\t\t\t}\n\t\t}\n\t}//\u5408\u6cd5\u6027\u5224\u65ad\n\tif(!f[1][k]){\n\t\tcout<<-1;\n\t\treturn 0;\n\t}\n\tstring ans=\"\";\n\tint cnt=k;\n\tfor(ri i=1;i<=n;++i){\n\t\tfor(ri j=0;j<a[i].size();++j){\n\t\t\tint w=a[i][j].first;\n\t\t\tif(cnt<w) continue;\n\t\t\tif(f[i+1][cnt-w]){\n\t\t\t\tchar ch=a[i][j].second+'0';\n\t\t\t\tans=ans+ch;\n\t\t\t\tcnt-=w;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}//\u7b54\u6848\u8ba1\u7b97\n\tcout<<ans;\n    return 0;\n}\n```\n",
        "postTime": 1588154231,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1340B \u3010Nastya and Scoreboard\u3011"
    }
]
[
    {
        "content": "### \u55ef\uff1f\u4e00\u7247\u9898\u89e3\u90fd\u6ca1\u6709\uff1f\n\n~~\u6c34\u4e00\u6ce2\u793e\u533a\u8d21\u732e~~\n\n\u660e\u663e\uff0c\u6839\u636e\u6570\u636e\u8303\u56f4\uff1an<=200000 ,\u53ea\u80fd\u4f7f\u7528nlogn\u7684\u7b97\u6cd5\n\n\u4e8e\u662f\uff0c\u795e\u5947\u7684\u4e8c\u5206\u5c31\u51fa\u73b0\u4e86\n\n\u6b64\u9898\u5e94\u4f7f\u7528\u653b\u51fb\u529b\u524d\u7f00\u548c\u5728\u58eb\u5175\u8840\u91cf\u7684\u524d\u7f00\u548c\u7684\u6570\u7ec4\u91cc\u4e8c\u5206\u67e5\u627e\n\n\u4e8c\u5206\u53ef\u4ee5\u624b\u5199\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528STL\u7684\u4e8c\u5206\u51fd\u6570\n\n\u52a0\u4e86\u8bfb\u5165\u4f18\u5316\uff0c\u901f\u5ea6\u4f1a\u66f4\u5feb\u4e00\u4e9b\n\nok,\u4e0a\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong long n,q,x,p;\nlong long a[200005];\nlong long read()//\u8bfb\u5165\u4f18\u5316\n{\n    long long X=0; char ch=0;\n    while(!isdigit(ch)) ch=getchar();\n    while(isdigit(ch)) X=(X<<3)+(X<<1)+(ch^48),ch=getchar();\n    return X;\n}\nint main(){\n\tcin>>n>>q;\n\tfor(int i=1;i<=n;i++){\n\t\tx=read();\n\t\ta[i]=a[i-1]+x;//\u5b58\u524d\u7f00\u548c\n\t}\n\tfor(int i=1;i<=q;i++){\n\t\tx=read();\n\t\tp+=x;\n\t\tlong long* r=upper_bound(a+1,a+n+1,p);//\u4e8c\u5206\uff0c\u6ce8\u610f\u8fd4\u56de\u7c7b\u578b\n\t\tif(r-a==n+1){//\u5168\u5012\u4e86\n\t\t\tprintf(\"%d\\n\", n);\n\t\t\tp=0;//\u524d\u7f00\u548c\u91cd\u7f6e\n\t\t}\n\t\telse printf(\"%d\\n\", n-(r-a-1));\n\t}\n}\n\n```",
        "postTime": 1544327405,
        "uid": 93041,
        "name": "__Watcher",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF975C \u3010Valhalla Siege\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF975C)\n\n\u4e00\u9053\u4e8c\u5206\u9898\u3002\n\n\u5148\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c$1\\le n,q\\le 200,000$\uff0c\u663e\u7136\u9700\u8981 $O(n\\log n)$ \u7684\u590d\u6742\u5ea6\u3002\u4e14 $1\\le k_i\\le 10^{14}$\uff0c\u9700\u8981\u5f00 `long long`\u3002\n\n\u6211\u4eec\u9700\u8981\u4e8c\u5206\u5230\u7b2c\u4e00\u4e2a\u8840\u91cf\u5927\u4e8e\u4f24\u5bb3\u503c\u7684\u6b66\u58eb\u7684\u4f4d\u7f6e\uff0c\u524d\u9762\u7684\u6b66\u58eb\u90fd\u6b7b\u4e86\u3002\u800c\u5728 `C++` \u7b97\u6cd5\u5e93\u4e2d\uff0c\u6709\u4e00\u4e2a\u51fd\u6570 `upper_bound`\uff08\u5e95\u5c42\u539f\u7406\u662f\u4e8c\u5206\uff09\u6b63\u597d\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5b9e\u73b0\u6b64\u529f\u80fd\u3002\n\n\u53e6\u5916\uff0c\u4e3a\u4e86\u4f18\u5316\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u6211\u4eec\u9009\u62e9\u7528\u524d\u7f00\u548c\u6765\u5b58\u50a8\u6b66\u58eb\u4eec\u7684\u8840\u91cf\u4e0e\u4f24\u5bb3\u3002\n\n### Code\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define INF 1e9\nusing namespace std;\nll n, q, d; // d \u8868\u793a\u4f24\u5bb3\nll sum[200005]; // \u524d\u7f00\u548c\nsigned main() {\n    ios :: sync_with_stdio(0);\n\tcin >> n >> q;\n\tfor (int i = 1; i <= n; i++) {\n\t\tll x;\n        cin >> x;\n\t\tsum[i] = sum[i - 1] + x;\n\t}\n\tfor (int i = 1; i <= q; i++) {\n        ll x;\n\t\tcin >> x;\n\t\td += x;\n\t\tll loc = upper_bound(sum + 1, sum + n + 1, d) - sum; // \u67e5\u627e\u7b2c\u4e00\u4e2a\u8840\u91cf\u5927\u4e8e\u4f24\u5bb3\u7684\u6b66\u58eb\u7684\u4f4d\u7f6e  \n        loc--; // \u6b7b\u4e86\u591a\u5c11\u4e2a\u6b66\u58eb \n\t\tif (loc >= n) { // \u5168\u6b7b\u4e86\u7684\u60c5\u51b5\n            d = 0; // \u4f24\u5bb3\u6e05\u96f6\n\t\t\tcout << n << \"\\n\"; // \u5168\u90e8\u590d\u6d3b\uff0c\u6240\u4ee5\u6709 n \u4e2a\u6b66\u58eb\n\t\t}\n\t\telse cout << n - loc << \"\\n\"; // \u5269\u4f59\u7684\u6b66\u58eb\n\t}\n}\n\n\n```\n",
        "postTime": 1682509228,
        "uid": 760266,
        "name": "xvl_",
        "ccfLevel": 0,
        "title": "Valhalla Siege \u9898\u89e3"
    },
    {
        "content": "[\u70b9\u6211\u770b\u9898](https://www.luogu.com.cn/problem/CF975C)\n\n\u9898\u76ee\u5927\u610f\uff1a\n\n```\n\u6709n\u4e2a\u6b66\u58eb\u7ad9\u6210\u4e00\u5217\uff0c\u6bcf\u4e2a\u6b66\u58eb\u6709\u81ea\u5df1\u7684\u8840\u91cf\u3002\n\n\u4e00\u4e2a\u4eba\u5c04\u7bad\u653b\u51fb\u4ed6\u4eec\uff0c\u6bcf\u7bad\u9020\u6210\u4e00\u70b9\u4f24\u5bb3\u3002\u6b66\u58eb\u6309\u7167\u7ed9\u5b9a\u7684\u987a\u5e8f\u627f\u53d7\u4f24\u5bb3\u3002\n\n\u5982\u679c\u8840\u91cf\u88ab\u6d88\u8017\u5b8c\u4e86\uff0c\u90a3\u4e48\u6b66\u58eb\u5c31\u4f1a\u6b7b\u6389\uff0c\u800c\u4e0b\u4e00\u6b21\u4f24\u5bb3\u4f1a\u843d\u5230\u4e0b\u4e00\u4e2a\u6b66\u58eb\u8eab\u4e0a\u3002\n\n\u5982\u679c\u4e00\u8f6e\u653b\u51fb\u4e4b\u540e\uff0c\u6240\u6709\u7684\u6b66\u58eb\u90fd\u6b7b\u4e86\uff0c\u90a3\u4e48\u4ed6\u4eec\u4f1a\u7acb\u5373\u590d\u6d3b\u3002\n\n\u7ed9\u51fa\u82e5\u5e72\u4e2a\u8be2\u95ee\uff0c\u95ee\u6bcf\u8f6e\u653b\u51fb\u4e4b\u540e\u8fd8\u5269\u591a\u5c11\u6b66\u58eb\u6d3b\u7740\u3002\n```\n\n\u770b\u5230dalao\u4eec\u90fd\u7528 $STL$ \u7684 $upper$__$bound$ \u6765\u4e8c\u5206\uff0c\u50cf\u6211\u8fd9\u79cd\u849f\u84bb\u8868\u793a\u867d\u7136\u5f88\u5389\u5bb3\uff0c\u4f46\u8fd8\u662f\u81ea\u5df1\u624b\u5199\u4e00\u4e0b\u4e8c\u5206\u66f4\u6709\u52a9\u4e8e\u7406\u89e3\u4e0e\u953b\u70bc\u3002\u4e8e\u662f\uff0c\u5c31\u6709\u4e86\u8fd9\u7bc7\u4e8c\u5206\u9898\u89e3\u3002\n\n\u601d\u8def\uff1a\u4e8c\u5206\u6700\u540e\u4e00\u4e2a\u88ab\u6253\u5012\u7684\u6b66\u58eb\u4f4d\u7f6e\uff0c\u7ef4\u62a4\u4e00\u4e2a\u524d\u7f00\u548c\uff0c\u5224\u65ad\u76ee\u524d\u7684\u4f24\u5bb3\u80fd\u5426\u4f7f\u5f53\u524d\u8fd9\u4e2a\u6b66\u58eb\u6b7b\u4ea1\uff0c\u7136\u540e\u7ee7\u7eed\u8fdb\u884c\u4e8c\u5206\u3002\n\n\u65b9\u6cd5\uff08\u4ee5\u4e00\u6b21\u8be2\u95ee\u4e3a\u4f8b\uff09\uff1a\n\n- $1.$ \u8f93\u5165\u5c04\u51fa\u7684\u7bad\u6570\uff1b\n\n- $2.$ \u4e8c\u5206\u67e5\u627e\u80fd\u4f7f\u54ea\u4e00\u4e2a\u6b66\u58eb\u6700\u540e\u6b7b\u4ea1\uff1b\n\n- $3.$ \u5224\u65ad\u662f\u5426\u53ef\u884c\uff1b\n\n- $4.$ \u6839\u636e\u4e0a\u4e00\u6b65\u7ed3\u679c\u66f4\u65b0\u7b54\u6848\u5e76\u4fee\u6539\u8303\u56f4\uff0c\u540c\u65f6\u8bb0\u5f55\u4fee\u6539\u8d77\u70b9\uff1b\n\n- $5.$ \u7ee7\u7eed\u4e8c\u5206\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define LL long long//\u4e2a\u4eba\u4e60\u60ef \nusing namespace std;\nLL n,q,a,k,h,s[200005];//n\u3001q\u3001a\u548ck\u5982\u9898\u610f\uff0ch\u662f\u603b\u4f24\u5bb3\uff0cs\u662f\u524d\u7f00\u548c \nLL fid(LL x)//fid\u51fd\u6570\u662f\u7528\u6765\u5bfb\u627e\u6700\u540e\u4e00\u4e2a\u88ab\u6253\u5012\u7684\u6b66\u58eb\u4f4d\u7f6e\u7684 \n{\n\tLL l=1,r=n,mid;//l\uff0cr\u548cmid\u5206\u522b\u662f\u4e8c\u5206\u7684\u5de6\u53f3\u533a\u95f4\u548c\u5f53\u524d\u679a\u4e3e\u7684\u4f4d\u7f6e\n\twhile(l<=r)//\u4e8c\u5206\u677f\u5b50 \n\t{\n\t\tmid=l+((r-l)>>1);//\u9632\u6b62\u7206\u6389\uff08\u7b49\u4ef7\u4e8e\uff08l+r\uff09/2\uff09 \n\t\tif(s[mid]<=x)l=mid+1;//\u5982\u679c\u53ef\u884c\uff0c\u6269\u5927\u4e0a\u754c    \n\t\telse r=mid-1;//\u5982\u679c\u4e0d\u53ef\u884c\uff0c\u7f29\u5c0f\u4e0b\u754c\n\t}\n\treturn l;//\u8fd4\u56de\u7ed3\u679c \n}\nint main()\n{\n\tscanf(\"%lld%lld\",&n,&q);//\u8f93\u5165 \n\tfor(LL i=1;i<=n;i++)scanf(\"%lld\",&a),s[i]=s[i-1]+a;//\u8f93\u5165\u7684\u540c\u65f6\u8ba1\u7b97\u524d\u7f00\u548c\t\n\tfor(LL i=1;i<=q;i++)//q\u6b21\u8be2\u95ee \n\t{\n\t\tscanf(\"%lld\",&k);\n\t\th+=k;//\u603b\u4f24\u5bb3\u52a0\u4e0a\u8fd9\u6b21\u7684\u4f24\u5bb3 \n\t\tLL p=fid(h)-1;//p\u662f\u627e\u5230\u7684\u4e00\u4e2a\u88ab\u6253\u5012\u7684\u6b66\u58eb\u4f4d\u7f6e \n\t\tif(p>=n)p=0,h=0;//\u5982\u679c\u5168\u6740\u5149\u4e86\uff0c\u5c31\u4f1a\u5168\u90e8\u590d\u6d3b \n\t\tprintf(\"%lld\\n\",n-p);//\u8f93\u51fa\u5269\u4f59\u6b66\u58eb\u6570 \n\t}\n\treturn 0;//\u7ed3\u675f\u7a0b\u5e8f \n}\n```",
        "postTime": 1609221080,
        "uid": 329071,
        "name": "\u674e\u81f3\u64ce",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF975C \u3010Valhalla Siege\u3011"
    },
    {
        "content": "\u672c\u9898\u53ef\u4ee5\u7528\u4e8c\u5206\u6cd5\u6765\u505a\n\n\u5206\u522b\u8bb0\u5f55\u58eb\u5175\u8840\u91cf\u548c\u6bcf\u5206\u949f\u653b\u51fb\u529b\u7684\u524d\u7f00\u548c\uff0c\u627e\u6bcf\u5206\u949f\u80fd\u591f\u6253\u5012\u51e0\u4e2a\u58eb\u5175\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include <stdio.h>\n#include <algorithm>\nusing namespace std;\n\nint n, m;\nlong long b[200005], f[200005];//\u4e0d\u5f00longlong\u4f1aWA\n\nint main(){\n\tscanf(\"%d%d\", &n, &m);\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%lld\", &f[i]);\n\t\tf[i] = f[i] + f[i-1];//\u8bb0\u5f55\u524d\u7f00\u548c\n\t}\n\tf[n+1] = 1e9;\n\tfor(int i=1; i<=m; i++){\n\t\tscanf(\"%lld\", &b[i]);\n\t\tb[i] = b[i] + b[i-1];\n\t\tint p = upper_bound(f+1, f+n+1, b[i]) - f;//\u4e8c\u5206\u67e5\u627e\u6700\u540e\u4e00\u4e2a\u6ca1\u6709\u88ab\u6253\u5012\u7684\u4eba\n\t\tp--;\n\t\tif(p >= n) {\n\t\t\tp = 0;\n\t\t\tb[i] = 0;\n\t\t}//\u5982\u679c\u6240\u6709\u58eb\u5175\u90fd\u88ab\u6253\u5012\uff0c\u96c6\u4f53\u590d\u6d3b\uff08\u5373\u524d\u7f00\u548c\u5f52\u96f6\uff0c\u88ab\u6253\u50120\u4e2a\u4eba\n\t\tprintf(\"%d\\n\", (n-p));//\u8f93\u51fa\u5269\u4e0b\u6ca1\u6709\u88ab\u6253\u5012\u7684\u4eba\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1544324720,
        "uid": 73947,
        "name": "jojoxie",
        "ccfLevel": 0,
        "title": "CF975C Valhalla Siege"
    }
]
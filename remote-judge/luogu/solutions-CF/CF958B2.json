[
    {
        "content": "## CF958B2 \u9898\u89e3\n\n+ ### \u9898\u610f\n\n  \u7ed9\u4f60\u4e00\u9897\u7531 $n$ \u4e2a\u70b9\u7ec4\u6210\u7684**\u6811**\uff08$1\\leq n\\leq 10^5$\uff09\u3002\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u96c6 $S$,\u5b83\u6240**\u5360\u9886**\u7684\u70b9\u4e3a\uff1a\n\n  - \u70b9\u96c6 $S$ \u4e2d\u7684\u6240\u6709\u70b9\n  - \u5bf9\u4e8e\u4efb\u610f $u,v \\in S$\uff0c$u$ \u5230 $v$ \u8def\u5f84\u4e0a\u7684\u70b9\u3002\n\n  \u73b0\u5728\u95ee\u4f60\u5f53\u70b9\u96c6\u7684\u5927\u5c0f\u5206\u522b\u4e3a $1$ \u5230 $n$ \u65f6\uff0c **\u5360\u9886**\u7684\u70b9\u7684\u6570\u91cf\u6700\u5927\u662f\u591a\u5c11\uff1f\n\n+ ### \u601d\u8def\n\n  \u4ece\u6700\u7b80\u5355\u7684\u60c5\u51b5\u5165\u624b\u3002\n\n  \u663e\u7136 $k=1$ \u65f6\uff0c$ans = 1$\u3002\n\n  \u663e\u7136 $k=2$ \u65f6\uff0c\u6211\u4eec\u9009\u53d6\u6811\u7684\u76f4\u5f84\u4f5c\u4e3a\u6700\u4f18\u7684\u8def\u5f84\u3002\n\n  \u5f53 $k=3$ \u65f6\uff0c\u6211\u4eec\u8003\u8651\u5728\u76f4\u5f84\u5916\u53e6\u627e\u4e00\u4e2a\u70b9\uff0c\u663e\u7136\u6700\u4f18\u7684\u65b9\u6848\u662f\u9009\u62e9\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u3002\n\n  \u6211\u4eec\u53ef\u4ee5\u4e00\u6b21dfs\u6c42\u51fa\u6bcf\u4e2a\u70b9\u5b50\u6811\u4e2d\u6700\u6df1\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u8d2a\u5fc3\u5728\u76f4\u5f84\u4e0a\u9009\u53d6\u5373\u53ef\u3002\n\n  $k=4,5,6....$ \u65f6\uff0c\u6211\u4eec\u5728\u5269\u4e0b\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u63a5\u7740\u9009\u53d6\u3002\u8fd9\u65f6\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u68f5\u5b50\u6811\u53ea\u80fd\u6709\u4e00\u6761\u8def\u5f84\u8986\u76d6\u5230\u5b50\u6811\u6839\u8282\u70b9\u4ee5\u4e0a\u7684\u70b9\uff0c\u9009\u5176\u5b83\u8def\u5f84\u65f6\u5b50\u6811\u4ee5\u4e0a\u5df2\u7ecf\u88ab\u8986\u76d6\u5b8c\u4e86\u3002\n\n  \u8fd9\u4e2a\u601d\u60f3\u548c\u8f7b\u91cd\u94fe\u5256\u5206\u7684\u601d\u60f3\u597d\u50cf\u554a\u3002\n\n  \u6240\u4ee5\u5c31\u6309\u7167\u5dee\u4e0d\u591a\u7684\u601d\u8def\u5256\u5206\u5c31\u597d\u4e86\u3002\n\n+ ### \u4ee3\u7801\n\n  `dfs1` \u6c42\u51fa\u76f4\u5f84\u7684\u4e00\u7aef\uff0c`dfs2` \u548c\u5256\u5206\u601d\u8def\u76f8\u540c\uff0c\u6c42\u51fa\u91cd\u513f\u5b50\uff0c`dfs3` \u5904\u7406\u51fa\u8f7b\u91cd\u513f\u5b50\u7684\u7b54\u6848\uff0c\u7136\u540e\u8d2a\u5fc3\u9009\u53d6\u3002\n\n  ```cpp\n  #include<bits/stdc++.h>\n  using namespace std;\n  \n  #define ll long long\n  const int maxn=1e5+5;\n  int n,u,v,rt,d[maxn],son[maxn],h[maxn];\n  int head[maxn],cnt;\n  struct edge{\n  \tint to,next;\n  }e[maxn<<1];\n  vector<int>val;\n  \n  void adde(int u,int v){\n  \te[++cnt].to=v;\n  \te[cnt].next=head[u];\n  \thead[u]=cnt;\n  }\n  \n  void dfs1(int u,int fa){\n  \td[u]=d[fa]+1;int num=0;\n  \tfor(int i=head[u];i;i=e[i].next){\n  \t\tint v=e[i].to;if(v==fa)continue;\n  \t\tdfs1(v,u);num++;\n  \t}if(!num){if(!rt||d[u]>=d[rt])rt=u;}\n  }\n  \n  void dfs2(int u,int fa){d[u]=d[fa]+1;h[u]=d[u];\n  \tfor(int i=head[u];i;i=e[i].next){\n  \t\tint v=e[i].to;if(v==fa)continue;\n  \t\tdfs2(v,u);h[u]=max(h[u],h[v]);\n  \t\tif(!son[u])son[u]=v;\n  \t\telse if(h[son[u]]<h[v])son[u]=v;\n  \t}\n  }\n  \n  void dfs3(int u,int fa,int tp){\n  \tif(!son[u]){val.push_back(d[u]-d[tp]);return;}\n  \tdfs3(son[u],u,tp);\n  \tfor(int i=head[u];i;i=e[i].next){\n  \t\tint v=e[i].to;if(v==fa)continue;\n  \t\tif(v==son[u])continue;\n  \t\tdfs3(v,u,u);\n  \t}\n  }\n  \n  int main(){\n  \tscanf(\"%d\",&n);\n  \tfor(int i=1;i<n;i++){\n  \t\tscanf(\"%d%d\",&u,&v);\n  \t\tadde(u,v);adde(v,u);\n  \t}rt=0;ll ans=0;\n  \tdfs1(1,0);dfs2(rt,0);dfs3(rt,0,0);printf(\"1 \");\n  \tsort(val.begin(),val.end(),greater<int>());\n  \tfor(int i=2;i<=n;i++){\n  \t\tif(i-2<val.size())ans+=val[i-2];\n  \t\tprintf(\"%lld \",ans);\n  \t}return 0;\n  }\n  ```\n\n  ",
        "postTime": 1610113093,
        "uid": 65502,
        "name": "Crab_Dave",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF958B2 \u3010Maximum Control (medium)\u3011"
    },
    {
        "content": "# \u9898\u610f\n\u4e00\u68f5\u6811\uff0c\u6c42\u51fa\u6700\u957f\u4e0d\u91cd\u94fe\u8986\u76d6\u3002[$QAQ$](https://www.luogu.com.cn/blog/xzc/solution-cf958b2)\n# \u5206\u6790\n\u4e00\u4e2a\u8282\u70b9\u53ea\u4f1a\u88ab\u4e00\u6761\u94fe\u8986\u76d6\u3002\u90a3\u4e48\u6839\u636e\u957f\u94fe\u5256\u5206\u7684\u601d\u60f3\uff0c\u53ea\u9700\u8981\u628a\u6240\u6709\u94fe\u50a8\u5b58\u4e0b\u6765\u6392\u4e2a\u5e8f\u5c31\u53ef\u4ee5\u4e86\uff0c\u8d2a\u5fc3\u7684\u9009\u53d6\u6700\u5927\u7684\u94fe\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log n)$ \u3002\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read() {\n\tint x = 0,f = 0;char ch = getchar();\n\twhile(!isdigit(ch)) {if(ch == '-') f = 1;ch = getchar();}\n\twhile(isdigit(ch)) {x = x * 10 + ch - '0';ch = getchar();}\n\treturn f ? -x : x;\n}\nconst int N = 1e5 + 10;\nvector<int> G[N],len;\nint rt,dep[N],f[N],son[N],n; \nvoid dfs1(int x,int fa,int d) {\n\tdep[x] = d;\n\tfor(auto y:G[x]) {if(y == fa) continue;dfs1(y,x,d+1);}\n\tif(dep[rt] < dep[x]) rt = x;\n}\nvoid dfs2(int x,int fa) {\n\tfor(auto y:G[x]) {if(y == fa) continue;dfs2(y,x);if(f[son[x]]<f[y])son[x] = y;} \n\tf[x] = f[son[x]] + 1;\n\tfor(auto y:G[x]) {if(y == fa||y == son[x]) continue;len.push_back(f[y]);}\n}\nsigned main() {\n\tn = read();\n\tfor(int i = 1;i < n;i++) {\n\t\tint a = read(),b = read();\n\t\tG[a].push_back(b);G[b].push_back(a);\n\t}\n\tdfs1(1,0,1);\n\tdfs2(rt,0);len.push_back(f[rt]);\n\tsort(len.begin(),len.end());\n\tint ans = 0;printf(\"1 \");\n\tif(n == 1) return 0;\n\tfor(int i = len.size()-1;~i;i--) {\n\t\tprintf(\"%d \",ans = ans+len[i]);\n\t}\n\tn = n - len.size() - 1;\n\twhile(n--) printf(\"%d \",ans);printf(\"\\n\");\n\treturn 0;\n}\n```\n",
        "postTime": 1599568794,
        "uid": 227824,
        "name": "JK_LOVER",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF958B2 \u3010Maximum Control (medium)\u3011"
    },
    {
        "content": "\u6211\u4eec\u8003\u8651\u6bcf\u6b21\u64cd\u4f5c\u662f\u5c06\u4e00\u6bb5\u8def\u5f84\u67d3\u8272\uff0c\u7136\u540e\u8d2a\u5fc3\u5730\u518d\u627e\u5230\u4e00\u4e2a\u5230\u67d3\u8fc7\u8272\u7684\u70b9\u6700\u8fd1\u8ddd\u79bb\u6700\u8fdc\u7684\u70b9\u518d\u67d3\u8272\u5b83\u548c\u5176\u5b83\u70b9\u7684\u8def\u5f84\uff0c\u7136\u540e\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff0c\u5c31\u662f\u4ee5\u76f4\u5f84\u4e0a\u4efb\u610f\u4e00\u4e2a\u70b9\u505a\u6839\u540e\uff0c\u5982\u679c $u$ \u6ca1\u88ab\u67d3\u8272\uff0c\u5219 $u$ \u7684\u5b50\u6811\u90fd\u6ca1\u88ab\u67d3\u8272\uff0c\u7136\u540e\u6211\u4eec\u5c31\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6bcf\u4e2a\u70b9\u5230\u67d3\u8272\u8fc7\u8272\u7684\u70b9\u7684\u6700\u8fd1\u8ddd\u79bb\u3002\n\n\u7136\u540e\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u627e\u5230\u6700\u8fd1\u8ddd\u79bb\u6700\u8fdc\u7684\u70b9\uff0c\u4e00\u76f4\u8df3 $father$ \u76f4\u5230 $father$ \u88ab\u67d3\u8fc7\u8272\uff0c\u8df3\u7684\u8fc7\u7a0b\u4e2d\u7ebf\u6bb5\u6811\u6743\u503c\u6e05\u96f6\u5e76\u66f4\u65b0\u5b83\u513f\u5b50\u7684\u5b50\u6811\u7684\u7b54\u6848\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a[https://codeforc.es/problemset/submission/958/199635294](https://codeforc.es/problemset/submission/958/199635294).",
        "postTime": 1680078952,
        "uid": 202791,
        "name": "louis_11",
        "ccfLevel": 0,
        "title": "CF958B2"
    }
]
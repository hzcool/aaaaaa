[
    {
        "content": "\n\u60f3\u60f3 Repeat \u5728\u5e72\u4ec0\u4e48\u3002\u5047\u8bbe\u73b0\u5728\u662f\u7b2c $i$ \u6b21\uff0c\u76ee\u524d\u603b\u5171\u4f24\u5bb3\u662f $x$\uff08\u8fd9\u4e2a $x$ \u5f88\u597d\u8ba1\u7b97\uff0c\u6bcf\u6b21 Repeat \u4f24\u5bb3\u4f1a\u4e58 $2$\uff09\u3002\u90a3\u4e48\u7ecf\u8fc7 Repeat \u540e\uff0c\u6bcf\u53ea\u76ee\u524d\u751f\u547d\u4e3a $w$ \u732a\u4f1a\u514b\u9686\u4e00\u4e2a\u751f\u547d\u4e3a $w-x$ \u7684\u732a\u3002\uff08\u539f\u56e0\uff1aRepeat \u4f1a\u91cd\u65b0\u505a\u4e00\u904d\u4e4b\u524d\u7684\u4e1c\u897f\uff0c\u90a3\u4e48\u539f\u6709\u7684\u6bcf\u53ea\u732a\u80af\u5b9a\u8fd8\u4f1a\u518d\u751f\u6210\u4e00\u4efd\u4e14\u548c\u5b83\u4fdd\u6301\u4e00\u81f4\uff0c\u800c\u5b83\u4f1a\u906d\u5230 $x$ \u7684\u653b\u51fb\uff0c\u6240\u4ee5\u53ef\u4ee5\u8ba4\u4e3a\u514b\u9686\u4e86 $w-x$ \u7684\u732a\uff09\n\n\u90a3\u4e48\u8003\u8651\u6bcf\u4e00\u53ea\u521b\u9020\u7684\u732a\uff0c\u6bcf\u4e2a\u6b63\u5e38\u7684 Attack \u64cd\u4f5c\u90fd\u6709\u6548\uff0c\u800c Repeat \u4f1a\u514b\u9686\u3002\u8fd9\u5c31\u8868\u793a\u53ef\u4ee5\u5148\u628a\u732a\u7684\u751f\u547d\u51cf\u6389\u5b83\u540e\u9762\u7684\u6240\u6709 Attack\uff0c\u518d\u8003\u8651\u6240\u6709\u514b\u9686\u3002\u800c\u514b\u9686\u4e5f\u5c31\u662f\u6bcf\u6b21 Repeat \u9009\u62e9\u51cf\u6389 $x$ \u6216\u8005\u4e0d\u526a\u6389 $x$\uff0c\u5408\u8d77\u6765\u4e00\u4e2a $2$ \u7684\u82e5\u5e72\u6b21\u65b9\u7684\u96c6\u5408\u3002\n\n\u5047\u8bbe\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u662f Attack\u3002\u90a3\u4e48\u6bcf\u6b21 Repeat \u4f24\u5bb3\u4f1a\u4e58 $2$\uff0c\u56e0\u6b64\u5728 $\\log$ \u6b21\u540e\u7684 Repeat \u4f24\u5bb3\u8db3\u4ee5\u5e72\u6389\u4efb\u4f55\u4e00\u53ea\u732a\u3002\u6240\u4ee5 $\\log$ \u6b21\u540e\u7684 Repeat \u5fc5\u987b\u9009\u62e9\u4e0d\u526a\u6389 $x$\u3002\u90a3\u4e48\u679a\u4e3e $\\log$ \u6b21\u524d\u7684 Repeat \u64cd\u4f5c\u7684\u5b50\u96c6\u5c31\u884c\u4e86\uff0c\u5012\u7740\u505a\u3002\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7b97\u51fa\u5bf9\u4e8e\u4e00\u53ea\u8840\u91cf $x$ \u7684\u732a\uff0c\u6700\u540e\u4f1a\u5269\u51e0\u53ea\u3002\u4e5f\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e\u4e00\u4e0b\u5b50\u96c6\u3002\n\n\u4f46\u662f\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u4e0d\u4e00\u5b9a\u662f Attack\uff01\u90a3\u6211\u4eec\u627e\u5230\u7b2c\u4e00\u4e2a Attack \u518d\u505a\uff0c\u524d\u9762\u7684\u90e8\u5206\u80af\u5b9a\u662f\u732a\u5728\u4e0d\u505c\u514b\u9686\uff0c\u53ea\u8981\u4e58\u4e0a\u4e00\u4e2a\u7cfb\u6570\u5c31\u884c\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O((n+x)\\log x)$\u3002\u540e\u6765\u9a8c\u9898\u7684\u65f6\u5019\u5927\u591a\u6570\u4eba\u5199\u7684\u662f $O((n+x)\\log^2 x)$\uff0c\u7528 map \u6216\u8005\u7ebf\u6bb5\u6811\u7b49\u7ef4\u62a4\u732a\u7684\u8840\u91cf\uff0c\u8fd9\u6837\u4e0d\u7528\u5012\u8fc7\u6765\u505a\u3002\u539f\u672c\u65f6\u9650\u662f 1s\uff0c\u9a8c\u9898\u7684\u65f6\u5019 @[JohnVictor](https://www.luogu.com.cn/user/254752) \u597d\u50cf\u8dd1\u4e86 900ms+\uff0c\u6211\u5f53\u65f6\u8fd8\u5728\u72b9\u8c6b\u8981\u4e0d\u8981\u5361\u6389 2log\u3002\u540e\u6765\u6709 F2 \u4e4b\u540e\u6211\u5c31\u89c9\u5f97\u80af\u5b9a\u662f\u4e0d\u5361\u4e86\uff0c\u65f6\u9650\u653e\u4e86 2s\u3002\n\n~~\u6709\u4eba\u8bf4\u53ef\u6301\u4e45\u5316\u5e73\u8861\u6811\uff1f\u6211\u6ca1\u4ed4\u7ec6\u60f3~~\u3002\n\n------------\n\n\u82b1\u7d6e\uff081\uff09\n\n\u51fa\u8fd9\u4e2a\u9898\u662f\u521d\u4e09\u7684\u6821\u4e09\u6a21\u524d\u4e00\u5929\uff084.12\uff09\u61d2\u5f97\u590d\u4e60\u8bed\u6587\u6570\u5b66\u4e86\uff0c\u4e8e\u662f\u5f00\u59cb\u753b\u732a\u3002\u753b\u7740\u753b\u7740\u60f3\u628a\u732a\u7ed9 attack \u4e86\uff0c\u7136\u540e\u5c31\u6709\u4e86\u8fd9\u9053\u9898\uff08\u5927\u96fe\uff09\u3002\n\n\u5f53\u65f6\u665a\u81ea\u4e60\u7684\u65f6\u5019\u81ea\u5df1\u505a\u8fd9\u4e2a\u9898\u5927\u6982\u80e1\u4e86 15min\uff1f\u540e\u6765\u60f3\u60f3\u611f\u89c9\u8fd9\u9898\u8fd8\u53ef\u4ee5\uff0c\u4e8e\u662f\u5c31\u4ea4\u7ed9\u4e86 @[1kri](https://www.luogu.com.cn/user/235926) \u5e2e\u6211\u770b\u3002\u6211\u5f53\u65f6\u7ed9\u96be\u5ea6\u662f E\uff0c\u7136\u540e @[1kri](https://www.luogu.com.cn/user/235926) \u6539\u6210\u4e86 E/F\uff0c\u518d\u5230 anton \u624b\u91cc\u5c31\u53d8\u6210 F \u4e86\u3002",
        "postTime": 1671369021,
        "uid": 151475,
        "name": "Little09",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1774F1 Magician and Pigs (Easy Version)"
    },
    {
        "content": "\u7b80\u5316\u4e00\u4e0b\u64cd\u4f5c\u3002\n\n\u8bb0\u5f53\u524d\u6240\u6709 $2$ \u64cd\u4f5c\u7684\u6743\u503c\u548c\u4e3a $t$\u3002\n\n- \u64cd\u4f5c $1$\uff1a\u5411\u96c6\u5408\uff08\u53ef\u91cd\uff09\u91cc\u63d2\u5165\u4e00\u4e2a\u6743\u503c $v$ \u7684\u70b9\u3002\n- \u64cd\u4f5c $2$\uff1a\u96c6\u5408\u91cc\u6240\u6709\u6570\u51cf\u53bb $v$\u3002\u968f\u540e\u8d4b\u503c $t=t+v$\u3002\n- \u64cd\u4f5c $3$\uff1a\u628a\u96c6\u5408\u91cc\u7684\u6570\u590d\u5236\u51fa\u4e00\u4e2a\u526f\u672c\uff0c\u5c06\u526f\u672c\u91cc\u7684\u6240\u6709\u6570\u51cf\u53bb $t$\uff0c\u63d2\u5165\u5230\u539f\u96c6\u5408\u91cc\u3002\u968f\u540e\u8d4b\u503c $t=2t$\u3002\n\n\u8003\u8651\u5e73\u8861\u6811\u76f4\u63a5\u7ef4\u62a4\u3002\n\n\u6bcf\u4e2a\u8282\u70b9\u7ef4\u62a4\u6743\u503c $val$ \u548c\u51fa\u73b0\u6b21\u6570 $cnt$\u3002\n\n\u524d\u4e24\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u61d2\u6807\u8bb0\u5b9e\u73b0\uff08\u56e0\u4e3a\u662f\u5168\u5c40\u51cf\uff09\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5f53\u4e14\u4ec5\u5f53 $t\\leq V$ \u7684\u65f6\u5019\u64cd\u4f5c $3$ \u6709\u6548\uff08$V=2\\times 10^5$\uff09\u3002\n\n\u6240\u6709\u6709\u6548\u7684\u64cd\u4f5c $3$ \u81f3\u591a\u4e3a $\\log V$ \u6b21\uff0c\u6240\u4ee5\u66b4\u529b\u63d2\u5165\u5373\u53ef\u3002\n\n\u4f46\u51fa\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f $t=0$ \u7684\u65f6\u5019\u4e0d\u6ee1\u8db3\u8fd9\u4e2a\u9650\u5236\u3002\n\n\u8003\u8651 $t=0$ \u65f6\u8fdb\u884c\u64cd\u4f5c\u7684\u610f\u4e49\uff0c\u4e5f\u5c31\u662f\u5168\u5c40 $cnt \\times 2$\uff0c\u8fd9\u4e2a\u4e5f\u61d2\u6807\u8bb0\u7ef4\u62a4\u5c31\u53ef\u4ee5\u3002\n\n\u590d\u6742\u5ea6 $O((V+n)\\log V)$\u3002\n\n```cpp\n#include <cstdio>\n#include <cstring>\n\n#define N 2000010\n#define mod 998244353\n#define int long long\n\nint n;\nunsigned int sd = 233;\n\nint rnd()\n{\n\tsd ^= sd << 13;\n\tsd ^= sd >> 7;\n\tsd ^= sd << 11;\n\treturn (int)sd;\n}\n\nint root,idx;\nstruct Tree\n{\n\tint ls,rs;\n\tint val,sz,key;\n\tint lazy;\n\tint cnt,mul_lazy;\n}tr[N];\n\n#define lson(k) (tr[k].ls)\n#define rson(k) (tr[k].rs)\n\nvoid push(int k,int z)\n{\n\tif(!k)\n\t\treturn;\n\tif(tr[k].val > 0)\n\t\ttr[k].val += z;\n\ttr[k].lazy += z;\n}\n\nvoid mul_push(int k,int z)\n{\n\tif(!k)\n\t\treturn;\n\ttr[k].mul_lazy = (tr[k].mul_lazy * z) % mod;\n\ttr[k].cnt = (tr[k].cnt * z) % mod;\n}\n\nvoid pushdown(int k)\n{\n\tif(tr[k].lazy)\n\t{\n\t\tif(lson(k))\n\t\t\tpush(lson(k),tr[k].lazy);\n\t\tif(rson(k))\n\t\t\tpush(rson(k),tr[k].lazy);\n\t\ttr[k].lazy = 0;\n\t}\n\tif(tr[k].mul_lazy != 1)\n\t{\n\t\tif(lson(k))\n\t\t\tmul_push(lson(k),tr[k].mul_lazy);\n\t\tif(rson(k))\n\t\t\tmul_push(rson(k),tr[k].mul_lazy);\n\t\ttr[k].mul_lazy = 1;\n\t}\n}\n\nint newnode(int val,int cnt)\n{\n\ttr[++idx].val = val;\n\ttr[idx].key = rnd();\n\ttr[idx].cnt = cnt;\n\ttr[idx].mul_lazy = 1;\n\treturn idx;\n}\n\nvoid split(int k,int val,int &x,int &y)\n{\n\tif(!k)\n\t\tx = y = 0;\n\telse\n\t{\n\t\tpushdown(k);\n\t\tif(tr[k].val <= val)\n\t\t{\n\t\t\tx = k;\n\t\t\tsplit(rson(k),val,rson(k),y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ty = k;\n\t\t\tsplit(lson(k),val,x,lson(k));\n\t\t}\n\t}\n}\n\nint merge(int x,int y)\n{\n\tif(!x || !y)\n\t\treturn x | y;\n\tif(tr[x].key <= tr[y].key)\n\t{\n\t\tpushdown(x);\n\t\trson(x) = merge(rson(x),y);\n\t\treturn x;\n\t}\n\telse\n\t{\n\t\tpushdown(y);\n\t\tlson(y) = merge(x,lson(y));\n\t\treturn y;\n\t}\n}\nint x,y,z;\nvoid ins(int val,int cnt)\n{\n\tsplit(root,val,x,y);\n\tint p = x;\n\twhile(rson(p))\n\t\tp = rson(p);\n\tif(tr[p].val == val)\n\t{\n\t\ttr[p].cnt += cnt;\n\t\troot = merge(x,y);\n\t}\n\telse\n\t\troot = merge(merge(x,newnode(val,cnt)),y);\n}\n\nint sta[N],sta1[N],top;\n\nvoid dfs(int k,int t)\n{\n\tif(!k)\n\t\treturn;\n\tpushdown(k);\n\tsta[++top] = tr[k].val - t;\n\tsta1[top] = tr[k].cnt;\n\tif(lson(k))\n\t\tdfs(lson(k),t);\n\tif(rson(k))\n\t\tdfs(rson(k),t);\n}\n\nint ans = 0;\n\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tint t = 0;\n\tfor(int i = 1,op,p;i <= n;i++)\n\t{\n\t\tscanf(\"%lld\",&op);\n\t\tif(op == 1)\n\t\t{\n\t\t\tscanf(\"%lld\",&p);\n\t\t\tins(p,1);\n\t\t}\n\t\tif(op == 2)\n\t\t{\n\t\t\tscanf(\"%lld\",&p);\n\t\t\tif(t <= 200000)\n\t\t\t\tt += p;\n\t\t\tpush(root,-p);\n\t\t}\n\t\tif(op == 3)\n\t\t{\n\t\t\tif(t == 0)\n\t\t\t\tmul_push(root,2);\n\t\t\telse if(t <= 200000)\n\t\t\t{\n\t\t\t\ttop = 0;\n\t\t\t\tsplit(root,t,x,y);\n\t\t\t\tdfs(y,t);\n\t\t\t\troot = merge(x,y);\n\t\t\t\tfor(int j = 1;j <= top;j++)\n\t\t\t\t\tif(sta[j] > 0)\n\t\t\t\t\t\tins(sta[j],sta1[j]);\n\t\t\t}\n\t\t\tif(t <= 200000)\n\t\t\t\tt *= 2;\n\t\t}\n\t}\n\tdfs(root,0);\n\tfor(int i = 1;i <= idx;i++)\n\t{\n\t\tif(tr[i].val > 0)\n\t\t\tans = (ans + tr[i].cnt) % mod;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1671334004,
        "uid": 371968,
        "name": "ningago",
        "ccfLevel": 4,
        "title": "CF1774F1"
    },
    {
        "content": "\u8003\u8651\u52a8\u6001\u7ef4\u62a4\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\uff0c\u5c06\u5176\u770b\u6210\u591a\u91cd\u96c6 $S$\uff0c\u4ee4 $tag$ \u8868\u793a\u8003\u8651\u5f53\u524d\u6240\u6709\u64cd\u4f5c\uff0c\u51cf\u6cd5\u64cd\u4f5c\u7684\u5f71\u54cd\uff0c\u521d\u59cb\u65f6 $S=\\emptyset$\uff0c$tag=0$\uff0c\u90a3\u4e48\u4e09\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u770b\u6210\uff1a\n\n1. $S\\gets S\\cup \\{x\\}$\u3002\n\n2. \u5c06\u96c6\u5408 $S$ \u5185\u6bcf\u4e2a\u5143\u7d20\u51cf\u53bb $x$\u3002\u5e76\u4ee4 $tag:=tag+x$\u3002\n\n3. \u5c06\u96c6\u5408 $S$ \u5185\u6bcf\u4e2a\u5143\u7d20 $x$\uff0c\u590d\u5236\u51fa\u4e00\u4e2a $x-tag$ \u52a0\u5165\u96c6\u5408 $S$ \u5185\uff0c\u7136\u540e\u4ee4 $tag:=2\\times tag$\u3002\n\n\u6700\u540e\u76f8\u5f53\u4e8e\u67e5\u8be2\u96c6\u5408 $S$ \u5185\u5927\u4e8e $0$ \u7684\u5143\u7d20\u4e2a\u6570\u3002\n\n\u6ce8\u610f\u5230\u5f53 $tag>0$ \u540e\uff0c\u201c\u6709\u7528\u201d \u7684\u64cd\u4f5c $3$ \u81f3\u591a $O(\\log V)$ \u4e2a\u3002\u56e0\u4e3a\u5728\u8fdb\u884c $O(\\log V)$ \u4e2a\u64cd\u4f5c $3$ \u540e\uff0c\u518d\u8fdb\u884c\u64cd\u4f5c $3$ \u590d\u5236\u51fa\u6765\u7684\u7ed3\u679c\u4e00\u5b9a\u5c0f\u4e8e $0$\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4e0d\u6267\u884c\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u6bcf\u4e2a $1$ \u64cd\u4f5c\uff0c\u5206\u522b\u8ba1\u7b97\u5176\u8d21\u732e\uff08\u5373\u8be5\u64cd\u4f5c\u63d2\u5165\u7684 $x$ \u5728\u540e\u7eed\u590d\u5236\u64cd\u4f5c\u4e2d\u7684\u8d21\u732e\uff09\uff0c\u4e0d\u540c\u7684 $1$ \u64cd\u4f5c\u8d21\u732e\u662f\u72ec\u7acb\u7684\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a $1$ \u64cd\u4f5c\uff0c\u6211\u4eec\u53ea\u5728\u610f\u5176\u540e\u9762\u7684 $2$ \u64cd\u4f5c\u548c $3$ \u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fde\u7eed\u7684\u4e00\u6bb5 $2$ \u64cd\u4f5c\u7f29\u6210\u4e00\u4e2a\u64cd\u4f5c\uff0c\u90a3\u4e48\u6211\u4eec\u5173\u5fc3\u7684\u64cd\u4f5c\u5e8f\u5217\u5f62\u5982\uff1a\n\n$$\n123323232323223....\n$$\n\n\u8fd9\u91cc\u76f4\u63a5\u7684\u60f3\u6cd5\u662f\u66b4\u529b\u6a21\u62df\uff0c\u56e0\u4e3a\u81f3\u591a $O(\\log V)$ \u4e2a $tag$ \u975e $0$ \u7684\u64cd\u4f5c $3$\u3002\u4f46\u662f\u8fd9\u6837\u5176\u5b9e\u662f\u4e0d\u592a\u884c\u7684\uff0c\u56e0\u4e3a\u6bcf\u6b21 $3$ \u64cd\u4f5c\u96c6\u5408\u5927\u5c0f\u90fd\u8981\u7ffb\u500d\uff0c\u8fd9\u6837\u5355\u4e2a $1$ \u7684\u590d\u6742\u5ea6\u5c31\u5230 $O(V)$ \u4e86\u3002\n\n\u4f46\u662f\u6ce8\u610f\u5230\u6211\u4eec\u53ef\u4ee5\u9012\u5f52\u5b50\u95ee\u9898\uff0c$x$ \u7ecf\u8fc7\u64cd\u4f5c $2$ \u53d8\u4e3a\u4e86\u5f62\u5982 $x-w$ \u7684\u5b50\u95ee\u9898\uff0c$x$ \u7ecf\u8fc7\u64cd\u4f5c $3$ \u5206\u89e3\u6210 $x-w$ \u548c $x$ \u7684\u5b50\u95ee\u9898\u3002\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u628a $2$ \u7684\u8fde\u7eed\u6bb5\u7f29\u6389\u3002\u5177\u4f53\u5b9e\u73b0\u65f6\u5148\u4ece\u524d\u5411\u540e\u626b\u5904\u7406\u51fa\u6bcf\u4e2a\u64cd\u4f5c $3$ \u7684 $tag$\uff0c\u7136\u540e\u518d\u4ece\u540e\u5411\u524d\u626b\uff0c\u7ef4\u62a4 $f_i$ \u8868\u793a $x=i$ \u65f6\u505a\u4ece\u524d\u5411\u540e\u505a\u4e00\u4e2a\u540e\u7f00\u7684 $2$ \u548c $3$ \u64cd\u4f5c\u6700\u540e\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff08\u5373\u6709\u51e0\u4e2a\u5927\u4e8e $0$ \u7684\u5143\u7d20\uff09\uff0c\u626b\u5230\u4e00\u4e2a $3$ \u5c31\u66f4\u65b0\u4fe1\u606f\uff0c\u5bf9\u4e8e $tag$ \u5927\u4e8e $0$ \u7684\u66b4\u529b\u66f4\u65b0 $f$\uff0c\u5bf9\u4e8e $tag$ \u7b49\u4e8e $0$ \u7684\u76f8\u5f53\u4e8e\u504f\u79fb\u52a0\u4e58 $2$\u3002\n\n\u590d\u6742\u5ea6 $O((n+V)\\log V)$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n\n#define rep(i,l,r) for (int i = l; i <= r; i++)\n#define per(i,r,l) for (int i = r; i >= l; i--)\n#define fi first\n#define se second\n#define pb push_back\n#define mp std::make_pair\n#define gin std::cin\n#define prt std::cout\n#define edl std::endl\n\nnamespace Main {\n  const int N = 2e5 + 5,mod = 998244353,V = 2e5;\n  int n,opt[N],val[N],f[N];\n  void main() {\n    scanf(\"%d\",&n);\n    rep(i,1,n) {\n      scanf(\"%d\",&opt[i]);\n      if (opt[i] != 3) scanf(\"%d\",&val[i]);\n    }\n    int tag = 0;\n    rep(i,1,n) {\n      if (opt[i] == 3) {\n        val[i] = tag;\n        if (tag <= V) tag *= 2;\n      }\n      if (tag > V) continue;\n      if (opt[i] == 2) tag += val[i];\n    }\n    rep(i,1,V) f[i] = 1;\n    int sum = 0,ans = 0,mul = 1,c = 0;\n    bool flag = false;\n    per(i,n,1) {\n      if (opt[i] == 3) {\n        if (val[i] > V) {\n          continue;\n        }\n        if (val[i] != 0) {\n          per(j,V,1) {\n            if (j - sum > 0) f[j] = f[j - sum];\n            else f[j] = 0;\n          }\n          per(j,V,1) if (j - val[i] > 0) f[j] = (f[j] + f[j - val[i]]) % mod;\n        } else {\n          mul = mul * 2 % mod; \n          if (c <= V) c += sum;\n        }\n        sum = 0;\n      }\n      if (opt[i] == 2) {\n        if (sum <= V) sum += val[i];\n      }\n      if (opt[i] == 1) {\n        if (val[i] - sum - c > 0)\n          ans = (1ll * ans + 1ll * mul * f[val[i] - sum - c] % mod) % mod;\n      } \n    }\n    prt << ans;\n  }\n} signed main() { Main::main(); return 0; }\n```\n",
        "postTime": 1675950717,
        "uid": 317459,
        "name": "RyexAwl",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011Magician and Pigs (Easy Version)"
    },
    {
        "content": "nb \u9898\u3002sto $\\textsf{L\\color{red}ittle09}$ orz\u3002\n\n\u53d1\u73b0\u4e00\u6b21 $3$ \u64cd\u4f5c\u4f1a\u91cd\u590d\u4e4b\u524d\u7684\u6263\u8840\u64cd\u4f5c\uff0c\u4e5f\u5373\u6263\u8840\u91cf\u7ffb\u500d\u3002\u4e8e\u662f**\u51fa\u73b0\u6263\u8840\u64cd\u4f5c\u540e**\uff0c\u4e0d\u8d85\u8fc7 $\\log(\\max x_i)$ \u6b21 $3$ \u64cd\u4f5c\u5c31\u4f1a\u4f7f\u6240\u6709\u7684\u732a\u732a $\\text{GG}$\u3002\n\n\u5148\u7edf\u8ba1\u51fa\u6bcf\u4e2a $1$ \u64cd\u4f5c\u751f\u6210\u7684\u732a\u732a**\u5230\u4e0b\u4e00\u4e2a $3$ \u64cd\u4f5c\u4e4b\u524d**\u7684\u5b9e\u9645\u8840\u91cf\uff0c\u4ee5\u53ca\u6bcf\u6b21 $3$ \u64cd\u4f5c\u4f1a\u7ed9**\u5df2\u7ecf\u5728\u573a**\u7684\u732a\u732a\u6263\u591a\u5c11\u8840\u3002\n\n\u5c1d\u8bd5\u5012\u5e8f\u679a\u4e3e\uff0c\u7edf\u8ba1\u64cd\u4f5c $1$ \u5bf9\u7b54\u6848\u7684\u8d21\u732e\u3002\n\n\u6211\u4eec\u7ef4\u62a4 $sum_i$ \u8868\u793a\u5f53\u524d\u751f\u6210\u4e00\u53ea\u8840\u91cf\u4e3a $i$ \u7684\u732a\u732a\uff0c\u5230\u6700\u540e\u4f1a\u53d8\u6210\u591a\u5c11\u53ea\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u64cd\u4f5c $3$\uff0c\u82e5\u5176\u6263\u8840\u91cf\u6ca1\u6709\u8fbe\u5230\u4e0a\u9650\uff0c\u5219\u6240\u6709\u8840\u91cf\u5927\u4e8e**\u5f53\u524d\u603b\u6263\u8840\u91cf**\u7684\u732a\u732a\u6570\u91cf\u4e58 $2$\u3002\n\n\u6392\u9664\u5e76\u6ca1\u6709\u6263\u8840\u7684\u64cd\u4f5c $3$ \u540e\uff0c$sum$ \u53ea\u4f1a\u6539\u52a8 $\\log$ \u6b21\uff0c\u5927\u529b\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u5f53\u524d\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u79bb\u7ebf\u540e\u9884\u5904\u7406 $O(n)$\uff0c\u7edf\u8ba1\u7b54\u6848\u65f6\u64cd\u4f5c $1$ $O(1)$\uff0c\u64cd\u4f5c $3$ \u603b\u590d\u6742\u5ea6 $O(m\\log X)$\u3002\n\n\u5f53\u524d\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(\\max(n,x))$\u3002\n\n\u5176\u4e2d $X=\\max x_i$\u3002\n\n\u4ee3\u7801\u5c31\u4e0d\u8d34\u4e86\u3002",
        "postTime": 1671346273,
        "uid": 170890,
        "name": "Cxny",
        "ccfLevel": 7,
        "title": "CF1774F1 Magician and Pigs (Easy Version) \u9898\u89e3"
    },
    {
        "content": "\u5173\u4e8e F1\uff0c\u6709\u4e00\u4e2a\u4f9d\u8d56 $x\\leq 2\\times 10 ^ 5$ \u7684\u52bf\u80fd\u5206\u6790\u7684\u505a\u6cd5\uff1a\u4ece\u540e\u5f80\u524d\u66b4\u529b\u6a21\u62df\uff0c\u64cd\u4f5c $2$ \u7684\u6b21\u6570\u4e0d\u8d85\u8fc7 $2\\times 10 ^ 5$\u3002\u9047\u5230\u4e00\u4e2a\u64cd\u4f5c $3$ \uff0c\u6211\u4eec\u66b4\u529b\u9012\u5f52\u4e24\u6b21\u3002\u9047\u5230\u4e00\u4e2a\u64cd\u4f5c $2$ \uff0c\u5c06\u5f53\u524d\u503c\u52a0\u4e0a $x_i$\u3002\u9047\u5230\u4e00\u4e2a\u64cd\u4f5c $1$ \uff0c\u5982\u679c $x_i$ \u5927\u4e8e\u5f53\u524d\u503c\uff0c\u5219\u5c06\u7b54\u6848\u52a0\u4e0a $1$\u3002\u6ce8\u610f\u8981\u5bf9\u4e00\u6bb5\u8fde\u7eed\u7684\u64cd\u4f5c $1$ \u6279\u91cf\u5904\u7406\uff0c\u5426\u5219\u9047\u5230\u7684\u64cd\u4f5c $1$ \u5c31\u65e0\u6cd5\u7528\u64cd\u4f5c $2$ \u7684\u6b21\u6570\u9650\u5236\uff0c\u4e5f\u5c31\u662f\u6c42\u51fa\u4e00\u6bb5\u533a\u95f4\u5185\u5927\u4e8e\u67d0\u503c\u7684\u6570\u7684\u4e2a\u6570\uff0c\u4e3b\u5e2d\u6811\u7ef4\u62a4\u3002\n\n\u4ea4\u4e0a\u53bb\u53d1\u73b0 [TLE](https://codeforces.com/contest/1774/submission/185672698)\uff0c\u4e3a\u4ec0\u4e48\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a\u5728\u4e00\u5f00\u59cb\u6ca1\u6709\u64cd\u4f5c $2$ \u7684\u6781\u957f\u6bb5\uff0c\u6211\u4eec\u4f1a\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\u6a21\u62df\uff0c\u4f46\u6ca1\u6709\u4f7f\u5f97\u5f53\u524d\u503c\u589e\u5927\u3002\u9884\u5904\u7406\u4e00\u5f00\u59cb\u6ca1\u6709\u64cd\u4f5c $2$ \u7684\u6781\u957f\u6bb5\uff0c\u6c42\u51fa\u6bcf\u4e2a\u64cd\u4f5c $1$ \u7684 $x_i$ \u88ab\u590d\u5236\u4e86\u591a\u5c11\u6b21\uff0c\u52a0\u5230\u6743\u503c\u7ebf\u6bb5\u6811\u91cc\u9762\uff0c\u5373\u53ef\u5728\u9012\u5f52\u5230\u8be5\u6bb5\u65f6 $\\mathcal{O}(\\log x)$ \u6c42\u51fa\u8d21\u732e\u3002\n\n\u8fd9\u6837\uff0c\u6267\u884c\u64cd\u4f5c $3$ \u7684\u6b21\u6570\u5173\u4e8e\u6267\u884c\u64cd\u4f5c $2$ \u548c $n$ \u7ebf\u6027\uff1a\u60f3\u8c61\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u5e95\u5c42\u662f\u64cd\u4f5c $2$ \uff0c\u5176\u5b83\u8282\u70b9\u662f\u64cd\u4f5c $3$\uff0c\u800c\u975e\u53f6\u5b50\u8282\u70b9\u6570\u5173\u4e8e\u53f6\u5b50\u8282\u70b9\u6811\u7ebf\u6027\u3002\u53c8\u56e0\u4e3a\u6bcf\u6b21\u6267\u884c\u4e00\u6bb5\u64cd\u4f5c $1$ \u4e4b\u524d\u5fc5\u7136\u6267\u884c\u8fc7\u64cd\u4f5c $2$ \u6216\u64cd\u4f5c $3$\uff0c\u6240\u4ee5\u64cd\u4f5c $1$ \u7684\u6b21\u6570\u4e5f\u662f\u7ebf\u6027\u3002\n\n\u603b\u590d\u6742\u5ea6 $\\mathcal{O}((n + x)\\log x)$\u3002[\u4ee3\u7801](https://codeforces.com/contest/1774/submission/185679095)\u3002",
        "postTime": 1671334924,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "CF1774F1 Magician and Pigs (Easy Version)"
    }
]
[
    {
        "content": "[\u4f20\u9001\u95e8](https://codeforces.com/contest/1646/problem/D)  \n\n## \u9898\u610f\n\u7ed9\u4e00\u68f5\u6811\uff0c\u8981\u6c42\u7ed9\u6bcf\u4e2a\u70b9\u4e00\u4e2a\u6b63\u6574\u6570\u6743\u503c\uff0c\u4f7f\u5728\u597d\u70b9\u6700\u591a\u7684\u60c5\u51b5\u4e0b\u6743\u503c\u603b\u548c\u6700\u5c0f\u3002  \n\u597d\u70b9\u7684\u5b9a\u4e49\u4e3a\uff0c\u6743\u503c\u7b49\u4e8e\u90bb\u5c45\u6743\u503c\u4e4b\u548c\u3002  \n\n## Solution  \n\u9996\u5148\u5bb9\u6613\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\u3002\u5f53 $n> 2$ \u65f6\uff0c\u76f8\u90bb\u4e24\u4e2a\u70b9\u4e0d\u53ef\u80fd\u5168\u662f\u597d\u70b9\u3002\n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u54ea\u4e9b\u70b9\u662f\u597d\u70b9\u4e86\uff0c\u600e\u4e48\u6837\u624d\u80fd\u4f7f\u6743\u503c\u603b\u548c\u6700\u5c0f\u3002  \n\u4e0d\u96be\u53d1\u73b0\uff0c\u53ef\u4ee5\u628a\u4e0d\u662f\u597d\u70b9\u7684\u5168\u6807\u4e0a $1$\uff0c\u597d\u70b9\u6807\u4e0a\u90bb\u5c45\u4e2a\u6570\u3002  \n\n\u63a5\u7740\u5c31\u662f\u7b97\u597d\u70b9\u4e2a\u6570\u4e86\u3002  \n\u6211\u4eec\u53ef\u4ee5\u5728\u6811\u4e0a dp \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002  \n\u4ee4 $dp(u,0/1)$ \u8868\u793a\u5728\u4ee5 $u$ \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c\u5f53 $u$ \u662f\u597d\u70b9\u6216\u8005\u4e0d\u662f\u597d\u70b9\u7684\u65f6\u5019\uff0c\u6700\u591a\u6709\u591a\u5c11\u4e2a\u597d\u70b9\u3002  \n\u8f6c\u79fb\u65f6\uff0c\u5f53\u94a6\u5b9a $u$ \u4e3a\u597d\u70b9\uff0c\u90a3\u4e48\u6240\u6709\u7684\u513f\u5b50 $v$ \u90fd\u4e0d\u80fd\u662f\u597d\u70b9\uff0c$u$ \u4e0d\u662f\u597d\u70b9\uff0c\u6240\u6709\u513f\u5b50\u65e0\u8bba\u662f\u4e0d\u662f\u597d\u70b9\u90fd\u53ef\u4ee5\u3002    \n\u6700\u540e\u8fd8\u539f\u8def\u5f84\u6784\u9020\u65b9\u6848\u3002\n\n## Code  \n\n```cpp\n#include<bits/stdc++.h>\n#define forn(i,a,b)for(int i=(a),_b=(b);i<=_b;i++)\n#define fore(i,b,a)for(int i=(b),_a=(a);i>=_a;i--)\n#define rep(i,n)for(int i=0,_n=n;i<n;i++)\n#define ll long long\n#define pii pair<int,int>\n#define m_p make_pair\n#define pb push_back\n#define fi first\n#define se second\n#define int ll\n#define foreach(i,c) for(__typeof(c.begin())i=(c.begin());i!=(c).end();i++)\nusing namespace std;\nconst int N=200010;\nint n;\npii dp[N][2];\nvector<int>g[N]; \nint ans[N];\nbool cmp(pii x,pii y){\n\tif(x.fi!=y.fi)return x.fi>y.fi;\n\treturn x.se<y.se;\n}\nvoid dfs(int u,int fa){\n\tdp[u][1]=m_p(1,g[u].size());\n\tdp[u][0]=m_p(0,1);\n\trep(i,g[u].size()){\n\t\tint v=g[u][i];\n\t\tif(v==fa)continue;\n\t\tdfs(v,u);\n\t\tdp[u][1].fi+=dp[v][0].fi;dp[u][1].se+=dp[v][0].se;\n\t\tif(cmp(dp[v][0],dp[v][1])){\n\t\t\tdp[u][0].fi+=dp[v][0].fi;dp[u][0].se+=dp[v][0].se;\n\t\t}\n\t\telse{\n\t\t\tdp[u][0].fi+=dp[v][1].fi;dp[u][0].se+=dp[v][1].se;\n\t\t}\n\t}\n}\nvoid _dfs(int u,int fa,int st){\n\tif(st)ans[u]=g[u].size();\n\telse ans[u]=1;\n\trep(i,g[u].size()){\n\t\tint v=g[u][i];\n\t\tif(v==fa)continue;\n\t\tif(st){\n\t\t\t_dfs(v,u,0);\n\t\t}\n\t\telse{\n\t\t\tif(cmp(dp[v][0],dp[v][1])){\n\t\t\t\t_dfs(v,u,0);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t_dfs(v,u,1);\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main(){\n    cin.tie(0);\n\tios::sync_with_stdio(0);\n\tcin>>n;\n\trep(i,n-1){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tg[u].pb(v);g[v].pb(u);\n\t} \n\tif(n==2){\n\t\tcout<<\"2 2\\n\";\n\t\tcout<<\"1 1\\n\";\n    \treturn 0;\n\t}\n\tdfs(1,0);\n\tif(cmp(dp[1][0],dp[1][1])){\n\t\tcout<<dp[1][0].fi<<\" \"<<dp[1][0].se<<\"\\n\";\n\t\t_dfs(1,0,0);\n\t}\n\telse{\n\t\tcout<<dp[1][1].fi<<\" \"<<dp[1][1].se<<\"\\n\";\n\t\t_dfs(1,0,1);\n\t}\n\tforn(i,1,n)cout<<ans[i]<<\" \";cout<<\"\\n\";\n\treturn 0;\n}",
        "postTime": 1646917703,
        "uid": 257565,
        "name": "BlabaDouble",
        "ccfLevel": 0,
        "title": "CF1646D\u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u5b9a\u4e00\u4e2a\u65e0\u6839\u6811\uff0c\u9700\u8981\u7ed9\u6bcf\u4e2a\u70b9\u4e00\u4e2a**\u6b63\u6574\u6570**\u6743\u503c $w_i$\u3002\u5b9a\u4e49\u4e00\u4e2a\u8282\u70b9\u4e3a\u597d\u7684\u5f53\u4e14\u4ec5\u5f53\u5176\u6743\u503c\u7b49\u4e8e\u6240\u6709\u76f8\u90bb\u8282\u70b9\u7684\u6743\u503c\u4e4b\u548c\u3002\u76ee\u6807\u4e3a\u6700\u5927\u5316\u597d\u8282\u70b9\u7684\u4e2a\u6570\uff0c\u5728\u6b64\u57fa\u7840\u4e0a\u6700\u5c0f\u5316\u6240\u6709\u8282\u70b9\u7684\u6743\u503c\u548c\uff0c\u9700\u8981\u8f93\u51fa\u6743\u503c\u5206\u914d\u65b9\u6848\u3002\n\n### \u5206\u6790\n\n\u9996\u5148\u9700\u8981\u6ce8\u610f\u5230\u4e00\u4e2a\u6027\u8d28\uff1a$n \\geq 3$ \u65f6\u4efb\u4f55\u76f8\u90bb\u8282\u70b9\u4e0d\u53ef\u80fd\u540c\u65f6\u662f\u597d\u7684\u3002\n\n> \u8bc1\u660e\uff1a\u5047\u8bbe $u,v$ \u662f\u76f8\u90bb\u7684\u597d\u8282\u70b9\uff0c$A,B$ \u5206\u522b\u662f\u4e0e $u,v$ \u76f8\u90bb\u7684\u8282\u70b9\u4e2d\u9664\u53bb\u5bf9\u65b9\u4ee5\u5916\u7684\u8282\u70b9\u7684\u6743\u503c\u548c\uff08\u53ef\u4ee5\u4e3a\u7a7a\uff09\u3002\u6839\u636e\u597d\u8282\u70b9\u7684\u5b9a\u4e49\u6709 $w_u = w_v + A$ \u4e14 $w_v = w_u + B$\uff0c\u8fd9\u5c31\u5bfc\u51fa $A = B = 0$\uff0c\u5373 $n = 2$\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e $n = 2$ \u7279\u5224\u5373\u53ef\u3002\u5426\u5219\uff0c\u5982\u679c\u8282\u70b9 $u$ \u662f\u597d\u7684\uff0c\u5219\u5b83\u7684\u5b50\u8282\u70b9 $v$ \u5fc5\u5b9a\u662f\u4e0d\u597d\u7684\uff0c\u8fd9\u7acb\u523b\u8ba9\u6211\u4eec\u60f3\u5230[\u6ca1\u6709\u4e0a\u53f8\u7684\u821e\u4f1a](https://www.luogu.com.cn/problem/P1352)\u3002\u4e8e\u662f\u8003\u8651\u6811\u5f62 dp\uff0c\u4ee5\u8282\u70b9 $1$ \u4e3a\u6839\uff0c\u4ee4 $dp_{u,1/0}$ \u8868\u793a**\u94a6\u5b9a $u$ \u662f\u597d\u7684/\u4e0d\u597d\u7684\u7684\u60c5\u51b5\u4e0b $u$ \u5b50\u6811\u5185\u597d\u8282\u70b9\u4e2a\u6570\u6700\u5927\u503c**\uff0c\u8f6c\u79fb\u5373\u4e3a\uff1a\n$$\n\\begin{cases}\ndp_{u,0} = \\sum_{v \\in son[u]} \\max \\{dp_{v,1},dp_{v,0}\\} \\\\\ndp_{u,1} = \\sum_{v \\in son[u]} dp_{v,0} + 1\n\\end{cases}\n$$\n\u8fb9\u754c $dp_{u,0} = 0, dp_{u,1} = 1$\uff0c\u800c\u7b54\u6848\u662f $\\max\\{dp_{1,0},dp_{1,1}\\}$\u3002\u4f46\u8fd8\u6ca1\u6709\u6700\u5c0f\u5316\u6743\u503c\u4e4b\u548c\uff0c\u8fd9\u4e5f\u5f88\u5bb9\u6613\u6784\u9020\u51fa\u6765\uff1a\u8d2a\u5fc3\u5730\uff0c\u4e0d\u597d\u7684\u8282\u70b9\u6743\u503c\u81f3\u5c11\u4e3a $1$\uff0c\u800c\u597d\u7684\u8282\u70b9 $u$ \u7684\u6743\u503c\u81f3\u5c11\u4e3a $deg_u$\uff0c\u5176\u4e2d $deg_u$ \u4e3a $u$ \u7684\u5ea6\u6570\u3002\u6ce8\u610f\u5230\u53ea\u8981\u597d\u8282\u70b9\u7684\u4e2a\u6570\u53d6\u5230\u6700\u5927\u503c\uff0c\u8fd9\u6837\u7684\u6784\u9020\u603b\u662f\u53ef\u4ee5\u6210\u7acb\u7684\uff0c\u4e8e\u662f\u5b83\u5c31\u662f\u6700\u4f18\u7684\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u8981\u80fd\u5224\u65ad\u51fa\u6700\u4f18\u65b9\u6848\u4e0b\u6240\u6709\u8282\u70b9\u7684\u597d\u574f\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u4e8e\u662f\u53d1\u73b0\u5728 dp \u8fc7\u7a0b\u4e2d\uff0c\u8fd8\u9700\u8981\u8bb0\u5f55\u8f6c\u79fb\u8def\u5f84\u3002\u4ee4 $good_u$ \u8868\u793a **\u5f53 $u$ \u7684\u7236\u4eb2\u662f\u4e0d\u597d\u7684\u7684\u60c5\u51b5\u4e0b\uff0c$u$ \u5e94\u8be5\u662f\u597d\u7684\u8fd8\u662f\u4e0d\u597d\u7684\u624d\u80fd\u4f7f\u7b54\u6848\u6700\u4f18**\uff08\u5982\u679c $u$ \u7684\u7236\u4eb2\u662f\u597d\u7684\u90a3\u5c31\u6ca1\u5fc5\u8981\u4e86\uff0c\u56e0\u4e3a $u$ \u4e00\u5b9a\u662f\u4e0d\u597d\u7684\uff09\u3002\u8981\u5224\u65ad\u8fd9\u4e2a\u4e1c\u897f\u7684\u8bdd\u53d1\u73b0\u8fd8\u9700\u8981\u6c42\u51fa**\u94a6\u5b9a $u$ \u662f\u597d\u7684/\u4e0d\u597d\u7684\u60c5\u51b5\u4e0b $u$ \u5b50\u6811\u597d\u8282\u70b9\u53d6\u5230\u6700\u5927\u503c\u65f6\uff0c$u$ \u5b50\u6811\u5185\u6743\u503c\u7684\u6700\u5c0f\u503c**\u3002\u8bb0\u8fd9\u4e2a\u4e1c\u897f\u4e3a $weighsum_{u,1/0}$\uff0c\u53ef\u4ee5\u548c $dp$ \u5728\u540c\u4e00\u6b21 dfs \u5185\u6c42\u51fa\uff0c\u8f6c\u79fb\u7565\u53bb\u3002\u5b98\u65b9\u9898\u89e3\u91cc\u628a $dp$ \u548c $weighsum$ \u5c01\u88c5\u6210 pair \u4e86\uff0c\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u4e00\u70b9\u3002\n\n\u6700\u540e\u6839\u636e\u6839\u8282\u70b9\u7684\u72b6\u6001\u6c42\u51fa $1$ \u7a76\u7adf\u662f\u597d\u7684\u8fd8\u662f\u4e0d\u597d\u7684\uff0c\u518d\u505a\u7b2c\u4e8c\u6b21 dfs \u901a\u8fc7\u7236\u4eb2\u7684\u597d\u574f\u5224\u65ad\u51fa\u513f\u5b50\u7684\u597d\u574f\uff0c\u5c31\u6c42\u51fa\u4e86\u65b9\u6848\u3002\n\n\u590d\u6742\u5ea6 $O(n)$\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\nconst int MAXN = 2e5+5;\nconst int MAXM = 4e5+5;\n\nint head[MAXN], to[MAXM], nxt[MAXM], deg[MAXN], tot;\nint dp[MAXN][2]; long long weighsum[MAXN][2];\nint weigh[MAXN]; bool good[MAXN];\nint n;\n\nvoid addedge(int x, int y)\n{\n    ++deg[x];\n    to[++tot] = y;\n    nxt[tot] = head[x];\n    head[x] = tot;\n}\n\n//\u8fd4\u56de\u4e00\u4e2a\u8282\u70b9\u7684 good \u503c\nbool cmp(int v)\n{\n    if(dp[v][0] != dp[v][1]) return dp[v][1] > dp[v][0];\n    return weighsum[v][1] < weighsum[v][0];\n}\n\nvoid dfs(int u, int f)\n{\n    dp[u][0] = 0; dp[u][1] = 1;\n    weighsum[u][0] = 1; weighsum[u][1] = deg[u];\n    for(int i = head[u]; i; i = nxt[i])\n    {\n        int v = to[i];\n        if(v == f) continue;\n        dfs(v, u);\n        good[v] = cmp(v);\n        dp[u][0] += dp[v][good[v]];\n        dp[u][1] += dp[v][0];\n        weighsum[u][0] += weighsum[v][good[v]];\n        weighsum[u][1] += weighsum[v][0];\n    }\n}\n\nvoid dfs2(int u, int f, bool g)\n{\n    weigh[u] = g ? deg[u] : 1;\n    for(int i = head[u]; i; i = nxt[i])\n    {\n        int v = to[i];\n        if(v == f) continue;\n        dfs2(v, u, g ? 0 : good[v]);\n    }\n}\n\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i = 1,u,v; i < n; ++i)\n    {\n        scanf(\"%d%d\",&u,&v);\n        addedge(u,v); addedge(v,u);\n    }\n    if(n == 2)\n    {\n        printf(\"2 2\\n1 1\");\n        return 0;\n    }\n    dfs(1,0);\n    bool good1 = cmp(1);\n    dfs2(1,0,good1);\n    printf(\"%d %lld\\n\",dp[1][good1],weighsum[1][good1]);\n    for(int u = 1; u <= n; ++u) printf(\"%d \",weigh[u]);\n    return 0;\n}\n```\n\n",
        "postTime": 1646542366,
        "uid": 230137,
        "name": "\u6587\u66f2\u5154",
        "ccfLevel": 0,
        "title": "cf round #774.div2D weight the tree \u9898\u89e3"
    },
    {
        "content": "# CF1646D \u9898\u89e3\n\n\n\n## \u601d\u8def\u5206\u6790\n\n\u6ce8\u610f\u5230\u5982\u4e0b\u7684\u89c2\u5bdf\uff1a\n\n> \u89c2\u5bdf\uff1a\n>\n> \u5bf9\u4e8e\u4efb\u610f $n\\ge 3$\uff0c\u6811\u4e0a\u4e0d\u4f1a\u6709\u4efb\u4f55\u4e24\u4e2a\u76f8\u90bb\u7684\u597d\u8282\u70b9\u3002\n>\n> \u5047\u8bbe\u6811\u4e0a\u6709\u4e00\u6761\u8fb9 $(u,v)$\uff0c\u7531\u4e8e $n\\ge 3$\uff0c\u56e0\u6b64\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u7684\u5ea6\u6570 $\\ge 2$\uff0c\u8bbe $deg(u)\\ge 2$\u3002\n>\n> \u6b64\u65f6\u82e5 $u$ \u548c $v$ \u5747\u4e3a\u597d\u8282\u70b9\uff0c\u7531\u4e8e $w_u=w_v+\\sum_{(v',u)} w_{v'}$\uff0c\u800c\u7531\u4e8e $w_i\\in\\mathbb {Z^+}$\uff0c\u6240\u4ee5 $w_u>w_v$\uff0c\u540c\u7406\u7531\u4e8e $v$ \u662f\u597d\u8282\u70b9\uff0c\u6240\u4ee5 $w_v\\ge w_u$\uff0c\u6545\u77db\u76fe\u3002\n>\n> \u7279\u522b\u5730\uff0c\u82e5 $n=2$ \u5219 $u,v$ \u5ea6\u6570\u5747\u4e3a $1$\uff0c\u6240\u4ee5 $w_u=w_v$ \u65f6\u53ef\u4ee5\u9009\u62e9\u4e24\u4e2a\u597d\u8282\u70b9\u76f8\u90bb\u3002\n\n\u7b80\u5355\u8ba8\u8bba\u5269\u4e0b\u7684\u60c5\u51b5\uff1a\n\n- \u82e5 $u$ \u4e0d\u4e3a\u597d\u8282\u70b9\uff0c\u90a3\u4e48 $w_u$ \u4e3a\u4efb\u610f\u6b63\u6574\u6570\uff0c\u7531\u4e8e\u6211\u4eec\u8981\u6700\u5c0f\u5316\u7b54\u6848\uff0c\u56e0\u6b64\u4e0d\u59a8\u4ee4 $w_u=1$\u3002\n- \u82e5 $u$ \u4e3a\u597d\u8282\u70b9\uff0c\u90a3\u4e48 $u$ \u76f8\u90bb\u7684\u6240\u6709\u70b9\u90fd\u4e0d\u662f\u597d\u8282\u70b9\uff0c\u5176\u6743\u503c\u90fd\u4e3a $1$\uff0c\u56e0\u6b64 $w_u=deg(u)$\u3002\n\n\u53ef\u4ee5\u8bc1\u660e\u8fd9\u6837\u7684\u65b9\u6848\u662f\u6700\u4f18\u7684\uff0c\u6ce8\u610f\u5230\u53ea\u8981\u786e\u5b9a\u6240\u6709\u975e\u597d\u8282\u70b9\u7684\u6743\u503c\u5c31\u53ef\u4ee5\u786e\u5b9a\u6240\u6709\u7684\u8282\u70b9\u7684\u6743\u503c\uff0c\u5047\u5982\u67d0\u4e2a\u975e\u597d\u8282\u70b9\u6743\u503c\u6539\u53d8\u4f7f\u5f97 $w_u\\gets w_u+1$\uff0c\u90a3\u4e48\u6240\u6709\u4e0e $u$ \u76f8\u90bb\u7684\u597d\u8282\u70b9\u7684\u6743\u503c\u4e5f\u8981 $+1$\uff0c\u56e0\u6b64\u4ee4 $w_u$ \u5c3d\u53ef\u80fd\u5c0f\uff0c\u663e\u7136\u9009\u62e9 $1$ \u6700\u4f18\u3002\n\n\u5269\u4e0b\u786e\u5b9a\u6bcf\u4e2a\u70b9\u662f\u4e0d\u662f\u597d\u8282\u70b9\u7684\u8fc7\u7a0b\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 dp\uff0c\u4ee4 $dp_{u,1/0}$ \u8868\u793a\u4ee5 $u$ \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\u9009\u62e9\u6216\u6ca1\u9009\u62e9 $u$ \u4f5c\u4e3a\u597d\u8282\u70b9\u65f6\u7684\u597d\u8282\u70b9\u4e2a\u6570\u7684\u6700\u5927\u503c\uff0c\u7531\u4e8e\u4e24\u4e2a\u597d\u8282\u70b9\u4e0d\u80fd\u76f8\u90bb\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u53d8\u6210\u4e86\u5f88\u7ecf\u5178\u7684\u6811\u4e0a\u9009\u70b9\u95ee\u9898\uff0c\u53ef\u4ee5\u5199\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$\n\\begin{cases}\ndp_{u,0}&=\\sum_{v\\in son(u)} \\max(dp_{v,0},dp_{v,1})\\\\\ndp_{u,1}&=1+\\sum_{v\\in son(u)} dp_{v,0}\n\\end{cases}\n$$\n\u800c\u6700\u5c0f\u5316\u6743\u503c\u53ea\u9700\u8981\u5728\u6bd4\u8f83\u4e24\u4e2a\u65b9\u6848\u4f18\u52a3\u7684\u65f6\u5019\u4f5c\u4e3a\u6bd4\u8f83\u7684\u7b2c\u4e8c\u5173\u952e\u5b57\u987a\u4fbf\u8f6c\u79fb\u4e00\u4e0b\u5373\u53ef\u3002\n\n\u6784\u9020\u65b9\u6848\u65f6\u6309\u7167\u8f6c\u79fb\u987a\u5e8f\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u662f\u7531\u5b50\u8282\u70b9\u7684 $0$ \u72b6\u6001\u8fd8\u662f $1$ \u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\uff0c\u9012\u5f52\u6784\u9020\u5373\u53ef\u3002\n\n## \u4ee3\u7801\u5448\u73b0\n\n```cpp\n#include<bits/stdc++.h> \nusing namespace std;\nconst int MAXN=2e5+1;\nvector <int> G[MAXN];\nint val[MAXN];\nstruct node {\n\tint cnt,val;\n\tnode(int _cnt,int _val) { cnt=_cnt,val=_val; }\n\tnode() { node(0,0); }\n\tinline friend bool operator <(const node &A,const node &B) {\n\t\tif(A.cnt==B.cnt) return A.val<B.val;\n\t\treturn A.cnt>B.cnt;\n\t}\n\tinline friend node operator +(const node &A,const node &B) {\n\t\treturn node(A.cnt+B.cnt,A.val+B.val);\n\t}\n}\tdp[MAXN][2];\ninline node _min(const node &A,const node &B) {\n\treturn A<B?A:B;\n}\ninline void dfs(int p,int f) {\n\tdp[p][0]=node(0,1);\n\tdp[p][1]=node(1,(int)G[p].size());\n\tfor(int v:G[p]) {\n\t\tif(v==f) continue;\n\t\tdfs(v,p);\n\t\tdp[p][0]=dp[p][0]+_min(dp[v][0],dp[v][1]);\n\t\tdp[p][1]=dp[p][1]+dp[v][0];\n\t}\n}\ninline void print(int p,int f,int col) {\n\tval[p]=col==1?G[p].size():1;\n\tfor(int v:G[p]) {\n\t\tif(v==f) continue;\n\t\tif(col==1) print(v,p,0);\n\t\telse  print(v,p,dp[v][0]<dp[v][1]?0:1);\n\t}\n}\nsigned main() {\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<n;++i) {\n\t\tint u,v;\n\t\tscanf(\"%d%d\",&u,&v);\n\t\tG[u].push_back(v);\n\t\tG[v].push_back(u);\n\t}\n\tif(n==2) {\n\t\tputs(\"2 2\");\n\t\tputs(\"1 1\");\n\t\treturn 0;\n\t}\n\tdfs(1,0);\n\tprint(1,0,dp[1][0]<dp[1][1]?0:1);\n\tprintf(\"%d %d\\n\",_min(dp[1][0],dp[1][1]).cnt,_min(dp[1][0],dp[1][1]).val);\n\tfor(int i=1;i<=n;++i) printf(\"%d \",val[i]); puts(\"\");\n\treturn 0;\n}\n```\n\n",
        "postTime": 1672615901,
        "uid": 539618,
        "name": "DaiRuiChen007",
        "ccfLevel": 6,
        "title": "CF1646D \u9898\u89e3"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1646D)\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53 $n \\geq 2$ \u7684\u65f6\u5019\uff0c\u4efb\u610f\u4e24\u4e2a\u76f8\u90bb\u7684\u70b9\u4e0d\u53ef\u80fd\u540c\u4e3a\u597d\u8282\u70b9\uff08\u56e0\u4e3a\u4e00\u5b9a\u6709\u5176\u5b83\u8282\u70b9\u7834\u574f\u4ed6\u4eec\u4e24\u4e2a\u76f8\u7b49\uff09\u3002\u5f53 $n = 2$ \u7684\u65f6\u5019\uff0c\u7279\u5224\u6389\u5373\u53ef\u3002\n\n\u6211\u4eec\u8003\u8651\u5982\u4f55\u8fdb\u884c\u6811\u5f62 DP\uff0c\u8bbe $f[u][1/0]$ \u8868\u793a\u5728\u4ee5 $u$ \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c$u$ \u662f\u597d\u8282\u70b9 ($f[u][1]$) \u6216\u8005\u4e0d\u662f\u597d\u8282\u70b9\uff08$f[u][0]$\uff09\u7684\u65f6\u5019\uff0c\u6700\u591a\u80fd\u6709\u591a\u5c11\u4e2a\u597d\u8282\u70b9\u3002\u5728\u8f6c\u79fb\u7684\u8fc7\u7a0b\u4e2d \uff0c\u56e0\u4e3a\u6709\u4e0a\u8ff0\u7684\u6027\u8d28\uff0c\u6240\u4ee5\u5f53\u94a6\u5b9a $u$ \u4e3a\u597d\u8282\u70b9\u65f6\uff0c\u5b83\u7684\u5b69\u5b50 $v$ \u53ea\u80fd\u4e0d\u662f\u597d\u8282\u70b9\uff0c\u5f53 $u$ \u4e0d\u662f\u597d\u8282\u70b9\u65f6\uff0c\u5b83\u7684\u5b69\u5b50 $v$ \u53ef\u4ee5\u662f\u597d\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u662f\u597d\u8282\u70b9\u3002\n\n\u6211\u4eec\u5c06 DP \u7684\u6570\u7ec4\u5b9a\u4e49\u4e00\u4e2a pair\uff0cfirst \u8868\u793a\u597d\u8282\u70b9\u7684\u6570\u76ee\uff0csecond \u8868\u793a\u5728\u8fd9\u4e2a\u6570\u76ee\u4e0b\u6240\u9700\u8981\u7684\u548c\u3002\u8f6c\u79fb\u7684\u65f6\u5019\u5206\u522b\u5bf9\u4e8e first \u548c second \u8f6c\u79fb\uff0c\u5f53 first \u76f8\u540c\u7684\u65f6\u5019\uff0c\u8981\u8f6c\u79fb second \u5c0f\u7684\u3002\u6211\u4eec\u8d2a\u5fc3\u7684\u60f3\uff0c\u6700\u540e\u7684\u65b9\u6848\u4e00\u5b9a\u662f\uff0c\u6240\u6709\u4e0d\u662f\u597d\u8282\u70b9\u7684\u503c\u662f $1$\uff0c\u6240\u6709\u662f\u597d\u8282\u70b9\u7684\u503c\u662f $deg[u]$\u3002\n\n\u5177\u4f53\u8f6c\u79fb\u5982\u4e0b\uff1a\n $\\begin{cases} f[u][1] = \\sum{f[v][0]}+1\\\\ f[u][0] = \\max(f[v][0],f[v][1]) \\end{cases}$\n\n\u6700\u540e\u5c31\u662f\u8f93\u51fa\u65b9\u6848\u4e86\uff0c\u5148\u5c06\u6839\u8282\u70b9 (\u89c4\u5b9a\u4e3a $1$) \u662f\u597d\u8282\u70b9\u8fd8\u662f\u4e0d\u662f\u597d\u8282\u70b9\u6700\u4f18\uff0c\u7136\u540e\u5f80\u4e0b dfs\uff0c\u5982\u679c\u8fd9\u4e2a\u8282\u70b9\u662f\u597d\u8282\u70b9\uff0c\u90a3\u4e48\u5b69\u5b50\u8282\u70b9\u5c31\u90fd\u4e0d\u80fd\u662f\u597d\u8282\u70b9\uff0c\u4e00\u76f4\u628a\u6574\u68f5\u6811\u904d\u5386\u5b8c\uff0c\u6700\u540e\u8f93\u51fa\u7b54\u6848\u5373\u53ef\u3002\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#define re register\n#define rep(a,b,c)  for(re int a(b) ; a<=c ; ++a)\n#define drep(a,b,c) for(re int a(b) ; a>=c ; --a)\nusing namespace std;\ninline int read(){\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch == '-') f=-1 ; ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48) ; ch=getchar();}\n    return x*f;\n}\nconst int M = 4e5+10;\ntypedef pair<int,int> pii;\nint n,cnt;\nint head[M],du[M],ans[M];\npii f[M][2];\nstruct edge{\n    int to,nxt;\n}e[M];\ninline void add(int u,int v){\n    e[++cnt].to = v;\n    e[cnt].nxt = head[u];\n    head[u] = cnt;\n}\ninline bool check(pii x,pii y){\n    if(x.first != y.first) return x.first > y.first;\n    return x.second < y.second;\n}\ninline void dfs(int u,int fa){\n    f[u][1] = make_pair(1,du[u]);\n    f[u][0] = make_pair(0,1);\n    for(re int i(head[u]) ; i ; i=e[i].nxt){\n        int v = e[i].to;\n        if(v == fa) continue;\n        dfs(v,u);\n        f[u][1].first += f[v][0].first;\n        f[u][1].second += f[v][0].second;\n        if(check(f[v][0],f[v][1])) f[u][0].first += f[v][0].first,f[u][0].second += f[v][0].second;\n        else f[u][0].first += f[v][1].first,f[u][0].second += f[v][1].second;\n    }\n}\ninline void print(int u,int fa,int zt){\n    if(zt) ans[u] = du[u];\n    else ans[u] = 1;\n    for(re int i(head[u]) ; i ; i=e[i].nxt){\n        int v = e[i].to;\n        if(v == fa) continue;\n        if(zt) print(v,u,0);\n        else{\n            if(check(f[v][0],f[v][1])) print(v,u,0);\n            else print(v,u,1);\n        }\n    }\n}\nsigned main(){\n    n = read();\n    rep(i,1,n-1){\n        int u = read(),v = read();\n        add(u,v),add(v,u);\n        du[u]++,du[v]++;\n    }\n    if(n == 2){\n        printf(\"2 2\\n\");\n        printf(\"1 1\\n\");\n        return 0;\n    }\n    dfs(1,0);\n    if(check(f[1][0],f[1][1])){\n        printf(\"%d %d\\n\",f[1][0].first,f[1][0].second);\n        print(1,0,0);\n    }\n    else{\n        printf(\"%d %d\\n\",f[1][1].first,f[1][1].second);\n        print(1,0,1);\n    }\n    rep(i,1,n) printf(\"%d \",ans[i]);\n    return 0;\n}\n```\n",
        "postTime": 1665368797,
        "uid": 226367,
        "name": "glorious_dream",
        "ccfLevel": 4,
        "title": "CF1646D\u9898\u89e3"
    },
    {
        "content": "* **\u3010\u9898\u76ee\u94fe\u63a5\u3011**\n\n[Link:CF1646D](https://www.luogu.com.cn/problem/CF1646D)\n\n* **\u3010\u89e3\u9898\u601d\u8def\u3011**\n\n\u9996\u5148\u6613\u8bc1\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u4e00\u5b9a\u6784\u6210\u539f\u6811\u7684\u72ec\u7acb\u96c6\u3002$n=2$ \u662f\u552f\u4e00\u7684\u53cd\u4f8b\uff0c\u628a\u5b83\u7279\u5224\u6389\u5373\u53ef\u3002\n\n\u73b0\u5728\u6211\u4eec\u7684\u95ee\u9898\u53d8\u6210\uff1a\u627e\u51fa\u539f\u6811\u4e2d\u5ea6\u6570\u4e4b\u548c\u6700\u5c0f\u7684\u6700\u5927\u72ec\u7acb\u96c6\u3002\u663e\u7136\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u5e26\u7740\u7684\u503c\u5373\u4e3a\u5b83\u7684\u5ea6\u6570\uff0c\u5176\u5b83\u70b9\u8d4b\u503c\u4e3a $1$ \u5373\u53ef\u3002\n\n\u5982\u679c\u4e0d\u8003\u8651\u5ea6\u6570\uff0c\u90a3\u4e48\u5c31\u662f\u6ca1\u6709\u4e0a\u53f8\u7684\u821e\u4f1a\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u6811\u5f62 DP\u3002\u6211\u4eec\u4e5f\u548c\u90a3\u9053\u9898\u4e00\u6837\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u662f\u65e0\u6839\u6811\uff0c\u968f\u4fbf\u4ee5\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u6839\u7ed3\u70b9\u5373\u53ef\u3002\n\n\u6709\u4e86\u5ea6\u6570\u7684\u9650\u5236\uff0c\u6211\u4eec\u5c31\u591a\u8bb0\u5f55\u4e00\u4e2a\u5ea6\u6570\uff0c\u5f53\u67d0\u4e2a\u5b50\u7ed3\u70b9\u9009\u4e0e\u4e0d\u9009\u5f97\u5230\u7684\u72ec\u7acb\u96c6\u5927\u5c0f\u4e00\u6837\uff0c\u6211\u4eec\u8ba4\u4e3a\u5ea6\u6570\u603b\u548c\u66f4\u5c0f\u7684\u65b9\u6848\u66f4\u4f18\u3002\n\nDP \u65f6\u987a\u4fbf\u8bb0\u5f55\u8f6c\u79fb\u8def\u5f84\uff0c\u6700\u540e\u4e00\u904d DFS \u6c42\u7b54\u6848\u5373\u53ef\u3002\n\n* **\u3010\u4ee3\u7801\u5b9e\u73b0\u3011**\n\n```cpp\n#include <iostream>\n#include <vector>\n#include <array>\n \nusing namespace std;\n \narray<int,200001> degs,answers;\narray<vector<int>,200001> sons;\narray<array<int,200001>,2> DP_arr,DP_deg;\narray<array<vector<pair<int,int>>,200001>,2> state;\n \nint DFS(int root,int father)\n{\n\tDP_arr[1][root]=1,DP_deg[1][root]=degs[root]-1;\n\tfor(const int tmp:sons[root])\n\t\tif(tmp!=father)\n\t\t{\n\t\t\tDFS(tmp,root);\n\t\t\tDP_arr[1][root]+=DP_arr[0][tmp],DP_deg[1][root]+=DP_deg[0][tmp],state[1][root].push_back(make_pair(0,tmp));\n\t\t\tif(DP_arr[0][tmp]>DP_arr[1][tmp])\n\t\t\t\tDP_arr[0][root]+=DP_arr[0][tmp],DP_deg[0][root]+=DP_deg[0][tmp],state[0][root].push_back(make_pair(0,tmp));\n\t\t\telse if(DP_arr[0][tmp]<DP_arr[1][tmp])\n\t\t\t\tDP_arr[0][root]+=DP_arr[1][tmp],DP_deg[0][root]+=DP_deg[1][tmp],state[0][root].push_back(make_pair(1,tmp));\n\t\t\telse\n\t\t\t\tif(DP_deg[0][tmp]>DP_deg[1][tmp])\n\t\t\t\t\tDP_arr[0][root]+=DP_arr[1][tmp],DP_deg[0][root]+=DP_deg[1][tmp],state[0][root].push_back(make_pair(1,tmp));\n\t\t\t\telse\n\t\t\t\t\tDP_arr[0][root]+=DP_arr[0][tmp],DP_deg[0][root]+=DP_deg[0][tmp],state[0][root].push_back(make_pair(0,tmp));\n\t\t}\n\treturn max(DP_arr[0][root],DP_arr[1][root]);\n}\n \nvoid DFS_2(int root,int cur_st,int father)\n{\n\tif(cur_st)\n\t\tanswers[root]=degs[root];\n\tfor(const auto& tmp:state[cur_st][root])\n\t\tif(tmp.second!=father)\n\t\t\tDFS_2(tmp.second,tmp.first,root);\n}\n \nint main(int argc,char *argv[],char *envp[])\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(nullptr);\n\tanswers.fill(1);\n\tint cnt;\n\tcin>>cnt;\n\tif(cnt==2)\n\t\treturn cout<<\"2 2\\n1 1\",0;\n\tfor(int i=1;i<cnt;i++)\n\t{\n\t\tint tmpfrom,tmpto;\n\t\tcin>>tmpfrom>>tmpto;\n\t\tsons[tmpfrom].push_back(tmpto);\n\t\tsons[tmpto].push_back(tmpfrom);\n\t\tdegs[tmpfrom]++,degs[tmpto]++;\n\t}\n\tcout<<DFS(1,0)<<' ';\n\tif(DP_arr[0][1]>DP_arr[1][1])\n\t\tcout<<DP_deg[0][1]+cnt;\n\telse if(DP_arr[0][1]<DP_arr[1][1])\n\t\tcout<<DP_deg[1][1]+cnt;\n\telse\n\t\tcout<<min(DP_deg[0][1],DP_deg[1][1])+cnt;\n\tcout<<'\\n';\n\tif(DP_arr[0][1]>DP_arr[1][1])\n\t\tDFS_2(1,0,0);\n\telse if(DP_arr[0][1]<DP_arr[1][1])\n\t\tDFS_2(1,1,0);\n\telse\n\t\tif(DP_deg[0][1]<DP_deg[1][1])\n\t\t\tDFS_2(1,0,0);\n\t\telse \n\t\t\tDFS_2(1,1,0);\n\tfor(int i=1;i<=cnt;i++)\n\t\tcout<<answers[i]<<' ';\n \treturn 0;\n}\n```",
        "postTime": 1647064125,
        "uid": 372983,
        "name": "Antarctic_Cube",
        "ccfLevel": 6,
        "title": "Solution:CF1646D(Weight the Tree)"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1646D)\n\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u68f5\u6811\uff0c\u4f60\u9700\u8981\u7ed9\u6811\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u786e\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570\u6743\u503c $w_i$\u3002\u4e00\u4e2a\u8282\u70b9\u7684 $u$ \u7684\u8d21\u732e\u5c31\u662f \n\n$$\n[w_u=\\sum_{(u,v)}w_v]\n$$\n\n\u6784\u9020\u4e00\u79cd\u65b9\u6848\u4f7f\u5f97\u6240\u6709\u8282\u70b9\u8d21\u732e\u603b\u548c\u6700\u5927\uff0c\u5728\u6700\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5c0f\u5316 $\\sum w$ \u7684\u503c\u3002\n\n## \u601d\u8def\n\n\u5148\u60f3\u4e00\u60f3\u6811\u4e0a\u76f8\u90bb\u7684\u4e24\u4e2a\u70b9\u662f\u5426\u90fd\u53ef\u80fd\u9020\u6210 $1$ \u7684\u8d21\u732e\u3002\n\n\u7b54\u6848\u662f\u80af\u5b9a\u7684\uff0c\u4f46\u662f\u53ea\u6709\u4e00\u79cd\u60c5\u51b5\u5c31\u662f\n\n```\n2\n1 2\n```\n\n\u8fd9\u7ec4\u6570\u636e\u3002\n\n\u6211\u4eec\u5bf9\u8fd9\u7ec4\u6570\u636e\u8fdb\u884c\u7279\u5224\u4e4b\u540e\uff0c\u5269\u4e0b\u7684\u6570\u636e\u5c31\u6709\u4e86\u4e00\u4e2a\u7279\u6b8a\u7684\u6027\u8d28\u2014\u2014**\u76f8\u90bb\u4e24\u4e2a\u70b9\u81f3\u591a\u53ea\u4f1a\u6709\u4e00\u4e2a\u70b9\u9020\u6210\u8d21\u732e\u3002**\n\n\u63a5\u4e0b\u6765\u8003\u8651\u6811\u5f62 $dp$\u3002\u9ed8\u8ba4\u4ee5 $1$ \u4e3a\u6839\u3002\n\n- \u8bbe $f_{i,0}$ \u8868\u793a $i$ \u9020\u6210 $1$ \u7684\u8d21\u732e\u7684\u65f6\u5019 $i$ \u7684\u5b50\u6811\u5185\u6700\u591a\u53ef\u4ee5\u9020\u6210\u591a\u5c11\u8d21\u732e\u3002\n- \u8bbe $f_{i,1}$ \u8868\u793a $i$ \u9020\u6210 $0$ \u7684\u8d21\u732e\u7684\u65f6\u5019 $i$ \u7684\u5b50\u6811\u5185\u6700\u591a\u53ef\u4ee5\u9020\u6210\u591a\u5c11\u8d21\u732e\u3002\n- \u8bbe $g_{i,0}$ \u8868\u793a\u5728\u6ee1\u8db3 $f_{i,0}$ \u6700\u5927\u7684\u60c5\u51b5\u4e0b\uff0c$i$ \u7684\u5b50\u6811\u4e2d\u6240\u6709\u8282\u70b9\u6743\u503c\u603b\u548c\u7684\u6700\u5c0f\u503c\u3002\n- \u8bbe $g_{i,1}$ \u8868\u793a\u5728\u6ee1\u8db3 $f_{i,1}$ \u6700\u5927\u7684\u60c5\u51b5\u4e0b\uff0c$i$ \u7684\u5b50\u6811\u4e2d\u6240\u6709\u8282\u70b9\u6743\u503c\u603b\u548c\u7684\u6700\u5c0f\u503c\u3002\n\n\u8f6c\u79fb\u6bd4\u8f83\u663e\u7136\u3002\n\n\u5bf9\u4e8e $f_{i,0}$\uff1a\n\n$$\nf_{i,0}=\\sum_{j \\in son_i} f_{j,1} \n$$\n\n\u5bf9\u4e8e $f_{i,1}$\uff1a\n\n$$\nf_{i,1}=\\sum_{j \\in son_i} \\max\\{f_{j,0},f_{j,1}\\}\n$$\n\n\u5bf9\u4e8e $g$ \u7684\u8f6c\u79fb\u8ba8\u8bba\u4e00\u4e0b\u5373\u53ef\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u600e\u4e48\u7ed9\u70b9\u786e\u5b9a\u6743\u503c\u3002\n\n\u6211\u4eec\u8ba1 $du_x$ \u8868\u793a\u4e0e $x$ \u76f8\u8fde\u7684\u70b9\u7684\u6570\u91cf\u3002\n\n- \u5982\u679c\u8981 $x$ \u4ea7\u751f $1$ \u7684\u8d21\u732e\uff0c$w_x \\leftarrow du_x$\u3002\n- \u5426\u5219 $w_x \\leftarrow 1$\u3002\n\n\u6700\u540e\u6839\u636e\u6c42\u51fa\u6765\u7684 $f,g$ \u9012\u5f52\u6c42\u89e3\u65b9\u6848\u5373\u53ef\u3002\n\n[\u8bc4\u6d4b\u8bb0\u5f55](https://codeforces.live/problemset/submission/1646/148380498)",
        "postTime": 1646878135,
        "uid": 538677,
        "name": "Rad_Forever",
        "ccfLevel": 0,
        "title": "CF1646D Weight the Tree \u9898\u89e3"
    },
    {
        "content": "\u5f88\u6709\u8da3\u7684\u4e00\u4e2a\u6811\u5f62 DP \u95ee\u9898\u3002\n\n## \u601d\u8def\n\n\u8003\u8651 $dp_{i,j},minv_{i,j}$\uff0c\u8868\u793a\u770b\u5230\u7b2c $i$ \u53f7\u8282\u70b9\uff0c\u5f53\u524d\u8282\u70b9\u662f\u5426\u51c6\u5907\u6210\u4e3a\u4e00\u4e2a**\u597d**\u8282\u70b9\u7528 $j$ \u8868\u793a\uff08$j=0,1$\uff09\uff0c\u6700\u591a\u53ef\u4ee5\u6709\u591a\u5c11\u4e2a\u8282\u70b9\u662f**\u597d**\u7684\uff0c\u4ee5\u53ca\u5728**\u597d**\u8282\u70b9\u6700\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5c11\u7684\u548c\u3002\u6613\u5f97\uff0c\u5f53\u67d0\u4e2a\u8282\u70b9\u4e0d\u60f3\u6210\u4e3a**\u597d**\u8282\u70b9\u65f6\uff0c\u6700\u597d\u586b\u5f97\u6700\u5c0f\uff0c\u5373 $1$\u3002\n\n\u8003\u8651\u8f6c\u79fb\uff0c\u6211\u8981\u60f3\u6210\u4e3a\u4e00\u4e2a**\u597d**\u7684\u8282\u70b9\uff0c\u6211\u7684\u697c\u4e0a\u697c\u4e0b\u5747\u4e0d\u53ef\u4ee5\u662f\u4e00\u4e2a**\u597d**\u7684\u8282\u70b9\uff0c\u90a3\u4e48\uff0c$dp_{i,1}=\\sum dp_{son_i,0}+1$\uff0c$minv_{i,1}=\\sum minv_{son_i,0}+sonnum_i+1$\uff0c\u5176\u4e2d $sonnum_i$ \u8868\u793a $i$ \u7684\u5b69\u5b50\u4e2a\u6570\u3002\u4e0d\u60f3\u6210\u4e3a\u4e00\u4e2a**\u597d**\u7684\u8282\u70b9\uff0c\u5c31\u9700\u8981\u8003\u8651\u6211\u7684\u513f\u5b50\u662f\u6216\u4e0d\u662f**\u597d**\u7684\u8282\u70b9\u5747\u53ef\uff0c\u6b64\u65f6\uff0c\u6309\u7167 $max(dp_{son_i,1},dp_{son_i,0})$ \u6765\u8d21\u732e\uff0c\u82e5\u4e24\u4e2a\u76f8\u7b49\uff0c$minv_{son_i,0/1}$ \u5c0f\u7684\u4e00\u65b9\u8d21\u732e\u7ed9\u6211\u3002\u548c\u6210\u4e3a**\u597d**\u8282\u70b9\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u91cc $dp_{i,0}$ \u4e0d\u80fd\u518d\u589e\u52a0 $1$ \u4e86\uff0c\u540c\u6837\uff0c$minv_{i,0}$ \u53ea\u80fd\u589e\u52a0 $1$\u3002\n\n\u8fd9\u6837\u8c8c\u4f3c\u5df2\u7ecf\u89e3\u51b3\u95ee\u9898\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u6c42\u51fa\u6700\u591a\u70b9\u6570\u548c\u5bf9\u5e94\u7684\u6700\u5c0f\u503c\uff0c\u7136\u800c\u5e76\u4e0d\u80fd\u6784\u9020\u51fa\u70b9\u6743\uff0c\u6b64\u65f6\u6211\u4eec\u5c31\u8981\u8003\u8651\u8f6c\u79fb\u65f6\u8bb0\u5f55 $choose$ \u6570\u7ec4\u8868\u793a\u7236\u4eb2\u662f\u8981\u6211\u7684 $0$ \u6216 $1$ \u72b6\u6001\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u518d\u6df1\u641c\u4e00\u904d\u83b7\u5f97\u7b54\u6848\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n)$\uff0c\u4e0d\u80fd\u901a\u8fc7\u672c\u9898\u3002\n\n\u7b49\u7b49\uff0c\u4e3a\u5565\u4e0d\u80fd\u901a\u8fc7\uff1f\u8003\u8651\u4ee5\u4e0b\u6570\u636e\uff1a\n\n```\n2\n1 2\n```\n\n\u8fd9\u65f6\uff0c$1,2$ \u8282\u70b9\u53ef\u4ee5\u540c\u65f6\u662f**\u597d**\u7684\u3002\u7279\u5224\u4e00\u4e0b\u5373\u53ef\u3002\u52a0\u4e0a\u7279\u5224\u5373\u53ef\u901a\u8fc7\u672c\u9898\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nstruct E{\n\tint to,next;\n}edge[1000005];\nint h[1000005],cnt;\nvoid add(int u,int v){\n\tcnt++;\n\tedge[cnt].to=v;\n\tedge[cnt].next=h[u];\n\th[u]=cnt;\n} \nint f1[1000005],min1[1000005],f2[1000005],min2[1000005],xs[1000005];\nvoid dfs(int now,int fa){\n\tint tot1=0,minv1=0;\n\tfor(int i=h[now];i;i=edge[i].next){\n\t\tint u=edge[i].to;\n\t\tif(u==fa) continue;\n\t\tdfs(u,now);\n\t\tif(f1[u]>f2[u]){\n\t\t\ttot1+=f1[u];\n\t\t\tminv1+=min1[u];\n\t\t\txs[u]=1;\n\t\t}\n\t\telse if(f1[u]==f2[u]){\n\t\t\tif(min1[u]<min2[u]){\n\t\t\t\ttot1+=f1[u];\n\t\t\t\tminv1+=min1[u];\n\t\t\t\txs[u]=1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\ttot1+=f2[u];\n\t\t\t\tminv1+=min2[u];\n\t\t\t\txs[u]=2;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\ttot1+=f2[u];\n\t\t\tminv1+=min2[u];\n\t\t\txs[u]=2;\n\t\t}\n\t}\n\tf1[now]=tot1,min1[now]=minv1+1;\n\tint tot2=0,minv2=0,cn2=0;\n\tfor(int i=h[now];i;i=edge[i].next){\n\t\tint u=edge[i].to;\n\t\tif(u==fa) continue;\n\t\tcn2++;\n\t\ttot2+=f1[u];\n\t\tminv2+=min1[u];\n\t}\n\tf2[now]=tot2+1,min2[now]=minv2+cn2+1;\n}\nint ans[1000005];\nvoid dfs2(int now,int fa,int cs){\n\tif(cs==1){\n\t\tans[now]=1;\n\t\tfor(int i=h[now];i;i=edge[i].next){\n\t\t\tint u=edge[i].to;\n\t\t\tif(u==fa) continue;\n\t\t\tif(xs[u]==1) dfs2(u,now,1);\n\t\t\telse dfs2(u,now,2);\n\t\t}\n\t}\n\telse{\n\t\tint cn=0;\n\t\tfor(int i=h[now];i;i=edge[i].next){\n\t\t\tint u=edge[i].to;\n\t\t\tif(u==fa) continue;\n\t\t\tdfs2(u,now,1);\n\t\t\tcn++;\n\t\t}\n\t\tans[now]=cn+1;\n\t}\n}\nsigned main(){\n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<n;i++){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tadd(u,v);\n\t\tadd(v,u);\n\t}\n\tif(n==2){\n\t\tcout<<2<<\" \"<<2<<endl;\n\t\tcout<<\"1 1\";\n\t\treturn 0;\n\t}\n\tdfs(1,0);\n\tif(f1[1]>f2[1]){\n\t\tcout<<f1[1]<<\" \"<<min1[1]<<endl;\n\t\tdfs2(1,0,1);\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tcout<<ans[i]<<\" \";\n\t\t}\n\t}\n\telse if(f1[1]==f2[1]){\n\t\tif(min1[1]<min2[1]){\n\t\t\tcout<<f1[1]<<\" \"<<min1[1]<<endl;\n\t\t\tdfs2(1,0,1);\n\t\t\tfor(int i=1;i<=n;i++){\n\t\t\t\tcout<<ans[i]<<\" \";\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tcout<<f2[1]<<\" \"<<min2[1]-1<<endl;\n\t\t\tdfs2(1,0,2);\n\t\t\tans[1]--;\n\t\t\tfor(int i=1;i<=n;i++){\n\t\t\t\tcout<<ans[i]<<\" \";\n\t\t\t}\t\n\t\t}\n\t}\n\telse{\n\t\tcout<<f2[1]<<\" \"<<min2[1]-1<<endl;\n\t\tdfs2(1,0,2);\n\t\tans[1]--;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tcout<<ans[i]<<\" \";\n\t\t}\t\t\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1646560234,
        "uid": 116664,
        "name": "Daniel_lele",
        "ccfLevel": 8,
        "title": "CF1646D\u9898\u89e3"
    }
]
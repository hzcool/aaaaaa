[
    {
        "content": "Updated in 20220920\uff1a\u4f18\u5316\u4e86\u90e8\u5206\u8868\u8ff0\u548c\u683c\u5f0f\u3002\r\n\r\n## $O(n^3)$\r\n\r\n\u9996\u5148\u80af\u5b9a\u8981\u7edf\u8ba1\u524d\u7f00\u548c $pref_n=\\sum\\limits_{i=1}^{n}h_i$\u3002\r\n\r\n\u6211\u4eec\u8bb0 $dp_{i,j}$ \u8868\u793a\u5230\u539f\u7b2c $i$ \u53f7\u5854\u4e3a\u6b62\u7684\u6700\u540e\u4e00\u4e2a\u5854\u662f\u7b2c\u539f $j+1$ \u5230 $i$ \u53f7\u5408\u6210\u7684\u3002\r\n\r\n\u90a3\u4e48\u663e\u7136\u6709 $dp_{i,j}=\\min\\{dp_{j,k}+i-j-1\\}$\u3002\r\n\r\n\u8fd9\u91cc $k$ \u8981\u6ee1\u8db3 $pref_j-pref_k\\le pref_i-pref_j$\u3002\r\n\r\n\u679a\u4e3e $k$ \u5373\u53ef\u3002\r\n\r\n\u4f46\u662f\u8fd9\u5bb6\u4f19\u662f $O(n^3)$\uff0c\u76f4\u63a5\u786c\u4e0a\u53bb\u4f1a T \u6389\u3002\r\n\r\n\u9700\u8981\u4f18\u5316\u3002\r\n\r\n## $O(n^2)$\r\n\r\n$i-j-1$ \u7684\u503c\u4e0e $k$ \u6ca1\u5173\u7cfb\uff0c\u62ce\u51fa\u6765\u770b\u770b\u3002\r\n\r\n$dp_{i,j}=\\min\\{dp_{j,k}\\}+i-j-1$\r\n\r\n\u62ec\u53f7\u91cc\u5269\u4e0b\u7684\u53ea\u548c $j$ \u4e0e $k$ \u6709\u5173\u4e86\u3002\r\n\r\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $j$\uff0c\u53ea\u8981\u77e5\u9053 $dp_{j,k}$ \u6700\u5c0f\u65f6\u7684 $k$ \u5c31\u884c\uff0c\u8fd9\u4e2a $k$ \u8bb0\u4e3a $dpfr_j$\uff0c\u8fd9\u4e2a\u6700\u5c0f\u503c\u8bb0\u4e3a $dpol_j$\u3002\r\n\r\n\u90a3\u4e48\u8fd8\u6709\u4e2a\u9650\u5236\u6761\u4ef6\u4e0d\u7ba1\u4e86\u5417\uff1f\r\n\r\n\u53d8\u4e2a\u5f62\uff1a\r\n\r\n$2\\times pref_j-pref_i\\le pref_k$\r\n\r\n$pref_k$ \u660e\u663e\u968f\u9012\u589e\u800c $k$ \u9012\u589e\uff0c\u5de6\u8fb9\u53c8\u548c $k$ \u65e0\u5173\u3002\r\n\r\n\u7136\u9e45\u53ea\u8981\u6709\u89e3\uff0c$dp_{j,k}$ \u4e5f\u968f $k$ \u9012\u589e\u800c\u9012\u51cf\uff0c\u7406\u7531\u81ea\u5df1\u60f3\u3002\r\n\r\n\u6240\u4ee5\uff0c$dpfr_j$ \u5c31\u662f\u6700\u5927\u7684\u6709\u89e3\u7684 $k$\u3002\r\n\r\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a $i$\uff0c\u627e\u5230\u6700\u5927\u7684 $j$ \u4f7f\u5176\u6ee1\u8db3\u9650\u5236\u6761\u4ef6\uff0c\u7136\u540e\u5c06\u5176\u4f5c\u4e3a $dpfr_i$\uff0c\u5e76\u4ee5\u6b64\u5904\u7406\u51fa $dpol_i$\u3002\r\n\r\n\u90a3\u9650\u5236\u6761\u4ef6\u4e2d\u7684 $i$ \u548c $j$ \u90fd\u77e5\u9053\u4e86\uff0c$k$ \u662f\u8c01\u5462\uff1f\r\n\r\n\u5c31\u662f $dpfr_j$ \u4e86\uff0c\u7406\u7531\u81ea\u5df1\u60f3\u3002\r\n\r\n\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u80fd\u8fc7\u4e86\u3002\r\n\r\n\u8d34\u4e2a\u4ee3\u7801\uff1a\r\n\r\n```\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int _maxn = 5011;\r\nint n, dpfr[_maxn], dpol[_maxn];\r\nlong long h[_maxn], pref[_maxn];\r\nint main() {\r\n  scanf(\"%d\", &n);\r\n  for(int i = 1; i <= n; ++i) {\r\n    scanf(\"%lld\", &h[i]);\r\n    pref[i] = pref[i - 1] + h[i];\r\n  }\r\n  for(int i = 1; i <= n; ++i) {\r\n    for(int j = i - 1; j >= 0; --j) {\r\n      if(pref[i] - pref[j] >= pref[j] - pref[dpfr[j]]) {\r\n        dpol[i] = dpol[j] + (i - j - 1);\r\n        dpfr[i] = j;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  printf(\"%d\", dpol[n]);\r\n  return 0;\r\n}\r\n```\r\n\r\n## $O(n\\log n)$\r\n\r\n\u867d\u7136\u8fc7\u4e86\u9898\u4f46\u8fd8\u662f\u4e0d\u80fd\u505c\u3002\r\n\r\n\u4e00\u79cd\u505a\u6cd5\u662f\u697c\u4e0a\u7684\u5de8\u4f6c\u8bb2\u7684\u65b9\u6cd5\u3002\r\n\r\n\u6211\u7684\u505a\u6cd5\uff1a\u5f88\u660e\u663e\u4e0a\u9762\u7684 $dpfr_i$ \u662f\u968f $i$ \u9012\u589e\u7684\u3002\r\n\r\n\u8fd9\u5c31\u662f\u6211\u4eec\u8bf4\u7684\u51b3\u7b56\u5355\u8c03\u6027\uff01\r\n\r\n\u7136\u540e\u5c31\u80fd\u4f18\u5316\u5230 $O(n\\log n)$ \u4e86\u3002\r\n\r\n\u6211\u6ca1\u6709\u5177\u4f53\u5b9e\u73b0\uff0c\u8981\u662f\u5047\u4e86\u544a\u8bc9\u6211\u3002\r\n\r\n## $O(n)$\r\n\r\n\u65e2\u7136\u90fd\u6709\u4e86 $O(n\\log n)$ \u4e86\u90a3\u4e3a\u4ec0\u4e48\u4e0d\u8bd5\u4e00\u4e0b $O(n)$ \u5462\uff1f\r\n\r\n\u518d\u8f6c\u6362\u4e00\u4e0b\u9650\u5236\u6761\u4ef6\uff1a\r\n\r\n$2\\times pref_j+pref_{dpfr_j}\\le pref_i$\r\n\r\n\u597d\u5bb6\u4f19\u8fd9\u4e1c\u897f\u4e0d\u5c31\u662f\u5355\u8c03\u961f\u5217\u4e86\u5417\uff1f\u3002\r\n\r\n\u77e5\u9053\u600e\u4e48\u505a\u7684\u81ea\u5df1\u5207\u9898\u53bb\u5427\u3002\r\n\r\n\u6ca1\u5b66\u8fc7\u7684\u81ea\u5df1 bdfs\u3002\r\n\r\n\u5b66\u8fc7\u7684\u4f46\u6ca1\u5934\u7eea\u7684\u770b\u6211\u7684\u5783\u573e\u89e3\u8bf4\u5427\u3002\r\n\r\n\u6211\u4eec\u8bb0 $dpva_i=2\\times pref_i+pref_{dpfr_i}$ (\u5c31\u662f\u5de6\u8fb9\u90a3\u5768\u4e1c\u897f)\r\n\r\n\u9996\u5148 $pref_i$ \u968f $i$ \u9012\u589e\u800c\u9012\u589e\uff0c\u800c\u4e14 $i$ \u5728\u6211\u4eec\u7684\u6c42\u89e3\u8fc7\u7a0b\u4e2d\u9012\u589e\uff0c\u6240\u4ee5 $pref_i$ \u4f1a\u8d8a\u6765\u8d8a\u5927\u3002\r\n\r\n\u7136\u989d\u6211\u4eec\u8981\u6c42\u6700\u5927\u7684 $j$\u3002\r\n\r\n\u90a3\u4e48\u5bf9\u4e8e\u4e24\u4e2a\u5019\u9009\u4e3a $j$ \u7684\u6570 $a,b$\uff0c\u5982\u679c $a<b$ \u8fd8\u6709 $dpva_a\\ge dpva_b$\u3002\r\n\r\n\u8bf4\u660e\u53ea\u8981 $b$ \u5408\u6cd5\uff0c$a$ \u5c31\u6ca1\u6709\u5b58\u5728\u7684\u5fc5\u8981\u3002\r\n\r\n\u4f46 $b$ \u5fc5\u7136\u6bd4 $a$ \u5148\u6216\u540c\u65f6\u5408\u6cd5\u3002\r\n\r\n\u90a3\u4e48\u6211\u4eec\u8981 $a$ \u6709\u4f55\u7528\uff1f\r\n\r\n\u6240\u4ee5\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a $dpva_i$ \u5355\u8c03\u9012\u51cf\u7684\u5355\u8c03\u961f\u5217\u5373\u53ef\u3002\r\n\r\n\u6ce8\u610f\u961f\u5934\u53ea\u7528\u4e14\u5fc5\u987b\u7559\u4e00\u4e2a\u5408\u6cd5\u7684\u6570\u3002\r\n\r\n\u5f00\u59cb\u524d\u628a $0$ \u4e22\u8fdb\u53bb\uff0c\u5b83\u4e00\u5b9a\u5408\u6cd5\u3002\r\n\r\n\u8d34\u4e00\u4e0b\u4ee3\u7801\uff1a\r\n\r\n\uff08\u597d\u50cf\u6bd4 $O(n^2)$ \u7684\u66f4\u6162\u4e86\u545c\u545c\u545c\uff09\r\n\r\n\uff08\u4e5f\u8bb8\u662f $n$ \u592a\u5c0f\u8d77\u4e0d\u5230\u6548\u679c\u5427\uff09\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int _maxn = 5011;\r\nint n, queu[_maxn], head, tail;\r\nlong long h[_maxn], dpva[_maxn], pref[_maxn], dpol[_maxn];\r\nint main() {\r\n  scanf(\"%d\", &n);\r\n  for(int i = 1; i <= n; ++i) {\r\n    scanf(\"%lld\", &h[i]);\r\n    pref[i] = pref[i - 1] + h[i];\r\n  }\r\n  queu[tail++] = 0;\r\n  for(int i = 1; i <= n; ++i) {\r\n    while(head + 1 < tail && dpva[queu[head]] <= pref[i] && dpva[queu[head + 1]] <= pref[i])\r\n      ++head;\r\n    dpol[i] = dpol[queu[head]] + (i - queu[head] - 1);\r\n    dpva[i] = (pref[i] << 1) - pref[queu[head]];\r\n    while(head < tail && dpva[queu[tail - 1]] >= dpva[i])\r\n      --tail;\r\n    queu[tail++] = i;\r\n  }\r\n  printf(\"%lld\", dpol[n]);\r\n  return 0;\r\n}\r\n```\r\n\r\n\u7136\u540e\u6211\u4eec\u4f1a\u60ca\u5947\u5730\u53d1\u73b0 [CSP-S2019 D2T2](https://www.luogu.com.cn/problem/P5665) \u4e5f\u6709\u7c7b\u4f3c\u6027\u8d28\u3002\r\n\r\n\u6240\u4ee5\u90a3\u9898\u4e5f\u987a\u5e26\u88ab\u6211\u4eec\u505a\u5b8c\u4e86\u3002\r\n\r\n\u81ea\u5df1\u9886\u53cc\u500d\u7ecf\u9a8c\u53bb\u3002",
        "postTime": 1612016290,
        "uid": 336630,
        "name": "dcmfqw",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF229D \u3010Towers\u3011"
    },
    {
        "content": "\u9898\u76ee\u610f\u601d\uff1a\n\n\u4f60\u53ef\u4ee5\u628a\u7b2ci\u5ea7\u5854\u548ci+1\u5ea7\u6216i-1\u5ea7\u5408\u5e76\u6210\u4e00\u4e2a\n\n\u4f7f\u5f97\u5230\u7684\u90a3\u5ea7\u5854\u7684\u9ad8\u5ea6\u662f\u539f\u6765\u4e24\u5ea7\u5854\u7684\u548c\n\n\u95ee\u6700\u4f7f\u5e8f\u5217\u53d8\u6210\u4e25\u683c\u4e0d\u589e\u6700\u5c0f\u5408\u5e76\u6b21\u6570\n\n\n\n------------\n\n\u9996\u5148\u6211\u60f3\u5230\u7684\u662f\u8d2a\u5fc3\uff0c\u7136\u800c\u8d2a\u5fc3\u679c\u65ad\u884c\u4e0d\u901a\uff08~~\u81ea\u8bc1~~\uff09\n\n\u7136\u540e\u770b\u5230\u4e25\u683c\u4e0d\u589e\uff0c\u90a3\u4e48\u5982\u679ci\u524d\u9762\u7684\u5854\u7b26\u5408\u8981\u6c42\uff0c\u6211\u4eec\u53ea\u8981\u77e5\u9053\u6700\u540e\u4e00\u4e2a\u7684\u9ad8\u5ea6\u5c31\u53ef\u4ee5\u5f80\u540e\u63a8\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528DP\u505a\n\nS[i]\u4ee3\u8868\u524d\u7f00\u548c L[i]\u4ee3\u8868\u5230i\u9ad8\u5ea6\uff08\u5408\u5e76\u4e4b\u540e\uff09dp[i]\u8868\u793a\u5230i\u90fd\u7b26\u5408\u8981\u6c42\u7684\u6700\u5c0f\u5408\u5e76\u6b21\u6570\n\n\u90a3\u4e48\u5c31\u6709\u8f6c\u79fb\u65b9\u7a0b\n\n```cpp\nfor(int i=1;i<=n;i++)\n\tfor(int j=0;j<=i;j++)\n\t\tif(S[i]-S[j]>=L[j]&&dp[i]>=dp[j]+i-j-1)\n\t\t{\n\t\t\tdp[i]=dp[j]+i-j-1;\n\t\t\tL[i]=min(L[i],S[i]-S[j]);\n\t\t}\n```\n\n\u6ce8\u610f\u524d\u9762\u7684\u521d\u59cb\u5316\u8981\u628adp\u548cL\u8d4b\u503c\u4e3ainf\n\n\u4ee3\u7801QAQ\n\n```cpp\n#include<bits/stdc++.h>\n#pragma GCC optimize(2)\nusing namespace std;\nconst int Maxn=5e3+5;\nconst int inf=1<<30;\ninline int R()//\u5feb\u8bfb \n{\n\tchar c;int res;\n\twhile((c=getchar())>'9'||c<'0');res=c-'0';\n\twhile((c=getchar())>='0'&&c<='9') res=res*10+c-'0';\n\treturn res;\n}\nint L[Maxn],dp[Maxn],S[Maxn],n;\nint main()\n{\n\tn=R();\n\tfor(int i=1;i<=n;i++)//\u521d\u59cb\u5316 \n\tS[i]=S[i-1]+R(),dp[i]=L[i]=inf;\n\tfor(int i=1;i<=n;i++) \n\tfor(int j=0;j<=i;j++)\n\tif(S[i]-S[j]>=L[j]&&dp[i]>=dp[j]+i-j-1)//\u72b6\u6001\u8f6c\u79fb \n\tdp[i]=dp[j]+i-j-1,L[i]=min(L[i],S[i]-S[j]);\n\tprintf(\"%d\\n\",dp[n]);\n}\n```\n\n",
        "postTime": 1571744671,
        "uid": 220857,
        "name": "\u7d20\u8d28\u73a9\u5bb6\u5b591\u8d85",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF229D \u3010Towers\u3011"
    },
    {
        "content": "\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd $\\text{O}(n^2)$ \u7684\u505a\u6cd5\u3002\n\n\u8bb0 $sum_i=\\sum_{j=1}^{i}h_j$\uff0c$f_i$ \u8868\u793a\u524d $i$ \u4e2a\u5854\u8981\u5f62\u6210\u975e\u9012\u51cf\u5e8f\u5217\u6240\u9700\u8981\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\uff0c$g_i$ \u8868\u793a\u524d $i$ \u4e2a\u5854\u5f62\u6210\u975e\u9012\u51cf\u5e8f\u5217\u65f6\u6700\u540e\u4e00\u4e2a\u5854\u7684\u9ad8\u5ea6\u3002\n\n\u521d\u59cb\u8d4b\u503c\uff1a$f_0=0,g_0=-\\infty$\uff0c\u5176\u4f59\u7684 $f$ \u4e0e $g$ \u5747\u4e3a $\\infty$\u3002\n\n\u8f6c\u79fb\u4e3a\uff1a$f_i=\\min\\limits_{0\\le j\\lt i,sum_i-sum_j\\ge g_j}\\left\\{f_j+(i-j-1)\\right\\}$\u3002\n\n\u5728\u8ba1\u7b97 $f_i$ \u65f6\u987a\u4fbf\u7ef4\u62a4\u4e00\u4e0b $g_i$ \u5c31\u597d\u4e86\u3002\n\nCode\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 5005;\nint sum[N], n, a[N];\nint f[N], g[N];\n\nint main() {\n\tmemset(f, 0x3f, sizeof f);\n\tmemset(g, 0x3f, sizeof g);\n\tf[0] = 0, g[0] = -100000;\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; ++i) scanf(\"%d\", &a[i]), sum[i] = sum[i - 1] + a[i];\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 0; j < i; ++j) {\n\t\t\tif (sum[i] - sum[j] < g[j]) continue;\n\t\t\tif (f[i] > f[j] + (i - j - 1)) {\n\t\t\t\tf[i] = f[j] + (i - j - 1);\n\t\t\t\tg[i] = sum[i] - sum[j];\n\t\t\t}\n\t\t\telse if (f[i] == f[j] + (i - j - 1)) {\n\t\t\t\tg[i] = min(g[i], sum[i] - sum[j]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\", f[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1646968703,
        "uid": 292300,
        "name": "Kobe303",
        "ccfLevel": 0,
        "title": "CF229D"
    },
    {
        "content": "## \u63d0\u4f9b\u4e00\u79cdn logn \u505a\u6cd5\n\n\u672c\u9898\u6734\u7d20 $n^{2}$ \u505a\u6cd5\u5982\u4e0b\uff1a\n\n\u679a\u4e3e\u4e00\u4e2a $i$ \u8868\u793a\u5904\u7406\u5230 $i$ \u4e2a\u5854\uff0c\n\n\u679a\u4e3e\u4e00\u4e2a $j$ \u8868\u793a\u524d $i$ \u4e2a\u5854\u5408\u5e76\u5b8c\u540e\uff0c\u6700\u540e\u4e00\u4e2a\u5854\u662f\u7531\u539f\u6765 $j+1$ \u5230 $i$ \u7684\u5854\u7ec4\u6210\u7684\uff0c\u627e\u5230\u6700\u5927\u7684 $j$\u3002\n\n**\u4e09\u4e2a\u6570\u7ec4\uff1a**$sum_i$ \u8868\u793a\u524d $i$ \u4e2a\u5854\u7684\u9ad8\u5ea6\u4e4b\u548c\uff0c\u5373\u524d\u7f00\u548c\u6570\u7ec4\n\n$dp_i$ \u8868\u793a\u524d $i$ \u4e2a\u5854\u5408\u5e76\u5b8c\u540e\u6240\u9700\u7684\u6700\u5c11\u64cd\u4f5c\u6570\uff0c\n\n$h_i$ \u8868\u793a \u5408\u5e76\u5b8c\u540e\u6700\u540e\u4e00\u4e2a\u5854\u7684\u9ad8\u5ea6\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u8fdb\u884c\u8f6c\u79fb\u4e86\uff1a\n\n```\nfor(int i=1;i<=n;i++)\n\tfor(int j=i-1;j>=0/*0\u4e0d\u8981\u6f0f\u4e86\uff0c\u5373\u6240\u6709\u7684\u90fd\u9009*/;j--)\n\tif(h[j]<=sum[i]-sum[j])\n\t{//\u6211\u4eec\u53ea\u8981\u627e\u5230\u6700\u540e\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u5c31\u53ef\u4ee5\u4e86,\u56e0\u4e3a\u8981dp[i]\u6700\u5c0f\u548ch[i]\u6700\u5c0f \n\t\th[i]=sum[i]-sum[j];//j+1~i,\u6240\u4ee5\u662fsum[i]-sum[i] \n\t\tdp[i]=dp[j]+i-j-1;//\u81ea\u5df1\u624b\u63a8\u4e00\u4e0b\u5c31\u597d\u4e86 \n\t\tbreak;\n\t}\n```\n\u5230\u73b0\u5728\uff0c\u4f60\u5c31\u53ef\u4ee5\u62ff100\u5206\u4e86\uff0c\u4f46\u662f\uff0c\u600e\u4e48\u53ef\u4ee5\u5c31\u6b62\u6b65\u4e8e\u6b64\u5462\uff1f\n\n## nlogn\u505a\u6cd5\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5c31\u4e0a\u9762\u8fd9\u4e2a\u5f0f\u5b50\uff1a$h[j]<=sum[i]-sum[j]$ \u4f3c\u4e4e\u5e76\u4e0d\u53ef\u4ee5\u4e8c\u5206\n\uff0c\u4f46\u662f\u8f6c\u6362\u540e\u53ef\u4ee5\u5f97\u5230\uff1a$h[j]+sum[j]<=sum[i]$ \uff0c\u6b64\u65f6\u5f0f\u5b50\u5de6\u8fb9\u4f9d\u65e7\u6ca1\u6709\u5355\u8c03\u6027\uff08\u8fd9\u4e2a\u53ef\u4ee5\u81ea\u5df1\u624b\u63a8\u4e00\u4e0b\uff09\uff0c\u7136\u800c\u53f3\u8fb9\u5374\u662f\u5355\u8c03\u9012\u589e\u7684\u3002\n\n\u6240\u4ee5\uff0c\u6211\u5c31\u5728\u679a\u4e3e\u5230\u7b2c $i$ \u4e2a\u5854\u65f6\uff0c\u4e8c\u5206\u51fa\u7b2c\u4e00\u4e2a\u5927\u4e8e $h[i]+sum[i]$ \u7684$sum[p]$ \u7136\u540e\u5728$p$\u5904\u6253\u4e0a\u4e00\u4e2a $i$ \u7684\u6807\u8bb0\uff08\u8fd9\u4e2a\u6807\u8bb0\u65f6\u53ef\u4ee5\u76f4\u63a5\u8986\u76d6\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u7684\u662f\u6700\u540e\u4e00\u4e2a\uff0c\u6240\u4ee5\u8d8a\u540e\u6253\u4e0a\u5c31\u8d8a\u4f18\uff09\u3002\n\n\u540c\u65f6\uff0c\u6211\u4eec\u7528\u4e00\u4e2a $nx$ \u6765\u8868\u793a\u76ee\u524d\u6700\u5927\u7684 $j$ \uff0c\u5e76\u6bcf\u6b21\u548c $fl[i]$\uff0c\u53d6\u6700\u5927\u503c\uff08$fl[i]$ \u5373\u7b2c $i$ \u4e2a\u4e0a\u7684\u6807\u8bb0\uff09\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n\tregister int x=0;register char ch=getchar();\n\twhile(ch<'0'||ch>'9')ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn x;\n}\nint n,a[5005],dp[5005],h[5005],sum[5005],p,nx,fl[5005];\nint main()\n{\n\tn=read();\n\tfor(register int i=1;i<=n;i++)\n\ta[i]=read(),sum[i]=sum[i-1]+a[i];\n\tsum[n+1]=1e9;\n\th[1]=a[1];//\u7b2c\u4e00\u4e2a\u5854\u76f4\u63a5\u8d4b\u503c\u5c31\u597d\u4e86\uff0c\u56e0\u4e3a\u53ea\u80fd\u9009\u81ea\u5df1 \n\tp=lower_bound(sum+1,sum+n+2,h[1]+sum[1])-sum;\n\tfl[p]=1;nx=0;\n\tfor(register int i=2;i<=n;i++)\n\t{\n\t\tnx=max(nx,fl[i]);\n\t\tdp[i]=dp[nx]+i-nx-1;//\u548c\u539f\u6765\u7684\u8f6c\u79fb\u4e00\u6a21\u4e00\u6837 \n\t\th[i]=sum[i]-sum[nx];\n\t\tp=lower_bound(sum+1,sum+n+2,h[i]+sum[i])-sum;\n\t\tfl[p]=i;//\u6253\u6807\u8bb0 \n\t}\n\tprintf(\"%d\",dp[n]);\n}\n//by wyq \n```\n\u7136\u800c\u8fd8\u662f\u6bd4n\u65b9\u7684\u6700\u4f18\u89e3\u6162\u597d\u591a\uff0c\u545c\u545c\u545c\u3002",
        "postTime": 1594727612,
        "uid": 88004,
        "name": "\u738b\u5955\u6e05",
        "ccfLevel": 0,
        "title": "CF229D Towers \u9898\u89e3"
    },
    {
        "content": "### Preface  \n\u8fd9\u662f\u4e00\u9053\u7ec3\u4e60\u5355\u8c03\u961f\u5217\u7684\u597d\uff08\u6c34\uff09\u9898\u3002  \n### Problem  \n\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217\uff0c\u53ef\u4ee5\u5c06\u5b50\u4e32\u5408\u5e76\u4e3a\u4e00\u4e2a\u6570\uff0c\u5408\u5e76\u82b1\u8d39\u4e3a\u8be5\u5b50\u4e32\u957f\u5ea6\uff0c\u5408\u5e76\u4e4b\u540e\u8be5\u5b50\u4e32\u53d8\u4e3a\u4e00\u4e2a\u6570\uff0c\u5373\u8be5\u5b50\u4e32\u6240\u6709\u6570\u5b57\u4e4b\u548c\uff0c\u6700\u540e\u4f7f\u5176\u6210\u4e3a\u4e00\u4e2a\u5355\u8c03\u4e0d\u964d\u5e8f\u5217\u3002  \n### Solution  \n\u770b\u5230\u8fd9\u9898\u6211\u4eec\u9996\u5148\u5c31\u53ef\u4ee5\u60f3\u5230\u5408\u5e76\u6570\u5b57\u7684\u4e00\u79cd\u7ebf\u6027 dp\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u6b65\u9012\u63a8\u662f\u5426\u5408\u6cd5\u4ec5\u4ec5\u4e0e\u4e0a\u4e00\u4e2a\u5b50\u4e32\u6709\u5173\uff0c\u4e8e\u662f\u63a8\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a  \n$dp_{i,j}=(dp_{j,k}+(i-j-1))\u00d7[sum(k+1,j) \\leq sum(j+1,i]$  \n\u5176\u4e2d $dp_{i,j}$ \u4ee3\u8868\u63a8\u5230\u7b2c $i$ \u4e2a\u6570\uff0c\u4e0a\u4e00\u4e2a\u5408\u5e76\u7684\u5b50\u4e32\u4e3a $(j+1,i)$\u3002  \n\u8fd9\u4e2a\u73a9\u610f\u590d\u6742\u5ea6\u662f $O(n^3)$ \u7684\uff0c\u8003\u8651\u4f18\u5316\u3002  \n\u5f88\u663e\u7136\uff0c\u5728\u540c\u4e00\u4e2a $i$ \u4e0b\uff0c$j$ \u8d8a\u9760\u524d\u90a3\u4e48\u5c31\u4f1a\u8d8a\u665a\u88ab\u8f6c\u79fb\u5230\uff0c  \n\u5982\u679c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5176\u672c\u8eab\u503c\u8fd8\u6bd4\u524d\u9762\u7684\u4eba\u8981\u5927\u7684\u8bdd\u5b83\u5c31\u662f\u4e2a\u5e9f\u7269\uff0c\u53ef\u4ee5\u76f4\u63a5\u6254\u6389\u3002  \n\u4e8e\u662f\u73b0\u5728\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$ \u5f97\u5230\u4e86\u4e00\u4e2a\u4ece\u5927\u5230\u5c0f\u4f9d\u6b21\u6392\u5f00\u7684 dp \u5e8f\u5217\uff0c\u8d8a\u5f80\u540e\u8d8a\u5927\uff0c\u4e5f\u8d8a\u665a\u88ab\u8f6c\u79fb\u3002  \n\u5f53\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5e8f\u5217\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u53ef\u4ee5\u88ab\u8f6c\u79fb\u65f6\u6211\u4eec\u628a\u7b2c\u4e00\u4e2a\u6254\u6389\uff0c\u8fd9\u91cc\u7684\u505a\u6cd5\u4e0e CSP2019-S \u5212\u5206 \u7684\u505a\u6cd5\u7c7b\u4f3c\u3002  \n\u4f9d\u9898\u610f\u5bf9\u4e8e\u6bcf\u4e2a $i$ \u6253\u51fa\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u3002  \ncode\uff1a  \n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=5010;\nint n;int h[N];\nll sum[N];int dp[N][N];int ans=1e9;\nint Stack[N][N];int head[N];int tail[N];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&h[i]),sum[i]=sum[i-1]+h[i];\n\tfor(int i=0;i<=n;i++)head[i]=1,tail[i]=0;\n\tStack[0][++tail[0]]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=i-1;j>=0;j--){\n\t\t\tif(head[j]>tail[j]||sum[i]-sum[j]<sum[j]-sum[Stack[j][head[j]]])continue;\n\t\t\twhile(head[j]<tail[j]&&sum[i]-sum[j]>=sum[j]-sum[Stack[j][head[j]+1]])head[j]++;\n\t\t\tdp[i][j]=dp[j][Stack[j][head[j]]]+(i-j-1);\n\t\t\tif(i==n)ans=min(ans,dp[i][j]);\n\t\t\tif(head[i]>tail[i]||(head[i]<=tail[i]&&dp[i][j]<=dp[i][Stack[i][tail[i]]]))\n\t\t\t\tStack[i][++tail[i]]=j;\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1650280062,
        "uid": 213173,
        "name": "\u5c0f\u6728\u866b",
        "ccfLevel": 4,
        "title": "\u3010CF\u8fdc\u53e4\u8ba1\u5212\u3011CF229D Towers"
    },
    {
        "content": "### $\\mathtt{Description:}$\n\n\u7ed9\u5b9a $1$ \u4e2a\u5e8f\u5217\uff0c\u5305\u542b $n$ \u4e2a\u6570\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5408\u5e76\u76f8\u90bb\u4e24\u4e2a\u6570\uff0c\u5408\u5e76\u540e\u7684\u6570\u4e3a\u5b83\u4eec\u7684\u548c\uff0c\u6c42\u6700\u5c11\u591a\u5c11\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u5176\u53d8\u4e3a **\u975e\u9012\u51cf** \u5e8f\u5217\u3002\n\n### $\\mathtt{Solution:}$\n\n\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff0c\u5c31\u662f\u5408\u5e76\u7684\u6570\u5fc5\u7136\u4e3a $1$ \u4e2a\u533a\u95f4\uff0c\u90a3\u4e48\u53ef\u4ee5\u6309\u7167\u6700\u540e\u5408\u5e76\u7684\u6570\u662f\u54ea\u4e2a\u533a\u95f4\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u8bbe $f(i,j)$ \u8868\u793a\u524d $i$ \u4e2a\u6570\uff0c\u5408\u5e76\u540e\u6700\u540e $1$ \u4e2a\u6570\u7684\u533a\u95f4\u4e3a $(j,i)$ \uff0c$p(i)$ \u8868\u793a\u524d\u7f00\u548c\uff0c\u6709\uff1a\n\n$f(i,j)=\\min\\{f(i-j,k)+(j-1)\\}\\quad(k\\le i-j\\;,\\;p(i)-p(i-j)\\le p(i-j)-p(i-j-k)$ \u3002\n\n\u590d\u6742\u5ea6 $O(n^3)$ \u3002\n\n\u56fa\u5b9a $i$ \u53d1\u73b0\u968f\u7740 $j$ \u7684\u53d8\u5927\uff0c\u8f6c\u79fb\u96c6\u5408\u4e5f\u968f\u4e4b\u53d8\u5927\uff0c\u90a3\u4e48 $k$ \u7684\u503c\u5c31\u4e0d\u7528\u518d\u679a\u4e3e\u4e86\uff0c\u76f4\u63a5\u52a0\u5c31\u597d\u4e86\u3002\n\n\u53ef\u4ee5\u9884\u5904\u7406 $g(i,j)$ \u8868\u793a $\\sum\\limits_{k=j}^{i}\\min f(i,k)$ \u3002\n\n\u590d\u6742\u5ea6 $O(n^2)$ \u3002\n\n### $\\mathtt{Code:}$\n\n```c++\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <queue>\n\n#define LL long long\n#define PR pair<int,int>\n\nusing namespace std;\n\nconst int kN=5e3+5;\nconst int kInf=1e9;\n\nint n;\nint a[kN];\nint f[kN][kN];\nint p[kN];\nint g[kN][kN];\nint ans;\n\nvoid Input(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i){\n\t\tscanf(\"%d\",&a[i]);\n\t\tp[i]=p[i-1]+a[i];\n\t}\n}\n\nvoid Output(){\n\tans=kInf;\n\tfor(int i=1;i<=n;++i){\n\t\tans=min(ans,f[n][i]);\n\t}\n\tprintf(\"%d\",ans);\n}\n\nint main(){\n\tInput();\n\tfill(f[0],f[0]+kN*kN,kInf);\n\tfill(g[0],g[0]+kN*kN,kInf);\n\tfor(int i=0;i<2;++i){\n\t\tfor(int j=0;j<2;++j){\n\t\t\tf[i][j]=g[i][j]=0;\n\t\t}\n\t}//\u521d\u59cb\u5316i=0/1\u7684\u60c5\u51b5\n\tfor(int i=2;i<=n;++i){\n\t\tint k=i-1;\n\t\twhile(k>0&&p[i-1]-p[k-1]<=a[i]){\n\t\t\tk--;\n\t\t}//j=1\u7684\u60c5\u51b5\n\t\tf[i][i]=i-1;//j=i\u7684\u60c5\u51b5\n\t\tfor(int j=1;j<i;++j){\n\t\t\tif(k<i-j){//\u6392\u9664\u65e0\u6548\u72b6\u6001\n\t\t\t\tf[i][j]=min(f[i][j],g[i-j][i-j-k]+(j-1));\n\t\t\t}\n\t\t\twhile(k>0&&p[i-j-1]-p[k-1]<=p[i]-p[i-j-1]){\n\t\t\t\tk--;\n\t\t\t}//k\u7684\u503c\u51cf\u5c0f\uff0c\u8f6c\u79fb\u96c6\u5408\u4e5f\u5c31\u53d8\u5927\n\t\t}\n\t\tfor(int j=1;j<=i;++j){\n\t\t\tg[i][j]=min(g[i][j-1],f[i][j]);\n\t\t}//\u5904\u7406g\u6570\u7ec4\n\t}\n\tOutput();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1619341213,
        "uid": 147441,
        "name": "Godzilla",
        "ccfLevel": 0,
        "title": "CF229D Towers \u9898\u89e3"
    },
    {
        "content": "\u6709\u4e00\u8bf4\u4e00  \uff0c\u8fd9\u9053\u9898\u8fd8\u86ee\u6709\u610f\u601d\u7684 \uff0c \u6240\u4ee5\u5199\u4e2a\u9898\u89e3\n\n\u770b\u5230\u8fd9\u9053\u9898\u5e94\u8be5\u53ef\u4ee5\u60f3\u5230\u524d\u7f00\u548c\u8fd9\u4e2a\u4e1c\u4e1c \uff0c \u522b\u95ee\u6211\u4e3a\u4ec0\u4e48 \uff0c\u95ee\u5c31\u662f\u76f4\u89c9 \uff0c\u6211\u4eec\u5148\u628a\u73a9\u4e00\u6ce2\u6837\u4f8b\uff08~~\u8fd9\u4e2a\u6837\u4f8b\u592a\u590d\u6742\u4e86 \uff0c\u6211\u4eec\u81ea\u5df1\u6574\u4e00\u4e2a~~\n\n\n```cpp\nzdf[i].len \u8868\u793a\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\u65f6\u6b64\u65f6\u7684\u8fd9\u4e2a\u6570\u5e76\u6216\u4e0d\u5408\u5e76\u7684\u6700\u5c0f\u503c\uff0c\u82e5\u4e0d\u9700\u8981\u5408\u5e76\u4e5f\u5c31\u662f\u4ed6\u81ea\u5df1\u672c\u8eab \n```\n\u53ef\u80fd\u7565\u6709\u4e9b\u7ed5\u53e3 \uff0c\u6211\u4eec\u6765\u63a8\u4e00\u4e0b \uff0c \u7b2c\u4e00\u4e2a\u6570\u81ea\u7136\u6ca1\u6709\u8981\u6c42\uff0c\u4e5f\u5c31\u662f\u4ed6\u672c\u8eab \uff0c \u7b2c\u4e8c\u4e2a\u6570\u6211\u4eec\u6765\u5206\u7c7b\u8ba8\u8bba \uff0c\u82e5\u7b2c\u4e8c\u4e2a\u6570 >= \u7b2c\u4e00\u4e2a\u6570 \uff0c\u6211\u4eec\u4fbf\u4e0d\u7528\u5c06\u4ed6\u4eec\u5408\u5e76 \uff0c\u4e5f\u5c31\u662f\u82e5sum[2] - sum[1] >= zdf[1].len ,\u5219\u8ba9 zdf[2].len = sum[2] - sum[1] \uff08\u4e5f\u5c31\u662f\u4e0d\u52a8\uff09\n\n\u4f46\u662f\u8981\u662f\u7b2c\u4e8c\u4e2a\u6570 < \u7b2c\u4e00\u4e2a\u6570\u8981\u600e\u4e48\u529e\u5462 \uff1f \u8fd9\u65f6\u5019\u5c31\u8981\u628a\u7b2c\u4e8c\u4e2a\u6570\u548c\u7b2c\u4e00\u4e2a\u6570\u5408\u5e76 \uff0c\u4ee5\u6b64\u7c7b\u63a8\u53d6\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u5c0f\u503c \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n1swbt3j.png)\n\n\u6211\u4eec\u5eb7\u5eb7\u8fd9\u7ec4\u6570\u636e \uff1a\u53ef\u77e5zdf[1].len = 8 , zdf[2].len = 8 , zdf[3].len = 15 , zdf[4].len = 9\n\n\u641e\u61c2\u4e86\u8fd9\u4e2a\u5947\u602a\u7684\u4e1c\u897f \uff0c \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4fbf\u8fce\u5203\u800c\u89e3\u4e86 //zdf[i].f \u5c31\u662fdp\u6570\u7ec4\u5566\n\ndp[i] \u8868\u793a\u524di\u4e2a\u9700\u8981\u51e0\u6b21\u64cd\u4f5c\u53d8\u6210\u5408\u6cd5\u5e8f\u5217 \n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b \uff1adp[i] = dp[j] + (i - j  - 1)//\u4e5f\u5c31\u662f\u8bf4\u518d\u52a0\u4e0ai+1\u5230j\u9700\u8981\u5408\u5e76\u7684\u6b21\u6570 \n\n```cpp\n\tfor (int i = 1 ; i <= n ; i++) {\n\t\tfor (int j = 0 ; j < n ; j++) {\n\t\t\tif (sum[i] - sum[j] - zdf[j].len >= 0) {\n\t\t\t\tzdf[i].f = zdf[j].f + i - j - 1 , zdf[i].len = min(zdf[i].len , sum[i] - sum[j]) ; \n\t\t\t}\n\t\t} \n\t}\n```\n\u4ee5\u4e0a\u662f\u6838\u5fc3\u4ee3\u7801\n\n\u53ef\u80fd\u8bf4\u7684\u6709\u4e9b\u5570\u55e6\u4e86 \uff0c \u5c0f\u840c\u65b0\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3 \uff0c \u5e0c\u671b\u53ef\u4ee5\u7ed9dalao\u4eec\u8bb2\u660e\u767d orz \n\n",
        "postTime": 1589186959,
        "uid": 335901,
        "name": "HllwEureka",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF229D \u3010Towers\u3011"
    },
    {
        "content": "\u7d2b\u9898\uff0c\u7b2c\u4e00\u773c\u770b\u5230\u5c31\u5f00\u59cb\u5192\u6c57\uff0c\u601d\u8def\u7a0d\u5fae\u6709\u70b9\u70e6\u3002\n\n- \u9898\u610f\n\n\u89e3\u8bfb\u4e00\u4e0b\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u5e8f\u5217\u5206\u62c6\u6210 $m$ \u4e2a\u5c0f\u5757\u4f7f\u5f97\u6bcf\u4e2a\u5c0f\u5757\u4e2d\u5728 $i$ \u5230 $j$ \u7684\u533a\u95f4\u4e2d\u6709 $\\sum\\limits_{u=i}^j{a_{u}}$ \u6210\u9012\u589e\u987a\u5e8f\u3002\n\n- \u5206\u6790\n\n\u6240\u4ee5\u8bf4\u4e86\u90a3\u4e48\u591a\u5e9f\u8bdd\u5b9e\u9645\u4e0a\u5c31\u662f\u60f3\u8bf4\u8fd9\u9053\u9898\u7528\u8d2a\u5fc3\u65e0\u6cd5\u89e3\u51b3\uff0c\u56e0\u8003\u8651\u52a8\u89c4\u7684\u505a\u6cd5\u3002\n\n\u8fd9\u65f6\u5019\u8fd9\u6837\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u6211\u5df2\u7ecf\u5f97\u5230\u4e86\u4e0a\u4e00\u4e2a\u5757\u7684\u9ad8\u5ea6\u548c\uff0c\u90a3\u4e48\u6211\u5c31\u53ef\u4ee5\u786e\u5b9a\u8fd9\u4e00\u5757\u7684\u6700\u5c0f\u957f\u5ea6\u548c\u6700\u5c0f\u9ad8\u5ea6\uff0c\u8fd9\u6837\u5c31\u6709\u4e86\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a**\u5728\u5f53\u524d\u9009\u4e2d\u5757\u5408\u6cd5\u7684\u524d\u63d0\u4e0b\u6709**\n\n$dp_{i}=\\min\\limits_{i=1}^{n}{\\{dp_{i}, dp_{j}+i-j-1\\}}$\n\n- \u5c31\u8bb2\u5b8c\u4e86\uff0c\u6700\u540e Code\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define maxn 6000\nusing namespace std;\nnamespace q_wr {\n\tinline int read() {\n\t\tchar c = getchar();\n\t\tint x = 0, f = 1;\n\t\twhile (c < '0' || c > '9') {\n\t\t\tif (c == '-') f = -1;\n\t\t\tc = getchar();\n\t\t}\n\t\twhile (c >= '0' && c <= '9') {\n\t\t\tx = (x << 1) + (x << 3) + c - '0';\n\t\t\tc = getchar();\n\t\t}\n\t\treturn x * f;\n\t}\n\tinline void write(int x) {\n\t\tif (x < 0) {\n\t\t\tx = ~(x - 1);\n\t\t\tputchar('-');\n\t\t}\n\t\tif (x > 9)\n\t\t\twrite(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\nusing namespace q_wr;\nint n, a[maxn], s[maxn], dp[maxn];\nint main () {\n\tn = read();\n\tfor (int i = 1; i <= n; i++) {\n\t\ts[i] = s[i - 1] + (a[i] = read());\n\t\tdp[i] = 1e9;\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 0; j < i; j++) {\n\t\t\tif (s[i] - s[j] >= a[j]) {//\u5224\u65ad\u533a\u95f4\u7684\u5408\u6cd5\u6027\n\t\t\t\tdp[i] = min (dp[i], dp[j] + i - j - 1);\n\t\t\t\ta[i] = min(s[i] - s[j], a[i]);//\u66f4\u65b0\u4e0a\u4e00\u5757\u7684\u9ad8\u5ea6\n\t\t\t}\n\t\t}\n\t}\n\twrite(dp[n]);\n}\n```\n",
        "postTime": 1635563690,
        "uid": 317495,
        "name": "JWRuixi",
        "ccfLevel": 7,
        "title": "Solution CF229D"
    },
    {
        "content": "- DP\uff0c\u4f46\u53ef\u4ee5\u7528 $O(n^2)$ \u6c34\u8fc7\n\n\u5728\u6211\u53d1\u8fd9\u7bc7\u9898\u89e3\u7684\u65f6\u5019\uff0c\u524d\u9762\u5df2\u7ecf\u6709 9 \u4f4d dalao \u53d1\u8fc7\u4e86\uff0c\u6211\u672c\u4ee5\u4e3a\u81ea\u5df1\u7684\u505a\u6cd5\u80af\u5b9a\u91cd\u4e86\uff0c\u4f46\u662f\u4e00\u4e00\u770b\u5b8c\u4e4b\u540e\u53d1\u73b0\u81ea\u5df1\u7684\u505a\u6cd5\u548c\u522b\u4eba\u8fd8\u662f\u6709\u533a\u522b\u7684\u3002\n\n**\u9898\u76ee\u5927\u610f\uff1a**\n\n\u53ef\u4ee5\u5c06\u4efb\u610f\u4e00\u4e2a\u6570\u201c\u79fb\u201d\u5230\u4e0e\u5b83\u76f8\u90bb\u7684\u6570\u4e0a\uff0c\u6240\u8c13\u201c\u79fb\u201d\uff0c\u5c31\u662f\u628a\u8fd9\u4e2a\u6570\u52a0\u5230\u4e0e\u5b83\u76f8\u90bb\u7684\u6570\u4e0a\uff0c\u7136\u540e\u628a\u8fd9\u4e2a\u6570\u5220\u6389\u3002\u95ee\u6700\u5c11\u79fb\u51e0\u6b21\u80fd\u662f\u8fd9\u4e2a\u5e8f\u5217\u6210\u4e3a\u4e00\u4e2a\u975e\u964d\u5e8f\u5217\u3002\n\n**\u89e3\u9898\u601d\u8def\uff1a**\n\n- \u5b9a\u4e49\u4e00\u7ef4**\u524d\u7f00\u548c**\u6570\u7ec4 $a$\uff0c$a_i$ \u8868\u793a\u521d\u59cb\u72b6\u6001\u4e0b\u4ece\u7b2c $1$ \u4e2a\u6570\u5230\u7b2c $i$ \u4e2a\u6570\u7684\u603b\u548c\uff0c\u8fd9\u91cc\u76f4\u63a5\u8fb9\u8f93\u5165\u8fb9\u505a\u524d\u7f00\u548c\u5373\u53ef\uff0c\u5c31\u50cf\u8fd9\u6837\n\n```cpp\nfor(int i=1; i<=n; i++) cin>>a[i],a[i]+=a[i-1];\n```\n\n- \u72b6\u6001\u662f\u4e8c\u7ef4\u7684\uff0c\u6bd4\u8f83\u4e71\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a $f_{i,j}$ \u8868\u793a\u5f53\u524d\u5df2\u7ecf\u5408\u5e76\u5b8c\u524d $i$ \u4e2a\u5566\uff0c\u73b0\u5728\u7ba1\u7684\u662f\u7b2c $i+1$ \u4e2a\uff0c\u4e14 $i+1$ \u4e2a\u662f\u7b2c $j+1$ \u4e2a\u5230\u7b2c $i$ \u4e2a\u5408\u6210\u7684\u3002\n\n- \u518d\u679a\u4e3e\u4e00\u4e2a $k$ \u8868\u793a\u5728\u6ee1\u8db3 $a_j-a_k\\le a_i-a_j$ \u5e76\u4e14 $f_j<f_i$ \u7684\u60c5\u51b5\u4e0b\uff0c$f_{i,j}$ \u76f8\u5f53\u4e8e $f_{j,k}+i-j-1$\u3002\u4e3a\u4ec0\u4e48\u8981 ```+i-j-1``` \u5462\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u96be\u770b\u51fa\uff0c\u5408\u5e76\u7684\u533a\u95f4\u662f $[i,j]$\uff0c\u6240\u4ee5\u5408\u5e76\u6b21\u6570\u5c31\u662f $i-j-1$ \u5566\u3002\n\n- ~~\u83b7\u5f97\u6210\u5c31\uff1a~~ \u7ed3\u675f\u4e86\uff1f\u5f53\u7136\u6ca1\u6709\uff01\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u6837\u7684\u8bdd\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n^3)$\uff0c\u800c $n\\le5000$ \u7136\u540e\u5c31 TLE \u5566\u3002\n\n- **\u4f18\u5316**\uff0c\u6211\u4eec\u771f\u7684\u5fc5\u987b\u8981\u679a\u4e3e $k$ \u5417\uff0c\u5f53\u7136\u4e0d\u7528\uff0c\u6211\u4eec\u4e0d\u96be\u60f3\u5230\u7528\u4e00\u4e2a\u6570\u7ec4\u6765\u8bb0\u5f55\uff0c\u5c31\u53eb\u5b83 $fm$ \u5427\uff0c\u4e00\u5f00\u59cb\u7684 $k$ \u5fc5\u5b9a\u662f $0$\uff0c\u6240\u4ee5 $fm_0$ \u4e3a $0$\uff0c\u540e\u9762\uff0c\u5728\u6ee1\u8db3 $a_j-a_k\\le a_i-a_j$ \u5e76\u4e14 $f_j<f_i$ \u7684\u60c5\u51b5\u4e0b\uff0c$fm_i=j$\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a $k$ \u66ff\u6362\u4e3a $fm_j$\uff0c\u7136\u540e\uff0c\u6211\u4eec\u7684\u4efb\u52a1\u5c31\u5b8c\u6210\u5566\uff01\n\n- \u6ce8\u610f\u521d\u59cb\u5316\uff0c$f$ \u6570\u7ec4\u548c $fm$ \u6570\u7ec4\u8981\u8d4b\u503c\u6210\u4e3a\u6781\u5927\u503c\u3002\n\n~~\u8fd9\u4e48\u7b80\u5355\u7684\u9898\u5c31\u6ca1\u5fc5\u8981\u9644[\u4ee3\u7801](https://www.luogu.com.cn/paste/0k5e324m)\u4e86\u5427~~",
        "postTime": 1661567350,
        "uid": 550317,
        "name": "66_66",
        "ccfLevel": 0,
        "title": "CF229D\u9898\u89e3^_^"
    },
    {
        "content": "\u535a\u5ba2\u8fde\u63a5[\u5e0c\u671b\u53ef\u4ee5\u7ed9\u70b9\u8bbf\u95ee\u91cf](https://blog.csdn.net/qq_43804974/article/details/106482524)\n\n\n\u56e0\u4e3a\u6211\u83dc\u6240\u4ee5\u53ea\u80fd\u60f3\u5230\u6d88\u8017\u7a7a\u95f4\u5927\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5dee\u7684\u505a\u6cd5\u4f46\u662f\u6211\u5c31\u662f\u8981\u53d1\uff01\uff01\n\n\u9996\u5148\u8fd9\u79cd\u9898\u9700\u8981\u77e5\u9053\u4ed6\u662f\u4e2adp\uff08\u770b\u4e0d\u51fa\u6765\u5c31GG\uff09\uff0c\u7136\u540e\u601d\u8003\u4e0b\u600e\u4e48\u505a\uff0c\u9996\u5148\u4ed6\u662f\u4f1a\u8fdb\u884c\u533a\u95f4\u5408\u5e76\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fdb\u884c\u8fde\u7eed\u7684\u5408\u5e76\uff0c\u4e5f\u5c31\u662f\u628a\u8fd9\u4e2a\u8fc7\u7a0b\u770b\u505a\u662f\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4\u5408\u5e76\u7684\u8fc7\u7a0b\n\n\n\n\n[1,2]  [3,4,5] [6]\n\n\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5e8f\u5217\u5206\u89e3\u4e3a\u82e5\u5e72\u4e2a\u533a\u95f4\uff08\u533a\u95f4\u957f\u5ea6\u53ef\u4ee5\u4e3a1\uff09\uff0c\u4f46\u662f\u533a\u95f4\u5fc5\u987b\u662f\u8fde\u7eed\u7684\uff0c\u4e0d\u80fd\u8bf4\u4f601\u548c3\u53bb\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u8fd9\u662f\u4e0d\u5141\u8bb8\u7684\u3002\n\n\u77e5\u9053\u4ed6\u662f\u8fd9\u6837\u4e00\u4e2a\u8fc7\u7a0b\u540e\u8981\u5e72\u561b\u5462\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1dp\u8f6c\u6001\n\n\u8bbe f[i][j] \u8868\u793a[1,i]\u7684\u5e8f\u5217\u90fd\u5408\u6cd5\u540e\uff0c\u7b2ci\u4e2a\u4e0e\u524dj\u4e2a\u4f4d\u7f6e\u4e00\u8d77\u5408\u5e76\u7684\u6700\u5c11\u6b21\u6570\uff0c\u4e5f\u5c31\u662f\u533a\u95f4[i-j+1, i]\u4f5c\u4e3a\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4\u3002\n\n\u4e3a\u4ec0\u4e48\u662f\u8fd9\u6837\u5b50\u8bb0\u5f55\u5462\uff0c\u56e0\u4e3a\u5728dp\u4e2d\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u505a\u6cd5\u7684\u7b2c\u4e8c\u7ef4\u5ea6\u8bb0\u5f55\u7684\u662f\u7b2ci\u4e2a\u4f4d\u7f6e\u6240\u4ee3\u8868\u7684\u6743\u503c\u3002\u4f46\u662f\u5728\u8fd9\u9053\u9898\u91cc\u7684\u95ee\u9898\u662f\u6743\u503c\u7684\u53d6\u503c\u8303\u56f4\u662f\u53d6\u51b3\u4e8e\u8f93\u5165\u6570\u636e\uff0c\u5373\u4f7f\u79bb\u6563\u5316\u540e\u8fd9\u4e2a\u6743\u503c\u7684\u53d6\u503c\u8303\u56f4\u4e5f\u53ef\u80fd\u8fbe\u5230\u4e00\u4e2a\u5f88\u5927\u7684\u91cf\u7ea7\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u6211\u4eec\u7684\u7a7a\u95f4\u70b8\u6389\u3002\n\n\u6240\u4ee5\u5c31\u6709\u4e86\u4e0a\u8ff0\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u540c\u6837\u662f\u8bb0\u5f55\u90a3\u4e9b\u72b6\u6001\uff0c\u4f46\u662f\u6211\u4eec\u6362\u4e86\u79cd\u8868\u793a\u65b9\u6cd5\u3002\n\n\u63a5\u4e0b\u6765\u601d\u8003\u8f6c\u79fb\n\n\u6211\u662f\u533a\u95f4[i-j+1, i]\u4f5c\u4e3a\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4\uff0c\u90a3\u4e48\u6211\u8fd9\u4e2a\u533a\u95f4\u7684\u6743\u503c\u662f\u56fa\u5b9a\u7684\uff0c\u4e0a\u4e00\u4e2a\u533a\u95f4\u7684\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u662fi-j\uff0c\u90a3\u4e48\u6211\u4eec\u5728i-j\u6240\u5728\u533a\u95f4\u662f\u53ef\u4ee5\u83b7\u53d6\u4fe1\u606f\uff0ci-j\u8fd9\u4e2a\u4f4d\u7f6e\u5f80\u524d\u5408\u5e76\u4e861\u4e2a\uff0c2\u4e2a\uff0c3\u4e2a\u3002\u3002\u3002\u3002\u3002\n\n\n  \u8fd9\u4e2a\u5927\u5c0f\u53d6\u51b3\u4e8e\u4ec0\u4e48\u65f6\u5019\u62ff\u7684\u6743\u503c\u8d85\u8fc7\u5f53\u524di\u7684\u533a\u95f4\u6240\u4ee3\u8868\u7684\u6743\u503c\u5c31\u4e0d\u884c\u4e86\u3002\u7136\u540e\u89c2\u5bdf\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u9ad8\u90fd\u5927\u4e8e1\uff0c\u533a\u95f4\u6743\u503c\u5177\u6709\u5355\u8c03\u6027\u3002\u6211\u4eec\u5c31\u5bf9\u4e8ei-j\u8fd9\u4e2a\u4f4d\u7f6e\u6700\u591a\u53ef\u4ee5\u5408\u5e76\u591a\u5c11\u4e2a\u4f4d\u7f6e\u662f\u53ef\u4ee5\u4e8c\u5206\u51fa\u6765\u7684\u3002\n\n\u7136\u540e\u5728\u5148\u524d\u8bb0\u5f55\u4e00\u4e2a\u7b54\u6848\u7684\u524d\u7f00min\uff0c\u5c31\u53ef\u4ee5\u4e8c\u5206\u540eO(1)\u5f97\u5230\u7b54\u6848\u3002\n\u590d\u6742\u5ea6\u5c31\u662fO(n^2logn)\n\n```cpp\nint N,f[max_][max_],sum[max_],value[max_][max_];\nil int getsum(int L, int R) {\n\treturn sum[R] - sum[L - 1];\n}\nil void update(int x) {\n\tvalue[x][0] = inf;\n\tfor (int i = 1; i <= x; i++) {\n\t\tvalue[x][i] = min(value[x][i - 1], f[x][i]);\n\t}\n}\n\nil int getv(int weizhi, int ht) {\n\tif (weizhi == 0)return 0; \n\tif (getsum(weizhi, weizhi) > ht)return inf;\n\tint L = 1, R = weizhi;\n\twhile (L < R){\n\t\tint mid = ((L + R) >> 1) + 1;\n\t\t//[1,mid]//[weizhi,weizhi - mid + 1]\n\t\tif (getsum(weizhi - mid + 1,weizhi) <= ht)L = mid;\n\t\telse R = mid - 1;\n\t}\n\t//[1,R]\n\treturn value[weizhi][R];\n}\nsigned main() {\n\tN = read();\n\tfor (int i = 1; i <= N; i++) {\n\t\tsum[i] = read();\n\t\tsum[i] += sum[i - 1];\n\t}\n\tmemset(f, 127, sizeof(f)); memset(value, 127, sizeof(value));\n\tf[1][1] = 0; update(1);\n\tfor (int i = 2; i <= N; i++) {\n\t\tfor (int j = 1; j < i; j++) {\n\t\t\t//[i-j+1,i]\n\t\t\tf[i][j] = getv(i - j, getsum(i - j + 1, i)) + j - 1;\n\t\t}\n\t\tf[i][i] = i - 1;\n\t\tupdate(i);\n\t}\n\tint ans = inf;\n\tfor (int i = 1; i <= N; i++) {\n\t\tans = min(ans, f[N][i]);\n\t}\n\tprintf(\"%d\", ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1591019740,
        "uid": 156874,
        "name": "Boxxxxxx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF229D \u3010Towers\u3011"
    }
]
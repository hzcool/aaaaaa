[
    {
        "content": "[cnblogs](https://www.cnblogs.com/zkyJuruo/p/17040949.html)\n\n## \u9898\u610f\n\n> \u7ed9\u5b9a\u6392\u5217 $p$ \u548c $q$\u3002\u6709\u4e00\u5f20 $n \\times n$ \u7684\u7f51\u683c\u56fe\uff0c$(i_1,j_1)$ \u548c $(i_2,j_2)$ \u6709\u8fb9\u5f53\u4e14\u4ec5\u5f53 $|i_1 - i_2| + |j_1 - j_2| = 1 (1 \\le i_1, i_2, j_1, j_2 \\le n)$\u3002\u4f60\u9700\u8981\u6784\u9020 $2n$ \u6761\u8def\u5f84\uff0c\u7b2c $i$ \u6761\u4ece $(1,i)$ \u5230 $(n,p_i)$\uff0c\u7b2c $i+n$ \u6761\u4ece $(i,1)$ \u5230 $(q_i,n)$\uff0c\u4f7f\u5f97\u88ab\u8def\u5f84\u8986\u76d6\u6b21\u6570\u6700\u591a\u7684\u8fb9\u88ab\u8986\u76d6\u7684\u6b21\u6570\u6700\u5c11\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$n \\le 200$\u3002\n\n## \u9898\u89e3\n\n\u5148\u628a\u6ee1\u8db3 $p_i = i$ \u4e14 $q_i = i$ \u7684\u60c5\u51b5\u5224\u6389\uff0c\u6709\u4e14\u4ec5\u6709\u8fd9\u4e2a\u65f6\u5019\u7b54\u6848\u7b49\u4e8e $1$\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u731c\u6d4b\uff0c\u7b54\u6848\u7b49\u4e8e $2$\u3002\n\n\u7136\u540e\u6211\u4eec\u6784\u9020\u51fa $p_i = n-i+1$ \u4e14 $q_i = n-i+1$ \u7684\u65b9\u6848\u3002\u8fd9\u4e2a\u5efa\u8bae\u8bfb\u8005\u81ea\u884c\u6784\u9020\uff0c\u4e0d\u4f1a\u4e5f\u53ef\u4ee5\u770b\u770b\u6211\u7684\u4ee3\u7801\uff01\n\n\u89c2\u5bdf\u5230\u5982\u679c $p_i>p_{i+1}$\uff0c\u90a3\u4e48\u7b2c $i$ \u6761\u8def\u5f84\u4e00\u5b9a\u548c\u7b2c $i+1$ \u6761\u8def\u5f84\u76f8\u4ea4\u3002\u8fd9\u4e2a\u65f6\u5019\u5982\u679c\u6211\u4eec\u4ea4\u6362\u7b2c\u4e00\u4e2a\u4ea4\u70b9\u540e\u7684\u8def\u5f84\uff0c\u5c31\u53ef\u4ee5\u4ea4\u6362 $p_i$ \u548c $p_{i+1}$\u3002\n\n\u6ce8\u610f\u5230\u4ece\u6ee1\u8db3 $p_i = n - i + 1$ \u7684\u6392\u5217\u5f00\u59cb\uff0c\u4ea4\u6362 $p_i > p_{i+1}$\uff0c\u53ef\u4ee5\u5f97\u5230\u4efb\u610f\u6392\u5217\uff08\u5373\u5bf9\u4efb\u610f\u6392\u5217\u5c06\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u7684\u8fc7\u7a0b\u5012\u8fc7\u6765\u505a\uff09\uff0c\u56e0\u6b64\u95ee\u9898\u5f97\u5230\u89e3\u51b3\uff01\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n^3)$\uff0c\u53ef\u4ee5\u4f18\u5316\u5230 $\\Theta(n^2)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define L(i, j, k) for(int i = (j); i <= (k); ++i)\n#define R(i, j, k) for(int i = (j); i >= (k); --i)\n#define ll long long\n#define vi vector <int>\n#define sz(a) ((int) (a).size())\n#define me(f, x) memset(f, x, sizeof(f))\n#define uint unsigned int \n#define ld long double \n#define ull unsigned long long \nusing namespace std;\nconst int N = 507;\n#define VP vector < pair < int, int > > \nint n, p[N], q[N];\nVP G[N * 2];\nint vis[N][N];\nvoid fix(VP &u) {\n\tVP stk;\n\tfor(auto &p : u) {\n\t\tint ti = vis[p.first][p.second];\n\t\tif(ti) while(sz(stk) >= ti) stk.pop_back();\n\t\tstk.emplace_back(p);\n\t\tvis[p.first][p.second] = sz(stk);\n\t}\n\tu = stk;\n\tfor(auto &p : u) vis[p.first][p.second] = 0;\n}\nvoid swp(VP &u, VP &v) {\n\tL(i, 0, sz(u) - 1) vis[u[i].first][u[i].second] = i + 1;\n\tL(i, 0, sz(v) - 1) if(vis[v[i].first][v[i].second]) {\n\t\tint x = vis[v[i].first][v[i].second] - 1, y = i;\n\t\tVP X, Y;\n\t\tL(i, x, sz(u) - 1) Y.emplace_back(u[i]);\n\t\tL(i, y, sz(v) - 1) X.emplace_back(v[i]);\n\t\tu.resize(x + sz(X)), v.resize(y + sz(Y));\n\t\tL(i, 0, sz(X) - 1) u[i + x] = X[i];\n\t\tL(i, 0, sz(Y) - 1) v[i + y] = Y[i];\n\t\tbreak;\n\t}\n\tfor(auto &p : u) vis[p.first][p.second] = 0;\n\tfor(auto &p : v) vis[p.first][p.second] = 0; \n\tfix(u), fix(v);\n}\n\nvi get(int *p) {\n\tvi cur;\n\tL(i, 1, n) {\n\t\tint pos = 0;\n\t\tL(j, i, n) if(p[j] == n - i + 1) pos = j;\n\t\twhile(pos > i) swap(p[pos], p[pos - 1]), --pos, cur.emplace_back(pos);\n\t}\n\treverse(cur.begin(), cur.end());\n\treturn cur;\n} \n\nint main() {\n\tios :: sync_with_stdio(false);\n\tcin.tie(0); cout.tie(0);\n\tcin >> n;\n\tL(i, 1, n) {\n\t\tint mt = n - i + 1;\n\t\tif(i <= n / 2) {\n\t\t\tL(j, 1, i) G[i].emplace_back(j, i);\n\t\t\tL(j, i + 1, mt) G[i].emplace_back(i, j);\n\t\t\tL(j, i + 1, n) G[i].emplace_back(j, mt);\n\t\t} else {\n\t\t\tL(j, 1, mt) G[i].emplace_back(j, i);\n\t\t\tR(j, i - 1, mt) G[i].emplace_back(mt, j);\n\t\t\tL(j, mt + 1, n) G[i].emplace_back(j, mt);\n\t\t}\n\t}\n\tL(i, 1, n) {\n\t\tint mt = n - i + 1;\n\t\tL(j, 1, i) G[i + n].emplace_back(i, j);\n\t\tif(i <= n / 2) {\n\t\t\tL(j, i + 1, mt) G[i + n].emplace_back(j, i);\n\t\t}\n\t\telse {\n\t\t\tR(j, i - 1, mt) G[i + n].emplace_back(j, i);\n\t\t}\n\t\tL(j, i + 1, n) G[i + n].emplace_back(mt, j);\n\t}\n\tL(i, 1, n) {\n\t\tcin >> p[i];\n\t}\n\tL(i, 1, n) {\n\t\tcin >> q[i];\n\t}\n\tbool same = true;\n\tL(i, 1, n) same &= p[i] == i && q[i] == i;\n\tif(same) {\n\t\tL(i, 1, n) {\n\t\t\tcout << n << ' ';\n\t\t\tL(j, 1, n) cout << j << ' ' << i << ' ';\n\t\t\tcout << '\\n';\n\t\t}\n\t\tL(i, 1, n) {\n\t\t\tcout << n << ' ';\n\t\t\tL(j, 1, n) cout << i << ' ' << j << ' ';\n\t\t\tcout << '\\n';\n\t\t}\n\t\treturn 0;\n\t}\n\tvi a = get(p), b = get(q);\n\tfor(auto u : a) swp(G[u], G[u + 1]);\n\tfor(auto u : b) swp(G[u + n], G[u + n + 1]);\n\tL(i, 1, n * 2) {\n\t\tcout << sz(G[i]) << ' ';\n\t\tfor(auto u : G[i]) cout << u.first << ' ' << u.second << ' ';\n\t\tcout << '\\n';\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1673343725,
        "uid": 173660,
        "name": "zhoukangyang",
        "ccfLevel": 0,
        "title": "CF1770H"
    },
    {
        "content": "> solution of CF1770H\n\n\u5199\u8fd9\u7bc7\u9898\u89e3\u7684\u65f6\u5019\u5fd8\u8bb0\u4fdd\u5b58\u6240\u4ee5\u91cd\u65b0\u5199\u4e00\u904d\u3002\n\n\u7531\u4e8e\u662f\u8d3a\u7684\u9898\u89e3\uff0c\u6240\u4ee5\u8fd9\u91cc\u8bb2\u8ff0\u4e00\u4e0b\u9898\u89e3\u7684\u505a\u6cd5\u3002\n\n\u4e0d\u96be\u731c\u5230\u7b54\u6848\u4e0d\u4f1a\u5927\u4e8e $2$ \uff0c\u6392\u9664\u7279\u6b8a\u60c5\u51b5 $p_i=i,q_i=i$ \u540e\u63a5\u4e0b\u6765\u5c31\u662f\u5982\u4f55\u6784\u9020 $2$ \u7684\u95ee\u9898 \u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u95ee\u9898 $(p,q)$ , \u8bbe $n$ \u4e3a\u5f53\u524d\u95ee\u9898\u77e9\u9635\u5927\u5c0f \u3002 \u53ef\u4ee5\u8fd9\u6837\u5212\u5206\u8fb9\u7f18\u8def\u5f84 \u3002\n\n1. $(1,1) \\rightarrow (n,p_1) $ \uff0c\u53ef\u4ee5\u7528\u5de6\u4fa7\u8fb9\u548c\u4e0b\u4fa7\u8fb9\u5230\u8fbe\u3002\n2. $(1,1) \\rightarrow (q_1,n) $ \uff0c\u53ef\u4ee5\u7528\u4e0a\u4fa7\u8fb9\u548c\u53f3\u4fa7\u8fb9\u5230\u8fbe\u3002\n3. $(1,n) \\rightarrow (n,p_n) $ \uff0c\u53ef\u4ee5\u7528\u53f3\u4fa7\u8fb9\u548c\u4e0b\u4fa7\u8fb9\u5230\u8fbe\u3002\n4. $(m,1) \\rightarrow (1,n) $ \uff0c\u53ef\u4ee5\u7528\u5de6\u4fa7\u8fb9\u548c\u4e0a\u4fa7\u8fb9\u5230\u8fbe\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u8fd9\u6837\u7684\u8bdd\u6bcf\u6761\u8fb9\u6700\u591a\u90fd\u7ecf\u8fc7\u4e24\u6b21\u3002\n\n\u5bf9\u4e8e\u672c\u8f6e\u6ca1\u6709\u5f71\u54cd\u7684\u70b9 , \u53ef\u4ee5\u8fd9\u6837\u5bf9\u4ed6\u4eec\u8fdb\u884c\u5e73\u79fb :\n\n$$tp_i \\rightarrow p_i-(p_i>p_1)-(p_i>p_n)$$\n$$tq_i \\rightarrow q_i-(q_i>q_1)-(q_i>q_m)$$\n\n\u8fd9\u6837\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a $(tp,tq)$ \u7684\u5b50\u95ee\u9898\u3002\n\n\u5bf9\u4e8e $n=0$ \u548c $n=1$ \u7684\u5904\u7406\u662f\u5e73\u51e1\u7684 \uff0c \u9012\u5f52\u6c42\u89e3\u5b50\u95ee\u9898\u5373\u53ef \u3002",
        "postTime": 1675163359,
        "uid": 235855,
        "name": "shenxinge",
        "ccfLevel": 6,
        "title": "\u5982\u679c\u7231\u80fd\u6539\u53d8\u4e00\u5207"
    }
]
[
    {
        "content": "# Solution\n\n\u672c\u9898\u663e\u7136\u6709\u4e00\u4e2aDP\u7684\u601d\u60f3\u3002\n\n\u8fd9\u91cc\u76f4\u63a5\u4e0a\u72b6\u6001\uff1a$f[i][j][k]$ \u8868\u793a\u70b9 $(i,j)$ \u5411\u65b9\u5411 $k$ \u7b26\u5408\u8981\u6c42\u7684\u6700\u957f\u5ef6\u4f38\u957f\u5ea6\u3002\n\n\u663e\u7136\u53ef\u4ee5\u5728 $O(n^3)$ \u7684\u65f6\u95f4\u5185\u6c42\u51fa\uff0c\u4e0d\u4f1a $TLE$ \u3002\n\n\u63a5\u4e0b\u6765\u679a\u4e3e\u76f4\u89d2\u9876\u70b9 $(i,j)$ \uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u65b9\u5411\uff0c\u7528\u5df2\u7ecf\u6c42\u51fa\u7684 $f$ \u6570\u7ec4\u5224\u65ad\u659c\u8fb9\u4e0a\u662f\u5426\u6709\u9ed1\u70b9\uff0c\u7d2f\u52a0\u7b54\u6848\u5373\u53ef\u3002\n\n\u5177\u4f53\u89c1\u4ee3\u7801\u3002\n\n\n\n\n# Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=405;\nconst int dx[8]={0,-1,-1,-1,0,1,1,1};\nconst int dy[8]={-1,-1,0,1,1,1,0,-1};\nint n,m,a[N][N],f[N][N][8],ans;\nchar ch;\n\nint main()\n{\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\ta[i][j]=ch-'0';\n\t\t}\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=m;++j)\n\t\t\tfor(int k=0;k<4;++k)\n\t\t\t{\n\t\t\t\tint x=i,y=j;\n\t\t\t\twhile(x>0&&x<=n&&y>0&&y<=m&&a[x][y]==0)x+=dx[k],y+=dy[k];\n\t\t\t\tf[i][j][k]=(i-x!=0?i-x:j-y);\n\t\t\t}\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=m;++j)if(a[i][j]==0)\n\t\t\tfor(int k=0;k<8;++k)\n\t\t\t{\n\t\t\t\tint l=(k+2)%8,w=(k+3)%4;\n\t\t\t\tfor(int t=1;t<min(n,m);++t)\n\t\t\t\t{\n\t\t\t\t\tint xp=i+t*dx[k],yp=j+t*dy[k],xq=i+t*dx[l],yq=j+t*dy[l];\n\t\t\t\t\tif(xp<=0||xp>n||yp<=0||yp>m||xq<=0||xq>n||yq<=0||yq>m)break;\n\t\t\t\t\tif(a[xp][yp]==1||a[xq][yq]==1)break;\n\t\t\t\t\tif(k>=1&&k<=4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif((dx[w]==0||f[xq][yq][w]>(xp-xq)/dx[w])&&(dy[w]==0||f[xq][yq][w]>(yp-yq)/dy[w]))\n\t\t\t\t\t\t\tans++;\n\t\t\t\t\t}else\n\t\t\t\t\t{\n\t\t\t\t\t\tif((dx[w]==0||f[xp][yp][w]>(xq-xp)/dx[w])&&(dy[w]==0||f[xp][yp][w]>(yq-yp)/dy[w]))\n\t\t\t\t\t\t\tans++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\tcout<<ans<<\"\\n\";\n\treturn 0;\n}\n```\n",
        "postTime": 1604393151,
        "uid": 154285,
        "name": "YanYou",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF435D \u3010Special Grid\u3011"
    }
]
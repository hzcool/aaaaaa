[
    {
        "content": "## \u3010DP\u3011CF1363F Rotating Substrings\r\n\r\n### Description\r\n\r\n\u7ed9\u5b9a\u4e24\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s$\uff0c$t$\u3002\u5b9a\u4e49\u4e00\u6b21\u64cd\u4f5c\u4e3a\u9009\u62e9 $s$ \u7684\u4e00\u4e2a\u5b50\u4e32 $s_{l, l +1, \\dots, r}$\uff0c\u7136\u540e\u5c06\u4e4b\u4fee\u6539\u4e3a $s_{r, l, l + 1, l + 2, \\dots, r - 1 }$\u3002\u8bf7\u6c42\u52a9\u4f7f $s$ \u4e0e $t$ \u76f8\u7b49\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u3002\u65e0\u89e3\u8f93\u51fa $-1$\u3002\r\n\r\n\u591a\u7ec4\u6570\u636e\uff0c$\\sum n \\leq 2000$\uff0c$s, t$ \u4e2d\u53ea\u6709\u5c0f\u5199\u5b57\u6bcd\u3002\r\n\r\n### Analysis\r\n\r\n\u9996\u5148\u5982\u679c $s$ \u548c $t$ \u4e2d\uff0c\u5404\u4e2a\u5b57\u6bcd\u51fa\u73b0\u7684\u6b21\u6570\u90fd\u76f8\u540c\uff0c\u5219\u663e\u7136\u53ef\u4ee5\u51d1\u6570\u89e3\uff0c\u5426\u5219\u663e\u7136\u65e0\u89e3\u3002\r\n\r\n\u8003\u8651\u4e00\u6b21\u64cd\u4f5c\u7684\u672c\u8d28\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u4efb\u9009 $s$ \u4e2d\u7684\u4e00\u4e2a\u5b57\u7b26\uff0c\u5c06\u4e4b**\u5411\u524d**\u79fb\u52a8\u4efb\u610f\u4e2a\u4f4d\u7f6e\u3002\u6211\u4eec\u8981\u6700\u5c0f\u5316\u9009\u62e9\u7684\u5b57\u7b26\u6570\u3002\r\n\r\n\u8003\u8651 dp\u3002\u8bbe $f_{i, j}$ \u662f $s$ \u957f\u5ea6\u4e3a $i$ \u7684\u524d\u7f00\uff0c\u63d2\u5165 $i$ \u540e\u9762\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26\u540e\uff0c\u7b49\u4e8e $t$ \u957f\u5ea6\u4e3a $j$ \u7684\u524d\u7f00\u7684\u6700\u5c0f\u82b1\u8d39\u3002\u8fd9\u91cc\u8981\u6c42 $i \\leq j$\u3002\u8f6c\u79fb\u5982\u4e0b\uff1a\r\n\r\n1. \u53ef\u4ee5\u4e0d\u8ba9 $s_i$ \u4e0e $t_j$ \u5339\u914d\uff0c\u800c\u662f\u628a $s_i$ \u5411\u524d\u79fb\u52a8\uff0c\u82b1\u8d39 $1$\uff0c\u8f6c\u79fb\u4e3a $f_{i, j} = f_{i - 1, j} + 1$\u3002\r\n2. \u82e5 $s_i  = t_j$\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u4ee4\u4e8c\u8005\u5339\u914d\uff0c\u8f6c\u79fb\u4e3a $f_{i, j} = f_{i - 1, j - 1}$\u3002\r\n3. \u82e5 $i$ \u7684\u540e\u9762\u6709\u201c\u5bcc\u4f59\u201d\u7684\u5b57\u7b26 $t_j$\uff0c\u90a3\u4e48\u53ef\u4ee5\u4ece $i$ \u540e\u9762\u62bd\u51fa\u4e00\u4e2a\u7b49\u4e8e $t_j$ \u7684\u5b57\u7b26\u653e\u5728\u8fd9\u91cc\uff0c\u4e0e $t_j$ \u5339\u914d\uff0c\u8f6c\u79fb\u4e3a $f_{i, j} = f_{i, j - 1}$\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u6761\u8f6c\u79fb\u7684\u82b1\u8d39\u4f1a\u5728\u540e\u9762\u7684\u67d0\u4e2a\u4f4d\u7f6e\u5728\u7b2c\u4e00\u6761\u8f6c\u79fb\u88ab\u8ba1\u7b97\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u9700\u8981\u8ba1\u7b97\u82b1\u8d39\u3002\r\n\r\n\u4e09\u79cd\u8f6c\u79fb\u53d6\u6700\u5c0f\u503c\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2)$\u3002\r\n\r\n### Code\r\n\r\n```cpp\r\nnamespace Fusu {\r\n\r\nconst int maxn = 2003;\r\nconst int maxt = 26;\r\n\r\nint T;\r\nint n;\r\nint cnt[2][maxn][maxt], f[maxn][maxn];\r\nchar s[maxn], t[maxn];\r\n\r\nvoid Main() {\r\n  for (qr(T); T; --T) {\r\n    qr(n);\r\n    qrs(s + 1); qrs(t + 1);\r\n    for (int i = 1; i <= n; ++i) {\r\n      for (int j = 0; j < maxt; ++j) {\r\n        for (int t = 0; t < 2; ++t) {\r\n          cnt[t][i][j] = cnt[t][i - 1][j];\r\n        }\r\n      }\r\n      ++cnt[0][i][s[i] - 'a'];\r\n      ++cnt[1][i][t[i] - 'a'];\r\n    }\r\n    bool flg = false;\r\n    for (int i = 0; i < maxt; ++i) if (cnt[0][n][i] != cnt[1][n][i]) {\r\n      puts(\"-1\");\r\n      flg = true;\r\n      break;\r\n    }\r\n    if (flg) continue;\r\n    memset(f, 0x3f, sizeof f);\r\n    for (int i = 0; i <= n; ++i) f[0][i] = 0;\r\n    for (int i = 1; i <= n; ++i) {\r\n      for (int j = i; j <= n; ++j) {\r\n        f[i][j] = f[i - 1][j] + 1;\r\n        if (s[i] == t[j]) f[i][j] = std::min(f[i][j], f[i - 1][j - 1]);\r\n        if (cnt[0][i][t[j] - 'a'] < cnt[1][j][t[j] - 'a']) {\r\n          f[i][j] = std::min(f[i][j], f[i][j - 1]);\r\n        }\r\n      }\r\n    }\r\n    qw(f[n][n], '\\n');\r\n  }\r\n}\r\n\r\n} // namespace Fusu\r\n```\r\n\r\n",
        "postTime": 1591582656,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1363F \u3010Rotating Substrings\u3011"
    },
    {
        "content": "> [**CF1363F Rotating Substrings**](https://www.luogu.com.cn/problem/CF1363F) *2600\n\n> \u89e3\u9898\u62a5\u544a\u3002\n\n> [**\u4e0d\u4e00\u5b9a\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c**](https://www.cnblogs.com/UperFicial/p/16736770.html)\u3002\n\n\u611f\u89c9\u697c\u4e0a\u7684 DP \u72b6\u6001\u8bbe\u8ba1\u4e0e DP \u8f6c\u79fb\u65b9\u7a0b\u7684\u8054\u7cfb\u662f\u8bf4\u4e0d\u901a\u7684\uff0c\u6709\u4e9b\u5730\u65b9\u6ca1\u6709\u8bb2\u660e\u767d\uff0c\u6240\u4ee5\u8fd9\u7bc7\u9898\u89e3\u5c31\u8be6\u7ec6\u8bb2\u4e00\u4e0b\u3002\n\n\u9996\u5148\uff0c\u4e00\u6b21\u64cd\u4f5c\u7684\u672c\u8d28\u662f\uff0c\u5c06\u4e00\u4e2a $S$ \u7684\u4e00\u4e2a\u5b57\u7b26\u63d2\u5230\u524d\u9762\u7684\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u3002\n\n\u5224 `-1` \u662f\u5bb9\u6613\u7684\uff0c\u5373\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26 $c$\uff0c\u5728 $S$ \u4e2d\u7684\u51fa\u73b0\u6b21\u6570\u548c $T$ \u4e2d\u7684\u51fa\u73b0\u6b21\u6570\u662f\u76f8\u7b49\u7684\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u8bbe $f_{i,j}$ \u8868\u793a\u5c06 $S$ \u7684\u957f\u5ea6\u4e3a $i$ \u7684\u524d\u7f00\uff0c\u63d2\u5165\u6700\u5c11\u51e0\u4e2a\u5b57\u7b26\uff0c\u4f7f\u5f97\u548c $T$ \u7684\u957f\u5ea6\u4e3a $j$ \u7684\u524d\u7f00\u76f8\u540c\u3002\u663e\u7136\u8fd9\u91cc $i,j$ \u7684\u5927\u5c0f\u5173\u7cfb\u4e3a $i\\le j$\u3002\n\n\u8003\u8651 $f_{i,j}$ \u7684\u8f6c\u79fb\uff0c\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u8ba9 $s$ \u7684\u524d\u7f00 $i$ \u548c $t$ \u7684\u524d\u7f00 $j$ \u5339\u914d\uff0c\u800c\u662f\u8ba9 $s$ \u7684\u524d\u7f00 $i$ \u548c $t$ \u7684\u524d\u7f00 $(j-1)$ \u8fdb\u884c\u5339\u914d\uff0c\u8fd9\u65f6\u5019\u4f1a\u591a\u51fa\u4e00\u4e2a $s_j$ \u6ca1\u6709\u5339\u914d\u3002\u6211\u4eec\u8ba9 $i$ \u4e4b\u540e\u7684\u67d0\u4e00\u4e2a $s_k=t_j$ \u7684\u5b57\u7b26 $s_k$ \u5411\u524d\u79fb\u52a8\u5230 $i$ \u7684\u524d\u9762\uff0c\u4e0e $s_j$ \u8fdb\u884c\u5339\u914d\uff0c\u82b1\u8d39\u4e3a $1$\u3002\u6ce8\u610f\uff0c\u8fd9\u91cc\u4e00\u5b9a\u4f1a\u627e\u5230\u4e00\u4e2a\u5408\u6cd5\u7684 $s_k$\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u5b57\u7b26\u90fd\u662f\u4e24\u4e24\u914d\u5bf9\u7684\u3002\u4e8e\u662f\u6211\u4eec\u6709\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b $f_{i,j}=f_{i,j-1}+1$\u3002\n\n\u5176\u6b21\u662f\u6bd4\u8f83\u7b80\u5355\u7684 case\uff0c\u82e5 $s_i=t_j$\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7 $f_{i-1,j-1}$ \u6765\u7ee7\u627f\u3002$f_{i,j}=f_{i-1,j-1}$\u3002\n\n\u6700\u540e\u4e00\u79cd\u60c5\u51b5\uff0c\u8bbe $x$ \u8868\u793a $s_i$ \u5728 $S$ \u7684\u524d\u7f00 $i$ \u4e2d\u51fa\u73b0\u6b21\u6570\uff0c$y$ \u8868\u793a $s_i$ \u5728 $T$ \u7684\u524d\u7f00 $j$ \u4e2d\u51fa\u73b0\u6b21\u6570\u3002\n\n\u82e5 $x\\le y$ \u8bf4\u660e\u4e86\u4ec0\u4e48\uff1f\u8003\u8651 $f_{i-1,j}$\uff0c$S$ \u7684\u524d\u7f00 $(i-1)$ \u4e0e $T$ \u7684\u524d\u7f00 $j$ \u4e2d $s_i$ \u7684\u6570\u91cf $x',y$ \u4e00\u5b9a\u6ee1\u8db3 $x'<y$\u3002\u8fd9\u4e5f\u5c31\u8bf4\u660e\uff0c\u8981\u60f3\u5b8c\u6210 $(i-1)$ \u548c $j$ \u7684\u5339\u914d\uff0c\u5c31\u5fc5\u987b**\u81f3\u5c11**\u628a $s_i$ \u79fb\u52a8\u5230\u524d\u9762\u3002\u7136\u540e\u518d\u79fb\u52a8\u82e5\u5e72\u5b57\u7b26\u3002\u628a $s_i$ \u79fb\u52a8\u5230\u524d\u9762\u540e\u518d\u63d2\u5165\u82e5\u5e72\u5b57\u7b26\u672c\u8d28\u4e0a\u662f\u524d\u7f00 $i$ \u4e0e $j$ \u8fdb\u884c\u5339\u914d\uff0c\u4e5f\u5c31\u662f $f_{i,j}$ \u7684\u503c\uff0c\u6240\u4ee5\u8fd9\u4e2a\u90e8\u5206\u5c31\u76f4\u63a5\u7ee7\u627f\uff1a$f_{i,j}=f_{i-1,j}$\u3002\n\n$x,y$ \u6c42\u6cd5\u53ef\u4ee5\u7528\u4e00\u4e2a $\\Theta(26n)$ \u7684\u524d\u7f00\u548c\u641e\u5b9a\uff0c\u8f6c\u79fb\u7684\u590d\u6742\u5ea6\u662f $\\Theta(n^2)$ \u7684\uff0c\u603b\u590d\u6742\u5ea6\u4e3a $\\Theta(n^2)$\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\uff0c\u4e0d\u653e\u4e86\uff0c\u60f3\u8981\u7684\u79c1\u4fe1\u6211\u5c31\u597d\u3002",
        "postTime": 1664326316,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010CF1363F Rotating Substrings\u3011"
    },
    {
        "content": "CF\u601d\u7ef4\u9898\u3002\n\n\u89c2\u5bdf\u64cd\u4f5c\u7684\u672c\u8d28\uff0c\u5c31\u662f\u628a\u4e00\u4e2a\u5b57\u7b26\u62ff\u51fa\u6765\u585e\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u611f\u6027\u5206\u6790\n\n\u8981\u4f7f\u64cd\u4f5c\u6570\u6700\u5c0f\u53ef\u4ee5\u60f3\u5230\u4f7f\u7528``DP``\u3002\n\n\u6211\u4eec\u9700\u8981\u4e00\u4e2a$N^2$\u7b97\u6cd5\uff0c\u6240\u4ee5\u53ef\u4ee5\u5b9a\u4e49$N^2$\u7684\u72b6\u6001\u3002\n\n$f[i][j]$\u8868\u793a$S$\u7684\u524d$i$\u4e2a\u5b57\u7b26\u548c$T$\u7684\u524d$j$\u4e2a\u5b57\u7b26\u5339\u914d\u7684\u6700\u5c0f\u82b1\u8d39\u3002\n\n\u73b0\u5728\u4f60\u80af\u5b9a\u4f1a\u95ee$i$\u548c$j$\u4e0d\u76f8\u7b49\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u4e32\u957f\u5ea6\u4e0d\u76f8\u7b49\u600e\u4e48\u5339\u914d\u554a\u3002\n\n\u6211\u4eec\u4ece$S$\u4e32\u7684$i+1\\sim N$\u5148\u501f$j-i$\u4e2a\u4e0e$T$\u4e32\u5339\u914d\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u6709\u4e09\u79cd\u8f6c\u79fb\u3002\n\n\u7b2c\u4e00\u79cd\u662f\u76f4\u63a5\u5339\u914d\n\n$S_i=T_j$\u65f6\uff0c$f[i][j]=f[i-1][j-1]$\n\n\u7b2c\u4e8c\u79cd\u662f\u4ece\u540e\u9762\u501f\u4e00\u4e2a\u5b57\u7b26\n\n\u5bf9\u4e8e\u5f53\u524d$f[i][j]$\uff0c$S$\u4e32\u540e\u9762\u6709\u591a\u4f59\u7684\u5b57\u7b26$T_j$\u624d\u53ef\u4ee5\u501f\uff0c\u5426\u5219\u501f\u4e86\u6362\u4e0d\u8d77\u3002\n\n\u5728\u6ee1\u8db3\u6709\u591a\u4f59\u5b57\u7b26\u60c5\u51b5\u4e0b\uff0c\u8fd9\u65f6$f[i][j]=f[i][j-1]+1$\n\n\u7b2c\u4e09\u79cd\u662f\u8fd8\u5148\u524d\u501f\u7684\u5b57\u7b26\u3002\u56e0\u4e3a\u5148\u524d\u4fdd\u8bc1\u8fd8\u7684\u8d77\uff0c\u6240\u4ee5\u73b0\u5728\u76f4\u63a5\u8fd8\u56de\u53bb\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u6761\u4ef6\u3002\n\n\u8fd9\u65f6\uff0c$f[i][j]=f[i-1][j]$\uff0c\u5373\u628a\u7b2c$i$\u4e2a\u5b57\u7b26\u8fd8\u56de\u53bb\u3002\n\n\n-----------------------------\n\n### Attention\n\n\u5176\u5b9e\u8bfb\u5230\u8fd9\u91cc\u4f60\u8fd8\u6ca1\u6709\u53d1\u73b0\u8fd9\u7bc7\u9898\u89e3\u4e0e\u524d\u4e24\u7bc7\u9898\u89e3\u6709\u4ec0\u4e48\u533a\u522b\u3002\u3002\u3002\n\n\u6211\u53d1\u9898\u89e3\u56e0\u4e3a\u60f3\u4e00\u4e2a\u7ec6\u8282\u60f3\u4e86\u5f88\u4e45\u3002\n\n\u5c31\u662f\u5728\u8fd8\u7684\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u5f53\u524d\u5b57\u7b26$S_i$\u6ca1\u6709\u88ab\u501f\u8fc7\uff0c\u76f4\u63a5\u8fd8\u4e0d\u663e\u7136\u662f\u9519\u7684\uff1f\n\n\u6bd4\u5982$\\texttt{azaaa,aaaaz}$\u3002\n\n\u8fd9\u91cc$f[2][2]$\u53ef\u4ee5\u7531$f[1][2]$\u8f6c\u79fb\uff0c\u4f46\u662f\u663e\u7136$f[2][2]$\u662f\u4e0d\u5b58\u5728\u7684\u3002\n\n\u4f46\u4ed4\u7ec6\u7422\u78e8\u4e0b\u4f1a\u53d1\u73b0\u6211\u4eec\u66f4\u65b0\u4e86$f[2][2]$\u5bf9\u7b54\u6848\u5e76\u6ca1\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u8fd9\u91cc\u8fd8\u4e86\u4e00\u4e2a\u6ca1\u6709\u501f\u8fc7\u7684\u5b57\u7b26\uff0c\u90a3\u4e48\u540e\u9762\u5339\u914d\u7684\u65f6\u5019\u80af\u5b9a\u4f1a\u5c11\u4e00\u4e2a\u5b57\u7b26\uff0c\u5339\u914d\u4e0d\u80fd\u6b63\u5e38\u8fdb\u884c\u3002\u4e0a\u9762\u7684\u4f8b\u5b50\u53d1\u73b0$f[2][2]$\u53ea\u80fd\u5f71\u54cd\u72b6\u6001$f[3][3],f[4][4]$\uff0c\u4e0d\u53ef\u80fd\u5bf9$f[i][5]$\u4ea7\u751f\u5f71\u54cd\u3002\n\n\u6240\u4ee5\u5e76\u4e0d\u4f1a\u5f71\u54cd\u7b54\u6848\u3002\n\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 2005\nusing namespace std;\nint n;char s[N],t[N];\nint f[N][N],u[N][28],v[N][28];\nvoid solve(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%s%s\",s+1,t+1);\n\tmemset(u,0,sizeof(u));\n\tmemset(v,0,sizeof(v));\n\trep(i,1,n)u[i][s[i]-'a']++,v[i][t[i]-'a']++;\n\trep(i,1,n)rep(j,0,25)u[i][j]+=u[i-1][j],v[i][j]+=v[i-1][j];\n\trep(i,0,25)if(u[n][i]!=v[n][i]){puts(\"-1\");return ;}\n\trep(i,0,n)rep(j,0,n)f[i][j]=0x3f3f3f3f;\n\trep(i,0,n)f[0][i]=0;\n\trep(i,1,n){\n\t\trep(j,i,n){\n\t\t\tf[i][j]=f[i-1][j]+1;\n\t\t\tif(s[i]==t[j])f[i][j]=min(f[i-1][j-1],f[i][j]);\n\t\t\tif(u[i][t[j]-'a']<v[j][t[j]-'a'])f[i][j]=min(f[i][j],f[i][j-1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",f[n][n]);\n}\nint main(){\n\tint T;scanf(\"%d\",&T);\n\twhile(T--)solve();\n\treturn 0;\n}\n/*\n1\n3\naab\naba\n*/\n```",
        "postTime": 1600772896,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1363F \u3010Rotating Substrings\u3011"
    },
    {
        "content": "\u7b80\u8981\u9898\u610f\n\n\n\n\u7ed9\u5b9a\u4e24\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s\uff0ct$\u3002\u5b9a\u4e49\u4e00\u6b21\u64cd\u4f5c\u4e3a\u9009\u62e9 $s$ \u7684\u4e00\u4e2a\u5b50\u4e32$s_{l, l +1, \\dots, r}$\u7136\u540e\u5c06\u4e4b\u4fee\u6539\u4e3a $s_{r, l, l + 1, l + 2, \\dots, r - 1 }$\u3002\u8bf7\u6c42\u52a9\u4f7f $s$ \u4e0e $t$ \u76f8\u7b49\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u3002\u65e0\u89e3\u8f93\u51fa $-1$\u3002\n\n\u591a\u7ec4\u6570\u636e\uff0c$\\sum n \\leq 2000$\uff0c$s, t$ \u4e2d\u53ea\u6709\u5c0f\u5199\u5b57\u6bcd\u3002\n\n\u8003\u8651\u4e00\u6b21\u64cd\u4f5c\u7684\u5b9e\u8d28\u662f\u628a\u4e00\u4e2a\u5b57\u7b26\u548c\u4e4b\u524d\u7684\u67d0\u4e2a\u5b57\u7b26swap\u4e86\n\n\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u4e1c\u897f\u5bf9\u4e8e\u5b57\u7b26\u4e4b\u95f4\u7684\u76f8\u5bf9\u987a\u5e8f\u8981\u6c42\u4e0d\u5927\uff0c\u800c\u5bf9\u4e8e\u6211\u4eec\u5b57\u7b26\u7684\u4e2a\u6570\u8981\u6c42\u5f88\u4e25\u683cqwq\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0-1\u7684\u5c31\u662f\u5b58\u5728\u67d0\u4e2a\u5b57\u7b26x\uff0cs\u548ct\u7684\u6570\u91cf\u4e0d\u76f8\u7b49\n\n\u5426\u5219\u6211\u4eec\u53ef\u4ee5dp\n\n\u8bbe$dp[i][j]$\u8868\u793as\u4e32\u524di\u4e2a\u5b57\u7b26\u52a0\u4e0a\u540e\u9762\u7684\u4e00\u4e9b\u5b57\u7b26\u51d1\u9f50\u4e86t\u4e32\u7684\u524dj\u4e2a\u5b57\u7b26\n\n\u7136\u540e\u8003\u8651\u8f6c\u79fb\n\n**case1**\n\n$dp[i][j]=dp[i-1][j]+1$\n\n\u8fd9\u4e2a\u662f\u628a\u5b57\u7b26i\u79fb\u5230\u524d\u9762\u53bb\u800c\u4e0d\u548cj\u5339\u914d\n\n\u4f60\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u8f6c\u79fb\u770b\u4e0a\u53bb\u5f88\u6ca1\u7528\uff1f\u4f46\u5e76\u4e0d\u662f\uff0c\u56e0\u4e3a\u4e0b\u9762\u4e24\u79cdcase\u90fd\u662f\u6709\u9650\u5236\u7684\n\n**case2**\n\n$dp[i][j]=dp[i-1][j-1],s_i==t_j$\n\n\u663e\u7136\n\n**case3**\n\n$dp[i][j]=dp[i][j-1]$\n\n\u8fd9\u4e2a\u662f\u6211\u4eec\u628a\u540e\u9762\u7684\u67d0\u4e2a\u5b57\u7b26\u6362\u5230i\u7136\u540e\u5f3a\u5236\u8ba9\u4ed6\u4eec\u5339\u914d\uff0c\u4f60\u53d1\u73b0\u8fd9\u91cc\u6ca1\u6709\u7b97\u8d21\u732e\uff0c\u56e0\u4e3a\u4e00\u5b9a\u4f1a\u5728\u4e4b\u540e\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u6211\u4eeccase1\u628a\u8d21\u732e\u7b97\u597d\n\n\u611f\u6027\u7406\u89e3\u4e00\u4e0b\u5c31\u662f\u8fd9\u4e2acase3\u4e00\u5b9a\u4f1a\u5bf9\u5e94\u540e\u9762case1\u7684\u8f6c\u79fbqwq\n\n\u7136\u800c\u8fd9\u4e2a\u8f6c\u79fb\u662f\u6709\u9650\u5236\u7684\uff0c\u5c31\u662f\u540e\u9762\u7684s\u4e32\u4e2d\u8fd8\u6709\u591a\u4f59\u7684$t_j$\n\n\u5373$pre_s[i][t_j]>pre_t[j][t_j]$\n\n## \n\n\u5982\u679c\u60a8TLE on test164\uff0c\u90a3\u53ef\u80fd\u662f\u56e0\u4e3a\u90a3\u4e2a\u70b9n=2000,len=1\uff0c\u7136\u540e\u60a8\u628a2000*2000\u7684\u6570\u7ec4\u6e05\u96f6\u4e862000\u6b21\n\n~~\u6240\u4ee5\u9762\u5411\u6570\u636e\u6539\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u8fc7~~\n\ncode:\n\n```cpp\n\n//#pragma g++ optimize(\"O2\")\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int MAXN = 2004;\nint n, flag;\nint dp[MAXN][MAXN];\nint cnt1[MAXN][30], cnt2[MAXN][30];\nchar s1[MAXN], s2[MAXN];\n\nnamespace fastIO {\n#define BUF_SIZE (1<<19)\n\tstatic char buf[BUF_SIZE], *p1 = buf, *pend = buf;\n\tinline char nc() {\n\t\tif(p1 == pend) {\n\t\t\tp1 = buf;\n\t\t\tpend = buf + fread(buf, 1, BUF_SIZE, stdin);\n\t\t}\n\t\treturn *p1++;\n\t}\n\tinline int read() {\n\t\tint x = 0;\n\t\tchar s = nc();\n\t\tfor(; !isdigit(s); s = nc());\n\t\tfor(; isdigit(s); s = nc())x = (x << 1) + (x << 3) + s - '0';\n\t\treturn x;\n\t}\n\tinline void str(char *t) {\n\t\tchar s = nc();\n\t\tint cnt = 0;\n\t\tfor(; !isalpha(s); s = nc());\n\t\tfor(; isalpha(s); s = nc())t[++cnt] = s;\n\t\treturn;\n\t}\n}\nusing namespace fastIO;\ninline void init() {\n\n\tn = read();\n\tstr(s1);\n\tstr(s2);\n\tfor(int i = 1; i <= n; ++i) {\n\n\t\tfor(int j = 0; j < 26; ++j)cnt1[i][j] = cnt1[i - 1][j], cnt2[i][j] = cnt2[i - 1][j];\n\t\tcnt1[i][s1[i] - 'a']++;\n\t\tcnt2[i][s2[i] - 'a']++;\n\n\t}\n\tflag = 1;\n\tfor(int i = 1; i <= 29; ++i) {\n\t\tif(cnt1[n][i] != cnt2[n][i]) {\n\t\t\tflag = 0;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(!flag) {\n\t\tputs(\"-1\");\n\t}\n\tint qwq = 0;\n\tfor(int i = 1; i <= n; ++i) {\n\t\tif(s1[i] != s2[i]) {\n\t\t\tqwq = 1;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(!qwq) {\n\t\tputs(\"0\");\n\t\tflag = 0;\n\t}\n}\n\ninline void solve() {\n\tmemset(dp, 0x3f3f3f3f, sizeof(dp));\n\tfor(int i = 0; i <= n; ++i)dp[0][i] = 0;\n\n\tfor(int i = 1; i <= n; ++i) {\n\t\tfor(int j = i; j <= n; ++j) {\n\t\t\tdp[i][j] = dp[i - 1][j] + 1;\n\t\t\tif(s1[i] == s2[j])\n\t\t\t\tdp[i][j] = min(dp[i - 1][j - 1], dp[i][j]);\n\t\t\telse if(cnt1[i][s2[j] - 'a'] < cnt2[j][s2[j] - 'a']) {\n\t\t\t\tdp[i][j] = min(dp[i][j - 1], dp[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\t//\tfor(int i=1; i<=n; ++i) {\n\t//\t\tfor(int j=i; j<=n; ++j) {\n\t//\t\t\tprintf(\"%d \",dp[i][j]);\n\t//\t\t}\n\t//\t\tputs(\"\");\n\t//\t}\n\tprintf(\"%d\\n\", dp[n][n]);\n\treturn ;\n}\n\nint main() {\n\t//\tfreopen(\"test.in\",\"r\",stdin);\n\tint T;\n\tT = read();\n\twhile(T--) {\n\t\tinit();\n\t\tif(flag)\n\t\t\tsolve();\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1591709892,
        "uid": 76990,
        "name": "loveJY",
        "ccfLevel": 9,
        "title": "CF1363F Rotating Substrings"
    }
]
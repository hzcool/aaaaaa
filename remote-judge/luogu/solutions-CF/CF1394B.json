[
    {
        "content": "\u6709\u8da3\u7684\u9898\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u6700\u7ec8\u7684\u8981\u6c42\u5c31\u662f\u6240\u6709\u70b9\u7684\u5165\u5ea6\u4e3a 1\u3002\n\n\u90a3\u4e48\u53ea\u8981\u9884\u5904\u7406\u51fa\u6765\u4e00\u5f00\u59cb\u6bcf\u4e00\u79cd\u7c7b\u578b\u7684\u8fb9\u4f1a\u4f7f\u54ea\u4e9b\u70b9\u7684\u5165\u5ea6+1\uff0c\u6700\u540e\u679a\u4e3e\u4e00\u4e0b\u65b9\u6848\u5e76 check \u5c31\u884c\u4e86\u3002\n\n\u6709\u4e09\u79cd\u5b9e\u73b0\u8fd9\u4e2a\u7684\u65b9\u6cd5\u3002\n\n- bitset\u3002\u590d\u6742\u5ea6 $O(\\dfrac{nk!}{w})$\u3002\u5927\u529b\u5361\u5e38\u7406\u8bba\u4e0a\u53ef\u4ee5\u8fc7\u53bb\u3002\u5b9e\u9645\u4e0a\u7531\u4e8e STL \u7684 bitset \u5e38\u6570\u8fc7\u5927\u4f1a\u88c2\u5f00\u6765\uff0c\u9700\u8981\u624b\u5199\u3002\n\n- \u8003\u8651\u5982\u679c\u4e00\u4e2a\u70b9\u5165\u5ea6\u5927\u4e8e\u7b49\u4e8e 2 \u5219\u4e0d\u884c\u3002\u90a3\u4e48\u9884\u5904\u7406\u51fa\u4e24\u4e24\u7684\u4e92\u65a5\u5173\u7cfb\uff0c\u6700\u540e $O(k^2)$ check \u5c31\u53ef\u4ee5\u4e86\u3002\n\n- Hash\u3002\u7ed9\u6bcf\u4e2a\u70b9\u8d4b\u968f\u673a\u6743\u503c\uff0c\u6700\u540e\u68c0\u67e5\u548c\u3002\u7b80\u5355\u597d\u5199\u4f46\u4f1a\u88ab\u53c9\u3002\n\n\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\uff0c\u6311\u4e00\u79cd\u5b9e\u73b0\u5373\u53ef\uff0c\u6781\u5176\u5bb9\u6613\u3002",
        "postTime": 1597315975,
        "uid": 55078,
        "name": "YLWang",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1394B \u3010Boboniu Walks on Graph\u3011"
    },
    {
        "content": "[CF1394B Boboniu Walks on Graph](https://www.luogu.com.cn/problem/CF1394B)\n\n---\n\n\u4e00\u5f00\u59cb\u60f3\u66b4\u529b\uff0c\u603b\u5171 $9!=362880$ \u79cd\u60c5\u51b5\uff0c\u6bcf\u4e00\u79cd $O(n)$ \u66b4\u529b\u627e\u73af\uff0c\u80af\u5b9a\u8fc7\u4e0d\u53bb\u3002\n\n\u5206\u6790\u4e00\u4e0b\u7279\u6b8a\u6027\u8d28\u3002\n\n\u9996\u5148\uff0c\u5728\u6bcf\u79cd\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u70b9\u80af\u5b9a\u53ea\u6709\u4e00\u6761\u51fa\u8fb9\uff0c\u53c8\u8981\u6c42\u70b9 $u$ \u51fa\u53d1\u80fd\u56de\u5230\u81ea\u5df1\uff0c\u90a3\u56fe\u4e0a\u53ea\u80fd\u662f\u4e00\u5927\u5806\u73af\u3002\n\n\u6240\u4ee5\u6bcf\u4e2a\u70b9\u53ea\u6709\u4e00\u4e2a\u5165\u5ea6\uff0c\u5047\u8bbe $i$ \u7684\u51fa\u8fb9\u5230\u8fbe $p_i$ \uff0c\u90a3\u4e48 $p_1,p_2,\\dots,p_n$ \u4e00\u5b9a\u662f $1,2,\\dots,n$ \u7684\u4e00\u4e2a\u6392\u5217\u3002\n\n\u53ef\u4ee5 **\u54c8\u5e0c** \u5feb\u901f\u5224\u65ad\u3002\n\n\u628a\u70b9\u6309\u51fa\u5ea6\u5206\u6210 $k$ \u7c7b\uff0c\u9884\u5904\u7406\u4e00\u4e0b $sum(i,j)$ \u8868\u793a $c_i=j$ \uff0c\u51fa\u5ea6\u4e3a $i$ \u7684\u6240\u6709\u70b9\u90fd\u8d70\u7b2c $j$ \u8fb9\uff0c\u6240\u5230\u8fbe\u7684\u6240\u6709\u70b9\u7684\u96c6\u5408\u7684 hash \u503c\u3002\n\n\u5982\u4f55\u5bf9\u96c6\u5408 hash\uff0c\u53ef\u4ee5\u501f\u9274\u4e00\u4e0b [P6688](https://www.luogu.com.cn/problem/P6688) \u7684\u641e\u6cd5\u3002\n\n\u6700\u540e $O(k!)$ \u66b4\u529b dfs \u4e00\u4e0b\u7b97\u51fa\u96c6\u5408\u5e76\u96c6\u7684 hash \u503c\u662f\u5426\u7b49\u4e8e $\\{1,2,\\dots,n\\}$ \u7684\u54c8\u5e0c\u503c\u3002\n\n\uff08\u6211 CF \u5199\u5355\u54c8\u5e0c\u5c45\u7136\u6ca1\u88ab\u5361 qwq\n\nCode ~~\u6709\u70b9\u4e11~~\n```cpp\n#pragma GCC optimize(2)\n#include<bits/stdc++.h>\n#define For(i,a,b) for(register int i=(a);i<=(b);++i)\n#define Rep(i,a,b) for(register int i=(a);i>=(b);--i)\n#define int long long\nusing namespace std;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n#define x first \n#define y second\n#define pb push_back\n#define mkp make_pair\n#define maxn 200005\ntypedef pair<int,int>pii;\nint res,n,m,k;\nvector<pii>e[maxn];\nvector<int>v[13];\nconst int b1=19491001;\nunsigned long long pw[maxn],sumn,sum[13][13],qwq;\nvoid dfs(int u)\n{\n\tif(u==k+1){\n\t\tres+=(qwq==sumn);\n\t\treturn;\n\t}\n\tFor(i,0,u-1){\n\t\tqwq+=sum[u][i];\n\t\tdfs(u+1);\n\t\tqwq-=sum[u][i];\n\t}\n}\nsigned main()\n{\n\tn=read(),m=read(),k=read();\n\tpw[0]=1;\n\tFor(i,1,n)pw[i]=pw[i-1]*b1,sumn+=pw[i];\n\tFor(i,1,m){\n\t\tint u=read(),v=read(),w=read();\n\t\te[u].pb(mkp(w,v));\n\t}\n\tFor(i,1,n)sort(e[i].begin(),e[i].end()),\n\t\t\t\tv[e[i].size()].pb(i);\n\tFor(i,1,k)\n\t\tFor(j,0,i-1){\n\t\t\tunsigned long long now=0;\n\t\t\tfor(int p=0;p<v[i].size();++p)\n\t\t\t\tnow+=pw[e[v[i][p]][j].y];\n\t\t\tsum[i][j]=now;\n\t\t}\n\tdfs(1);\n\tcout<<res;\n    return 0;\n}\n```",
        "postTime": 1597307657,
        "uid": 151935,
        "name": "Rainbow_qwq",
        "ccfLevel": 0,
        "title": "CF1394B \u3010Boboniu Walks on Graph\u3011"
    },
    {
        "content": "[\u9898\u9762](https://www.luogu.com.cn/problem/CF1394B)\n\n\u53d1\u73b0 $k$ \u5f88\u5c0f\uff0c\u8003\u8651\u679a\u4e3e $(c_i,c_2, \\cdots,c_k )$\u3002\n\n\u7a0d\u5fae\u601d\u8003\u540e\u53d1\u73b0\uff0c\u82e5 $(c_i,c_2, \\cdots,c_k )$ \u786e\u5b9a\u4e0b\u6765\u4e86\uff0c\u5219\u56fe\u4e2d\u7684\u8fb9\u4e5f\u786e\u5b9a\u4e86\u3002\u5176\u4e2d\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u90fd\u4e3a $1$\uff0c\u8981\u6c42\u6bcf\u4e2a\u70b9\u90fd\u53ef\u4ee5\u56de\u5230\u81ea\u5df1\uff0c\u90a3\u4e48\u5f53\u4e14\u4ec5\u5f53\u56fe\u4e2d\u5269\u4e0b\u7684 $n$ \u6761\u8fb9\u6784\u6210\u4e86\u4e00\u4e9b**\u73af**\u3002\n\n\u53d1\u73b0\u8fd9\u4e2a\u6761\u4ef6\u7b49\u4ef7\u4e8e\u5728\u6700\u540e\u7684\u56fe\u4e2d\uff0c\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u90fd\u4e3a $1$\uff0c\u90a3\u4e48\u8003\u8651\u7ef4\u62a4\u6700\u7ec8\u9009\u51fa\u6765\u7684\u8fb9\u6307\u5411\u7684\u70b9\u7684\u96c6\u5408\u662f\u5426\u4e3a $\\{ 1 \\cdots n\\}$\u3002\n \n\u8003\u8651\u7c7b\u4f3c**\u54c8\u5e0c**\u7684\u505a\u6cd5\u3002\n\n\u4e3a\u6bcf\u4e2a\u70b9\u9644\u4e0a\u4e00\u4e2a**\u968f\u673a\u6743\u503c**\uff0c\u5982\u679c\u6700\u540e\u6240\u6709\u8fb9\u6307\u5411\u7684\u70b9\u7684\u5f02\u6216\u548c\u7b49\u4e8e $1 \\cdots n$ \u7684\u5f02\u6216\u548c\uff0c\u90a3\u4e48\u53ef\u4ee5\u8fd1\u4f3c\u8ba4\u4e3a\u9009\u51fa\u7684\u70b9\u7684\u96c6\u5408\u4e3a $\\{ 1 \\cdots n \\}$\u3002\n\n\u5177\u4f53\u505a\u6cd5\u5148\u9884\u5904\u7406\u51fa\u6570\u7ec4 $s_{i,j}$ \u8868\u793a $c_i=j$ \u65f6\u7684\u6240\u6709\u51fa\u5ea6\u4e3a $i$ \u7684\u70b9\u6307\u5411\u7684\u70b9\u7684\u6743\u503c\u5f02\u6216\u548c\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u4e2a $(c_i,c_2, \\cdots,c_k )$\uff0c\u8ba1\u7b97 $s_{i,c_i}$ \u7684\u5f02\u6216\u548c\u662f\u5426\u7b49\u4e8e $1 \\cdots n$ \u7684\u5f02\u6216\u548c\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(nk^2+k!)$\u3002\n\n~~\u987a\u5e26\u4e00\u63d0\uff0c\u8fd9\u79cd\u5f02\u6216\u968f\u673a\u6743\u503c\u7684\u54c8\u5e0c\u51e0\u4e4e\u5361\u4e0d\u6389~~\n\n$code$\n\n```cpp\n# include <bits/stdc++.h>\n\nusing namespace std;\n\nvoid read(int &x){\n\tstatic char c=getchar();\n\tint f=1;\n\tx=0;\n\twhile(!isdigit(c)) {\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(isdigit(c)){\n\t\tx=x*10+(c^'0');\n\t\tc=getchar();\t\n\t}\n\tx*=f;\n}\n\nconst int N=200010;\n\ntypedef pair<int,int> pii;\n\nint val[N],sum;\n\nint dee[N];\n\nvector <pii> e[N];\n\nint k,s[10][10],ans;\n\nvoid dfs(int x,int ss){\n\tif(x==k+1){\n\t\tif(ss==sum) ans++;\n\t\treturn ; \t\n\t}\n\tfor(int i=1;i<=x;i++) dfs(x+1,s[x][i]^ss);\n}\n\nint main(){\n\t\n\tsrand(time(0));\n\n\tint n,m,u,v,w;\n\t\n\tread(n),read(m),read(k);\n\t\n\tfor(int i=1;i<=n;i++) {\n\t\tval[i]=(1ll*rand()<<15)+rand();\n\t\tsum^=val[i];\n\t}\n\t\n\tfor(int i=1;i<=m;i++){\n\t\tread(u),read(v),read(w);\n\t\te[u].push_back(pii(w,v));\n\t\tdee[u]++;\n\t}\n\t\n\tfor(int i=1;i<=n;i++) sort(e[i].begin(),e[i].end());\n\t\t\n\tfor(int i=1;i<=k;i++){\n\t\tfor(int j=1;j<=i;j++){\n\t\t\tfor(int u=1;u<=n;u++){\n\t\t\t\tif(dee[u]==i) s[i][j]^=val[e[u][j-1].second];\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\n\tdfs(1,0);\n\t\n\tprintf(\"%d\\n\",ans);\n\n\treturn 0;\t\n}\n```\n",
        "postTime": 1636375907,
        "uid": 184084,
        "name": "_Freedom_",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1394B Boboniu Walks on Graph"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://codeforces.ml/contest/1394/problem/B)\n\n$k\\le 9$ \u4e0d\u7528\u60f3\u90fd\u662f\u5165\u624b\u70b9\u3002\u4e00\u4e2a\u663e\u7136\u7684\u60f3\u6cd5\u662f $dfs$ \u6240\u6709\u7684 $c$ \u6700\u591a\u4e5f\u53ea\u6709 $9!$ \u79cd\u3002\u5982\u679c\u6211\u4eec\u80fd\u5728\u4e0d\u5dee\u4e8e $O(\\log n)$ \u7684\u65f6\u95f4\u5185\u5224\u65ad\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u8003\u8651\u5230\u786e\u5b9a\u4e86 $c$ \u4ee5\u540e\uff0c\u6574\u4e2a\u56fe\u5c31\u662f\u4e00\u4e2a\u6bcf\u4e2a\u70b9\u4e3a\u8d77\u70b9\u6709\u4e14\u4ec5\u6709\u4e00\u6761\u8fb9\u7684 $n$ \u8fb9\u6709\u5411\u56fe\u3002\u540c\u65f6\u8981\u6c42\u6bcf\u4e2a\u70b9\u90fd\u5728\u81f3\u5c11\u4e00\u4e2a\u7b80\u5355\u73af\u5185\u3002\u5bb9\u6613\u5f97\u5230\uff1a\n\n\u7ed3\u8bba\uff1a\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u4e5f\u6070\u597d\u4e3a\u4e00\u3002\n\n\u8bc1\u660e\uff1a\u9996\u5148 $\\sum in(i)=\\sum out(i)=n$  \u8fd9\u4e2a\u6ca1\u6709\u95ee\u9898\uff0c\u7136\u540e\u8003\u8651\u67d0\u4e2a\u70b9\u7684\u5165\u5ea6\u4e0d\u80fd\u4e3a $0$\uff0c\u56e0\u4e3a\u8fd9\u6837\u5b83\u5c31\u4e0d\u53ef\u80fd\u56de\u5230\u81ea\u8eab\u3002\u540c\u65f6\u67d0\u4e2a\u70b9\u7684\u5165\u5ea6\u4e0d\u80fd\u5927\u4e8e $1$\uff0c\u56e0\u4e3a\u8fd9\u6837\u5c31\u4f1a\u8ba9\u53e6\u5916\u67d0\u4e2a\u70b9\u7684\u5165\u5ea6\u4e3a $0$. \u8bc1\u6bd5\u3002\n\n\u540c\u65f6\u8003\u8651\u9884\u5904\u7406 $S(i,j)$ \u4ee3\u8868\u5982\u679c $c_i=j$\uff0c\u6240\u6709\u539f\u56fe\u4e0a\u51fa\u5ea6\u4e3a $i$ \u7684\u70b9\u4e0b\u4e00\u6b65\u4f1a\u8d70\u5230\u7684\u70b9\u6240\u6784\u6210\u7684\u591a\u91cd\u96c6\u3002\u90a3\u4e48\u70b9\u96c6 $S$ \u5e94\u8be5\u6ee1\u8db3 $S=\\sum S(i,c_i)=\\{n \\cdot 1\\}$ . \u8003\u8651\u5feb\u901f\u5224\u65ad\u96c6\u5408\u4e4b\u95f4\u7684\u76f8\u7b49\u4ee5\u53ca\u5feb\u901f\u5904\u7406\u96c6\u5408\u7684\u76f8\u52a0\uff0c\u53ef\u4ee5\u60f3\u5230\u5bf9\u96c6\u5408\u8fdb\u884c\u54c8\u5e0c\u3002\u59ff\u52bf\u53ef\u4ee5\u53c2\u8003[\u65e0\u8bba\u600e\u6837\u795e\u6811\u5927\u4eba\u90fd\u4f1a\u5220\u5e93\u8dd1\u8def](https://www.luogu.com.cn/problem/P5270)\u8fd9\u4e00\u9053\u9898\u3002\u5177\u4f53\u8bf4\u6765\uff0c\u6211\u4eec\u6307\u5b9a\u4e00\u4e2a\u8d28\u6570 $base$ \u4f5c\u4e3a\u57fa\u6570\u3002\u4e00\u4e2a\u70b9 $i$ \u7684\u8d21\u732e\u662f $base^i$. \u5bb9\u6613\u53d1\u73b0\u8fd9\u6837\u7684\u8bdd\u76f4\u63a5\u628a\u54c8\u5e0c\u503c\u76f8\u52a0\u5c31\u5b9e\u73b0\u4e86\u96c6\u5408\u7684\u76f8\u52a0\u3002BTW\uff0c\u8fd9\u91cc\u6a21\u6570\u91c7\u7528\u81ea\u7136\u6ea2\u51fa\uff0c\u4e3a\u4e86\u51cf\u5c11\u88ab\u5361\u7684\u51e0\u7387\uff0c\u6211\u4eec\u505a\u53cc\u6a21\u6570\u54c8\u5e0c\uff0c$base_1=13331,base_2=998244353$ \u51cf\u5c11 WA \u51e0\u7387\u3002\uff08\u7adf\u7136\u8dd1\u7684\u98de\u5feb\uff09\u3002\n\n```C++\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(ll i=(a);i<=(b);i++)\n#define per(i,a,b) for(ll i=(a);i>=(b);i--)\n#define op(x) ((x&1)?x+1:x-1)\n#define odd(x) (x&1)\n#define even(x) (!odd(x))\n#define lc(x) (x<<1)\n#define rc(x) (lc(x)|1)\n#define lowbit(x) (x&-x)\n#define Max(a,b) (a>b?a:b)\n#define Min(a,b) (a<b?a:b)\n#define next Cry_For_theMoon\n#define il inline\n#define pb(x) push_back(x)\n#define is(x) insert(x)\n#define sit set<int>::iterator\n#define mapit map<int,int>::iterator\n#define pi pair<int,int>\n#define ppi pair<int,pi>\n#define pp pair<pi,pi>\n#define fr first\n#define se second\n#define vit vector<int>::iterator\n#define mp(x,y) make_pair(x,y)\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef unsigned int uint;\ntypedef double db;\nusing namespace std;\nconst int MAXN=2e5+10;\nconst ull base1=13331,base2=998244353; \nvector<pi>edge[MAXN];\nint n,m,k,ans;\null power1[MAXN],power2[MAXN];\null hash1[10][10],hash2[10][10];\nll val1,val2,tgt1,tgt2;\nvoid dfs(int r){\n\tif(r==k+1){\n\t\tif(val1==tgt1 && val2==tgt2)ans++;\n\t\treturn;\n\t}\n\trep(i,1,r){\n\t\t//\u679a\u4e3ec[r]\n\t\tval1+=hash1[r][i]; \n\t\tval2+=hash2[r][i];\n\t\tdfs(r+1);\n\t\tval1-=hash1[r][i];\n\t\tval2-=hash2[r][i];\n\t}\n}\nint main(){\n\tscanf(\"%d%d%d\",&n,&m,&k);\n\trep(i,1,m){\n\t\tint u,v,w;scanf(\"%d%d%d\",&u,&v,&w);edge[u].pb(mp(w,v));\n\t}\n\trep(i,1,n){sort(edge[i].begin(),edge[i].end());}\n\tpower1[0]=power2[0]=1;rep(i,1,n)power1[i]=power1[i-1]*base1,power2[i]=power2[i-1]*base2;\n\trep(i,1,n)tgt1+=power1[i],tgt2+=power2[i];\n//\tprintf(\"%llu %llu\\n\",tgt1,tgt2);\n\trep(i,1,k){\n\t\trep(j,1,i){\n\t\t\t//\u5f53c[i]\u4e3aj\u65f6\u4ea7\u751f\u7684\u70b9\u96c6\n\t\t\t//printf(\"c[%d]:%d\\n\",i,j);\n\t\t\trep(x,1,n){\n\t\t\t\tif(edge[x].size()!=i)continue;\n\t\t\t\thash1[i][j]+=power1[edge[x][j-1].se];\n\t\t\t\thash2[i][j]+=power2[edge[x][j-1].se];\n\t\t\t//\tprintf(\"%d->%d\\n\",x,edge[x][j-1].se);\n\t\t\t} \n\t\t}\n\t}\n\tdfs(1);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n\n```\n\n\n\n",
        "postTime": 1624618510,
        "uid": 340632,
        "name": "Cry_For_theMoon",
        "ccfLevel": 8,
        "title": "\u3010CF1394B\u3011Boboniu Walks on Graph"
    },
    {
        "content": "\u8981\u8ba9\u6bcf\u4e2a\u70b9\u90fd\u80fd\u8d70\u56de\u81ea\u5df1\uff0c\u5c31\u7b49\u4ef7\u4e8e\u6bcf\u4e2a\u70b9\u90fd\u5728\u73af\u4e0a\uff0c\u4e5f\u7b49\u4ef7\u4e8e\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u6070\u597d\u4e3a $1$\u3002\n\n\u5f88\u660e\u663e\u7b54\u6848\u6700\u591a\u662f $9!=362880$\uff0c\u7136\u540e\u5f88\u81ea\u7136\u7684\u60f3\u5230\u66b4\u529b\u68c0\u67e5\uff0c\u5f88\u660e\u663e\u56e0\u4e3a\u70b9\u592a\u591a\u8fc7\u4e0d\u4e86\u3002\n\n\u6211\u4eec\u6362\u4e00\u79cd\u601d\u8def\uff0c\u4ee4\u70b9\u5bf9 $(x,y)$ \u4ee3\u8868 $c_x=y$ \u8fd9\u4e2a\u72b6\u6001\uff0c\u90a3\u4e48\u72b6\u6001\u6570\u5c31\u662f $1+2+\\cdots+9=54$ \u4e2a\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u5148\u5904\u7406\u51fa\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\uff0c\u518d\u628a\u4e00\u4e2a\u70b9\u7684\u51fa\u8fb9\u6392\u4e2a\u5e8f\u3002\n\n\u7136\u540e\u68c0\u67e5\u6bcf\u4e2a\u72b6\u6001\uff0c\u628a\u6240\u6709\u51fa\u5ea6\u4e3a $x$ \u7684\u70b9\u8fde\u51fa\u7684\u7b2c $y$ \u6761\u8fb9\u8fde\u5411\u7684\u70b9\u62ff\u51fa\u6765\uff0c\u770b\u4e00\u770b\u6709\u6ca1\u6709\u91cd\u590d\u7684\u3002\n\n\u5224\u65ad $(x_1,y_1)$ \u548c $(x_2,y_2)$ \u662f\u5426\u51b2\u7a81\uff0c\u76f4\u63a5\u679a\u4e3e\u590d\u6742\u5ea6\u662f $O(k^2n)$ \u7684\uff0c\u83bd\u4e0d\u8fc7\u53bb\u3002\n\n\u6362\u4e2a\u601d\u8def\uff0c\u6211\u4eec\u628a\u6bcf\u4e2a\u70b9\u7684\u5165\u8fb9\u62ff\u51fa\u6765\uff0c\u8bb0\u5f55\u8fb9\u7684\u8d77\u70b9\u7684\u5ea6\u6570\u548c\u8fd9\u662f\u7b2c\u51e0\u6761\u8fb9\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u6784\u6210\u4e86\u4e00\u4e2a\u72b6\u6001 $(x,y)$\u3002\n\n\u628a\u6bcf\u4e2a\u70b9\u5b58\u597d\u7684\u72b6\u6001\u4e24\u4e24\u4e4b\u95f4\u6807\u8bb0\u65e0\u6cd5\u5171\u5b58\uff0c\u6700\u540e\u76f4\u63a5\u5927\u529b\u679a\u4e3e $9!$ \u79cd\u60c5\u51b5\u3002\n\n\u56e0\u4e3a\u4e00\u4e2a\u70b9\u7684\u5165\u8fb9\u53ef\u80fd\u6709\u5f88\u591a\uff0c\u6ce8\u610f\u8981\u628a\u72b6\u6001\u53bb\u4e2a\u91cd\u3002\n\n\u603b\u7684\u590d\u6742\u5ea6 $O(k^2\\times k!+n)$\u3002",
        "postTime": 1673443158,
        "uid": 117771,
        "name": "intel_core",
        "ccfLevel": 7,
        "title": "CF1394B \u9898\u89e3"
    },
    {
        "content": "\u89c2\u5bdf\u6027\u8d28\u53ef\u4ee5\u53d1\u73b0 , \u4efb\u4f55\u4e00\u4e2atuples\u4e0b\u6bcf\u4e2a\u70b9\u6709\u81f3\u591a\u4e00\u6761\u51fa\u8fb9\u3002\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u662f\u57fa\u73af\u5185\u5411\u68ee\u6797\u6216\u8005\u4e00\u5806\u73af(\u6216\u8005\u4e00\u4e2a)\u3002  \n\n\u6ee1\u8db3\u6761\u4ef6\u7684\u663e\u7136\u662f\u73af\u7684\u60c5\u51b5\u3002  \n\n\u4e00\u5806\u73af\u7684\u7279\u6b8a\u6027\u8d28\u5728\u4e8e , \u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\u5747\u4e3a $1$ \u3002\n\n\u8003\u8651\u5c06\u5165\u70b9\u6309\u7167\u8fb9\u7684\u4f4d\u6b21\u7edf\u8ba1\u6210\u96c6\u5408\u3002  \n\n\u5982\u679c\u679a\u4e3etuple , \u7136\u540e\u5339\u914d\u5165\u70b9\u96c6\u5408\u4e0e $\\{1, 2, \\cdots, n\\}$ \u662f\u5426\u76f8\u540c , \u663e\u7136\u662f\u4f1aT\u7684\u3002  \n\n\u636e\u8bf4\u4f7f\u7528bitset\u4f18\u5316\u5339\u914d\u96c6\u5408\u7684\u8fc7\u7a0b , \u5927\u529b\u5361\u5e38\u662f\u53ef\u4ee5\u8fc7\u7684\u3002  \n\n\u7136\u800c\u6709\u4e00\u79cd\u66f4\u4f18\u79c0\u7684\u65b9\u6cd5\u3002\n\n\u96c6\u5408\u7684\u76f8\u540c\u6027\u53ef\u4ee5\u7528hash\u6765\u5224\u65ad , \u652f\u6301\u96c6\u5408\u5e76 , \u8fd9\u6837\u5c31\u6bd4\u8f83\u96c6\u5408\u53ef\u4ee5\u505a\u5230 $\\mathcal{O(1)}$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002  \n\n\u6ce8\u610f\u5230\u96c6\u5408\u7684\u76f8\u540c\u6027\u53d6\u51b3\u4e8e\u96c6\u5408\u7684\u5143\u7d20\u503c\u7684\u5927\u5c0f\u800c\u975e\u987a\u5e8f , \u6240\u4ee5\u6839\u636e\u96c6\u5408\u5143\u7d20\u5927\u5c0f\u8bbe\u8ba1hash\u51fd\u6570\u3002  \n$$\nf(S) = \\sum_{a_i \\in S} base^{a_i}\n$$\nbase\u53ef\u4ee5\u53d6\u4e00\u4e9b\u5c0f\u8d28\u6570\u3002  \n\n\u5728\u6a21\u610f\u4e49\u4e0b\u5224\u65adhash\u51fd\u6570\u503c\u5373\u53ef\u8fd1\u4f3c\u8ba4\u4e3a\u96c6\u5408\u7b49\u4ef7\u3002  \n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nstruct edge {\n    int x, w;\n    edge() {}\n    edge(int x, int w): x(x), w(w) {}\n};\ntypedef vector< vector<edge> > Graph;\n\nconst int Mod = 998244353;\n\ninline int Inc(int a, int b) {\n    return (a += b) >= Mod ? a - Mod : a;\n}\ninline int Dec(int a, int b) {\n    return (a -= b) < 0 ? a + Mod : a;\n}\ninline int Mul(int a, int b) {\n    return 1ll * a * b % Mod;\n}\n\nconst int base = 3, maxn = 200010;\n\nint Pow[maxn], hsh[15][15], tp[15], stdd = 0, ans = 0, k;\n\nvoid dfs(int depth) {\n    if(depth == k + 1) {\n        int cur = 0;\n        for(int i = 1; i <= k; ++i) cur = Inc(cur, hsh[i][tp[i]]);\n        if(cur == stdd) ++ans;\n        return ;\n    }\n    for(int i = 1; i <= depth; ++i) {\n        tp[depth] = i;\n        dfs(depth + 1);\n    }\n}\n\nGraph G;\n\nint main() {\n    int n, m, u, v, w;\n    cin >> n >> m >> k;\n    G.resize(n + 1);\n    for(int i = 1; i <= m; ++i) {\n        cin >> u >> v >> w;\n        G[u].push_back(edge(v, w));\n    }\n    Pow[0] = 1; for(int i = 1; i <= n; ++i) Pow[i] = Mul(Pow[i-1], base);\n    for(int i = 1; i <= n; ++i) {\n        sort(G[i].begin(), G[i].end(), [&](edge& a, edge&b){ return a.w < b.w; });\n        int s = G[i].size();\n        for(int j = 0; j < s; ++j)\n            hsh[s][j + 1] = Inc(hsh[s][j + 1], Pow[G[i][j].x]);\n    }\n    for(int i = 1; i <= n; ++i) stdd = Inc(stdd, Pow[i]);\n    dfs(1);\n    cout << ans << endl;\n    return 0;\n}\n```",
        "postTime": 1597470066,
        "uid": 88735,
        "name": "\u5bd2\u9e3d\u513f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1394B \u3010Boboniu Walks on Graph\u3011"
    }
]
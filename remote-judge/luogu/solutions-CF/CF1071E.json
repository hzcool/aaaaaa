[
    {
        "content": "\u5bf9\u4e8e\u8fd9\u9898\uff0c\u6211\u65e0\u529b\u5410\u69fd\u3002\n\n\u867d\u7136\u5f0f\u5b50\u8fd8\u662f\u4e0d\u96be\u60f3\uff0c\u505a\u6cd5\u4e5f\u968f\u4fbf\u53e3\u80e1\uff0c\u4f46\u662f\u4e00\u4e9b\u9b3c\u755c\u8fb9\u754c\u60c5\u51b5\u5c31\u662f\u5224\u4e0d\u5bf9\u3002\n\n\u9996\u5148\u663e\u7136\u4e8c\u5206\u7b54\u6848\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u96e8\u6ef4\uff0c\u5b83\u51fa\u73b0\u7684\u65f6\u523b\u6211\u4eec\u7684\u7ef3\u5b50\u5fc5\u987b\u843d\u5728\u5b83\u4e0a\u9762\u3002\u628a\u7ef3\u5b50\u7684\u4e0a\u4e0b\u7aef\u70b9\u7528\u4e8c\u5143\u7ec4$(a,b)$\u8868\u793a\uff0c\u56e0\u4e3a\u4e09\u4e2a\u70b9$(a,0)(x_i,y_i)(b,h)$\u5171\u7ebf\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\n$$(b-a,h)\u00d7(x_i-a,y_i)=0$$$$(h-y_i)a+y_ib-x_ih=0$$\n\u8fd9\u8bf4\u660e\u4e86$a,b$\u7684\u5173\u7cfb\uff0c\u5fc5\u987b\u843d\u5728\u4e00\u6761\u76f4\u7ebf\u4e0a\uff01\u5b83\u5728$(0,0)(0,w)(w,w)(w,0)$\u77e9\u5f62\u8303\u56f4\u5185\u7684\u90e8\u5206\u5c31\u662f\u53ef\u884c\u57df\u3002\n\n\u73b0\u5728\uff0c\u6211\u4eec\u521d\u59cb\u7684\u53ef\u884c\u57df\u662f\u4e00\u4e2a\u70b9$(e1,e2)$\uff0c\u5230\u4e0b\u4e00\u4e2a\u65f6\u523b\u4e4b\u524d\uff0c\u53ef\u884c\u57df\u4f1a\u5411\u56db\u5468\u6269\u6563$v*\\Delta t$\u4e2a\u5355\u4f4d\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a\u6b63\u65b9\u5f62\u3002\u8fd9\u4e2a\u6b63\u65b9\u5f62\u4e0e\u4e0b\u4e00\u4e2a\u53ef\u884c\u57df\u7ebf\u6bb5\u7684\u4ea4\uff0c\u5c31\u662f\u5f53\u524d\u771f\u6b63\u7684\u53ef\u884c\u57df\u3002\u90a3\u5047\u5982\u5f53\u524d\u53ef\u884c\u57df\u662f\u4e00\u4e2a\u7ebf\u6bb5\uff0c\u5b83\u6269\u6563\u662f\u4ec0\u4e48\u6837\u5b50\u5462\uff1f\u662f\u4e00\u4e2a\u516d\u8fb9\u5f62\uff0c\u7b49\u4e8e\u7ebf\u6bb5\u548c\u6b63\u65b9\u5f62\u7684\u95f5\u53ef\u592b\u65af\u57fa\u548c\u3002\n\n\u4e00\u4e2a\u7ebf\u6bb5\u548c\u4e00\u4e2a\u51f8\u5305\u7684\u4ea4\u600e\u4e48\u6c42\u5462\uff1f\u6211\u7684\u505a\u6cd5\u6bd4\u8f83\u849f\u84bb\uff0c\u628a\u7ebf\u6bb5\u548c\u51f8\u5305\u7684\u4ea4\u70b9\u6c42\u51fa\u6765\uff0c\u6309\u4ea4\u70b9\u4e2a\u6570\u3001\u7aef\u70b9\u4e0e\u51f8\u5305\u7684\u4f4d\u7f6e\u5173\u7cfb\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\u3002\n\n\u6211\u4eec\u4e0d\u65ad\u5730\u505a\u4e0b\u53bb\uff0c\u4e2d\u9014\u5982\u679c\u51fa\u73b0\u53ef\u884c\u57df\u6ca1\u6709\u4ea4\u4e86\u5c31\u8bf4\u660e\u4e0d\u5408\u6cd5\u3002\n\n\u63a5\u4e0b\u6765\u662f\u5b9e\u73b0\u7ec6\u8282\u3002\n\n\u9996\u5148\uff0c\u5bf9\u4e8e$t$\u76f8\u540c\u7684\u96e8\u6ef4\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u5b83\u4eec\u7684\u53ef\u884c\u57df\u5408\u5e76\uff0c\u4ee5\u514d\u63a5\u4e0b\u6765\u505a\u95f5\u53ef\u592b\u65af\u57fa\u548c\u7684\u65f6\u5019\u51f8\u5305\u9000\u5316\u6210\u70b9\u6216\u7ebf\u6bb5\u3002\n\n\u5934\u75bc\u7684\u5c31\u662f\u8fd9\u91cc\u4e86\u3002\u5408\u5e76\u7684\u65f6\u5019\uff0c\u8981\u5206\u6210\u7ebf\u6bb5\u548c\u7ebf\u6bb5\u7684\u4ea4\uff0c\u7ebf\u6bb5\u548c\u70b9\u7684\u4ea4\uff0c\u70b9\u548c\u70b9\u7684\u4ea4\u8ba8\u8bba\u4e2a\u534a\u5929\u3002\u56e0\u4e3a\u7ebf\u6bb5\u548c\u7ebf\u6bb5\u53ef\u4ee5\u76f4\u63a5\u5957`SegCross`\u6c42\u4ea4\u70b9\uff0c\u4f46\u662f\u7ebf\u6bb5\u548c\u70b9\u4e0d\u80fd\u5957\uff0c\u4f1a\u9664$0$\u3002\u6ce8\u610f\u7ebf\u6bb5\u5e73\u884c/\u91cd\u5408\u8fd8\u8981\u5355\u72ec\u62ff\u51fa\u6765\u5224\uff0c\u4e0d\u8fc7\u663e\u7136\u5982\u679c\u91cd\u5408\u7684\u8bdd$x,y$\u90fd\u662f\u76f8\u7b49\u7684\uff0c\u4e0d\u7136\u5c31\u5e73\u884c\u4e5f\u5c31\u662f\u6ca1\u6709\u4ea4\u96c6\u4e86\uff0c\u76f4\u63a5`cout<<\"-1\"`\u3002\n\n\u518d\u5c31\u662f\u7279\u5224\u7684\u65f6\u5019\u6709\u4e9b\u5730\u65b9\u975e\u5f97\u7528EPS\uff0c\u4e0d\u7136\u8fc7\u4e0d\u4e86\u3002\u56e0\u4e3a\u503c\u57df\u4e3a\u6574\u6570\u800c\u4e14\u8303\u56f4\u53ea\u6709$10^3$\uff0c\u6240\u4ee5EPS\u8bbe\u5927\u70b9\u6ca1\u5173\u7cfb\uff0c\u5c0f\u4e8e$\\frac{1}{\\text{\u503c\u57df}^2}$\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u60e8\u75db\u7684\u6559\u8bad\uff1a\u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u8bd5\u56fe\u5c06\u6b64\u9898\u4f5c\u4e3a\u8ba1\u7b97\u51e0\u4f55\u677f\u5b50\u7684\u7ec3\u4e60\u9898\uff0c\u56e0\u4e3a\u5149\u662f\u8ba8\u8bba\u5c31\u4e0d\u77e5\u9053\u6bd4\u6572\u677f\u5b50\u9ebb\u70e6\u5230\u54ea\u91cc\u53bb\u4e86\u3002\u6709\u4e9b\u4e11\u964b\u7684\u677f\u5b50\u770b\u4e0d\u61c2\u7684\u8bdd\u5c31\u53bb\u8e29[\u849f\u84bb\u7684\u603b\u7ed3](https://www.cnblogs.com/flashhu/p/10258638.html)\u5427\u3002\n```cpp\n#include<bits/stdc++.h>\n#define R register int\n#define I inline\n#define G if(++ip==ie)if(fread(ip=buf,1,SZ,stdin))\nusing namespace std;\ntypedef double DB;\nconst int SZ=1<<19,N=1e5+9;\nconst DB EPS=1e-8;\nchar buf[SZ],*ie=buf+SZ,*ip=ie-1;\ninline int in(){\n\tG;while(*ip<'-')G;\n\tR x=*ip&15;G;\n\twhile(*ip>'-'){x*=10;x+=*ip&15;G;}\n\treturn x;\n}\ninline bool is0(DB x){return fabs(x)<EPS;}\nstruct Vec{\n\tDB x,y;\n\tI Vec(){x=y=0;}\n\tI Vec(DB a){x=a;y=0;}\n\tI Vec(DB a,DB b){x=a;y=b;}\n\tI friend istream&operator>>(istream&cin,Vec&a){return a.x=in(),a.y=in(),cin;}\n\tI Vec operator-(){return Vec(-x,-y);}\n\tI Vec operator+(Vec a){return Vec(x+a.x,y+a.y);}\n\tI Vec operator-(Vec a){return Vec(x-a.x,y-a.y);}\n\tI Vec operator*(DB a){return Vec(x*a,y*a);}\n\tI Vec operator/(DB a){return Vec(x/a,y/a);}\n\tI friend Vec operator*(DB a,Vec b){b.x*=a,b.y*=a;return b;}\n\tI Vec&operator+=(Vec a){x+=a.x,y+=a.y;return*this;}\n\tI Vec&operator-=(Vec a){x-=a.x,y-=a.y;return*this;}\n\tI DB operator*(Vec a){return x*a.x+y*a.y;}\n\tI DB operator^(Vec a){return x*a.y-y*a.x;}\n\tI bool operator==(Vec a){return is0(x-a.x)&&is0(y-a.y);}\n\tI friend bool operator<(Vec a,Vec b){\n\t\treturn (a^b)>0||(is0(a^b)&&Len(a)<Len(b));\n\t}\n\tI friend DB Len(Vec a){\n\t\treturn sqrt(a.x*a.x+a.y*a.y);\n\t}\n}a[N],b[N],c[9],d[9],e;\nint t[N],st[N];\nI Vec LineCross(Vec a1,Vec a2,Vec b1,Vec b2){\n\ta2-=a1;b2-=b1;\n\treturn b2^a2?a1+(b2^(b1-a1))/(b2^a2)*a2:Vec(NAN,NAN);\n}\nI Vec SegCross(Vec&a1,Vec&a2,Vec&b1,Vec&b2){\n\tVec c=LineCross(a1,a2,b1,b2);\n\treturn (a1-c)*(a2-c)>EPS||(b1-c)*(b2-c)>EPS?Vec(NAN,NAN):c;\n}\nI int Convex(Vec*a,R n){\n\tR k=0,p=0;Vec bs;\n\tfor(R i=1;i<n;++i)\n\t\tif(a[i].y<a[k].y||(a[i].y==a[k].y&&a[i].x<a[k].x))k=i;\n\tswap(a[0],a[k]);bs=a[0];\n\tfor(R i=0;i<n;++i)a[i]-=bs;\n\tsort(a+1,a+n);\n\tfor(R i=1;i<n;st[++p]=i++)\n\t\twhile(p&&((a[i]-a[st[p-1]])^(a[st[p]]-a[st[p-1]]))>-EPS)--p;\n\tfor(R i=0;i<=p;++i)a[i]=a[st[i]]+bs;\n\treturn a[p+1]=bs,p+1;\n}\nI int Minkowski(Vec*a,R n,DB t){\n\tfor(R i=n-1,j=4*n;j;--i){\n\t\ta[--j]=a[i]+Vec(-t,-t);\n\t\ta[--j]=a[i]+Vec( t,-t);\n\t\ta[--j]=a[i]+Vec( t, t);\n\t\ta[--j]=a[i]+Vec(-t, t);\n\t}\n\treturn Convex(a,4*n);\n}\nI bool Inside(Vec*a,R n,Vec v){//\u70b9\u662f\u5426\u5728\u51f8\u5305\u5185\n\tfor(R i=0;i<n;++i)\n\t\tif(((a[i+1]-a[i])^(v-a[i]))<-EPS)return 0;\n\treturn 1;\n}\nI bool Check(R q,DB mid){\n\tR n=1,p;\n\tc[0]=e;\n\tfor(R i=1;i<=q;++i){\n\t\tn=Minkowski(c,n,(t[i]-t[i-1])*mid);\n\t\tfor(R j=p=0;j<n;++j){//\u641e\u51fa\u6240\u6709\u4ea4\u70b9\uff0c\u6ce8\u610f\u53bb\u91cd\n\t\t\td[p]=SegCross(a[i],b[i],c[j],c[j+1]);\n\t\t\tp+=!(isnan(d[p].x)||(p&&d[p-1]==d[p]));\n\t\t}\n\t\tif(p==0){//\u66f4\u65b0\u5f53\u524d\u53ef\u884c\u57df\uff0c\u8ba8\u8bba\u5f00\u59cb\n\t\t\tif(!Inside(c,n,a[i]))return 0;\n\t\t\tc[0]=a[i],c[1]=b[i];\n\t\t}\n\t\telse if(p==1){\n\t\t\tif(Inside(c,n,a[i]))\n\t\t\t\tc[1]=Inside(c,n,b[i])?(d[0]==b[i]?a[i]:b[i]):a[i];\n\t\t\telse c[1]=Inside(c,n,b[i])?b[i]:d[0];\n\t\t\tc[0]=d[0];\n\t\t}\n\t\telse c[0]=d[0],c[1]=d[1];//\u8ba8\u8bba\u7ed3\u675f\n\t\tn=1+!(c[0]==c[1]);\n\t}\n\treturn 1;\n}\nI void Err(bool f){if(f)cout<<\"-1\\n\",exit(0);}\nint main(){\n\tios::sync_with_stdio(0);\n\tR n=in(),q=0,w=in(),h=in(),lx=0,ly=0;\n\tcin>>e;\n\tfor(R i=1;i<=n;++i){\n\t\tR tt=in(),x=in(),y=in();\n\t\tVec u=0,v=0;//\u6c42\u53ef\u884c\u57df\u7ebf\u6bb5\uff0c\u8ba8\u8bba\u5f00\u59cb\n\t\tif((u.x=(DB)x*h/(h-y))>w)u=Vec(w,(DB)(x*h-(h-y)*w)/y);\n\t\tif((v.y=(DB)x*h/y    )>w)v=Vec((DB)(x*h-y*w)/(h-y),w);//\u8ba8\u8bba\u7ed3\u675f\n\t\tif(tt!=t[q])++q,a[q]=u,b[q]=v;//\u5408\u5e76t\u76f8\u540c\u7684\u53ef\u884c\u57df\uff0c\u8ba8\u8bba\u5f00\u59cb\n\t\telse if(a[q]==b[q]){\n\t\t\tif(u==v)Err(!(u==a[q]));//\u70b9\u4ea4\u70b9\n\t\t\telse Err(!is0((u-a[q])^(v-a[q])));//\u70b9\u4ea4\u7ebf\u6bb5\n\t\t}\n\t\telse if(x!=lx||y!=ly){\n\t\t\tif(u==v)Err(!is0((u-a[q])^(u-b[q])));//\u70b9\u4ea4\u7ebf\u6bb5\n\t\t\telse Err(isnan((u=SegCross(a[q],b[q],u,v)).x));//\u7ebf\u6bb5\u4ea4\u7ebf\u6bb5\n\t\t\ta[q]=b[q]=u;\n\t\t}//\u8ba8\u8bba\u7ed3\u675f\n\t\tt[q]=tt;lx=x;ly=y;\n\t}\n\tDB l=0,r=w,mid;\n\twhile((r-l)/max(1.0,l)>1e-4)\n\t\tmid=(l+r)/2,(Check(q,mid)?r:l)=mid;\n\tcout<<fixed<<setprecision(6)<<(l+r)/2<<'\\n';\n\treturn 0;\n}\n```",
        "postTime": 1547736524,
        "uid": 61325,
        "name": "FlashHu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1071E \u3010Rain Protection\u3011"
    }
]
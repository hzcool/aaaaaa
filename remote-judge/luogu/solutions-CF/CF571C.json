[
    {
        "content": "[\u94fe\u63a5](https://www.luogu.com.cn/problem/CF571C)\n\n\u9898\u76ee\u5c31\u662f\u6c42\u4f7f $c_i$ \u4e3a\u771f\u7684\u65b9\u6848\u3002\n\n\u6211\u4eec\u8003\u8651\u5c06\u542b\u6709 $b_k$ \u7684 $c_i$ \u8fde\u4e00\u6761\u8fb9\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e00\u6761\u8fb9\u80fd\u4f7f\u5bf9\u5e94\u7684\u4e24\u4e2a\u70b9\u4e4b\u4e00\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u5bf9\u4e8e\u53ea\u51fa\u73b0\u4e00\u6b21\u7684 $b_k$\uff0c\u5b83\u5bf9\u5e94\u7684 $c_i$ \u663e\u7136\u80fd\u6ee1\u8db3\u6761\u4ef6\u3002\u6211\u4eec\u5148\u5c06\u8fd9\u4e9b\u70b9\u548c\u8fb9\u5ffd\u7565\u3002\u53ef\u4ee5\u53d1\u73b0\u5982\u679c\u5269\u4e0b\u7684\u67d0\u4e2a\u8054\u901a\u5757\u662f\u6811\uff0c\u90a3\u4e48\u4e00\u5b9a\u65e0\u89e3\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u7c7b\u6811\u7684\u90e8\u5206\u5ffd\u7565\uff0c\u5269\u4e0b\u56fe\u7684\u90fd\u662f\u73af\uff0c\u63a5\u4e0b\u6765\u53ea\u7528\u8ba9\u6bcf\u6761\u8fb9\u6ee1\u8db3\u4e00\u4e2a\u5bf9\u5e94\u70b9\u5c31\u597d\u4e86\u3002\n\n```cpp\n#include<stdio.h>\n#include<algorithm>\n#include<queue>\nusing namespace std;\nint rd(){\n\tint k(0),f(1);char c(getchar());\n\twhile(c>'9'||c<'0'){if(c=='-')f=0;c=getchar();}\n\twhile(c>='0'&&c<='9')k=k*10+c-48,c=getchar();\n\treturn f?k:-k;\n}\nconst int N=200001;\nstruct E{int v,w,nxt;}e[N<<1];\nint n,m,_,x,en=1,head[N],ok[N],ans[N],I[N];vector<int>V[N];queue<int>q;\n/*\nans: b_i \u7684\u53d6\u503c\nok:  \u7b2c i \u4e2a\u9650\u5236\u662f\u5426\u5df2\u7ecf\u6ee1\u8db3\nI:   \u70b9\u7684\u5ea6\u6570\n*/\nvoid add(int u,int v,int w){e[++en]={v,w,head[u]},head[u]=en;}\nvoid dfs(int u){\n\tfor(int i=head[u];i;i=e[i].nxt){\n\t\tint v=e[i].v,w=e[i].w;\n\t\tif(ans[w]<0&&!ok[v])ans[w]=(i&1)^1,ok[v]=1,dfs(v);\n\t}\n}\nint search(int u){//\u627e\u4e00\u4e2a\u6ca1\u6ee1\u8db3\u8981\u6c42\u7684\u8054\u901a\u70b9\n\tfor(int i=head[u];i;i=e[i].nxt){\n\t\tint v=e[i].v,w=e[i].w;\n\t\tif(ans[w]<0&&!ok[v]){ans[w]=i&1,ok[u]=1;return v;}\n\t}\n\treturn-1;\n}\nint main(){\n\tfreopen(\"data.in\",\"r\",stdin);\n\tfreopen(\"data.out\",\"w\",stdout);\n\tn=rd(),m=rd();\n\tfor(int i=1;i<=m;++i)ans[i]=-1;\n\tfor(int i=1;i<=n;++i){\n\t\t_=rd();\n\t\twhile(_--){\n\t\t\tx=rd();\n\t\t\tif(x>0)V[x].push_back(i);\n\t\t\telse V[-x].push_back(-i);\n\t\t}\n\t}\n\tfor(int i=1;i<=m;++i){\n\t\tif(V[i].empty())continue;\n\t\tsort(V[i].begin(),V[i].end());\n\t\tif(V[i].front()>0){//\u90fd\u662f b_i\n\t\t\tans[i]=1;\n\t\t\tfor(auto j:V[i])ok[j]=1;\n\t\t}\n\t\telse if(V[i].back()<0){//\u90fd\u662f !b_i\n\t\t\tans[i]=0;\n\t\t\tfor(auto j:V[i])ok[-j]=1;\n\t\t}\n\t\telse{//\u4e00\u4e2a b_i \u4e00\u4e2a !b_i\n\t\t\tint u=-V[i][0],v=V[i][1];\n\t\t\tadd(u,v,i),add(v,u,i),++I[u],++I[v];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i)if(ok[i])dfs(i);\n\tfor(int i=1;i<=n;++i)if(!ok[i]&&I[i]==1)q.push(i);\n\twhile(!q.empty()){\n\t\tint u=q.front(),v=search(u);q.pop();\n\t\tif(v<0){puts(\"NO\");return 0;}\n\t\tif(--I[v]==1)q.push(v);\n\t}\n\tfor(int u=1;u<=n;++u)if(!ok[u]){//\u627e\u73af\n\t\tif(search(u)<0){puts(\"NO\");return 0;}\n\t\tdfs(u);\n\t}\n\tputs(\"YES\");\n\tfor(int i=1;i<=m;++i)putchar(ans[i]==0?'0':'1');\n\treturn 0;\n}\n```\n",
        "postTime": 1603690634,
        "uid": 68467,
        "name": "xcxcli",
        "ccfLevel": 0,
        "title": "CF571C CNF 2"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u89e3\u4e3b\u8981\u662f\u5bf9\u7b2c\u4e00\u7bc7\u7684\u8865\u5145\uff0c\u601d\u8def\u8bf7\u770b\u697c\u4e0a\u3002  \n\u4e3b\u8981\u5c31\u662f\u89c4\u5212\u4e00\u4e0b\u6bcf\u4e2a\u70b9\u5bf9\u5e94\u54ea\u4e00\u6761\u8fb9\uff0c\u6211\u4e3b\u8981\u8bf4\u4e00\u4e0b\u4ee3\u7801\u7ec6\u8282~~\u6bd5\u7adf\u6211\u8c03\u4e86\u4e00\u5e74~~\n\n$1.$ \u5f53\u6709\u4e00\u4e2a $b_k$ \u53ea\u51fa\u73b0 $1$ \u6b21\u6216\u8005\u51fa\u73b0\u7684\u4e24\u6b21\u540c\u53f7\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a $flag$ \u6807\u8bb0\u4e00\u4e0b\u3002\u4e4b\u540e\u7528\u62d3\u6251\u6392\u5e8f\u7684\u5f62\u5f0f\u628a\u6240\u6709\u53ef\u4ee5\u76f4\u63a5\u6ee1\u8db3\u7684\u90fd\u627e\u51fa\u6765\uff0c\u7136\u540e\u5269\u4e0b\u7684\u518d\u505a\u5e38\u89c4\u5904\u7406\u3002\n\n$2.$ \u627e\u73af\u7684\u65f6\u5019\uff0c\u9996\u5148\u6211\u4eec\u4ee5\u4efb\u610f\u70b9\u4e3a\u8d77\u70b9\uff0c$\\text{dfs}$ \u4e00\u904d\uff0c\u627e\u5230\u4efb\u610f\u73af\u4e0a\u7684\u70b9\uff0c\u4e4b\u540e\u4ee5\u90a3\u4e2a\u70b9\u4e3a\u8d77\u70b9\u518d $\\text{dfs}$ \u4e00\u904d\u627e\u65b9\u6848\u3002\n\n$3.$ \u7b2c\u4e8c\u904d $dfs$ \u7684\u65f6\u5019\uff0c\u6bcf\u4e2a\u70b9\u8981\u627e\u4e00\u6761\u51fa\u8fb9\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u51fa\u4e00\u68f5\u641c\u7d22\u6811\uff0c\u7136\u540e\u6bcf\u4e2a\u70b9\u548c\u5b83\u8fde\u5411\u7236\u4eb2\u7684\u8fb9\u5339\u914d\uff0c\u7136\u540e\u6839\u5c31\u548c\u73af\u4e0a\u7684\u53e6\u4e00\u6761\u8fb9\u5339\u914d\u3002\u6240\u4ee5\u6211\u4eec\u8981\u4fdd\u8bc1\u7ed9\u6839\u8282\u70b9\u7559\u4e00\u6761\u8fb9\uff0c\u4f46\u662f\u8fd8\u4e0d\u80fd\u76f4\u63a5\u7559 $\\text{head}$\uff0c\u56e0\u4e3a\u53ef\u80fd\u8fd9\u6761\u8fb9\u6b63\u597d\u4e0d\u5728\u73af\u4e0a\u3002\u6240\u4ee5\u6211\u4eec\u5728\u627e\u73af\u65f6\u8bb0\u5f55\u4e00\u6761\u73af\u4e0a\u7684\u8fb9\uff0c\u7136\u540e\u641c\u7b54\u6848\u7684\u65f6\u5019\u5148\u628a\u8fd9\u6761\u8fb9\u548c\u6839\u5339\u914d\uff0c\u4e4b\u540e\u518d\u505a\u4e4b\u540e\u7684\u641c\u7d22\u3002\n\n$4.$ \u8fb9\u7684\u6570\u91cf\u6bd4\u8f83\u5927\uff0c\u8981\u5f00\u4e24\u500d\uff08\u6211\u5f00\u4e86 $10^6$ \u80fd\u8fc7\uff09\u3002\n\n$5.$ \u904d\u5386\u65f6\u6700\u597d\u7edf\u4e00\u4e00\u4e0b\uff0c\u4e00\u4e2a\u8fb9\u7684\u6743\u503c\u548c\u8fd9\u6761\u8fb9\u7684\u54ea\u4e2a\u7aef\u70b9\u6709\u5173\uff0c\u8981\u4e0d\u7136\u4f1a\u8c03\u6b7b\u3002\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int NR=1e6+10;\nvoid Min(int& x,int y){x=min(x,y);}\nvoid Max(int& x,int y){x=max(x,y);}\nint read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+(ch^48);ch=getchar();}\n\treturn x*f;\n}\nint n,m;\nint ki[NR];\nvector<int>v[NR];\nint num[NR][2],op[NR][2];\nint to[NR<<1],val[NR<<1],nxt[NR<<1],head[NR],tot=1;\nvoid add(int x,int y,int z){\n\tto[tot]=y,val[tot]=z,nxt[tot]=head[x],head[x]=tot++;\n}\nbool FFFF[NR];\nbool flag[NR];\nint ans[NR],Ans[NR];\nint Num[NR];\nint vis[NR];\nbool F[NR],ff[NR];\nvoid dfs1(int x,int col,int la){\n\tif(vis[x]==col){if(!Num[col])Num[col]=x,FFFF[la]=FFFF[la*2-(la^1)]=1;return;}\n\tvis[x]=col;\n\tfor(int i=head[x];i;i=nxt[i]){\n\t\tif(ff[i])continue;\n\t\tff[i]=ff[i*2-(i^1)]=1;\n\t\tdfs1(to[i],col,i);\n\t}\n}\nvoid dfs2(int x,int col)\n{\n\tvis[x]=col;int pos=0;\n\tfor(int i=head[x];i;i=nxt[i])\n\t\tif(x==col&&!ans[x]&&FFFF[i]){ans[x]=val[i]*-1;pos=i;break;}\n\tfor(int i=head[x];i;i=nxt[i]){\n\t\tif(ff[i]||i==pos)continue;ff[i]=ff[i*2-(i^1)]=1;\n\t\tif(!vis[to[i]])ans[to[i]]=val[i],dfs2(to[i],col);\n\t}\n}\nint main()\n{\n\tn=read(),m=read();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tki[i]=read();\n\t\tfor(int j=1,x,X;j<=ki[i];j++){\n\t\t\tx=read(),X=abs(x);v[i].push_back(x);\n\t\t\tif(num[X][0])num[X][1]=i,op[X][1]=(x==X);\n\t\t\telse num[X][0]=i,op[X][0]=(x==X);\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tif(!num[i][0])continue;\n\t\tif(!num[i][1])flag[num[i][0]]=1,Ans[i]=op[i][0];\n\t\tif(op[i][0]==op[i][1])flag[num[i][0]]=flag[num[i][1]]=1,Ans[i]=op[i][0];\n\t}\n\tqueue<int>q;\n\tfor(int i=1;i<=n;i++)if(flag[i])q.push(i);\n\twhile(!q.empty())\n\t{\n\t\tint x=q.front();q.pop();\n\t\tfor(int i=0;i<ki[x];i++){\n\t\t\tint t=abs(v[x][i]);\n\t\t\tif(num[t][0]==x&&!flag[num[t][1]]&&num[t][1])flag[num[t][1]]=1,q.push(num[t][1]),Ans[t]=op[t][1];\n\t\t\telse if(num[t][1]==x&&!flag[num[t][0]]&&num[t][0])flag[num[t][0]]=1,q.push(num[t][0]),Ans[t]=op[t][0];\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tif(!num[i][0])continue;\n\t\tif(flag[num[i][0]]||flag[num[i][1]])continue;\n\t\tadd(num[i][0],num[i][1],i*(op[i][1]?1:-1)),add(num[i][1],num[i][0],i*(op[i][0]?1:-1));\n\t}\n\tfor(int i=1;i<=n;i++)if(!vis[i]&&!flag[i])dfs1(i,i,-1),F[i]=1;\n\tfor(int i=1;i<=n;i++)if(!flag[i]&&F[i]&&!Num[i]){puts(\"NO\");return 0;}\n\tmemset(ff,0,sizeof(ff)),memset(vis,0,sizeof(vis));\n\tfor(int i=1;i<=n;i++)if(!flag[i]&&F[i])dfs2(Num[i],Num[i]);\n\tfor(int i=1;i<=n;i++)if(!flag[i])Ans[abs(ans[i])]=(ans[i]>0);\n\tputs(\"YES\");for(int i=1;i<=m;i++)printf(\"%d\",Ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1625209418,
        "uid": 97136,
        "name": "chenzida",
        "ccfLevel": 0,
        "title": "CF571C CNF 2"
    }
]
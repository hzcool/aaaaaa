[
    {
        "content": "\u6ce8\u610f\u5728\u8fd9\u9898\u4e2d01\u4e32\u90fd\u5f88\u77ed\uff0c\u957f\u5ea6\u4e0d\u8d85\u8fc712\uff0c\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u8f6c\u6362\u4e3a\u6574\u6570\u8868\u793a\uff0c\u7136\u540e\u5f00\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u9884\u5904\u7406\u4e00\u4e0b\u6240\u6709\u53ef\u80fd\u67e5\u8be2\u7684\u4e32\u548c\u6700\u5927Wu\u503c\u5b58\u5728\u91cc\u9762\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\nint arr[i][v];\n```\n\n\u51c6\u786e\u5730\u8bf4\uff0c\u6570\u7ec4\u7b2c\u4e00\u7ef4\u4fdd\u5b58\u53ef\u80fd\u7ed9\u5b9a\u7684\u4e00\u4e2a01\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u7684\u503c $i$\uff0c\u7b2c\u4e8c\u4f4d\u5219\u662f\u5f53Wu\u503c **\u6070\u597d\u7b49\u4e8e** $v$ \u65f6\u7684\u7b54\u6848\uff0c\u968f\u540e\u5728\u7ebf\u5730\u5904\u7406\u6bcf\u4e00\u4e2a\u8be2\u95ee\uff0c\u5c06\u5c0f\u4e8e\u6700\u5927Wu\u503c\u7684\u6240\u6709\u7b54\u6848\u52a0\u8d77\u6765\u5373\u53ef\u3002\n\n```\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nnamespace CF1017D\n{\n\tclass Program\n\t{\n\t\tpublic class Global{\n\t\t\tpublic static int[,] arr;\n\t\t\tpublic static int[] cnt, wuVal;\n\t\t}\n\n\t\tstatic void Main(string[] args)\n\t\t{\n\t\t\tstring inp;string[] div;\n\n\t\t\tint len, totTemp, totQuery, maxWu, x, _count;\n\n\t\t\tinp = Console.ReadLine();div = inp.Split(' ');\n\t\t\tlen = Convert.ToInt32(div[0]);totTemp = Convert.ToInt32(div[1]);totQuery = Convert.ToInt32(div[2]);\n\n\t\t\tGlobal.arr = new int[(1 << 13), 101];\n\t\t\tGlobal.cnt = new int[1 << 13];\n\t\t\tGlobal.wuVal = new int[len];\n\n\t\t\t//read\n\t\t\tinp = Console.ReadLine(); div = inp.Split(' ');\n\t\t\tfor(int i = 0; i < len; i++)\n\t\t\t\tGlobal.wuVal[i] = Convert.ToInt32(div[i]);\n\t\t\tfor(int i = 0; i < totTemp; i++) {\n\t\t\t\tinp = Console.ReadLine();\n\t\t\t\tx = 0;\n\t\t\t\tfor(int j = 0; j < len; j++)\n\t\t\t\t\tif(inp[j] == '1') x |= (1 << j);\n\t\t\t\tGlobal.cnt[x]++;\n\t\t\t}\n\n\t\t\t//\u9884\u5904\u7406\n\t\t\tfor(int i = 0; i < (1 << len); i++) \n\t\t\t\tfor(int j = 0; j < (1 << len); j++)\n\t\t\t\t\tif(Global.cnt[i] > 0) {\n\t\t\t\t\t\tx = 0;  //\u4ee3\u4ef7\n\t\t\t\t\t\tfor(int k = 0; k < len; k++)\n\t\t\t\t\t\t\tif((i & (1 << k)) == (j & (1 << k)))\n\t\t\t\t\t\t\t\tx += Global.wuVal[k];\n\t\t\t\t\t\tif(x <= 100) Global.arr[j, x] += Global.cnt[i];\n\t\t\t\t\t}\n\n\t\t\twhile(totQuery-- > 0) {\n\t\t\t\tinp = Console.ReadLine();div = inp.Split(' ');\n\t\t\t\tmaxWu = Convert.ToInt32(div[1]);\n\n\t\t\t\t_count = x = 0;\n\t\t\t\tfor(int i = 0; i < len; i++)\n\t\t\t\t\tif(inp[i] == '1') x |= (1 << i);\n\n\t\t\t\tfor(int i = 0; i <= maxWu; i++)\n\t\t\t\t\t_count += Global.arr[x, i];\n\t\t\t\tConsole.WriteLine(_count.ToString());\n\t\t\t}\n\n\t\t}\n\t}\n}\n\n```\n\n\u4ee3\u7801\u5c31\u662f\u8fd9\u6837\u4e86\uff0c\u8fd9\u9053\u9898\u65f6\u95f4\u5361\u5f97\u975e\u5e38\u7d27\uff0c\u5bfc\u81f4\u6211\u7528C#\u8c03\u4e86\u534a\u5929\u8fd8\u662f\u8d85\u65f6\u3002\u9010\u884c\u7ffb\u8bd1\u6210 C++ \u4ee3\u7801\u4e4b\u540e\u5c31AC\u4e86.",
        "postTime": 1533915511,
        "uid": 78371,
        "name": "Mickey_snow",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1017D \u3010The Wu\u3011"
    },
    {
        "content": "## \u601d\u8def\n\u4e4d\u770b $n$ \u975e\u5e38\u5c0f\uff0c\u4e8e\u662f\u53ef\u4ee5\u4ece\u4e8c\u8fdb\u5236\u51fa\u53d1\uff0c\u628a\u4e00\u4e2a $01$ \u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5177\u4f53\u7684\u6570\u503c\u3002\n\n\u8fd9\u6837\u505a\u6709\u4ec0\u4e48\u76ee\u7684\uff1f\u4f1a\u53d1\u73b0\uff0c\u8fd9\u4e2a\u6570\u503c\u5927\u5c0f\u4e0d\u4f1a\u8d85\u8fc7 $2^{12}$\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u771f\u6b63\u5b58\u5728\u7684\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32\u6570\u91cf\u53ea\u6709 $2^{12}$ \u4e2a\uff0c\u90a3\u4e48\u9898\u76ee\u7ed9\u6211\u4eec\u7684 $m$ \u4e2a\u5b57\u7b26\u4e32\u5176\u5b9e\u5c31\u6709\u5f88\u591a\u91cd\u590d\uff0c\u5b8c\u5168\u4e0d\u9700\u8981\u679a\u4e3e $m\\times m$\uff0c\u53ea\u9700\u8981 $2^{12}\\times 2^{12}$ \u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5b58\u4e00\u4e2a\u6570\u7ec4 $sum_{i,j}$ \u8868\u793a\u8ddf\u5b57\u7b26\u4e32\u6570\u503c $i$ \u5339\u914d\u4e14\u4ef7\u503c\u7b49\u4e8e $k$ \u7684\u5b57\u7b26\u4e32\u6570\u91cf\u3002\n\n\u4e8e\u662f\u66b4\u529b\u679a\u4e3e\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u82e5\u8fd9\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u4ef7\u503c\u4e0d\u8d85\u8fc7 $100$\uff08\u56e0\u4e3a $k\\leq 100$\uff09\uff0c\u90a3\u5c31\u66f4\u65b0 $sum$ \u6570\u7ec4\u3002\u4f46\u662f\uff0c\u6700\u540e\u6c42\u7684\u7b54\u6848\u662f\u4ef7\u503c\u4e0d\u8d85\u8fc7 $k$ \u7684\u5b57\u7b26\u4e32\u6570\u91cf\uff0c\u4e8e\u662f\u7edf\u8ba1\u4e00\u4e2a\u524d\u7f00\u548c\u5c31\u597d\u4e86\u3002\n\n## \u4ee3\u7801\n\n\u4ee3\u7801\u4e2d\u5b9a\u4e49\u5355\u72ec\u4e00\u4e2a\u5b57\u7b26\u4e32\u4ef7\u503c\u6307\u7684\u662f\u6240\u6709 $1$ \u7684\u7d2f\u8ba1\u3002\n\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 15, M = 1e5 + 5;\nint n, m, q, w[N], cnt[M], vis[M];\nint sum[M][105];\n\nint get(char s[]) {  // \u628a\u5b57\u7b26\u4e32s\u8f6c\u5316\u6210\u4e00\u4e2a\u5177\u4f53\u6570\u503c\n    int res = 0;\n    for (int i = n - 1; i >= 0; i--) {\n        res = res * 2 + s[i] - '0';\n    }\n    return res;\n}\n\nint main() {\n    cin >> n >> m >> q;\n    for (int i = 0; i < n; i++) cin >> w[i];\n    for (int i = 0; i < (1 << n); i++) {\n        for (int j = 0; j < n; j++) {\n            // cnt_i \u8868\u793a\u5355\u72ec\u5b57\u7b26\u4e32i\u7684\u4ef7\u503c\n            if (i >> j & 1) cnt[i] += w[j]; \n        }\n    }\n    while (m--) {\n        char a[N];\n        scanf(\"%s\", a);\n        vis[get(a)]++;  //\n    }\n    for (int i = 0; i < (1 << n); i++) {\n        for (int j = 0; j < (1 << n); j++) {\n            int t = cnt[i ^ j ^ ((1 << n) - 1)];  // \u6c42\u51fa\u5b57\u7b26\u4e32i\u548c\u5b57\u7b26\u4e32j\u7684\u6df7\u5408\u4ef7\u503c\n            if (t <= 100) sum[i][t] += vis[j];  // \u66f4\u65b0\u4e00\u4e0b\n        }\n    }\n    for (int i = 0; i < (1 << n); i++) {\n        for (int j = 0; j <= 100; j++) sum[i][j] += sum[i][j - 1];  // \u524d\u7f00\u548c \n    }\n    while (q--) {\n        char a[N];\n        int k;\n        scanf(\"%s%d\", a, &k);\n        cout << sum[get(a)][k] << endl;\n    }\n}\n//  \u4ee3\u7801\u4e2d\u8fd8\u6709\u8bb8\u591a\u7ec6\u8282\uff0c\u81ea\u5df1\u5199\u7684\u65f6\u5019\u4f1a\u53d1\u73b0\n```",
        "postTime": 1662969807,
        "uid": 411727,
        "name": "stOtue",
        "ccfLevel": 0,
        "title": "CF1017D The Wu"
    },
    {
        "content": "$n \\le 12$\uff0c\u7531\u6b64\u53ef\u5f97\u6211\u4eec\u53ef\u4ee5\u628a`01`\u4e32\u6620\u5c04\u6210 $0 \\sim 2^{12}-1$\uff0c\u65b9\u4fbf\u5b58\u50a8\u3002\n\n$m \\le 5 \\times 10^5$\uff0c\u8bf4\u660e\u6709\u5f88\u591a `01` \u5b57\u7b26\u4e32\u662f\u91cd\u590d\u7684\u3002\n\n\u5148\u8bf4\u660e\u4e00\u4e0b$\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$\u8fd9\u91cc\u7684 $s$ \u548c $t$ \u662f `01` \u4e32\uff0c\u5176\u5b83\u7684 $s$ \u548c $t$ \u90fd\u662f\u6620\u5c04\u503c\u3002\n\n\u5148\u8bbe $sum_{i, j}$ \u4e3a $t$ \u4e3a $i$\uff0c\u4e14 $\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$ \u6070\u597d\u4e3a $j$ \u7684\u6570\u91cf\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u628a\u679a\u4e3e\u6bcf\u4e00\u4e2a $s$ \u548c\u6bcf\u4e00\u4e2a $t$\uff0c\u8bbe $x$ \u4e3a  $\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$\uff0c\u5219\u628a $sum_{t, x} + cnt_s$ \u5176\u4e2d $cnt_s$ \u8868\u793a $s$ \u51fa\u73b0\u7684\u6b21\u6570\u3002\n\n\u4f46\u9898\u76ee\u8981\u6211\u4eec\u6c42 $\\le k$ \u7684\u6570\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u628a $sum$ \u6c42\u4e00\u4e2a\u524d\u7f00\u548c\u3002\u5373 $sum_{i, j} = \\sum\\limits_{k=1}^{j}sum_{i, k}$\u3002\n\n### \u65f6\u95f4\u590d\u6742\u5ea6\n\n\u9884\u5904\u7406 $ans$ \u6570\u7ec4\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\uff0c$s$ \u6709 $2^n$ \u4e2a\u53d6\u503c\uff0c$t$ \u6709 $2^n$ \u4e2a\u53d6\u503c\uff0c\u6c42$\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n)$\uff0c\u6c42\u524d\u7f00\u548c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O((2^n)^2k)$\uff0c\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O((2^n)^2n + 2^nk)$\u3002\n\n\u6bcf\u4e00\u6b21\u8be2\u95ee\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(1)$ \u7684\u3002\n\n### Ac Code\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\n\nconst int N = 4096;\n\nint n, m, q;\nchar s[20];\nint w[20], cnt[N], sum[N][110];\n\ninline int calc(int x, int y) // \u8ba1\u7b97\u6743\u503c\u3002\n{\n    int res = 0;\n    for (int i = 0; i < n; i ++ )\n        if ((x >> i & 1) == (y >> i & 1))\n            res += w[n - i - 1]; // \u8fd9\u91cc\u4e00\u5b9a\u8981\u5199n-i-1\uff0c\u5982\u679c\u4e0d\u61c2\uff0c\u53ef\u4ee5\u770b\u9898\u610f\u3002\n    return res;\n}\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &w[i]);\n    while (m -- )\n    {\n        scanf(\"%s\", s);\n        int cur = 0;\n        for (int i = 0; s[i]; i ++ ) // \u6c42\u6620\u5c04\u540e\u7684\u503c\u3002\n            cur = cur * 2 + s[i] - '0';\n        cnt[cur] ++ ; // \u628a\u51fa\u73b0\u7684\u6b21\u6570 + 1\u3002\n    }\n    for (int i = 0; i < N; i ++ ) // \u9884\u5904\u7406 sum \u6570\u7ec4\u3002\n        for (int j = 0; j < N; j ++ )\n        {\n            int s = calc(i, j);\n            if (s <= 100) sum[i][s] += cnt[j];\n        }\n    for (int i = 0; i < N; i ++ ) // \u6c42\u524d\u7f00\u548c\u3002\n        for (int j = 1; j <= 100; j ++ )\n            sum[i][j] += sum[i][j - 1];\n    \n    while (q -- )\n    {\n        int k;\n        scanf(\"%s%d\", s, &k);\n        int cur = 0;\n        for (int i = 0; s[i]; i ++ )\n            cur = cur * 2 + s[i] - '0';\n        printf(\"%d\\n\", sum[cur][k]); // \u8f93\u51fa\u7b54\u6848\u3002\n    }\n    \n    return 0;\n}\n```\n\n\u4ee5\u4e0a\u4ee3\u7801\u8bf4\u5b9e\u8bdd\u6709\u70b9\u7384\u5b66\uff0c\u5bb9\u6613 `TLE`\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6c42$\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$ \u53ef\u4ee5\u7528\u4f4d\u8fd0\u7b97\u5b9e\u73b0\u3002\n- \u5148\u6c42\u51fa\u54ea\u4e9b\u4f4d\u8981 $+w[i]$\uff0c\u5982\u679c\u8981\u5219\u4e3a $1$\uff0c\u4e0d\u7528\u5219\u4e3a $0$\uff1b\n- \u8fd9\u4e2a\u4e8c\u8fdb\u5236\u53ef\u4ee5\u7528 $s \\oplus t$ \u7136\u540e\u53d6\u53cd\uff0c\u53ef\u4ee5\u662f $s \\oplus t \\oplus 2^{n}-1$\uff1b\n- \u7136\u540e $\\sum\\limits_{i=1}^{n}w_i[s_i=t_i]$ \u5c31\u4e3a\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4e2d\u6240\u6709 $1$ \u6240\u8868\u793a\u6743\u503c\uff0c\u8fd9\u53ef\u4ee5\u7528\u9884\u5904\u7406\u5f97\u5230\u3002\n\n### Ac Code\n```cpp\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\n\nconst int N = 4096;\n\nint n, m, q;\nchar s[20];\nint w[20], cur[N], cnt[N], sum[N][110];\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &w[i]);\n    while (m -- )\n    {\n        scanf(\"%s\", s);\n        int cur = 0;\n        for (int i = 0; s[i]; i ++ ) // \u6c42\u6620\u5c04\u540e\u7684\u503c\u3002\n            cur = cur * 2 + s[i] - '0';\n        cnt[cur] ++ ; // \u628a\u51fa\u73b0\u7684\u6b21\u6570 + 1\u3002\n    }\n    for (int i = 0; i < N; i ++ )\n    {\n        for (int j = 0; j < n; j ++ )\n            if (i >> j & 1)\n                cur[i] += w[n - j - 1];\n    }\n    for (int i = 0; i < N; i ++ ) // \u9884\u5904\u7406 sum \u6570\u7ec4\u3002\n        for (int j = 0; j < N; j ++ )\n        {\n            int s = cur[i ^ j ^ ((1 << n) - 1)];\n            if (s <= 100) sum[i][s] += cnt[j];\n        }\n    for (int i = 0; i < N; i ++ ) // \u6c42\u524d\u7f00\u548c\u3002\n        for (int j = 1; j <= 100; j ++ )\n            sum[i][j] += sum[i][j - 1];\n    \n    while (q -- )\n    {\n        int k;\n        scanf(\"%s%d\", s, &k);\n        int cur = 0;\n        for (int i = 0; s[i]; i ++ )\n            cur = cur * 2 + s[i] - '0';\n        printf(\"%d\\n\", sum[cur][k]); // \u8f93\u51fa\u7b54\u6848\u3002\n    }\n    \n    return 0;\n}\n```",
        "postTime": 1662857694,
        "uid": 353330,
        "name": "hcywoi",
        "ccfLevel": 5,
        "title": "CF1017D"
    },
    {
        "content": "#### CF1017D The Wu\n\n\u6700\u8fd1\u78b0\u5230\u597d\u591a\u524d\u7f00\u548c\u9898\u554a\u2026\u2026\n\n\u56e0\u4e3a$N$\u6700\u5927\u624d$12$\uff0c\u4e5f\u5c31\u662f\u603b\u60c5\u51b5\u6570\u5c31$2^{12}$\u79cd\u60c5\u51b5\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u9884\u5904\u7406\u4e4b\u540e\u76f4\u63a5\u56de\u7b54\u8be2\u95ee\u3002\n\n\u518d\u4e00\u770b$K$\u6700\u5927\u53ea\u6709$100$\uff0c\u90a3\u4e5f\u5c31\u662f\u8bf4\u8fdb\u884c$Wu()$\u8fd0\u7b97\u540e\u7b54\u6848\u5927\u4e8e$100$\u7684\u6839\u672c\u6ca1\u7528\uff0c\u90a3\u5c31\u76f4\u63a5\u5f00\u6876\u5373\u53ef\uff0c$f[i][j]$\u8868\u793a$multiset$\u91cc\u8fb9\u6240\u6709\u6570\u548c$i$\u53d6$Wu$\u4e4b\u540e\u7b49\u4e8e$j$\u7684\u4e2a\u6570\uff0c\u5904\u7406\u540e\u524d\u7f00\u548c\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<set>\n#define N 500005\nusing namespace std;\nint read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+(ch^48);ch=getchar();}\n\treturn x*f;\n}\nint n,m,q,w[N],cnt[N],tot,b[N],c[N],f[5000][105],val[N];\nchar ch[15];\nint main()\n{\n\tn=read();m=read();q=read();\n\tfor(int i=1;i<=n;i++)w[i]=read();\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%s\",(ch+1));\n\t\tint bas=1,x=0;\n\t\tfor(int j=n;j>=1;j--)\n\t\t{\n\t\t\tif(ch[j]=='1')x+=bas;\n\t\t\tbas<<=1;\n\t\t}\n\t\t//cout<<x<<endl;\n\t\tcnt[x]++;\n\t}\n\tfor(int i=0;i<(1<<n);i++)\n\t{\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tif(i&(1<<(j-1)))val[i]+=w[n-j+1];\n\t\t}\n\t}\n\tfor(int i=0;i<(1<<n);i++)if(cnt[i]){b[++tot]=i;c[tot]=cnt[i];}\n\tfor(int i=0;i<(1<<n);i++)\n\t{\n\t\tfor(int j=1;j<=tot;j++)\n\t\t{\n\t\t\tint anss=val[(i^b[j])^((1<<n)-1)];\n\t\t\t//cout<<i<<\" \"<<b[j]<<\" \"<<anss<<endl;\n\t\t\tif(anss<=100)f[i][anss]+=c[j];\n\t\t}\n\t}\n\tfor(int i=0;i<(1<<n);i++)\n\t{\n\t\tfor(int j=1;j<=100;j++)f[i][j]+=f[i][j-1];\n\t\t//for(int j=1;j<=100;j++)printf(\"%d \",f[i][j]);\n\t\t//puts(\"\"); \n\t}\n\twhile(q--)\n\t{\n\t\tscanf(\"%s\",(ch+1));\n\t\tint k=read(),xx=0,bas=1;\n\t\tfor(int j=n;j>=1;j--)\n\t\t{\n\t\t\tif(ch[j]=='1')xx+=bas;\n\t\t\tbas<<=1;\n\t\t}\n\t\t//cout<<xx<<endl;\n\t\tprintf(\"%d\\n\",f[xx][k]);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1612274297,
        "uid": 179600,
        "name": "shao0320",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1017D \u3010The Wu\u3011"
    }
]
[
    {
        "content": "## $\\mathcal Solution$\n### \u3010\u9898\u610f\u3011\n\n\u6211\u4eec\u53ef\u4ee5\u4ea4\u6362\u4efb\u610f\u4e24\u4e2a\u6570\uff0c\u6c42\u6700\u5c0f\u64cd\u4f5c\u51e0\u6b21\u80fd\u8ba9\u9006\u5e8f\u5bf9\u53d8\u6210 $1$\u3002\n\n### \u3010\u5206\u6790\u3011\n\n\u5982\u679c\u9006\u5e8f\u5bf9\u4e3a $1$ \u7684\u6392\u5217\u4e00\u5b9a\u662f:\n\n- $2, 1,\\cdots n$\n- $1, 3, 2,\\cdots n$\n- $1, 2, 4, 3,\\cdots n$\n- $\\cdots$\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u4e9b\u6392\u5217\u90fd\u662f\u7531 $1, 2,\\cdots n$ \u8fdb\u884c\u4e00\u6b21\u4ea4\u6362\u5f97\u6765\u7684\u3002\n\n\u5219\u6211\u4eec\u5148\u6c42\u51fa\u6392\u5217 $p$ \u53d8\u6210 $1, 2,\\cdots n$ \u7684\u64cd\u4f5c\u6b21\u6570\u3002\n\n\u6211\u4eec\u5c06\u9700\u8981\u4ea4\u6362\u7684\u4f4d\u7f6e\u8fde\u4e00\u6761\u8fb9\uff0c\u5373 $\\forall i(1\\le i\\le n)$ \u8fde\u4e00\u6761 $i\\to p_i$ \u7684\u8fb9\u3002\n\n\u90a3\u4e48\u4ece $i$ \u51fa\u53d1\u7ecf\u8fc7\u7684\u70b9\u4e3a $i\\to p_i\\to p_{p_i}\\to\\cdots\\to i$\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u73af\uff0c\u9700\u8981\u64cd\u4f5c\u7684\u6b21\u6570\u5373\u4e3a $size-1$\uff0c$size$ \u8868\u793a\u73af\u4e2d\u7684**\u4e0d\u540c**\u70b9\u6570\u3002\n\n\u8bc1\u660e\uff1a\n\n\u5bf9\u4e8e\u4e00\u4e2a\u73af $\\{i, p_i, p_{p_i},\\cdots \\}$\uff0c\u6211\u4eec\u8bb0\u4e3a $\\{a_1, a_2,\\cdots, a_{size}\\}$\u3002\n\n**\u6ce8\u610f\uff1a$a_{size}\\neq i$\u3002**\n\n\u5219\u6211\u4eec $\\operatorname{swap}(a_{size}, a_{size-1}), \\operatorname{swap}(a_{size-1},a_{size-2}),\\cdots,\\operatorname{swap}(a_2, a_1)$\uff0c\u5176\u4e2d $\\operatorname{swap}(a, b)$ \u8868\u793a\u4ea4\u6362 $a, b$\u3002\u8fd9\u6837\u64cd\u4f5c\u6b21\u6570\u662f $size-1$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\u7b54\u6848\u4e3a $n-cnt$\uff0c$cnt$ \u8868\u793a\u73af\u7684\u6570\u91cf\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u662f\u80fd\u5728\u53d8\u6210 $1, 2,\\cdots, n$ \u4e4b\u524d\u6ee1\u8db3\u8981\u6c42\u3002\n\n\u5982\u679c $i$ \u548c $i+1$ \u662f\u5728\u4e00\u4e2a\u73af\u4e2d\uff0c\u5219\u53ef\u4ee5\u5728\u8fd9\u4e4b\u524d\u6ee1\u8db3\u8981\u6c42\u3002\u5426\u5219\uff0c\u5c31\u4e0d\u80fd\u5728\u4e4b\u524d\u6ee1\u8db3\u8981\u6c42\u3002\n\n[\u4ee3\u7801](https://codeforces.com/contest/1768/submission/188405927)\u3002",
        "postTime": 1673173964,
        "uid": 353330,
        "name": "hcywoi",
        "ccfLevel": 5,
        "title": "CF1768D \u9898\u89e3"
    },
    {
        "content": "**\u601d\u8def**\n\n\u8003\u8651\u6700\u5c0f\u9700\u8981\u51e0\u6b65\u53ef\u4ee5\u5c06\u539f\u5e8f\u5217\u6392\u5e8f\u3002\n\n\u53ef\u4ee5\u5efa\u4e00\u5f20\u56fe\uff0c\u5176\u4e2d\u8fb9\u4e3a $i \\rightarrow P_i$\n\n\u6b64\u65f6\uff0c\u8fd9\u5f20\u56fe\u4e00\u5b9a\u662f\u82e5\u5e72\u4e2a\u73af\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u73af\uff0c\u4ee4\u5b83\u6709 $m$ \u4e2a\u70b9\uff0c\u5fc5\u7136\u81f3\u5c11\u9700\u8981 $m-1$ \u6b65\n\n\u6240\u4ee5\uff0c$\u6700\u5c11\u6b65\u6570 = n - \u73af\u6570 = K$\n\n\u90a3\u4e48\uff0c\u6b64\u65f6\u518d\u8003\u8651\u53bb\u6ee1\u8db3\u9898\u76ee\u6761\u4ef6\uff0c\u518d\u4ea4\u6362\u4efb\u610f\u76f8\u90bb\u7684\u4e24\u4e2a\u5373\u53ef\n\n\u82e5\u76f8\u90bb\u7684\u4e24\u4e2a\u5728\u540c\u4e00\u4e2a\u73af\u5185\uff0c\u5373\u53ef\u5c11\u505a\u6700\u540e\u4e00\u6b21\u64cd\u4f5c\uff0c\u9700\u8981 $K-1$ \u6b65\n\n\u5426\u5219\u9700\u8981\u989d\u5916\u7684\u4e00\u6b21\u64cd\u4f5c\uff0c\u9700\u8981 $K+1$ \u6b65\n\n**Code**\n\n```cpp\n/*\n    Name:\n    Author: xiaruize\n    Date:\n*/\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define ull unsigned long long\n#define ALL(a) (a).begin(), (a).end()\n#define pb push_back\n#define mk make_pair\n#define pii pair<int, int>\n#define pis pair<int, string>\n#define sec second\n#define fir first\n#define sz(a) int((a).size())\n#define rep(i, x, y) for (int i = x; i <= y; i++)\n#define repp(i, x, y) for (int i = x; i >= y; i--)\n#define Yes cout << \"Yes\" << endl\n#define YES cout << \"YES\" << endl\n#define No cout << \"No\" << endl\n#define NO cout << \"NO\" << endl\n#define debug(x) cerr << #x << \": \" << x << endl\n#define double long double\nconst int INF = 0x3f3f3f3f;\nconst int MOD = 1000000007;\nconst int N = 2e5 + 10;\n\n// bool st;\nint t;\nint n;\nint a[N];\nint vis[N];\n// bool en;\n\nvoid solve()\n{\n    cin >> n;\n    for (int i = 1; i <= n; i++)\n    {\n        vis[i] = false;\n        cin >> a[i];\n    }\n    bool flag = false;\n    int res = 0;\n    for (int i = 1; i <= n; i++)\n    {\n        int x = i;\n        if (!vis[x])\n        {\n            while (!vis[x])\n            {\n                res++;\n                vis[x] = i;\n                x = a[x];\n            }\n            res--;\n        }\n    }\n    for (int i = 1; i < n; i++)\n    {\n        if (vis[i] == vis[i + 1])\n        {\n            flag = true;\n            break;\n        }\n    }\n    if (flag)\n        res--;\n    else\n        res++;\n    cout << res << endl;\n}\n\nsigned main()\n{\n    // freopen(\".in\",\"r\",stdin);\n    // freopen(\".out\",\"w\",stdout);\n    // cerr<<(&en-&st)/1024.0/1024.0<<endl;\n    // auto t_1=chrono::high_resolution_clock::now();\n    cin >> t;\n    while (t--)\n        solve();\n    // auto t_2=chrono::high_resolution_clock::now();\n    // cout <<\". Elapsed (ms): \" << chrono::duration_cast<chrono::milliseconds>(t_2 - t_1).count() << endl;\n    return 0;\n}\n```",
        "postTime": 1673002637,
        "uid": 111416,
        "name": "xiaruize",
        "ccfLevel": 7,
        "title": "CF1768D\u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\u6982\u8981\uff1a\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u6392\u5217 $p$\uff08~~\u8fd9\u6bd4\u8d5b\u600e\u4e48\u8fd9\u4e48\u559c\u6b22\u6392\u5217~~\uff09\uff0c\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4efb\u610f\u4e24\u4e2a\u6570\u8fdb\u884c\u4ea4\u6362\uff0c\u4f7f\u5f97\u64cd\u4f5c\u5b8c\u7684\u540e\u6392\u5217 $p$ \u53ea\u5b58\u5728\u4e00\u5bf9\u9006\u5e8f\u5bf9\u3002\n\n### \u9898\u610f\u5206\u6790\uff1a\n\n\u6211\u4eec\u5148\u8003\u8651\u4e0d\u5b58\u5728\u9006\u5e8f\u5bf9\u7684\u60c5\u51b5\uff0c\u5c31\u662f\u5e8f\u5217\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\n\n\u5c06 $i$ \u4e0e $p_i$ \u8fdb\u884c\u8fde\u8fb9\uff0c\u53d1\u73b0\u6574\u4e2a\u5e8f\u5217\u53d8\u6210\u4e86\u51e0\u4e2a\u5927\u5927\u5c0f\u5c0f\u7684\u73af\u3002\u800c\u5bf9\u4e8e\u6bcf\u4e2a\u957f\u5ea6\u4e3a $k$ \u7684\u73af\uff0c\u6211\u4eec\u53ea\u9700\u8981 $k-1$\n\u6b21\u64cd\u4f5c\u5c31\u80fd\u8ba9\u5e8f\u5217\u5f52\u4f4d\u3002\u6700\u540e\u5171\u64cd\u4f5c $ans$ \u6b21\u5c31\u8ba9\u6392\u5217\u5347\u5e8f\u3002\n\n- \u82e5\u5b58\u5728\u76f8\u90bb\u5143\u7d20\u5728\u540c\u4e00\u73af\u4e0a\uff0c\u5f53\u524d\u73af\u5c31\u51cf\u5c11\u4e00\u6b21\u64cd\u4f5c\u6b21\u6570\uff0c\u7b54\u6848\u5c31\u662f $ans-1$\u3002\n\n- \u5426\u5219\u5347\u5e8f\u5b8c\u5728\u968f\u610f\u4ea4\u6362\u4e00\u7ec4\u76f8\u90bb\u5143\u7d20\uff0c\u7b54\u6848\u5c31\u662f $ans+1$\u3002\n\n### \u4ee3\u7801\u5982\u4e0b\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint T;\nconst int N=2e5+10;\nint n;\nint f[N];\nint c[N];\nint dfs(int x,int id){\n\tc[x]=id;\n\tif(!c[f[x]]) return dfs(f[x],id)+1;\n\telse return 0;\n}\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1;i<=n;i++) scanf(\"%d\",&f[i]);\n\t\tint ans=0;\n\t\tbool flag=false;\n\t\tint id=0;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!c[i]) ans+=dfs(i,++id);\n\t\tfor(int i=1;i<n;i++)\n\t\t\tif(c[i]==c[i+1]){\n\t\t\t\tprintf(\"%d\\n\",ans-1);\n\t\t\t\tflag=true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif(!flag) printf(\"%d\\n\",ans+1);\n\t\tfor(int i=1;i<=n;i++) c[i]=0;//\u4e0d\u8981memset\n\t}return 0;\n}\n```\n\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$",
        "postTime": 1672973252,
        "uid": 511271,
        "name": "\u30c0\u6708",
        "ccfLevel": 5,
        "title": "Lucky Permutation\u9898\u89e3"
    },
    {
        "content": "**[\u3010\u539f\u9898\u94fe\u63a5\u3011](https://www.luogu.com.cn/problem/CF1768D)**\n\n## \u9898\u76ee\u5206\u6790\n\n\u53ea\u6709\u4e00\u4e2a\u9006\u5e8f\u5bf9\u7684\u6392\u5217\u5c31\u662f $1,2,\\dots,n$ \u4ea4\u6362\u4e00\u5bf9\u76f8\u90bb\u7684\u6570\u3002\n\n\u8003\u8651\u53d8\u6210 $1,2,\\dots,n$ \u7684\u6700\u5c0f\u6b65\u6570\u3002\u5982\u679c\u4f4d\u7f6e $i$ \u4e0a\u7684\u6570\u6700\u540e\u5728\u4f4d\u7f6e $j$\uff0c\u90a3\u4e48\u6211\u4eec\u628a $i\\to j$ \u8fde\u8fb9\u3002\u8fd9\u6837\u4f1a\u5f62\u6210\u82e5\u5e72\u4e2a\u73af\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u73af\uff0c\u53ef\u4ee5\u53d1\u73b0\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u662f $\\text{\u73af\u957f}-1$\u3002\u603b\u64cd\u4f5c\u6b21\u6570\u4e3a\u6240\u6709\u73af\u64cd\u4f5c\u6b21\u6570\u4e4b\u548c\uff0c\u4e5f\u5c31\u662f $n-\\text{\u73af\u6570}$\u3002\n\n\u7136\u540e\u8003\u8651\u4e00\u6b21\u4ea4\u6362 $i,i+1$\uff0c\u4e5f\u5c31\u662f\u4ea4\u6362 $i,i+1$ \u7684\u5165\u8fb9\u3002\u5982\u679c\u8fd9\u4e24\u4e2a\u70b9\u5728\u540c\u4e00\u4e2a\u73af\uff0c\u73af\u6570\u4f1a $+1$\uff0c\u5426\u5219\u73af\u6570 $-1$\u3002\u5224\u65ad\u4e00\u4e0b\u5c31\u53ef\u4ee5\u7b97\u51fa\u4ea4\u6362\u540e\u7684\u64cd\u4f5c\u6b21\u6570\u3002\n\n## \u4ee3\u7801\u5b9e\u73b0\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n// \u5feb\u8bfb\n\nusing LL=long long;\nusing LD=long double;\nusing UI=unsigned int;\nusing ULL=unsigned long long;\n\nint T,n,p[200005],pos[200005],fa[200005],siz[200005];\ninline int findFa(int x)\n\t{ return x!=fa[x]?fa[x]=findFa(fa[x]):x; }\ninline void merge(int x,int y)\n\t{ x=findFa(x),y=findFa(y);if(x!=y)fa[y]=x,siz[x]+=siz[y]; }\nint main()\n{\n\tqin>>T;\n\twhile(T--)\n\t{\n\t\tqin>>n;\n\t\tfor(int i=1;i<=n;i++) qin>>p[i],pos[p[i]]=i;\n\t\tiota(fa+1,fa+n+1,1),fill(siz+1,siz+n+1,1);\n\t\tint ans=1e9;\n\t\tfor(int i=1;i<=n;i++) merge(i,p[i]);\n\t\tfor(int i=2;i<=n;i++) ans=min(ans,findFa(pos[i-1])==findFa(pos[i])?-1:1);\n\t\tfor(int i=1;i<=n;i++) if(findFa(i)==i) ans+=siz[i]-1;\n\t\tqout.writeln(ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1673099294,
        "uid": 279800,
        "name": "ExplodingKonjac",
        "ccfLevel": 7,
        "title": "\u3010\u9898\u89e3\u3011CF1768D Lucky Permutation"
    },
    {
        "content": "## Description\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6392\u5217 $a$\uff0c\u4e00\u6b21\u64cd\u4f5c\u53ef\u4ee5\u4ea4\u6362\u4efb\u610f\u4e24\u4e2a\u4f4d\u7f6e\u7684\u6570\uff0c\u95ee\u6700\u5c11\u9700\u8981\u591a\u5c11\u6b21\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u6392\u5217 $a$ \u6070\u597d\u6709 $1$ \u4e2a\u9006\u5e8f\u5bf9\u3002\n\n## Solution\n\n\u9996\u5148\u8003\u8651\u6709 $0$ \u4e2a\u9006\u5e8f\u5bf9\u7684\u60c5\u51b5\u3002\n\n\u8fd9\u65f6\u6392\u5217\u4e00\u5b9a\u4e3a $1,2,3\\dots n$\u3002\n\n\u6c42\u6700\u5c11\u64cd\u4f5c\u6570\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u5e76\u67e5\u96c6\u3002\n\n\u73b0\u5728\u8003\u8651\u6709 $1$ \u4e2a\u9006\u5e8f\u5bf9\u7684\u60c5\u51b5\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u6b64\u65f6\u6392\u5217\u4e00\u5b9a\u662f\u5728\u6709 $0$ \u4e2a\u9006\u5e8f\u5bf9\u7684\u60c5\u51b5\u4e0b\u4ea4\u6362\u4e86\u4efb\u610f\u76f8\u90bb\u4e24\u4e2a\u4f4d\u7f6e\u3002\n\n\u5728\u6709 $0$ \u4e2a\u9006\u5e8f\u5bf9\u7684\u57fa\u7840\u4e0a\u591a\u505a\u4e00\u6b21\u5373\u53ef\uff0c\u4f46\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u89e3\u3002\n\n\u56e0\u4e3a\u9006\u5e8f\u5bf9\u4e24\u4e2a\u6570\u7684\u4f4d\u7f6e\u4e00\u5b9a\u76f8\u90bb\uff0c\u6240\u4ee5\u5224\u65ad\u662f\u5426\u5b58\u5728\u76f8\u90bb\u4e24\u4e2a\u6570\u5728\u540c\u4e00\u4e2a\u73af\u4e0a\uff0c\u5982\u679c\u5b58\u5728\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728 $0$ \u4e2a\u9006\u5e8f\u5bf9\u7684\u57fa\u7840\u4e0a\u5c11\u505a\u4e00\u6b21\u4e86\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\nint T,n,i,ans,res,a[N],fa[N];\nint find(int x){return fa[x]=(fa[x]==x?x:find(fa[x]));}\nvoid merge(int x,int y){fa[find(x)]=find(y);}\nsigned main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>T;\n\twhile (T--){\n\t\tcin>>n,ans=0,res=0;\n\t\tfor (i=1;i<=n;i++) cin>>a[i],fa[i]=i;\n\t\tfor (i=1;i<=n;i++) merge(a[i],i);\n\t\tfor (i=1;i<=n;i++) res+=(find(i)==i);\n\t\tans=(res=n-res)+1;\n\t\tfor (i=1;i<n;i++)\n\t\t\tif (find(a[i])==find(a[i+1])) ans=res-1;\n\t\tcout<<ans<<'\\n';\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1672970494,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "CF1768D Lucky Permutation \u9898\u89e3"
    }
]
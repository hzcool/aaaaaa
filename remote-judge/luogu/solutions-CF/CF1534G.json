[
    {
        "content": "\u524d\u8a00\uff1a\n1.\u7ba1\u7406\u5458\u5927\u5927\u6700\u4ec1\u6148\u5584\u826f\u53ef\u7231\u4e86\u5bf9\u5427!(\u7b2c4\u6b21\u4e86\uff01\u6c42\u8fc7\uff01\uff09\n\n2.\u4e4b\u524d\u5199\u8fd9\u9053\u9898\u7684\u65f6\u5019\u770b\u4e86\u5f88\u4e45\u9898\u89e3\u624d\u61c2,\u6240\u4ee5\u81ea\u5df1\u53c8\u6574\u7406\u4e86\u4e00\u904d\uff0c\u672c\u7bc7\u9898\u89e3\u5185\u5bb9\u6709\u4e0d\u5c11\u501f\u9274\u6d1b\u8c37\u9898\u89e3\u533a\u5176\u5b83\u9898\u89e3\u7684\uff0c\u52a0\u4e0a\u4e86\u81ea\u5df1\u7684\u7406\u89e3(\u89e3\u91ca\u4e86\u4e00\u4e0b\u5f53\u65f6\u81ea\u5df1\u6ca1\u770b\u61c2\u7684\u5730\u65b9),\u6240\u4ee5\u6bd4\u8f83\u957f(\u56fe\u90fd\u662f\u81ea\u5df1\u753b\u7684\u54c8\u54c8)\n\n3.\u5982\u679c\u849f\u84bb\u8bb2\u9519\u4e86,\u53d1\u73b0\u95ee\u9898\u7684\u795e\u7287\u8bf7\u6559\u6559\u6211(\u8c22\u8c22!!)\n\n\u601d\u8def\uff1aslope trick\n\n  \u4e00\u4e2a\u70b9 $\\,P\\,$ \u5230\u4e00\u6761\u8def\u5f84\uff08\u8fd9\u6761\u8def\u5f84\u7684\u70b9\u6ee1\u8db3\u7eb5\u5750\u6807\u968f\u6a2a\u5750\u6807\u5355\u8c03\u9012\u589e\uff0c\u5373\u53ea\u80fd\u5411\u4e0a\u5411\u53f3\u8d70\uff09\u7684\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u6700\u5c0f\u80af\u5b9a\u662f\u7ecf\u8fc7\u8fd9\u4e2a\u70b9\u7684\u659c\u7387\u4e3a $\\,-1\\,$ \u7684\u76f4\u7ebf\u4e0e\u8def\u5f84\u7684\u4ea4\u70b9$\\,Q\\,$\u95f4\u7684\u8ddd\u79bb\uff08\u56e0\u4e3a\u8def\u5f84\u4e0a\u4e0d\u4f1a\u6709\u70b9\u5230P\u7684\u6a2a\u7eb5\u8ddd\u79bb\u90fd\u6bd4 $\\,Q\\,$\u5c0f,\u800c $\\,Q\\,$ \u5230 $\\,P\\,$ \u7684\u6a2a\u7eb5\u8ddd\u79bb\u76f8\u7b49,$\\,\\text{MAX}=\\text{MIN}\\,$ )\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ud138uh.png)\n\n  \u8003\u8651\u5c06\u70b9\u4ee5$\\,x+y\\,$\u4e3a\u5e8f\u6392\u5217\u597d\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u4e00\u6761\u8def\u5f84\u603b\u4f1a\u6309\u5e8f\u7ecf\u8fc7\u6bcf\u4e2a\u70b9\u6240\u5728\u7684\u659c\u7387\u4e3a$\\,-1\\,$\u7684\u76f4\u7ebf\u3002\u4e8e\u662f\u505a\u4e00\u4e2a\u66b4\u529b\u7684DP,\u5373\u8bbe $\\,f_{i,x}\\,$ \u4e3a\u5f53\u524d$\\,DP\\,$\u5230\u7b2c$\\,i\\,$\u4e2a\u70b9\uff0c\u5f53\u524d\u6a2a\u5750\u6807\u4e3a$x$\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n  \n  \u8f6c\u79fb\u5f0f\uff1a\n\n$$\\,f_{i,x}=|x-x_{i}|+\\min\\{f_{i-1},x'\\}\\,$$\n$$\\,x'\\in[x-(x_i+y_i)+(x_{i-1}+y_{i-1}),x]\\,$$\n\n\n  \u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u8303\u56f4\uff0c\u6211\u4eec\u5316\u7b80\u4e00\u4e0b\uff1a\n\n$$\\,0\\leqslant x-x'\\leqslant (x_{i}+y_{i})-(x_{i-1}+y_{i-1})\\,$$\n\n  \u5de6\u5f0f\u542b\u4e49\u5c31\u662f$\\,x'\\,$\u662f\u5728$\\,x\\,$\u5de6\u8fb9\n\n  \u800c$\\,x+y=x_i+y_i, x'+y'=x_{i-1} + y_{i-1}\\,$ \n\n  \u5e26\u5165\u53f3\u5f0f\u5f97\u5230$\\,y\\geqslant y'\\,$\n\n  \u6240\u4ee5\u5c31\u662f\u679a\u4e3e\u6240\u6709\u5728\u4e0a\u4e00\u4e2a\u70b9\u5bf9\u5e94\u7684\u76f4\u7ebf\u4e0a(\u8fc7\u4e0a\u4e00\u4e2a\u70b9\u4e14\u659c\u7387\u4e3a$\\,-1\\,$\u7684\u76f4\u7ebf),\u4e14\u5728\u5f53\u524d\u70b9\u5de6\u4e0b\u65b9\uff08\u5de6\u65b9 \u4e0b\u65b9\uff09\u7684\u70b9\u3002\n\n  \u8003\u8651$\\,f_i\\,$\u4ee5\u7b2c\u4e8c\u7ef4\u4f5c\u4e3a\u6a2a\u5750\u6807\u65f6\u7684\u56fe\u50cf\u3002\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5df2\u77e5$ \\,f(x)\\,$\u4e3a\u5b9a\u4e49\u57df\u4e3a$\\,\\mathbb{R}\\, $\u4e14\u8fde\u7eed\u7684\u51fd\u6570\uff0c\u4ee4 $\\,g(x)=\\min_{x'\\in[x-x_0,x+x_0]}{f(x')}\\,$\uff0c\u5176\u4e2d$\\,x_0\\,$\u4e3a\u4e00\u5b9a\u503c\uff0c\u5219\\,$g(x)\\,$\u4e3a\u8fde\u7eed\u51fd\u6570.\u53c8\u56e0\u4e3a$\\,|x-x_i|\\,$\u662f\u4e0b\u51f8\u51fd\u6570(\u7edd\u5bf9\u503c\u51fd\u6570\u90a3\u4e2a\uff0c\u5148\u5411\u53f3\u4e0b\u76f4\u7ebf\uff0c\u518d\u5411\u53f3\u4e0a\u76f4\u7ebf\uff0c\u659c\u7387\u5206\u522b\u662f$\\,-1,1\\,$)\uff0c\u800c\u4e0b\u51f8\u51fd\u6570\u4e0e\u4e0b\u51f8\u51fd\u6570\u7684\u548c\u8fd8\u662f\u4e0b\u51f8\u51fd\u6570\uff0c\u6240\u4ee5$\\,f_i\\,$\u4e5f\u4e3a\u4e0b\u51f8\u51fd\u6570\u3002\n\n ![](https://cdn.luogu.com.cn/upload/image_hosting/usj4asqm.png)\n  \u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u7ef4\u62a4\u8fd9\u4e2a\u4e0b\u51f8\u58f3\u3002\n\n  \u53d6$\\,\\min\\, $\u64cd\u4f5c\u76f8\u5f53\u4e8e\u5c06$\\,f_i\\,$\u7684\u6700\u4f4e\u70b9\u5411\u53f3\u62c9\u957f$\\,(x_i+y_i)-(x_{i-1}+y_{i-1})\\,$\u7684\u8ddd\u79bb\uff0c\u53f3\u90e8\u5206\u540c\u65f6\u5e73\u79fb\uff0c\u5176\u4f59\u4e0d\u53d8\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pb64i2wx.png)  \n\n  \u5982\u4e0a\u56fe\uff0c\u9ed1\u8272\u7684\u662f\u8fd9\u4e2a\u51fd\u6570\uff0c\u6240\u6709\u7ea2\u8272\u6807\u51fa\u7684\u533a\u95f4\u5185\u7684\u6700\u5c0f\u503c\u90fd\u662f\u4e0d\u540c\u7684\uff0c\u5de6\u90e8\u662f\u7ebf\u6bb5\u53f3\u7aef\u70b9\u6a2a\u5750\u6807\u5bf9\u5e94\u7684\u51fd\u6570\u4e0a\u7684\u70b9\uff0c\u53f3\u90e8\u662f\u7ebf\u6bb5\u5de6\u7aef\u70b9\u6a2a\u5750\u6807\u5bf9\u5e94\u7684\u51fd\u6570\u4e0a\u7684\u70b9\u3002\u800c\u4e2d\u95f4\u7d2b\u8272\u90e8\u5206\u90fd\u5bf9\u5e94\u7684\u662f\u6700\u4f4e\u70b9\uff0c\u6240\u4ee5\u753b\u51fa$\\,\\text{MIN}\\,$\u56fe\u50cf\u5176\u5b9e\u76f8\u5f53\u4e8e\u662f\u539f\u56fe\u4e2d\u95f4\u90e8\u5206\u62c9\u957f\uff08\u4e00\u6761\u6c34\u5e73\u7ebf\uff09\uff0c\u53f3\u8fb9\u5411\u53f3\u5e73\u79fb\u3002\uff08\u5982\u4e0b\u56fe\uff09\n\n ![](https://cdn.luogu.com.cn/upload/image_hosting/0ulpqzrc.png)\n\n  \u90a3\u4e48\u4e3a\u4ec0\u4e48\u662f\u62c9\u957f$\\,x_i+y_i-x_{i-1}-y_{i-1}\\,$\u5462\uff1f\u56e0\u4e3a\u201c$\\,x'\\in[x-(x_i+y_i)+(x_{i-1}+y_{i-1}),x]\\, $\u201d,\u5373$\\,x'\\,$\u53d6\u503c\u8303\u56f4\u7684\u5927\u5c0f\u662f$\\,x_i+y_i-x_{i-1}-y_{i-1\\,}$,\u4e5f\u5c31\u662f\u56fe\u4e2d\u7ea2\u8272\u7d2b\u8272\u7ebf\u6bb5\u7684\u957f\u5ea6\u662f$\\,x_i+y_i-x_{i-1}-y_{i-1}\\,$,\u800c\u8fd9\u4e2a\u957f\u5ea6\u6b63\u662f\u65b0\u56fe\u4e0a\u6c34\u5e73\u7ebf\u7684\u957f\u5ea6\n\n  \u201c\u62c9\u957f\u201d\u5728\u4ee3\u7801\u4e0a\u8981\u7528\u61d2\u6807\u8bb0\u5b9e\u73b0\n\n  \u81f3\u4e8e\u52a0\u5165\u4e00\u4e2a$\\,|x-x_i|\\,$\u6211\u4eec\u53ef\u4ee5\u505a\u8fd9\u6837\u4e00\u4ef6\u4e8b\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6709\u5e8f\u53ef\u91cd\u96c6\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5f53\u524d\u51f8\u58f3\u5728\u6b64\u5904\u659c\u7387\u51cf\u5c11\u4e86$\\, 1\\,$\u3002\n  \n  \u4e8e\u662f\u6211\u4eec\u53ea\u9700\u7ef4\u62a4\u8fd9\u4e2a\u53ef\u91cd\u96c6\uff0c\u5c31\u53ef\u4ee5\u7ef4\u62a4\u597d$\\,|x-x_i|\\,$\u4e86\uff08\u8fd9\u4e2a\u5957\u8def\u975e\u5e38\u5e38\u7528\uff09\n\n  \u5177\u4f53\u5b9e\u73b0\u4e0a\uff0c\u6bcf\u6b21\u52a0\u5165\u4e00\u4e2a\u70b9\u5206\u4e09\u7c7b\u8ba8\u8bba\uff0c\u82e5\u5f53\u524d$\\,x_i\\,$\u5728\u6700\u4f4e\u70b9\u5de6\u8fb9/\u6700\u4f4e\u70b9/\u6700\u4f4e\u70b9\u53f3\u8fb9\u3002\n\n  \u5728\u5176\u5de6\u65f6,$\\,x_i\\,$\u7684\u5de6\u8fb9\u659c\u7387\u90fd\u51cf\u4e00,\u800c\u53f3\u8fb9\u90fd\u52a0\u4e00,\u7b49\u4e8e\u5728$ \\,x_i\\,$\u7684\u4f4d\u7f6e\u51cf\u5c11\u4e86$\\,2\\,$,\u6240\u4ee5\u6211\u4eec\u671d\u5de6\u90e8\u5206\u53ef\u91cd\u96c6\u52a0\u5165\u4e24\u4e2a$ \\,x_i\\,$,\u540c\u65f6\u6700\u5de6\u8fb9\u7684\u6700\u4f4e\u70b9\u6b64\u65f6\u5df2\u7ecf\u4e0d\u518d\u662f\u6700\u4f4e\u70b9,\u6240\u4ee5\u5c06\u5176\u653e\u5165\u53f3\u90e8\u5206\u53ef\u91cd\u96c6\u91cc\u3002\u653e\u5165\u53f3\u90e8\u5206\u53ef\u91cd\u96c6\u65f6\u8981\u6ce8\u610f\u6211\u4eec\u6253\u4e86\u5168\u5c40\u7684\u53f3\u90e8\u5206\u5e73\u79fb\u91cf\u6807\u8bb0,\u653e\u5165\u524d\u8981\u5148\u51cf\u53bb\u6b64\u6807\u8bb0,\u4e0d\u7136\u62ff\u51fa\u6765\u65f6\u5c31\u4e0d\u662f\u771f\u5b9e\u503c\u4e86\u3002\u5176\u4f59\u60c5\u51b5\u540c\u7406\u7ef4\u62a4\u4e00\u4e0b\u3002\u6b64\u65f6$\\,i\\,$\u7684\u8d21\u732e\u5c31\u662f\u79bb\u5b83\u6700\u8fd1\u7684\u6700\u4f4e\u70b9\u7684\u8d21\u732e\u3002\n\n  \u7528\u5806\u5c31\u53ef\u4ee5\u7ef4\u62a4,\u65f6\u95f4\u590d\u6742\u5ea6\u74f6\u9888\u5728\u4e8e\u5806\u7684\u4f7f\u7528,$\\,\\mathcal{O}(n\\log n)\\,$\n\n  \u5de6\u8fb9\u7528\u5927\u6839\u5806,\u7531\u4e8e\u6574\u4f53\u662f\u4e0b\u51f8\u58f3,\u653e\u5728\u5de6\u90e8\u7684\u662f\u5355\u8c03\u9012\u51cf\u7684,\u6a2a\u5750\u6807\u6700\u5927\u7684\u5bf9\u5e94\u7684\u5c31\u662f\u6700\u5c0f\u503c\u7684\u4f4d\u7f6e\u3002\u540c\u7406,\u53f3\u90e8\u5355\u8c03\u9012\u589e,\u7528\u5c0f\u6839\u5806\u3002\n\n  \n\n  \u6b64\u5916\u8fd8\u6709\u4e00\u79cd\u65b9\u6cd5\u662f\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u8f6c\u66fc\u54c8\u987f\u8ddd\u79bb\n\n  \u8fd9\u4e5f\u662f\u4e00\u4e2a\u5e38\u7528\u7684$\\,\\text{trick:}$ $(x,y)\u2192(x+y,x-y)\\,$\u524d\u8005\u7684\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u5c31\u662f\u540e\u8005\u66fc\u54c8\u987f\u8ddd\u79bb\u7684\u4e00\u534a\n\n  \u66fc\u54c8\u987f\u8ddd\u79bb\u4e5f\u6709\u4e2a\u6027\u8d28,\u4e00\u4e2a\u70b9\u5230\u4e00\u6761\u786e\u5b9a\u7684\u8def\u5f84\uff08\u7c7b\u4f3c\u51fd\u6570\u7684\u90a3\u79cd\uff0c\u6bcf\u4e2a$\\,X\\,$\u53ea\u5bf9\u5e94$\\,1\\,$\u4e2a$\\,Y\\,$\uff09\u4e0a\u7684\u6240\u6709\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u4e2d,\u5230\u548c\u5b83\u6a2a\u5750\u6807\u5411\u7b49\u7684\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u6700\u5c0f\n \n \u4ee3\u7801\u5b9e\u73b0\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=8e5+10;\nint n;\ntypedef pair<int,int> pii;\npii a[N];\ntypedef long long ll;\nll ans;\npriority_queue<int> L;\npriority_queue<int,vector<int>,greater<int> > R;\n#define sum first\n#define x second\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1,x,y;i<=n;i++)\n    {\n        scanf(\"%d%d\",&x,&y);\n        a[i]={x+y,x};\n    }\n    sort(a+1,a+n+1);\n    L.push(a[1].x);\n    R.push(a[1].x);\n    int tagr=0;\n    for(int i=2;i<=n;i++)\n    {\n        tagr+=a[i].sum-a[i-1].sum;//tagr\u8868\u793a\u5168\u5c40\u7684\u6709\u90e8\u5206\u5e73\u79fb\u91cf\u6807\u8bb0\n        int l=L.top(),r=R.top()+tagr,x=a[i].x;\n        if(x<l)\n        {\n             L.pop(),R.push(l-tagr);\n             L.push(x),L.push(x);\n             ans+=l-x;\n        }// xi\u5728\u6700\u4f4e\u70b9\u5de6\u8fb9\n        else if(x>r) \n        {\n            R.pop(),L.push(r);\n            R.push(x-tagr),R.push(x-tagr);\n            ans+=x-r;\n        }// xi\u5728\u6700\u4f4e\u70b9\n        else\n        {\n            L.push(x),R.push(x-tagr);\n        }// xi\u5728\u6700\u4f4e\u70b9\u53f3\u8fb9\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1658882233,
        "uid": 546246,
        "name": "E_huan",
        "ccfLevel": 8,
        "title": "CF1534G solution"
    },
    {
        "content": "## \u9898\u89e3\n\n~~\u849f\u84bb\u7684\u505a\u6cd5\u662f\u4ece\u8bf8\u4f4d\u7684\u4ee3\u7801\u4e2d\u5b66\u4e60\u6765\u7684\uff0c\u5927\u90e8\u5206\u4eba\u7684\u4ee3\u7801\u90fd\u597d\u50cf\u5440\uff0c\u7531\u4e8e\u6ca1\u627e\u5230\u4e00\u7bc7\u9898\u89e3\uff0c\u6240\u4ee5\u5c31\u81ea\u5df1\u4ece\u4ee3\u7801\u4e2d\u81c6\u60f3\u4e86\u4e00\u4e0b\u65b9\u6cd5~~\n\n\u6211\u4eec\u5f88\u5bb9\u6613\u53d1\u73b0\uff0c\u5bf9\u4e8e\u5bf9\u4e8e\u70b9 $i$\uff0c\u8def\u5f84\u4e0a\u6700\u4f18\u7684\u4e00\u4e2a\u5339\u914d\u70b9\u4e00\u5b9a\u6709\u4e00\u4e2a\u662f\u5728\u70b9 $i$ \u6240\u5728\u7684\u5bf9\u89d2\u7ebf $x+y=x_{i}+y_{i}$ \u4e0a\u7684\u3002\n\n\u5047\u8bbe\u6211\u4eec\u5728\u70b9 $(a,b)(a+b< x+y)$\uff0c\u5bf9\u4e8e\u70b9 $(x,y)$\uff0c\u6211\u4eec\u73b0\u5728\u7684\u4ee3\u4ef7\u4e3a $max(|x-a|,|y-b|)$\u3002\n\n\u5f53 $a<x,b<y$ \u65f6\uff0c\u65e0\u8bba\u600e\u4e48\u8d70\u90fd\u4e0d\u4f1a\u53d8\u5f97\u66f4\u52a3\u3002\n\n\u5f53 $a<x,b>y$ \u65f6\uff0c\u7531\u4e8e $x-a>b-y$\uff0c\u6240\u4ee5\u53ea\u6709\u5f53\u6211\u5411\u4e0b\u8d70\u7684\u65f6\u5019\u4f1a\u53d8\u5f97\u66f4\u4f18\uff0c\u800c\u5411\u53f3\u8d70\u5728\u5230\u8fbe\u5bf9\u89d2\u7ebf\u4e4b\u524d $b-y$ \u5373\u4f7f\u589e\u5927\uff0c\u4e5f\u4e00\u76f4\u662f\u5c0f\u4e8e $x-a$ \u7684\uff0c\u4e0d\u4f1a\u53d8\u5f97\u66f4\u52a3\u3002\n\n\u5f53 $a>x,b<y$ \u65f6\u540c\u7406\u3002\n\n\u800c\u5f53\u6211\u4eec\u7684 $a+b>x+y$ \u65f6\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5df2\u7ecf\u8d70\u8fc7\u4e86\u5bf9\u89d2\u7ebf\uff0c\n\n![image1](https://cdn.luogu.com.cn/upload/image_hosting/tbj06go7.png)\n\n\u6211\u4eec\u53ea\u80fd\u5411\u53f3\u6216\u5411\u4e0b\u8d70\uff0c\u4f46\u5f88\u660e\u663e\uff0c\u6211\u4eec\u600e\u4e48\u4e5f\u8d70\u4e0d\u5230\u4ee3\u4ef7\u66f4\u5c0f\u7684\u5730\u65b9\u4e86\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u5728\u5bf9\u89d2\u7ebf\u4e0a\u65f6\u80af\u5b9a\u662f\u4ee3\u4ef7\u6700\u5c0f\u7684\u3002\n\n\u7531\u4e8e\u6211\u4eec\u6bcf\u8d70\u4e00\u6b65\u53ea\u4f1a\u8ba9 $x+y$ \u7684\u548c\u589e\u52a0 1\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u8def\u5f84\u4e0e  $x+y=x_{i}+y_{i}$\u80af\u5b9a\u662f\u6709\u4ea4\u70b9\u7684\u3002\n\n\u4f46\u6211\u4eec\u53c8\u8be5\u53bb\u600e\u4e48\u6c42\u603b\u4ee3\u4ef7\u6700\u5c0f\u7684\u8def\u5f84\u5462\uff1f\n\n\u9996\u5148\u662f\u5f88\u5bb9\u6613\u8003\u8651\u5230 dp \u7684\uff0c\u6211\u4eec\u5148\u5c06 $(x_{i},y_{i})$ \u6309\u7167$x_{i}+y_{i}$ \u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u8bbe $dp_{i}$ \u8868\u793a\u5728 $x=i$ \u7684\u70b9\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u8d70\u5230 $(x_{k},y_{k})$ \u5bf9\u5e94\u7684\u5bf9\u89d2\u7ebf\u65f6\uff0c\u6709\u8f6c\u79fb\n\n$$\ndp_{i}=\\min_{|j-i|\\leqslant(x_{k}+y_{k}-x_{k-1}-y_{k-1})}(dp_{j}+|x_{k}-i|)\n$$\n\n\n\u5f88\u660e\u663e\uff0c\u76f4\u63a5\u8fd9\u6837\u8f6c\u79fb\u7684\u65f6\u5019\u662f $O\\left(10^9n\\right)$ \u7684\uff0c\u4e0d\u53ef\u80fd\u8fc7\u5f97\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5bfb\u627e\u4e00\u4e0b\u5b83\u8f6c\u79fb\u7684\u6027\u8d28\u3002\n\n\u9996\u5148\u6700\u4f18\u503c\u80af\u5b9a\u53ef\u4ee5\u51fa\u73b0\u5728\u4e00\u4e2a\u5df2\u51fa\u73b0\u70b9\u5bf9\u5e94\u7684\u67d0\u4e2a\u70b9(\u5373\u5b83\u4f1a\u5728\u5c42\u4e0e\u5c42\u4e4b\u95f4\u5411\u53f3\u6216\u5411\u4e0b\u8d70\u5230\u7684\u70b9)\u4e0a\u7684\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u5c06\u65b0\u52a0\u5165\u7684\u70b9\u5206\u6210 3 \u7c7b\uff0c\u592a\u5de6\u8fb9\u4ee5\u81f3\u4e8e\u8d70\u4e0d\u5230\uff0c\u592a\u53f3\u8fb9\u4ee5\u81f3\u4e8e\u8d70\u4e0d\u5230\uff0c\u8d70\u5f97\u5230\u3002\n\n![image2](https://cdn.luogu.com.cn/upload/image_hosting/z81bsgee.png)\n\n\u8fd9\u91cc\u7528\u989c\u8272\u533a\u522b\u5f00\u4e86\u3002\n\n\u6211\u4eec\u5047\u8bbe $S$ \u7684\u5de6\u8fb9\u8fd8\u6709\u4e00\u4e9b\u70b9\uff0c\u4f46\u5b83\u4eec\u6ca1\u6709 $S$ \u4f18\u79c0\u3002\n\n\u5982\u679c\u6211\u63a5\u4e0b\u6765\u52a0\u5165\u7684\u70b9\u662f\u5728\u4e2d\u592e\u533a\u57df\uff0c\u8fd9\u53ea\u4f1a\u5bfc\u81f4\u5de6\u8fb9\u7684\u76f8\u5bf9\u5dee\u8ddd\u589e\u5927\uff0c\u589e\u5927\u7684\u503c\u5c31\u662f\u5b83\u4eec\u4e4b\u95f4\u7684\u76f8\u5bf9\u8ddd\u79bb\u3002\n\n\u4f46\u7531\u4e8e\u65b0\u52a0\u5165\u7684\u70b9\u53ef\u4ee5\u7531\u539f\u6765\u7684\u6700\u4f18\u70b9\u8d70\u5230\uff0c\u539f\u6765\u7684\u6700\u4f18\u70b9\u53c8\u589e\u5927\u4e86\uff0c\u6240\u4ee5\u65b0\u70b9\u7684\u503c\u5c31\u662f\u6700\u4f18\u7684\u4e86\u3002\u5b83\u4eec\u4e4b\u95f4\u7684\u5dee\u8ddd\u5c31\u662f\u5b83\u4eec\u7684\u76f8\u5bf9\u8ddd\u79bb\u3002\n\n\u5982\u679c\u52a0\u5165\u7684\u65b0\u70b9\u5728\u84dd\u8272\u533a\u57df\uff0c\u90a3\u4e48\u5728\u65b0\u70b9\u5de6\u8fb9\u4e0e\u53f3\u8fb9\u7684\u70b9\u7684 dp \u503c\u90fd\u4f1a\u589e\u5927\u3002\u90fd\u662f\u79bb\u65b0\u70b9\u8d8a\u8fdc\u589e\u5927\u7684\u8d8a\u591a\uff0c\u589e\u5927\u7684\u90fd\u662f\u5b83\u4eec\u95f4\u7684\u76f8\u5bf9\u8ddd\u79bb\u3002\n\n\u6b64\u65f6\u5bf9\u4e8e\u53f3\u8fb9\u7684\u70b9\uff0c\u5c31\u4f1a\u4ea7\u751f\u53d8\u52a8\u4e86\uff0c\u5982\u679c\u6700\u4f18\u70b9\u4e0e\u6b21\u4f18\u70b9\u4e4b\u95f4\u7684\u5dee\u8ddd\u53ea\u6709\u5b83\u4eec\u4e4b\u95f4\u7684\u76f8\u5bf9\u8ddd\u79bb\uff0c\u90a3\u4e48\u6b64\u65f6\u7684\u6700\u4f18\u70b9\u5c31\u53d8\u6210\u539f\u6765\u7684\u6b21\u4f18\u70b9\u4e86\u3002\u539f\u6765\u7684\u6700\u4f18\u70b9\u65e0\u8bba\u5982\u4f55\u90fd\u4e0d\u4f1a\u5728\u53e6\u4e00\u4e2a\u65b0\u6700\u4f18\u70b9\u51fa\u73b0\u4e4b\u524d\u53d8\u5f97\u6bd4\u5b83\u66f4\u4f18\u3002\n\n\u5982\u8fc7\u65b0\u52a0\u5165\u7684\u70b9\u5728\u7ea2\u8272\u533a\u57df\u5462?\u5f88\u663e\u7136\uff0c\u8fd9\u53ea\u4f1a\u7ee7\u7eed\u8ba9\u5b83\u4eec\u7684\u76f8\u5bf9\u5dee\u8ddd\u589e\u52a0\u3002\n\n\u5bf9\u4e8e\u5728 $S$ \u53f3\u8fb9\u7684\u70b9\u540c\u7406\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u60f3\u5230\u53ef\u4ee5\u7ef4\u62a4\u4e24\u4e2a\u4f18\u5148\u961f\u5217\u3002\n\n\u4e00\u4e2a\u8868\u793a\u5de6\u8fb9\u90e8\u5206\u7684\u6700\u4f18\u9009\u62e9\uff0c\u5176\u4e2d\u6700\u4f18\u70b9\u662f\u6700\u961f\u5217\u4e2d\u6700\u9760\u53f3\u7684\u70b9\u3002\u53e6\u4e00\u4e2a\u8868\u793a\u53f3\u8fb9\u7684\u6700\u4f18\u9009\u62e9\u3002\n\n\u7531\u4e8e\u5728\u8fd9\u4e2a\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u4ece\u5de6\u5230\u53f3 $x$ \u662f\u9012\u589e\u7684\uff0c\u4ece\u53f3\u5230\u5de6 $y$ \u662f\u9012\u589e\u7684\uff0c\u4e00\u4e2a\u5c31\u6309 $x$ \u6392\u5e8f\uff0c\u4e00\u4e2a\u6309 $y$ \u6392\u5e8f\u3002\n\n\u4f18\u5148\u961f\u5217\u4e2d\u5f80\u540e\u7684\u70b9\u4e0e\u524d\u9762\u7684\u70b9\u7684\u5dee\u8ddd\u4e0e\u524d\u9762\u7684\u70b9\u6570\u6709\u5173\uff0c\u5f53\u8fd9\u4e2a\u70b9\u524d\u9762\u6ca1\u6709\u70b9\u65f6\uff0c\u5b83\u5c31\u662f\u6700\u4f18\u7684\u4e86\u3002\n\n\u52a0\u5165\u70b9\u65f6\u6709\u5982\u4e0b\u4e09\u79cd\u60c5\u51b5\u3002\n\n- \u5982\u679c\u52a0\u5165\u7684\u70b9\u5728\u7ea2\u8272\u533a\u57df\u5c31\u5f80\u4e24\u4e2a\u961f\u5217\u4e2d\u5404\u52a0\u5165\u4e00\u4e2a\u70b9\uff0c\u6700\u4f18\u503c\u6ca1\u6709\u53d8\u5316\u3002\n\n- \u5982\u679c\u52a0\u5165\u7684\u70b9\u5728\u84dd\u8272\u533a\u57df\u5c31\u627e\u5230 $x$ \u5bf9\u5e94\u961f\u5217\u7684\u6700\u4f18\u70b9\uff0c\u5411\u91cc\u9762\u52a0\u5165\u4e24\u4e2a\u65b0\u70b9\uff0c\u5e76\u5c06\u539f\u6765\u7684\u6700\u4f18\u70b9\u5220\u9664\uff0c\u6700\u4f18\u503c\u589e\u52a0\u539f\u6765\u6700\u4f18\u70b9\u4e0e\u65b0\u70b9\u7684\u5dee\u8ddd\u3002\n\n  \u5982\u679c\u539f\u6765\u7684\u6700\u4f18\u70b9\u6709\u4e24\u4e2a\u5c31\u8bf4\u660e\u5b83\u4e0e\u540e\u9762\u7684\u8fd8\u6709\u5dee\u8ddd\uff0c\u5b83\u672c\u8eab\u8fd8\u662f\u6700\u4f18\u7684\uff0c\u5426\u5219\u5b83\u5c31\u4e0e\u4e0b\u4e00\u4e2a\u662f\u76f8\u540c\u7684\u6ca1\u7528\u4e86\u3002\n\n\u4f46\u5f88\u660e\u663e\uff0c\u6211\u4eec\u53d1\u73b0\u539f\u6765\u7684\u6700\u4f18\u70b9\u73b0\u5728\u5bf9\u4e8e $y$ \u7684\u90a3\u4e2a\u5e8f\u5217\u8fd8\u662f\u6709\u5f71\u54cd\u7684\uff0c\u5b83\u4f1a\u53d8\u6210 $y$ \u5e8f\u5217\u4e2d\u7684\u6700\u4f18\u70b9\uff0c\u5e76\u52a0\u5927 $y$ \u95f4\u7684\u76f8\u5bf9\u5dee\u8ddd\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u586b\u4e00\u4e2a\u6b65\u9aa4\u3002\n\n- \u5e76\u5c06\u8fd9\u4e2a\u6700\u4f18\u70b9\u52a0\u5165 $y$ \u7684\u961f\u5217\u4e2d\u3002\n- \u5982\u679c\u539f\u6765\u52a0\u5165\u7684\u70b9\u5728\u7ea2\u8272\u533a\u57df\uff0c\u7531\u4e8e $x$ \u8f74\u4e0e $y$ \u8f74\u662f\u7b49\u4ef7\u7684\uff0c\u7ffb\u4e00\u7ffb\u4e5f\u6ca1\u95ee\u9898\uff0c\u6240\u4ee5\u5b83\u4eec\u7684\u64cd\u4f5c\u5e94\u8be5\u4e5f\u662f\u76f8\u4f3c\u7684\uff0c\u53ea\u662f\u5bf9 $y$ \u5e8f\u5217\u8fdb\u884c $x$ \u7684\u64cd\u4f5c\u7f62\u4e86\u3002\n\n\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O\\left(nlog\\,n\\right)$\u3002\n\n## \u4ee3\u7801\n\n```cpp\nint n,sum;LL ans;pii a[MAXN],b[MAXN];\nbool cmp(pii x,pii y){return x.fir+x.sec<y.fir+y.sec;}\npriority_queue<pii>qx,qy; \nsigned main(){\n\tread(n);for(int i=1;i<=n;i++)read(a[i].fir),read(a[i].sec);\n\tsort(a+1,a+n+1,cmp);\n\tfor(reg int i=1;i<=n;i++)b[i]=mkpr(a[i].sec,a[i].fir);\n\tqx.push(a[1]);qy.push(b[1]);\n\tfor(reg int i=2;i<=n;i++){\n\t\tif(qx.top().fir>a[i].fir){\n\t\t\tpii t=qx.top();int dif=t.fir-a[i].fir;ans+=1ll*dif;qx.pop();\n\t\t\tqy.push(mkpr(a[i].sec-dif,a[i].fir+dif));qx.push(a[i]);qx.push(a[i]);\n\t\t}\n\t\telse if(qy.top().fir>b[i].fir){\n\t\t\tpii t=qy.top();int dif=t.fir-b[i].fir;ans+=1ll*dif;qy.pop();\n\t\t\tqx.push(mkpr(b[i].sec-dif,b[i].fir+dif));qy.push(b[i]);qy.push(b[i]);\n\t\t}\n\t\telse qx.push(a[i]),qy.push(b[i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1624093209,
        "uid": 105141,
        "name": "StaroForgin",
        "ccfLevel": 9,
        "title": "\u9898\u89e3[CF1534G]A New Beginning"
    },
    {
        "content": "\u8f6c\u66fc\u54c8\u987f\u3002\n\n\u95ee\u9898\u53d8\u4e3a\uff0c\u6bcf\u6b21\u5411\u53f3\u4e0a\u6216\u53f3\u4e0b\u8d70\u4e00\u683c\uff0c\u4ee3\u4ef7\u53d8\u4e3a\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n\n\u7531\u4e8e\u8d70\u8def\u659c\u7387\u662f $1$ \u6216 $-1$\uff0c\u6211\u4eec\u53ea\u7528\u8003\u8651\u5728\u5176\u6b63\u4e0b\uff08\u4e0a\uff09\u65b9\u65f6\u6253\u6807\u8bb0\u3002\n\n\u8bbe $f_i$ \u8868\u793a\u5728\u4f4d\u7f6e $i$ \u65f6\u7b54\u6848\u7684\u6700\u5c0f\u503c\u3002\n\n\u9047\u5230\u4e00\u4e2a\u70b9\u65f6\u4f1a\u6267\u884c $f_i \\leftarrow f_i+|i-y|$\u3002\n\n\u5411\u53f3\u8d70\u4e00\u6b65\u4f1a\u6267\u884c $f_i \\leftarrow \\min(f_{i-1}, f_{i+1})$\u3002\n\n\u7531\u4e8e $|i-y|$ \u662f\u51f8\u7684\uff0c\u7b2c\u4e8c\u6761\u5bf9\u4e8e\u51f8\u51fd\u6570\u7684\u8fd0\u7b97\u7ed3\u679c\u4e5f\u662f\u51f8\u7684\uff0c\u6240\u4ee5 $f$ \u59cb\u7ec8\u662f\u51f8\u7684\u3002\n\n\u4e14 $|i-y|$ \u7684\u659c\u7387\u56fa\u5b9a\u4e3a\u6b63\u8d1f\u4e00\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u8003\u8651\u7ef4\u62a4\u6bcf\u4e00\u79cd\u659c\u7387\u3002\u540c[P3642 [APIO2016]\u70df\u706b\u8868\u6f14](https://www.luogu.com.cn/problem/P3642)\n\n\u7528 multiset \u7ef4\u62a4\u659c\u7387\u6539\u70b9\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int Maxn = 800005;\nint n, shift, x[Maxn], y[Maxn], ord[Maxn];\nmultiset <int> Mu1, Mu2;\nlong long ans;\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++)\n\t\tscanf(\"%d%d\", &x[i], &y[i]), ord[i] = i, x[i] = x[i] + y[i], y[i] = x[i] - 2 * y[i];\n\tsort(ord + 1, ord + 1 + n, [](int a, int b){return x[a] < x[b];});\n\tMu1.insert(y[ord[1]]);\n\tMu2.insert(y[ord[1]]);\n\tfor (int i = 2; i <= n; i++)\n\t{\n\t\tint d = x[ord[i]] - x[ord[i - 1]];\n\t\tshift += d;\n\t\tint pos1 = *Mu1.rbegin() - shift, pos2 = *Mu2.begin() + shift;\n\t\tif (y[ord[i]] < pos1)\n\t\t{\n\t\t\tans += pos1 - y[ord[i]];\n\t\t\tMu2.insert(*Mu1.rbegin() - 2 * shift);\n\t\t\tMu1.erase(--Mu1.end());\n\t\t\tMu1.insert(y[ord[i]] + shift);\n\t\t\tMu1.insert(y[ord[i]] + shift);\n\t\t}\n\t\telse if (y[ord[i]] > pos2)\n\t\t{\n\t\t\tans += y[ord[i]] - pos2;\n\t\t\tMu1.insert(*Mu2.begin() + 2 * shift);\n\t\t\tMu2.erase(Mu2.begin());\n\t\t\tMu2.insert(y[ord[i]] - shift);\n\t\t\tMu2.insert(y[ord[i]] - shift);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMu1.insert(y[ord[i]] + shift);\n\t\t\tMu2.insert(y[ord[i]] - shift);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans / 2);\n\treturn 0;\n}\n```",
        "postTime": 1642261834,
        "uid": 49093,
        "name": "_sys",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1534G A New Beginning"
    },
    {
        "content": "\u9898\u610f\uff1a\r\n\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e0a\u6709 $n$ \u4e2a\u70b9\u8981\u88ab\u5904\u7406\uff0c\u5728 $(a,b)$ \u70b9\u5904\u7406\u70b9 $(x,y)$ \u7684\u4ee3\u4ef7\u662f $\\max\\{|a-x|,|b-y|\\}$ \uff0c\u4ece $(0,0)$ \u51fa\u53d1\uff0c\u6bcf\u6b21\u53ef\u5411\u4e0a $or$ \u5411\u5de6\u8d70\u4e00\u6b65\uff0c\u6c42\u5904\u7406\u6389\u6240\u6709\u70b9\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\r\n$$\r\nn\\le 8\\times 10^5 ,x,y\\le 10^9\r\n$$\r\n\u9898\u89e3\uff1a\r\n\r\n\u9996\u5148\u8fd9\u4e2a\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u7684\u4ee3\u4ef7\u5e76\u4e0d\u597d\u5904\u7406\uff0c\u6240\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7ecf\u5178~~\u6211\u521a\u4f1a~~\u7684\u5957\u8def\uff0c\u628a\u5750\u6807 $(x,y)$ \u8f6c\u6362\u6210 $(x+y,x-y)$ \uff0c\u6b64\u65f6\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u5c31\u53d8\u6210\u4e86\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u8fd8\u5e26\u6709\u4e00\u4e2a $1\\over2$ \u7684\u5e38\u6570\uff0c\u8fd9\u4e2a\u6700\u540e\u628a\u6c42\u51fa\u7684 $Ans$ \u9664\u4ee5 $2$ \u5373\u53ef\u3002\r\n\r\n\u8fd9\u4e2a\u64cd\u4f5c\u76f8\u5f53\u4e8e\u662f\u628a\u5750\u6807\u7cfb\u987a\u65f6\u9488\u65cb\u8f6c\u4e86 $45^\\circ$ \uff0c\u6240\u4ee5\u5411\u53f3\u5411\u4e0a\u7684\u79fb\u52a8\u53d8\u6210\u4e86 $(x,y)\\to (x+1,y) / (x+1,y+1)$ \u8fd9\u6837\u659c\u7740\u8d70\uff0c\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u5173\u952e\u70b9 $(a,b)$ \u5728 $x=a$ \u65f6\u5904\u7406\u662f\u6700\u4f18\u7684\uff0c\u4e8e\u662f\u628a\u5173\u952e\u70b9\u6309\u8f6c\u6362\u540e\u7684\u5750\u6807\u6392\u5e8f\u540e\u53ef\u4ee5\u5f97\u51fa\u4e00\u4e2a $dp$ \uff0c\u8bbe $dp_{i,j}$ \u8868\u793a\u5904\u7406\u5230 $(i,j)$ \u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u6709\u8f6c\u79fb:\r\n$$\r\ndp_{i,j}=\\min\\limits_{b\\in[j-|i-a|,j+|i-a|]} dp_{a,b} + \\sum\\limits_{(x,y),x=i}|y-j|\r\n$$\r\n\u8fd9\u4e2a $\\min$ \u4e0b\u9762\u7684\u9650\u5236\u610f\u601d\u662f\u4ece $(a,b)$ \u53ef\u4ee5\u8d70\u5230 $(i,j)$\u3002\r\n\r\n\u5b9a\u4e49 $|x|$ \u4e3a\u503c\u57df\u5927\u5c0f\uff0c\u8fd9\u4e2a $dp$ \u7684\u590d\u6742\u5ea6\u662f $\\mathrm O(n|x|)$ \uff0c\u4e8e\u662f\u6211\u4eec\u8981\u91c7\u7528\u4e00\u79cd\u795e\u5947\u7684\u64cd\u4f5c\u628a\u590d\u6742\u5ea6\u53d8\u6210 $\\mathrm O(n\\log n)$ \uff0c\u8fd9\u4e2a\u64cd\u4f5c\u88ab\u53eb\u505a [`slope trick`](https://codeforces.com/blog/entry/47821) \uff0c\u53ef\u4ee5\u4e0a $\\texttt{CF}$ \u5b66\u4e60\u3002\r\n\r\n\u5bf9\u4e8e\u6b64\u9898\u6765\u8bf4\uff0c\u6211\u4eec\u628a $dp_{i,[]}$ \u770b\u505a\u4e00\u4e2a\u51fd\u6570 $dp_i(x)$ \uff0c\u628a $dp_{a,[]}$ \u4e5f\u770b\u6210\u4e00\u4e2a\u51fd\u6570 $g_a(x)$ \uff0c$dp$ \u65b9\u7a0b\u5c31\u53ef\u4ee5\u5199\u6210 $dp_i(x)=\\min\\limits_{b\\in[j-|i-a|,j+|i-a|]}g_a(x) + |x-y_i|$ \u7684\u5f62\u5f0f\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8f6c\u79fb\u6765\u8bf4\uff0c$y_i$ \u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5e38\u6570\uff0c\u76f8\u5f53\u4e8e\u662f\u5c06\u4e00\u4e2a\u533a\u95f4 $\\min$ \u51fd\u6570\u4e0e\u4e00\u4e2a\u7edd\u5bf9\u503c\u51fd\u6570\u5408\u5e76\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u51fd\u6570 $dp_i(x)$ \u3002\r\n\r\n\u89c2\u5bdf\u8fd9\u4e9b\u51fd\u6570\u7684\u6027\u8d28\uff0c\u53d1\u73b0 $|x-y_i|$ \u662f\u4e00\u4e2a\u51f8\u51fd\u6570\uff0c\u53ea\u6709\u4e00\u4e2a\u8f6c\u6298\u70b9 $x=y_i$ \uff0c\u800c $g(x),dp(x)$ \uff0c\u90fd\u662f\u7531\u4e00\u8fde\u4e32\u7684 $|x-y_j|$ \u5408\u5e76\u800c\u6765\u7684\uff0c\u662f\u4e00\u4e2a\u5206\u6bb5\u51fd\u6570\uff0c\u6709\u4e00\u4e9b\u8f6c\u6298\u70b9\uff0c\u4e14\u4e5f\u662f\u4e00\u4e2a\u51f8\u51fd\u6570\uff08\u659c\u7387\u9012\u589e\uff09\uff0c\u8fd9\u9898\u8981\u6c42\u6211\u4eec\u505a\u4e24\u79cd\u64cd\u4f5c\uff1a1.\u5728 $[l,r]$ \u4e2d\u627e\u5230\u6700\u5c0f\u503c\u3002 2.\u5408\u5e76\u4e24\u4e2a\u51f8\u51fd\u6570\u3002 \r\n\r\n\u6700\u5c0f\u503c\u663e\u7136\u4f1a\u5728\u659c\u7387\u7b49\u4e8e $0$ \u5904\u53d6\u5f97\uff0c\u4f46\u8fd9\u4e2a\u4f4d\u7f6e\u4e0d\u4e00\u5b9a\u6ee1\u8db3\u5728 $[l,r]$ \u4e2d\uff0c\u4e8e\u662f\u6211\u4eec\u7528\u4e00\u4e2a\u5927\u6839\u5806 $L$ \u6765\u7ef4\u62a4\u8fd9\u4e2a\u5206\u6bb5\u51fd\u6570\u659c\u7387\u5c0f\u4e8e $0$ \u7684\u90a3\u4e00\u6bb5\u7684\u6bcf\u4e2a\u8f6c\u6298\u70b9\uff0c\u6bcf\u4e2a\u8f6c\u6298\u70b9\u8868\u793a\u6211\u4eec\u7684\u51fd\u6570\u5728\u8fd9\u4e2a\u8f6c\u6298\u70b9\u5904\u659c\u7387\u52a0 $1$ \uff0c\u6240\u4ee5\u82e5\u659c\u7387\u5728\u4e00\u4e2a\u8f6c\u6298\u70b9 $u$ \u5904 $+x$ \u5219\u5728\u4f18\u5148\u961f\u5217\u4e2d\u653e $x$ \u4e2a\u8f6c\u6298\u70b9 $u$ \uff0c\u7c7b\u4f3c\u7684\uff0c\u7528\u4e00\u4e2a\u5c0f\u6839\u5806 $R$ \u6765\u7ef4\u62a4\u5206\u6bb5\u51fd\u6570\u659c\u7387\u5927\u4e8e $0$ \u7684\u6bcf\u4e2a\u8f6c\u6298\u70b9\u3002\r\n\r\n\u5229\u7528\u4e00\u70b9\u521d\u4e2d\u6570\u5b66\u77e5\u8bc6\uff0c\u6bcf\u6b21\u82e5 $r\\le L$ \u5219\u6700\u5c0f\u503c\u5728 $L$ \u5904\u53d6\u5f97\uff0c\u82e5 $l \\ge R$ \u5219\u6700\u5c0f\u503c\u5728 $R$ \u5904\u53d6\u5f97\uff0c\u82e5\u5728 $[L,R]$ \uff0c\u5219\u76f4\u63a5\u53d6\u6700\u5c0f\u503c\u3002\r\n\r\n\u8fd8\u8981\u6c42\u5408\u5e76\u4e00\u4e2a\u51fd\u6570 $|x-y_i|$ \uff0c\u76f8\u5f53\u4e8e\u662f\u4e0e\u4e00\u4e2a\u8f6c\u6298\u70b9\u96c6\u5408 $s=\\{y_i,y_i\\}$ \u53d6\u5e76\uff0c\u50cf\u4e0a\u9762\u4e00\u6837\u8ba8\u8bba\u4e00\u4e0b\u65b0\u8f6c\u6298\u70b9\u8be5\u653e\u5728\u54ea\u8fb9\uff0c\u8fd8\u6709\u4e00\u4e9b\u65e7\u7684\u8f6c\u6298\u70b9\u56e0\u4e3a\u589e\u6dfb\u4e86\u65b0\u8f6c\u6298\u70b9\u659c\u7387\u53d1\u751f\u4e86\u66f4\u6539\uff0c\u6240\u4ee5\u5206\u7c7b\u8ba8\u8bba\u628a $L$ \u7684\u6700\u5927\u503c\u79fb\u52a8\u5230 $R$ \u6216 $R$ \u7684\u6700\u5c0f\u503c\u79fb\u52a8\u5230 $L$ \u3002\r\n\r\n\u8fd8\u6709\u4e00\u9053\u4e0e\u8fd9\u9898\u7c7b\u4f3c\u7684 `slope trick` \u4f18\u5316 $dp$ \u7684[\u9898](https://www.luogu.com.cn/problem/CF713C) \uff0c\u53ef\u4ee5\u53bb\u505a\u4e00\u505a\u3002\r\n\r\n",
        "postTime": 1630823755,
        "uid": 400028,
        "name": "Odalys",
        "ccfLevel": 0,
        "title": "CF1534G"
    },
    {
        "content": "\u4e00\u79cd\u53eb $\\mathrm{slope\\ trick}$ \u7684\u505a\u6cd5\u3002\n\n\n\u5148\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u7684\u4e8b\u5b9e\uff0c\u4e00\u4e2a\u70b9\u5230\u4e00\u6761\u8def\u5f84\u7684\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u6700\u5c0f\u80af\u5b9a\u662f\u7ecf\u8fc7\u8fd9\u4e2a\u70b9\u7684\u659c\u7387\u4e3a $-1$ \u7684\u76f4\u7ebf\u4e0e\u8def\u5f84\u7684\u4ea4\u70b9\u95f4\u7684\u8ddd\u79bb\u3002\u8fd9\u4e2a\u6027\u8d28\u8fc7\u4e8e\u663e\u7136\uff0c\u5c31\u4e0d\u8bc1\u4e86\u3002\n\n\u6709\u8fd9\u6837\u7684\u4e8b\u5b9e\u540e\uff0c\u8003\u8651\u5c06\u70b9\u4ee5 $x+y$ \u4e3a\u5e8f\u6392\u5217\u597d\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u4e00\u6761\u8def\u5f84\u603b\u4f1a\u6309\u5e8f\u7ecf\u8fc7\u6bcf\u4e2a\u70b9\u6240\u5728\u7684\u659c\u7387\u4e3a $-1$ \u7684\u76f4\u7ebf\u3002\u4e8e\u662f\u505a\u4e00\u4e2a\u66b4\u529b\u7684 dp\uff0c\u5373\u8bbe $f_{i,x}$ \u4e3a\u5f53\u524d dp\u5230\u7b2c $i$ \u4e2a\u70b9\uff0c\u5f53\u524d\u6a2a\u5750\u6807\u4e3a $x$ \u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u8f6c\u79fb\u5f0f\u5bb9\u6613\u5199\u51fa $f_{i,x}=|x-x_i|+\\min_{x'\\in [x-(x_i+y_i-x_{i-1}-y_{i-1}),x]}f_{i-1,x'}$\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651 $f_i$  \u4ee5\u7b2c\u4e8c\u7ef4\u4f5c\u4e3a\u6a2a\u5750\u6807\u65f6\u7684\u56fe\u50cf\u3002\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5df2\u77e5 $f(x)$ \u4e3a\u5b9a\u4e49\u57df\u4e3a $R$ \u4e14\u8fde\u7eed\u7684\u51fd\u6570\uff0c\u4ee4 $g(x)=\\min_{x'\\in [x-x_0,x+x_0]} f(x')$\uff0c\u5176\u4e2d $x_0$ \u4e3a\u4e00\u5b9a\u503c\uff0c\u5219 $g(x)$ \u4e3a\u8fde\u7eed\u51fd\u6570\u3002\u8fd9\u4e2a\u8bc1\u660e\u7701\u7565\uff0c\u611f\u5174\u8da3\u53ef\u4ee5\u54a8\u8be2\u7b14\u8005 QQ\u3002\u53c8\u56e0\u4e3a $|x-x_i|$\u662f\u4e0b\u51f8\u51fd\u6570\uff0c\u800c\u4e0b\u51f8\u51fd\u6570\u4e0e\u4e0b\u51f8\u51fd\u6570\u7684\u548c\u8fd8\u662f\u4e0b\u51f8\u51fd\u6570\uff08\u56e0\u4e3a $(f''(x)<0)+(g''(x)<0)<0)$\uff09\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f52\u7eb3\u8bc1\u660e $f_i$ \u4e5f\u4e3a\u4e0b\u51f8\u51fd\u6570\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u7ef4\u62a4\u8fd9\u4e2a\u4e0b\u51f8\u58f3\u3002\u53d6 $\\min$ \u64cd\u4f5c\u7b49\u4e8e\u5c06 $f_i$ \u7684\u6700\u4f4e\u70b9\u5411\u53f3\u62c9\u957f $x_i+y_i-x_{i-1}-y_{i-1}$ \u7684\u8ddd\u79bb\uff0c\u53f3\u90e8\u5206\u540c\u65f6\u5e73\u79fb\uff0c\u5176\u4f59\u4e0d\u53d8\u3002\u81f3\u4e8e\u52a0\u5165\u4e00\u4e2a $|x-x_i|$ \u6211\u4eec\u53ef\u4ee5\u505a\u8fd9\u6837\u4e00\u4ef6\u4e8b\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6709\u5e8f\u53ef\u91cd\u96c6\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5f53\u524d\u51f8\u58f3\u5728\u6b64\u5904\u659c\u7387\u51cf\u5c11\u4e86 $1$\u3002\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u7ef4\u62a4\u8fd9\u4e2a\u53ef\u91cd\u96c6\uff0c\u5c31\u53ef\u4ee5\u7ef4\u62a4\u597d $|x-x_i|$ \u4e86\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u4e0a\uff0c\u6211\u4eec\u6bcf\u6b21\u52a0\u5165\u4e00\u4e2a\u70b9\u5206\u4e09\u7c7b\u8ba8\u8bba\uff0c\u82e5\u5f53\u524d $x_i$ \u5728\u6700\u4f4e\u70b9\u5de6\u8fb9/\u6700\u4f4e\u70b9/\u6700\u4f4e\u70b9\u53f3\u8fb9\u3002\u5728\u5176\u5de6\u65f6\uff0c$x_i$ \u7684\u5de6\u8fb9\u659c\u7387\u90fd\u51cf\u4e00\uff0c\u800c\u53f3\u8fb9\u90fd\u52a0\u4e00\uff0c\u7b49\u4e8e\u5728 $x_i$ \u7684\u4f4d\u7f6e\u51cf\u5c11\u4e86 $2$\uff0c\u6240\u4ee5\u6211\u4eec\u671d\u5de6\u90e8\u5206\u53ef\u91cd\u96c6\u52a0\u5165\u4e24\u4e2a $x_i$\uff0c\u540c\u65f6\u6700\u5de6\u8fb9\u7684\u6700\u4f4e\u70b9\u6b64\u65f6\u5df2\u7ecf\u4e0d\u518d\u662f\u6700\u4f4e\u70b9\uff0c\u6240\u4ee5\u5c06\u5176\u653e\u5165\u53f3\u90e8\u5206\u53ef\u91cd\u96c6\u91cc\u3002\u653e\u5165\u53f3\u90e8\u5206\u53ef\u91cd\u96c6\u65f6\u8981\u6ce8\u610f\u6211\u4eec\u6253\u4e86\u5168\u5c40\u7684\u53f3\u90e8\u5206\u5e73\u79fb\u91cf\u6807\u8bb0\uff0c\u53ef\u4ee5\u653e\u5165\u524d\u8981\u5148\u51cf\u53bb\u6b64\u6807\u8bb0\uff0c\u4e0d\u7136\u62ff\u51fa\u6765\u65f6\u5c31\u4e0d\u662f\u771f\u5b9e\u503c\u4e86\u3002\u5176\u4f59\u60c5\u51b5\u540c\u7406\u7ef4\u62a4\u4e00\u4e0b\u3002\u6b64\u65f6 $i$ \u7684\u8d21\u732e\u5c31\u662f\u79bb\u5b83\u6700\u8fd1\u7684\u6700\u4f4e\u70b9\u7684\u8d21\u732e\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n\n\n```cpp\n//2021.7.10 by ljz\n//email 573902690@qq.com\n//if you find any bug in my code\n//please tell me\nconst int N=8e5+10;\nnamespace MAIN{\n    int n;\n    Pair a[N];\n    LL ans;\n    priority_queue<int> L;\n    priority_queue<int,vector<int>,greater<int> > R;\n    inline void MAIN(){\n        n=read();\n        for(res i=1;i<=n;i++){\n            res x=read(),y=read();\n            a[i].fi=x+y,a[i].se=x;\n        }\n        sort(a+1,a+n+1),L.push(a[1].se),R.push(a[1].se);\n        res tagr=0;\n        for(res i=2;i<=n;i++){\n            tagr+=a[i].fi-a[i-1].fi;\n            res l=L.top(),r=R.top()+tagr,x=a[i].se;\n            if(x<l)L.pop(),R.push(l-tagr),L.push(x),L.push(x),ans+=l-x;\n            if(x>r)R.pop(),L.push(r),R.push(x-tagr),R.push(x-tagr),ans+=x-r;\n            if(l<=x&&x<=r)L.push(x),R.push(x-tagr);\n        }\n        printf(\"%lld\\n\",ans);\n    }\n}\n```\n",
        "postTime": 1630846568,
        "uid": 32878,
        "name": "foreverlasting",
        "ccfLevel": 7,
        "title": "CF1534G"
    },
    {
        "content": "\u8fd9\u7bc7\u8865\u5168\u4e86 @[Odalys\n](https://www.luogu.com.cn/user/400028)\u7684\u8bdd\uff0c\u7ed3\u5408\u7740\u4ed6\u7684\u9898\u89e3\u770b\u3002\n\n\u5728\u6c42 $(x,y)$ \u7684\u65f6\u5019\uff0c\u4e0d\u5149\u8981\u7b97 $(x+y,x-y)$\uff0c\u8fd8\u8981\u7b97 $(x-y,x+y)$ \u5224\u65ad\u7b2c\u4e00\u4e2a\u6570\u662f\u5426\u5927\u4e8e\u7b2c\u4e8c\u4e2a\uff0c\u5982\u679c\u4e0d\u5927\u4e8e\uff0cAns \u8981\u9664\u4ee5\u4e8c\u518d\u52a0\u4e00\uff0c\u518d\u8bbe\u4e00\u4e2a $f=1$\uff0c\u78b0\u5230\u8fd9\u65f6\u8ba9 $f=0$\uff0c\u5df2\u6807\u8bb0\u6709\u8fc7\u8d85\u51fa\u8303\u56f4\u7684\u60c5\u51b5\uff0c\u6765\u786e\u5b9a\u6700\u540e\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u6d4b\u8bd5\u70b9\u6b63\u597d\u6ca1\u6709\u8fd9\u4e2a\u7279\u6b8a\u60c5\u51b5\uff0c\u624d\u80fd\u8fc7\u3002\n\n\u4ee3\u7801\u628a $f$ \u52a0\u5728\u4ed6\u7684\u4ee3\u7801\u91cc\u5c31\u884c\u4e86\u3002",
        "postTime": 1631876732,
        "uid": 481337,
        "name": "Farewell_Bye",
        "ccfLevel": 0,
        "title": "CF1534G A New Beginning \u9898\u89e3"
    },
    {
        "content": "\u88ab @E_Huan \u7684\u9898\u89e3\u540e\u534a\u90e8\u5206\u8bef\u5bfc\u4e86\uff0c\u4e0d\u8fc7\u8fd8\u662f\u611f\u8c22\u3002\n\n\u8fd9\u91cc\u63d0\u4f9b\u4e00\u7bc7\u53ef\u8bfb\u6027\u66f4\u5f3a\u7684\u9898\u89e3\u3002\n\n\n## \u89c2\u5bdf\n\n\u9996\u5148\u6211\u4eec\u6bd4\u8f83\u597d\u5947\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u5bf9\u4e8e\u4e00\u6761\u5f2f\u5f2f\u66f2\u66f2\u7684\u659c\u5411\u53f3\u4e0a\u65e0\u7a77\u5ef6\u4f38\u7684\u8def\u5f84\uff0c\u4e00\u4e2a\u571f\u8c46\u4f1a\u9009\u62e9\u5728\u54ea\u4e2a\u70b9\u65f6\u64ad\u79cd\u5462\uff1f\n\n\u8fd9\u81ea\u7136\u9700\u8981\u6211\u4eec\u8003\u5bdf\u4e00\u4e2a\u571f\u8c46\u7684\u201c\u7b49\u5207\u6bd4\u96ea\u592b\u7ebf\u201d\uff0c\u5f62\u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ivx342i5.png)\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e00\u5b9a\u662f\u201c\u5c16\u7aef\u201d\u6700\u5148\u89e6\u78b0\u5230\u8def\u5f84\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53d6\u5230\u6700\u77ed\u4ee3\u4ef7\u7684\u8def\u5f84\u4e0a\u7684\u70b9\u4e00\u5b9a\u662f\u8fd9\u4e2a\u571f\u8c46\u7684\u4e00\u4e2a\u201c\u5c16\u7aef\u201d\uff08\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u5730\u65b9\uff0c\u4f46\u662f\u6362\u6210\u53d6\u201c\u5c16\u7aef\u201d\u4e00\u5b9a\u4e0d\u52a3\uff09\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ea\u9700\u8981\u8003\u5bdf\u201c\u5c16\u7aef\u201d\u7684\u8f68\u8ff9\uff0c\u53d1\u73b0\u662f\u4e00\u6761\u76f4\u7ebf\uff1a$l_i:x+y=x_i+y_i$\u3002\u4e8e\u662f\uff0c$l_i$ \u4e0e\u8def\u5f84\u7684\u4ea4\u70b9\u5373\u662f\u6700\u4f18\u64ad\u79cd\u4f4d\u7f6e\u3002\n\n\u73b0\u5728\u5e73\u9762\u4e0a\u6709\u82e5\u5e72\u6761\u5f62\u5982 $x+y=C$ \u7684\u7ebf\uff0c\u6bcf\u6761\u7ebf\u4e0a\u6709\u4e00\u4e9b\u571f\u8c46\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u54b1\u4eec\u7684\u8def\u5f84\u5728\u6bcf\u6761\u7ebf\u4e0a\u7ecf\u8fc7\u7684\u90a3\u4e2a\u70b9\u5728\u54ea\u513f\u3002\n\n## \u521d\u6b65 DP\n\n\u4e8e\u662f DP\u3002\u9884\u5148\u628a\u571f\u8c46\u6309\u7167\u6240\u5728\u7ebf\u7684 $C$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\u8bbe $f_i(x)$ \u8868\u793a\u8003\u8651\u4e86\u524d $i$ \u53f7\u571f\u8c46\uff0c**\u5728\u7b2c $i$ \u53f7\u571f\u8c46\u7684\u7ebf\u4e0a\u6211\u4eec\u7ecf\u8fc7\u7684\u662f $(x,C-x)$ \u8fd9\u4e2a\u70b9**\uff0c\u76ee\u524d\u4e3a\u6b62\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u8f6c\u79fb\uff1a\n$$f_i(x)=|x-x_i|+\\min_{x'\\in[x-(x_i+y_i)+(x_{i-1}+y_{i-1})]}f_{i-1}(x')$$\n\n\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u53ea\u80fd\u5411\u53f3\u3001\u4e0a\u8d70\uff0c\u6240\u4ee5\u53ef\u4ee5\u63a8\u51fa\u4e0a\u4e00\u6761\u7ebf\u65f6\u6211\u4eec\u7684\u843d\u811a\u70b9\u6a2a\u5750\u6807\u7684\u8303\u56f4\u3002\n\n## DP \u4f18\u5316\n\u6ce8\u610f\u5230\u7edd\u5bf9\u503c\u51fd\u6570\u7684\u4e0b\u51f8\u6027\uff0c\u6211\u4eec\u8003\u5bdf $f_i(x)$ \u7684\u51f8\u6027\u3002\n\n$\\min_{x'\\in[x-(x_i+y_i)+(x_{i-1}+y_{i-1})]}f_{i-1}(x')$ \u5982\u679c\u770b\u6210\u5173\u4e8e $x$ \u7684\u51fd\u6570\u90a3\u4e48\u5b83\u76f8\u5bf9\u4e8e $f_{i-1}(x)$ \u7684\u5173\u7cfb\u662f\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0tce00kr.png)\n\n\u800c\u4e00\u4e2a\u4e0b\u51f8\u51fd\u6570\u52a0\u4e0a\u4e00\u4e2a\u7edd\u5bf9\u503c\u51fd\u6570 $g(x)=|x-x_i|$ \u8fd8\u662f\u4e0b\u51f8\u7684\u3002\n\n## \u6570\u636e\u7ed3\u6784\u7ef4\u62a4\n\u73b0\u5728\u6211\u4eec\u8981\u9009\u7528\u5408\u9002\u7684\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u51fd\u6570\uff0c\u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n1. \u5c06\u6700\u5c0f\u503c\u5e73\u53f0\u5411\u53f3\u62c9\u957f $L$\n2. \u52a0\u4e00\u4e2a\u7edd\u5bf9\u503c\u51fd\u6570 $|x-x_0|$\n\n\u4e00\u4e2a\u7ecf\u5178\u505a\u6cd5\u662f\u7528\u4e24\u4e2a\u4f18\u5148\u961f\u5217\u6765\u6a21\u62df\u6700\u5c0f\u503c\u70b9\u7684\u79fb\u52a8\u3002  \n\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4ee4\u6700\u5c0f\u503c\u70b9\u4e3a\u6700\u5c0f\u503c\u5e73\u53f0\u4e0a\u6700\u9760\u5de6\u7684\u70b9\uff0c\u4e00\u4e2a\u4f18\u5148\u961f\u5217 $L$ \u7ef4\u62a4\u6700\u5c0f\u503c\u70b9\u5de6\u4fa7\u7684\u90e8\u5206\uff0c$R$ \u7ef4\u62a4\u6700\u5c0f\u503c\u70b9\u53f3\u4fa7\u7684\u90e8\u5206\uff0c$L,R$ \u4e2d\u5404\u5b58\u50a8\u82e5\u5e72\u4e2a\u6a2a\u5750\u6807\uff0c\u8868\u793a\u7684\u662f\u4e00\u4e2a**\u4ece\u4e2d\u95f4\u5230\u4e24\u4fa7**\u7684**\u659c\u7387\u5dee\u5206\u6570\u7ec4**\uff0c\u4f8b\u5982 $L$ \u5185\u6709 $p$ \u4e2a\u5143\u7d20 $x$ \u5c31\u8868\u793a $x-1\\sim x$ \u8fd9\u4e00\u6bb5\u7684\u659c\u7387\u6bd4 $x\\sim x+1$ \u7684\u5c0f\u4e86 $p$\uff0c\u7279\u522b\u5730\uff0c\u5982\u679c $x$ \u662f\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u90a3\u4e48\u8868\u793a\u8fd9\u4e00\u6bb5\u659c\u7387\u4e3a $-p$\u3002$R$ \u5185\u540c\u7406\u3002\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u8ba8\u8bba\u7edd\u5bf9\u503c\u51fd\u6570\u7684\u96f6\u70b9 $x_0$ \u5173\u4e8e\u6700\u5c0f\u503c\u70b9\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff08\u628a $y=|x-x_0|$ \u770b\u6210 $y_1=x-x_0(x\\in R)$ \u548c $y_2=-2(x-x_0)(x\\le x_0)$ \u76f8\u52a0\uff09\uff1a\n- \u82e5\u5728\u5de6\u4fa7\uff0c\u5219\u7528\u5dee\u5206\u7684\u601d\u60f3\u628a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u7684\u5dee\u5206\u503c $-1$\uff0c\u76f8\u5f53\u4e8e `L.pop()`\uff0c\u540c\u65f6 $R$ \u4e2d\u6240\u6709\u659c\u7387 $+1$\uff0c\u56e0\u6b64 `R.push(...)`\uff1b\u6b64\u5916\uff0c$y_2$ \u7684\u5f71\u54cd\u662f $2$ \u6b21 `L.push(x0)`\u3002\n- \u82e5\u5728\u53f3\u4fa7\uff0c\u5219\u540c\u7406\u3002\n- \u82e5\u6070\u597d\u662f\u6700\u5c0f\u503c\u70b9\uff0c\u53ea\u9700 $L,R$ \u90fd\u6dfb\u52a0 $x_0$\u3002\n\n\u600e\u4e48\u7ef4\u62a4\u64cd\u4f5c 1 \u5462\uff1f\u8fd9\u8981\u6c42\u5c06 $R$ \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u589e\u52a0 $L$\uff0c\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a $R$ \u5185\u5143\u7d20\u6574\u4f53\u7684\u589e\u91cf\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint x=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9')ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn x;\n}\ntypedef long long ll;\nconst int N=8e5+5;\nint n;\nstruct poi{\n\tint x,y;\n}a[N];\npriority_queue<int>L;\npriority_queue<int,vector<int>,greater<int> >R;\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++)a[i].x=read(),a[i].y=read();\n\tsort(a+1,a+n+1,[](poi a,poi b){return a.x+a.y<b.x+b.y;});\n\tll mn=0;\n\tL.push(a[1].x),R.push(a[1].x);\n\tint pingyiR=0;\n\tfor(int i=2;i<=n;i++){\n\t\tpingyiR+=(a[i].x+a[i].y)-(a[i-1].x+a[i-1].y);\n\t\tint l=L.top(),r=R.top()+pingyiR;\n\t\tif(a[i].x<l){\n\t\t\tL.pop(),R.push(l-pingyiR);\n\t\t\tL.push(a[i].x),L.push(a[i].x);\n\t\t\tmn+=l-a[i].x;\n\t\t}\n\t\telse if(a[i].x>r){\n\t\t\tR.pop(),L.push(r);\n\t\t\tR.push(a[i].x-pingyiR),R.push(a[i].x-pingyiR);\n\t\t\tmn+=a[i].x-r;\n\t\t}\n\t\telse {\n\t\t\tL.push(a[i].x),R.push(a[i].x-pingyiR);\n\t\t}\n\t}\n\tcout<<mn<<'\\n';\n} \n```",
        "postTime": 1681998128,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "A New Beginning"
    },
    {
        "content": "\u4e0d\u96be\u53d1\u73b0\uff1a\u603b\u5b58\u5728\u4e00\u79cd\u6700\u4f18\u65b9\u6848\u4f7f\u5f97\u6bcf\u4e00\u4e2a\u571f\u8c46\u90fd\u5728 $|X-x|=|Y-y|$ \u7684\u65f6\u5019\u53d1\u51fa\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u571f\u8c46\u90fd\u6709\u4e00\u4e2a $\\times$ \u5f62\u72b6\u7684\u89e6\u53d1\u533a\u95f4\uff0c\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u53ea\u8981\u4fdd\u7559\u5f62\u5982 `\\` \u7684\uff0c\u5f62\u5982 `/` \u603b\u4f1a\u52a3\u4e8e\u524d\u8005\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5728\u7ecf\u8fc7\u6bcf\u4e2a\u571f\u8c46\u7684 $y=-x+b$ \u8fd9\u6761\u76f4\u7ebf\u4e0a\u8fdb\u884c\u8d21\u732e\u8ba1\u7b97\u5c31\u884c\u4e86\u3002\n\n\u73b0\u5728\u6211\u4eec\u5bf9\u4e8e\u571f\u8c46\u6309 $x+y$ \u8fdb\u884c\u5206\u5c42\u3002\u53ef\u4ee5\u5bf9\u4e8e\u6309\u5c42\u8fdb\u884c\u4e00\u4e2a $dp$\uff0c\u6211\u4eec\u8bbe $dp_{i,j}$ \u8868\u793a\u8d70\u5230 $(j,i-j)$ \uff08\u5373\u7b2c $i$ \u5c42 $x=j$ \u7684\u4f4d\u7f6e\uff09\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u5176\u5b9e\u53ef\u4ee5\u628a\u7b2c $i$ \u5c42\u7684 $dp$ \u6570\u7ec4\u770b\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7ecf\u8fc7 $(j,dp_{i,j})$\uff0c\u6211\u4eec\u505a $dp$ \u8f6c\u79fb\u5b9e\u9645\u4e0a\u5c31\u662f\u51fd\u6570\u503c\u7684\u53d8\u52a8\u3002\n\n\u6211\u4eec\u8003\u8651\u4e00\u4e0b $dp_{i}$ \u8fd9\u4e2a\u51fd\u6570\u5230 $dp_{k}$ \u65f6\u4ea7\u751f\u7684\u53d8\u5316\uff0c\u5176\u4e2d $i,k$ \u662f\u4e24\u4e2a\u76f8\u90bb\u7684\u6709\u571f\u8c46\u7684\u5c42\u3002\n\n\u8fd9\u4e2a\u53d8\u5316\u5206\u4e24\u6b65\uff1a\n\n1. \u9996\u5148\u7b2c $k$ \u5c42\u662f\u7531\u7b2c $i$ \u5c42\u7684\u67d0\u4e9b\u4f4d\u7f6e\u8f6c\u79fb\u8fc7\u6765\u7684\u3002\n\n$$dp_{k,j}= \\min_{t=0}^{k-i} dp_{i,j-t}$$\n\n\u6ce8\u610f\u8fd9\u91cc\u8f6c\u79fb\u8981\u6c42 $j-t$ \u662f\u4e00\u4e2a\u5408\u6cd5\u7684\u4f4d\u7f6e\u3002\n\n2. \u7136\u540e\u6211\u4eec\u518d\u7ed9 $dp_{k}$ \u7684\u6bcf\u4e2a\u4f4d\u7f6e\u52a0\u4e0a\u8fd9\u4e00\u5c42\u53d1\u5c04\u571f\u8c46\u7684\u4ee3\u4ef7\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u4e2a\u4ee3\u4ef7\u51fd\u6570 $f_k(x)$ \u662f\u5173\u4e8e $x$ \u7684\u4e00\u4e2a\u51f8\u51fd\u6570\u3002\n\n\u6240\u4ee5\u8bf4\u6211\u4eec\u7684 $dp$ \u6570\u7ec4\u5728\u4efb\u610f\u65f6\u523b\u4e5f\u662f\u4e00\u4e2a\u51f8\u51fd\u6570\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b65\u4e2d\u6211\u4eec\u7684 $dp$ \u8f6c\u79fb\u5c31\u975e\u5e38\u597d\u5b8c\u6210\u3002\n\n\u6240\u4ee5\u7b97\u6cd5\u6d41\u7a0b\u662f\uff1a\n\n1. \u6211\u4eec\u627e\u5230\u51fd\u6570\u6700\u4f4e\u70b9 $x_0$\uff08\u5982\u679c\u5b58\u5728\u591a\u4e2a\u6700\u4f4e\u70b9\uff0c\u5373\u4e00\u6761\u659c\u7387\u4e3a $0$ \u7684\u7ebf\u6bb5\uff0c\u5219\u9009\u62e9\u6a2a\u5750\u6807\u5c3d\u53ef\u80fd\u5927\u7684\uff09\uff0c\u5c06\u5f53\u524d\u51f8\u51fd\u6570\u4ece\u8fd9\u4e2a\u6700\u4f4e\u70b9\u5207\u5f00\uff0c\u53f3\u534a\u90e8\u5206\u5411\u53f3\u5e73\u79fb $k-i$ \u683c\u3002\u4e2d\u95f4\u7f3a\u5931\u7684\u90e8\u5206\u8865\u6210\u51fd\u6570\u6700\u4f4e\u70b9\u7684\u503c\uff08\u5373 $dp_{k,x_0}$\uff09\u3002\n2. \u5c06\u51fd\u6570\u52a0\u4e0a\u53d1\u5c04\u571f\u8c46\u7684\u4ee3\u4ef7\u51fd\u6570 $f_k(x)$\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u76f4\u63a5\u7ef4\u62a4 $dp$ \u6570\u7ec4\u7684\u5bfc\u6570\uff08\u4e5f\u5c31\u662f\u659c\u7387\uff09\u7684\u5dee\u5206\uff0c\u8bb0\u5f55\u5728\u54ea\u4e9b $x$ \u659c\u7387\u6709\u589e\u52a0\uff0c\u589e\u52a0\u4e86\u591a\u5c11\u3002\u8bb0\u5f55\u7684\u8fd9\u4e9b\u5730\u65b9\u5c31\u662f\u51f8\u51fd\u6570\u7684\u6240\u6709\u201c\u51f8\u8d77\u201d\u7684\u4f4d\u7f6e\u3002\n\n\u81f3\u4e8e\u627e\u6700\u4f4e\u70b9\u53ef\u4ee5\u4e8c\u5206\u3002\n\n\u81f3\u4e8e\u52a0\u4e0a\u4ee3\u4ef7\u51fd\u6570\uff0c\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u4fee\u6539\uff0c\u56e0\u4e3a\u4ee3\u4ef7\u51fd\u6570\u4e5f\u662f\u51f8\u7684\uff0c\u4e14\u5b83\u7684\u6298\u7ebf\u6bb5\u4e0d\u4f1a\u8d85\u8fc7 $O(n)$ \u6bb5\u3002\n\n\u53d1\u73b0\u53ef\u4ee5\u7528\u4e2a splay \u7ef4\u62a4\u8fd9\u4e9b\u4fe1\u606f\u3002\n\n_\u7ec6\u8282\uff1a\u6bcf\u4e2a\u571f\u8c46\u6700\u591a\u65b0\u589e $1$ \u4e2a\u6298\u7ebf\u6bb5\uff0c\u6bcf\u6b21\u51fd\u6570\u5e73\u79fb\u6700\u591a\u589e\u52a0 $1$ \u4e2a\u6298\u7ebf\u6bb5\uff0c\u6545\u6700\u591a\u6709 $2n$ \u4e2a\u6298\u7ebf\u6bb5\uff0c\u8bb0\u5f97\u5f00\u4e24\u500d\u6570\u7ec4\u3002_\n\n```cpp\n#include <bits/stdc++.h>\n\n#define debug(...) ;//fprintf(stderr ,__VA_ARGS__)\n#define __FILE(x)\\\n\tfreopen(#x\".in\" ,\"r\" ,stdin);\\\n\tfreopen(#x\".out\" ,\"w\" ,stdout)\n#define LL long long\n\nconst int MX = (8e5 + 23) * 2;\nconst LL MOD = 998244353;\n\nint read(){\n\tchar k = getchar(); int x = 0;\n\twhile(k < '0' || k > '9') k = getchar();\n\twhile(k >= '0' && k <= '9') x = x * 10 + k - '0' ,k = getchar();\n\treturn x;\n}\n\nstruct POINT{\n\tint x ,y;\n\tbool operator <(const POINT& B)const{\n\t\treturn x + y == B.x + B.y ? x < B.x : x + y < B.x + B.y;\n\t}\n}A[MX];\n\nnamespace SPLAY{\n#define lch(x) ch[x][0]\n#define rch(x) ch[x][1]\n\tint ch[MX][2] ,fa[MX] ,root ,tot;\n\tint add[MX] ,key[MX] ,size[MX] ,cnt[MX];\n\tint get(int x){return x == rch(fa[x]);}\n\tint Nroot(int x){return get(x) || x == rch(fa[x]);}\n\tvoid pushup(int x){size[x] = size[lch(x)] + size[rch(x)] + cnt[x];}\n\tvoid doadd(int x ,int v){\n\t\tadd[x] += v ,key[x] += v;\n\t}\n\tvoid pushdown(int x){\n\t\tif(add[x]){\n\t\t\tif(lch(x)) doadd(lch(x) ,add[x]);\n\t\t\tif(rch(x)) doadd(rch(x) ,add[x]);\n\t\t\tadd[x] = 0;\n\t\t}\n\t}\n\tvoid rotate(int x){\n\t\tint f = fa[x] ,gf = fa[f] ,which = get(x) ,W = ch[x][!which];\n\t\tif(Nroot(f)) ch[gf][get(f)] = x;\n\t\tch[x][!which] = f ,ch[f][which] = W;\n\t\tif(W) fa[W] = f;\n\t\tfa[f] = x ,fa[x] = gf ,pushup(f) ,pushup(x);\n\t}\n\tint stk[MX] ,dep;\n\tvoid splay(int x ,int goal = 0){\n\t\tint f = x; stk[++dep] = f;\n\t\twhile(fa[f] != goal) stk[++dep] = f = fa[f];\n\t\twhile(dep) pushdown(stk[dep--]);\n\t\twhile((f = fa[x]) != goal){\n\t\t\tif(fa[f] != goal) rotate(get(x) == get(f) ? f : x);\n\t\t\trotate(x);\n\t\t}if(!goal) root = x;\n\t}\n\tvoid insert(int val ,int QWQWQ ){\n\t\tint x = root ,f = 0;\n\t\twhile(x && val != key[x]){\n\t\t\tpushdown(x);\n\t\t\tf = x ,x = ch[x][val > key[x]];\n\t\t}\n\t\tif(x && val == key[x]){\n\t\t\tcnt[x] += QWQWQ;\n\t\t\tsize[x] += QWQWQ;\n\t\t\treturn splay(x);\n\t\t}\n\t\tx = ++tot ,fa[x] = f;\n\t\tsize[x] = cnt[x] = QWQWQ ,key[x] = val;\n\t\tif(f) ch[f][val > key[f]] = x ,pushup(f);\n\t\treturn splay(x);\n\t}\n\tstd::pair<int ,int> lower_bound(int value){\n\t\t// \u7b2c\u4e00\u4e2a\u6570\u5b57\u8fd4\u56de\u7ed3\u70b9\u6807\u53f7\n\t\t// \u7b2c\u4e8c\u4e2a\u6570\u5b57\u8fd4\u56de\u659c\u7387\n\t\tint x = root ,sum = 0;\n\t\twhile(x){\n\t\t\tpushdown(x);\n\t\t\tif(lch(x) && sum + size[lch(x)] >= value) x = lch(x);\n\t\t\telse{\n\t\t\t\tsum += cnt[x] + (lch(x) ? size[lch(x)] : 0);\n\t\t\t\tif(sum >= value) return {x ,sum};\n\t\t\t\tx = rch(x);\n\t\t\t}\n\t\t}\n\t\tassert(0);\n\t\treturn {-1 ,-1};\n\t}\n\tint prev(int x){\n\t\tsplay(x);\n\t\tx = lch(x);\n\t\twhile(rch(x)){\n\t\t\tpushdown(x);\n\t\t\tx = rch(x);\n\t\t}\n\t\treturn x;\n\t}\n\tint next(int x){\n\t\tsplay(x);\n\t\tx = rch(x);\n\t\twhile(lch(x)){\n\t\t\tpushdown(x);\n\t\t\tx = lch(x);\n\t\t}\n\t\treturn x;\n\t}\n\tvoid output(int x){\n\t\tif(!x) return;\n\t\tpushdown(x);\n\t\toutput(lch(x));\n\t\tdebug(\"pos: %d delk = %d\\n\" ,key[x] ,cnt[x]);\n\t\toutput(rch(x));\n\t}\n}using namespace SPLAY;\n\nint main(){\n\tint n = read();\n\tconst int MXV = 1e9 + 1;\n\tfor(int i = 1 ,x ,y ; i <= n ; ++i){\n\t\tx = read() ,y = read();\n\t\tA[i] = (POINT){x ,y};\n\t\tif(x + y == 0){\n\t\t\t--i;\n\t\t\t--n;\n\t\t}\n\t}\n\n\tif(!n) return puts(\"0\") ,0;\n\t\n\tinsert(INT_MIN ,0);\n\n\tstd::vector<int> addition;\n\tstd::sort(A + 1 ,A + 1 + n);\n\n\tint minpos = 0 ,las = 0;\n\tfor(int i = 1 ,j  ; i <= n ; i = j){\n\t\tj = i;\n\t\taddition.clear();\n\t\twhile(j <= n && A[i].x + A[i].y == A[j].x + A[j].y){\n\t\t\taddition.push_back(A[j].x);\n\t\t\t++j;\n\t\t}\n\t\tif(i != 1){\n\t\t\tstd::pair<int ,int> tmp = lower_bound(i - 1);\n\t\t\tif(tmp.second == i - 1){\n\t\t\t\ttmp = lower_bound(i);\n\t\t\t\ttmp = {prev(tmp.first) ,i - 1};\n\t\t\t}\n\t\t\tminpos = lower_bound(i - 1).first;\n\t\t\tsplay(minpos);\n\t\t\t\n\t\t\tint kksk = prev(minpos);\n\t\t\tsplay(kksk) ,splay(minpos ,kksk);\n\t\t\tint del = A[i].x + A[i].y - las;\n\n\t\t\tint location = key[minpos];\n\t\t\tint psum = tmp.second - cnt[minpos];\n\t\t\tint k = psum - (i - 1);\n\n\t\t\tdoadd(minpos ,del);\n\t\t\tinsert(location ,-k);\n\t\t\tinsert(location + del ,k);\n\t\t}\n\t\tfor(auto k : addition){\n\t\t\tinsert(k ,2);\n\t\t}\n\t\tlas = A[i].x + A[i].y;\n\t}\n\t\n\tLL sum = 0;\n\tfor(int i = 1 ; i <= n ; ++i)\n\t\tsum += A[i].x;\n\tinsert(0 ,0);\n\tint cur = next(lower_bound(-1).first);\n\tlas = 0;\n\tint k = -n;\n\twhile(1){\n\t\tk += cnt[cur];\n\t\tif(k >= 0) break;\n\t\tint nxt = next(cur);\n\t\tsum += 1LL * k * (key[nxt] - key[cur]);\n\t\tcur = nxt;\n\t\t\n\t}\n\tprintf(\"%lld\\n\" ,sum);\n\treturn 0;\n}\n```",
        "postTime": 1624628940,
        "uid": 47863,
        "name": "Imakf",
        "ccfLevel": 0,
        "title": "CF1534G A New Beginning"
    }
]
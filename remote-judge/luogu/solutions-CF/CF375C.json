[
    {
        "content": "\u9996\u5148\u660e\u786e\u4e00\u4e0b\u7ffb\u8bd1\uff1a\n\nIt is guaranteed that the map has not more than 8 objects in total. Objects are bombs and treasures.\n\n\u610f\u601d\u662f\u5b9d\u85cf\u548c\u70b8\u5f39\u4e00\u5171\u4e0d\u8d85\u8fc78\u4e2a\uff0c\u4e0d\u662f\u6700\u591a\u53ea\u67098\u4e2a\u5b9d\u85cf\uff0c\u4e5f\u4e0d\u8981\u50cf\u6211\u4e00\u6837\u8bef\u4ee5\u4e3a\u70b8\u5f39\u53ea\u67091\u4e2a\u3002\u3002\u3002\n\n\u8fd9\u4e2a\u6570\u636e\u8303\u56f4\u63d0\u793a\u6211\u4eec\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u4e1c\u897f\u72b6\u538b\uff0c\u7528\u4e00\u4e2a01\u4e32\u8868\u793a\u5b9d\u85cf\u7684\u96c6\u5408\u3002\n\n\u90a3\u4e48\u70b8\u5f39\u600e\u4e48\u529e\uff1f\n\n\u53ef\u4ee5\u628a\u70b8\u5f39\u5f53\u6210\u4ef7\u503c\u4e3a-inf\u7684\u5b9d\u85cf\uff0c\u5c31\u80fd\u7edf\u4e00\u8d77\u6765\u4e86\uff0c\u5e76\u4e14\u6700\u7ec8\u627e\u51fa\u7684\u6700\u4f18\u89e3\u4e00\u5b9a\u4e0d\u4f1a\u628a\u8fd9\u79cd\u201c\u5b9d\u85cf\u201d\u7b97\u8fdb\u53bb\uff0c\u6240\u4ee5\u8fd9\u6837\u505a\u662f\u5bf9\u7684\u3002\n\n\u8003\u8651\u8bbe\u8ba1\u72b6\u6001\uff0c\u53ef\u4ee5\u8bbe$dp[x][y][S]$\u8868\u793a\u8d70\u5230\u7b2c$x$\u884c\u7b2c$y$\u5217\u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u5f53\u524d\u7684\u8def\u5f84\u628a$S$\u8fd9\u4e2a\u96c6\u5408\u7684\u7269\u54c1\u56f4\u8d77\u6765\u4e86\uff0c\u6700\u5c0f\u79fb\u52a8\u6b65\u6570\u662f\u591a\u5c11\u3002\n\n\u9884\u5904\u7406$sum[S]$\u8868\u793a$S$\u4e2d\u7684\u7269\u54c1\u7684\u603b\u4ef7\u503c\uff0c\u5c31\u53ef\u4ee5\u7528$sum[S]-dp[sx][sy][S]$\u6765\u66f4\u65b0\u7b54\u6848\u4e86\uff08$sx, sy$\u662f\u8d77\u70b9\u4f4d\u7f6e\uff09\n\n\u8f6c\u79fb\u7684\u8bdd\uff0c\u4e00\u79cd\u663e\u7136\u7684\u505a\u6cd5\u662f4\u4e2a\u65b9\u5411\u679a\u4e3e\u4e0b\u4e00\u6b65\u5f80\u54ea\u8d70\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u4e2a\u7269\u54c1\uff0c\u7528\u5c04\u7ebf\u6cd5\u68c0\u9a8c\u6709\u6ca1\u6709\u88ab\u56f4\u8d77\u6765\uff08\u5c04\u7ebf\u6cd5\u5c31\u662f\u8ba1\u7b97\u51e0\u4f55\u91cc\u7528\u6765\u5224\u65ad\u70b9\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u7684\u65b9\u6cd5\uff0c\u5177\u4f53\u770b\u4ee3\u7801\uff09\uff0c\u4ece\u800c\u5f97\u5230\u4e0b\u4e00\u6b65\u7684\u7269\u54c1\u96c6\u5408\uff0c\u5b9e\u73b0\u8f6c\u79fb\n\n\u4f46\u662f\u6211\u4eec\u9a6c\u4e0a\u5c31\u4f1a\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u8fd9\u4e2a\u72b6\u6001\u8f6c\u79fb\u662f\u6709\u73af\u7684\uff0c\u4eba\u4eec\u559c\u95fb\u4e50\u89c1\u7684\u201cfor\u4e00for\u5c31\u53ef\u4ee5\u4e86\u201d\u7684\u505a\u6cd5\u4e0d\u518d\u7ba1\u7528\u3002\n\n\u8fd9\u65f6\u6211\u4eec\u56de\u5230dp\u7684\u672c\u6e90\u6765\u60f3\u4e00\u60f3\uff1adp\u7a76\u7adf\u5728\u5e72\u561b\uff1f\n\nZHX\uff1a\u201cdp\u89e3\u51b3\u7684\u662f\u56fe\u8bba\u95ee\u9898\uff0c\u5f53\u8f6c\u79fb\u6709\u73af\u7684\u65f6\u5019\u8981\u8003\u8651\u7528\u56fe\u8bba\u7b97\u6cd5\u3002\u201d\n\n\u56e0\u6b64\u8fd9\u9053\u9898\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u7528bfs\u6765\u5b9e\u73b0\u8fd9\u4e2adp\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n\u8fd9\u6837\u7684\u601d\u60f3\u5728NOIP2014\u7684\u98de\u626c\u7684\u5c0f\u9e1f\u4e00\u9898\u4e2d\u4e5f\u9002\u7528\uff0c\u90a3\u9898\u867d\u7136\u662f\u4e00\u4e2adp\uff0c\u4f46\u662f\u5b8c\u5168\u53ef\u4ee5\u5f53\u6210\u6700\u77ed\u8def\u6765\u505a\uff08\u5f53\u7136\u4e86\u4e0d\u9700\u8981\u771f\u7684\u628a\u56fe\u5efa\u51fa\u6765\uff0c\u53ea\u8981\u7528\u7c7b\u4f3cspfa\u7684\u505a\u6cd5\u5373\u53ef\uff09\uff0c\u80fd\u7701\u53bb\u4e00\u4e9b\u9ebb\u70e6\u3002\n\n```cpp\n#include <cctype>\n#include <cstdio>\n#include <climits>\n#include <algorithm>\n#include <queue>\n\ntemplate <typename T> inline void read(T& t) {\n    int f = 0, c = getchar(); t = 0;\n    while (!isdigit(c)) f |= c == '-', c = getchar();\n    while (isdigit(c)) t = t * 10 + c - 48, c = getchar();\n    if (f) t = -t;\n}\ntemplate <typename T> inline bool chkMin(T& x, const T& y) { return y < x ? (x = y, true) : false; }\ntemplate <typename T> inline bool chkMax(T& x, const T& y) { return x < y ? (x = y, true) : false; }\n#ifdef WIN32\n#define LLIO \"%I64d\"\n#else\n#define LLIO \"%lld\"\n#endif\t// WIN32 long long\n#define rep(I, A, B) for (int I = (A); I <= (B); ++I)\n#define rrep(I, A, B) for (int I = (A); I >= (B); --I)\n#define erep(I, X) for (int I = head[X]; I; I = next[I])\n\n// inf\u4e0d\u7528\u8bbe\u592a\u5927\uff0c\u4e0d\u7136\u5c0f\u5fc3\u6ea2\u51fa\nconst int inf = 2e6 + 207;\nint dp[30][30][1 << 10];\nconst int dx[4] = {0, 0, 1, -1};\nconst int dy[4] = {1, -1, 0, 0};\nint gx[30], gy[30], val[30];\nint sum[1 << 10];\nchar G[30][30];\nint n, m, t;\nint sx, sy;\n\nstruct State {\n    int x, y, S;\n    State(int xx, int yy, int s)\n        : x(xx), y(yy), S(s) {}\n    State() : x(0), y(0), S(0) {}\n};\n\n// \u5224\u65ad\u4ece(x, y)\u8d70\u5230(nx, ny)\u65f6\u4f1a\u4e0d\u4f1a\u628a\u7b2ci\u4e2a\u7269\u54c1\u56f4\u8d77\u6765\ninline bool in(int x, int y, int nx, int ny, int i) {\n    if (nx == gx[i] && ny < gy[i]) if (x < nx) return 1;\n    if (x == gx[i] && y < gy[i]) if (x > nx) return 1;\n    return 0;\n}\n\ninline int bfs() {\n    std::queue<State> q;\n    q.push(State(sx, sy, 0));\n    int ans = 0;\n    rep(i, 1, n) rep(j, 1, m) rep(S, 0, (1 << t)) dp[i][j][S] = -1;\n    dp[sx][sy][0] = 0;\n    while (!q.empty()) {\n        State curr = q.front(); q.pop();\n        int x = curr.x, y = curr.y, S = curr.S;\n        // \u66f4\u65b0\u7b54\u6848\n        if (x == sx && y == sy)\n            chkMax(ans, sum[S] - dp[x][y][S]);\n        rep(i, 0, 3) {\n            int nx = x + dx[i], ny = y + dy[i];\n            if (nx < 1 || nx > n || ny < 1 || ny > m || (G[nx][ny] != '.' && G[nx][ny] != 'S')) continue;\n            int ns = S;\n            rep(j, 1, t) if (in(x, y, nx, ny, j)) ns ^= 1 << (j - 1);\n            if (dp[nx][ny][ns] == -1) {\n                dp[nx][ny][ns] = dp[x][y][S] + 1;\n                q.push(State(nx, ny, ns));\n            }\n        }\n    }\n    return ans;\n}\n\nint main() {\n    read(n); read(m);\n    rep(i, 1, n) scanf(\"%s\", G[i] + 1);\n    rep(i, 1, n) rep(j, 1, m) {\n        char c = G[i][j];\n        if (c == 'S') {\n            sx = i;\n            sy = j;\n        } else if (c != '#' && c != '.' && c != 'B') {\n            gx[c - 48] = i;\n            gy[c - 48] = j;\n            ++t;\n        }\n    }\n    rep(i, 1, t) read(val[i]);\n    rep(i, 1, n) rep(j, 1, m) {\n        char c = G[i][j];\n        if (c == 'B') {\n            gx[++t] = i;\n            gy[t] = j;\n            val[t] = -inf;\n        }\n    }\n    for (int S = 1; S < 1 << t; ++S) {\n        rep(i, 1, t) if (1 << (i - 1) & S)\n            sum[S] += val[i];\n    }\n    int ans = bfs();\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```",
        "postTime": 1539920907,
        "uid": 72071,
        "name": "GKxx",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF375C \u3010Circling Round Treasures\u3011"
    },
    {
        "content": "## CF375C\n\n### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u5f20\u5730\u56fe\uff0c\u91cc\u9762\u6709\u5b9d\u85cf (\u6570\u5b57)\uff0c\u70b8\u5f39 'B',\u969c\u788d\u7269 '#' \uff0c\u9700\u8981\u4ece\u8d77\u70b9\u51fa\u53d1\uff0c\u7ed5\u4e00\u5708\u56de\u5230\u8d77\u70b9\uff0c\u4e0d\u80fd\u628a\u70b8\u5f39\u7ed5\u5728\u8def\u5f84\u91cc\u9762\uff0c\u5f97\u5230\u7684\u4ef7\u503c\u65f6\u56f4\u4f4f\u7684\u5b9d\u85cf\u7684\u4ef7\u503c\u4e4b\u548c\u51cf\u53bb\u8d70\u7684\u8def\u5f84\u957f\u5ea6\u3002\u6700\u5927\u5316\u4ef7\u503c\u3002\n\n### \u601d\u8def\n\n\u6211\u4eec\u8003\u8651\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9\u662f\u5426\u5728\u4e00\u4e2a\u591a\u8fb9\u5f62\u5185\u3002\n\n\u6709\u4e00\u79cd\u6bd4\u8f83\u65b9\u4fbf\u7684\u65b9\u6cd5\uff1a\u4ece\u8fd9\u4e2a\u70b9\u5f15\u4e00\u6761\u5c04\u7ebf\uff0c\u5982\u679c\u4e0e\u591a\u8fb9\u5f62\u7684\u4ea4\u70b9\u4e3a\u5947\u6570\u4e2a\uff0c\u90a3\u4e48\u5b83\u5728\u591a\u8fb9\u5f62\u5185\u3002\n\n\u4f46\u662f\uff0c\u6709\u4e00\u79cd\u60c5\u51b5\u8003\u8651\u4e0d\u5230\uff1a\n\n![gbohgtci.png](https://image.blackwhitetony.com/2021/05/17/b0440f90e8c2c.png)\n\n\u61d2\u5f97\u81ea\u5df1\u753b\u4e86\uff0c\u7528\u4e00\u4e0b\u697c\u4e0a\u5946\u4f6c\u7684\u3002\n\n$A$ \u70b9\u663e\u7136\u5728\u5f62\u5185\uff0c\u4f46\u662f\u5224\u65ad\u51fa\u6765\u6709\u4e24\u4e2a\u4ea4\u70b9\u3002\n\n\u8fd9\u79cd\u60c5\u51b5\u6709\u70b9\u9ebb\u70e6\uff0c\u4f46\u5982\u679c\u80fd\u628a\u9760\u53f3\u7684\u90a3\u4e2a\u7ebf\u6bb5\u62fc\u8fc7\u6765\u5c31\u884c\u4e86\uff0c\u6211\u4eec\u53d1\u73b0\u5176\u5b9e\u53ea\u9700\u8981\u628a\u5355\u4f4d\u7ebf\u6bb5\u770b\u6210\u4e0a\u5f00\u4e0b\u95ed\u5c31\u53ef\u4ee5\u4e86\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u65b9\u5411\u53ea\u6709\u4e24\u4e2a\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8003\u8651 $\\text{dp}$ \uff0c$dp[i][j][s]$ \u8868\u793a\u8d70\u5230 $(i,j)$ \uff0c\u5f15\u4e00\u6761\u6c34\u5e73\u5411\u5de6\u7684\u5c04\u7ebf\u4e0e\u8def\u7ebf\u7684\u4ea4\u70b9\u6570\u4e3a\u5947\u6570\u7684\u70b9\u7684\u96c6\u5408\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u3002\n\n\u7b54\u6848\u662f\u679a\u4e3e\u8d77\u70b9\u7684\u6240\u6709\u72b6\u6001\uff0c\u603b\u70b9\u6743\u51cf\u53bb\u8def\u5f84\u957f\u5ea6\uff0c\u53d6\u6700\u5927\u503c\u3002\n\n\u5bf9\u4e8e\u70b8\u5f39\uff0c\u6211\u4eec\u8ba4\u4e3a\u5b83\u7684\u6743\u503c\u4e3a $-inf$ \u3002\n\n\u8fd9\u6837\u7684\u8f6c\u79fb\u662f\u6709\u73af\u7684\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u770b\u6210\u6700\u77ed\u8def\u8dd1\u3002$\\text{DP}$ \u89e3\u51b3\u7684\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u56fe\u8bba\u95ee\u9898\uff0c\u5f53\u8f6c\u79fb\u6709\u73af\u65f6\uff0c\u8003\u8651\u56fe\u8bba\u7b97\u6cd5\u3002\n\n\u6240\u4ee5\u76f4\u63a5 $\\text{BFS}$ \u3002\n\n### \u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define y1 y3647\n#define next nxt\n#define LL long long\nusing namespace std;\ninline void read(int &x)\n{\n\tx=0;int f=1;\n\tchar ch=getchar();\n\twhile(ch!=45&&(ch>'9'||ch<'0'))ch=getchar();\n\tif(ch==45){f=-1,ch=getchar();}\n\twhile(ch<='9'&&ch>='0'){x=x*10+ch-48;ch=getchar();}\n\tx*=f;\n}\nint i,j,k,n,s,t,m,ans;\nconst int N=1<<8;\nconst int dx[]={1,-1,0,0},dy[]={0,0,1,-1};\nchar ch[21][21];\nint dp[21][21][N],vis[21][21][N],mp[N][N],g[N],w[N],val[N][N];\nstruct node{\n\tint x,y,s;\n}p;\nqueue<node> q;\nvoid bfs()\n{\n\twhile(!q.empty())\n\t{\n\t\tnode now=q.front();\n\t\tq.pop();\n\t\tfor(int j=0;j<4;j++)\n\t\t{\n\t\t\tint x=now.x+dx[j],y=now.y+dy[j],s=now.s;\n\t\t\tif(j<=1)\n\t\t\t{\n\t\t\t\tint x0=x-(j==0);\n\t\t\t\tfor(i=y;i<=m;i++)\n\t\t\t\tif(~val[x0][i])\n\t\t\t\ts^=(1<<val[x0][i]);\n\t\t\t}\n\t\t\tif(x>n||x<1||y>m||y<1||mp[x][y]||vis[x][y][s])continue;//\u6ce8\u610f\u4e0d\u80fd\u8d70\u5230\u5b9d\u85cf\u4e0a\u9762\u3002\n\t\t\tdp[x][y][s]=dp[now.x][now.y][now.s]+1;\n\t\t\tvis[x][y][s]=1;\n\t\t\tnode np=(node){x,y,s};\n\t\t\tq.push(np);\n\t\t}\n\t}\n}\nint main()\n{\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\t//freopen(\".ans\",\"w\",sdtout);\n\tmemset(dp,1,sizeof(dp));\n\tint px,py;\n\tread(n),read(m);\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",ch[i]+1);\n\t\tfor(j=1;j<=m;j++)\n\t\t{\n\t\t\tif(ch[i][j]=='S')px=i,py=j;\n\t\t\tif(ch[i][j]!='.'&&ch[i][j]!='S')mp[i][j]=1;\n\t\t\tif((ch[i][j]>='0'&&ch[i][j]<='9'))\n\t\t\tval[i][j]=ch[i][j]-'1',t++;\n\t\t\tif((ch[i][j]>'9'||ch[i][j]<'0')&&ch[i][j]!='B')val[i][j]=-1;\n\t\t}\n\t}\n\tfor(i=0;i<t;i++)\n\tread(w[i]);\n\tint lst=t;\n\tfor(i=1;i<=n;i++)\n\tfor(j=1;j<=m;j++)\n\tif(ch[i][j]=='B')\n\tval[i][j]=t++;\n\t\n\tfor(i=lst;i<t;i++)\n\tw[i]=-1e8;//\u4e0d\u89811e9 \u4e0d\u7136\u70b8int\n\tfor(i=1;i<1<<t;i++)\n\tfor(j=0;j<t;j++)\n\tif(i&(1<<j))\n\tg[i]+=w[j];\n\t\n\tq.push((node){px,py,0});\n\tvis[px][py][0]=1,dp[px][py][0]=0;\n\tbfs();\n\tfor(i=0;i<1<<t;i++)\n\tans=max(ans,g[i]-dp[px][py][i]);\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n### \u603b\u7ed3:\n\n\u5bf9\u4e8e\u6709\u73af\u7684 $\\text{dp}$ \u53ef\u4ee5\u8003\u8651\u56fe\u8bba\u7b97\u6cd5\u3002\n\n",
        "postTime": 1621220689,
        "uid": 177535,
        "name": "CDFLS_mao_zx",
        "ccfLevel": 7,
        "title": "\u3010\u9898\u89e3\u3011CF375C"
    },
    {
        "content": "\n\n\n\n\u9898\u76ee\u94fe\u63a5\uff1a[CF375C Circling Round Treasures](https://www.luogu.com.cn/problem/CF375C)\n\n\u9898\u610f\uff1a\n\n\u3000\u3000\u7ed9\u5b9a\u4e00\u4e2a $n \\times m$ \u7684\u68cb\u76d8\uff0c\u6709\u969c\u788d\u3001\u5b9d\u85cf\u3001\u9677\u9631\uff08\u9677\u9631\u548c\u5b9d\u85cf\u7684\u6570\u91cf\u52a0\u8d77\u6765\u4e0d\u8d85\u8fc7 8\uff09\u3002\u6bcf\u4e2a\u5b9d\u85cf\u6709\u4e00\u5b9a\u7684\u6743\u503c\uff0c\u8981\u6c42\u7528\u6298\u7ebf\u56f4\u6210\u4e00\u4e2a\u591a\u8fb9\u5f62\uff0c\u4f7f\u5f97\u5176\u5185\u90e8\u4e0d\u542b\u6709\u9677\u9631\u3002\u5bf9\u4e8e\u4e00\u4e2a\u591a\u8fb9\u5f62\u7684\u4ef7\u503c\u4e3a **\u56f4\u4f4f\u7684\u5b9d\u85cf\u6743\u503c\u548c**\u51cf\u53bb**\u591a\u8fb9\u5f62\u7684\u5468\u957f** \uff0c\u6c42\u6700\u5927\u4ef7\u503c\u3002\n\n\u9898\u89e3\uff1a\n\n\u3000\u3000\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9 $p$ \u5728\u591a\u8fb9\u5f62\u7684\u5185\u90e8\uff1f\n\n\u3000\u3000\u4ee5 $p$ \u4e3a\u8d77\u70b9\u753b\u4e00\u6761\u4e0d\u7ecf\u8fc7\u591a\u8fb9\u5f62\u7aef\u70b9\u7684\u5c04\u7ebf\uff0c\u82e5\u548c\u591a\u8fb9\u5f62\u7684\u8fb9\u6709\u5947\u6570\u4e2a\u4ea4\u70b9\u5219 $p$ \u5728\u591a\u8fb9\u5f62\u5185\u90e8\uff0c\u5076\u6570\u4e2a\u5219\u5728\u5916\u90e8\u3002\n\n\u53d1\u73b0\u5b9d\u85cf\u548c\u9677\u9631\u7684\u6570\u91cf\u6781\u5c11\uff0c\u53ef\u4ee5\u8003\u8651\u72b6\u538b\uff0c\u7ed9\u6bcf\u4e2a **\u5b9d\u85cf** \\ **\u9677\u9631** \u683c\u5b50\u9009\u4e00\u6761\u5c04\u7ebf\uff0c\u5728\u8f6c\u79fb\u7684\u65f6\u5019\u53bb\u66f4\u65b0\u6709\u5b9d\u85cf\u6216\u9677\u9631\u7684\u683c\u5b50\u7684\u5c04\u7ebf\u4e0e\u5f53\u524d\u8def\u5f84\u4ea4\u70b9\u7684\u5947\u5076\u6027\u3002\n\n\u3000\u3000\u8bbe $f[i][j][S]$ \u8868\u793a\u5f53\u524d\u683c\u5b50\u4e3a $(i,j)$ \uff0c\u5b9d\u85cf\u548c\u9677\u9631\u7684\u5947\u5076\u6027\u7684\u72b6\u6001\u4e3a $S$ ,\u591a\u8fb9\u5f62\u7684\u5468\u957f\u7684\u6700\u5c0f\u503c\u3002\n\n\u3000\u3000dfs \u8f6c\u79fb\u4e0d\u592a\u53ef\u884c\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u6b21\u8f6c\u79fb\u53ea\u4f1a\u8ba9\u591a\u8fb9\u5f62\u7684\u5468\u957f\u589e\u52a0 1\uff0c\u6545\u53ef\u4ee5\u8003\u8651BFS\u8f6c\u79fb(\u6ca1\u5f97\u9009\u4e86QAQ)\u3002\n\n\u3000\u3000\u8f6c\u79fb\u7684\u65f6\u5019\u679a\u4e3e\u6bcf\u4e2a\u5b9d\u85cf\u662f\u5426\u88ab\u5305\u56f4\u5c31\u884c\u4e86\u3002\n\nCode\uff1a\n\n \n\n```cpp\n#include <bits/stdc++.h> \nusing namespace std; \nconst int Maxn = 25; \nconst int Maxm = 500; \nconst int Maxk = 1<<9; \nconst int inf = 1e6 + 100; \nconst int dx[4] = { 1, -1, 0, 0 }; \nconst int dy[4] = { 0, 0, 1, -1 }; \nint n;\nint m;\nint s;\nint t; \nint cnt;\nint res; \nint val[Maxm];\nint sum[Maxk]; \nint f[Maxn][Maxn][Maxk]; \nchar c[Maxn][Maxn]; \nstruct node {\n\tint x;\n\tint y;\n\tint v;\n}; \nstruct point {\n\tint x;\n \tint y;\n}p[Maxm]; \n\nbool check(int x, int y, int xx, int yy, int i) {\n\tif (xx == p[i].x && yy < p[i].y && x < xx) return 1; \n\tif (x == p[i].x && y < p[i].y && x > xx) return 1; \n\treturn 0; \n}\nqueue<node> q; \nsigned main() { \n\t\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tcin >> c[i][j]; \n\t\t\tif (c[i][j] == 'S') {\n\t\t\t\ts = i; \n\t\t\t\tt = j; \n\t\t\t} else if (c[i][j] != '.' && c[i][j] != '#' && c[i][j] != 'B') {\n\t \t\t\tp[c[i][j] - '0'].x = i; \n\t\t\t\tp[c[i][j] - '0'].y = j; \n\t\t\t\t++cnt; \n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i <= cnt; ++i) cin>>val[i]; \n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tif (c[i][j] == 'B') { \n\t\t\t\tp[++cnt].x = i; \n\t\t\t\tp[cnt].y = j; \n\t\t\t\tval[cnt] = -inf; \n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i < (1<<cnt); ++i) {\n\t\tfor (int j = 1; j <= cnt; ++j) {\n\t\t\tif (i & (1<<(j-1))) sum[i] += val[j]; \n\t\t}\n\t}\n\tres = 0; \n\tmemset(f, -1, sizeof f); \n\tq.push({s, t, 0}); \n\tf[s][t][0] = 0; \n\t\t\n\twhile (!q.empty()) {\n\t\tnode now = q.front(); \n\t\tq.pop(); \n\t\tint x = now.x, y = now.y, v = now.v; \n\t\tif (x == s && y == t) {\n\t\t\tres = max(res, sum[v] - f[x][y][v]); \n\t\t}\n\t\tfor (int i = 0; i < 4; ++i) {\n\t\t\tint xx = x + dx[i], yy = y + dy[i], val = v; \n\t\t\tif (xx < 1 || xx > n || yy < 1 || yy > m) continue; \n\t\t\tif (c[xx][yy] != 'S' && c[xx][yy] != '.') continue; \n\t\t\tfor (int j = 1; j <= cnt; ++j) {\n\t\t\t\tif (check(x, y, xx, yy, j)) val ^= 1<<(j-1); \n\t\t\t}\n\t\t\tif (f[xx][yy][val] == -1) {\n\t\t\t\tf[xx][yy][val] = f[x][y][v] + 1; \n\t\t\t\tq.push({xx, yy, val}); \n\t\t\t}\n\t\t}\n\t}\n\tcout<<res;\n\treturn 0;\n}\n```\n\n\u200b\t",
        "postTime": 1649657648,
        "uid": 106103,
        "name": "Rikka__",
        "ccfLevel": 4,
        "title": "CF375C Circling Round Treasures \u9898\u89e3"
    },
    {
        "content": "\u5b89\u5229\u4e2a\u4eba blog\uff1ahttps://www.cnblogs.com/ET2006/\n\n[\u9898\u9762\u4f20\u9001\u95e8](https://codeforces.ml/contest/375/problem/C)\n\n\u6ce8\u610f\u5230\u8fd9\u9898\u4e2d\u5b9d\u85cf $+$ \u70b8\u5f39\u4e2a\u6570\u6700\u591a\u53ea\u6709 $8$ \u4e2a\uff0c\u6545\u8003\u8651\u72b6\u538b\uff0c\u8bbe $dp[x][y][S]$ \u8868\u793a\u5f53\u524d\u5750\u6807\u4e3a $(x,y)$\uff0c\u6709\u4e14\u4ec5\u6709 $S$ \u5f53\u4e2d\u7684\u7269\u54c1\u88ab\u5305\u56f4\u5728\u51f8\u591a\u8fb9\u5f62\u5185\u90e8\u6240\u8d70\u8fc7\u7684\u6700\u5c11\u6b65\u6570\u3002\n\n\u8003\u8651\u8f6c\u79fb\uff0c\u679a\u4e3e\u4e0e $(x,y)$ \u76f8\u90bb\u7684\u70b9 $(x',y')$\u3002\u4f46\u662f $S$ \u7684\u53d8\u5316\u53ef\u80fd\u6709\u4e9b\u68d8\u624b\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ed3\u8bba\uff0c\u5bf9\u4e8e\u67d0\u4e00\u70b9 $(x,y)$\uff0c\u4efb\u610f\u5f15\u51fa\u4e00\u6761\u5c04\u7ebf\uff0c\u5982\u679c\u5b83\u4e0e\u591a\u8fb9\u5f62\u6709\u5947\u6570\u4e2a\u4ea4\u70b9\uff0c\u90a3\u4e48 $(x,y)$ \u5c31\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002\u7531\u4e8e\u8fd9\u91cc\u5f15\u51fa\u7684\u5c04\u7ebf\u53ef\u4ee5\u6cbf\u4efb\u4f55\u65b9\u5411\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u7edf\u4e00\u5047\u8bbe\u5c04\u7ebf\u7684\u65b9\u5411\u90fd\u662f\u5411\u53f3\uff0c\u6545\u8fd9\u91cc\u7684\u72b6\u6001 $S$ \u5c31\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u6ee1\u8db3 $(x,y)$ \u5411\u53f3\u5f15\u51fa\u7684\u5c04\u7ebf\u4e0e\u591a\u8fb9\u5f62\u4ea4\u70b9\u4e2a\u6570\u4e3a\u5947\u6570\u7684\u70b9\u7684\u96c6\u5408\u3002\n\n\u8fd9\u6837\u4e00\u6765\u72b6\u6001\u662f\u5012\u641e\u660e\u767d\u4e86\uff0c\u4f46\u662f\u76f4\u63a5\u8fd9\u6837\u8f6c\u79fb\u8fd8\u662f\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e9b\u95ee\u9898\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u6211\u4eec\u662f\u4ece\u67d0\u4e2a\u70b9 $(x,y)$ \u5411\u53f3\u8d70\u5230 $(x,y+1)$\uff0c\u800c\u5bf9\u4e8e\u67d0\u4e2a\u6a2a\u5750\u6807\u4e5f\u4e3a $x$ \u7684\u70b9 $(x,y')$\uff0c\u5b83\u5411\u53f3\u5f15\u51fa\u7684\u5c04\u7ebf\u4e0e\u591a\u8fb9\u5f62\u51fa\u73b0\u4e86\u91cd\u5408\u7684\u60c5\u51b5\uff0c\u8fdb\u800c\u5c31\u4e0d\u597d\u8ba1\u7b97\u4ea4\u70b9\u4e2a\u6570\u3002\u4e0d\u8fc7\u8fd9\u4e2a\u95ee\u9898\u5f88\u5bb9\u6613\u89e3\u51b3\uff0c\u56e0\u4e3a\u884c\u8d70\u7684\u8def\u5f84\u4e0d\u4f1a\u7ecf\u8fc7\u5b9d\u85cf/\u70b8\u5f39\uff0c\u6545\u6a2a\u5411\u7684\u7ebf\u6bb5\u5e76\u4e0d\u4f1a\u5f71\u54cd\u4ea4\u70b9\u4e2a\u6570\uff0c\u4e8e\u662f\u53ea\u9700\u8ba1\u7b97\u7eb5\u5411\u7684\u7ebf\u6bb5\u5c31\u884c\u4e86\u3002\n\n\u4f46\u662f\u8fd9\u6837\u8fd8\u662f\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u6bd4\u65b9\u8bf4\u4e0b\u56fe\uff0c\u5bf9\u4e8e\u70b9 $A$ \u5411\u53f3\u5f15\u51fa\u7684\u6a59\u8272\u5c04\u7ebf\uff0c\u5982\u679c\u6309\u7167\u6211\u4eec\u7684\u5224\u65ad\u5176\u4e0e\u591a\u8fb9\u5f62\u6709\u4e24\u4e2a\u4ea4\u70b9 $B,C$\uff0c\u4f46\u5982\u679c\u6211\u4eec\u628a\u6a2a\u5411\u7684\u7ebf\u6bb5\u53bb\u6389\uff0c\u5c06\u4e24\u4e2a\u7eb5\u5411\u7ebf\u6bb5\u62fc\u5728\u4e00\u8d77\uff0c\u5c31\u4f1a\u53d1\u73b0\u6709\u7528\u7684\u4ea4\u70b9\u53ea\u6709 $1$ \u4e2a\u3002\u8fd9\u4e2a\u95ee\u9898\u4e5f\u5f02\u5e38\u5bb9\u6613\u89e3\u51b3\uff0c\u8003\u8651\u5c06\u6bcf\u6761\u7eb5\u5411\u7684\u7ebf\u6bb5\u770b\u4f5c\u4e00\u4e2a\u4e0a\u5f00\u4e0b\u95ed\u7684\u7ebf\u6bb5\uff0c\u5f53\u4ece $(x,y)$ \u8d70\u5230 $(x+1,y)$ \u65f6\u53ea\u6539\u53d8\u6ee1\u8db3 $x'=x+1,y'<y$ \u7684\u70b9 $(x',y')$ \u7684\u72b6\u6001\uff1b\u5f53\u4ece $(x,y)$ \u8d70\u5230 $(x-1,y)$ \u65f6\u53ea\u6539\u53d8\u6ee1\u8db3 $x'=x,y'<y$ \u7684\u70b9 $(x',y')$ \u7684\u72b6\u6001\u3002\u8fd9\u6837\u4e00\u6765\u5c31\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u4e86\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gbohgtci.png)\n\n\u6700\u77ed\u8def\u8f6c\u79fb\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define fi first\n#define se second\n#define fz(i,a,b) for(int i=a;i<=b;i++)\n#define fd(i,a,b) for(int i=a;i>=b;i--)\n#define ffe(it,v) for(__typeof(v.begin()) it=v.begin();it!=v.end();it++)\n#define fill0(a) memset(a,0,sizeof(a))\n#define fill1(a) memset(a,-1,sizeof(a))\n#define fillbig(a) memset(a,63,sizeof(a))\n#define pb push_back\n#define ppb pop_back\n#define mp make_pair\ntemplate<typename T1,typename T2> void chkmin(T1 &x,T2 y){if(x>y) x=y;}\ntemplate<typename T1,typename T2> void chkmax(T1 &x,T2 y){if(x<y) x=y;}\ntypedef pair<int,int> pii;\ntypedef long long ll;\nnamespace fastio{\n\t#define FILE_SIZE 1<<23\n\tchar rbuf[FILE_SIZE],*p1=rbuf,*p2=rbuf,wbuf[FILE_SIZE],*p3=wbuf;\n\tinline char getc(){return p1==p2&&(p2=(p1=rbuf)+fread(rbuf,1,FILE_SIZE,stdin),p1==p2)?-1:*p1++;}\n\tinline void putc(char x){(*p3++=x);}\n\ttemplate<typename T> void read(T &x){\n\t\tx=0;char c=getchar();T neg=0;\n\t\twhile(!isdigit(c)) neg|=!(c^'-'),c=getchar();\n\t\twhile(isdigit(c)) x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\t\tif(neg) x=(~x)+1;\n\t}\n\ttemplate<typename T> void recursive_print(T x){if(!x) return;recursive_print(x/10);putc((x%10)+'0');}\n\ttemplate<typename T> void print(T x){if(!x) putc('0');if(x<0) putc('-'),x=~x+1;recursive_print(x);}\n\tvoid print_final(){fwrite(wbuf,1,p3-wbuf,stdout);}\n}\nconst int MAXN=20;\nconst int MAXP=256;\nconst int MAXM=8;\nconst int INF=0x3f3f3f3f;\nconst int dx[]={1,0,-1,0};\nconst int dy[]={0,1,0,-1};\nint n,m,sx,sy;char s[MAXN+3][MAXN+3];\nint dp[MAXN+2][MAXN+2][MAXP+3];\nint px[MAXM+2],py[MAXM+2],a[MAXM+2],c1=0,c2=0;\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++) scanf(\"%s\",s[i]+1);\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) if(s[i][j]=='S') sx=i,sy=j;\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) if(isdigit(s[i][j])){\n\t\tpx[s[i][j]^48]=i;py[s[i][j]^48]=j;c1++;\n\t} c2=c1;\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) if(s[i][j]=='B') px[++c2]=i,py[c2]=j;\n\tfor(int i=1;i<=c1;i++) scanf(\"%d\",&a[i]);\n\tmemset(dp,63,sizeof(dp));dp[sx][sy][0]=0;\n\tqueue<pair<pii,int> > q;q.push(mp(mp(sx,sy),0));\n\twhile(!q.empty()){\n\t\tpair<pii,int> p=q.front();q.pop();\n\t\tint x=p.fi.fi,y=p.fi.se,msk=p.se;\n//\t\tprintf(\"%d %d %d %d\\n\",x,y,msk,dp[x][y][msk]);\n\t\tfor(int i=0;i<4;i++){\n\t\t\tint nx=x+dx[i],ny=y+dy[i];\n\t\t\tif(nx<1||nx>n||ny<1||ny>m) continue;\n\t\t\tif(s[nx][ny]!='.'&&s[nx][ny]!='S') continue;\n\t\t\tint nmsk=msk;\n\t\t\tfor(int j=1;j<=c2;j++) if((!(px[j]^x)&&!(i^2)||!(px[j]^nx)&&!i)&&py[j]<ny)\n\t\t\t\tnmsk^=1<<j-1;\n\t\t\tif(dp[nx][ny][nmsk]==INF){\n\t\t\t\tdp[nx][ny][nmsk]=dp[x][y][msk]+1;\n\t\t\t\tq.push(mp(mp(nx,ny),nmsk));\n\t\t\t}\n\t\t}\n\t}\n\tint ans=-INF;\n\tfor(int i=0;i<(1<<c1);i++) if(dp[sx][sy][i]!=INF){\n\t\tint sum=0;\n\t\tfor(int j=0;j<c1;j++) sum+=a[j+1]*(i>>j&1);\n\t\tchkmax(ans,sum-dp[sx][sy][i]);\n\t} printf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1613918017,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF375C\u3010Circling Round Treasures\u3011"
    },
    {
        "content": "Q1\uff1a\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9\u5728\u4e0d\u5728\u8fb9\u53ef\u4ea4\u53c9\u7684\u591a\u8fb9\u5f62\u5185\u90e8\uff1f  \nA1\uff1a\u4f5c\u51fa\u4e00\u6761\u4e0d\u4e0e\u591a\u8fb9\u5f62\u4efb\u610f\u4e00\u8fb9\u5e73\u884c\u7684\u5c04\u7ebf\uff0c\u4e0e\u591a\u8fb9\u5f62\u8fb9\u7684\u4ea4\u70b9\u4e2a\u6570\u4e3a\u5947\u5219\u5728\u5185\u90e8\u5426\u5219\u5728\u5916\u90e8\u3002  \n\nQ2\uff1a\u8fd9\u6761\u5c04\u7ebf\u53ef\u4ee5\u968f\u4fbf\u9009\u5417\uff1f\u6bd4\u5982\u94a6\u5b9a\u5411\u53f3\uff1f  \nA2\uff1a\u53ef\u4ee5\uff0c\u4f46\u662f\u9700\u8981\u8003\u8651\u67d0\u4e00\u8fb9\u4e0e\u5c04\u7ebf\u5171\u7ebf\u7684\u60c5\u51b5\uff0c\u7a0d\u52a0\u601d\u8003\u53ef\u53d1\u73b0\uff1a\u6a2a\u7740\u7684\u8fb9\u6ca1\u6709\u8d21\u732e\uff0c\u7ad6\u7740\u7684\u8fb9\u770b\u6210\u4e0a\u5f00\u4e0b\u95ed\u7684\u7ebf\u6bb5\uff0c\u5c04\u7ebf\u4e0e\u8fd9\u4e9b\u4e0a\u5f00\u4e0b\u95ed\u7ebf\u6bb5\u7684\u4ea4\u70b9\u4e2a\u6570\u5373\u4e3a\u5224\u65ad\u4f9d\u636e\u3002\n\nQ3\uff1aDP \u524d\u6709\u4ec0\u4e48\u51c6\u5907\u5de5\u4f5c\uff1f  \nA3\uff1a\u5c06\u70b8\u5f39\u770b\u6210\u4ef7\u503c\u4e3a $-\\infty$ \u7684\u5b9d\u85cf\u3002\n\nQ4\uff1a\u5982\u4f55\u8bbe\u8ba1\u72b6\u538b DP \u72b6\u6001\uff1f  \nA4\uff1a\u7531\u4e8e\u72b6\u6001\u53ea\u4e0e\u4ea4\u70b9\u4e2a\u6570\u5947\u5076\u6027\u6709\u5173\uff0c\u7528 $f(x,y,s)$ \u8868\u793a\u4ece $(sx,sy)$ \u8d70\u5230 $(x,y)$\uff0c\u76ee\u524d $s$ \u8fd9\u4e9b\u72b6\u6001\u7684\u7269\u54c1\u6ee1\u8db3\u4ece\u5404\u81ea\u51fa\u53d1\u7684\u5411\u53f3\u5c04\u7ebf\u7684\u8d21\u732e\u4e3a\u5947\u6570\uff0c\u6700\u5c11\u6b65\u6570\u3002\n\nQ5\uff1a\u5982\u4f55\u8f6c\u79fb\uff1f  \nA5\uff1a\u4ece\u4e00\u4e2a\u72b6\u6001 $f(x,y,s)$ \u8f6c\u79fb\u5230\u76f8\u90bb\u72b6\u6001 $f(nx,ny,t)$ \u65f6\uff0c\u5982\u679c $(x,y)\\to (nx,ny)$ \u4e3a\u6a2a\u5411\u7ebf\u6bb5\u5219 $t=s$\uff0c\u5426\u5219\u6839\u636e\u662f\u5411\u4e0a\u8d70\u8fd8\u662f\u5411\u4e0b\u8d70\u5224\u65ad\u65b0\u589e\u4e86\u54ea\u4e00\u4e2a\u70b9\uff0c\u5e76\u8003\u5bdf\u5404\u4e2a\u7269\u54c1\u7684\u5c04\u7ebf\u662f\u5426\u7ecf\u8fc7\u8be5\u70b9\u3002\u7531\u4e8e DP \u72b6\u6001\u5e76\u6ca1\u6709\u660e\u663e\u7684\u987a\u5e8f\u6027\uff0c\u800c\u6211\u4eec\u672c\u8d28\u4e0a\u8981\u6c42\u4e00\u4e2a\u6700\u5c11\u6b65\u6570\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u7528 BFS \u6765\u505a\u8fd9\u4e2a\u8f6c\u79fb\u3002\n\nQ6\uff1a\u5982\u4f55\u5b9e\u73b0\uff1f  \nA6\uff1a\u4ee3\u7801\u5982\u4e0b\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int INF=1e7;\nint n,m,K,sx,sy,tx[10],ty[10],tc[10],f[25][25][1<<8],Log[1<<8],sum[1<<8];\nchar a[25][25];\nconst int dx[]={0,0,1,-1},dy[]={1,-1,0,0};\nstruct node {\n\tint x,y,s;\n};\nqueue<node>Q;\nint get(int x,int y,int nx,int ny,int i){\n\tif(x==nx)return 0;\n\tif(nx<x&&tx[i]==x&&ty[i]<y)return 1;//\u4e0a\u5f00\u4e0b\u95ed \n\tif(nx>x&&tx[i]==nx&&ty[i]<y)return 1;\n\treturn 0;\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)scanf(\"%s\",a[i]+1);\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=m;j++){\n\t\tif(a[i][j]>='0'&&a[i][j]<='9'){\n\t\t\tK++;\n\t\t\ttx[a[i][j]-'0']=i,ty[a[i][j]-'0']=j;\n\t\t}\n\t}\n\tfor(int i=1;i<=K;i++)scanf(\"%d\",&tc[i]);\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=m;j++){\n\t\tif(a[i][j]=='B'){\n\t\t\tK++;\n\t\t\ttx[K]=i,ty[K]=j;\n\t\t\ttc[K]=-INF;\n\t\t}\n\t\tif(a[i][j]=='S')sx=i,sy=j;\n\t}\n\tmemset(f,0x3f,sizeof f);\n\tf[sx][sy][0]=0;\n\tQ.push(node{sx,sy,0});\n\twhile(!Q.empty()){\n\t\tint x=Q.front().x,y=Q.front().y,s=Q.front().s;Q.pop();\n\t\tfor(int i=0;i<4;i++){\n\t\t\tint nx=x+dx[i],ny=y+dy[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m&&a[nx][ny]!='#'&&a[nx][ny]!='B'&&!(a[nx][ny]>='0'&&a[nx][ny]<='9')){\n\t\t\t\tint ss=s;\n\t\t\t\tfor(int j=1;j<=K;j++)ss^=get(x,y,nx,ny,j)<<(j-1);\n\t\t\t\tif(f[nx][ny][ss]==f[0][0][0])f[nx][ny][ss]=f[x][y][s]+1,Q.push(node{nx,ny,ss});\n\t\t\t}\n\t\t}\n\t}\n\tint ans=-1e9;\n\tfor(int i=0;i<K;i++)Log[1<<i]=i;\n\tfor(int i=1;i<(1<<K);i++)sum[i]=sum[i-(i&-i)]+tc[1+Log[i&-i]];\n\tfor(int i=0;i<(1<<K);i++)ans=max(ans,sum[i]-f[sx][sy][i]);\n\tcout<<ans<<'\\n';\n} \n```",
        "postTime": 1677226149,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "CF375C Circling Round Treasure"
    },
    {
        "content": "## my blog \n[$\\color{blue} my \\ \\ \\ blog$](https://blog.csdn.net/qq_34493840/article/details/94588642)\n## \u9898\u76ee\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/CF375C)\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20190703191356579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0NDkzODQw,size_16,color_FFFFFF,t_70)\n\n\u8f93\u5165\u8f93\u51fa\u6837\u4f8b\n\u8f93\u5165\u6837\u4f8b\u4e00\n```cpp\n4 4\n....\n.S1.\n....\n....\n10\n```\n\u8f93\u51fa\u6837\u4f8b\u4e00\n```cpp\n2\n```\n\u8f93\u5165\u6837\u4f8b\u4e8c\n```cpp\n7 7\n.......\n.1###2.\n.#...#.\n.#.B.#.\n.3...4.\n..##...\n......S\n100\n100\n100\n100\n```\n\u8f93\u51fa\u6837\u4f8b\u4e8c\n```cpp\n364\n```\n\u8f93\u5165\u6837\u4f8b\u4e09\n```cpp\n7 8\n........\n........\n....1B..\n.S......\n....2...\n3.......\n........\n100\n-100\n100\n```\n\u8f93\u51fa\u6837\u4f8b\u4e09\n```cpp\n0\n```\n\u8f93\u5165\u6837\u4f8b\u56db\n```cpp\n1 1\nS\n```\n\u8f93\u51fa\u6837\u4f8b\u56db\n```cpp\n0\n```\n\n## \u9898\u89e3\n- \u8bbe$sum[i]$\u8868\u793a\u83b7\u5f97\u5b9d\u85cf\u7684\u72b6\u6001\u4e3a$i$\u65f6\u6240\u5f97\u5230\u7684\u4ef7\u503c\n- \u8bbe$f[i][j][k]$\u8868\u793a\u8d70\u5230\u70b9$(i\uff0cj)$\u9009\u53d6\u5b9d\u85cf\u7684\u72b6\u6001\u4e3a$k$\u65f6\u7684\u6700\u5c0f\u6b65\u6570\n- \u7b54\u6848\u4e3a$sum[k]-f[s][t][k]$\n- $DP$\u65f6$BFS$\u5373\u53ef\n\n## $code$\n```cpp\n#include <bits/stdc++.h> \nusing namespace std; \nconst int maxn = 25; \nconst int maxm = 500; \nconst int maxk = 1<<9; \nconst int inf = 1e6 + 100; \nconst int dx[4] = { 1, -1, 0, 0 }; \nconst int dy[4] = { 0, 0, 1, -1 }; \n\ntemplate <typename T> \ninline void read(T &s) { \n\ts = 0; \n\tT w = 1, ch = getchar(); \n\twhile (!isdigit(ch)) { if (ch == '-') w = -1; ch = getchar(); } \n\twhile (isdigit(ch)) { s = (s<<1) + (s<<3) + (ch^48); ch = getchar(); } \n\ts *= w; \n} \n\nint n, m, s, t; \nint cnt, res; \nint val[maxm], sum[maxk]; \nint f[maxn][maxn][maxk]; \nchar c[maxn][maxn]; \nstruct node { int x, y, v; }; \nstruct point { int x, y; } p[maxm]; \n\ninline bool check(int x, int y, int xx, int yy, int i) {\n\tif (xx == p[i].x && yy < p[i].y && x < xx) return true; \n\tif (x == p[i].x && y < p[i].y && x > xx) return true; \n\treturn false; \n}\n\nvoid bfs() {\n\tres = 0; \n\tmemset(f, -1, sizeof(f)); \n\tqueue<node> q; \n\tq.push((node){s, t, 0}); \n\tf[s][t][0] = 0; \n\t\t\n\twhile (!q.empty()) {\n\t\tnode now = q.front(); \n\t\tq.pop(); \n\t\tint x = now.x, y = now.y, v = now.v; \n\t\tif (x == s && y == t) {\n\t\t\tres = max(res, sum[v] - f[x][y][v]); \n\t\t}\n\t\tfor (int i = 0; i < 4; ++i) {\n\t\t\tint xx = x + dx[i], yy = y + dy[i], vv = v; \n\t\t\tif (xx < 1 || xx > n || yy < 1 || yy > m) continue; \n\t\t\tif (c[xx][yy] != 'S' && c[xx][yy] != '.') continue; \n\t\t\tfor (int j = 1; j <= cnt; ++j) {\n\t\t\t\tif (check(x, y, xx, yy, j)) vv ^= 1<<(j-1); \n//\t\t\t\tcout << vv << endl;  \n\t\t\t}\n\t\t\tif (f[xx][yy][vv] == -1) {\n\t\t\t\tf[xx][yy][vv] = f[x][y][v] + 1; \n\t\t\t\tq.push((node){xx, yy, vv}); \n\t\t\t}\n\t\t}\n\t}\n}\n\nint main() {\n//\tfreopen(\"1.in\", \"r\", stdin); \n\t\n\tread(n), read(m); \n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tcin >> c[i][j]; \n\t\t\tif (c[i][j] == 'S') {\n\t\t\t\ts = i; \n\t\t\t\tt = j; \n\t\t\t} else if (c[i][j] != '.' && c[i][j] != '#' && c[i][j] != 'B') {\n\t \t\t\tp[c[i][j] - '0'].x = i; \n\t\t\t\tp[c[i][j] - '0'].y = j; \n\t\t\t\t++cnt; \n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i <= cnt; ++i) read(val[i]); \n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tif (c[i][j] == 'B') { \n\t\t\t\tp[++cnt].x = i; \n\t\t\t\tp[cnt].y = j; \n\t\t\t\tval[cnt] = -inf; \n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i < (1<<cnt); ++i) {\n\t\tfor (int j = 1; j <= cnt; ++j) {\n\t\t\tif (i & (1<<(j-1))) sum[i] += val[j]; \n\t\t}\n\t}\n\t\n\tbfs();\n\t\n\tprintf(\"%d\\n\", res);\n\treturn 0;\n}\n```",
        "postTime": 1562157916,
        "uid": 145352,
        "name": "MILLOPE",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF375C \u3010Circling Round Treasures\u3011"
    }
]
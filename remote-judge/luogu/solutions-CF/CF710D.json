[
    {
        "content": "\u600e\u4e48\u90fd\u662f\u6570\u8bba\u505a\u6cd5\uff08\n\n\u90a3\u6211\u5c31\u6765\u4e00\u4e2a\u4e0d\u7528\u63a8\u5f0f\u5b50\u7684\u7b80\u5355\u505a\u6cd5\u5427\n\n\u56e0\u4e3a\u8fd9\u91cc$x>b_1,x>b_2$\uff08\u8fd9\u4e2a\u9898\u76ee\u7ffb\u8bd1\u4e2d\u6ca1\u6709\u4f53\u73b0\uff0c\u4f46\u539f\u9898\u662f\u6709\u7684\uff0c\u6211\u88ab\u5751\u4e86\u597d\u4e45\uff09\uff0c\u4e0d\u96be\u60f3\u5230\u76f4\u63a5\u5c06$l=max(l,b_1,b_2)$\n\n\u6211\u4eec\u8003\u8651\u5206\u5757\u601d\u60f3\n\n1.\u5f53$max(a_1,a_2)<1000$\u7684\u65f6\u5019\n\n$\\quad\\quad$\u8003\u8651$x\\in[l,l+a_1a_2)$\uff0c\u53ea\u8981\u77e5\u9053$x\u2261m(mod\\quad a_1a_2)$\uff0c\u90a3\u4e48\u5c31\u80fd\u6c42\u51fa\u8fd9\u79cd\u60c5\u51b5\u4e0b$x$\u7684\u4e2a\u6570\uff08\u5176\u5b9e\u5c31\u662f$[x,r]$\u4e4b\u95f4\u6709\u591a\u5c11\u4e2a\u548c$x$\u5173\u4e8e$a_1a_2$\u540c\u4f59\u4e8e$m$\uff08$ans_m=[\\dfrac{r-x}{a_1a_2}]+1$)\n\n$\\quad\\quad$\u679a\u4e3e$x$\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7b26\u5408\u6761\u4ef6\u7684$x$\u90fd\u8fdb\u884c\u4e00\u904d\u4e0a\u8ff0\u64cd\u4f5c\uff08\u6c42$m,ans_m$\uff09,\u6700\u7ec8\u76f8\u52a0\u5c31\u53ef\u4ee5\u4e86\n\n$\\quad\\quad$\u590d\u6742\u5ea6$O(a_1a_2)$\n\n2.\u5f53$max(a_1,a_2)\u22651000$\u7684\u65f6\u5019\n\n$\\quad\\quad$\u4e0d\u59a8\u8bbe$a_2\u2265a_1$\n\n$\\quad\\quad$\u90a3\u4e48\u5f88\u663e\u7136\uff0c\u56e0\u4e3a$r-l\u22644\\times 10^9$\uff0c\u6240\u4ee5\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u7684\u6570\u4e2a\u6570\u4e0d\u4f1a\u8d85\u8fc7$\\dfrac{r-l}{a_2}\u22644\\times 10^6$\u4e2a\uff0c\u76f4\u63a5\u66b4\u529b\u679a\u4e3e\u6240\u6709\u7684\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u7684\u6570\uff0c\u5224\u65ad\u4e00\u4e0b\u662f\u5426\u53ef\u884c\u5c31\u53ef\u4ee5\u4e86\n\n$\\quad\\quad$\u4e0d\u8fc7\u8fd9\u91cc\u6709$b_1,b_2$\u7684\u5f71\u54cd\uff0c\u679a\u4e3e\u7684\u8303\u56f4\u52a0\u5927\u4e00\u70b9\u5c31\u53ef\u4ee5\u4e86\uff08\u6211\u5f00\u5927\u4e86$10$\u500d\uff09\n\n$\\quad\\quad$\u7406\u8bba\u590d\u6742\u5ea6\u53ef\u4ee5\u8fbe\u5230$O(\\dfrac{r-l}{a_2})$\n\n\u7efc\u5408\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53d1\u73b0\u4e24\u79cd\u60c5\u51b5\u90fd\u80fd\u5728\u5404\u81ea\u7684\u8303\u56f4\u5185\u8dd1\u8fc7\u53bb\n\n\u4e8e\u662f\u8fd9\u9898\u6211\u4eec\u5c31\u89e3\u51b3\u4e86\n\n\uff08\u597d\u50cf\u6ca1\u6709\u6570\u8bba\u65b9\u6cd5\u597d\u5199\u4e0d\u8fc7\u6ca1\u5173\u7cfb\uff09\n\n\u8d34\u4e0b\u4ee3\u7801\uff08\u6211\u7801\u98ce\u4e0d\u597d\uff0c\u8fd9\u4e2a\u4ee3\u7801\u6211\u5904\u7406\u8fc7\u7a0d\u5fae\u597d\u770b\u4e00\u70b9\uff09\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nlong long a1,b1,a2,b2,l,r,i,k,ans;\nint main(){\n\tscanf(\"%lld%lld%lld%lld%lld%lld\",&a1,&b1,&a2,&b2,&l,&r);\n\tif(b1>l)l=b1;if(b2>l)l=b2;\n\tif(a1>a2)swap(a1,a2),swap(b1,b2);\n\tif(a2<1000)\n\t\tfor(i=l;i<=min(l+a1*a2-1,r);i++)\n\t\t\tif((i%a1+a1)%a1==(b1%a1+a1)%a1 && (i%a2+a2)%a2==(b2%a2+a2)%a2)\n\t\t\t\tans+=(r-i)/(a1*a2)+1;\n\tif(a2>=1000){\n\t\tfor(i=-int(2e10/a2);i<=2e10/a2;i++){\n\t\t\tk=i*a2+b2;\n\t\t\tif((k%a1+a1)%a1==(b1%a1+a1)%a1)\n\t\t\t\tif(k>=l && k<=r && k>=b1 && k>=b2)ans++;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n```",
        "postTime": 1601302398,
        "uid": 109942,
        "name": "w23c3c3",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF710D \u3010Two Arithmetic Progressions\u3011"
    },
    {
        "content": "\u53ea\u80e1\u4e0d\u5199\u9009\u624b\u3002\n\n\u5bf9\u4e8e\u5f0f\u5b50 $a_1k_1+b_1=a_2k_2+b_2$\uff0c\u53ef\u4ee5\u5199\u6210 $a_1k_1-a_2k_2=b_2-b_1$\u3002\n\n\u8fd9\u662f\u4e00\u4e2a\u4e0d\u5b9a\u65b9\u7a0b\u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u8bbe $A=a_1,B=-a_2$\uff0c$C=b_2-b_1$\uff0c\u5219\u53ef\u4ee5\u5199\u51fa\u4e0d\u5b9a\u65b9\u7a0b\uff1a\n\n$$Ak_1+Bk_2=C$$\n\n\u6c42\u4e00\u7ec4**\u7279\u89e3**\u662f\u7b80\u5355\u7684\uff0c\u8bbe $g=\\gcd(A,B)$\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7 exgcd \u6c42\u51fa $Ax_0+By_0=g$ \u7684\u4e00\u7ec4\u7279\u89e3\uff0c\u7136\u540e\u4e24\u8fb9\u540c\u65f6\u4e58\u4ee5 $\\frac{C}{g}$ \u5f97\u5230 $A\\frac{Cx_0}{g}+B\\frac{Cy_0}{g}=C$\uff0c\u7136\u540e\u5c31\u5f97\u5230\u4e86\u7279\u89e3\u3002\n\n\u4f46\u6211\u4eec\u7684\u76ee\u7684\u662f\u6c42**\u901a\u89e3**\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6574\u6570 $p$\uff0c\u8003\u8651\u5230 $A\\frac{Bp}{g}-B\\frac{Ap}{g}=0$\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u52a0\u5230\u4e0a\u9762\u3002\n\n\u4e8e\u662f\u5f97\u5230 $A\\frac{Cx_0+Bp}{g}+B\\frac{Cy_0-Bp}{g}=C$\uff0c\u6c42\u51fa\u4e86\u901a\u89e3 $k_1,k_2$\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u5217\u51fa\u4e0d\u7b49\u5f0f\u4e86\uff1a\n\n- $k_1,k_2\\ge 0$\u3002\n\n- $L\\le a_1k_1+b_1\\le R$\u3002\n\n- $L\\le a_2k_2+b_2\\le R$\u3002\n\n\u7136\u540e\u6c42\u51fa $p$ \u7684\u8303\u56f4\u540e\uff0c\u4e5f\u5c31\u662f $x$ \u7684\u53d6\u503c\u4e2a\u6570\u3002\n\n\u6ce8\u610f\u4e00\u4e0b\u5bf9\u4e8e\u6b63\u6570\u548c\u8d1f\u6570\uff0c\u5411\u4e0b\u53d6\u6574\u548c\u5411\u4e0a\u53d6\u6574\u7684\u5199\u6cd5\u5c31\u597d\u4e86\u3002\n",
        "postTime": 1675243459,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u72c2\u98d9\u592a\u597d\u770b\u4e86"
    },
    {
        "content": "\u56e0\u4e3a $x=a_1\\times k_1+b_1,x=a_2\\times k_2+b_2$\uff0c\u6240\u4ee5 $a_1\\times k_1-a_2\\times k_2=b_2-b_1$\uff0c\u4e0d\u59a8\u8bbe $b_2>b_1$\u3002\n\n\u53ef\u4ee5\u7528 exgcd \u6c42\u89e3 $k_1,k_2$\uff08\u65e0\u89e3\u5c31\u6ca1\u6709\u7b54\u6848\uff09\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a\u6c42 $a_1\\times k_1+a_2\\times k_2=b_2-b_1$\u3002\n\n\u8bbe\u901a\u89e3\u4e3a $x'=x+\\frac{a_2}{\\gcd(a_1,a_2)}\\times k,y'=y-\\frac{a_1}{\\gcd(a_1,a_2)}\\times k$\u3002\n\n\u4ee3\u5165\u65b9\u7a0b\u5f97\u5230 $a_1\\times (x+\\frac{a_2}{\\gcd(a_1,a_2)})\\times k-a_2\\times (\\frac{a_1}{\\gcd(a_1,a_2)}-y)\\times k=b_2-b_1$\u3002\n\n\u6240\u4ee5 $k_1=(x+\\frac{a_2}{\\gcd(a_1,a_2)})\\times k,k_2=a_2\\times (\\frac{a_1}{\\gcd(a_1,a_2)}-y)\\times k$\u3002\n\n\u8981\u4fdd\u8bc1 $k_1\\ge 0,k_2\\ge 0,l\\le k_1\\times a_1+b_1\\le r,l\\le k_2\\times a_2+b_2\\le r$\uff0c\u53ef\u4ee5\u901a\u8fc7\u56db\u4e2a\u4e0d\u7b49\u5f0f\u6c42\u51fa\u6574\u6570 $k$ \u7684\u8303\u56f4\u3002\n\n\u56e0\u4e3a\u4e00\u4e2a $k$ \u5bf9\u5e94\u7740\u4e00\u4e2a $k_1$ \u548c \u4e00\u4e2a $k_2$\uff0c\u6240\u4ee5\u4e00\u4e2a $k$ \u5bf9\u5e94\u4e00\u4e2a $x$\uff0c$k$ \u7684\u4e0d\u540c\u53d6\u503c\u7684\u6570\u91cf\u5c31\u662f\u7b54\u6848\u3002\n```cpp\nint exgcd(int a,int b,int &x,int &y)\n{\n\tif(!b)\n\t{\n\t\tx=1,y=0;\n\t\treturn a;\n\t}\n\tint gcd=exgcd(b,a%b,y,x);\n\ty-=a/b*x;\n\treturn gcd;\n}\n\nint mceil(int a,int b)\n{\n\treturn ceil(1.0*a/b);\n}\n\nint mfloor(int a,int b)\n{\n\treturn floor(1.0*a/b);\n}\n\nsigned main()\n{\n\tint a1,a2,b1,b2,l,r;\n\tscanf(\"%lld%lld%lld%lld%lld%lld\",&a1,&b1,&a2,&b2,&l,&r);\n\tif(b1>b2)\n\t{\n\t\tswap(a1,a2);\n\t\tswap(b1,b2);\n\t}\n\tint x,y,gcd;\n\tgcd=exgcd(a1,a2,x,y);\n\tif((b2-b1)%gcd) return puts(\"0\"),0;\n\tint b=a2/gcd,a=a1/gcd;\n\tx*=(b2-b1)/gcd,y*=(b2-b1)/gcd;\n    \n\tint l1=mfloor(mfloor(l-b1,a1)-x,b),\n   \tr1=mfloor(mfloor(r-b1,a1)-x,b),\n   \tl2=mceil(mceil(l-b2,a2)+y,a),\n    \tr2=mfloor(mfloor(r-b2,a2)+y,a);\n        \n\tl=max(l1,l2),r=min(r1,r2);\n\tint k=max(mceil(-x,b),mceil(y,a));\n\tprintf(\"%lld\",max(0ll,r-max(l,k)+1));\n\treturn 0;\n}\n```\n",
        "postTime": 1666179808,
        "uid": 571634,
        "name": "hgzxwzf",
        "ccfLevel": 7,
        "title": "CF710D"
    },
    {
        "content": "\u4e0d\u4f1a excrt \u7684\u670b\u53cb\u8bf7\u5148\u53bb\u4f60\u8c37\u7684\u677f\u5b50\u9898\u6216\u8005 [OIwiki](https://oiwiki.org) \u5b66\u4e00\u4e0b\u3002\n\n\u5751\u5de8\u591a\u65e0\u6bd4\u3002\n\n\u9996\u5148\u5bf9\u4e8e $a_1,b_1,a_2,b_2$ \u53ef\u4ee5\u4e0a excrt \u5148\u6c42\u51fa\u6700\u5c0f\u6574\u6570\u89e3\uff0c\u7136\u540e\u5f97\u51fa\u6700\u5728 $[L,R]$ \u8303\u56f4\u5185\u7684\u6700\u5c0f\u548c\u6700\u5927\u89e3\uff08\u516c\u5dee\u4e3a $\\operatorname{lcm}(a_1,a_2)$\uff09,\u6700\u540e\u5229\u7528\u7b49\u5dee\u6570\u5217\u7b97\u9879\u6570\u5373\u53ef\u3002\n\n\u7136\u540e WA on #3\n\n\u6570\u636e\uff1a\n\n`2 0 4 2 -39 -37`\n\n\u8fd9\u4e2a\u65f6\u5019\u6211\u56de\u53bb\u8bfb\u4e86\u4e00\u904d\u82f1\u6587\u9898\u9762\uff0c\u53d1\u73b0\u539f\u6765\u8fd9\u4e2a $x$ \u4e0d\u80fd\u5c0f\u4e8e $\\max(b_1,b_2)$ \uff08\u5c31\u662f $k',l'>=0$ \u8fd9\u4e00\u53e5\uff0c\u987a\u5e26\u4e00\u63d0\uff0c$b_1,b_2$ \u8981\u63d0\u524d\u5b58\u8d77\u6765\uff0c\u4e0d\u7136\u7684\u8bdd\u539f\u6765\u7684\u503c\u5728 excrt \u91cc\u4f1a\u88ab\u66f4\u6539\uff09\n\n\u7136\u540e\u6211\u7684\u8f93\u51fa\u90e8\u5206\u4ece\n\n`cout<<(r-l)/lcm+1;`\n\n\u53d8\u6210\u4e86\n```\nl=max(l,max(b1,b2));\nif(l>r)cout<<0;\nelse cout<<(r-l)/lcm+1;\n```\n\u7136\u540e\u6fc0\u60c5 WA on #28 \uff08\n\n\u6570\u636e\uff1a\n\n`2 0 2 1 0 1000000000`\n\n\u6211\u5bfb\u601d\u7740\u8fd9\u4e0d\u65e0\u89e3\u5417\uff0c\u7136\u540e\u6211\u8dd1\u56de\u53bb\u4e00\u770b\u6211\u7684 excrt \u51fd\u6570\u8fd4\u56de `-1` \u7684\u65f6\u5019\u6211\u5e94\u8be5\u76f4\u63a5\u8f93\u51fa $0$ \u7136\u540e `return` \u4f46\u662f\u6211\u6ca1\u6709\uff08\n\n\u7136\u540e\u518d\u4ea4\u4e86\u4e00\u904d\uff0c\u7ec8\u4e8e\u8fc7\u4e86\uff08\uff09\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,a[100005],b[100005];\nint exgcd(int a,int b,int &x,int &y){\n\tif(b==0){\n\t\tx=1,y=0;\n\t\treturn a;\n\t}\n\tint d=exgcd(b,a%b,x,y),x0=x,y0=y;\n\tx=y0;\n\ty=x0-a/b*y0;\n\treturn d;\n}\nint inv(int x,int p){\n\tint x0,y0;\n\texgcd(x,p,x0,y0);\n\treturn x0;\n}\nint excrt(){\n\tint lcm=a[1];\n\tint ans=b[1];\n\tfor(int i=2;i<=n;++i){\n\t\tb[i]=((b[i]-ans)%a[i]+a[i])%a[i];\n\t\tint x0,y0;\n\t\tint d=exgcd(lcm,a[i],x0,y0);\n\t\tif(b[i]%d)return -1;\n\t\tint k=(a[i]+b[i]/d*x0%a[i])%a[i];\n\t\tans=ans+k*lcm;\n\t\tlcm=lcm/d*a[i];\n\t\tans=(ans+lcm)%lcm;\n\t}\n\treturn ans;\n}\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tn=2;\t\n\tint b1,b2;//\u63d0\u524d\u5b58\u4e00\u4e0b\n\tfor(int i=1;i<=2;++i){\n\t\tcin>>a[i]>>b[i];\n\t\tif(i==1)b1=b[1];\n\t\telse b2=b[2];\n\t\tb[i]=(b[i]%a[i]+a[i])%a[i];\n\t}\n\tint lt,rt;\n\tcin>>lt>>rt;\n\tint cur=excrt(),lcm=a[1]/__gcd(a[1],a[2])*a[2];\n\tif(cur==-1){//\u65e0\u89e3\n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tint l=(lt-cur)/lcm*lcm+cur;\n\tif(l<lt)l+=lcm;//\u9996\u9879\n\tint r=(rt-cur)/lcm*lcm+cur;\n\tif(r>rt)r-=lcm;//\u672b\u9879\n//\tcout<<l<<' '<<r<<'\\n';\n\tl=max(l,max(b1,b2));\n\tif(l>r)cout<<0;\n\telse cout<<(r-l)/lcm+1;\n\treturn 0;\n}\n```\n",
        "postTime": 1664675075,
        "uid": 359614,
        "name": "Forever1507",
        "ccfLevel": 6,
        "title": "CF710D\u9898\u89e3"
    },
    {
        "content": ">### [\u6d1b\u8c37\u9898\u76ee\u9875\u9762\u4f20\u9001\u95e8](https://www.luogu.org/problem/CF710D) & [CodeForces\u9898\u76ee\u9875\u9762\u4f20\u9001\u95e8](https://codeforces.com/contest/710/problem/D)\n\n>\u6709$2$\u4e2a\u7b49\u5dee\u6570\u5217$A:A_i=a_1i+b_1(i\\in\\mathbb N),B:B_i=a_2i+b_2(i\\in\\mathbb N)$\u3002\u7ed9\u5b9a$l,r$\uff0c\u6c42\u6709\u591a\u5c11\u4e2a\u6574\u6570$n\\in[l,r]$\u6ee1\u8db3$n$\u65e2\u5728$A$\u5185\u53c8\u5728$B$\u5185\u3002\n\n>$a_1,a_2\\in\\left(0,2\\times10^9\\right]\\cap\\mathbb Z,b_1,b_2,l,r\\in\\left[-2\\times10^9,2\\times10^9\\right]\\cap\\mathbb Z,l\\leq r$\u3002\n\n\u8bbe$n$\u5728$A$\u4e2d\u662f\u7b2c$x\\in\\mathbb N$\u9879\uff0c\u5728$B$\u4e2d\u662f\u7b2c$y\\in\\mathbb N$\u9879\uff0c\u5219\u53ef\u4ee5\u5217\u51fa\u4e0d\u5b9a\u65b9\u7a0b\n$$a_1x+b_1=a_2y+b_2$$\n\u8f6c\u5316\u6210\u6807\u51c6\u5f62\u5f0f\uff0c\u5f97\n$$a_1x-a_2y=b_2-b_1$$\n\u8fd9\u4e2a\u663e\u7136\u53ef\u4ee5\u7528Exgcd\u5148\u786e\u5b9a\u65e0\u89e3\u5e76\u8f93\u51fa$0$\u8d70\u4eba\uff0c\u6216\u786e\u5b9a\u6709\u89e3\u5e76\u5f97\u5230\u4e00\u7ec4\u7279\u89e3$\\begin{cases}x=x'\\\\y=y'\\end{cases}$\u3002\u4ee4$\\Delta x=\\dfrac{a_2}{\\gcd(a_1,a_2)},\\Delta y=\\dfrac{a_1}{\\gcd(a_1,a_2)}$\uff0c\u5219\u901a\u89e3\u662f$\\begin{cases}x=x'+k\\Delta x\\\\y=y'+k\\Delta y\\end{cases}(k\\in\\mathbb Z)$\u3002\u4f46\u5bf9\u4e8e$x,y$\u8fd8\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u6761\u4ef6\uff0c\u5c31\u662f$x,y\\in\\mathbb N$\u3002\u4e0d\u96be\u53d1\u73b0$x,y$\u540c\u589e\u540c\u51cf\uff0c\u4e0d\u59a8\u627e\u5230\u4f7f\u5f97$x,y$\u90fd\u6700\u5c0f\u7684\u4e00\u7ec4\u89e3$\\begin{cases}x=x''\\\\y=y''\\end{cases}$\u3002$x,y$\u90fd\u6700\u5c0f\uff0c\u5f53\u4e14\u4ec5\u5f53$x-\\Delta x<0$\u6216$y-\\Delta y<0$\uff0c\u4e8e\u662f\u5206\u522b\u4ee4$x''=x'\\bmod \\Delta x,y''=y'\\bmod \\Delta y$\uff0c\u6bcf\u6b21\u5e26\u5165\u539f\u65b9\u7a0b\u89e3\u51fa\u53e6\u4e00\u4e2a\u53d8\u91cf\u770b\u662f\u5426$\\geq0$\uff0c\u5fc5\u6709\u4e00\u6b21\u5408\u6cd5\u3002\n\n\u73b0\u5728\u77e5\u9053\u4e86$x'',y''$\uff0c\u901a\u89e3\u5c31\u53d8\u6210\u4e86$\\begin{cases}x=x''+k\\Delta x\\\\y=y''+k\\Delta y\\end{cases}(k\\in \\mathbb N)$\u3002\u5c06$x=x''+k\\Delta x$\u5e26\u5165$a_1x+b_1\\in[l,r]$\u5f97\n$$a_1(x''+k\\Delta x)+b_1\\in[l,r]$$\n\u5373\n$$a_1x''+a_1k\\Delta x+b_1\\in[l,r]$$\n\u5373\n$$a_1k\\Delta x\\in[l-a_1x''-b_1,r-a_1x''-b_1]$$\n\u5373\n$$k\\in\\left[\\dfrac{l-a_1x''-b_1}{a_1\\Delta x},\\dfrac{r-a_1x''-b_1}{a_1\\Delta x}\\right]$$\n\u53c8\u56e0\u4e3a$k\\in\\mathbb N$\uff0c\u6240\u4ee5\n$$k\\in\\left[\\max\\left(0,\\left\\lceil\\dfrac{l-a_1x''-b_1}{a_1\\Delta x}\\right\\rceil\\right),\\left\\lfloor\\dfrac{r-a_1x''-b_1}{a_1\\Delta x}\\right\\rfloor\\right]$$\n\u7136\u540e\u7b97\u51fa$k_{\\min},k_{\\max}$\uff0c$\\max(0,k_{\\max}-k_{\\min}+1)$\u5c31\u662f\u7b54\u6848\u3002\n\n\u6700\u540e\u5410\u69fd\u4e00\u4e0b\uff0cC++\u4e2d\u7684`/`\u53f7\u662f\u5411\u96f6\u53d6\u6574\uff0c\u4e5f\u5c31\u662f$<0$\u65f6\u4e0a\u53d6\u6574\u3001$\\geq0$\u65f6\u4e0b\u53d6\u6574\uff0c$k$\u7684\u89e3\u96c6\u4e2d\u5982\u679c\u76f4\u63a5\u7528`/`\u53f7\u7b97\u4f1aWA~~\uff0c\u7136\u540e\u5fc3\u6001\u7206\u70b8~~\u3002\u6240\u4ee5\u5fc5\u987b\u8981\u5c06\u88ab\u9664\u6570\u548c\u9664\u6570\u7edf\u4e00\u53d6\u7edd\u5bf9\u503c\uff0c\u7136\u540e\u5229\u7528$\\left\\lfloor\\dfrac ab\\right\\rfloor+\\left\\lceil\\dfrac {-a}b\\right\\rceil=0$\u8fd9\u4e2a\u539f\u7406\u8ba1\u7b97\uff0c\u6700\u540e\u8be5\u53d6\u76f8\u53cd\u6570\u53d6\u76f8\u53cd\u6570\uff1a\n```cpp\nint div_floor(int x,int y){return (x<0)^(y<0)?-(abs(x)+abs(y)-1)/abs(y):x/y;}\nint div_ceil(int x,int y){return (x<0)^(y<0)?-abs(x)/abs(y):(x+y-1)/y;}\n```\n\u4e0b\u9762\u8d34AC\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint div_floor(int x,int y){return (x<0)^(y<0)?-(abs(x)+abs(y)-1)/abs(y):x/y;}//\u4e0b\u53d6\u6574 \nint div_ceil(int x,int y){return (x<0)^(y<0)?-abs(x)/abs(y):(x+y-1)/y;}//\u4e0a\u53d6\u6574 \nint exgcd(int a,int b,int &x,int &y){//Exgcd \n\tif(!b)return x=1,y=0,a;\n\tint d=exgcd(b,a%b,y,x);\n\treturn y-=a/b*x,d;\n}\nint a1,a2,b1,b2,l,r;//\u9898\u76ee\u7ed9\u7684\u53c2\u6570 \nsigned main(){\n\tcin>>a1>>b1>>a2>>b2>>l>>r;\n\tint x,y,gcd=exgcd(a1,-a2,x,y);\n\tif((b2-b1)%gcd)return puts(\"0\"),0;//\u65e0\u89e3 \n\tx*=(b2-b1)/gcd;y*=(b2-b1)/gcd;//\u627e\u5230\u7279\u89e3 \n\tint dx=abs(a2/gcd),dy=abs(a1/gcd); \n\t((x%=dx)+=dx)%=dx;y=(a1*x-(b2-b1))/a2;\n\tif(y<0)((y%=dy)+=dy)%=dy,x=(a2*y+(b2-b1))/a1;//\u627e\u5230\u4f7fx,y\u90fd\u6700\u5c0f\u7684\u89e3 \n\tint l0=max(0ll,div_ceil(l-a1*x-b1,a1*dx)),r0=div_floor(r-a1*x-b1,a1*dx);//k[min],k[max] \n\tcout<<max(0ll,r0-l0+1);//\u7b54\u6848 \n\treturn 0;\n}\n```",
        "postTime": 1583473350,
        "uid": 138400,
        "name": "chenxia25",
        "ccfLevel": 9,
        "title": "CodeForces 710D - Two Arithmetic Progressions"
    },
    {
        "content": "## \u8fd9\u662f\u4e00\u9053\u6269\u5c55\u6b27\u51e0\u91cc\u5fb7\u7b97\u6cd5\u88f8\u9898.\n\n### STEP1\n\n\u7531\u9898\u76ee\u4e2d\u7684\u5f0f\u5b50\n\n$$a_{1}k' + b_{1} = a_{2}l' + b_{2}$$\n\n\u53ef\u5f97\n\n$$a_{1}k' - a_{2}l' = b_{2} - b_{1}$$\n\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5957\u7528exgcd\u4e86.\u4e0d\u8fc7\u6211\u4e3a\u4e86\u65b9\u4fbf\u4ee4exgcd\u7684\u53c2\u6570\u4e0d\u80fd\u662f\u8d1f\u6570,\u6240\u4ee5\u8981\u8fdb\u4e00\u6b65\u8f6c\u5316\u4e3a\n\n$$a_{1}k' + a_{2}l'' = b_{2} - b_{1}$$\n\n\u5176\u4e2d\n\n$$l'' = -l'$$\n\n\u7136\u540e\u4e0d\u8981\u5fd8\u8bb0\u6839\u636e\u88f4\u8700\u5b9a\u7406\u68c0\u9a8c\u662f\u5426\u5b58\u5728\u6574\u6570\u89e3.\n\n### STEP2\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u7ec6\u8282\u7684\u5904\u7406\u4e86(\u849f\u84bb\u6211\u5728\u8fd9\u91cc\u6302\u4e86\u65e0\u6570\u6b21).\n\n\u6211\u4eec\u8bbe$kk$\u8868\u793a$k'$\u7684\u6700\u5c0f\u6539\u53d8\u91cf,\u4f7f\u5b58\u5728\u4e00\u4e2a\u6574\u6570$y'$\u4f7f\u7b49\u5f0f\u4f9d\u7136\u6210\u7acb.\u540c\u7406,\u4e5f\u8bbe$yy$\u4e3a$y'$\u7684\u6700\u5c0f\u6539\u53d8\u91cf.\n\n\u6211\u4eec\u53d1\u73b0,$k'$\u6bcf\u589e\u52a0$kk$,$l'$\u5c31\u589e\u52a0$ll$.\n\n\u6240\u4ee5,\u76ee\u524d\u6240\u6709\u7684\u9650\u5236\u6761\u4ef6\u5c31\u53d8\u6210\u4e86\n\n$$max\\left \\{  \\frac{L-b_{1}}{a_{1}},0\\right \\} \\leq k' \\leq \\frac{R-b_{1}}{a_{1}}$$\n\n$$max\\left \\{  \\frac{L-b_{2}}{a_{2}},0\\right \\} \\leq l' \\leq \\frac{R-b_{2}}{a_{2}}$$\n\n\u6240\u4ee5\u53ea\u8981\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\u5c31\u884c\u4e86.(\u53cd\u6b63\u5199\u8d77\u6765\u5f88\u6076\u5fc3\u5c31\u5bf9\u4e86QAQ)\n\n\u4ee3\u7801:\n\n```cpp\n#include<cstdio>\n#include<iostream>\nusing namespace std;\ntypedef long long LL;\n\n//-----------------------------------------\u51fd\u6570\u2193\nLL exgcd(LL a,LL b,LL &x,LL &y)\n{\n\tif(!b){return x=1,y=0,a;}\n\tLL dd=exgcd(b,a%b,y,x);\n\treturn y-=a/b*x,dd;\n}\n\n//-----------------------------------------main()\u2193\nint main()\n{\n\tLL a1,a2,b1,b2,L,R,k,l,kk,ll,l1,r1,l2,r2,x,gcd,lcm;\n\t\n\t//-----------------------------------------STEP1\u2193\n\tscanf(\"%I64d%I64d%I64d%I64d%I64d%I64d\",&a1,&b1,&a2,&b2,&L,&R);\n\tgcd=exgcd(a1,a2,k,l),lcm=a1*a2/gcd;\n\tif((b2-b1)%gcd)\n\t{\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n\t\n\t//-----------------------------------------STEP2\u2193\n\tk*=(b2-b1)/gcd,kk=lcm/a1;\n\tl*=(b1-b2)/gcd,ll=lcm/a2;\n\t\n\tl1=max(0ll,(L-b1)/a1+(L-b1>0?(!!((L-b1)%a1)):0)),r1=(R-b1)/a1-(R-b1<0?(!!((R-b1)%a1)):0);\n\tl2=max(0ll,(L-b2)/a2+(L-b2>0?(!!((L-b2)%a2)):0)),r2=(R-b2)/a2-(R-b2<0?(!!((R-b2)%a2)):0);\n\t/*\n\tl1,r1\u662fk\u7684\u4e24\u4e2a\u9650\u5236,l2,r2\u662fl\u7684\u4e24\u4e2a\u9650\u5236.\n\t\n\t\u4e24\u4e2a'!'\u7684\u610f\u601d\u662f\u8bf4:\u4e0d\u4e3a0\u5c31\u53d8\u62101,\u4e3a0\u5219\u8fd8\u662f0.\n\t\n\t\u4e0d\u80fd-1\u540e\u53d6\u6a21\u540e+1\u7684\u65b9\u6cd5,\u56e0\u4e3a\u6709\u8d1f\u6570!\n\t*/\n\t\n\tx=max((l1-k)/kk,(l2-l)/ll);//\u4f18\u5148\u6ee1\u8db3\u66f4\u4e25\u683c\u7684\u9650\u5236.\n\tk+=x*kk,l+=x*ll;\n\tif(k<l1||l<l2) k+=kk,l+=ll;//\u4e0a\u9762\u7684\u65b9\u6cd5\u6c42\u51fa\u6765\u7684\u6709\u53ef\u80fd\u5c0f\u4e8e\u4e0b\u9650,\u6240\u4ee5\u8fd8\u8981\u8c03\u6574.\n\tif(k>r1||l>r2)\n\t{\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n\tprintf(\"%I64d\",min((r1-k)/kk,(r2-l)/ll)+1);//\u4f18\u5148\u6ee1\u8db3\u66f4\u4e25\u683c\u7684\u9650\u5236.\n\treturn 0;\n}\n```\n\n _\u8c22\u8c22\u9605\u89c8\uff01_ ",
        "postTime": 1569288729,
        "uid": 108033,
        "name": "LYYY",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF710D \u3010Two Arithmetic Progressions\u3011"
    }
]
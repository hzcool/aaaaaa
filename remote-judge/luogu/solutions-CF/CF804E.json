[
    {
        "content": "\u6784\u9020\u54fc\u54fc\u55ef\u55ef\u5443\u5443\u554a\u554a\u554a\u554a\u554a\u554a!!!\n\n## \u65e0\u89e3\n\n\u5f53$n\\bmod4\\in\\{2,3\\}$\u4e00\u5b9a\u65e0\u89e3,\u56e0\u4e3a\u6bcf\u6b21\u64cd\u4f5c\u4f1a\u6539\u53d8\u9006\u5e8f\u5bf9\u6570\u5947\u5076\u6027.\n\n## $n\\bmod4=0$\n\n\u8003\u8651\u5269\u4e0b\u4e24\u79cd\u60c5\u51b5,\u9996\u5148\u5982\u679c\u6ee1\u8db3$n\\bmod4=0$,\u6bcf$4$\u4e2a\u5212\u5206\u4e3a\u4e00\u7ec4,\u7a0d\u5fae\u679a\u4e3e\u4e00\u4e0b\u53d1\u73b0\u53ef\u4ee5\u6309\u987a\u5e8f\u4ee5\u4e0b\u7f6e\u6362\n$$\n(1,2),(3,4),(1,4),(2,3),(1,3),(2,4)\n$$\n\u8fd9\u6837\u5c31\u6709\u4e86$\\frac{4}6\\cdot n=\\frac{3n}2$\u6b65,\u8fd8\u5dee$\\frac{n^2-n}2-\\frac{3n}2=\\frac{n^2-4n}2$\u6b65\u7f6e\u6362.\u53d1\u73b0\n$$\n\\frac{n^2-4n}2=\\binom{\\frac n4}2\\cdot16\n$$\n\u6240\u4ee5\u8003\u8651\u4efb\u610f\u4e24\u7ec4\u95f4\u8fdb\u884c\u7f6e\u6362\u4e14\u6070\u597d\u6d88\u8017$16$\u6b65,\u5e76\u4e14\u7531\u4e8e\u540c\u7ec4\u5185\u7684\u7f6e\u6362\u5df2\u7ecf\u7528\u5b8c\u6240\u4ee5\u4e0d\u80fd\u518d\u7528,\u4e0d\u540c\u7ec4\u95f4\u7684\u8fd8\u6ca1\u7528\u6240\u4ee5\u968f\u4fbf\u7528.\u679a\u4e3e\u540e\u5f97\u5230\n$$\n(1_a,1_b),(2_a,2_b),(1_a,2_b),(2_a,1_b),(1_a,3_b),(2_a,4_b),(1_a,4_b),(2_a,3_b),(3_a,1_b),(4_a,2_b),(3_a,2_b),(4_a,1_b),(3_a,3_b),(4_a,4_b),(3_a,4_b),(4_a,3_b)\n$$\n\n## $n\\bmod4=1$\n\n\u518d\u6765\u8003\u8651$n\\bmod4=1$\u7684\u60c5\u51b5,\u6b64\u65f6\u4f1a\u591a\u51fa$\\frac{n^2-n}2-\\frac{(n-1)^2-(n-1)}2=n-1$\u6b65\u64cd\u4f5c,\u6240\u4ee5\u53ea\u9700\u8981\u5728\u8fdb\u884c\u7ec4\u5185\u53d8\u6362\u7684\u65f6\u5019\u5c06\u4e24\u4e2a\u6570$a,b$\u76f4\u63a5\u4ea4\u6362\u7684\u8fc7\u7a0b\u7a0d\u52a0\u4fee\u6539,\u53d8\u4e3a$n\\leftrightarrow a,n\\leftrightarrow b$\u5373\u53ef.\n\n## Code\n\n```cpp\n#include <cstdio>\nusing namespace std;\n\ninline void qrint(int *t,int *r) {\n\tprintf(\"%d %d\\n\",t[0],r[0]);\n\tprintf(\"%d %d\\n\",t[1],r[1]);\n\tprintf(\"%d %d\\n\",t[0],r[1]);\n\tprintf(\"%d %d\\n\",t[1],r[0]);\n\tprintf(\"%d %d\\n\",t[0],r[2]);\n\tprintf(\"%d %d\\n\",t[1],r[3]);\n\tprintf(\"%d %d\\n\",t[0],r[3]);\n\tprintf(\"%d %d\\n\",t[1],r[2]);\n\tprintf(\"%d %d\\n\",t[2],r[0]);\n\tprintf(\"%d %d\\n\",t[3],r[1]);\n\tprintf(\"%d %d\\n\",t[2],r[1]);\n\tprintf(\"%d %d\\n\",t[3],r[0]);\n\tprintf(\"%d %d\\n\",t[2],r[2]);\n\tprintf(\"%d %d\\n\",t[3],r[3]);\n\tprintf(\"%d %d\\n\",t[2],r[3]);\n\tprintf(\"%d %d\\n\",t[3],r[2]);\n}\n\ninline void brint(int *t) {\n\tprintf(\"%d %d\\n\",t[0],t[1]);\n\tprintf(\"%d %d\\n\",t[2],t[3]);\n\tprintf(\"%d %d\\n\",t[0],t[3]);\n\tprintf(\"%d %d\\n\",t[1],t[2]);\n\tprintf(\"%d %d\\n\",t[0],t[2]);\n\tprintf(\"%d %d\\n\",t[1],t[3]);\n}\n\ninline void drint(int *t) {\n\tprintf(\"%d %d\\n\",t[0],t[1]);\n\tprintf(\"%d %d\\n\",t[2],t[3]);\n\tprintf(\"%d %d\\n\",t[0],t[3]);\n\tprintf(\"%d %d\\n\",t[1],t[2]);\n\tprintf(\"%d %d\\n\",t[0],t[4]);\n\tprintf(\"%d %d\\n\",t[1],t[4]);\n\tprintf(\"%d %d\\n\",t[0],t[2]);\n\tprintf(\"%d %d\\n\",t[1],t[3]);\n\tprintf(\"%d %d\\n\",t[3],t[4]);\n\tprintf(\"%d %d\\n\",t[2],t[4]);\n}\n\nint main() {\n\tstatic int t[5],r[5];\n\tint n; bool f; scanf(\"%d\",&n);\n\tif ((n&3)>1) puts(\"NO\");\n\telse {\n\t\tputs(\"YES\"); if (f=(n&3)) t[4]=n--;\n\t\tfor (int i=0;i<n;i+=4) {\n\t\t\tfor (int j=0;j<4;++j) t[j]=i+j+1;\n\t\t\tf?drint(t):brint(t);\n\t\t}\n\t\tfor (int i=0;i<n;i+=4) for (int j=i+4;j<n;j+=4) {\n\t\t\tfor (int k=0;k<4;++k) t[k]=i+k+1;\n\t\t\tfor (int k=0;k<4;++k) r[k]=j+k+1;\n\t\t\tqrint(t,r);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1601297581,
        "uid": 54189,
        "name": "konjacq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF804E \u3010The same permutation \u3011"
    },
    {
        "content": "[\u539f\u9898\u94fe\u63a5](https://www.luogu.com.cn/problem/CF804E)\n\n\u4fe1\u606f\u793e\u5927\u6bd2\u7624 [@zsyyyy](https://www.luogu.com.cn/user/457247) \u6a21\u62df\u8d5b T4 \u51fa\u7684\u8fd9\u9053\u9898...... srds \u573a\u4e0a $30 \\min$ \u5207\u4e86\uff0c\u6240\u4ee5\u6765\u5199\u8fd9\u7bc7\u9898\u89e3\u8bb0\u5f55\u4e00\u4e0b\u3002\n\n\uff08\u8003\u573a\u4e0a\u624b\u5de5\u6a21\u62df\u4e86 $1$ \u5230 $9$ \u7684\u6240\u6709\u60c5\u51b5\uff0c\u627e\u89c4\u5f8b\u505a\u7684\uff0c\u540e\u6765\u53d1\u73b0\u6709\u4e9b\u9ebb\u70e6\u4e86......\n \n## pre. \u5206\u6790\n\u9996\u5148\u662f\u53ef\u4ee5\u6839\u636e\u9006\u5e8f\u5bf9\u4e2a\u6570\u5206\u6790\u4e00\u4e0b\uff1a\u6bcf\u6b21\u4ea4\u6362\u4f1a\u589e\u52a0\u6216\u51cf\u5c11\u4e00\u4e2a\u9006\u5e8f\u5bf9\u3002\n\u5bf9\u4e8e $n \\bmod 4 = 2$ \u6216 $3$ \u7684\u60c5\u51b5\u663e\u7136\u65e0\u89e3\uff08\u5bf9\u4e8e\u8fd9\u7c7b\u60c5\u51b5\uff0c$\\dfrac{n(n-1)}2$ \u4e3a\u5947\u6570\uff0c\u6240\u4ee5\u6700\u7ec8\u4ecd\u4f1a\u51fa\u73b0\u9006\u5e8f\u5bf9\uff0c\u663e\u7136\u4e5f\u5c31\u65e0\u89e3\u4e86\uff09\u3002\n\n\u90a3\u4e48\u4e5f\u5c31\u662f\u8bf4\u53ea\u6709 $n \\bmod 4 = 0$ \u6216 $1$ \u7684\u65f6\u5019\u53ef\u80fd\u6709\u89e3\u3002\n\n\u90a3\u4e48\u4e0b\u9762\u53ea\u8981\u8003\u8651\u6784\u9020\u5c31\u53ef\u4ee5\u4e86\u3002\n\n## 1. $n \\bmod 4 = 0$\n\u56e0\u4e3a $n$ \u662f $4$ \u7684\u500d\u6570\uff0c\u6240\u4ee5\u8003\u8651 $4$ \u4e2a\u6570\u4e00\u7ec4\uff0c\u7f6e $k=n\\div 4$\uff0c\u5373\u5171\u6709 $k$ \u7ec4\u3002\n\n\u56e0\u4e3a\u6bcf\u4e24\u4e2a\u4f4d\u7f6e\u90fd\u8981\u4ea4\u6362\uff0c\u6240\u4ee5\u7ec4\u5185\u4e00\u5b9a\u662f\u8981\u4ea4\u6362\u7684\uff0c\u4e0b\u9762\u5c31\u7ed9\u51fa\u4e00\u79cd\u7ec4\u5185\u4ea4\u6362\u7684\u65b9\u6cd5\uff08\u7b26\u53f7 $(a,b)$ \u8868\u793a\u4ea4\u6362\u4f4d\u7f6e\u4e3a $a$ \u548c $b$ \u7684\u4e24\u4e2a\u6570\uff09\uff1a\n\n\u5982\u679c\u7ec4\u5185\u7684\u56db\u4e2a\u6570\u4f9d\u6b21\u4e3a\uff1a$a, b, c, d$\uff0c\u6709\u4e0b\u5217\u65b9\u6cd5\u53ef\u4ee5\u7ecf\u8fc7 $\\dfrac{4\\times(4-1)}2=6$ \u6b21\u4ea4\u6362\u4e4b\u540e\u53ef\u4ee5\u6362\u56de $a, b, c, d$\uff1a\n\n0. \u521d\u59cb\u72b6\u6001\uff1a$[a, b, c, d]$\uff1b\n1. $(1,4)$\uff1a$[d, b, c, a]$\uff1b\n2. $(1,3)$\uff1a$[c, b, d, a]$\uff1b\n3. $(2,4)$\uff1a$[c, a, d, b]$\uff1b\n4. $(1,2)$\uff1a$[a, c, d, b]$\uff1b\n5. $(3,4)$\uff1a$[a, c, b, d]$\uff1b\n6. $(2,3)$\uff1a$[a, b, c, d]$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u7ec4\u5185\u662f\u6bcf\u7ec4 $6$ \u6b21\uff0c\u90a3\u4e48\u5df2\u7ecf\u6709\u4e86\uff1a$6k$ \u6b21\u3002\n\n\u4e00\u5171\u8981\u4ea4\u6362\n$$\\frac{n(n-1)}2 = \\frac{4k \\cdot (4k-1)}2 = 2k(4k-1)=8k^2-2k$$\n\u6b21\uff0c\u8fd8\u5dee\uff1a$8k^2-2k-6k = 8k^2-8k$ \u6b21\u3002\n\n\u6b64\u65f6\u8981\u8003\u8651\u7ec4\u95f4\u4ea4\u6362\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e24\u7ec4\u4e00\u5171\u6709\uff1a$C_k^2=\\dfrac{k(k-1)}2 = \\dfrac{k^2-k}2$\u3002\n\n\u90a3\u4e48\u5c31\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e24\u7ec4\u64cd\u4f5c\u4e4b\u95f4 $\\dfrac{8k^2-8k}{\\dfrac{k^2-k}2} = 16$ \u6b21\u3002\u521a\u597d\u6bcf\u7ec4\u56db\u4e2a\u5143\u7d20\u64cd\u4f5c\uff1a$4 \\times 4=16$ \u6b21\uff0c\u6070\u597d\u53ef\u4ee5\u5408\u8d77\u6765\u7b49\u4e8e $\\dfrac{n(n-1)}2$\u3002\u53ea\u8981\u7ed9\u51fa\u6784\u9020\u5c31\u53ef\u4ee5\u3002\n\n$\\star$ \u7279\u522b\u7684\uff0c\u6b64\u65f6\u6bcf\u7ec4\u4e4b\u5185\u5c31\u4e0d\u518d\u4ea4\u6362\u4e86\uff0c\u56e0\u4e3a\u5df2\u7ecf\u5728\u7ec4\u5185\u4ea4\u6362\u8fc7\u4e86\u3002\u53ea\u8003\u8651\u7ec4\u95f4\u5143\u7d20\u7684\u4ea4\u6362\u3002\n\n\u4e0b\u9762\u7ed9\u51fa\u4e00\u79cd\u6784\u9020\u65b9\u6cd5\uff1a\n\n0. \u521d\u59cb\u60c5\u51b5\uff1a$[a, b, c, d \\ | \\ e, f, g, h]$\uff1b\n1. $(1,5)$\uff1a$[e, b, c, d \\ |\\ a, f, g, h]$\uff1b\n2. $(2,6)$\uff1a$[e, f, c, d \\ |\\ a, b, g, h]$\uff1b\n3. $(3,5)$\uff1a$[e, f, a, d \\ |\\ c, b, g, h]$\uff1b\n4. $(3,7)$\uff1a$[e, f, g, d \\ |\\ c, b, a, h]$\uff1b\n5. $(1,8)$\uff1a$[h, f, g, d \\ |\\ c, b, a, e]$\uff1b\n6. $(4,8)$\uff1a$[h, f, g, e \\ |\\ c, b, a, d]$\uff1b\n7. $(2,5)$\uff1a$[h, c, g, e \\ |\\ f, b, a, d]$\uff1b\n8. $(4,5)$\uff1a$[h, c, g, f \\ |\\ e, b, a, d]$\uff1b\n9. $(1,6)$\uff1a$[b, c, g, f \\ |\\ e, h, a, d]$\uff1b\n10. $(1,7)$\uff1a$[a, c, g, f \\ |\\ e, h, b, d]$\uff1b\n11. $(2,8)$\uff1a$[a, d, g, f \\ |\\ e, h, b, c]$\uff1b\n12. $(2,7)$\uff1a$[a, b, g, f \\ |\\ e, h, d, c]$\uff1b\n13. $(3,6)$\uff1a$[a, b, h, f \\ |\\ e, g, d, c]$\uff1b\n14. $(3,8)$\uff1a$[a, b, c, f \\ |\\ e, g, d, h]$\uff1b\n15. $(4,6)$\uff1a$[a, b, c, g \\ |\\ e, f, d, h]$\uff1b\n16. $(4,7)$\uff1a$[a, b, c, d \\ |\\ e, f, g, h]$\u3002\n\n\u5728\u5b9e\u73b0\u4ee3\u7801\u7684\u65f6\u5019\u6ce8\u610f\u4e00\u4e0b\u7ec6\u8282\u5c31\u53ef\u4ee5\u4e86\u3002\n\n## 2. $n \\bmod 4 = 1$\n\n\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u5148\u4e0d\u8003\u8651\u6700\u540e\u591a\u51fa\u6765\u7684\u4e00\u4e2a\u6570 $n$\uff0c\u5148\u8003\u8651 $1\\dots (n-1)$ \u8fd9 $(n-1)$ \u4e2a\u6570\uff0c\u8f6c\u5316\u4e3a\u4e0a\u9762\u7684\u60c5\u51b5\u3002\n\n\u6b64\u65f6\u5df2\u7ecf\u64cd\u4f5c $\\dfrac{(n-1)(n-1-1)}2 = \\dfrac{(n-1)(n-2)}2 = \\dfrac{n^2-3n+2}2$ \u6b21\u3002\n\n\u4f46\u662f\u672c\u8eab\u8981\u64cd\u4f5c\uff1a$\\dfrac{n(n-1)}2 = \\dfrac{n^2-n}2$ \u6b21\u3002\u5dee\u4e86\uff1a\n$$\\dfrac{n^2-n}2 - \\dfrac{n^2-3n+2}2 = \\dfrac{2n-2}2 = n-1$$\n\n\u6b21\u3002\n\n\u6216\u8005\u8bf4\uff0c\u5176\u5b9e\u5c31\u662f\u5dee\u4e86\u6bcf\u4e2a\u6570\u4e0e $n$ \u64cd\u4f5c\u7684\u5171 $n-1$ \u6b21\u3002\n\n\u5177\u4f53\u7684\uff0c\u6211\u63a8\u51fa\u7684\u6784\u9020\u65b9\u6cd5\u662f\uff0c\u5728\u7ec4\u5185\u64cd\u4f5c\u7684\u65f6\u5019\u6bcf\u4e2a\u6570\u90fd\u4e0e $n$ \u8fdb\u884c\u4e00\u6b21\u4ea4\u6362\u3002\u7ecf\u8fc7\u8fd9\u4e2a\u53d8\u5316\u540e\u7684\u7ec4\u5185\u4ea4\u6362\u662f\uff1a\n\n0. \u521d\u59cb\u60c5\u51b5\uff1a$[a, b, c, d \\ |\\ n]$\uff1b\n1. $(1, n)$\uff1a$[n, b, c, d \\ |\\ a]$\uff1b\n2. $(1, 2)$\uff1a$[b, n, c, d \\ |\\ a]$\uff1b\n3. $(2, n)$\uff1a$[b, a, c, d \\ |\\ n]$\uff1b\n4. $(4, n)$\uff1a$[b, a, c, n \\ |\\ d]$\uff1b\n5. $(3, 4)$\uff1a$[b, a, n, c \\ |\\ d]$\uff1b\n6. $(3, n)$\uff1a$[b, a, d, c \\ |\\ n]$\uff1b\n7. $(1, 4)$\uff1a$[c, a, d, b \\ |\\ n]$\uff1b\n8. $(1, 3)$\uff1a$[d, a, c, b \\ |\\ n]$\uff1b\n9. $(2, 4)$\uff1a$[d, b, c, a \\ |\\ n]$\uff1b\n10. $(1, 4)$\uff1a$[a, b, c, d \\ |\\ n]$\u3002\n\n## 3. code\n\u81f3\u6b64\uff0c\u6240\u6709\u7684\u60c5\u51b5\u5c31\u90fd\u8ba8\u8bba\u5b8c\u4e86\u3002\u968f\u4fbf\u5b9e\u73b0\u4e00\u4e0b\u4ee3\u7801\u5c31\u884c\uff0c\u6ce8\u610f\u4e00\u4e0b\u7ec6\u8282\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconstexpr int maxn = 1e3 + 17;\nint n, zushu;\n\nstruct cls\n{\n    int a, b, c, d;\n    cls() {}\n    cls(const int& a, const int& b, const int& c, const int& d): a(a), b(b), c(c), d(d) {}\n    \n    int& operator[](const int& idx)\n    {\n        if(idx == 1) return a;\n        if(idx == 2) return b;\n        if(idx == 3) return c;\n        if(idx == 4) return d;\n    }\n\n    inline void init(const int& aa)\n    {\n        a = aa+1, b = aa+2, c = aa+3, d = aa+4;\n    }\n}zu[maxn>>2];\n\ninline void zunei_0(cls& a) // mod 4 = 0 \n{\n    printf(\"%d %d\\n\", a[1], a[4]),\n    printf(\"%d %d\\n\", a[1], a[3]),\n    printf(\"%d %d\\n\", a[2], a[4]),\n    printf(\"%d %d\\n\", a[1], a[2]),\n    printf(\"%d %d\\n\", a[3], a[4]),\n    printf(\"%d %d\\n\", a[2], a[3]);\n}\n\ninline void zunei_1(cls &a) // mod 4 = 1\n{\n    printf(\"%d %d\\n\", a[1], n),\n\tprintf(\"%d %d\\n\", a[1], a[2]),\n\tprintf(\"%d %d\\n\", a[2], n),\n\tprintf(\"%d %d\\n\", a[4], n),\n    printf(\"%d %d\\n\", a[3], a[4]),\n    printf(\"%d %d\\n\", a[3], n),\n    printf(\"%d %d\\n\", a[1], a[4]),\n    printf(\"%d %d\\n\", a[2], a[3]),\n    printf(\"%d %d\\n\", a[1], a[3]),\n    printf(\"%d %d\\n\", a[2], a[4]);\n}\n\ninline void zujian(cls &a, cls &b)\n{\n    printf(\"%d %d\\n\", a[1], b[1]),\n    printf(\"%d %d\\n\", a[2], b[2]),\n    printf(\"%d %d\\n\", a[3], b[1]),\n    printf(\"%d %d\\n\", a[3], b[3]),\n    printf(\"%d %d\\n\", a[1], b[4]),\n    printf(\"%d %d\\n\", a[4], b[4]),\n    printf(\"%d %d\\n\", a[2], b[1]),\n    printf(\"%d %d\\n\", a[4], b[1]),\n    printf(\"%d %d\\n\", a[1], b[2]),\n    printf(\"%d %d\\n\", a[1], b[3]),\n    printf(\"%d %d\\n\", a[2], b[4]),\n    printf(\"%d %d\\n\", a[2], b[3]),\n    printf(\"%d %d\\n\", a[3], b[2]),\n    printf(\"%d %d\\n\", a[3], b[4]),\n    printf(\"%d %d\\n\", a[4], b[2]),\n\tprintf(\"%d %d\\n\", a[4], b[3]);\n}\n\nsigned main()\n{\n    ios::sync_with_stdio(false);\n    cin.tie(0), cout.tie(0);\n    \n    cin >> n;\n    \n    switch(n&3)\n    {\n        case 0:\n            puts(\"YES\");\n            zushu = n>>2;\n            for(register int i=0; i<zushu; ++i)\n                zu[i].init(i<<2);\n            for(register int i=0; i<zushu; ++i)\n                zunei_0(zu[i]);\n            for(register int i=0; i<zushu; ++i)\n                for(register int j=0; j<i; ++j)\n                    if(i != j) zujian(zu[i], zu[j]);\n            break;\n\n        case 1:\n            puts(\"YES\");\n            zushu = n>>2;\n            for(register int i=0; i<zushu; ++i)\n                zu[i].init(i<<2);\n            for(register int i=0; i<zushu; ++i)\n                zunei_1(zu[i]);\n            for(register int i=0; i<zushu; ++i)\n                for(register int j=0; j<i; ++j)\n                    if(i != j) zujian(zu[i], zu[j]);\n            break;\n        \n        case 2:\n            puts(\"NO\");\n            return 0;\n            break;\n        \n        case 3:\n            puts(\"NO\");\n            return 0;\n            break;\n    }\n    return 0;\n}\n```",
        "postTime": 1676963539,
        "uid": 344700,
        "name": "calabash_love_hmz",
        "ccfLevel": 6,
        "title": "CF804E The same permutation \u9898\u89e3"
    }
]
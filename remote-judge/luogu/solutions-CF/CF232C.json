[
    {
        "content": "\u6253\u72d7 $\\to$ [`George1123`](https://www.cnblogs.com/George1123/p/14231560.html)\n\n---\n\n## \u9898\u9762\n\n> [CF232C Doe Graphs](https://www.luogu.com.cn/problem/CF232C)\n\n> $0$ \u7ea7 `Doe` \u56fe\u662f\u4e00\u4e2a\u70b9\uff0c$1$ \u7ea7 `Doe` \u56fe\u662f\u4e24\u4e2a\u70b9\u52a0\u4e00\u6761\u8fb9\uff0c$k$ \u7ea7 `Doe` \u56fe\u662f\u4e00\u4e2a $k-1$ \u7ea7 `Doe` \u56fe\u52a0\u4e0a\u4e00\u4e2a\u7f16\u53f7\u5168\u52a0\u4e86 $k-1$ \u7ea7 `Doe` \u56fe\u5927\u5c0f\u7684 $k-2$ \u7ea7 `Doe` \u56fe\u3002\u7ed9\u4e00\u4e2a $n$ \u7ea7 `Doe` \u56fe\uff0c$m$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u67e5\u8be2 $a$ \u548c $b$ \u4e24\u70b9\u95f4\u7684\u6700\u77ed\u8def\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$1\\le n\\le 10^3$\uff0c$1\\le m\\le 10^5$\uff0c$1\\le a,b\\le 10^{16}$\u3002\n\n---\n\n## \u9898\u89e3\n\n\u809d\u4e86\u4e00\u4e2a\u4e0b\u5348\u6700\u7ec8\u8d3a\u9898\u4e86\u3002\u65e2\u7136\u72d7\u505a\u4e0d\u52a8\u9898\uff0c\u5c31\u591a\u5199\u70b9\u9898\u89e3\u5427\u3002\n\n\u6ce8\u610f\u5230 $a,b$ \u6bd4 $fib_n$ \u5c0f\u5f88\u591a\uff0c\u53d1\u73b0 $n$\uff08$fib_{79}$ \u5c31 $>10^{16}$\uff09 \u53ef\u4ee5\u548c $80$ \u53d6\u6700\u5c0f\u503c\u3002\n\n\u8003\u8651\u4e00\u4e2a $k$ \u7ea7\u56fe\uff0c\u628a $k-1$ \u7ea7\u90e8\u5206\u53eb\u505a $A$\uff0c\u628a $k-2$ \u7ea7\u90e8\u5206\u53eb\u505a $B$\u3002\n\n\u6709\u56db\u4e2a\u70b9\uff1a$S=1$\uff0c$T_A=fib_{k-1}$\uff0c$S_B=T_A+1$\uff0c$T=fib_{k}$\u3002\n\n\u6709\u4e24\u6761\u8fb9\u5728\u8fd9\u91cc\uff1a$(S,S_B)$\uff0c$(T_A,S_B)$\u3002\n\n---\n\n\u5bb9\u6613\u60f3\u5230\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u70b9\u5230 $S$ \u7684\u8ddd\u79bb\u548c\u5230 $T$ \u7684\u8ddd\u79bb\uff0c\u7136\u540e\u4efb\u610f\u4e24\u70b9\u95f4\u7684\u8be2\u95ee\uff0c\u8c8c\u4f3c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e24\u4e2a\u8ddd\u79bb\u641e\u51fa\u6765\u3002\n\n\u8fd9\u6837\u4fbf\u7f29\u5c0f\u4e86\u67e5\u8be2\u7684\u4e00\u7ef4\u3002\u4f46\u662f\u8fd8\u662f\u4e0d\u80fd\u76f4\u63a5\u6c42\u3002\n\n\u7531\u4e8e $a,b$ \u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u5b83\u4eec\u5728\u6bcf\u7ea7\u56fe\u4e2d\u7684\u5730\u4f4d\u4e5f\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u53ea\u7b97\u5bf9\u4e8e\u4e00\u4e2a\u67e5\u8be2\u7684\u70b9 $u$\uff0c\u8ba1\u7b97\u5b83\u5728\u6bcf\u5c42\u56fe\u4e2d\u548c $S,T$ \u7684\u8ddd\u79bb\uff0c\u8fd9\u4e1c\u897f\u662f\u53ef\u4ee5\u9012\u63a8\u7684\u3002\n\n\u5982\u679c\u8bbe $f(k,0/1)$ \u8868\u793a $k$ \u7ea7\u56fe\u4e0b $u$ \u5230 $S/T$ \u7684\u8ddd\u79bb\uff0c\u4fbf\u53ef\u4ee5\u975e\u5e38\u777f\u667a\u5730\u73a9\u51fa\u4e00\u4e2a\u9012\u63a8\u65b9\u7a0b\uff0c\u4f46\u5b83\u662f\u9519\u7684\u3002\n\n\u73a9\u7684\u65f6\u5019\uff0c\u4f1a\u53d1\u73b0\u4e00\u4e2a $k$ \u7ea7\u56fe\u5916\u7684\u8fb9\u4e5f\u662f\u5bf9\u5185\u90e8\u7684\u8ddd\u79bb\u6709\u5f71\u54cd\u7684\u3002\n\n\u6700\u597d\u7684\u4f8b\u5b50\u5c31\u662f\u5bf9\u4e8e $S$ \u548c $T_A$\uff0c\u5b83\u4eec\u90fd\u8fde\u5411 $S_B$\uff0c\u800c\u5b83\u4eec\u7684\u5185\u90e8\u8ddd\u79bb\u53ef\u80fd $>2$\u3002\n\n\u7136\u540e\u72d7\u5c31\u662f\u5f88 `naive` \u4ee5\u4e3a\u53ea\u8981\u5bf9\u8fd9\u79cd\u60c5\u51b5\u7279\u6b8a\u5904\u7406\u6389\u5c31 `OK` \u4e86\uff0c\u6ca1\u60f3\u5230\u6709\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n\u6709\u4ee5\u4e0b\u8fb9\uff1a$(S,T)$\uff0c$(T_A,S_B)$\uff0c$(S,S_B)$\uff0c\u7136\u540e\u67e5\u8be2 $S_B$ \u5230 $T$ \u7684\u8ddd\u79bb\u3002\n\n\u8fd9\u79cd\u65f6\u5176\u5b9e\u662f\u6709\u4e2a\u6027\u8d28\u7684\uff1a\u6240\u6709\u7684\u5916\u90e8\u8fb9\u7684\u5f71\u54cd\u53ef\u4ee5\u6539\u4e3a\u5728 $S,T$ \u4e4b\u95f4\u52a0\u4e00\u6761\u5e26\u6743\u8fb9\u3002\n\n\u53ef\u4ee5\u628a `dp` \u8f6c\u6210\u641c\u7d22\uff0c$dp(u,k,d)$ \u8868\u793a $k$ \u7ea7\u56fe\uff0c$S,T$ \u4e0a\u6709\u4e00\u6761\u957f\u5ea6 $k$ \u7684\u8fb9\uff0c\u8fd4\u56de\u503c\u662f\u4e2a `pair`\uff0c\u5373 $u$ \u5230 $S,T$ \u7684\u8ddd\u79bb\u3002\n\n\u7136\u540e\u5c31\u5f88\u597d\u9012\u63a8\u4e86\u3002\n\n---\n\n\u518d\u8003\u8651\u63a5\u4e0b\u6765\u5982\u4f55\u6c42 $a,b$ \u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u4e0d\u59a8\u8bbe $a<b$\u3002\n\n\u53d1\u73b0\u4e5f\u4e0d\u80fd\u76f4\u63a5\u628a $n$ \u66ff\u6362\u6210\u6700\u5c0f\u7684 $k$ \u4f7f\u5f97 $b\\le fib_k$\uff0c\u539f\u7406\u540c\u4e0a\uff1a\u6709\u5916\u90e8\u5f71\u54cd\u3002\n\n> \u4f46\u662f\u63a8\u63a8\u53ef\u4ee5\u53d1\u73b0\uff1a\u867d\u7136\u6574\u4e2a\u56fe\u5bf9\u7b54\u6848\u6709\u5f71\u54cd\uff0c\u4f46\u56e0\u4e3a\u5982\u679c\u5bf9\u4e8e\u6700\u5c0f $k$ \u6ee1\u8db3 $b\\le fib_{k-1}$\uff0c$a,b$ \u5fc5\u7136\u90fd\u5728\u5b83\u5927\u7684\u90e8\u5206\u5b50\u56fe\u5185\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684 $d$ \u80af\u5b9a\u662f $2$\uff0c\u6240\u4ee5 $n$ \u548c $80$ \u53d6 `min` \u4f9d\u7136\u662f\u53ef\u4ee5\u7684 `/cy`\u3002\n\n\u6240\u4ee5\u540c\u6837\u53ef\u4ee5\u641c\u7d22\uff0c\u8bbe $solve(u,v,k,d)$ \u8868\u793a $k$ \u7ea7\u56fe\uff0c$S,T$ \u4e0a\u6709\u4e00\u6761\u957f\u5ea6 $k$ \u7684\u8fb9\uff0c\u8fd4\u56de\u5b83\u4eec\u95f4\u7684\u8ddd\u79bb\u3002\n\n---\n\n\u81f3\u4e8e $d$ \u600e\u4e48\u9012\u63a8\uff0c`dp` \u600e\u4e48\u9012\u63a8\uff08\u5305\u62ec\u4e0a\u9762\uff09\u7559\u7ed9\u8bfb\u8005\u81ea\u884c\u601d\u8003\u4e86\u3002\n\n**\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(80m)$\u3002**\n\n---\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double db;\n#define x first\n#define y second\n#define bg begin()\n#define ed end()\n#define pb push_back\n#define mp make_pair\n#define sz(u) int((u).size())\n#define R(i,n) for(int i(0);i<(n);++i)\n#define L(i,n) for(int i((n)-1);i>=0;--i)\nconst int iinf=0x3f3f3f3f;\nconst ll linf=0x3f3f3f3f3f3f3f3f;\n\n//Data\nconst int N=80;\nint n;\n\n//Math\nll fib[N];\nvoid math_init(){\n    fib[0]=fib[1]=1;\n    for(int i=2;i<N;++i)    \n        fib[i]=fib[i-1]+fib[i-2];\n}\n\n//Function\n#define mi fib[k-1]\npair<int,int> dp(ll u,int k,int d=iinf){\n    if(k<=1) return mp(0,0);\n    if(u<mi){\n        auto p=dp(u,k-1,2);\n        return mp(p.x,min(min(p.x,p.y)+1+(k-2)/2,p.x+d));\n    } else {\n        auto p=dp(u-mi,k-2,d+1);\n        return mp(min(p.x+1,p.y+d),p.y);\n    }\n}\nint solve(ll u,ll v,int k,int d=iinf){\n    if(u==0&&v==fib[k]-1) return min(d,k/2);\n    if(v<mi) return solve(u,v,k-1,2);\n    if(u>=mi) return solve(u-mi,v-mi,k-2,d+1);\n    auto ud=dp(u,k-1,2),vd=dp(v-mi,k-2,d+1);\n    return min(min(ud.x,ud.y)+1+vd.x,ud.x+d+vd.y);\n}\n\n//Main\nint main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0),cout.tie(0);\n    math_init();\n    int m; cin>>m>>n,n=min(n+1,N-1);\n    while(m--){\n        ll u,v; cin>>u>>v,--u,--v;\n        if(u>v) swap(u,v);\n        cout<<solve(u,v,n)<<'\\n';\n    }\n    return 0;\n}\n\n```\n\n---\n\n**\u795d\u5927\u5bb6\u5b66\u4e60\u6109\u5feb\uff01**",
        "postTime": 1609757745,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF232C \u3010Doe Graphs\u3011"
    },
    {
        "content": "\u6211\u4eec\u9884\u5904\u7406\u51fa $a,b$ \u5728\u6bcf\u4e00\u5c42\u4e2d\u7684\u7f16\u53f7\uff0c\u7136\u540e\u4ece$n$\u5c42\u5f00\u59cb\u9012\u5f52\n\n\u5206\u4e09\u79cd\u60c5\u51b5\uff1a\n\n$a$ \u5728 $n-1$ \u5c42\uff0c$b$ \u5728 $n-2$ \u5c42\uff1a\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u4e24\u70b9\u5fc5\u7ecf\u8fc7\u8fde\u63a5n-1\u5c42\u548cn-2\u7684\u8fb9\u3002\u6240\u4ee5\u6211\u4eec\u9012\u5f52\u4e0b\u53bb\uff0c\u4f7f\u5f97a\u5f3a\u5236\u8d70\u5230n-1\u7684\u5f00\u5934\uff0cb\u8d70\u5230n-2\u7684\u5f00\u5934\u6216\u7ed3\u5c3e\uff08\u56e0\u4e3a\u9996\u5c3e\u90fd\u6709\u8fb9\uff09\u3002\n\n$.........................................................................................................$\n\n\u5176\u4ed6\u4e24\u79cd\u60c5\u51b5\u4e5f\u7c7b\u4f3c\u3002\u3002\u8fd9\u91cc\u5c31\u4e0d\u63d0\u4e86\n\n\u653e\u4e2a\u4ee3\u7801\uff08\u4e0d\u96be\uff0c\u770b\u7740\u4ee3\u7801\u5c31\u80fd\u8f7b\u677e\u60f3\u51fa\u6765\u4e86QAQ\uff09\uff1a\n\n```c\nint work(int a,int b,int n){\n\tif (n==-1||p[n][a]==p[n][b]) return 0;\n\tif (g[n][a][b]) return g[n][a][b];\n\tint ans;\n\tif (p[n][a]>f[n-1]) ans=work(a,b,n-2);//\u90fd\u5728n-2\u5c42\n\telse if (p[n][a]<=f[n-1]&&p[n][b]>f[n-1])//\u5728\u4e0d\u540c\u5c42\n\t\tans=min(work(0,a,n-1),work(a,3,n-1))+1+work(0,b,n-2);\n\telse ans=min(work(a,b,n-1),min(work(0,a,n-1)+work(b,3,n-1),work(0,b,n-1)+work(a,3,n-1))+2);\n\treturn g[n][a][b]=ans;\n}\n//0\u8868\u793a\u8d70\u5230\u5f00\u5934\uff0c3\u8868\u793a\u8d70\u5230\u7ed3\u5c3e\nint main(){\n\tscanf(\"%d%d\",&T,&nn);\n\tf[0]=1; f[1]=2;\n\tfor (n=2;;++n){\n\t\tf[n]=f[n-1]+f[n-2];\n\t\tif (f[n]>1e16) break;\n\t}\n\tn=min(n,nn);\n\twhile (T--){\n\t\tll x,y;\n\t\tscanf(\"%lld%lld\",&x,&y);\n\t\tif (x>y) swap(x,y);\n\t\tRep(j,n,0){\n\t\t\tp[j][0]=1; p[j][3]=f[j];\n\t\t\tp[j][1]=x; p[j][2]=y;\n\t\t\tif (j&&x>f[j-1]) x-=f[j-1];\n\t\t\tif (j&&y>f[j-1]) y-=f[j-1];\n\t\t\tFor(k,0,2) For(l,1,3) g[j][k][l]=0;\n\t\t\tg[j][0][3]=(j+1)/2;\n\t\t}\n\t\tprintf(\"%d\\n\",work(1,2,n));\n\t}\n}\n```",
        "postTime": 1550382954,
        "uid": 50251,
        "name": "\u59ec\u5c0f\u8def\u79cb\u5b50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF232C \u3010Doe Graphs\u3011"
    },
    {
        "content": "\u6458\u81ea\u6211\u7684 [\u8d2a\u5fc3 & \u6784\u9020 & DP \u6742\u9898\u9009\u505a \u2161](https://www.cnblogs.com/ET2006/p/greedy-construction-dp2.html) \u7b2c $35$ \u9898\u3002\n\n~~\u4ee3\u7801 10 \u5206\u949f\uff0cdebug \u4e24\u5c0f\u65f6~~\n\n~~\u53c8\u662f\u7cbe\u795e\u5d29\u6e83\u7684\u4e00\u5929/dk~~\n\n\u9996\u5148\u8fd9\u4e2a Doe \u56fe\u662f\u9012\u5f52\u6784\u9020\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u8003\u8651**\u9012\u5f52\u5730\u6c42\u89e3\u67d0\u4e9b\u91cf\uff0c\u8fdb\u800c\u8ba1\u7b97\u51fa\u7b54\u6848**\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u4e00\u4e2a $n$ \u9636 Doe \u56fe\u4e2d\uff0c\u6709\u4e24\u4e2a\u70b9\u662f\u975e\u5e38\u7279\u6b8a\u7684\uff1a$1$ \u548c $|D_n|$\uff0c\u56e0\u4e3a\u53ea\u6709\u7ecf\u8fc7\u5b83\u4eec\u624d\u80fd\u8fdb\u5165\u5176\u4ed6 Doe \u56fe\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u8bbe $F(n,x)$ \u8868\u793a\u5728\u4e00\u4e2a $n$ \u9636 Doe \u56fe\u4e2d\uff0c$x$ \u5230 $1$ \u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u518d\u8bbe $G(n,x)$ \u8868\u793a\u5728\u4e00\u4e2a $n$ \u9636 Doe \u56fe\u4e2d\uff0c$x$ \u5230 $|D_n|$ \u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u8003\u8651\u5982\u4f55\u9012\u5f52\u5730\u6c42\u89e3 $F,G$\uff1a\n\n- \u5982\u679c $x\\le\\text{fib}_{n-1}$\uff0c\u5219\u610f\u5473\u7740 $x$ \u5728\u5de6\u534a\u8fb9\u7684 $D_{n-1}$ \u5b50\u56fe\u4e2d\uff0c\u90a3\u4e48 $x$ \u5230 $1$ \u6709\u4e24\u79cd\u53ef\u80fd\uff0c\u8981\u4e48\u76f4\u63a5\u5728\u5de6\u534a\u8fb9\u7684\u5b50\u56fe\u5185\u8d70\u5230 $1$\uff0c\u8981\u4e48\u5148\u8d70\u5230 $|D_{n-1}|$\uff0c\u518d\u8d70\u5230 $|D_{n-1}|+1$\uff0c\u6700\u540e\u518d\u8d70\u5230 $1$\uff0c\u6ce8\u610f\uff0c\u540e\u9762\u90a3\u79cd\u60c5\u51b5\u5f88\u5bb9\u6613\u5ffd\u7565\uff0c\u6211\u56e0\u4e3a\u5ffd\u7565\u4e86\u540e\u8005\u800c\u75af\u72c2 WA 14\u3002$x$ \u5230 $|D_{n}|$ \u5219\u53ea\u80fd\u8981\u4e48\u5148\u8d70\u5230 $1$\uff0c\u8981\u4e48\u5148\u8d70\u5230 $|D_{n-1}|$\uff0c\u518d\u8d70\u5230 $|D_{n-1}|+1$\uff0c\u518d\u5728\u53f3\u8fb9\u7684\u5b50\u56fe\u5185\u8d70\u5230 $D_{n}$\uff0c\u800c\u6253\u4e2a\u8868\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728 $D_n$ \u4e2d\uff0c$1$ \u4e0e $|D_n|$ \u7684\u6700\u77ed\u8ddd\u79bb\u4e3a $\\lceil\\dfrac{n}{2}\\rceil$\uff0c\u56e0\u6b64\u5728\u53f3\u8fb9\u5b50\u56fe\u4e2d\u7ecf\u8fc7\u7684\u6700\u77ed\u8ddd\u79bb\u5c31\u662f $\\lceil\\dfrac{n-2}{2}\\rceil$\u3002\n- \u5982\u679c $x>\\text{fib}_{n-1}$\uff0c\u90a3\u4e48 $x$ \u5230 $1$ \u80af\u5b9a\u4f1a\u5148\u5728\u53f3\u8fb9\u5b50\u56fe\u5185\u8d70\u5230 $|D_{n-1}|+1$\uff0c\u518d\u4e00\u6b65\u8d70\u5230 $1$\uff0c\u800c $x$ \u5230 $|D_n|$ \u5219\u53ea\u80fd\u5728\u53f3\u534a\u90e8\u5206\u8d70\uff0c\u5230\u5de6\u534a\u90e8\u5206\u80af\u5b9a\u662f\u4e0d\u4f18\u7684\uff0c\u8fd9\u4e2a\u540c\u6837\u53ef\u4ee5\u9012\u5f52\u6c42\u51fa\u3002\n\n\u8fd9\u6837\u5355\u6b21\u6c42\u89e3 $F/G$ \u7684\u590d\u6742\u5ea6\u5c31\u964d\u5230\u4e86 $\\Theta(\\log n)$\uff0c\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u6c42\u89e3\u7b54\u6848\uff0c\u6211\u4eec\u8bbe $H(n,a,b,len)$ \u8868\u793a\u5728 $n$ \u9636 Doe \u56fe\u4e2d\uff0c$1$ \u4e0e $D_n$ \u4e4b\u95f4\u8fde\u4e86\u4e00\u6761\u957f\u5ea6\u4e3a $len$ \u7684\u94fe\uff08\u6ce8\u610f\uff0c\u8fd9\u79cd\u60c5\u51b5\u540c\u6837\u4e5f\u5f88\u5bb9\u6613\u5ffd\u7565\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u4f60\u70b9\u5f00 test 6 \u7684\u6570\u636e\uff0c\u4f60\u53d1\u73b0\u5728 $D_{1000}$ \u4e2d\uff0c$1$ \u548c $13$ \u7684\u8ddd\u79bb\u4e0d\u662f $D_5$ \u4e2d $1$ \u548c $13$ \u7684\u8ddd\u79bb $3$\uff0c\u800c\u662f $2$\uff0c\u56e0\u4e3a\u53ef\u4ee5 $1\\to 14\\to 13$\uff0c\u8fd9\u65f6\u5019 $1$ \u548c $13$ \u4e4b\u95f4\u5c31\u53ef\u4ee5\u89c6\u4f5c\u8fde\u4e0a\u4e86\u4e00\u6761\u957f\u5ea6\u4e3a $2$ \u7684\u94fe\uff09\uff0c$a$ \u4e0e $b$ \u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\u3002\u8fd8\u662f\u5206\u4e09\u79cd\u60c5\u51b5\u8003\u8651\uff1a\n\n- \u5982\u679c $a,b$ \u90fd\u5728\u5de6\u5b50\u56fe\u5185\uff0c\u76f4\u63a5\u9012\u5f52\u5de6\u5b50\u56fe\u5185\uff0c\u5373 $H(n-1,a,b,2)$\n\n- \u5982\u679c $a,b$ \u90fd\u5728\u53f3\u5b50\u56fe\u5185\uff0c\u5230\u53f3\u5b50\u56fe\u5185\u9012\u5f52\uff0c$H(n-2,a-\\text{fib}_{n-1},b-\\text{fib}_{n-1},len+1)$\n\n- \u5982\u679c $a,b$ \u4e00\u4e2a\u5728\u5de6\u5b50\u56fe\u5185\uff0c\u4e00\u4e2a\u5728\u53f3\u5b50\u56fe\u5185\uff0c\u90a3\u4e48\u6211\u4eec\u8ba1\u7b97\u7b54\u6848\uff0c\u5206\u4e09\u79cd\u60c5\u51b5\uff1a\n\n  - $a\\to 1\\to |D_{n-1}|+1\\to b$\n  - $a\\to |D_{n-1}|\\to|D_{n-1}|+1\\to b$\n  - $a\\to 1\\to |D_n|\\to b$\n\n  \u5206\u522b\u8ba8\u8bba\u4e00\u4e0b\u5373\u53ef\u3002\u4e09\u79cd\u60c5\u51b5\u7684\u7b54\u6848\u5747\u53ef\u901a\u8fc7\u8c03\u7528 $F/G$ \u51fd\u6570\u7b97\u51fa\u3002\n\n\u603b\u590d\u6742\u5ea6 $\\Theta(q\\log n)$\u3002\n\n```cpp\nusing namespace fastio;\nconst int MAXD=82;\nconst int INF=0x3f3f3f3f;\nint n;ll fib[MAXD+5];\npii FG(int id,ll x){\n//the minimum distance between x and 1 in graph id\n//and the minimum distance between x and fib[id] in graph id\n\tif(x==fib[id]) return mp(id+1>>1,0);\n\tif(x==1) return mp(0,id+1>>1);\n\tif(x<=fib[id-1]){\n\t\tpii nt=FG(id-1,x);\n\t\treturn mp(min(nt.fi,nt.se+2),min(nt.fi,nt.se)+1+FG(id-2,1).se);\n\t} else {\n\t\tpii nt=FG(id-2,x-fib[id-1]);\n\t\treturn mp(nt.fi+1,nt.se);\n\t}\n}\nint query(ll a,ll b,int x,int len){\n\tif(x==1) return 1;\n//\tprintf(\"%lld %lld %d %d\\n\",a,b,x,len);\n\tif(b<=fib[x-1]) return query(a,b,x-1,2);\n\telse if(a<=fib[x-1]){\n\t\tpii p1=FG(x-2,b-fib[x-1]),p2=FG(x-1,a);\n\t\tpii p3=FG(x,a),p4=FG(x,b);\n\t\tint res=p1.fi+1+min(p2.fi,p2.se);\n\t\tchkmin(res,p3.fi+p4.se+len);\n\t\tchkmin(res,p3.se+p4.fi+len);\n\t\treturn res;\n\t} else return query(a-fib[x-1],b-fib[x-1],x-2,len+1);\n}\nint main(){\n\tfib[0]=1;fib[1]=2;\n\tfor(int i=2;i<=MAXD;i++) fib[i]=fib[i-1]+fib[i-2];\n\tint qu;scanf(\"%d%d\",&qu,&n);\n\twhile(qu--){\n\t\tll a,b;read(a);read(b);\n\t\tif(a>b) swap(a,b);\n\t\tif(a==b){print(0,'\\n');continue;}\n\t\tint x=0;while(b>fib[x]) ++x;\n\t\tprint(query(a,b,x,(x==n)?INF:2),'\\n');\n\t} print_final();\n\treturn 0;\n}\n/*\n1 1000\n89 55\n*/\n```",
        "postTime": 1636256352,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF232C Doe Graphs"
    }
]
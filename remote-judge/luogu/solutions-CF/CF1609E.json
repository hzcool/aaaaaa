[
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a\u957f\u4e3a $n$ \u7684\u5b57\u7b26\u4e32\uff0c\u53ea\u5305\u542b `abc` \u4e09\u79cd\u5b57\u7b26\u3002$q$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u628a\u4e00\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u6539\u6210\u7ed9\u5b9a\u5b57\u7b26\uff0c\u8be2\u95ee\u5f53\u524d\u4e32\u81f3\u5c11\u4fee\u6539\u51e0\u6b21\u6ee1\u8db3\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 `abc`\u3002\u4fee\u6539\u6307\u628a\u4e00\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u4fee\u6539\u6210 `a`\u3001`b`\u3001`c` \u4e09\u79cd\u5b57\u7b26\u4e4b\u4e00\u3002\n\n$1\\le n,q\\le 10^5$\u3002\n\n### \u9898\u89e3\n\n\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u516d\u4e2a\u4e1c\u897f\uff1a\n- \u533a\u95f4 `a`\uff0c`b`\uff0c`c` \u7684\u6570\u91cf $a,b,c$\n- \u533a\u95f4\u4e0d\u5b58\u5728 `ab`\uff0c`bc`\uff0c`abc` \u6700\u5c11\u9700\u8981\u6539\u53d8\u51e0\u4e2a\u4f4d\u7f6e $ab,bc,abc$\n\n\u5408\u5e76\uff1a\n- $a_k=a_l+a_r$\n- $b_k=b_l+b_r$\n- $c_k=c_l+c_r$\n- $ab_k=\\min(a_l+ab_r,ab_l+b_r)$\n- $bc_k=\\min(b_l+bc_r,bc_l+c_r)$\n- $abc_k=\\min(abc_l+c_r,ab_l+bc_r,a_l+abc_r)$\n\n\u6bcf\u6b21\u67e5\u8be2 $abc_{rt}$ \u5c31\u662f\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(q\\log n)$\u3002\n\n[code](https://codeforces.com/contest/1609/submission/137286126)",
        "postTime": 1638237819,
        "uid": 86208,
        "name": "GSH_gsh",
        "ccfLevel": 8,
        "title": "CF1609E\u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n\n**\u6ce8\u610f\uff1a\u4ee5\u4e0b\u9610\u8ff0\u4e2d\u201c\u5b57\u7b26\u201d\u5747\u5728\u5b57\u7b26\u96c6 $\\sum=\\{\\mathtt{\"a\",\"b\",\"c\"}\\}$ \u4e4b\u5185\u8ba8\u8bba\u3002**\n\n\u6700\u521d\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32\u3002\n\n$q$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u5148\u4fee\u6539\u5355\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u518d\u8be2\u95ee\u5168\u5c40\u6700\u5c11\u8981\u4fee\u6539\u51e0\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u5b57\u7b26\u4f7f\u5f97\u6574\u4e2a\u5e8f\u5217\u6ca1\u6709 $\\mathtt{\"abc\"}$ \u8fd9\u4e2a\u5b50\u5e8f\u5217\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u50cf\u8fd9\u79cd**\u5173\u4e8e\u989c\u8272\u6a21\u5f0f\u5b50\u5e8f\u5217\uff08\u989c\u8272\u5c11\uff0c\u6a21\u5f0f\u5b50\u5e8f\u5217\u77ed\uff09**\u7684\u9898\u76ee\u4e00\u822c\u60f3\u5230**\u77e9\u9635\u4e58\u6cd5**\uff08\u4e0d\u662f\u4e00\u822c\u7684\u4e58\u6cd5\uff0c\u540e\u9762\u4f1a\u8bf4\uff09\u3002\n\n\u5177\u4f53\u5730\uff0c\u7528\u4e00\u4e2a\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6574\u4e2a\u5e8f\u5217\uff0c\u6811\u4e0a\u6bcf\u4e00\u4e2a\u8282\u70b9\u5b58\u4e00\u4e2a $3\\times 3$ \u7684\u77e9\u9635\uff1a\n\n$$\\begin{pmatrix}\nA&AB&ABC\n\\\\\n\\infty&B&BC\n\\\\\n\\infty&\\infty&C\n\\end{pmatrix}$$\n\n\u5176\u4e2d\uff08\u4e0b\u9762\u7684\u62ec\u53f7\u4e3a\u65ad\u53e5\uff09\uff1a\n\n* $A$ \u4e3a\u4f7f\u5f97\uff08\u8be5\u7ebf\u6bb5\u6811\u8282\u70b9\u7ba1\u8f96\u7684\u533a\u95f4\u5185\uff09\uff08\u6ca1\u6709 $\\mathtt{\"a\"}$ \u8fd9\u4e2a\u5b50\u5e8f\u5217\uff09\u7684\uff08\u6700\u5c0f\u4fee\u6539\u6b21\u6570\uff09\u3002\n\n* $AB$ \u4e3a\u4f7f\u5f97\uff08\u8be5\u7ebf\u6bb5\u6811\u8282\u70b9\u7ba1\u8f96\u7684\u533a\u95f4\u5185\uff09\uff08\u6ca1\u6709 $\\mathtt{\"ab\"}$ \u8fd9\u4e2a\u5b50\u5e8f\u5217\uff09\u7684\uff08\u6700\u5c0f\u4fee\u6539\u6b21\u6570\uff09\u3002\n\n* $\\dots$\n\n* $C$ \u4e3a\u4f7f\u5f97\uff08\u8be5\u7ebf\u6bb5\u6811\u8282\u70b9\u7ba1\u8f96\u7684\u533a\u95f4\u5185\uff09\uff08\u6ca1\u6709 $\\mathtt{\"c\"}$ \u8fd9\u4e2a\u5b50\u5e8f\u5217\uff09\u7684\uff08\u6700\u5c0f\u4fee\u6539\u6b21\u6570\uff09\u3002\n\n\u800c\u4e14\u8fd9\u91cc\u7684\u77e9\u9635\u4e58\u6cd5 $XY=Z$ \u5b9a\u4e49\u4e3a\uff1a\n\n$$z_{i,j}=\\min\\limits_{k=1}^{3}(x_{i,k}+y_{k,j})$$\n\n\u53d1\u73b0\u5979\u6ee1\u8db3\u7ed3\u5408\u5f8b\uff08\u8bc1\u660e\u7559\u7ed9\u8bfb\u8005\uff09\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u7ebf\u6bb5\u6811\u4e0a\u7684\u8282\u70b9\u6765\u8bf4\uff0c\u8bbe\u5979\u7684\u77e9\u9635\u4e3a $F$\uff0c\u5979\u7684\u4e24\u4e2a\u513f\u5b50\u7684\u77e9\u9635\u5206\u522b\u4e3a $L,R$\uff0c\u5219\uff1a\n\n$$F=LR$$\n\n\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u5f00\u5fc3\u5fc3\u7ebf\u6bb5\u6811\u5408\u5e76\u4e86\u3002\n\n\u5b9e\u65f6\u7b54\u6848\u4e3a\u7ebf\u6bb5\u6811\u6811\u6839\u77e9\u9635 $(1,3)$ \u7684\u503c\uff08\u5373 $ABC$\uff09\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\n* \u5355\u6b21\u4fee\u6539 $O(|\\sum|^3\\log n)$\n\n* \u5355\u6b21\u8be2\u95ee $O(1)$\n\n\u603b\u5171 $O(q|\\sum|^3\\log n)$\u3002\n\n### Details\n\n\u6211\u7684\u77e9\u9635\u7528 `struct` \u5b58\u50a8\uff0c\u6bcf\u4e00\u7ef4\u4ece $0$ \u5f00\u59cb\u6807\u53f7\u3002\n\n### Code\n\n[Link](https://codeforces.com/contest/1609/submission/137346877)",
        "postTime": 1638193147,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1609E William The Oblivious \u9898\u89e3"
    },
    {
        "content": "# CF1609E - William the Oblivious \u9898\u89e3\n\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $S$ \uff0c\u4e14\u53ea\u5305\u542b `a`\uff0c`b`\uff0c`c` \u4e09\u79cd\u5b57\u7b26\u3002\n\n\u8fdb\u884c $q$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u4e00\u6b21\u5c06\u5176\u4e2d\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u5b57\u7b26\u4fee\u6539\u4e3a `a`\uff0c`b`\uff0c`c` \u4e4b\u4e00\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u4fee\u6539\u64cd\u4f5c\uff0c\u6c42\u51fa\u81f3\u5c11\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u624d\u80fd\u4f7f\u5f97\u5f97\u5230\u7684\u65b0\u5b57\u7b26\u4e32\u4e2d\u4e0d\u5305\u542b**\u5b50\u5e8f\u5217** `abc`\u3002\n\n\u6570\u636e\u8303\u56f4\u4fdd\u8bc1\uff1a$n,q\\le10^5$\u3002\n\n## \u601d\u8def\u5206\u6790\n\n\u8003\u8651\u5957\u5355\u4fee\u533a\u67e5\u7ebf\u6bb5\u6811\u6a21\u677f\uff08\u8fd9\u9898\u751a\u81f3\u4e0d\u9700\u8981\u533a\u67e5\uff09\u3002\n\n\u95ee\u9898\u662f\u5982\u4f55\u8fdb\u884c Push_Up \u64cd\u4f5c\u3002\n\n\u7528\u5bf9\u4e8e\u67d0\u4e2a\u8282\u70b9\uff0c\u7528 $a$\uff0c$b$\uff0c$c$\uff0c$ab$\uff0c$bc$\uff0c$abc$ \u5206\u522b\u8868\u793a\u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 `a`\uff0c`b`\uff0c`c`\uff0c`ab`\uff0c`bc`\uff0c`abc` \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n\n\u7ea6\u5b9a\u7528 $L$ \u8868\u793a\u5f53\u524d\u8282\u70b9\u7684\u5de6\u513f\u5b50\uff0c $R$ \u5f53\u524d\u8282\u70b9\u7684\u8868\u793a\u53f3\u513f\u5b50\uff0c$N$ \u8868\u793a\u5f53\u524d\u8282\u70b9\u3002\n\n\u6ce8\u610f\u5230 $a$\uff0c$b$\uff0c$c$ \u7684\u503c\u7b49\u4ef7\u4e8e\u533a\u95f4\u5185\u7684 `a`\uff0c`b`\uff0c`c` \u5b57\u7b26\u7684\u6570\u91cf\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5199\u51fa Push_Up \uff08\u5c31\u662f\u533a\u95f4\u548c\uff09\u3002\n$$\n\\begin{cases}\nN_a=L_a+R_a\\\\\nN_b=L_b+R_b\\\\\nN_c=L_c+R_c\n\\end{cases}\n$$\n\u63a5\u4e0b\u6765\u8003\u8651 $ab$ \u548c $bc$ \u7684 Push_Up\u3002\n\n\u4ee5 $ab$ \u4e3a\u4f8b\u3002\n\n\u8981\u8ba9\u6574\u4e2a\u533a\u95f4\u4e2d\u6ca1\u6709\u5b50\u5e8f\u5217 `ab`\uff0c\u53ef\u4ee5\u4ece `a` \u7684\u4f4d\u7f6e\u548c `b` \u7684\u4f4d\u7f6e\u5206\u522b\u8ba8\u8bba\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u60c5\u51b5\u3002\n\n1. `a`\uff0c`b` \u90fd\u5728\u5de6\u533a\u95f4\u5185\u3002\n2. `a` \u5728\u5de6\u533a\u95f4\u5185\uff0c`b` \u5728\u53f3\u533a\u95f4\u5185\u3002\n3. `a`\uff0c`b` \u90fd\u5728\u53f3\u533a\u95f4\u5185\u3002\n\n\u4ece\u7b2c\u4e8c\u79cd\u60c5\u51b5\u5165\u624b\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u7b2c\u4e8c\u7c7b\u7684\u5b50\u5e8f\u5217 `ab`\uff0c\u53ea\u6709\u4e24\u79cd\u53ef\u80fd\uff1a\u5de6\u533a\u95f4\u6ca1\u6709 `a` \u6216\u53f3\u533a\u95f4\u6ca1\u6709 `b`\u3002\n\n1. \u5982\u679c\u5de6\u533a\u95f4\u6ca1\u6709 `a`\uff0c\u90a3\u4e48\u81ea\u7136\u4e5f\u4e0d\u5b58\u5728\u7b2c\u4e00\u7c7b\u5b50\u5e8f\u5217 `ab`\uff0c\u53ea\u9700\u8981\u4f7f\u53f3\u533a\u95f4\u6ca1\u6709 `ab` \u5373\u53ef\u3002\n2. \u5982\u679c\u53f3\u533a\u95f4\u6ca1\u6709 `b`\uff0c\u90a3\u4e48\u81ea\u7136\u4e5f\u4e0d\u5b58\u5728\u7b2c\u4e09\u7c7b\u5b50\u5e8f\u5217 `ab`\uff0c\u53ea\u9700\u8981\u4f7f\u5de6\u533a\u95f4\u6ca1\u6709 `ab` \u5373\u53ef\u3002\n\n\u90a3\u4e48\u8fd9\u4e24\u79cd\u60c5\u51b5\u7684\u6700\u5c0f\u4ee3\u4ef7\u5206\u522b\u662f $L.a+R.ab$ \u548c $L.ab+R.b$\uff0c\u7531\u4e8e\u8981\u6c42\u7684\u662f\u6700\u5c0f\u4ee3\u4ef7\uff0c\u6240\u4ee5\u5728\u8fd9\u4e24\u8005\u4e2d\u53d6\u4e2a\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u5982\u6b64\u7c7b\u6bd4 $bc$ \u7684 Push_Up \u4e5f\u662f\u4e00\u6837\u7684\uff0c\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e24\u4e2a\u503c\u7684 Push_Up \u516c\u5f0f\n$$\u3002\n\\begin{cases}\nN.ab=\\min(L.a+R.ab,L.ab+R.b)\\\\\nN.bc=\\min(L.b+R.bc,L.bc+R.c)\n\\end{cases}\n$$\n\u63a5\u4e0b\u6765\u5728\u8003\u8651 $abc$ \u662f\u5982\u4f55 Push_Up \u7684\u3002\n\n\u7c7b\u4f3c $ab$ \u7684\u5206\u6790\uff0c\u6211\u4eec\u5c06\u5b50\u5e8f\u5217 `abc` \u7684\u6784\u6210\u4e5f\u62c6\u6210\u5de6\u53f3\u4e24\u90e8\u5206\uff0c\u5171\u56db\u79cd\u60c5\u51b5\u3002\n\n1. `abc` \u90fd\u5728\u5de6\u533a\u95f4\u5185\u3002\n2. `ab` \u5728\u5de6\u533a\u95f4\u5185\uff0c`c` \u5728\u53f3\u533a\u95f4\u5185\u3002\n3. `a` \u5728\u5de6\u533a\u95f4\u5185\uff0c`bc` \u5728\u53f3\u533a\u95f4\u5185\u3002\n4. `abc` \u90fd\u5728\u53f3\u533a\u95f4\u5185\u3002\n\n\u7ee7\u7eed\u7c7b\u6bd4 $ab$ \u7684\u5206\u6790\uff0c\u4ee5\u7b2c\u4e8c\u3001\u4e09\u7c7b\u5b50\u5e8f\u5217 `abc` \u4e3a\u5207\u5165\u70b9\u8fdb\u884c\u5206\u6790\uff0c\u5f97\u5230\u4e24\u79cd\u53ef\u80fd\u7684\u60c5\u51b5\uff0c\u5206\u522b\u662f\u3002\n\n1. \u5de6\u533a\u95f4\u6ca1\u6709 `a`\uff0c\u6b64\u65f6\u7b2c\u4e00\u3001\u4e8c\u3001\u4e09\u7c7b\u5b50\u5e8f\u5217 `abc` \u80af\u5b9a\u5168\u90e8\u90fd\u6ca1\u6709\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u4fdd\u8bc1\u53f3\u533a\u95f4\u6ca1\u6709 `abc` \u5373\u53ef\u3002\n2. \u53f3\u533a\u95f4\u6ca1\u6709 `c`\uff0c\u6b64\u65f6\u7b2c\u4e8c\u3001\u4e09\u3001\u56db\u7c7b\u5b50\u5e8f\u5217 `abc` \u80af\u5b9a\u5168\u90e8\u90fd\u6ca1\u6709\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u4fdd\u8bc1\u5de6\u533a\u95f4\u6ca1\u6709 `abc` \u5373\u53ef\u3002\n\n\u8fd9\u4e24\u79cd\u60c5\u51b5\u7684\u5206\u522b\u6700\u5c0f\u8d21\u732e\u5206\u522b\u662f $L.a+R.abc$ \u548c $L.abc+R.c$ \u3002\n\n\u4e0d\u8fc7\u548c $ab$ \u4e0d\u540c\u7684\u662f\uff0c`abc` \u8fd9\u4e2a\u5b50\u5e8f\u5217\u53ef\u4ee5\u5de6\u533a\u95f4\u6709 `a`\uff0c\u53f3\u533a\u95f4\u6709 `c`\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u8fd8\u662f\u4ee5\u7b2c\u4e8c\u3001\u4e09\u7c7b\u5b50\u5e8f\u5217 `abc` \u5165\u624b\uff0c\u7b80\u5355\u5730\u5408\u5e76\u4e00\u4e0b\uff0c\u5f97\u5230\uff1a\n\n\u60f3\u8981\u4f7f\u533a\u95f4\u5185\u6ca1\u6709\u7b2c\u4e8c\u6216\u7b2c\u4e09\u7c7b\u5b50\u5e8f\u5217 `abc`\uff0c\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\u5c31\u662f\u5de6\u533a\u95f4\u7684 `a` \u548c\u53f3\u533a\u95f4\u7684 `c` \u4e2d\u95f4\u518d\u6ca1\u6709\u5b57\u7b26 `b` \u4e86\u3002\n\n\u6211\u4eec\u628a\u8fd9\u4e2a\u6761\u4ef6\u518d\u62c6\u5f00\u6765~~\uff08\u600e\u4e48\u90a3\u4e48\u591a\u4e8b\u5462\uff09~~\uff0c\u5f97\u5230\u4e86\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n1. \u5de6\u533a\u95f4\u5185\u6ca1\u6709\u5b50\u5e8f\u5217 `ab`\u3002\n2. \u53f3\u533a\u95f4\u5185\u6ca1\u6709\u5b50\u5e8f\u5217 `bc`\u3002\n\n\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u7684\u4ee3\u4ef7\u5c31\u662f $L.ab+R.bc$\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u5f97\u5230\u4e86 $abc$ \u7684\u4e09\u79cd\u8f6c\u79fb\u65b9\u5f0f\uff0c\u53d6\u6700\u5c0f\u503c\u5c31\u5f97\u5230\u4e86 $abc$ \u7684 Push_Up \u516c\u5f0f\uff1a\n$$\nN.abc=\\min(L.a+R.abc,L.abc+R.c,L.ab+R.bc)\n$$\n\u6700\u540e\u603b\u7ed3\u4e00\u4e0b\uff0c\u628a\u516d\u4e2a\u503c\u7684 Push_Up \u516c\u5f0f\u6574\u5408\u8d77\u6765\uff0c\u518d\u7ffb\u8bd1\u6210\u4ee3\u7801\uff0c\u5c31\u5f97\u5230\u4e86\u8fd9\u9053\u9898\u76ee\u7ebf\u6bb5\u6811\u5efa\u6811\u7684\u6838\u5fc3\u2014\u2014PushUp \u51fd\u6570\u3002\n\n```cpp\ninline void PushUp(int pos) {\n//tree[]\u662f\u7ebf\u6bb5\u6811,left(pos)\u8868\u793a\u5de6\u513f\u5b50,right(pos)\u8868\u793a\u53f3\u513f\u5b50\ntree[pos].a=tree[left(pos)].a+tree[right(pos)].a;\ntree[pos].b=tree[left(pos)].b+tree[right(pos)].b;\ntree[pos].c=tree[left(pos)].c+tree[right(pos)].c;\ntree[pos].ab=min(tree[left(pos)].ab+tree[right(pos)].b,tree[left(pos)].a+tree[right(pos)].ab);\ntree[pos].bc=min(tree[left(pos)].bc+tree[right(pos)].c,tree[left(pos)].b+tree[right(pos)].bc);\ntree[pos].abc=min(tree[left(pos)].ab+tree[right(pos)].bc,\n                  min(tree[left(pos)].a+tree[right(pos)].abc,tree[left(pos)].abc+tree[right(pos)].c));\n}\n```\n\n## \u4ee3\u7801\u5448\u73b0\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=1e5+1;\nchar s[MAXN];\nclass SegementTree {\n    //\u7ebf\u6bb5\u6811\u6a21\u677f\n\tprivate:\n\t\tstruct node {\n\t\t\tint a,b,c,ab,bc,abc;\n\t\t}\ttree[MAXN<<2];\n\t\tinline int left(int x) {\n\t\t\treturn x<<1;\n\t\t}\n\t\tinline int right(int x) {\n\t\t\treturn x<<1|1;\n\t\t}\n\t\tinline void PushUp(int pos) {\n\t\t\ttree[pos].a=tree[left(pos)].a+tree[right(pos)].a;\n\t\t\ttree[pos].b=tree[left(pos)].b+tree[right(pos)].b;\n\t\t\ttree[pos].c=tree[left(pos)].c+tree[right(pos)].c;\t\t\ttree[pos].ab=min(tree[left(pos)].ab+tree[right(pos)].b,tree[left(pos)].a+tree[right(pos)].ab);\ntree[pos].bc=min(tree[left(pos)].bc+tree[right(pos)].c,tree[left(pos)].b+tree[right(pos)].bc);\ntree[pos].abc=min(tree[left(pos)].ab+tree[right(pos)].bc,                     min(tree[left(pos)].a+tree[right(pos)].abc,tree[left(pos)].abc+tree[right(pos)].c));\n\t\t}\n\tpublic:\n\t\tinline void Build(int l,int r,int pos) {\n\t\t\tif(l==r) {\n\t\t\t\tswitch(s[l]) {\n\t\t\t\t\tcase 'a': ++tree[pos].a; break;\n\t\t\t\t\tcase 'b': ++tree[pos].b; break;\n\t\t\t\t\tcase 'c': ++tree[pos].c; break;\n\t\t\t\t}\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tint mid=(l+r)>>1;\n\t\t\tBuild(l,mid,left(pos));\n\t\t\tBuild(mid+1,r,right(pos));\n\t\t\tPushUp(pos);\n\t\t\treturn ;\n\t\t}\n\t\tinline void Modify(int u,int l,int r,int pos,char ch) {\n\t\t\tif(l==r) {\n\t\t\t\ttree[pos].a=tree[pos].b=tree[pos].c=0;\n\t\t\t\ts[l]=ch;\n\t\t\t\tswitch(s[l]) {\n\t\t\t\t\tcase 'a': ++tree[pos].a; break;\n\t\t\t\t\tcase 'b': ++tree[pos].b; break;\n\t\t\t\t\tcase 'c': ++tree[pos].c; break;\n\t\t\t\t}\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tint mid=(l+r)>>1;\n\t\t\tif(u<=mid) Modify(u,l,mid,left(pos),ch);\n\t\t\telse Modify(u,mid+1,r,right(pos),ch);\n\t\t\tPushUp(pos);\n\t\t\treturn ;\n\t\t}\n\t\tinline int Query() {\n             //\u6574\u6bb5\u533a\u95f4\u7684\u7b54\u6848\n\t\t\treturn tree[1].abc;\n\t\t}\n}\tS;\nsigned main() {\n\tios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n\tint n,q;\n\tcin>>n>>q>>(s+1);\n\tS.Build(1,n,1);\n\twhile(q--) {\n\t\tint v;\n\t\tchar ch;\n\t\tcin>>v>>ch;\n\t\tS.Modify(v,1,n,1,ch);\n\t\tcout<<S.Query()<<'\\n';\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1643903647,
        "uid": 539618,
        "name": "DaiRuiChen007",
        "ccfLevel": 6,
        "title": "CF1609E\u9898\u89e3"
    },
    {
        "content": "\u5355\u70b9\u4fee\u6539+\u533a\u95f4\u67e5\u8be2\uff0c\u5bb9\u6613\u60f3\u5230\u4e07\u80fd\u7684\u7ebf\u6bb5\u6811\u3002\n\n~~\u79cd~~\u516d\u68f5\u7ebf\u6bb5\u6811\uff0c\u4ee4 $tree_{1...6}$ \u5206\u522b\u7b49\u4e8e\uff1a\n\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 a \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 b \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 c \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 ab \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 bc \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n- \u8ba9\u8fd9\u4e2a\u533a\u95f4\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 abc \u81f3\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002\n\n$P.S.$ \u5176\u5b9e $tree_{1...3}$ \u7b49\u4ef7\u4e8e\u533a\u95f4\u4e2d a,b,c \u7684\u6570\u91cf\u3002\n\n$pushup$ \u51fd\u6570\uff1a\n\n- $tree_{rt_1}=tree_{l_1}+tree_{r_1}$\n- $tree_{rt_2}=tree_{l_2}+tree_{r_2}$\n- $tree_{rt_3}=tree_{l_3}+tree_{r_3}$\n- $tree_{rt_4}=min(tree_{l_1}+tree_{r_4},tree_{l_4}+tree_{r_2})$\n- $tree_{rt_5}=min(tree_{l_2}+tree_{r_5},tree_{l_5}+tree_{r_3})$\n- $tree_{rt_6}=min(tree_{l_1}+tree_{r_6},tree_{l_4}+tree_{r_5},tree_{l_6}+tree_{r_3})$\n\n## CODE:\n```cpp\n#include<iostream>\nusing namespace std;\nlong long tree[400005][7];//\u56db\u500d\u7a7a\u95f4\nchar a[100005];\nvoid push_up(int i)\n{\n    tree[i][1]=tree[i*2][1]+tree[i*2+1][1];\n    tree[i][2]=tree[i*2][2]+tree[i*2+1][2];\n    tree[i][3]=tree[i*2][3]+tree[i*2+1][3];\n    tree[i][4]=min(tree[i*2][1]+tree[i*2+1][4],tree[i*2][4]+tree[i*2+1][2]);\n    tree[i][5]=min(tree[i*2][2]+tree[i*2+1][5],tree[i*2][5]+tree[i*2+1][3]);\n    tree[i][6]=min(tree[i*2][6]+tree[i*2+1][3],min(tree[i*2][4]+tree[i*2+1][5],tree[i*2][1]+tree[i*2+1][6]));\n}\nvoid build(int l,int r,int i)//\u5efa\u6811\n{\n    if(l==r)\n    {\n        tree[i][(int)(a[l-1]-'a'+1)]=1;\n    }\n    else\n    {\n        int mid=(l+r)/2;\n        build(l,mid,i*2);\n        build(mid+1,r,i*2+1);\n        push_up(i);\n    }\n}\nvoid set(int l,int r,int k,int i,char s)//\u5355\u70b9\u4fee\u6539\n{\n    if(k<l||r<k)\n    {\n        return;\n    }\n    else if(l!=r)\n    {\n        int mid=(l+r)/2;\n        set(l,mid,k,i*2,s);\n        set(mid+1,r,k,i*2+1,s);\n        push_up(i);\n    }\n    else\n    {\n        tree[i][1]=0;\n        tree[i][2]=0;\n        tree[i][3]=0;\n        tree[i][(int)(s-'a'+1)]=1;\n    }\n}\nint main()\n{\n    int n,m;\n    cin>>n>>m;\n    cin>>a;\n    build(1,n,1);\n    while(m--)\n    {\n        int x;\n        char ch;\n        cin>>x>>ch;\n        set(1,n,x,1,ch);\n        cout<<tree[1][6]<<endl;//\u53cd\u6b63\u90fd\u77e5\u9053\u662f1~n\u7684\u533a\u95f4\uff0c\u61d2\u7684\u518d\u5199\u51fd\u6570\u4e86\n    } \n    return 0;\n}\n```\n\u590d\u6742\u5ea6 $O(qlogn)$ \uff0c\u81ea\u5e26\u5927\u5e38\u6570\uff0c\u4f46\u8dd13000ms\u8fd8\u662f\u7ef0\u7ef0\u6709\u4f59\u6ef4qwq\u3002",
        "postTime": 1645003293,
        "uid": 264463,
        "name": "\u6dfb\u54e5",
        "ccfLevel": 4,
        "title": "CF1609E William The Oblivious \u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a\u957f\u4e3a $n$ \u7684\u5b57\u7b26\u4e32\uff0c\u53ea\u5305\u542b $a,b,c$ \u4e09\u79cd\u5b57\u7b26\u3002$q$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u628a\u4e00\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u6539\u6210\u7ed9\u5b9a\u5b57\u7b26\uff0c\u8be2\u95ee\u5f53\u524d\u4e32\u81f3\u5c11\u4fee\u6539\u51e0\u6b21\u6ee1\u8db3\u4e0d\u5305\u542b\u5b50\u5e8f\u5217 $abc$\u3002\u4fee\u6539\u6307\u628a\u4e00\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u4fee\u6539\u6210 $a,b,c$ \u4e09\u79cd\u5b57\u7b26\u4e4b\u4e00\u3002\n\n$1\\le n,q\\le 10^5$\u3002\n\n### \u9898\u89e3\n\n\u7ebf\u6bb5\u6811\u7ef4\u62a4\u3002\n\n\u7ef4\u62a4\u516d\u4e2a\u4fe1\u606f\uff1a\n\n`a`,`b`,`c`,`ab`,`bc`,`abc`\u3002\n\n\u7686\u8868\u793a\u4f7f\u533a\u95f4\u5185\u6ca1\u6709\u5b50\u5e8f\u5217\u7b49\u4e8e\u8be5\u5b57\u7b26\uff08\u4e32\uff09\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u3002\n\n\u9996\u5148\uff0c`abc` \u6052\u5c0f\u4e8e\u7b49\u4e8e `ab` \u6052\u5c0f\u4e8e\u7b49\u4e8e `a`\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u6240\u4ee5\u53ef\u4ee5\u7528 `abc` \u8fbe\u5230\u5408\u6cd5\u5c31\u5c3d\u91cf\u7528 `abc`\u3002\n\n\u82e5\u60f3\u4f7f\u5408\u5e76\u540e\u4e0d\u5b58\u5728 $abc$\uff0c\u9700\u8981\u6ee1\u8db3\u4e09\u4e2a\u8981\u6c42\uff1a\u5de6\u513f\u5b50\u65e0 $abc$\uff08\u8bb0\u4e3a\u6761\u4ef6 1\uff09\uff0c\u53f3\u513f\u5b50\u65e0 $abc$\uff08\u8bb0\u4e3a\u6761\u4ef6 2\uff09\uff0c\u5de6\u53f3\u513f\u5b50\u5408\u5e76\u540e\u4e0d\u4ea7\u751f $abc$\uff08\u8bb0\u4e3a\u6761\u4ef6 3\uff09\u3002\n\n\u91cd\u70b9\u8003\u8651\u533a\u95f4\u5408\u5e76\u65f6\u4e24\u4e2a\u533a\u95f4\u4e92\u76f8\u7684\u5f71\u54cd\u3002\n\n\u5982\u679c\u5408\u5e76\u540e\u4ea7\u751f\u4e86 $abc$\uff0c\u90a3\u5b83\u6709\u4e00\u4e9b\u7279\u5f81\uff1a$a$ \u5728\u5de6\u513f\u5b50\uff0c$c$ \u5728\u53f3\u513f\u5b50\uff0c$b$ \u7684\u8bdd\u5de6\u53f3\u90fd\u6709\u53ef\u80fd\u3002\n\n\u8003\u8651\u4e00\u79cd\u64cd\u4f5c\u65b9\u6848\uff1a\u628a\u5de6\u513f\u5b50\u7684 $a$ \u5168\u90e8\u5220\u6389\u3002\u663e\u7136\u8fd9\u6837\u53ef\u4ee5\u4f7f\u6761\u4ef6 1 \u548c\u6761\u4ef6 3 \u5f97\u5230\u6ee1\u8db3\u3002\u82e5\u4f7f\u6761\u4ef6 2 \u4e5f\u5f97\u5230\u6ee1\u8db3\uff0c\u53ea\u9700\u4fdd\u8bc1\u53f3\u513f\u5b50\u5185\u90e8\u65e0 $abc$ \u5373\u53ef\u3002\u6b64\u79cd\u65b9\u6848\u7684\u8d39\u7528\u4e3a $a_{ls}+abc_{rs}$\u3002\n\n\u5982\u679c\u6b64\u79cd\u65b9\u6848\u4e0d\u4e3a\u6700\u4f18\u65b9\u6848\uff0c\u90a3\u4e48\u6700\u4f18\u65b9\u6848\u4e2d\u5de6\u513f\u5b50\u81f3\u5c11\u4fdd\u7559\u4e86\u4e00\u4e2a $a$\u3002\u518d\u8003\u8651\u628a\u53f3\u513f\u5b50\u7684 $c$ \u5168\u90e8\u5220\u6389\u3002\u540c\u7406\uff0c\u6b64\u79cd\u65b9\u6848\u7684\u8d39\u7528\u4e3a $abc_{ls}+c_{rs}$\u3002\n\n\u5982\u679c\u8fd8\u6ca1\u6709\u627e\u5230\u6700\u4f18\u65b9\u6848\uff0c\u90a3\u4e48\u6700\u4f18\u65b9\u6848\u4e2d\uff0c\u5de6\u513f\u5b50\u81f3\u5c11\u4fdd\u7559\u4e86\u4e00\u4e2a $a$\uff0c\u540c\u65f6\u53f3\u513f\u5b50\u4e5f\u81f3\u5c11\u4fdd\u7559\u4e86\u4e00\u4e2a $c$\u3002\u90a3\u4e48\u6b64\u65f6\u67d0\u4e00\u4e2a\u65b9\u6848\u5408\u6cd5\u7684\u5145\u8981\u6761\u4ef6\u4e3a\uff1a\u5de6\u513f\u5b50\u4e0d\u6784\u6210\u4efb\u4f55\u4e00\u7ec4 $ab$\uff0c\u53f3\u513f\u5b50\u4e0d\u6784\u6210\u4efb\u4f55\u4e00\u7ec4 $bc$\u3002\u4e8e\u662f\u6b64\u65f6\u6700\u4f18\u65b9\u6848\u7684\u8d39\u7528\u5c31\u662f $ab_{ls}+bc_{rs}$\u3002\n\n\u7efc\u4e0a\uff0c\u6240\u6709\u60c5\u51b5\u4e0b\u6700\u4f18\u65b9\u6848\u7684\u8d39\u7528\u4e3a $\\text{min}\\{a_{ls}+abc_{rs},abc_{ls}+c_{rs},ab_{ls}+bc_{rs}\\}$\u3002 \n\n\u7ebf\u6bb5\u6811\u7ef4\u62a4\u5373\u53ef\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e5+5;\n\nnamespace IO{\n    int read(){\n\t\tint ret=0;char ch=getchar();\n        while(!isdigit(ch)) ch=getchar();\n        while(isdigit(ch)) ret=ret*10+ch-'0',ch=getchar();\n        return ret;\n    }\n    void abswrite(int x){if(x>9) abswrite(x/10);putchar(x%10+'0');}\n    void write(int x){abswrite(x),putchar('\\n');}\n}using IO::read;using IO::write;\n\nint n,q;char ch[N];\n\nnamespace segment_tree{\n    #define ls (u<<1)\n    #define rs (u<<1|1)\n    int a[N<<2],b[N<<2],c[N<<2],ab[N<<2],bc[N<<2],abc[N<<2],st;\n    void pushup(int u){\n        a[u]=a[ls]+a[rs],b[u]=b[ls]+b[rs],c[u]=c[ls]+c[rs];\n        ab[u]=min(a[ls]+ab[rs],ab[ls]+b[rs]);\n        bc[u]=min(b[ls]+bc[rs],bc[ls]+c[rs]);\n        abc[u]=min(min(a[ls]+abc[rs],abc[ls]+c[rs]),ab[ls]+bc[rs]);\n    }\n    void build(){\n        st=pow(2,(int)ceil(log2(n+2)));\n        for(int i=1,u=st+1;i<=n;++i,++u)\n            ch[i]=='a'?a[u]=1:ch[i]=='b'?b[u]=1:c[u]=1;\n        for(int u=st-1;u;--u) pushup(u);\n    }\n    void modify(int p){\n        a[st+p]=b[st+p]=c[st+p]=0,ch[p]=='a'?a[st+p]=1:ch[p]=='b'?b[st+p]=1:c[st+p]=1;\n        for(int u=(st+p)>>1;u;u>>=1) pushup(u);\n    }\n    int query(){return abc[1];}\n    #undef ls\n    #undef rs\n}namespace tr=segment_tree;   \n\nsigned main(){\n    n=read(),q=read();\n    for(int i=1;i<=n;++i)\n\t\twhile(!islower(ch[i])) ch[i]=getchar();\n    tr::build();\n    for(int i=1;i<=q;++i){\n        int p=read();ch[p]=getchar();\n        tr::modify(p),write(tr::query());\n    }\n    return 0;\n}\n\n//~kawaii~\n```\n\n",
        "postTime": 1640514867,
        "uid": 372708,
        "name": "Yahbim",
        "ccfLevel": 0,
        "title": "CF1609E William The Oblivious \u9898\u89e3"
    },
    {
        "content": "**23.1.7 fix typo.**\n\n\u4e0d\u5e26\u4fee\u53ef\u4ee5\u663e\u7136 dp\uff1a\u8bbe $f[i][0/1/2]$ \u5206\u522b\u8868\u793a\u5b57\u7b26\u4e32\u4e2d\u4e0d\u542b `a`\u3001\u542b `a` \u65e0 `b`\u3001\u542b `ab` \u65e0 `c` \u6240\u9700\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\uff0c\u5219\u6709\uff1a\n\n$$\\begin{aligned}f[i][0]&=f[i-1][0]+[s_i=a]\\\\f[i][1] &= \\min\\{f[i-1][1]+[s_i=b], f[i-1][0]+[s_i \\neq a]\\} \\\\ f[i][2] &= \\min\\{f[i-1][2]+[s_i=c], f[i-1][1] + [s_i \\neq b]\\} \\end{aligned}$$\n\n\u6ce8\u610f\u672c\u9898\u7684\u64cd\u4f5c\u662f\u4fee\u6539\u800c\u975e\u5220\u9664\u3002\n\n\u53d1\u73b0 $f$ \u7684\u503c\u53ea\u548c $f[i-1]$ \u6709\u5173\u3002\u82e5\u5e26\u4e0a\u4fee\u6539\uff0c\u5219\u53ef\u4ee5\u8003\u8651\u52a8\u6001 dp. \u628a\u8f6c\u79fb\u65b9\u7a0b\u5199\u6210\u77e9\u9635\uff1a\n\n$$\\left[\\begin{matrix}\n\n[s_i=a] & [s_i \\neq a] & \\infty \\\\\n\\infty &[s_i=b] & [s_i \\neq b] \\\\\n\\infty & \\infty & [s_i=c]\n\n\\end{matrix}\\right]$$\n\n\u5219\u6700\u7ec8\u7684\u7b54\u6848\u5c31\u662f $\\left[ \\begin{matrix} 1 & \\infty &\\infty \\end{matrix} \\right]$ \u5de6\u4e58\uff08\u6b64\u5904\u5b9a\u4e49\u4e3a\u5e7f\u4e49\u77e9\u9635\u4e58\u6cd5\uff09\u4ee5\u6240\u6709\u8f6c\u79fb\u77e9\u9635\uff0c\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u5355\u70b9\u6539\u6574\u4f53\u67e5\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define ms(x, v) memset(x, v, sizeof(x))\n#define il inline\n#define pii pair<int, int>\n#define pil pair<int, long long>\n#define pll pair<long long, long long>\n#define U(i,l,r) for(int i(l),END##i(r);i<=END##i;++i)\n#define D(i,r,l) for(int i(r),END##i(l);i>=END##i;--i)\nusing namespace std;\n\ntypedef unsigned long long ull;\ntypedef long long ll;\n// typedef __int128_t i128;\n// typedef __uint128_t u128;\ntemplate <typename T>\nusing BS = basic_string<T>;\n\ntemplate <typename T>\nil int rd(T& s) {\n\tint c = getchar();\n    // if (c == EOF) return -1;\n\tT f = 1; s = 0;\n\twhile (c < '0' || c > '9') {\n\t\tif (c == '-') f = -1;\n        c = getchar();\n\t\t// if (c == EOF) return -1;\n\t}\n\twhile (c >= '0' && c <= '9') {\n\t\ts = (s << 1) + (s << 3) + (c ^ 48);\n\t\tc = getchar();\n\t}\n\ts *= f;\n    return 0;\n}\ntemplate <typename T, typename... Args>\nil int rd(T& x1, Args&... args) { return rd(x1) || rd(args...); }\ntemplate <typename T>\nil void pr(T s, bool fg = true) {\n    if (s < 0) { printf(\"-\"); s = -s; }\n    if (!s) {\n        if (fg) printf(\"0\");\n        return;\n    }\n    pr(s / 10, false);\n    printf(\"%d\", (signed)(s % 10));\n}\ntemplate <typename... Args>\nil int meow(const char* fmt, const Args&... args)\n\t{ return fprintf(stderr, fmt, args...); }\n\nconst int N = 100005;\ntemplate <int N, int M>\nstruct Matrix {\n\tint m[N][M];\n\tMatrix() { memset(m, 0x3f, sizeof(m)); }\n\tint* operator[](int x) { return m[x - 1] - 1; }\n};\ntemplate <int N, int K, int M>\nMatrix<N, M> operator * (Matrix<N, K>& l, Matrix<K, M>& r) {\n\tMatrix<N, M> m;\n\tfor (int i = 1; i <= N; ++i)\n\t\tfor (int j = 1; j <= M; ++j)\n\t\t\tfor (int k = 1; k <= K; ++k)\n\t\t\t\tm[i][j] = min(m[i][j], (l[i][k] + r[k][j]));\n\treturn m;\n}\n\nMatrix<3, 3> tr[N << 2];\n#define mid ((l + r) >> 1)\n#define LS (p << 1)\n#define RS ((p << 1) | 1)\nint n, q;\nvoid update(int x, Matrix<3, 3>& v, int p = 1, int l = 1, int r = n) {\n\tif (l == r) { tr[p] = v; return; }\n\tif (x <= mid) update(x, v, LS, l, mid);\n\telse update(x, v, RS, mid + 1, r);\n\ttr[p] = tr[LS] * tr[RS];\n}\n\nMatrix<3, 3> gen(char ch) {\n\tMatrix<3, 3> ts;\n\tts[1][1] = ch == 'a';\n\tts[1][2] = ch != 'a';\n\tts[2][2] = ch == 'b';\n\tts[2][3] = ch != 'b';\n\tts[3][3] = ch == 'c';\n\treturn ts;\n}\n\nint main() {\n\trd(n, q);\n\tchar s[N]; scanf(\"%s\", s + 1);\n\tU (i, 1, n) {\n\t\tMatrix<3, 3> trs = gen(s[i]);\n\t\tupdate(i, trs);\n\t}\n\twhile (q--) {\n\t\tint x; char c; scanf(\"%d %c\", &x, &c);\n\t\tMatrix<3, 3> trs = gen(c);\n\t\tupdate(x, trs);\n\t\tMatrix<1, 3> ans; ans[1][1] = 0;\n\t\tans = ans * tr[1];\n\t\tprintf(\"%d\\n\", min(ans[1][1], min(ans[1][2], ans[1][3])));\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1658123435,
        "uid": 120324,
        "name": "Yansuan_HCl",
        "ccfLevel": 7,
        "title": "[\u9898\u89e3] CF1609E William The Oblivious"
    },
    {
        "content": "\u8bc4\u5206\u865a\u9ad8\u3002\u5f88\u591a\u7c7b\u4f3c\u7684dp\u90fd\u53ea\u6709\u9ec4\uff0c\u653e\u5230\u7ebf\u6bb5\u6811\u4e0a\u5c31\u7d2b\u4e86\u5417\uff08\n\n\u505a\u6cd5\u663e\u7136\u7ebf\u6bb5\u6811\u3002\n\n\u8fd9\u9898\u7684\u96be\u70b9\u663e\u7136\u5728\u7ef4\u62a4\u4e2a\u5565\u3001\u600e\u4e48\u5408\u5e76\u4fe1\u606f\u3002\u6211\u4eec\u4e00\u6b65\u6b65\u5206\u6790\u3002\n\n\u6211\u4eec\u8981\u6c42\u7684\uff1a\u6839\u8282\u70b9\u65e0 `abc` \u9700\u8981\u5220\u51e0\u4e2a\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u6570\u4e3a `nabc`\u3002\uff08\u4ee5\u4e0b `nab` \u7b49\u540c\u7406\uff09\n\n\u6240\u4ee5\u663e\u7136\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u4e00\u79cd\u65b9\u6cd5\uff0c**\u8ba9\u4e00\u4e2a\u8282\u70b9\u7684 `nabc` \u53ef\u4ee5\u7531\u4e24\u4e2a\u5b50\u8282\u70b9\u7684\u4ec0\u4e48\u53d8\u91cf\u7b97\u51fa\u6765\u3002** \n\n\u6211\u4eec\u5f88\u5bb9\u6613\u60f3\u5230\u5206\u7c7b\u8ba8\u8bba\u3002\n\n1. \u5de6\u5b50\u8282\u70b9\u6ca1\u6709 `a`\uff1a`ls.cnta + rs.nabc`\uff08`cnta` \u8868\u793a `a` \u7684\u6570\u91cf\uff0c\u4ee5\u4e0b\u540c\u7406\uff09\uff0c\u663e\u7136\n2. \u5de6\u5b50\u8282\u70b9\u53ef\u4ee5\u6709 `a` \u4f46\u662f\u6ca1\u6709\u5b50\u5e8f\u5217 `ab`\uff1a`ls.nab + rs.nbc`\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u53ef\u80fd `ls.nab` \u7684\u6784\u9020\u65b9\u6848\u6ca1\u6709 `a` \u3002\u4f46\u6ca1\u5173\u7cfb\uff0c\u5982\u679c `ls.nab` \u7684\u6784\u9020\u65b9\u6848\u6ca1\u6709 `a`\uff0c**\u8bf4\u660e `ls.nab + rs.nbc` \u5c31\u4e0d\u662f\u4f7f `nabc` \u6700\u5c0f\u7684\u6784\u9020\u65b9\u6848\u3002**![1](https://cdn.luogu.com.cn/upload/image_hosting/ui3kgl2p.png)\u53ef\u4ee5\u5f62\u8c61\u7406\u89e3\u4e00\u4e0b\uff0c\u56fe\u4e2d $[1,40]$ \u662f\u4e0d\u540c\u7684\u65b9\u6848\uff0c\u6211\u4eec\u8981\u627e\u5230\u5176\u4e2d\u4ee3\u4ef7\u6700\u5c0f\u7684\uff0c\u800c\u6bcf\u4e2a\u5708\u90fd\u53ef\u4ee5\u627e\u5230\u5708\u4e2d\u4ee3\u4ef7\u6700\u5c0f\u7684\u3002\u90a3\u4e48\u6700\u7ec8\u4ee3\u4ef7\u6700\u5c0f\u7684\u5c31\u662f\u5404\u5708\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u51b3\u7b56\u65b9\u6848\u88ab\u8986\u76d6\u591a\u8fb9\u662f\u53ef\u4ee5\u7684\u3002\n3. \u5de6\u5b50\u8282\u70b9\u53ef\u4ee5\u6709\u5b50\u5e8f\u5217 `ab`\uff0c\u4f46\u662f\u4e0d\u5141\u8bb8\u6709\u5b50\u5e8f\u5217 `abc`\uff1a`ls.nabc + rs.cntc`\uff0c\u7406\u7531\u540c\u4e0a\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef const int& cint;\n\nconst int N = 1e5;\nint n, q;\nchar str[N+1];\nstruct node {\n\tint l, r, a, b, c, ab, bc, abc;\n} t[N*4+1];\ninline int ls(cint o) {return o<<1;}\ninline int rs(cint o) {return (o<<1)|1;}\n\ninline void pushup(cint odx) {\n\tnode &o = t[odx], &l = t[ls(odx)], &r = t[rs(odx)];\n\to.a = l.a+r.a; o.b = l.b+r.b; o.c = l.c+r.c;\n\to.ab = min(l.a+r.ab, l.ab+r.b);\n\to.bc = min(l.b+r.bc, l.bc+r.c);\n\to.abc = min(min(l.abc+r.c, l.a+r.abc), l.ab+r.bc);\n}\nvoid build(cint o, cint l, cint r) {\n\tt[o].l = l; t[o].r = r;\n\tif(l == r) {\n\t\tif(str[l] == 'a') {\n\t\t\t++t[o].a;\n\t\t}\n\t\telse if(str[l] == 'b') ++t[o].b;\n\t\telse ++t[o].c;\n\t\treturn;\n\t}\n\tint mid = l+r>>1;\n\tbuild(ls(o), l, mid); build(rs(o), mid+1, r);\n\tpushup(o);\n}\nvoid modify(cint o, cint p) {\n\tif(t[o].l == t[o].r) {\n\t\tt[o].a = t[o].b = t[o].c = 0;\n\t\tif(str[t[o].l] == 'a') {\n\t\t\tt[o].a = 1;\n\t\t}\n\t\telse if(str[t[o].l] == 'b') t[o].b = 1;\n\t\telse t[o].c = 1;\n\t\treturn;\n\t}\n\tint mid = t[o].l+t[o].r>>1;\n\tif(p <= mid) modify(ls(o), p);\n\telse modify(rs(o), p);\n\tpushup(o);\n}\n\nint main() {\n\tscanf(\"%d%d%s\", &n, &q, str+1);\n\tbuild(1, 1, n);\n\twhile(q--) {\n\t\tint p; char ch; scanf(\"%d %c\", &p, &ch);\n\t\tstr[p] = ch; modify(1, p);\n\t\tprintf(\"%d\\n\", t[1].abc);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1653733881,
        "uid": 150956,
        "name": "StillEmpty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 \u2014\u2014 CF1609E William The Oblivious"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u6bd4\u8f83\u8822\u4f46\u662f\u6bd4\u8f83\u597d\u60f3\u7684\u505a\u6cd5\uff08\n\n\u8003\u8651\u5355\u7ec4\u8be2\u95ee\u600e\u4e48\u505a\u3002\u8bbe $f(i,0/1/2)$ \u8868\u793a\u524d $i$ \u4e2a\u5b57\u7b26\u5f53\u524d \u65e0 $\\texttt{a}$ / \u6709 $\\texttt{a}$ \u65e0 $\\texttt{ab}$ / \u6709 $\\texttt{ab}$ \u65e0 $\\texttt{abc}$ \u7684\u6700\u5c11\u4fee\u6539\u6b21\u6570\uff0c\u6709\u8f6c\u79fb\uff1a\n$$\n\\begin{aligned}f(i,0)&=f(i-1,0)+[s_i=\\texttt{a}]\\\\f(i,1)&=\\min\\{f(i-1,0)+[s_i\\not=\\texttt{a}],f(i-1,1)+[s_i=\\texttt{b}]\\}\\\\f(i,2)&=\\min\\{f(i-1,1)+[s_i\\not=\\texttt{b}],f(i-1,2)+[s_i=\\texttt{c}]\\}\\end{aligned}\n$$\n\u8fd9\u662f\u4e00\u4e2a min+ \u77e9\u9635\u4e58\u6cd5\u7684\u5f62\u5f0f\uff0c\u5373\u5411\u91cf $\\left[\\begin{matrix}f(i-1,0) & f(i-1,1) & f(i-1,2)\\end{matrix}\\right]$ \u4e58\u4e0a\u4e00\u4e2a\uff1a\n$$\n\\left[\\begin{matrix}[s_i=\\texttt{a}] & [s_i\\not= \\texttt{a}] & +\\infty\\\\+\\infty  & [s_i=\\texttt{b}] & [s_i\\not=\\texttt{b}]\\\\+\\infty & +\\infty & [s_i=\\texttt{c}]\\end{matrix}\\right]\n$$\n\u90a3\u4e48\u4fee\u6539\u5c31\u76f8\u5f53\u4e8e\u662f\u6539\u4e00\u4e2a\u77e9\u9635\uff0c\u67e5\u8be2\u5c31\u662f\u67e5\u77e9\u9635\u8fde\u4e58\u8d77\u6765\u4e4b\u540e $f(n,0/1/2)$ \u4e09\u4e2a\u503c\u7684\u6700\u5c0f\u503c\uff0c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u77e9\u9635\u4e58\u79ef\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\ninline int read()\n{\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+(c^48);c=getchar();}\n\treturn x*f;\n}\nvoid write(int n)\n{\n\tif(n<0){putchar('-');n=-n;}\n\tif(n>9)write(n/10);\n\tputchar(n%10^48);\n}\nconst int inf=0x3f3f3f3f,N=1e5+10;\nstruct mat{\n\tint a[3][3];\n\tmat(){for(int i=0;i<3;i++)for(int j=0;j<3;j++)a[i][j]=inf;}\n\tvoid init(){for(int i=0;i<3;i++)a[i][i]=0;}\n\tmat operator*(const mat &x)const\n\t{\n\t\tmat ans;\n\t\tfor(int k=0;k<3;k++)for(int i=0;i<3;i++)for(int j=0;j<3;j++)\n\t\tans.a[i][j]=min(ans.a[i][j],a[i][k]+x.a[k][j]);\n\t\treturn ans;\n\t}\n}x[3];\nchar s[N];\nstruct sgt{\n\tmat t[N<<2];\n\tvoid build(int p,int l,int r)\n\t{\n\t\tif(l==r)return t[p]=x[s[l]-'a'],void();\n\t\tint mid=(l+r)>>1;\n\t\tbuild(p*2,l,mid),build(p*2+1,mid+1,r);\n\t\tt[p]=t[p*2]*t[p*2+1]; \n\t}\n\tvoid modify(int p,int l,int r,int qx,int d)\n\t{\n\t\tif(l==r)return t[p]=x[d],void();\n\t\tint mid=(l+r)>>1;\n\t\tif(qx<=mid)modify(p*2,l,mid,qx,d);\n\t\telse modify(p*2+1,mid+1,r,qx,d);\n\t\tt[p]=t[p*2]*t[p*2+1];\n\t}\n\tmat query(int p,int l,int r,int ql,int qr)\n\t{\n\t\tif(ql<=l&&r<=qr)return t[p];\n\t\tint mid=(l+r)>>1;mat ans;ans.init();\n\t\tif(ql<=mid)ans=ans*query(p*2,l,mid,ql,qr);\n\t\tif(qr>mid)ans=ans*query(p*2+1,mid+1,r,ql,qr);\n\t\treturn ans;\n\t}\n}T;\nint main()\n{\n\tfor(int t=0;t<3;t++)\n\t{\n\t\tx[t].a[0][0]=(t==0);\n\t\tx[t].a[0][1]=(t!=0);\n\t\tx[t].a[1][1]=(t==1);\n\t\tx[t].a[1][2]=(t!=1);\n\t\tx[t].a[2][2]=(t==2);\n\t}\n\tint n=read(),q=read();\n\tscanf(\"%s\",s+1);\n\tT.build(1,1,n);\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tint x=read();char ss[5];scanf(\"%s\",ss);\n\t\tT.modify(1,1,n,x,ss[0]-'a');\n\t\tmat ans=T.query(1,1,n,1,n);\n\t\tprintf(\"%d\\n\",min(min(ans.a[0][0],ans.a[0][1]),ans.a[0][2]));\n\t}\n\treturn 0;\n}\n//zzt qwq\n```\n\n",
        "postTime": 1642075043,
        "uid": 125913,
        "name": "zztqwq",
        "ccfLevel": 8,
        "title": "CF1609E"
    }
]
[
    {
        "content": "### \u9898\u610f\uff1a\n\u7ed9\u51fa $n$ \u4e2a\u538b\u7f29\u540e\u7684IPv6\u5730\u5740,\u7ed9\u51fa\u4e00\u4e9b\u538b\u7f29\u7684\u65b9\u6cd5,\u6062\u590dIPv6\u5730\u5740\u7684\u5b8c\u6574\u5f62\u5f0f    \n\u538b\u7f29\u65b9\u6cd5\u6709\u4ee5\u4e0b2\u6761:        \n1.\u5220\u9664\u524d\u5bfc $0$ :       \n\uff08\u4f8b\u5982```a56f:00d3:0000:0124:0001:f19a:1000:0000``` $\u2192$ ```a56f:d3:0:0124:01:f19a:1000:00```)        \n2.\u7528 $::$ \u7f29\u5199\u8fde\u7eed $0$ \u5e8f\u5217          \n\uff08\u4f8b\u5982```a56f:00d3:0000:0124:0001:0000:0000:0000``` $\u2192$ ```a56f:00d3:0000:0124:0001::```)        \n\u6ce8\u610fIPv6\u5730\u5740\u53ea\u80fd\u7528\u4e00\u6b21 $::$ \n### \u5206\u6790\uff1a\n\u4e0d\u7528\u4ec0\u4e48\u7b97\u6cd5\uff0c\u662f\u8f83\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5904\u7406\u3002\u4f46\u662f\u7801\u529b\u5f88\u5927\uff0c\u7ec6\u8282\u6bd4\u8f83\u96be\u5904\u7406\u3002         \n\u505a\u6cd5\u8bfb\u5b8c\u9898\u76ee\u540e\u5df2\u7ecf\u5f88\u660e\u786e\u4e86\uff0c\u4e3b\u8981\u662f\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff1a       \n1.\u5982\u679c\u5728\u4e24\u4e2a $:$ \u4e4b\u95f4\u6709\u56db\u4e2a\u5b57\u7b26\uff0c\u76f4\u63a5\u8f93\u51fa\uff0c\u4e0d\u7528\u8fdb\u884c\u6539\u53d8          \n2.\u5982\u679c\u5728\u4e24\u4e2a $:$ \u4e4b\u95f4\u5c11\u4e8e\u56db\u4e2a\u5b57\u7b26\uff0c\u8ba1\u7b97\u6709\u51e0\u4e2a\u5b57\u7b26\uff0c\u8f93\u51fa $4-s$ \u4e2a $0$ \u540e\u8f93\u51fa\u5269\u4e0b\u7684\u5b57\u7b26\u5373\u53ef\uff0c\u5176\u4e2d $s$ \u4ee3\u8868\u4e24\u4e2a $:$ \u4e4b\u95f4\u7684\u5b57\u7b26\u957f\u5ea6       \n3.\u7279\u6b8a\u7684 $::$ \u60c5\u51b5\uff1a\u6211\u4eec\u8981\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff0c\u5b9e\u73b0\u8bb0\u5f55\u5728 $::$ \u4e4b\u524d\u6709\u591a\u5c11\u6bb5\uff0c\u518d\u5bfb\u627e $::$ \u4e4b\u540e\u6709\u591a\u5c11\u6bb5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6c42\u51fa\u6709\u591a\u5c11\u6bb5 $0000$ ,\u6700\u540e\u518d\u8f93\u51fa\u5c31\u884c\u4e86\n### tips:\n1.\u5f53\u8bb0\u5f55\u5230\u8f93\u51fa\u4e3a\u6700\u540e\u4e00\u6bb5\u65f6\uff0c\u8981\u6ce8\u610f\u4e0d\u8981\u8f93\u51fa\u591a\u4f59\u7684\u7a7a\u683c\u6216 $:$          \n2.\u5f53\u4e0d\u597d\u89c2\u5bdf\u8f93\u51fa\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u8f93\u51fa\u3002           \n\u6587\u4ef6\u8f93\u51fa\u793a\u4f8b: ```freopen(\"test.txt\",\"w\",stdout);```      \n\u6253\u5f00\u7a0b\u5e8f\u6240\u5728\u4f4d\u7f6e\u7684 ```test.txt``` \u6587\u4ef6\u5373\u53ef\u89c2\u5bdf\u8f93\u51fa        \n### code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long a,b,c,d,e,lsss;\nstring s;\nint ts(int lss){//::\u7684\u60c5\u51b5 \n\te=0;\n\tfor(int i=lss+1;s[i]!='\\0';i++){\n\t\tif(s[i]==':'){\n\t\t\te++;\n\t\t}\n\t}\n\tb+=e;\n\tb--;\n\tfor(int i=1;i<=(7-b);i++){\n\t\tif((b-e+i)==8){\n\t\t\tcout<<\"0000\";\n\t\t\tbreak;\n\t\t}\n\t\telse{\n\t\t\tcout<<\"0000:\";\n\t\t}\n\t}\n}\nint findd(int ls){\n\tif(s[ls-1]==':'&&s[ls]==':'){//::\u7684\u60c5\u51b5 \n\t\tts(ls);\n\t}\n\telse{//\u4e00\u822c\u7684\u60c5\u51b5 \n\t\tfor(int i=1;i<=(4-c);i++){\n\t\t\tcout<<0;\n\t\t}\n\t\tfor(int i=ls-c;i<=ls;i++){\n\t\t\tif(s[i]-'0'>=0&&s[i]-'0'<=9)\n\t\t\t\tcout<<s[i];\n\t\t\tif(s[i]=='a'||s[i]=='b'||s[i]=='c'||s[i]=='d'||s[i]=='e'||s[i]=='f'||s[i]==':'){\n\t\t\t\tcout<<s[i];\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tcin>>a;\n\tfor(int i=1;i<=a;i++){\n\t\tb=0;\n\t\tcin>>s;\n\t\tc=0;\n\t\td=0;\n\t\tlsss=0;\n\t\tfor(int j=0;s[j]!='\\0';j++){\n\t\t\td++;\n\t\t\tif(s[j]==':'){\n\t\t\t\tlsss=j;\n\t\t\t\tb++;\n\t\t\t\tfindd(j);\n\t\t\t\tc=0;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tc++;\n\t\t\t}\n\t\t}\n\t\tfindd(d);\n\t\tcout<<endl;\n\t}\n} \n```",
        "postTime": 1672143220,
        "uid": 649111,
        "name": "xiaoxiaozou886",
        "ccfLevel": 3,
        "title": "CF250B\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u548c\n\n>[P2815 IPv6\u5730\u5740\u538b\u7f29](https://www.luogu.org/problemnew/show/P2815)\n\n\u8fd9\u9053\u9898\u4e00\u6837\uff0c\u90fd\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5904\u7406\n\n\u53ea\u4e0d\u8fc7P2815\u662f\u5c06\u5b8c\u6574\u7684ipv6\u5730\u5740\u538b\u7f29\uff0c\u800c\u8fd9\u9053\u9898\u662f\u5c06\u538b\u7f29\u540e\u7684ipv6\u5730\u5740\u5c55\u5f00\uff0c\u539f\u7406\u90fd\u5dee\u4e0d\u591a\n\nP2815\u53ef\u4ee5\u7528\n\n```cpp\nscanf(\"%x:%x:%x:%x:%x:%x:%x:%x\",&s[1],&s[2],&s[3],&s[4],&s[5],&s[6],&s[7],&s[8]);\n```\n\n\u7684\u65b9\u6cd5\u8bfb\u5165\uff0c\u800c\u8fd9\u4e00\u9053\u9898\u56e0\u4e3a\u8981\u5904\u7406\u53cc\u5192\u53f7\uff0c\u800c\u4e14\u8bfb\u5165\u6570\u7684\u4e2a\u6570\u4e5f\u65e0\u6cd5\u786e\u5b9a\uff0c\u6240\u4ee5\u8fd9\u9053\u9898\u53ea\u80fd\u7528\u8bfb\u5165\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\u6765\u505a\n\n\u6839\u636e\u9898\u76ee\u5f88\u5bb9\u6613\u5c31\u60f3\u5230\u505a\u6cd5\uff0c\n\n### \u6b65\u9aa4\u5982\u4e0b\uff1a\n\n0. \u5b8f\u5b9a\u4e49\u3002\u3002\u3002\n\n```cpp\n//\u4e0d\u7528\u5728\u610f\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\uff0c\u65b9\u4fbf\u800c\u5df2\n#define main int main()\n#define Void inline void\n#define Int register int\n#define for(i, l, r) for(Int i = l; i < r; i ++)\n#define endmain return 0\n```\n\n1. \u8bfb\u5165\u5730\u5740\u5b58\u5165\u5b57\u7b26\u4e32s\n\n```cpp\ncin >> s;\n```\n\n2. \u5c06\u5b57\u7b26\u4e32s\u4e2d\u7684\u6570\u636e\u8f6c\u5b58\u5230a\u6570\u7ec4\u4e2d\uff0c\u75280xfffff\u4ee3\u66ff\u53cc\u5192\u53f7\n\n```cpp\nInt x = 0;\nfor (i, 0, s.size() - 1)\n{\n    //\u5982\u679c\u53d1\u73b0\u53cc\u5192\u53f7\uff0c\u5219\u5c06\u53cc\u5192\u53f7\u89e3\u91ca\u4e3a0xfffff\n    if (s[i] == ':' && s[i + 1] == ':')\n    {\n        a.push_back(x);    //\u56e0\u4e3a\u53d1\u73b0\u53cc\u5192\u53f7\u76f8\u5f53\u4e8e\u53d1\u73b0\u4e86\u5192\u53f7\uff0c\u5c06\u8bfb\u5165\u7684\u6570\u52a0\u5165a\u4e2d\n        x = 0;\n        a.push_back(0xfffff);   //\u5c06\u53cc\u5192\u53f7\u7684\u6807\u5fd7\u52a0\u5165a\n        i ++;   //\u8df3\u8fc7\u4e0b\u4e00\u4e2a\u5192\u53f7\n        continue;\n    }\n    //\u5982\u679c\u4e0d\u662f16\u8fdb\u5236\u6570\uff0c\u5373\u4e3a\u5192\u53f7\uff0c\u5219\u5c06\u5df2\u8bfb\u5165\u7684\u6570\u52a0\u5165a\n    if (!isdigit(s[i]) && (s[i] < 'a' || s[i] > 'f'))\n    {\n        a.push_back(x);\n        x = 0;\n        continue;\n    }\n    else    //\u5982\u679c\u662f16\u8fdb\u5236\u7684\u6570\uff0c\u5219\u7528x\u8bb0\u5f55\u8bfb\u5165\u5230\u7684\u6570\n    {\n        //\u56e0\u4e3a\u662f16\u8fdb\u5236\u6570\uff0c\u6240\u4ee5\u8981\u4e5816\uff0cx << 4\u5c31\u76f8\u5f53\u4e8e\u4e5816\n        x = (x << 4) + (isdigit(s[i]) ? s[i] - '0' : s[i] - 'a' + 10);\n    }\n}\na.push_back(x); //\u4ee5\u4e3a\u5730\u5740\u6700\u540e\u4e0d\u4f1a\u6709\u5192\u53f7\uff0c\u6240\u4ee5\u5c06\u6700\u540e\u4e00\u4e2a\u6570\u52a0\u5165a\n//\u5982\u679c\u5730\u5740\u6700\u540e\u4e3a`:`\uff0c\u5373\u53cc\u5192\u53f7\u5728\u672b\u5c3e\uff0c\n//\u4e0a\u4e00\u6b65\u591a\u52a0\u4e86\u4e00\u4e2a\u6570\uff0c\u8fd9\u4e00\u6b65\u5c06\u8fd9\u4e2a\u6570\u5220\u53bb\nif (s[s.size() - 1] == ':')\n    a.pop_back();\n//\u5426\u5219\u6700\u540e\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u56e0\u4e3a\u626b\u63cf\u6570\u5b57\u65f6\u6ca1\u6709\u626b\u63cf\u5230\u6700\u540e\u4e00\u4e2a\uff0c\n//\u6240\u4ee5\u8fd9\u4e00\u6b65\u5c06\u6700\u540e\u4e00\u4f4d\u52a0\u4e0a\nelse\n    a[a.size() - 1] = (a[a.size() - 1] << 4) + (isdigit(s[s.size() - 1]) ? s[s.size() - 1] - '0' : s[s.size() - 1] - 'a' + 10);\n\n```\n\n3. \u5c06a\u6570\u7ec4\u6309\u7167\u5b8c\u6574\u683c\u5f0f\u8f93\u51fa\uff0c\u8ba1\u7b97\"::\"\u6240\u4ee3\u8868\u76840\u7684\u4e2a\u6570\uff0c\u5e76\u8f93\u51fa\u5373\u53ef\n\n```cpp\nfor (i, 0, a.size() - 1)\n    //\u5982\u679c\u4e0d\u662f\u53cc\u5192\u53f7\uff0c\u5373\u4e3a16\u8fdb\u5236\u6570\uff0c\u8fdb\u884c\u8f93\u51fa\n    if (a[i] != 0xfffff)\n        //%04x\u5373\u4e3a\u4ee5\u5217\u5bbd\u4e3a4\u8f93\u51fa\uff0c\u7a7a\u683c\u75280\u586b\u5145\n        printf(\"%04x:\", a[i]);\n    else\n    {\n        //\u5982\u679c\u4e3a\u53cc\u5192\u53f7\uff0c\u8ba1\u7b97\u53cc\u5192\u53f7\u4ee3\u66ff\u76840\u7684\u4e2a\u6570\u5e76\u8f93\u51fa\n        //\uff08\u6b64\u65f6\u53cc\u5192\u53f7\u4e0d\u5728\u6700\u540e\uff09\n        for (j, 0, 8 - a.size() + 1)\n            printf(\"0000:\");\n    }\n//\u5982\u679c\u53cc\u5192\u53f7\u4e0d\u5728\u6700\u540e\uff0c\u8f93\u51fa\u6700\u540e\u4e00\u4e2a\u6570\nif (a[a.size() - 1] != 0xfffff)\n    printf(\"%04x\", a[a.size() - 1]);\nelse    //\u5426\u5219\u8f93\u51fa\u53cc\u5192\u53f7\u6240\u4ee3\u66ff\u76840\n{\n    //\u8fd9\u91cc\u4e09\u76ee\u8fd0\u7b97\u7b26\u7528\u6765\u5224\u65ad\u662f\u5426\u9700\u8981\u5728\u672b\u5c3e\u52a0\u4e0a\u5192\u53f7\n    for (i, 0, 8 - a.size() + 1)\n        printf(\"0000%s\", i == 8 - a.size() ? \"\" : \":\");\n}\nprintf(\"\\n\");   //\u6ce8\u610f\u6700\u540e\u5fc5\u987b\u8981\u6362\u884c\uff0c\u56e0\u4e3a\u662f\u591a\u7ec4\u6570\u636e\n\n```\n\n### AC\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <cstdio>\n#include <cctype>\n#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\nusing namespace std;\n\n//\u4e0d\u7528\u5728\u610f\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\uff0c\u65b9\u4fbf\u800c\u5df2\n#define main int main()\n#define Void inline void\n#define Int register int\n#define for(i, l, r) for(Int i = l; i < r; i ++)\n#define endmain return 0\n\n//\u5b9a\u4e49\u4e00\u4e2aa\u6570\u7ec4\u7528\u6765\u5b58\u4ece\u539f\u5730\u5740\u4e2d\u7684\u6570\nvector<int> a;\n//\u7528\u6765\u5b58\u8bfb\u5165\u7684\u539f\u5730\u5740\nstring s;\n\n//\u4ece\u539f\u5730\u5740\u4e2d\u8bfb\u5165\u6570\u5b58\u5165a\u6570\u7ec4\uff0c\u8fd9\u4e00\u6bb5\u7c7b\u4f3c\u4e8e\u5feb\u8bfb\nVoid input()\n{\n    Int x = 0;\n    for (i, 0, s.size() - 1)\n    {\n        //\u5982\u679c\u53d1\u73b0\u53cc\u5192\u53f7\uff0c\u5219\u5c06\u53cc\u5192\u53f7\u89e3\u91ca\u4e3a0xfffff\n        if (s[i] == ':' && s[i + 1] == ':')\n        {\n            a.push_back(x);    //\u56e0\u4e3a\u53d1\u73b0\u53cc\u5192\u53f7\u76f8\u5f53\u4e8e\u53d1\u73b0\u4e86\u5192\u53f7\uff0c\u5c06\u8bfb\u5165\u7684\u6570\u52a0\u5165a\u4e2d\n            x = 0;\n            a.push_back(0xfffff);   //\u5c06\u53cc\u5192\u53f7\u7684\u6807\u5fd7\u52a0\u5165a\n            i ++;   //\u8df3\u8fc7\u4e0b\u4e00\u4e2a\u5192\u53f7\n            continue;\n        }\n        //\u5982\u679c\u4e0d\u662f16\u8fdb\u5236\u6570\uff0c\u5373\u4e3a\u5192\u53f7\uff0c\u5219\u5c06\u5df2\u8bfb\u5165\u7684\u6570\u52a0\u5165a\n        if (!isdigit(s[i]) && (s[i] < 'a' || s[i] > 'f'))\n        {\n            a.push_back(x);\n            x = 0;\n            continue;\n        }\n        else    //\u5982\u679c\u662f16\u8fdb\u5236\u7684\u6570\uff0c\u5219\u7528x\u8bb0\u5f55\u8bfb\u5165\u5230\u7684\u6570\n        {\n            //\u56e0\u4e3a\u662f16\u8fdb\u5236\u6570\uff0c\u6240\u4ee5\u8981\u4e5816\uff0cx << 4\u5c31\u76f8\u5f53\u4e8e\u4e5816\n            x = (x << 4) + (isdigit(s[i]) ? s[i] - '0' : s[i] - 'a' + 10);\n        }\n    }\n    a.push_back(x); //\u4ee5\u4e3a\u5730\u5740\u6700\u540e\u4e0d\u4f1a\u6709\u5192\u53f7\uff0c\u6240\u4ee5\u5c06\u6700\u540e\u4e00\u4e2a\u6570\u52a0\u5165a\n    //\u5982\u679c\u5730\u5740\u6700\u540e\u4e3a`:`\uff0c\u5373\u53cc\u5192\u53f7\u5728\u672b\u5c3e\uff0c\n    //\u4e0a\u4e00\u6b65\u591a\u52a0\u4e86\u4e00\u4e2a\u6570\uff0c\u8fd9\u4e00\u6b65\u5c06\u8fd9\u4e2a\u6570\u5220\u53bb\n    if (s[s.size() - 1] == ':')\n        a.pop_back();\n    //\u5426\u5219\u6700\u540e\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u56e0\u4e3a\u626b\u63cf\u6570\u5b57\u65f6\u6ca1\u6709\u626b\u63cf\u5230\u6700\u540e\u4e00\u4e2a\uff0c\n    //\u6240\u4ee5\u8fd9\u4e00\u6b65\u5c06\u6700\u540e\u4e00\u4f4d\u52a0\u4e0a\n    else\n        a[a.size() - 1] = (a[a.size() - 1] << 4) + (isdigit(s[s.size() - 1]) ? s[s.size() - 1] - '0' : s[s.size() - 1] - 'a' + 10);\n}\n\nVoid work()\n{\n    //\u8bb0\u5f97\u5c06a\u6570\u7ec4\u6e05\u7a7a\n    a.clear();\n    s = \"\";\n    cin >> s;\n    input();    //\u5c06a\u6570\u7ec4\u4e2d\u7684\u6570\u636e\u8bfb\u5165a\u6570\u7ec4\n    for (i, 0, a.size() - 1)\n        //\u5982\u679c\u4e0d\u662f\u53cc\u5192\u53f7\uff0c\u5373\u4e3a16\u8fdb\u5236\u6570\uff0c\u8fdb\u884c\u8f93\u51fa\n        if (a[i] != 0xfffff)\n            //%04x\u5373\u4e3a\u4ee5\u5217\u5bbd\u4e3a4\u8f93\u51fa\uff0c\u7a7a\u683c\u75280\u586b\u5145\n            printf(\"%04x:\", a[i]);\n        else\n        {\n            //\u5982\u679c\u4e3a\u53cc\u5192\u53f7\uff0c\u8ba1\u7b97\u53cc\u5192\u53f7\u4ee3\u66ff\u76840\u7684\u4e2a\u6570\u5e76\u8f93\u51fa\n            //\uff08\u6b64\u65f6\u53cc\u5192\u53f7\u4e0d\u5728\u6700\u540e\uff09\n            for (j, 0, 8 - a.size() + 1)\n                printf(\"0000:\");\n        }\n    //\u5982\u679c\u53cc\u5192\u53f7\u4e0d\u5728\u6700\u540e\uff0c\u8f93\u51fa\u6700\u540e\u4e00\u4e2a\u6570\n    if (a[a.size() - 1] != 0xfffff)\n        printf(\"%04x\", a[a.size() - 1]);\n    else    //\u5426\u5219\u8f93\u51fa\u53cc\u5192\u53f7\u6240\u4ee3\u66ff\u76840\n    {\n        //\u8fd9\u91cc\u4e09\u76ee\u8fd0\u7b97\u7b26\u7528\u6765\u5224\u65ad\u662f\u5426\u9700\u8981\u5728\u672b\u5c3e\u52a0\u4e0a\u5192\u53f7\n        for (i, 0, 8 - a.size() + 1)\n            printf(\"0000%s\", i == 8 - a.size() ? \"\" : \":\");\n    }\n    printf(\"\\n\");   //\u6ce8\u610f\u6700\u540e\u5fc5\u987b\u8981\u6362\u884c\uff0c\u56e0\u4e3a\u662f\u591a\u7ec4\u6570\u636e\n}\n\nmain\n{\n    Int t;\n    scanf(\"%d\", &t);\n    while (t --)\n        work();\n    endmain;\n}\n```\n\n#### \u6700\u540e\u9644\u4e0a\u4e00\u5f20AC\u622a\u56fe\uff1a\n\n![AC\u622a\u56fe](https://s2.ax1x.com/2019/01/27/kubUQP.png)\n",
        "postTime": 1548574154,
        "uid": 79076,
        "name": "0AND1STORY",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF250B \u3010Restoring IPv6\u3011"
    },
    {
        "content": "\n## \u4e00\u3001\u601d\u8def\n\u7531\u4e8e $ipv6$ \u5730\u5740\u6709 $8$ \u201c\u6bb5\u201d\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u590d\u539f\u7684\u65f6\u5019\u53ef\u4ee5\u5148\u5b9a\u4e49\u4e2a $ss[9]$\uff0c\u5176\u4e2d $ss[i]$ \u8868\u793a\u7b2c $i$ \u201c\u6bb5\u201d\u3002**\u4ee5\u4e0b\u4f1a\u5206\u4e3a\u51e0\u4e2a\u5c0f\u8282\u8fdb\u884c\u8bb2\u89e3\u3002**\n\n### \u5982\u4f55\u5206\u201c\u6bb5\u201d\n\u6211\u4eec\u53ef\u4ee5\u5148\u8003\u8651\u4ece\u5de6\u5230\u53f3\u5c06\u5b57\u7b26\u4e32\u626b\u63cf\u4e00\u6b21\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u7ed3\u675f\u6216\u8005\u9047\u5230\u5192\u53f7\uff0c\u5c31\u53ef\u4ee5\u8bb0\u4e3a\u4e00\u6bb5\u3002\n### \u5982\u4f55\u8865\u5145\u6bcf\u4e00\u6bb5\u7701\u7565\u7684$0$\n\u5728\u626b\u63cf\u7684\u65f6\u5019\uff0c\u5b9a\u4e49\u4e00\u4e2a $p$\uff0c\u4ee3\u8868\u626b\u63cf\u5230\u4e00\u6bb5\u4e2d\u975e\u5192\u53f7\u5b57\u7b26\u4e2a\u6570\uff0c\u5982\u679c\u9047\u5230\u5192\u53f7\uff0c\u5c31\u6709\u4e24\u79cd\u60c5\u51b5\uff1a$p==4$ \u548c $p!=4$\u3002\u60c5\u51b5\u4e00\uff1a\u6ca1\u6709\u7701\u7565\u7684$0$\uff1b\u60c5\u51b5\u4e8c\uff1a\u6709\u7701\u7565\uff0c\u90a3\u4e48\u53ef\u4ee5\u6839\u636e $p$ \u7684\u503c\u5148\u5728 $ss[pe]$\uff08$pe$ \u4ee3\u8868\u6bb5\u6570\uff0c\u4e0b\u9762\u7684\u5c0f\u8282\u4f1a\u8be6\u7ec6\u8bf4\u660e\uff09\u4e2d\u8865\u5145 $4-p$ \u4e2a$0$\u3002\u5904\u7406\u5b8c\u540e\uff0c$p$ \u5f52\u96f6\u3002\n### \u5982\u4f55\u8bb0\u5f55\u6bb5\u6570\n\u5b9a\u4e49\u4e00\u4e2a $pe$\uff0c\u521d\u59cb\u503c\u4e3a$1$\uff0c\u4ee3\u8868\u4e00\u5f00\u59cb\u5904\u7406\u7684\u662f\u7b2c\u4e00\u6bb5\u3002\u5728\u4e0a\u8ff0\u64cd\u4f5c\u7ed3\u675f\u65f6\uff0c$pe++$\u3002\n### \u5982\u4f55\u5224\u65ad\u53cc\u5192\u53f7\u7701\u7565\u4e86\u591a\u5c11$0$\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u6b64\u5730\u5740\uff1a\n\n\t::1\n    ::rq\n\u8865\u5168\u4e4b\u540e\u4e3a\uff1a\n\n\t0000:0000:0000:0000:0000:0000:0000:0001\n    0000:0000:0000:0000:0000:0000:0000:00rq\n\u7531\u4e8e\u5728\u7701\u7565$0$\u540e\u9762\u53c8\u6709\u8981\u8865\u5145\u7684\u6570\u5b57\u548c\u5b57\u6bcd\uff0c\u6211\u4eec\u4fbf\u53ea\u8865\u5145\u5168$0$\u3002\u6240\u8c13\u5168$0$\uff0c\u662f\u6307\u6709\u82e5\u5e72\u6bb5\uff0c\u6bcf\u4e00\u6bb5\u6574\u6bb5\u90fd\u662f\u96f6\u3002\u5982\u4e0a\u8ff0\u7684\u5168$0$\u4e3a\uff1a\n\n\t0000:0000:0000:0000:0000:0000:0000\n    0000:0000:0000:0000:0000:0000:0000\n\u4e4b\u540e\u7684$0001$\u548c$000rq$\u53ef\u4ee5\u7531\u7b2c\u4e8c\u5c0f\u8282\u4e2d\u7684\u64cd\u4f5c\u5c06\u7f3a\u5931$0$\u7684\u6bb5\u8865\u5145\u5b8c\u6574\u3002\n\n\u90a3\u4e48\u5230\u5e95\u5982\u4f55\u5224\u65ad\u53cc\u5192\u53f7\u7684\u5168$0$\u6709\u591a\u5c11\u4e2a\uff1f\u6211\u4eec\u53ef\u4ee5\u5728\u5904\u7406\u4e4b\u524d\u5148\u770b\u9664\u4e86\u53cc\u5192\u53f7\u5916\u6709\u591a\u5c11\u5b8c\u6574\u6216\u4e0d\u5b8c\u6574\u7684\u6bb5\uff0c\u5047\u8bbe\u6bb5\u6570\u4e3a $m$\uff0c\u5219\u6700\u540e\u5168$0$\u4e2a\u6570\u4e3a $32-4*m$ \uff08\u4e3a\u4e86\u4fdd\u6301 $C++$ \u7684\u7279\u6027\uff0c\u4e58\u53f7\u4f5c\u661f\u53f7\uff09\uff0c\u4e2d\u95f4\u6709 $8-m$ \u6bb5\u662f\u5168$0$\u6bb5\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstring s,s1,ss[9];\nint n,tot,num,p,flag,pe,zero,num_,m;\nvoid output(){\n\tfor(int j=1;j<=7;j++)\n\t\tcout<<ss[j]<<\":\";\n\tcout<<ss[8]<<\"\\n\";\n}//\u8f93\u51fa\u51fd\u6570\uff0c\u65b9\u4fbf\u8c03\u8bd5\nint main(){\n\tscanf(\"%d\",&n);\n\twhile(n--){\n\t\ttot=0;\n\t\tzero=0;\n\t\tflag=0;\n\t\tnum_=0;\n\t\tp=0;\n\t\tm=0; //\u4e00\u5f00\u59cb\u5b8c\u6574\u6216\u4e0d\u5b8c\u6574\u7684\u6bb5\u6570\n\t\tpe=1;\n\t\ts=\"\";\n\t\tfor(int i=1;i<=8;i++) ss[i]=\"\";//\u5168\u90e8\u521d\u59cb\u5316\n\t\tcin>>s;\n\t\tfor(int i=0;i<s.size();i++)\n\t\t\tif(s[i]!=':') tot++;\n\t\t\telse{\n\t\t\t\tif(s[i+1]==':') i++,num_++;\n\t\t\t\tif(tot) m++,tot=0;\n\t\t\t}\n\t\tif(num_>1){\n\t\t\tcout<<\"INVALID\\n\";\n\t\t\tcontinue;\n\t\t}\n\t\tif(tot) m++; \n\t\tzero=32-4*m;//\u5224\u65ad\u6709\u591a\u5c110\u5f85\u8865\n\t\tint i;\n\t\tfor(i=0;i<=s.size();i++){\n\t\t\t\n\t\t\tif(s[i]!=':'&&i!=s.size()) p++;//\u4e00\u6bb5\u4e2d\u6570\u6216\u5b57\u6bcd\u7684\u4e2a\u6570++\n\t\t\tif(s[i]==':'||i==s.size()){\n\t\t\t\tif(p){\n\t\t\t\t\tif(p>4){\n\t\t\t\t\t\tcout<<\"INVALID\\n\";\n\t\t\t\t\t\tflag=1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(int j=1;j<=4-p;j++) ss[pe]+='0';//\u88650\n\t\t\t\t\t\tfor(int j=i-p;j<i;j++) ss[pe]+=s[j];\n\t\t\t\t\t}//\u4e0a\u8ff0\u64cd\u4f5c2\uff0c\u5373\u8865\u4e0d\u5b8c\u6574\u6bb5\u4e2d\u76840\n\t\t\t\t\tpe++;//\u6bb5\u6570++\n\t\t\t\t}\n\t\t\t\tp=0;\n\t\t\t\tif(i!=s.size()){\n\t\t\t\t\tif(s[i+1]==':'){\n\t\t\t\t\t\tnum=zero/4;\n\t\t\t\t\t\tfor(int j=pe;j<pe+num;j++) ss[j]=\"0000\";\n\t\t\t\t\t\tpe+=num;\n\t\t\t\t\t\ti++;//\u8df3\u8fc7\u8fd9\u4e2a\u5192\u53f7\uff0c\u76f4\u63a5\u5f00\u59cb\u4e0b\u4e00\u4e2a\u6570\u5b57\u6216\u5b57\u6bcd\n\t\t\t\t\t}\n\t\t\t\t} //\u8865\u51680\uff0c\u6709num\u6bb5\uff0c\u6240\u4ee5pe+=num\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\tif(flag) continue;//\u8fd9\u91cc\u662f\u5224\u65ad\u8f93\u5165\u4e0d\u5408\u6cd5\uff0c\u8f93\u51fa\u201cInvalid\u201d\u4e5f\u662f\u5728\u5224\u65ad\u8f93\u5165\u4e0d\u5408\u6cd5\uff0c\u867d\u7136\u9898\u76ee\u4e2d\u4e0d\u5b58\u5728\u8fd9\u6837\u7684\u8981\u6c42\uff0c\u4f46\u662f\u8fd8\u662f\u6dfb\u52a0\u4e86\u90e8\u5206\u5224\u65ad\uff0c\u8bfb\u8005\u53ef\u4ee5\u5ffd\u7565\n\t\toutput();//\u8f93\u51fa\n\t}\n\treturn 0;\n}\n```\n**\u5982\u679c\u770b\u4ee3\u7801\u770b\u4e0d\u61c2\uff0c\u8bf7\u52a1\u5fc5\u591a\u770b\u601d\u8def\uff0c\u4ee3\u7801\u7684\u7f16\u5199\u7d27\u6263\u601d\u8def\u3002**\n",
        "postTime": 1612785592,
        "uid": 88339,
        "name": "\u7f57\u5c0f\u9ed1\u5c0f\u9c7c",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF250B \u3010Restoring IPv6\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5bf9\u4e8e\u6bcf\u7ec4\u6570\u636e\u6765\u770b\u5148\u5c06\u7b54\u6848\u6570\u7ec4\u6e05\u96f6\uff08\u53d8\u4e3a `0000`\uff09\u3002\n\n\u5728\u7ed9\u51fa\u7f29\u5199\u4e2d\u627e\u51fa `::` \u5b50\u4e32\u3002\u6b64\u65f6\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\uff1a\n\n\u7b2c\u4e00\u79cd\uff1a\u627e\u5230\u4e86\u3002\u6b64\u65f6\u5c06\u8fd9\u4e2a\u5730\u5740\u5206\u4e3a `::` \u524d\u548c `::` \u540e\u4e24\u6bb5\uff0c\u5bf9\u4e8e\u524d\u9762\u4e00\u6bb5\uff0c\u5c06\u6bcf\u4e2a\u5757\u4ece\u5934\u5f00\u59cb\u5f80\u4e0b\u586b\u3002\u6bd4\u5982\u5bf9\u4e8e `19:26::8:17`\uff0c\u6211\u4eec\u53d1\u73b0\u524d\u9762\u4e00\u6bb5\u4e3a`1:2:3:4`\uff0c\u5219\u4ece\u7b54\u6848\u6570\u7ec4\u7684\u7b2c $0$ \u4e2a\u5143\u7d20\u5f00\u59cb\uff0c\u5206\u522b\u653e\u5165 `0019`\uff0c`0026`\u3002\u7136\u540e\u5bf9\u4e8e\u540e\u9762\u4e00\u6bb5\uff0c\u4ece\u540e\u5f80\u524d\u679a\u4e3e\uff0c\u5c06\u7b54\u6848\u4ece\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5f80\u524d\u586b\u3002\u6bd4\u5982\u5bf9\u4e8e\u524d\u9762\u5217\u51fa\u6765\u7684 ip\uff0c\u6211\u4eec\u53d1\u73b0\u540e\u9762\u4e00\u6bb5\u4e3a `8:17` \uff0c\u5219\u4ece\u7b54\u6848\u7684\u7b2c $7$ \u4e2a\u5143\u7d20\u5f00\u59cb\uff0c\u5206\u522b\u653e\u5165 `0017`\uff0c`0008`\u3002\n\n\u5f53\u7136\uff0c\u8fd8\u6709\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u6ca1\u627e\u5230\u3002\u6b64\u65f6\u76f4\u63a5\u5bf9\u8fd9\u4e2a\u5b57\u7b26\u4e32\u8fdb\u884c\u5904\u7406\u5373\u53ef\u3002\u4e3a\u4e86\u51cf\u5c11\u7279\u5224\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u4ece\u6700\u540e\u4e00\u5757\u7684\u540e\u9762\u5206\u5f00\uff0c\u5206\u6210\u524d\u9762\u4e00\u6bb5\u4e3a\u539f ip\uff0c\u540e\u9762\u4e00\u6bb5\u4e3a\u7a7a\u7684\u60c5\u51b5\u8fdb\u884c\u5904\u7406\u3002\n\n\u5f3a\u70c8\u5efa\u8bae\u5168\u7a0b\u628a\u51fa\u73b0\u7684 ip \u5f53\u505a\u5b57\u7b26\u4e32\u505a\uff0c\u4e0d\u8981\u8f6c\u6210\u4efb\u4f55\u8fdb\u5236\u7684\u6570\u5b57\u3002\u540c\u65f6\u5efa\u8bae\u5728\u5206\u6210\u7684\u524d\u9762\u4e00\u6bb5\u7684\u6700\u540e\u4ee5\u53ca\u540e\u9762\u4e00\u6bb5\u7684\u6700\u524d\u52a0\u4e0a `:` \u4ee5\u514d\u5faa\u73af\u5b8c\u540e\u8fd8\u8981\u518d\u6b21\u5904\u7406\u3002\n\n\u9644\uff1aAC \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\ntypedef long long ll;\ntypedef unsigned long long ull;\n#define pii pair<int,int>\n#define mii map<int,int>\n#define mset(a,x) memset(a,x,sizeof(a))\n#define msetl(a) memset(a,0x3f,sizeof(a))\n#define pb push_back\n#define mp make_pair\nusing namespace std;\nconst int err=-120712^7869^12174,uerr=0x3f3f3f3f,eps=1e-9;\nstring st,pre=\"\",lst=\"\",ans[8];\nint n;\nstring change(string st){\n\twhile(st.size()<4) st='0'+st;\n\treturn st;\n}\nvoid decode(string st){\n\tfor(int i=0;i<8;++i) ans[i]=\"0000\";\n\tpre=\"\",lst=\"\";\n\tint i;\n\tfor(i=0;i<st.size()-1;++i){\n\t\tif(st[i]==':'&&st[i+1]==':'){\n\t\t\tpre=st.substr(0,i+1);\n\t\t\tlst=st.substr(i+1);\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(i==st.size()-1) pre=st+':';\n//\tcout<<\"pre=\"<<pre<<\" lst=\"<<lst<<endl;\n\tstring t;int p=0;\n\tfor(int i=0;i<pre.size();++i){\n\t\tif(pre[i]==':'){\n\t\t\tans[p++]=change(t);\n\t\t\tt=\"\";\n\t\t}\n\t\telse t+=pre[i];\n\t}\n\tp=7,t=\"\";\n\tfor(int i=lst.size()-1;i>=0;--i){\n\t\tif(lst[i]==':'){\n\t\t\tans[p--]=change(t);\n\t\t\tt=\"\";\n\t\t}\n\t\telse t=lst[i]+t;\n\t}\n\tfor(int i=0;i<8;++i) cout<<ans[i]<<\":\\n\"[i==7];\n}\nint main(){\n//\tfreopen(\"C.in\",\"r\",stdin);\n//\tfreopen(\"C.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\twhile(n--){\n\t\tcin>>st;\n\t\tdecode(st);\n\t}\n\treturn 0;}\n\n```",
        "postTime": 1632189931,
        "uid": 224222,
        "name": "fz20181223",
        "ccfLevel": 5,
        "title": "\u9898\u89e3CF250B Restoring IPv6"
    }
]
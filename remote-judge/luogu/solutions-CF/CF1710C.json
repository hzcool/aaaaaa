[
    {
        "content": "\u6570\u4f4dDP\u5165\u95e8\u9898\uff0c\u7ed9\u4e00\u79cd\u5199\u8d77\u6765\u5f88\u7b80\u6d01\u7684\u505a\u6cd5\u3002\n\n\u5bf9\u4e8e\u4e09\u4e2a\u6570 $x,y,z$ \uff0c\u9664\u4e86\u5927\u5c0f\u9650\u5236\u5916\uff0c\u5269\u4f59\u7684\u9650\u5236\u53ea\u6709 $x\u2295y+x\u2295z>y\u2295z$\uff0c$y\u2295x+y\u2295z>x\u2295z$\uff0c$z\u2295x+z\u2295y>x\u2295y$\u3002\n\n\u8fd9\u4e09\u4e2a\u5f0f\u5b50\u662f\u8f6e\u6362\u7684\uff0c\u5148\u8003\u8651\u7b2c\u4e8c\u4e2a\u5f0f\u5b50\u3002\n\n\u8bbe $x,y,z$ \u5728\u67d0\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u4e0a\u5206\u522b\u662f $a,b,c$\uff0c\u90a3\u4e2a\u53ea\u6709 $2^3=8$ \u79cd $a,b,c$ \u7684\u7ec4\u5408\uff0c\u6211\u4eec\u5c06 $a,b,c,b\u2295a,b\u2295c,a\u2295c$ \u7684\u8868\u7ed9\u6253\u51fa\u6765\uff1a\n\n| $a$ | $b$ | $c$ | $b\u2295a$ | $b\u2295c$ | $a\u2295c$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $0$ | $0$ | $0$ | $0$ | $0$ |\n| $0$ | $0$ | $1$ | $0$ | $1$ | $1$ |\n| $0$ | $1$ | $0$ | $1$ | $1$ | $0$ |\n| $0$ | $1$ | $1$ | $1$ | $0$ | $1$ |\n| $1$ | $0$ | $0$ | $1$ | $0$ | $1$ |\n| $1$ | $0$ | $1$ | $1$ | $1$ | $0$ |\n| $1$ | $1$ | $0$ | $0$ | $1$ | $1$ |\n| $1$ | $1$ | $1$ | $0$ | $0$ | $0$ |\n\n\n\u6211\u4eec\u53d1\u73b0 **$b\u2295a+b\u2295c$ \u603b\u662f\u4e0d\u5c0f\u4e8e $a\u2295c$**\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6240\u6709\u6570\u4f4d\uff0c\u53ea\u9700\u5b58\u5728\u4e00\u4f4d\u662f $b\u2295a+b\u2295c>a\u2295c$ \u7684\u60c5\u51b5\uff08\u5f53\u4e14\u4ec5\u5f53 $a=0,b=1,c=0$ \u6216 $a=1,b=0,c=1$\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u80fd\u4fdd\u8bc1 $y\u2295x+y\u2295z>x\u2295z$\uff0c\u5bf9\u4e8e\u53e6\u5916\u4e24\u4e2a\u9650\u5236\u5c06\u8fd9\u4e2a\u7ed3\u8bba\u7ed9\u8f6e\u6362\u4e00\u4e0b\u5373\u53ef\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728 DP \u4e2d\u591a\u8bb0\u4e09\u4e2a\u91cf\uff0c\u5206\u522b\u8868\u793a\u76ee\u524d\u80fd\u5426\u4fdd\u8bc1$x\u2295y+x\u2295z>y\u2295z$\uff0c$y\u2295x+y\u2295z>x\u2295z$\uff0c$z\u2295x+z\u2295y>x\u2295y$\u3002\n\n\u7136\u540e\u5c31\u5199\u5b8c\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(2^9n)$\uff0c\u5341\u5206\u5408\u7406\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\nconst int mod=998244353;\nchar a[N];\nint n,dp[N][2][2][2][2][2][2];\ninline int dfs(int k,bool l1,bool l2,bool l3,bool _x,bool _y,bool _z){\n\tif(k>n)return _x&&_y&&_z;\n\tif(dp[k][l1][l2][l3][_x][_y][_z]!=-1)return dp[k][l1][l2][l3][_x][_y][_z];\n\tint res=0;\n\tfor(int x=0;x<=(l1?a[k]-'0':1);x++)for(int y=0;y<=(l2?a[k]-'0':1);y++)for(int z=0;z<=(l3?a[k]-'0':1);z++)\n\t\tres=(res+dfs(k+1,l1&(x==a[k]-'0'),l2&(y==a[k]-'0'),l3&(z==a[k]-'0'),_x|(x==0&&y==1&&z==1)|(x==1&&y==0&&z==0),_y|(y==0&&x==1&&z==1)|(y==1&&x==0&&z==0),_z|(z==0&&x==1&&y==1)|(z==1&&x==0&&y==0)))%mod;\n\treturn dp[k][l1][l2][l3][_x][_y][_z]=res;\n}\nint main(){\n\tscanf(\"%s\",a+1);\n\tn=strlen(a+1);\n\tmemset(dp,-1,sizeof dp);\n\tprintf(\"%d\\n\",dfs(1,1,1,1,0,0,0));\n\treturn 0;\n}\n```",
        "postTime": 1658886343,
        "uid": 115668,
        "name": "y0y68",
        "ccfLevel": 0,
        "title": "CF1710C"
    },
    {
        "content": "## CF1710C XOR Triangle \u9898\u89e3\n\n\u6700\u8fd1\u590d\u4e60\u4e86\u6570\u4f4d DP\uff0c\u53c8\u6070\u597d\u505a\u5230\u4e86\u8fd9\u9898\uff0c\u987a\u4fbf\u5199\u7bc7\u9898\u89e3\u3002\u9898\u610f\u5f88\u7b80\u5355\uff0c\u7ed9\u51fa\u4e00\u4e2a\u4e8c\u8fdb\u5236\u5927\u6570 $n$\uff0c\u6c42\u6ee1\u8db3 $0\\le a,b,c\\le n$ \u4e14 $a\\oplus b$\uff0c$b\\oplus c$\uff0c$a\\oplus c$ \u53ef\u56f4\u6210\u4e09\u89d2\u5f62\u7684\u65b9\u6848\u6570\u3002\n\n\u8003\u8651\u679a\u4e3e $n$ \u7684\u6bcf\u4e00\u4f4d\uff0c\u56de\u60f3\u4e00\u4e0b\u6b63\u5e38\u7684\u6570\u4f4d DP\uff0c\u6211\u4eec\u679a\u4e3e\u8fd9\u4e00\u4f4d\u53ef\u4ee5\u586b\u7684\u6570\u5b57\uff0c\u5916\u52a0\u5224\u65ad\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\u3002\u5728\u8fd9\u9898\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u4e00\u6b21\u6027\u51b3\u5b9a $a_i,b_i,c_i$ \u8fd9 $3$ \u4e2a\u6570\u7684\u503c\uff0c\u5e76\u4e14\u8003\u8651\u8fd9\u4e09\u4e2a\u6570\u4e92\u76f8\u7684\u9650\u5236\u6761\u4ef6\u3002\u4e0d\u59a8\u8bbe $a_i,b_i,c_i$ \u4e24\u4e24\u5f02\u6216\u7684\u7ed3\u679c\u4e3a $f,g,h$\uff0c\u5bb9\u6613\u8bc1\u660e\uff0c\u5f53\u4e14\u4ec5\u5f53 $f=g=1,h=0$ \u65f6\uff0c\u6709 $f+g>h$\uff08\u56e0\u4e3a\u4e0d\u53ef\u80fd\u51fa\u73b0 $f=g=h=1$ \u7684\u60c5\u51b5\uff09\uff0c\u5373 $a_i,b_i,c_i$ \u4e2d\u53ea\u6709 $1$ \u4e2a $1$ \u6216\u8005\u53ea\u6709 $1$ \u4e2a $0$ \u7684\u60c5\u51b5\u3002\u5177\u4f53\u5730\uff0c\u5f53\u4e14\u4ec5\u5f53\u53ea\u6709 $a_i=0$ \u6216\u53ea\u6709 $a_i=1$ \u65f6\uff0c$a_i\\oplus b_i+a_i\\oplus c_i>b_i\\oplus c_i$\uff0c$b_i,c_i$ \u540c\u7406\u3002\u4e8e\u662f\u9650\u5236\u6761\u4ef6\u6709\u4e86\uff0c\u53ef\u4ee5\u5f00\u59cb\u8bb0\u5fc6\u5316\u641c\u7d22\u6765\u6570\u4f4d DP \u4e86\u3002\n\n### Code\n\n~~\u56e0\u4e3a\u7801\u98ce\u592a\u6bd2\u7624~~\uff0c\u4ee3\u7801\u8bf7[\u6233\u8fd9\u91cc](https://codeforces.com/problemset/submission/1710/166201212)\u3002",
        "postTime": 1659168851,
        "uid": 219866,
        "name": "Blunt_Feeling",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1710C \u3010XOR Triangle\u3011"
    },
    {
        "content": "\u6211\u4eec\u4ee4 $x=a\\ \\text{xor}\\ b$\uff0c$y=b\\ \\text{xor}\\ c$\uff0c$z=c\\ \\text{xor}\\ a$\u3002\u5bb9\u6613\u53d1\u73b0 $x,y,z$ \u6ee1\u8db3 $x\\ \\text{xor}\\ y\\ \\text{xor}\\ z=0$\u3002\u6211\u4eec\u8003\u8651\u4ed6\u4eec\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u6784\u6210\u4e09\u89d2\u5f62\u3002\u7ed3\u8bba\u662f\uff1a\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u5176\u4e2d\u4e24\u4e2a\u6570 $x,y$ \u6ee1\u8db3 $x\\ \\text{and}\\ y=0$\uff0c\u4e0d\u6ee1\u8db3\u6784\u6210\u4e09\u89d2\u5f62\u3002\u4e0b\u9762\u7b80\u5355\u8bf4\u660e\u4e00\u4e0b\u3002\n\n- \u5145\u5206\uff1a\u5f53 $x\\ \\text{and}\\ y=0$ \u65f6\uff0c$x$ \u4e0e $y$ \u4e0d\u4f1a\u540c\u65f6\u6709\u4e00\u4f4d\u662f $1$\u3002\u6240\u4ee5 $x\\ \\text{xor}\\ y=x+y=z$\uff0c\u56e0\u6b64\u4e0d\u6ee1\u8db3\u3002\n- \u5fc5\u8981\uff1a\u4efb\u610f\u4e24\u4e2a\u6570\u7684\u4e0e\u90fd\u4e0d\u7b49\u4e8e $0$\uff0c\u6211\u4eec\u4e0d\u59a8\u4e09\u4e2a\u6570\u5927\u5c0f\u987a\u5e8f $x>y>z$\u3002\u7531\u4e8e $y\\ \\text{and}\\ z>0$\uff0c\u90a3\u4e48 $y,z$ \u81f3\u5c11\u6709\u4e00\u4f4d\u540c\u65f6\u662f $1$\uff0c\u6240\u4ee5 $x=y\\ \\text{xor}\\ z<y+z$\u3002\u4e5f\u5c31\u6ee1\u8db3\u6784\u6210\u4e09\u89d2\u5f62\u3002\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u6570\u4f4d DP\u3002\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u505a\uff0c\u8bb0\u4e09\u4e2a\u53d8\u91cf\u8868\u793a\u5f53\u524d $a,b,c$ \u662f\u5426\u6ee1\u8db3\u5df2\u586b\u7684\u4f4d\u90fd\u4e0e $n$ \u76f8\u540c\u7684\u9650\u5236\uff0c\u518d\u8bb0\u4e09\u4e2a\u53d8\u91cf\u5206\u522b\u8868\u793a $x\\ \\text{and}\\ y$\uff0c$y\\ \\text{and}\\ z$\uff0c$z\\ \\text{and}\\ x$ \u662f\u5426\u4ecd\u4e3a $0$\u3002\u8f6c\u79fb\u662f\u5e73\u51e1\u7684\uff0c\u679a\u4e3e $a,b,c$ \u8fd9\u4e00\u4f4d\u586b\u4e86\u4ec0\u4e48\uff0c\u66f4\u65b0\u4e0a\u8ff0\u516d\u4e2a\u53d8\u91cf\u5373\u53ef\u3002\n\n\u8fd9\u6837\u505a\u7684\u590d\u6742\u5ea6\u662f $O(2^9n)$\u3002\n\n```cpp\nconst int N=200005;\nint n,m; \nchar s[N];\nll dp[N][2][2][2][2][2][2];\n\nll dfs(int u,bool a,bool b,bool c,bool x,bool y,bool z)\n{\n\tif (u==n+1)\n\t{\n\t\tif (x&&y&&z) return 1;\n\t\treturn 0;\n\t}\n\tif (dp[u][a][b][c][x][y][z]!=-1) return dp[u][a][b][c][x][y][z];\n\tll res=0;\n\tfor (int i=0;i<=1;i++)\n\t{\n\t\tif (a&&i>s[u]-'0') continue;\n\t\tfor (int j=0;j<=1;j++)\n\t\t{\n\t\t\tif (b&&j>s[u]-'0') continue;\n\t\t\tfor (int k=0;k<=1;k++)\n\t\t\t{\n\t\t\t\tif (c&&k>s[u]-'0') continue;\n\t\t\t\tres=(res+dfs(u+1,a&(s[u]-'0'==i),b&(s[u]-'0'==j),c&(s[u]-'0'==k),x|((i^j)&(j^k)),y|((i^k)&(j^k)),z|((i^k)&(j^i))))%mod;\n\t\t\t}\n\t\t}\n\t}\n\tdp[u][a][b][c][x][y][z]=res;\n\treturn res;\n}\n\nint main()\n{\n\tcin >> (s+1);\n\tn=strlen(s+1);\n\tmemset(dp,-1,sizeof(dp));\n\tcout << dfs(1,1,1,1,0,0,0);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1658907731,
        "uid": 151475,
        "name": "Little09",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1710C XOR Triangle"
    },
    {
        "content": "\u4e00\u4e2a\u5e38\u6570\u66f4\u5c0f\u7684\u505a\u6cd5\u3002\n\n\u5bf9\u4e8e $a \\oplus b + b \\oplus c = a \\oplus c$\u4ee4 $A = a \\oplus b$\uff0c$B = b \\oplus c$\uff0c\u5219 $a \\oplus c = A \\oplus B$\u3002\n\n\u663e\u7136\u6709 $A \\oplus B \\leq A + B$\u3002 \n\n\u5219\u9700\u8981\u6ee1\u8db3\u9898\u610f\uff0c\u53ea\u9700\u6263\u9664\u5b58\u5728 $a \\oplus b + b\\oplus c = a \\oplus c$ \u6216\u4e0e\u5176\u7b49\u4ef7\u5f0f\u5b50\u7684\u4e09\u5143\u7ec4\u5373\u53ef\u3002\n\n\u73b0\u5728\u6211\u4eec\u901a\u8fc7\u6570\u4f4d $dp$ \u6c42\u89e3 $a \\oplus b + b\\oplus c = a \\oplus c$ \u7684\u4e09\u5143\u7ec4\u4e2a\u6570\u3002\n\n\u8bb0 $f_{i,0/1,0/1,0/1}$ \u8868\u793a\u5b8c\u6210\u4e86\u524d $i$ \u4e2a\u5b57\u7b26\uff0c$n$ \u4e3a\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c$a,b,c$ \u662f\u5426\u4e0e $n$ \u5168\u90e8\u76f8\u7b49\u7684\u4e2a\u6570\u3002\n\n\u6839\u636e\u4e0a\u8ff0\u6761\u4ef6\uff0c\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u90fd\u8981\u6ee1\u8db3 $a \\oplus b + b \\oplus c = a \\oplus c$\u3002\n\n\u8fd9\u6837\u7684 $(a,b,c)$ \u6709 $6$ \u79cd\u3002\n\n\u6709 $(0,0,0),(0,0,1),(0,1,1),(1,0,0),(1,1,0),(1,1,1)$ \u5171 $6$ \u79cd\u3002\n\n\u6839\u636e\u6570\u4f4d $dp$ \u7684\u64cd\u4f5c\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u5177\u4f53\u8f6c\u79fb\u5f0f\u5b50\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u3002\n\n\u6700\u540e\u901a\u8fc7\u5bb9\u65a5\u5c06\u91cd\u590d\u7b97\u7684\u51cf\u53bb\u5373\u53ef\u3002\n\n\u6709\u4e24\u4e2a\u4ee5\u4e0a\u7b49\u5f0f\u7684\u4e09\u5143\u7ec4\u90fd\u5f88\u5bb9\u6613\u8ba1\u7b97\u3002\n\n```cpp\n\n#include<cstdio>\nconst int N=20000020;\nconst unsigned int mod=998244353;\nunsigned long long f[2][2][2][2],now,res,ans;\nchar s[N];\nint main(){\n\tint i,n=0,o=0;\n\tscanf(\"%s\",s),f[0][0][0][0]=1;\n\tfor(i=0;s[i];i++,n++)now=now*2%mod,now+=s[i]-'0';\n\tfor(i=0;i<n;i++,o^=1){\n\t\tif(s[i]=='0') {\n\t\t\tf[o^1][0][0][0]=f[o][0][0][0];\n\t\t\tf[o^1][1][0][0]=f[o][1][0][0]*2%mod;\n\t\t\tf[o^1][0][0][1]=f[o][0][0][1]*2%mod;\n\t\t\tf[o^1][0][1][1]=f[o][0][1][1]*3%mod;\n\t\t\tf[o^1][1][0][1]=f[o][1][0][1]*3%mod;\n\t\t\tf[o^1][1][1][0]=f[o][1][1][0]*3%mod;\n\t\t\tf[o^1][1][1][1]=f[o][1][1][1]*6%mod; \n\t\t}\n\t\telse {\n\t\t\tf[o^1][0][0][0]=f[o][0][0][0];\n\t\t\tf[o^1][1][0][0]=(f[o][1][0][0]*2+f[o][0][0][0])%mod;\n\t\t\tf[o^1][0][0][1]=(f[o][0][0][1]*2+f[o][0][0][0])%mod;\n\t\t\tf[o^1][0][1][1]=(f[o][0][1][1]*3+f[o][0][0][1]+f[o][0][1][0]*2+f[o][0][0][0])%mod;\n\t\t\tf[o^1][1][0][1]=(f[o][1][0][1]*3+f[o][0][0][1]+f[o][1][0][0])%mod;\n\t\t\tf[o^1][1][1][0]=(f[o][1][1][0]*3+f[o][1][0][0]+f[o][0][1][0]*2+f[o][0][0][0])%mod;\n\t\t\tf[o^1][1][1][1]=(f[o][1][1][1]*6+f[o][0][1][1]*3+f[o][1][0][1]*3+f[o][1][1][0]*3+f[o][0][0][1]*2+f[o][1][0][0]*2+f[o][0][0][0])%mod;\n\t\t}\n\t}\n\tfor(i=0;i<8;i++)res=(res+f[o][i&1][(i>>1)&1][(i>>2)&1])%mod;\n\tnow=(now+1)%mod,ans=(1llu*4*mod+now*now%mod*now+3*now%mod*now-now-3*res)%mod;\n\tprintf(\"%lld\\n\",(ans+mod)%mod);\n\treturn 0;\n}\n```\n\n\u628a\u7b2c\u4e00\u7ef4\u5f7b\u5e95\u538b\u53bb\u3002\n\n```cpp\n#include<cstdio>\nconst int N=20000020;\nconst unsigned int mod=998244353;\nunsigned long long f[2][2][2],now,res,ans;\nchar s[N];\nint main(){\n\tint i,n=0,o=0;\n\tfread(s,1,N,stdin);\n\tfor(i=0;s[i]>='0'&&s[i]<='1';i++,n++)now=now*2%mod,now+=s[i]-'0';\n\tfor(i=0;i<n;i++,o^=1){\n\t\tif(s[i]=='0') {\n\t\t\tf[1][0][0]=f[1][0][0]*2%mod;\n\t\t\tf[0][0][1]=f[0][0][1]*2%mod;\n\t\t\tf[0][1][1]=f[0][1][1]*3%mod;\n\t\t\tf[1][0][1]=f[1][0][1]*3%mod;\n\t\t\tf[1][1][0]=f[1][1][0]*3%mod;\n\t\t\tf[1][1][1]=f[1][1][1]*6%mod; \n\t\t}\n\t\telse {\n\t\t\tf[1][1][1]=(f[1][1][1]*6+f[0][1][1]*3+f[1][0][1]*3+f[1][1][0]*3+f[0][0][1]*2+f[1][0][0]*2+1)%mod;\n\t\t\tf[0][1][1]=(f[0][1][1]*3+f[0][0][1]+f[0][1][0]*2+1)%mod;\n\t\t\tf[1][0][1]=(f[1][0][1]*3+f[0][0][1]+f[1][0][0])%mod;\n\t\t\tf[1][1][0]=(f[1][1][0]*3+f[1][0][0]+f[0][1][0]*2+1)%mod;\n\t\t\tf[1][0][0]=(f[1][0][0]*2+1)%mod;\n\t\t\tf[0][0][1]=(f[0][0][1]*2+1)%mod;\n\t\t}\n\t}\n\tfor(i=1;i<8;i++)res=(res+f[i&1][(i>>1)&1][(i>>2)&1])%mod;res=res+1;\n\tnow=(now+1)%mod,ans=(1llu*4*mod+now*now%mod*now+3*now%mod*now-now-3*res)%mod;\n\tprintf(\"%lld\\n\",(ans+mod)%mod);\n\treturn 0;\n}",
        "postTime": 1659023267,
        "uid": 135425,
        "name": "Qzong",
        "ccfLevel": 6,
        "title": "CF1710C XOR Triangle \u9898\u89e3"
    },
    {
        "content": "\u524d\u7f6e\u829d\u58eb\uff1a[\u6570\u4f4d dp](https://oi-wiki.org/dp/number/)\n\n\u8003\u8651\u5f02\u6216\u7684\u6027\u8d28\uff0c\u6ce8\u610f\u5230 $a + b = (a \\operatorname{xor} b) + 2(a \\operatorname{and} b)$\u3002\n\n\u5bf9\u4e8e $a \\operatorname{xor} b, a \\operatorname{xor} c, b \\operatorname{xor} c$\uff0c\u6ce8\u610f\u5230 $(a \\operatorname{xor} b) \\operatorname{xor} (a \\operatorname{xor} c) = b \\operatorname{xor} c$\uff08\u53e6\u5916\u4e24\u4e2a\u7b49\u5f0f\u540c\u7406\uff09\uff0c\u5219\u53ea\u8981 $(a \\operatorname{xor} b) \\operatorname{and} (a \\operatorname{xor} c) > 0$ \u6210\u7acb\u65f6 $(a \\operatorname{xor} b) + (a \\operatorname{xor} c) > b \\operatorname{xor} c$ \u6210\u7acb\uff08\u53e6\u5916\u4e24\u4e2a\u4e0d\u7b49\u5f0f\u540c\u7406\uff09\u3002\n\n\u8bbe $dp_{i, j, k, l, x, y, z, p, q, r}$ \u8868\u793a\u73b0\u5728\u8003\u8651\u4ece\u9ad8\u5230\u4f4e\u7b2c $i$ \u4f4d\uff0c$j = 0/1$ \u8868\u793a\u5f53\u524d $a \\operatorname{xor} b$ \u662f\u5426\u6709\u975e $0$ \u9879\uff0c$k, l$ \u8868\u793a\u53e6\u5916\u4e24\u9879\uff0c$x = 0/1$ \u8868\u793a\u5f53\u524d $a$ \u662f\u5426\u53d7 $n$ \u7684\u5f53\u524d\u4f4d\u7684\u9650\u5236\uff0c$y, z$ \u8868\u793a\u53e6\u5916\u4e24\u9879\uff0c$p = 0/1$ \u8868\u793a $(a \\operatorname{xor} b) \\operatorname{and} (a \\operatorname{xor} c) > 0$ \u662f\u5426\u5df2\u7ecf\u6210\u7acb\uff0c$q, r$ \u8868\u793a\u53e6\u5916\u4e24\u9879\u3002\n\n\u521d\u503c\uff1a$dp_{0, 0, 0, 0, 0, 0, 0, 0, 0, 0} = 1$\u3002\n\n\u8f6c\u79fb\uff1a$dp_{i + 1, j \\operatorname{or} (a \\operatorname{xor} b), k \\operatorname{or} (a \\operatorname{xor} c), l \\operatorname{or} (b \\operatorname{xor} c), x \\operatorname{and} [a = n_{i + 1}], y \\operatorname{and} [b = n_{i + 1}], z \\operatorname{and} [c = n_{i + 1}], p \\operatorname{or} ((a \\operatorname{xor} b) \\operatorname{xor} (a \\operatorname{xor} c)), q \\operatorname{or} ((a \\operatorname{xor} b) \\operatorname{xor} (b \\operatorname{xor} c)), r \\operatorname{or} ((a \\operatorname{xor} c) \\operatorname{xor} (b \\operatorname{xor} c))} \\leftarrow dp_{i + 1, j \\operatorname{or} (a \\operatorname{xor} b), k \\operatorname{or} (a \\operatorname{xor} c), l \\operatorname{or} (b \\operatorname{xor} c), x \\operatorname{and} [a = n_{i + 1}], y \\operatorname{and} [b = n_{i + 1}], z \\operatorname{and} [c = n_{i + 1}], p \\operatorname{or} ((a \\operatorname{xor} b) \\operatorname{xor} (a \\operatorname{xor} c)), q \\operatorname{or} ((a \\operatorname{xor} b) \\operatorname{xor} (b \\operatorname{xor} c)), r \\operatorname{or} ((a \\operatorname{xor} c) \\operatorname{xor} (b \\operatorname{xor} c))} + dp_{i, j, k, l, x, y, z, p, q, r}$\uff0c\u5176\u4e2d $a, b, c$ \u7684\u8303\u56f4\u7531 $x, y, z$ \u9650\u5236\uff0c\u8868\u793a\u6211\u4eec\u679a\u4e3e\u7684\u5f53\u524d\u7684 $a, b, c$\u3002\n\n\u7b54\u6848\uff1a$\\displaystyle\\sum_{i = 0}^1 \\sum_{j = 0}^1 \\sum_{k = 0}^1 dp_{\\lfloor \\log_2 n \\rfloor + 1, 1, 1, 1, i, j, k, 1, 1, 1}$\u3002\n\n\u4ee4 $M = 2^{13}$\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(M \\log n)$\uff0c\u5728 CF \u4e0a\u8981\u8dd1 5.5s \u5de6\u53f3\uff0c\u4e0d\u80fd\u901a\u8fc7\u3002\n\n\u8003\u8651\u628a\u7a7a\u72b6\u6001\u62ff\u53bb\u8f6c\u79fb\uff0c\u4f60\u4f1a\u53d1\u73b0\u8fd9\u6837\u526a\u679d\u540e\u8dd1\u5f97\u98de\u5feb\uff0c\u5728 CF \u4e0a\u53ea\u8dd1\u4e86 500ms \u5de6\u53f3\u3002\n\n~~u1s1\uff0c10 \u7ef4 dp \u662f\u4e0d\u662f\u79bb\u8c31\u4e86\u70b9\u3002~~\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <stdio.h>\n#include <string.h>\n\nconst int mod = 998244353;\nint n[200007], dp[2][2][2][2][2][2][2][2][2][2];\nchar n_[200007];\n\nint main(){\n\tint m, lst, ans = 0;\n\tscanf(\"%s\", &n_[1]);\n\tm = strlen(&n_[1]);\n\tlst = m & 1;\n\tfor (int i = 1; i <= m; i++){\n\t\tn[i] = n_[i] - '0';\n\t}\n\tdp[0][0][0][0][1][1][1][0][0][0] = 1;\n\tfor (int i = 0; i < m; i++){\n\t\tint pre = i & 1, cur = pre ^ 1, ii = i + 1;\n\t\tfor (int j = 0; j <= 1; j++){\n\t\t\tfor (int k = 0; k <= 1; k++){\n\t\t\t\tfor (int l = 0; l <= 1; l++){\n\t\t\t\t\tfor (int x = 0; x <= 1; x++){\n\t\t\t\t\t\tfor (int y = 0; y <= 1; y++){\n\t\t\t\t\t\t\tfor (int z = 0; z <= 1; z++){\n\t\t\t\t\t\t\t\tfor (int p = 0; p <= 1; p++){\n\t\t\t\t\t\t\t\t\tfor (int q = 0; q <= 1; q++){\n\t\t\t\t\t\t\t\t\t\tfor (int r = 0; r <= 1; r++){\n\t\t\t\t\t\t\t\t\t\t\tdp[cur][j][k][l][x][y][z][p][q][r] = 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int j = 0; j <= 1; j++){\n\t\t\tfor (int k = 0; k <= 1; k++){\n\t\t\t\tfor (int l = 0; l <= 1; l++){\n\t\t\t\t\tfor (int x = 0; x <= 1; x++){\n\t\t\t\t\t\tint upa = x == 0 ? 1 : n[ii];\n\t\t\t\t\t\tfor (int y = 0; y <= 1; y++){\n\t\t\t\t\t\t\tint upb = y == 0 ? 1 : n[ii];\n\t\t\t\t\t\t\tfor (int z = 0; z <= 1; z++){\n\t\t\t\t\t\t\t\tint upc = z == 0 ? 1 : n[ii];\n\t\t\t\t\t\t\t\tfor (int p = 0; p <= 1; p++){\n\t\t\t\t\t\t\t\t\tfor (int q = 0; q <= 1; q++){\n\t\t\t\t\t\t\t\t\t\tfor (int r = 0; r <= 1; r++){\n\t\t\t\t\t\t\t\t\t\t\tif (dp[pre][j][k][l][x][y][z][p][q][r] != 0){\n\t\t\t\t\t\t\t\t\t\t\t\tfor (int s = 0; s <= upa; s++){\n\t\t\t\t\t\t\t\t\t\t\t\t\tint t = x & (s == n[ii]);\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (int u = 0; u <= upb; u++){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tint v = j | (s ^ u), w = y & (u == n[ii]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (int a = 0; a <= upc; a++){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tint b = k | (s ^ a), c = l | (u ^ a), d = z & (a == n[ii]), e = p | ((s ^ u) & (s ^ a)), f = q | ((s ^ u) & (u ^ a)), g = r | ((s ^ a) & (u ^ a));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdp[cur][v][b][c][t][w][d][e][f][g] = (dp[cur][v][b][c][t][w][d][e][f][g] + dp[pre][j][k][l][x][y][z][p][q][r]) % mod;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i = 0; i <= 1; i++){\n\t\tfor (int j = 0; j <= 1; j++){\n\t\t\tfor (int k = 0; k <= 1; k++){\n\t\t\t\tans = (ans + dp[lst][1][1][1][i][j][k][1][1][1]) % mod;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1662038104,
        "uid": 201007,
        "name": "Leasier",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1710C \u3010XOR Triangle\u3011"
    },
    {
        "content": "$x=a\\operatorname{xor} b,y=b\\operatorname{xor} c,z=a\\operatorname{xor} c$\uff0c\u5219 $x\\operatorname{xor} y\\operatorname{xor} z=0$\uff0e\n\n\u5373\u6709 $x\\operatorname{xor} y=z$\uff0c\u8003\u8651\u5f02\u6216\u662f\u5728\u505a\u4e0d\u8fdb\u4f4d\u52a0\u6cd5\uff0c\u5219\u6709 $x+y>z=x\\operatorname{xor} y\\Leftrightarrow x\\operatorname{and} y\\neq 0$\uff0e\n\n\u6545\u6570\u4f4d dp \u8bb0 $f_{i,0/1,0/1,0/1,0/1,0/1,0/1}$ \u8868\u793a\u4ece\u9ad8\u5230\u4f4e\u586b\u5230\u7b2c $i$ \u4f4d\uff0c$a,b,c$ \u6709\u6ca1\u6709\u9876\u5230\u4e0a\u754c\uff08\u524d $(i-1)$ \u4f4d\u548c $n$ \u4e00\u6837\uff0c\u4ee5\u53ca $x\\operatorname{and} y,y\\operatorname{and}z,x\\operatorname{and}z$ \u662f\u4e0d\u662f\u975e $0$\uff09\uff0e\n\n\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u5f88\u597d\u5199\u3002\n\n```cpp\nint solve(int pos,int s1,int s2,int s3,int t1,int t2,int t3){\n\tif(pos==n+1)\n\t\treturn t1&&t2&&t3;\n\tif(vis[pos][s1][s2][s3][t1][t2][t3])\n\t\treturn f[pos][s1][s2][s3][t1][t2][t3];\n\tint &now=f[pos][s1][s2][s3][t1][t2][t3];\n\tvis[pos][s1][s2][s3][t1][t2][t3]=1;\n\tfor(int a=0;a<=min(v[pos]+s1,1);a++)\n\t\tfor(int b=0;b<=min(v[pos]+s2,1);b++)\n\t\t\tfor(int c=0;c<=min(v[pos]+s3,1);c++){\n\t\t\t\tint p1=s1|(a<v[pos]),p2=s2|(b<v[pos]),p3=s3|(c<v[pos]);\n\t\t\t\tint x=a^b,y=b^c,z=a^c;\n\t\t\t\tint q1=t1|(x&&y),q2=t2|(y&&z),q3=t3|(x&&z);\n\t\t\t\tcadd(now,solve(pos+1,p1,p2,p3,q1,q2,q3));\n\t\t\t}\n\treturn now;\n}\n```",
        "postTime": 1663142487,
        "uid": 223298,
        "name": "do_while_true",
        "ccfLevel": 8,
        "title": "\u300c\u9898\u89e3\u300dCodeforces 1710C XOR Triangle"
    },
    {
        "content": "\u9996\u5148\u8003\u8651\u5230\u4e00\u4e2a\u6027\u8d28\uff1a$a \\oplus b\\leq a+b$ \u5f53\u4e14\u4ec5\u5f53 $a\\operatorname{and}b=0$\u3002\n\n\u56e0\u6b64\u8003\u8651\u4e00\u5bf9 $(a,c)$\uff0c\u6709\u591a\u5c11\u4e2a $b$ \u80fd\u591f\u6ee1\u8db3 $a\\oplus b+b\\oplus c>a\\oplus c$\u3002\n\n\u4e5f\u5c31\u662f\uff1a$(a\\oplus b)\\operatorname{and}(b\\oplus c)\\not=0$\n\n\u56e0\u6b64\u8003\u8651\u8fd9\u4e2a\u6761\u4ef6\u7684\u8bdd\uff0c$abc$ \u4e00\u5b9a\u5b58\u5728\u67d0\u4e00\u4e2a\u6570\u4f4d\u4f9d\u6b21\u4e3a 010 \u548c 101\u3002\uff08\u8fd9\u662f\u56e0\u4e3a\u5982\u679c\u8fd9\u4e00\u4f4d\u5f02\u6216 $b$  \u7684\u8fd9\u4e00\u4f4d\u90fd\u4e3a $1$\uff0c\u90a3\u4e48 $a,c$ \u7684\u8fd9\u4e00\u4f4d\u5e94\u8be5\u76f8\u540c\uff09\n\n\u8fd9\u662f\u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u3002\u5bf9\u4e8e\u53e6\u5916\u4e24\u4e2a\u540c\u7406\uff0c\u53ef\u4ee5\u5f97\u5230\u4e09\u4e2a\u6761\u4ef6\uff0c\u6bcf\u4e2a\u6761\u4ef6\u53ef\u4ee5\u7531\u4e24\u4e2a\u60c5\u51b5\u6ee1\u8db3\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6570\u4f4d+\u72b6\u538bDP\uff0c\u5176\u4e2d\u7528\u4e00\u4e2a\u4e09\u7ef4\u7684\u72b6\u6001\u8868\u793a\u5f53\u524d\u5df2\u7ecf\u6ee1\u8db3\u4e86\u54ea\u4e9b\u6761\u4ef6\uff0c$O(2^3)$ \u679a\u4e3e\u8f6c\u79fb\u3002\n\n[Code](https://www.luogu.com.cn/paste/0pmv56xs)",
        "postTime": 1665398551,
        "uid": 134623,
        "name": "HyperSQ",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011CF1710C XOR Triangle"
    }
]
[
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u7b80\u5355\u7684\u5206\u6cbb\u505a\u6cd5\u3002\n\n\u56fe\u7684\u76f4\u5f84\u592a\u96be\u4e86\uff0c\u8bb0 $dis(i,j)$ \u4e3a $i$ \u548c $j$ \u7684\u8ddd\u79bb\uff0c\u518d\u8bb0 $p(i)=\\max_j\\{dis(i,j)\\}$\uff0c\u90a3\u4e48\u6211\u4eec\u4efb\u610f\u627e\u4e00\u4e2a\u70b9 $x$ \u6c42\u51fa $p(x)$\uff0c\u82e5\u771f\u6b63\u7684\u76f4\u5f84\u4e3a $d$\uff0c\u90a3\u4e48\u6709 $d\\le 2p(x)\\le 2d$\u3002\u65b9\u4fbf\u8d77\u89c1\u6211\u4eec\u53d6 $1$ \u5c31\u884c\u3002\n\n\u4f46\u6211\u4eec\u53d1\u73b0\u9898\u76ee\u8981\u6c42\u751a\u81f3\u66f4\u677e\uff0c\u4e8e\u662f\u6211\u4eec\u518d\u780d\u4e2a $\\frac{1}{2}$\u3002\u9996\u5148\uff0c$p(1)$ \u5728\u4e0d\u65ad\u64cd\u4f5c\u540e\u663e\u7136\u662f\u5355\u8c03\u53d8\u5c0f\u7684\u3002\u53ef\u4ee5\u60f3\u5230\uff0c\u6211\u4eec\u6c42\u51fa $i$ \u6b21\u64cd\u4f5c\u540e\u7684 $p(1)$\uff0c\u8bb0\u5176\u4e3a $p_i$\uff0c\u540c\u7406\u5b9a\u4e49 $p_j$\uff0c\u90a3\u4e48\u5982\u679c $p_i\\le 2p_j$\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u7528 $p_i$ \u66ff\u4ee3 $p_j$\u3002\n\n\u6839\u636e\u4e0a\u8ff0\u601d\u8def\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5206\u6cbb\u3002\u9996\u5148\u8bb0 $l=0,r=q$\uff0c\u7136\u540e\u6c42\u51fa $p_l$ \u548c $p_r$\uff0c\u5728\u8bb0 $mid=\\lfloor\\frac{l+r}{2}\\rfloor$\uff0c\u6c42\u51fa $p_{mid}$\u3002\u67e5\u770b\u5de6\u53f3\u533a\u95f4\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u533a\u95f4\u5168\u90e8\u53ef\u4ee5\u7528 $p_l$ \u6216\u8005 $p_{mid}$ \u66ff\u4ee3\u4e86\uff0c\u5c31\u4e0d\u5206\u6cbb\u5b83\uff0c\u5426\u5219\u5206\u6cbb\u4e0b\u53bb\u3002\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\u6492\u82b1\u6492\u82b1\u3002",
        "postTime": 1683795733,
        "uid": 149196,
        "name": "\u516b\u4e91\u84dd",
        "ccfLevel": 8,
        "title": "\u975e\u5e38\u574f\u76f4\u5f84"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u5e2e\u6211\u7ea0\u6b63\u4e86\u4e00\u4e2a\u8bef\u533a\uff1a\u56fe\u7684\u76f4\u5f84\u4e0d\u80fd\u901a\u8fc7\u4e24\u6b21 BFS \u6c42\u51fa\u3002\n\n\u8fd9\u4e48\u770b\uff0c\u56fe\u7684\u76f4\u5f84\u7684\u552f\u4e00\u6b63\u786e\u6c42\u6cd5\u5c31\u662f $O(nm)$ \u66b4\u529b\u4e86\uff1f\u4e0d\u8fc7\u4e24\u6b21 BFS \u4e5f\u6709\u5b83\u7684\u7528\u6b66\u4e4b\u5730\uff08\u7136\u800c\u4e3b\u8981\u5728\u8fd9\u9053\u9898\uff09\u3002\n\n\u4e00\u5f00\u59cb\uff0c\u6211\u7684\u7b2c\u4e00\u53cd\u5e94\u5c31\u662f\u8fd9\u4e0d\u662f\u4e8c\u5206\u4e00\u4e0b + \u4e24\u6b21 BFS \u6c42\u56fe\u7684\u76f4\u5f84\u5c31 $O(n\\log n\\log q)$ \u505a\u5b8c\u4e86\u5417\uff1f\u540e\u6765\u53d1\u73b0\u56fe\u7684\u76f4\u5f84\u4e0d\u80fd $O(m)$ \u6c42\u4e4b\u540e\u7a0d\u5fae\u731c\u4e86\u4e00\u4e0b\u6539\u4e86\u4e00\u4e01\u70b9\u5c45\u7136\u5c31\u8fc7\u4e86\uff01\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u7b54\u6848\u662f\u5355\u8c03\u4e0d\u964d\u7684\uff0c\u800c\u7531\u4e8e\u9898\u76ee\u53ea\u8981\u6c42\u6bdb\u4f30\u4f30\uff0c\u6240\u4ee5\u6211\u4eec\u81ea\u7136\u8003\u8651\u5f53\u524d\u7684\u8fd9\u4e2a $a_i$ \u80fd\u591f\u5c3d\u91cf\u7528\u591a\u4e45\u3002\u90a3\u4e48 $a_i=\\lceil\\frac{d_1}{2}\\rceil,a_j=2\\cdot d_2,a_i=a_j$\uff0c\u89e3\u5f97 $d_2\\approx \\frac {d_1}{4}$\uff0c\u4e00\u5171\u6709 $\\log_4 n$ \u6bb5\u3002\n\n\u540e\u6765\u53d1\u73b0\u4e24\u6b21 BFS \u8fc7\u4e0d\u4e86\u6837\u4f8b\uff0c\u4f46\u662f\u8ddf\u7b54\u6848\u201c\u516b\u4e5d\u4e0d\u79bb\u5341\u201d\uff0c\u4e8e\u662f\u8003\u8651\u53cd\u6b63 $\\log_4 n$ \u7ef0\u7ef0\u6709\u4f59\uff0c\u4e0d\u5982\u5c31\u628a $a_i:=d_1$ \u7b97\u4e86\uff0c\u4e0d\u7528\u9664\u4ee5\u4e8c\u3002\u7136\u540e\u5b83\u5c31\u8fc7\u4e86\u3002\u590d\u6742\u5ea6\u662f $O(n\\log_2\\log_2q)$\uff0c\u5176\u4e2d $\\log_2 q$ \u4e3a\u4e8c\u5206\u7684\u590d\u6742\u5ea6\u3002\n\n**\u90a3\u8fd9\u4e2a\u5230\u5e95\u4e3a\u4ec0\u4e48\u5bf9\u5462\uff1f\u4e8b\u5b9e\u4e0a\uff0c\u4efb\u610f\u4e00\u4e2a\u70b9\u51fa\u53d1\u7684 BFS \u6811\u9ad8\u79f0\u4f5c\u56fe\u7684\u534a\u5f84\uff0c\u800c\u534a\u5f84\u548c\u76f4\u5f84\u4e4b\u95f4\u5b58\u5728\u4e09\u89d2\u4e0d\u7b49\u5f0f $d\\le 2r$\u3002**\n\n\u54e6\u5bf9\u53e6\u5916\uff0c\u53ea\u7528\u4e00\u6b21 BFS \u5c31\u884c\u4e86\uff0c\u6211\u61d2\u5f97\u6539\u4e86\u3002\u8fd9\u9053\u9898\u8fd8\u662f `*2700` \u9898\u91cc\u76f8\u5f53\u6c34\u7684\u554a\uff01\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tregister char ch=getchar();register int x=0;\n\twhile(ch<'0'||ch>'9')ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn x;\n}\nconst int N=1e5+5;\nint n,m,q,ans[N];\npair<int,int>e[N];\nqueue<pair<int,int> >Q;\nvector<int>G[N];bool FL;\nbool vis[N];\ninline pair<int,int> bfs(int st){\n\tfor(int i=1;i<=n;i++)vis[i]=0;\n\tint ed=st,eds=0;\n\tQ.push(make_pair(st,0)),vis[st]=1;\n\twhile(!Q.empty()){\n\t\tint x=Q.front().first,s=Q.front().second;Q.pop();\n\t\ted=x,eds=s;//if(FL)cerr<<x<<' '<<s<<'\\n';\n\t\tfor(int y:G[x])if(!vis[y])vis[y]=1,Q.push(make_pair(y,s+1));\n\t}\n\treturn make_pair(ed,eds);\n}\ninline int gD(){\n\treturn bfs(bfs(1).first).second;\n}\ninline int calc(int tim){//if(tim==5)FL=1;\n\tfor(int i=1;i<=tim;i++)G[e[i].first].emplace_back(e[i].second),G[e[i].second].emplace_back(e[i].first);\n\tint ret=gD();\n\tfor(int i=tim;i>=1;i--)G[e[i].second].pop_back(),G[e[i].first].pop_back();//if(tim==5)FL=0;\n\treturn ret;\n}\nint main(){\n\tn=read(),m=read(),q=read();\n\tfor(int i=1,u,v;i<=m;i++)u=read(),v=read(),G[u].emplace_back(v),G[v].emplace_back(u);\n\tfor(int i=1;i<=q;i++)e[i].first=read(),e[i].second=read();\n\tans[0]=gD();\n\tfor(int now=0,nxt;now<=q;now=nxt){\n\t\tint L=now,R=q+1,mid;\n\t\twhile(L<R-1){\n\t\t\tmid=L+R>>1;\n\t\t\tif(2*calc(mid)>=ans[now])L=mid;\n\t\t\telse R=mid;\n\t\t}\n\t\tnxt=R;\n\t\tif(nxt<=q)ans[nxt]=calc(nxt);\n\t\tfor(int i=now+1;i<nxt;i++)ans[i]=ans[now];\n\t}\n\tfor(int i=0;i<=q;i++)cout<<ans[i]<<' ';\n}\n```",
        "postTime": 1679922572,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "CF1804F Approximate Diameter"
    },
    {
        "content": "### Preface\r\n\u5341\u5206\u6709\u8da3\u7684\u4e00\u9053\u601d\u7ef4\u9898\u3002  \r\n### Problem  \r\n\u7ed9\u4f60\u4e00\u4e2a $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u73b0\u5728\u6709 $q$ \u6b21\u52a0\u8fb9\u64cd\u4f5c\uff0c\u4f60\u9700\u8981\u5728\u4e00\u5f00\u59cb\u4ee5\u53ca\u6bcf\u4e00\u6b21\u52a0\u8fb9\u540e\u8f93\u51fa\u8fd9\u4e2a\u65e0\u5411\u56fe\u7684\u76f4\u5f84\u7684\u6a21\u7cca\u503c $a_i$\uff0c\u4f7f\u5f97\uff1a  \r\n$$\\lceil \\frac{d(G_i)}{2} \\rceil \\leq a_i\\leq 2\\times d(G_i)$$  \r\n\u5176\u4e2d $d$ \u8868\u793a\u56fe\u7684\u76f4\u5f84\uff0c$G_i$ \u4ee3\u8868\u7b2c $i$ \u6b21\u52a0\u8fb9\u7ed3\u675f\u4e4b\u540e\u7684\u65e0\u5411\u56fe\u3002  \r\n\u6570\u636e\u8303\u56f4\uff1a$n,m,q\\leq 10^5$\u3002\r\n### Solution  \r\n\u89c2\u5bdf\u8fd9\u9053\u9898\uff0c\u53d1\u73b0\u8fd9\u4e2a\u8f93\u51fa\u6a21\u7cca\u503c\u7684\u8bbe\u5b9a\u5341\u5206\u6709\u8da3\u3002  \r\n\u4f60\u53d1\u73b0\uff0c\u5982\u679c\u60f3\u6c42\u51fa\u4e00\u4e2a\u65e0\u5411\u56fe\u7684\u5177\u4f53\u76f4\u5f84\u662f $O(n^2)$ \u7684\uff0c\u4f60\u9700\u8981\u5bf9\u6bcf\u4e00\u4e2a\u70b9\u5f00\u59cb\u505a\u4e00\u6b21 BFS \u624d\u80fd\u6c42\u89e3\u3002  \r\n\r\n\u4f46\u662f\u4f60\u6ce8\u610f\u5230\uff0c\u4f60\u8bbe $\\alpha(G,s)$ \u4e3a\u5bf9\u4e8e\u65e0\u5411\u56fe $G$\uff0c\u4ece $s$ \u5f00\u59cb BFS\uff0c\u79bb\u4ed6\u6700\u8fdc\u7684\u70b9\u79bb\u4ed6\u7684\u8ddd\u79bb\uff0c\u4f60\u4f1a\u53d1\u73b0\u65e0\u8bba $s$ \u53d6\u4ec0\u4e48\u503c\uff0c $\\alpha(G,s)$ \u90fd\u59cb\u7ec8\u6ee1\u8db3\uff1a  \r\n$$\\lceil \\frac{d(G_i)}{2} \\rceil \\leq \\alpha(G_i,s)\\leq d(G_i)$$  \r\n\u8fd9\u548c\u6a21\u7cca\u503c\u7684\u5b9a\u4e49\u5f0f\u975e\u5e38\u76f8\u4f3c\u3002  \r\n\u5173\u4e8e\u8bc1\u660e\uff0c\u5bf9\u4e8e\u76f4\u5f84\u4e0a\u7684 $s$\uff0c\u8fd9\u4e2a\u7ed3\u8bba\u663e\u7136\uff0c\u800c\u5bf9\u4e8e\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\uff0c\u4f60\u53ef\u4ee5\u5148\u8d70\u5230\u76f4\u5f84\u4e0a\uff0c\u7136\u540e\u4e5f\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7ed3\u8bba\u3002  \r\n\r\n\u7ee7\u7eed\u63a2\u7a76\uff0c\u4f60\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u52a0\u8fb9\uff0c\u5bf9\u4e8e\u4efb\u610f $\\alpha(G,s)$ \u80af\u5b9a\u662f\u53d8\u5c0f\u7684\u3002  \r\n\u4f60\u53ea\u9700\u8981\u628a BFS \u641c\u7d22\u6811\u5efa\u51fa\u6765\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5b9e\u9645\u4e0a\u7b49\u4e8e\u79fb\u690d\u4e00\u68f5\u5b50\u6811\uff0c\u8fd9\u6700\u591a\u4f1a\u5bfc\u81f4 $\\alpha(G,s)$ \u6298\u534a\u3002  \r\n\r\n\u4f60\u628a\u6240\u6709\u7684\u64cd\u4f5c\u79bb\u7ebf\u4e0b\u6765\uff0c\u7531\u4e8e\u6a21\u7cca\u503c\u7684\u5b9a\u4e49\u5f0f\u5141\u8bb8\u4f60\u5c0f\u4e8e\u7b49\u4e8e\u76f4\u5f84\u7684\u4e8c\u500d\uff0c\u90a3\u4e48\u4f60\u81ea\u7136\u800c\u7136\u5730\u60f3\u5230\uff0c\u4f60\u4e00\u6b21\u7b97\u51fa\u7684 $\\alpha$ \u53ef\u4ee5\u88ab\u4f7f\u7528\u591a\u6b21\uff0c\u76f4\u5230\u76f4\u5f84\u53d8\u4e3a\u5176\u4e00\u534a\u3002  \r\n\u76f4\u5f84\u592a\u4e0d\u597d\u5904\u7406\u4e86\uff0c\u6211\u4eec\u5e72\u8106\u628a\u4ed6\u4e5f\u53d8\u6210 $\\alpha$\uff0c\u73b0\u5728\u95ee\u9898\u5c31\u662f\u4f60\u53ef\u4ee5\u7528\u4e00\u4e2a $\\alpha$ \u503c\u76f4\u5230\u4e00\u4e2a\u65f6\u95f4\u70b9\uff0c\u4f7f\u8fd9\u4e2a\u65f6\u95f4\u70b9\u7684 $\\alpha$ \u4e3a\u5b83\u7684\u4e00\u534a\u3002  \r\n\u8fd9\u4e2a\u592a\u597d\u505a\u4e86\uff0c\u6211\u4eec\u76f4\u63a5\u53ef\u4ee5\u4e8c\u5206\u8df3\u5230\u54ea\u4e2a\u8282\u70b9\u3002  \r\n\r\n\u7136\u540e\u4f60\u53d1\u73b0\uff0c\u7531\u4e8e\u6bcf\u4e00\u6b21\u8df3\u8dc3\u4f1a\u4f7f\u7b54\u6848\u9664\u4e8c\uff0c\u4f60\u6700\u591a\u4f1a\u8df3\u8dc3 $\\log n$ \u6b21\uff0c\u4e8c\u5206\u540e\u7ee7\u7684\u590d\u6742\u5ea6\u662f $O(\\log n)$ \u7684\uff0c\u4f60\u505a\u4e00\u6b21 BFS \u8ba1\u7b97 $\\alpha$ \u7684\u590d\u6742\u5ea6\u662f $O(n)$ \u7684\uff0c\u603b\u590d\u6742\u5ea6\u5c31\u662f $O(n \\log ^2 n)$\uff1a  \r\n\r\n```cpp\r\n#include <bits/stdc++.h>\r\n#define pb push_back\r\nusing namespace std;\r\nconst int N=2e5+10;\r\nint n,m,q,u[N],v[N],dep[N];\r\nvector <int> edge[N];\r\nqueue <int> Q;\r\nint BFS(){int res=0;\r\n\tfor(int i=1;i<=n;i++)\r\n\t\tdep[i]=1e9;\r\n\tQ.push(1);dep[1]=0;\r\n\twhile(Q.size()){\r\n\t\tint u=Q.front();\r\n\t\tfor(auto v:edge[u]){\r\n\t\t\tif(dep[v]>dep[u]+1)\r\n\t\t\t\tdep[v]=dep[u]+1,Q.push(v);\r\n\t\t}\r\n\t\tif(Q.size()==1)\r\n\t\t\tres=dep[u];\r\n\t\tQ.pop();\r\n\t}return res;\r\n}\r\nint check(int x){\r\n\tfor(int i=1;i<=x;i++)\r\n\t\tedge[u[i]].pb(v[i]),edge[v[i]].pb(u[i]);\r\n\tint tmp=BFS();//cout<<\"debug: \"<<x<<\" \"<<tmp<<endl;\r\n\tfor(int i=x;i>=1;i--)\r\n\t\tedge[u[i]].pop_back(),edge[v[i]].pop_back();\r\n\treturn tmp;\r\n}\r\nint main(){\r\n\tios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\r\n\tcin>>n>>m>>q;\r\n\tfor(int i=1;i<=m;i++){\r\n\t\tcin>>u[0]>>v[0];\r\n\t\tedge[u[0]].pb(v[0]),edge[v[0]].pb(u[0]);\r\n\t}for(int i=1;i<=q;i++)cin>>u[i]>>v[i];\r\n\tfor(int i=0;i<=q;i++){\r\n\t\tint now=check(i);\r\n\t\tint l=i,r=q;\r\n\t\twhile(l<r){\r\n\t\t\tint mid=(l+r+1)/2;\r\n\t\t\tif(check(mid)*2<now)\r\n\t\t\t\tr=mid-1;\r\n\t\t\telse l=mid;\r\n\t\t}\r\n\t\tfor(int j=i;j<=l;j++)cout<<now<<\" \";\r\n\t\ti=l;\r\n\t}\r\n\treturn 0;\r\n}\r\n```\r\n",
        "postTime": 1679039441,
        "uid": 213173,
        "name": "\u5c0f\u6728\u866b",
        "ccfLevel": 4,
        "title": "\u3010CF\u601d\u7ef4\u8bad\u7ec3\u3011CF1804F Approximate Diameter"
    }
]
[
    {
        "content": "# Candy Store\n\n## Description\n\n\u6709 $n$ \u79cd\u7cd6\uff0c\u7b2c $i$ \u79cd\u7cd6\u6709 $a_i$ \u5757\uff0c\u6bcf\u5757 $b_i$ \u5143\u3002\u5bf9\u6bcf\u79cd\u7cd6\uff0c\u4f60\u8981\u9009\u62e9\u4e00\u4e2a $d_i | a_i$\uff0c\u7136\u540e\u6bcf $d_i$ \u5757\u7cd6\u88c5\u8fdb\u4e00\u4e2a\u888b\u5b50\u3002\n\n\u73b0\u5728\u628a\u7cd6\u6446\u4e0a\u8d27\u67b6\uff0c\u7b2c $i$ \u7c7b\u7cd6\u7684\u4ef7\u7b7e\u4e0a\u7684\u4ef7\u683c $c_i$ \u662f\u4e00\u888b\u5b50 $i$ \u7c7b\u7cd6\u7684\u4ef7\u503c\uff0c\u5373 $c_i = d_i \\times b_i$\u3002\n\n\u5bf9\u4e8e\u8d27\u67b6\u4e0a\u4e00\u4e2a\u533a\u95f4 $[l, r]$\uff0c\u5982\u679c\u4ed6\u4eec\u7684\u4ef7\u7b7e\u76f8\u540c\uff0c\u5373 $c_l = c_{l + 1} = \\dots = c_r$\uff0c\u5219\u4ed6\u4eec\u53ef\u4ee5\u5171\u7528\u4e00\u4e2a\u4ef7\u7b7e\u3002\n\n\u8bf7\u95ee\u6700\u5c11\u9700\u8981\u591a\u5c11\u4ef7\u7b7e\uff1f\n\n\u591a\u7ec4\u6570\u636e\uff0c\u4fdd\u8bc1 $n$ \u4e4b\u548c\u4e0d\u8d85\u8fc7 $2 \\times 10^5$\uff0c$1 \\leq a_i \\leq 10^9$\uff0c$1 \\leq b_i \\leq 10^4$\u3002\n\n## Analysis\n\n\u5bf9\u6211\u6765\u8bf4\u662f\u4e2a\u6709\u70b9\u65b0\u7684\u9898\uff0c\u4ee5\u524d\u6ca1\u505a\u8fc7\u8fd9\u6837\u7684\uff0cvp \u65f6\u8003\u8651\u4e86\u5f88\u4e45\u5927\u529b dp\u3002\n\n\u8003\u8651\u4e00\u6bb5\u80fd\u5171\u7528\u540c\u4e00\u4e2a\u4ef7\u7b7e $c$ \u7684\u533a\u95f4 $[l, r]$\uff0c\u6709 $c = b_l d_l = b_{l + 1}d_{l + 1} = \\dots b_r d_r$\u3002\u4e8e\u662f\u663e\u7136 $\\mathrm{lcm}_{i=l}^r b_i | c$\u3002\n\n\u518d\u8003\u8651\u6784\u9020\u51fa\u7684 $d_i | a_i$\uff0c\u800c $d_i = \\frac{c}{b_i}$\u3002\u4e8e\u662f $\\frac{c}{b_i} | a_i$\uff0c\u5373 $c | a_i b_i$\u3002\u4e8e\u662f $c | \\gcd_{i = l}^r a_ib_i$\u3002\n\n\u4e8e\u662f\u4e00\u4e2a\u533a\u95f4\u80fd\u5171\u7528\u4e00\u4e2a\u4ef7\u7b7e\u7684\u6761\u4ef6\u5c31\u662f $\\mathrm{lcm}(b_l, b_{l + 1}, \\dots b_r) | \\gcd(a_lb_l, a_{l+1}b_{l+1}, \\dots a_rb_r)$\u3002\n\n\u4e0b\u4e00\u4e2a\u95ee\u9898\u662f\u600e\u4e48\u5b89\u6392\u4ef7\u7b7e\u3002\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8d2a\u5fc3\uff1a\u53ea\u9700\u8981\u4ece\u6700\u5de6\u7aef\u5f00\u59cb\uff0c\u6bcf\u6b21\u5c3d\u53ef\u80fd\u5730\u628a\u591a\u7684\u7cd6\u679c\u5171\u7528\u4e00\u4e2a\u4ef7\u7b7e\u5373\u53ef\u3002\u8bc1\u660e\u4e0a\u53ef\u4ee5\u8003\u8651\u5982\u679c\u4e3a\u4e86\u540e\u9762\u67d0\u6bb5\u533a\u95f4\u8c03\u6574\u4e86\u524d\u9762\u7684\u4ef7\u683c\uff0c\u4f1a\u591a\u51fa\u4e00\u4e2a\u533a\u95f4\u7aef\u70b9\uff0c\u7136\u540e\u51cf\u5c11\u4e00\u4e2a\u533a\u95f4\u7aef\u70b9\uff0c\u7b54\u6848\u4e0d\u4f1a\u53d8\u4f18\u3002\n\n## Code\n\ncpp17 \u91cc\u7684 `numeric` \u5e93\u63d0\u4f9b\u4e86 `std::gcd` \u548c `std::lcm` \u4e24\u4e2a\u5e93\u51fd\u6570\uff0c\u4ece\u6b64\u65e0\u9700\u518d\u4f7f\u7528 `std::__gcd` \u4e86\u3002\u4f46\u9057\u61be\u7684\u662f NOI \u7cfb\u5217\u8d5b\u4e8b\u53ea\u6709 cpp14 \u53ef\u7528\u3002\n\n```cpp\n#include <vector>\n#include <numeric>\n#include <iostream>\n#include <algorithm>\n\nint T;\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  for (std::cin >> T; T; --T) {\n    int n;\n    std::cin >> n;\n    std::vector<int> a(n + 1), b(n + 1);\n    for (int i = 1; i <= n; ++i) std::cin >> a[i] >> b[i];\n    int ans = 0;\n    for (int i = 1; i <= n; ++i) {\n      ++ans;\n      long long x = b[i], y = 1ll * a[i] * b[i];\n      for (int j = i + 1; j <= n; ++j) {\n        x = std::lcm(1ll * b[j], x);\n        y = std::gcd(y, 1ll * a[j] * b[j]);\n        if (y % x != 0) {\n          i = j - 1; break;\n        }\n        if (j == n) {\n          i = j; break;\n        }\n      }\n    }\n    std::cout << ans << '\\n';\n  }\n}\n```",
        "postTime": 1680188526,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "\u3010CF1798C\u3011Candy Store"
    },
    {
        "content": "\u8003\u8651\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\uff0c$l\\sim r$ \u7684\u7cd6\u679c\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u6807\u7b7e\u3002\n\n\u8bbe\u8fd9\u4e2a\u6807\u7b7e\u503c\u4e3a $c$\uff0c\u56e0\u4e3a\u8981\u6ee1\u8db3\u6bcf\u4e00\u4e2a $c=b_i\\times d_i$\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $b_i$ \u90fd\u8981\u6ee1\u8db3 $c\\mod b_i=0$\u3002\u4e8e\u662f\uff0c$c$ \u5e94\u8be5\u662f $\\text{lcm}(b_l,\\cdots ,b_r)$ \u7684\u500d\u6570\u3002\n\n\u540c\u65f6\uff0c\u53c8\u8981\u6ee1\u8db3\u6bcf\u4e00\u4e2a $a_i\\mod d_i=0$\uff0c\u800c $d_i=\\frac{c}{b_i}$\uff0c\u6240\u4ee5 $a_i\\mod \\frac{c}{b_i}=0$\uff0c\u63a8\u51fa $a_i\\times b_i\\mod c=0$\u3002\u4e8e\u662f\uff0c$c$ \u5e94\u8be5\u662f $\\gcd(a_l\\times b_l,\\cdots,a_r\\times b_r)$ \u7684\u56e0\u6570\u3002\n\n\u4e8e\u662f\uff0c\u60f3\u8981\u6784\u9020\u4e00\u4e2a\u5408\u6cd5\u7684 $c$\uff0c\u5f53\u4e14\u4ec5\u5f53 $\\gcd(a_l\\times b_l,\\cdots,a_r\\times b_r)\\mod \\text{lcm}(b_l,\\cdots ,b_r)=0$\u3002\n\n\u7b54\u6848\u7684\u8ba1\u7b97\u4e5f\u4fbf\u663e\u800c\u6613\u89c1\u4e86\u3002\n\n[Code](https://codeforces.com/contest/1798/submission/199426735)",
        "postTime": 1680100011,
        "uid": 537687,
        "name": "__include__",
        "ccfLevel": 4,
        "title": "CF1798C \u9898\u89e3"
    },
    {
        "content": "\u5047\u8bbe\u6211\u4eec\u80fd\u8ba9 $[l,r]$ \u4e3a\u4e00\u4e2a\u4ef7\u7b7e\uff08\u4ee5\u4e0b\u7ea6\u5b9a $l\\le i\\le r$\uff09\uff0c\u8003\u8651 $c_i$ \u6b64\u65f6\u6ee1\u8db3\u4ec0\u4e48\u6761\u4ef6\uff1f\n\n+ \u7531\u9898\u610f\uff0c$c_i=b_i\\times d_i$\u3002\n\n+ \u5148\u770b $b_i$\uff0c\u663e\u7136\uff0c$b_{i}\\mid c_i$\uff0c\u5219 $\\text{lcm} \\{b_i\\}\\mid c_i$\u3002\n\n+ \u518d\u8003\u8651 $d_i$\uff0c\u7531\u4e8e $d_{i}\\mid a_i$\uff0c\u90a3\u4e48 $(b_i\\times d_i)\\mid (a_{i}\\times b_i)$\uff0c\u5373 $c_{i}\\mid (a_i\\times b_i)$\u3002\u8fdb\u4e00\u6b65\u63a8\u5f97\uff0c$c_{i}\\mid \\gcd\\{a_i\\times b_i\\}$\u3002\n\n\u7efc\u4e0a\uff0c\u6709 $\\text{lcm}\\{b_i\\}\\mid \\gcd\\{a_{i}\\times b_i\\}$\uff0c\u5c31\u80fd\u6709\u5408\u6cd5\u7684 $c_i$ \u5b58\u5728\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u8d2a\u5fc3\uff1a\u4ece\u5de6\u7aef\u70b9\u5f00\u59cb\uff0c\u53d6\u5c3d\u53ef\u80fd\u591a\u7684\u7cd6\u679c\u6c42\u5f97\u53f3\u7aef\u70b9\uff0c\u4e0b\u4e00\u6b21\u7684\u5de6\u7aef\u70b9\u662f\u8fd9\u6b21\u7684\u53f3\u7aef\u70b9\u52a0\u4e00\u3002\n\n\u4e3a\u4ec0\u4e48\u662f\u6b63\u786e\u7684\u5462\uff1f\n\n\u5982\u679c\u6211\u524d\u4e00\u6bb5\u4e0d\u53d6\u5c3d\u53ef\u80fd\u591a\uff0c\u90a3\u4e48\u7559\u7ed9\u4e0b\u4e00\u6bb5\u7684\u7cd6\u679c\u4f1a\u53d8\u591a\uff0c\u4e5f\u5c31\u662f\u6761\u4ef6\u66f4\u52a0\u201c\u4e25\u683c\u201d\u4e86\uff0c\u663e\u7136\u4e0d\u4f1a\u66f4\u4f18\u3002\n```cpp\n/*\ni in [l,r]\nc[i]=b[i]*d[i]\nb[i] | c[i]\nlcm(b[i]) | c[i]\nd[i] | a[i]\nc[i] | gcd(a[i]*b[i])\ntherefore lcm(b[i]) | gcd(a[i]*b[i])\n*/\n#include <stdio.h>\nusing ll=long long;\ninline ll gcd(ll x,ll y){return !y?x:gcd(y,x%y);}\ninline ll lcm(ll x,ll y){return x/gcd(x,y)*y;}\nint t,n,i,j,cnt;\nll a[200005],b[200005];\nll fx,fy;\nint main()\n{\n\tscanf(\"%d\",&t);\n\twhile(t--)\n\t{\n\t\tcnt=0;\n\t\tscanf(\"%d\",&n);\n\t\tfor(i=1;i<=n;++i)\n\t\t\tscanf(\"%d %d\",a+i,b+i);\n\t\tfor(i=1;i<=n;)\n\t\t{\n\t\t\tfx=b[i];\n\t\t\tfy=a[i]*b[i];\n\t\t\tfor(j=i+1;j<=n;++j)\n\t\t\t{\n\t\t\t\tfx=lcm(fx,b[j]);\n\t\t\t\tfy=gcd(fy,a[j]*b[j]);\n\t\t\t\tif(fy%fx!=0)\n\t\t\t\t{\n\t\t\t\t\ti=j;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t++cnt;\n\t\t\tif(j>n)\n\t\t\t\tbreak;\n\t\t}\n\t\tprintf(\"%d\\n\",cnt);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1682604305,
        "uid": 575994,
        "name": "Etinorally",
        "ccfLevel": 5,
        "title": "CF1798C"
    },
    {
        "content": "\u8d5b\u65f6\u6ca1\u60f3\u5230 $\\text{lcm}(b_i,...,b_j)\\mid \\gcd(a_i,..,a_j)$\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u8822\u4e00\u70b9\u7684\u505a\u6cd5\u3002\n\n\u9898\u610f\u7b80\u5316\uff1a\u6c42\u6700\u5c0f\u7684\u8fde\u7eed\u76f8\u540c\u7684\u5355\u4f4d\u888b\u4ef7\u683c\u7684\u6bb5\u6570\u3002\n\n\u6839\u636e\u9898\u610f\uff1a$c_i=d_i\u00d7b_i,d_i=\\dfrac{a_i}{x},x\\mid a_i,\\ \\therefore c_i=\\dfrac{a_i\u00d7b_i}x,x\\mid a_i$\u3002\n\n\u82e5\u6709 $c_i=c_{i+1}=...=c_j$\uff0c\u5219 $b_i\u00d7\\dfrac{a_i}{x_i}=b_{i+1}\u00d7\\dfrac{a_{i+1}}{x_{i+1}}=...=b_{j}\u00d7\\dfrac{a_j}{x_j}$\u3002\n\n$\\therefore\\ \\text{lcm}(b_i,...,b_j)\\mid c_i$\u3002\n\n\u7136\u540e\u53ea\u8981\u5224\u65ad $x_i,...,x_j$ \u662f\u5426\u90fd\u6709\u89e3\u5c31\u884c\u4e86\u3002\n\n\u7ec6\u5fc3\u7684\u4eba\u5c31\u4f1a\u53d1\u73b0\uff0c\u8fd9\u76f8\u5f53\u4e8e\u5224\u65ad $\\text{lcm}(b_i,..,b_j)\\mid \\gcd(a_i,...,a_j)$\u3002\n\n\u90a3\u5982\u679c\u4e0d\u7ec6\u5fc3\u600e\u4e48\u529e\uff1f\u6ca1\u4e8b\uff0c\u8fd8\u6709\u529e\u6cd5\u3002\n\n$\\because\\ $\u6700\u5c0f\u7684\u8d28\u6570\u662f $2$\uff0c$\\therefore\\ $ \u6700\u5c0f\u516c\u500d\u6570\u5982\u679c\u589e\u5927\uff0c\u5219\u81f3\u5c11\u4f1a\u589e\u5927 $1$ \u500d\u3002\u6240\u4ee5\u5bf9\u4e8e\u4e00\u4e2a $b_i$\uff0c\u5b83\u5f80\u540e\u6700\u591a\u4f1a\u6709 $O(\\log b_i)$ \u89c4\u6a21\u7684\u6700\u5c0f\u516c\u500d\u6570\u3002\u6240\u4ee5\u5bf9\u4e8e\u8fd9\u4e9b\u4e0d\u540c\u7684\u6700\u5c0f\u516c\u500d\u6570\u76f4\u63a5\u66b4\u529b\u5224\u65ad\u5373\u53ef\u3002\u4e0d\u53d8\u65f6\u53ea\u8981\u5224\u65ad $\\text{lcm}(b_i,...,b_j)\\mid a_j$ \u5373\u53ef\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u4e2a $(a_i,b_i)$\uff0c\u5982\u679c\u80fd\u653e\u5230\u524d\u9762\uff0c\u5c31\u5e94\u8be5\u628a\u5b83\u653e\u5230\u524d\u9762\uff0c\u56e0\u4e3a\u628a\u5b83\u52a0\u5230\u540e\u9762\uff0c\u4f1a\u4f7f $\\text{lcm}(b_i,...,b_j)$ \u53d8\u5927\uff0c$\\gcd(a_i,...,a_j)$ \u53d8\u5927\uff0c\u6b64\u65f6\u540e\u9762\u7684\u671f\u671b\u957f\u5ea6\u4f1a\u53d8\u5c0f\uff08\u5373\u7b54\u6848\u4e00\u5b9a\u4e0d\u4f1a\u66f4\u4f18\uff09\u3002\n\n\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u53cc\u6307\u9488\u7ef4\u62a4\u5355\u4f4d\u888b\u4ef7\u683c\u76f8\u540c\u7684\u6bb5\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log a_i)$\u3002\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define mp make_pair\n#define fi first\n#define se second\n#define pr printf\n#define ps puts\n#define pb push_back\n#define For(i,a,b) for(i=a;i<=b;i++)\n#define FOR(i,a,b) for(i=a;i>=b;i--)\nusing namespace std;\nconst int N=2e5+10;\ntypedef pair<int,int> PII;\nint n,m,a[N],b[N];\nint lcm(int x,int y){\n\treturn x/__gcd(x,y)*y;\n}\nvoid solve(){\n\tint i,j,k,x,ans=0;\n\tFor(i,1,n){\n\t\tx=b[i];\n\t\tFor(j,i+1,n){\n\t\t\tif(lcm(x,b[j])==x){\n\t\t\t\tif(a[j]%(x/b[j])==0) continue;\n\t\t\t\telse break;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tint temp=lcm(x,b[j]);\n\t\t\t\tFor(k,i,j) if(a[k]%(temp/b[k])) break;\n\t\t\t\tif(k<=j) break;\n\t\t\t\tx=temp;\n\t\t\t}\n\t\t}\n\t\tans++;\n\t\ti=j-1;\n\t}\n\tcout<<ans<<'\\n';\n}\nsigned main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0),cout.tie(0);\n\tint i,j;\n\tint t;\n\tcin>>t;\n\twhile(t--){\n\t\tcin>>n;\n\t\tFor(i,1,n) cin>>a[i]>>b[i];\n\t\tsolve();\n\t}\n\treturn 0;\n}\n\u00a0\n```\n",
        "postTime": 1683825559,
        "uid": 225100,
        "name": "ice_in_sky",
        "ccfLevel": 0,
        "title": "CF1798C Candy Store"
    },
    {
        "content": "\u9996\u5148\u8003\u8651\u8d2a\u5fc3\uff0c\u5373\u4e3a\u600e\u6837\u80fd\u4f7f\u4ef7\u7b7e\u6570\u6700\u5c0f\u3002\n\n\u6211\u4eec**\u4ece\u524d\u5f80\u540e\u626b\uff0c\u5224\u65ad\u6211\u4eec\u626b\u5230\u7684\u4e0b\u6807\u662f\u5426\u80fd\u548c\u524d\u9762\u7684\u533a\u95f4\u5408\u5e76**\uff0c\u8fd9\u6837\u7684\u7ed3\u679c\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u4e3a\u4ec0\u4e48\uff1f\n\n\u56e0\u4e3a\u6211\u4eec\u6bcf\u6b21\u628a\u4e00\u4e2a\u65b0\u6570\u52a0\u5165\u539f\u6709\u96c6\u5408\uff0c\u5c31\u76f8\u5f53\u4e8e\u5bf9\u4e0b\u4e00\u6b21\u52a0\u5165\u8fd9\u4e2a\u96c6\u5408\u7684\u6570\u52a0\u4e86\u201c\u9650\u5236\u201d\uff08\u770b\u4e86\u4e0b\u6587\u4f60\u81ea\u7136\u4f1a\u61c2\uff09\uff0c\u6211\u4eec\u82e5\u4e0d\u6309\u4ece\u524d\u5f80\u540e\u7684\u987a\u5e8f\u626b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u5c31\u4f1a\u5f71\u54cd\u6211\u4e0b\u4e00\u4e2a\u65b0\u7684\u96c6\u5408\uff0c\u6240\u4ee5\u4e0d\u5982\u4ece\u524d\u5f80\u540e\u626b\u66f4\u4f18\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u600e\u4e48\u53bb\u626b\u3002\n\n\u5982\u679c\u60f3\u8ba9\u4e24\u4e2a $c1$\uff0c$c2$ \u76f8\u7b49\uff0c\u90a3\u4e48\u80af\u5b9a\u8981\u8ba9 $c1$\uff0c$c2$ \u5206\u522b\u9664\u4ee5 $b1$\uff0c$b2$ \u7684\u503c\u4e3a\u6574\u6570\uff0c\u5373\u4e3a $b1$\uff0c$b2$ \u7684\u516c\u500d\u6570\u3002\u663e\u7136\u6211\u4eec\u77e5\u9053\u82e5\u60f3\u5408\u6cd5\u5219\u8fd9\u4e2a\u516c\u500d\u6570\u8d8a\u5c0f\u8d8a\u597d\uff0c\u4e5f\u5373\u662f\u6211\u4eec\u7684 $c$ \u5e94\u4e3a $b1$\uff0c$b2$ \u7684\u6700\u5c0f\u516c\u500d\u6570\u3002\u540c\u65f6\u5e94\u8be5\u6ee1\u8db3 $a1$\uff0c$a2$ \u5206\u522b\u9664\u4ee5 $\\frac{c}{b1} $\uff0c$\\frac{c}{b2} $ \u7684\u503c\u4e3a\u6574\u6570\u3002\u90a3\u4e48\u5728\u4ece\u524d\u5f80\u540e\u626b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5373\u4e3a\u5728 $\\forall i\\in\\left [l  ,r\\right ]$\uff0c$\\gcd (a_{i}\\times b_{i}) \\operatorname{mod}\\operatorname{lcm}b_{i} $ \u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u5b58\u5728\u4e00\u4e2a\u76f8\u540c\u7684 $c$ \u503c\u4f7f\u5176\u5408\u6cd5\u3002",
        "postTime": 1681109127,
        "uid": 774862,
        "name": "Tsinghua_pwtking",
        "ccfLevel": 0,
        "title": "CF1798C\u9898\u89e3"
    },
    {
        "content": "\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff0c\u6709\u4e00\u4e2a\u57fa\u672c\u7684\u8d2a\u5fc3\u7b56\u7565\uff0c\u82e5\u6211\u4eec\u6709\u4e00\u4e2a\u6253\u597d\u7684\u5305\uff0c\u6211\u4eec\u8981\u5c3d\u53ef\u80fd\u7684\u628a\u66f4\u591a\u7684\u7269\u54c1\u653e\u8fdb\u53bb\u3002\n\n\u540c\u65f6\uff0c\u6b63\u96be\u5219\u53cd\uff0c\u6211\u4eec\u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6253\u597d\u7684\u5305\uff0c\u5176\u4ef7\u683c\u4e3a `w`\uff0c\u5219 `w` \u8981\u6ee1\u8db3\u4ec0\u4e48\u6027\u8d28\u3002\n\n\u9996\u5148\uff0c$\\forall b_i \\, , b_i \\mid w $\u3002\n\n\u8fd9\u4e2a\u6761\u4ef6\u7b49\u4ef7\u4e8e $ \\text{lcm} (b_i) \\mid w $\u3002\n\n\u540c\u65f6\uff0c\u6709 $\\forall a_i , \\frac{w}{b_i}\\mid a_i$\u3002\n\n\u8fd9\u4e2a\u6761\u4ef6\u4e5f\u53ef\u4ee5\u7b49\u4ef7\u4e8e $w \\mid \\gcd(a_i\\times b_i) $\u3002\n\n\u4e24\u4e2a\u6761\u4ef6\u7efc\u5408\u4e00\u4e0b\uff0c\u5c31\u662f\u770b $\\text{lcm}(b_i)$ \u662f\u5426\u6574\u9664 $\\gcd(a_i\\times b_i)$\uff0c\u5982\u679c\u662f\uff0c\u5219\u4e00\u5b9a\u53ef\u4ee5\u6253\u6210\u4e00\u5305\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u8d2a\u5fc3\u7684\u52a0\u5165\uff0c\u76f4\u5230\u4e0d\u80fd\u52a0\u5165\u4e3a\u6b62\u3002\n\n```\n#include <iostream>\n#include <vector> \n#include <map>\n#include <algorithm>\n#define int unsigned long long \n\nusing namespace std;\nconst int maxN=2*1e5+10;\nint n,m;\nint a[maxN],b[maxN];\n\ninline int gcd(int a,int b){\n\tif(b==0) return a;\n\treturn gcd(b,a%b);\n}\n\nvoid solve(){\n\tcin >> n;\n\tfor(int i=1;i<=n;++i)cin >> a[i] >> b[i];\n\tint lm=b[1],gd=a[1]*b[1],ans=1;\n\tfor(int i=2;i<=n;++i){\n\t\tint p=(lm*b[i])/gcd(lm,b[i]),q=gcd(a[i]*b[i],gd);\n\t\tif(q%p!=0ll){\n\t\t\tlm=b[i],gd=a[i]*b[i];\n\t\t\t++ans;\n\t\t}\n\t\telse lm=p,gd=q;\n\t}\n\tcout << ans << endl;\n}\n\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0); \n\tint t;\n\tcin >> t;\n\twhile(t--){\n\t\tsolve();\n\t} \n\treturn 0;\n} \n```",
        "postTime": 1680781146,
        "uid": 258178,
        "name": "Benzenesir",
        "ccfLevel": 4,
        "title": "CF1798C\u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1798C)\n## _Description_\n\u5546\u5e97\u91cc\u6709 $n$ \u79cd\u7cd6\u679c\uff0c\u6bcf\u79cd\u7cd6\u679c\u6709 $a_i$ \u9897\uff0c\u4ef7\u683c\u4e3a $b_i$ \u6bcf\u9897\u3002\n\n\u73b0\u5728\u9700\u8981\u5c06\u6bcf\u79cd\u7cd6\u679c\u5206\u6210\u82e5\u5e72\u5305\uff0c\u6bcf\u5305\u7684\u6570\u91cf $d_i$ \u8981\u4e00\u6837\u3002\u7b2c $i$ \u79cd\u7cd6\u679c\u6700\u7ec8\u6807\u4ef7\u4e3a $c_i=d_i\\times b_i$\uff0c\u4e00\u4e2a\u4ef7\u683c\u6807\u7b7e\u53ef\u4ee5\u6982\u62ec $l$ \u5230 $r$ \u79cd\u7cd6\u679c\u5f53\u4e14\u4ec5\u5f53 $c_l=c_{l+1}=\\dots=c_r$\uff0c\u95ee\u6700\u5c11\u9700\u8981\u591a\u5c11\u4e2a\u6807\u7b7e\u3002\n\n\u6ce8\u610f\uff0c\u95ee\u7684\u662f\u6807\u7b7e\u6570\u91cf\uff0c\u4e0d\u662f\u4ef7\u683c\u6709\u591a\u5c11\u79cd\u3002\n\n\u5047\u8bbe\u4ef7\u683c\u4f9d\u6b21\u4e3a $c_1=4,c_2=4,c_3=2,c_4=4,c_5=4$\uff0c\u5219\u53ef\u4ee5\u7528\u4e09\u4e2a\u6807\u7b7e $4,2,4$ \u6765\u6982\u62ec\uff0c\u6570\u91cf\u4e3a $3$\uff0c\u800c\u4e0d\u662f $2$\u3002\n## _Solution_\n\u5047\u8bbe \u4e00\u4e2a\u6807\u7b7e $tag$ \u6982\u62ec\u4e86 $l$ \u5230 $r$ \u79cd\u7cd6\u679c\u7684\u6807\u7b7e\uff0c\u5219 $tag=c_{l\\sim r}$\u3002\n\n$\\because c_i=d_i\\times b_i$\uff0c\n\n$\\therefore tag$ \u80fd\u88ab $b_{l\\sim r}$ \u6574\u9664\n\n$\\therefore \\operatorname{lcm}(b_l,b_{l+1}\\dots b_r)\\mid tag$\n\n$\\because d_i\\mid a_i$\n\n$\\therefore c_i\\mid a_i\\times b_i$\n\n$\\therefore tag\\mid \\gcd(a_i\\times b_i,a_{i+1}\\times b_{i+1}\\dots a_r\\times b_r)$\n\n$\\therefore \\operatorname{lcm}(b_l,b_{l+1}\\dots b_r)\\mid \\gcd(a_i\\times b_i,a_{i+1}\\times b_{i+1}\\dots a_r\\times b_r)$\n\n\u6240\u4ee5\u53ea\u8981\u5224\u65ad\u5f53\u524d $\\gcd(\\dots)$ \u662f\u5426\u80fd\u88ab $\\operatorname{lcm}(\\dots)$ \u6574\u9664\u5373\u53ef\uff0c\u5982\u679c\u4e0d\u80fd\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fdb\u5165\u4e86\u4e0b\u4e00\u4e2a\u6807\u7b7e\uff0c\u5c06 $\\gcd(\\dots)$ \u66f4\u65b0\u6210 $a_i\\times b_i$\uff0c$\\operatorname{lcm}(\\dots)$ \u66f4\u65b0\u6210 $b_i$\u3002\n## _Code_\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long //\u8bb0\u5f97\u5f00long long\nint t;\nint a[200200],b[200200];\nint gcd(int x,int y){\n\tif(y==0) return x;\n\treturn gcd(y,x%y);\n}\nint lcm(int x,int y){\n\treturn x*y/gcd(x,y);\n}\nvoid solve(){\n\tint n,ansg=0,ansl=1,cnt=1; //\u6ce8\u610fgcd\u548clcm\u7684\u521d\u59cb\u5316\uff0c\u4ee5\u53ca\u6807\u7b7e\u81f3\u5c11\u6709\u4e00\u4e2a\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i]>>b[i];\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tansg=gcd(ansg,a[i]*b[i]);\n\t\tansl=lcm(ansl,b[i]);\n\t\tif((ansg%ansl)!=0){ //\u4e0b\u4e00\u4e2a\u6807\u7b7e\uff0c\u66f4\u65b0gcd\u548clcm\n\t\t\tansg=a[i]*b[i];\n\t\t\tansl=b[i];\n\t\t\tcnt++;\n\t\t}\n\t}\n\tcout<<cnt<<endl;\n}\nsigned main(){\n\tcin>>t;\n\twhile(t--){\n\t\tsolve();\n\t}\n}\n```",
        "postTime": 1680164532,
        "uid": 475329,
        "name": "Larryyu",
        "ccfLevel": 0,
        "title": "CF1798C Candy Store \u9898\u89e3"
    },
    {
        "content": "[\u9898\u9762](https://www.luogu.com.cn/problem/CF1798C)\n\n\u5f62\u5f0f\u5316\u9898\u610f\uff1a\n> \u7ed9\u51fa\u957f\u4e3a $n$ \u7684\u4e24\u4e2a\u5e8f\u5217 $\\{a\\}$ \u548c $\\{b\\}$\uff0c\u5b9a\u4e49\u5e8f\u5217 $\\{c\\}$ \u6ee1\u8db3\uff1a$c_i=d_ib_i$\uff0c\u5176\u4e2d $d_i\\mid a_i$\u3002\u6c42 $\\{c\\}$ \u6700\u5c11\u80fd\u88ab\u5206\u6210\u591a\u5c11\u4e2a\u8fde\u7eed\u6bb5\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u8fde\u7eed\u6bb5\u5185\u7684\u503c\u76f8\u540c\u3002\n\n\u9996\u5148\u5bf9\u4e8e\u4e00\u4e2a $i$\uff0c\u5982\u679c $c_i$ \u80fd\u548c $c_{i-1}$ \u5206\u5230\u540c\u4e00\u4e2a\u6bb5\u91cc\uff0c\u90a3\u4e48\u4e00\u5b9a\u4f18\u4e8e\u5b83\u5355\u72ec\u6210\u6bb5\u6216\u8005\u548c $c_{i+1}$ \u5206\u5230\u540c\u4e00\u6bb5\u91cc\u3002\u56e0\u4e3a\u5728\u4e00\u4e2a\u6bb5\u91cc\u52a0\u4e00\u4e2a\u6570\u53ea\u4f1a\u8ba9\u8fd9\u4e2a\u6bb5\u7684\u9650\u5236\u66f4\u7d27\u3002\n\n\u57fa\u4e8e\u8fd9\u4e2a\u8d2a\u5fc3\u6709\u4e86\u4e00\u4e2a\u601d\u8def\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u5de6\u7aef\u70b9 $l$\uff0c\u627e\u5230\u5b83\u80fd\u5f62\u6210\u7684\u6700\u957f\u5408\u6cd5\u8fde\u7eed\u6bb5\u7684\u53f3\u7aef\u70b9 $r$\uff0c\u7136\u540e\u4ee4 $ans\\leftarrow ans+1,l\\leftarrow r+1$ \u7ee7\u7eed\u76f4\u5230 $l>n$\u3002\n\n\u73b0\u5728\u95ee\u9898\u6765\u5230\u5bf9\u4e8e\u4e00\u4e2a $l$\uff0c\u5982\u4f55\u5feb\u901f\u6c42 $r$\u3002\n\n\u4e0d\u59a8\u5bf9 $\\{c\\}$ \u7684\u6784\u9020\u65b9\u5f0f\u505a\u4e00\u4e0b\u8f6c\u5316\uff1a$c_i=\\dfrac{a_ib_i}{e_i}$\uff0c\u5176\u4e2d $e_i\\mid a_i$\u3002\u7531\u6b64\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u4e00\u4e2a\u533a\u95f4 $[l,r]$ \u5408\u6cd5\uff0c\u5219\u8fd9\u4e2a\u533a\u95f4\u7684 $c$ \u503c\u4e00\u5b9a\u662f $\\gcd\\limits_{i=l}^ra_ib_i$ \u7684\u7ea6\u6570\uff0c\u5e76\u4e14\u663e\u7136\u53d6\u6700\u5927\u516c\u7ea6\u6570\u662f\u6700\u4f18\u7684\uff0c\u7531\u6b64\u53ef\u4ee5\u6c42\u51fa\u6bcf\u4e2a $i$ \u5bf9\u5e94\u7684 $e$\u3002\u540c\u65f6\u4e0d\u96be\u53d1\u73b0 $r$ \u7684\u51fa\u73b0\u6ee1\u8db3\u53ef\u4e8c\u5206\u6027\uff0c\u56e0\u6b64\u53ea\u8981 ST \u8868\u6c42\u533a\u95f4 $\\gcd$\uff0c\u4e8c\u5206\u7b54\u6848\u5373\u53ef\u3002\n\n[\u8d5b\u65f6 AC \u8bb0\u5f55](https://codeforces.com/contest/1798/submission/199272356)\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\uff1aST \u8868\u521d\u59cb\u5316\u662f $O(n\\log^2 n)$\u3002\u8bbe $len=r-l+1$\uff0c\u7531\u4e8e `check` \u5728\u68c0\u6d4b\u5230\u4e0d\u5408\u6cd5\u540e\u7acb\u5373\u8fd4\u56de\uff0c\u6240\u4ee5 `check` \u4e00\u6b21\u7684\u590d\u6742\u5ea6\u662f $O(len)$\uff0c\u4e8c\u5206\u4e00\u6b21\u5c31\u662f $O(len\\log n)$\uff0c\u53c8\u56e0\u4e3a $\\sum len=n$\uff0c\u6240\u4ee5\u4e8c\u5206\u7b54\u6848\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log n)$\u3002\u7a0b\u5e8f\u603b\u590d\u6742\u5ea6\u4e3a $O(n\\log^2 n)$\u3002\u5e38\u6570\u597d\u50cf\u633a\u5c0f\u7684\u3002",
        "postTime": 1680046450,
        "uid": 393767,
        "name": "Untitled0",
        "ccfLevel": 5,
        "title": "CF1798C \u9898\u89e3"
    }
]
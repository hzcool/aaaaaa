[
    {
        "content": "\u9996\u5148\u7279\u5224\u6240\u6709\u70b9\u5171\u7ebf\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u7b54\u6848\u4e3a0\u3002\n\n\u7136\u540e\u5f00\u4e00\u4e2a `info ` \u7c7b\u7528\u4e8e\u7ef4\u62a4\u5305\u542b\u7ed9\u5b9a\u70b9\u96c6\u7684\u6700\u5c0f\u77e9\u5f62\u3002\n\n\u6c42\u51fa `A` \u8868\u793a\u5305\u542b\u5168\u96c6\u7684\u6700\u5c0f\u77e9\u5f62\uff0c\u4e4b\u540e\u6211\u4eec\u5bf9\u4e8e\uff0c\u6211\u4eec\u9009\u53d6\u7684\u4e24\u4e2a\u77e9\u5f62\u8986\u76d6 `A` \u8fb9\u754c\u4e0a\u7684\u70b9\u7684\u60c5\u51b5\uff0c\u8fdb\u884c\u8ba8\u8bba\u3002\n\n\u603b\u5171\u6709\u4e24\u5927\u7c7b\uff0c1+3\u548c2+2\u3002\n\n\u5bf9\u4e8e1+3\uff0c\u4e00\u5b9a\u5b58\u5728\u4e00\u6761\u5e73\u884c\u4e8ex\u8f74\u6216y\u8f74\u7684\u5206\u5272\u7ebf\u4f7f\u5f97\u9009\u53d6\u7684\u77e9\u5f62\u5206\u522b\u5728\u5206\u5272\u7ebf\u5de6\u53f3\uff0c\u5bf9\u4e24\u7ef4\u5206\u522b\u505a\u4e00\u904d\uff0c\u7ef4\u62a4\u4e0b\u6cbf\u5750\u6807\u8f74\u7684\u5305\u542b\u524d\u540e\u7f00\u70b9\u96c6\u7684\u6700\u5c0f\u77e9\u5f62\u5373\u53ef\u3002\u5177\u4f53\u5b9e\u73b0\u53ef\u89c1\u4ee3\u7801\u7684 `namespace N1`\n\n2+2\u53c8\u5206\u4e3a\u4e24\u7c7b\u3002\u4e00\u7c7b\u662f\u4e24\u4e2a\u77e9\u5f62\u5206\u522b\u8986\u76d6\u5bf9\u8fb9\uff0c\u53e6\u4e00\u7c7b\u662f\u4e24\u4e2a\u77e9\u5f62\u5206\u522b\u8986\u76d6\u5bf9\u89d2\u3002\n\n\u5bf9\u4e8e\u4e24\u77e9\u5f62\u8986\u76d6\u5bf9\u89d2\u7684\u60c5\u51b5\uff0c\u5047\u8bbe\u662f\u8986\u76d6\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\uff0c\u53e6\u4e00\u79cd\u60c5\u51b5\u5c06\u70b9\u96c6\u6cbfy\u8f74\u5bf9\u79f0\u5373\u53ef\u4e00\u6837\u505a\u3002\u6211\u4eec\u6c42\u51fa\u6cbfx\u5750\u6807\u7684\u6240\u6709\u524d\u7f00y\u6700\u5c0f\u503c\u548c\u6240\u6709\u540e\u7f00y\u6700\u5927\u503c\uff0c\u5219\u4e00\u7ec4\u6700\u4f18\u89e3\u7684\u5fc5\u8981\u6761\u4ef6\u662f\uff0c\u5de6\u4e0a\u77e9\u5f62\u7684\u53f3\u8fb9\u754c\u548c\u4e0b\u8fb9\u754c\u8fd8\u6709\u53f3\u4e0b\u77e9\u5f62\u7684\u5de6\u8fb9\u754c\u548c\u4e0a\u8fb9\u754c\u4e0a\uff0c\u5206\u522b\u6709\u4e00\u4e2a\u524d\u540e\u7f00\u6700\u503c\u70b9\u3002\u6240\u6709\u76f8\u90bb\u524d\u7f00\u6700\u503c\u5bf9\u548c\u76f8\u90bb\u540e\u7f00\u6700\u503c\u5bf9\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86 $O(n^2)$ \u79cd\u53ef\u80fd\u7684\u51b3\u7b56\u3002\n\n\u4f46\u4e0d\u662f\u6bcf\u79cd\u51b3\u7b56\u90fd\u662f\u5408\u6cd5\u7684\uff0c\u8fd9\u91cc\u53ef\u4ee5\u9650\u5b9a\u4e00\u7ec4\u51b3\u7b56\u5408\u6cd5\u7684\u6761\u4ef6\u4e3a\uff0c\u5f97\u5230\u7684\u4e24\u4e2a\u77e9\u5f62\u6709\u4ea4\u3002\u56e0\u4e3a1+3\u7684\u90e8\u5206\u5df2\u7ecf\u5904\u7406\u4e86\u6240\u6709\u77e9\u5f62\u4e0d\u4ea4\u7684\u60c5\u51b5\u3002\n\n\u89c2\u5bdf\u4e00\u4e0b\u7ea6\u675f\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6240\u6709\u76f8\u90bb\u524d\u7f00\u6700\u503c\u5bf9\uff0c\u53ef\u7528\u4e8e\u66f4\u65b0\u7b54\u6848\u7684\u76f8\u90bb\u540e\u7f00\u6700\u503c\u5bf9\u7684\u6a2a\u5750\u6807\u4e00\u5b9a\u662f\u4e00\u6bb5\u533a\u95f4\u3002\u89c2\u5bdf\u7b54\u6848\u5f62\u5f0f\uff0c\u53d1\u73b0\u7ebf\u6bb5\u6811\u7ef4\u62a4\u9759\u6001\u533a\u95f4\u51f8\u5305\u5373\u53ef\u3002\u8fd9\u90e8\u5206\u590d\u6742\u5ea6 $O(n\\log n)$ \u6216 $O(n\\log^2n)$\uff0c\u8be6\u89c1\u4ee3\u7801\u7684 `namespace N2`\u3002\n\n\u5bf9\u4e8e\u4e24\u4e2a\u77e9\u5f62\u5206\u522b\u8986\u76d6\u5bf9\u8fb9\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u679a\u4e3e\u201c\u6a2a\u201d\u7740\u7684\u90a3\u4e2a\u77e9\u5f62\u7684\u4e0a\u8fb9\u754c\u548c\u4e0b\u8fb9\u754c\uff0c\u8ba8\u8bba\u4e0b\u62c6max\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u53d1\u73b0\u786e\u5b9a\u4e0a\u8fb9\u754c\u540e\uff0c\u4e0b\u8fb9\u754c\u53ef\u4ee5\u5206\u4e3a\u81f3\u591a\u4e09\u6bb5\uff0c\u4e14\u6bcf\u6bb5\u5185\u4e0a\u4e0b\u8fb9\u754c\u7684\u8d21\u732e\u662f\u72ec\u7acb\u7684\uff0c\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u9759\u6001\u533a\u95f4\u6700\u503c\u5373\u53ef\u3002\u8fd9\u90e8\u5206\u590d\u6742\u5ea6 $O(n)$ \u6216 $O(n\\log n)$\u3002\n\n\u53bb\u6389\u6240\u6709\u6570\u636e\u7ed3\u6784\u7684 $O(n^2)$ \u66b4\u529b\u5982\u4e0b\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u770b\u5230\u5404\u4e2a\u90e8\u5206\u7684\u539f\u672c\u610f\u56fe\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=2e5+5,I=1<<30;\nint T,n,i,j;\nll ans;\nstruct P{int x,y;}a[N];\nstruct info{\n\tint l,r,d,u;\n\tinfo(int _l=I,int _r=0,int _d=I,int _u=0):l(_l),r(_r),d(_d),u(_u){}\n\tinline info operator+(info a){return (info){min(l,a.l),max(r,a.r),min(d,a.d),max(u,a.u)};}\n\tinline void ins(const P&a){l=min(l,a.x);r=max(r,a.x);d=min(d,a.y);u=max(u,a.y);}\n\tinline ll area(){return 1ll*(r-l)*(u-d);}\n}A;\ninline bool cmpx(const P&a,const P&b){return a.x<b.x;}\nnamespace N1{\ninfo ps[N],ss[N];\ninline void solve(){\n\tsort(a+1,a+n+1,cmpx);\n\tps[0]=ss[n+1]=info();\n\tfor(i=1;i<=n;++i)ps[i]=ps[i-1],ps[i].ins(a[i]);\n\tfor(i=n;i;--i)ss[i]=ss[i+1],ss[i].ins(a[i]);\n\tfor(i=1;i<n;++i)ans=min(ans,ps[i].area()+ss[i+1].area());\n}\ninline void main(){\n\tsolve();\n\tfor(i=1;i<=n;++i)swap(a[i].x,a[i].y);swap(A.l,A.d);swap(A.r,A.u);\n\tsolve();\n}\n}\nnamespace N2{\nP b1[N],b2[N];int w1,w2;\ninline void solve(){\n\tsort(a+1,a+n+1,cmpx);w1=w2=0;\n\tfor(i=1;i<=n;++i)if(!w1 || (b1[w1].x<a[i].x && b1[w1].y>a[i].y))b1[++w1]=a[i];\n\t\telse if(w1 && b1[w1].x==a[i].x)b1[w1].y=min(b1[w1].y,a[i].y);\n\tfor(i=n;i;--i)if(!w2 || (b2[w2].x>a[i].x && b2[w2].y<a[i].y))b2[++w2]=a[i];\n\t\telse if(w2 && b2[w2].x==a[i].x)b2[w2].y=max(b2[w2].y,a[i].y);\n\tfor(i=1;i<w1;++i)for(j=1;j<w2;++j)if(b1[i].y<=b2[j].y && b1[i+1].x<=b2[j+1].x){\n\t\tans=min(ans,1ll*(A.u-b1[i].y)*(b2[j+1].x-A.l)+1ll*(A.r-b1[i+1].x)*(b2[j].y-A.d));\nif(ans<0)\n++i,--i;\n\t}\n}\ninline void main(){\n\tsolve();\n\tfor(i=1;i<=n;++i)a[i].x=I-a[i].x;swap(A.l=I-A.l,A.r=I-A.r);\n\tsolve();\n}\n}\nnamespace N3{\ninfo ps[N],ss[N];\ninline void main(){\n\tsort(a+1,a+n+1,cmpx);ps[0]=ss[n+1]=info();\n\tps[0]=ss[n+1]=info();\n\tfor(i=1;i<=n;++i)ps[i]=ps[i-1],ps[i].ins(a[i]);\n\tfor(i=n;i;--i)ss[i]=ss[i+1],ss[i].ins(a[i]);\n\tfor(i=1;i<=n;++i)for(j=i;j<=n;++j){\n\t\tinfo s=ps[i-1]+ss[j+1];\n\t\tans=min(ans,1ll*(a[j].x-a[i].x)*(A.u-A.d)+max(0ll,1ll*(s.u-s.d)*(A.r-A.l)));\nif(ans<0)\n++i,--i;\n\t}\n}\n}\nint main(){\n\tfreopen(\"1\",\"r\",stdin);\n\tios::sync_with_stdio(0);cin.tie(0);\n\tfor(cin>>T;T--;){\n\t\tcin>>n;\n\t\tA=info();\n\t\tfor(i=1;i<=n;++i)cin>>a[i].x>>a[i].y,A.ins(a[i]);\n\t\tans=A.area();if(!ans){cout<<ans<<'\\n';continue;}\n\t\tN3::main();N2::main();N1::main();cout<<ans<<'\\n';\n\t}\n}\n```\n\n\nAC\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=2e5+5,I=1<<30;\nint T,n,i,j,k;\nll ans;\nstruct P{int x,y;}a[N];\nstruct info{\n\tint l,r,d,u;\n\tinfo(int _l=I,int _r=0,int _d=I,int _u=0):l(_l),r(_r),d(_d),u(_u){}\n\tinline info operator+(info a){return (info){min(l,a.l),max(r,a.r),min(d,a.d),max(u,a.u)};}\n\tinline void ins(const P&a){l=min(l,a.x);r=max(r,a.x);d=min(d,a.y);u=max(u,a.y);}\n\tinline ll area(){return 1ll*(r-l)*(u-d);}\n}A;\ninline bool cmpx(const P&a,const P&b){return a.x<b.x;}\nnamespace N1{\ninfo ps[N],ss[N];\ninline void solve(){\n\tsort(a+1,a+n+1,cmpx);\n\tps[0]=ss[n+1]=info();\n\tfor(i=1;i<=n;++i)ps[i]=ps[i-1],ps[i].ins(a[i]);\n\tfor(i=n;i;--i)ss[i]=ss[i+1],ss[i].ins(a[i]);\n\tfor(i=1;i<n;++i)ans=min(ans,ps[i].area()+ss[i+1].area());\n}\ninline void main(){\n\tsolve();\n\tfor(i=1;i<=n;++i)swap(a[i].x,a[i].y);swap(A.l,A.d);swap(A.r,A.u);\n\tsolve();\n}\n}\nnamespace N2{\nP b1[N],b2[N];int w1,w2;\ninline P operator-(const P&a,const P&b){return P{a.x-b.x,a.y-b.y};}\ninline ll cross(const P&a,const P&b){return 1ll*a.x*b.y-1ll*b.x*a.y;}\ninline ll dot(const P&a,const P&b){return 1ll*a.x*b.x+1ll*a.y*b.y;}\nvector<P>T[N*3];int pos[N*3];\nvoid build(int i,int l,int r){\n\tstatic P st[N];int w=0;\n\tfor(int i=l;i<=r;++i){\n\t\tP u=P{b2[i].x-A.l,b2[i+1].y-A.d};\n\t\tfor(;w>1 && cross(u-st[w-1],st[w]-st[w-1])>=0;--w);st[++w]=u;\n\t}\n\tT[i]=vector<P>(st+1,st+w+1);pos[i]=w-1;\n\tif(l==r)return;int m=l+r>>1;build(i<<1,l,m);build(i<<1|1,m+1,r);\n}\ninline ll ask(int i,int l,int r,int ql,int qr,P p){\n\tif(ql<=l && r<=qr){\n\t\tfor(;pos[i] && dot(p,T[i][pos[i]])>=dot(p,T[i][pos[i]-1]);--pos[i]);\n\t\treturn dot(p,T[i][pos[i]]);\n\t}\n\tint m=l+r>>1;return min(ql<=m?ask(i<<1,l,m,ql,qr,p):1ll<<61,m<qr?ask(i<<1|1,m+1,r,ql,qr,p):1ll<<61);\n}\ninline void solve(){\n\tsort(a+1,a+n+1,cmpx);w1=w2=0;\n\tfor(i=1;i<=n;++i)if(!w1 || (b1[w1].x<a[i].x && b1[w1].y>a[i].y))b1[++w1]=a[i];\n\t\telse if(w1 && b1[w1].x==a[i].x)b1[w1].y=min(b1[w1].y,a[i].y);\n\tfor(i=n;i;--i)if(!w2 || (b2[w2].x>a[i].x && b2[w2].y<a[i].y))b2[++w2]=a[i];\n\t\telse if(w2 && b2[w2].x==a[i].x)b2[w2].y=max(b2[w2].y,a[i].y);\n\tif(w1==1 || w2==1)return;\n\treverse(b2+1,b2+w2+1);\n\tbuild(1,1,w2-1);\n\tint p1=1,p2=0;\n\tfor(i=j=k=1;i<w1;++i){\n\t\tfor(;p1<w2 && b1[i+1].x>b2[p1].x;++p1);\n\t\tfor(;p2+1<w2 && b1[i].y<=b2[p2+2].y;++p2);\n\t\tif(p1<=p2)ans=min(ans,ask(1,1,w2-1,p1,p2,P{A.u-b1[i].y,A.r-b1[i+1].x}));\n\t}\n}\ninline void main(){\n\tsolve();\n\tfor(i=1;i<=n;++i)a[i].x=I-a[i].x;swap(A.l=I-A.l,A.r=I-A.r);\n\tsolve();\n}\n}\nnamespace N3{\ninfo ps[N],ss[N];int M;\ninline bool contain(const info&a,const info&b){return a.u>=b.u && b.d>=a.d;}\nstruct segtree{\n\tll T[N*3];\n\tsegtree(){for(i=0;i<N*3;++i)T[i]=1ll<<61;}\n\tinline void ini(){for(i=M-1;i;--i)T[i]=min(T[i<<1],T[i<<1|1]);}\n\tinline ll ask(int l,int r){\n\t\tll ans=1ll<<61;\n\t\tfor(l+=M-1,r+=M+1;l^r^1;l>>=1,r>>=1){\n\t\t\tif(!(l&1))ans=min(ans,T[l^1]);\n\t\t\tif(r&1)ans=min(ans,T[r^1]);\n\t\t}\n\t\treturn ans;\n\t}\n}T1,T2,T3;\ninline void main(){\n\tsort(a+1,a+n+1,cmpx);ps[0]=ss[n+1]=info();\n\tps[0]=ss[n+1]=info();\n\tfor(i=1;i<=n;++i)ps[i]=ps[i-1],ps[i].ins(a[i]);\n\tfor(i=n;i;--i)ss[i]=ss[i+1],ss[i].ins(a[i]);\n\tfor(M=1;M<n+2;M<<=1);\n\tfor(i=1;i<=n;++i)T1.T[M+i]=1ll*a[i].x*(A.u-A.d)-1ll*ss[i+1].d*(A.r-A.l);T1.ini();\n\tfor(i=1;i<=n;++i)T2.T[M+i]=1ll*a[i].x*(A.u-A.d)+1ll*ss[i+1].u*(A.r-A.l);T2.ini();\n\tfor(i=1;i<=n;++i)T3.T[M+i]=1ll*a[i].x*(A.u-A.d)+1ll*(ss[i+1].u-ss[i+1].d)*(A.r-A.l);T3.ini();\n\tfor(i=1;i<=n;++i){\n\t\tint l,r,m,p1,p2;\n\t\tfor(l=i,r=n;l<r;)m=l+r>>1,contain(ps[i-1],ss[m+1])?r=m:l=m+1;p1=l;\n\t\tfor(l=i,r=p1;l<r;)m=l+r>>1,!contain(ss[m+1],ps[i-1])?r=m:l=m+1;p2=l;\n\t\tans=min(ans,1ll*(a[p1].x-a[i].x)*(A.u-A.d)+max(0ll,1ll*(ps[i-1].u-ps[i-1].d)*(A.r-A.l)));\n\t\tif(p2<p1){\n\t\t\tif(ss[p2+1].d<ps[i-1].d){\n\t\t\t\tans=min(ans,T1.ask(p2,p1-1)-1ll*a[i].x*(A.u-A.d)+1ll*ps[i-1].u*(A.r-A.l));\n\t\t\t}else{\n\t\t\t\tans=min(ans,T2.ask(p2,p1-1)-1ll*a[i].x*(A.u-A.d)-1ll*ps[i-1].d*(A.r-A.l));\n\t\t\t}\n\t\t}\n\t\tif(i<p2)ans=min(ans,T3.ask(i,p2-1)-1ll*a[i].x*(A.u-A.d));\n\t}\n}\n}\nint main(){\n\tios::sync_with_stdio(0);cin.tie(0);\n\tfor(cin>>T;T--;){\n\t\tcin>>n;\n\t\tA=info();\n\t\tfor(i=1;i<=n;++i)cin>>a[i].x>>a[i].y,A.ins(a[i]);\n\t\tans=A.area();if(!ans){cout<<ans<<'\\n';continue;}\n\t\tN3::main();N2::main();N1::main();cout<<ans<<'\\n';\n\t}\n}\n```\n",
        "postTime": 1610973894,
        "uid": 19567,
        "name": "zx2003",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1470F \u3010Strange Covering\u3011"
    },
    {
        "content": "\u663e\u7136\u53ea\u4f1a\u5b58\u5728 $3$ \u79cd\u672c\u8d28\u4e0d\u540c\u7684\u65b9\u5f0f\u9009\u62e9\u4e24\u4e2a\u77e9\u5f62\u3002\n\n1. \u4e24\u4e2a\u77e9\u5f62\u4e0d\u76f8\u4ea4\u3002\n\n\u8fd9\u79cd\u60c5\u51b5\u53ef\u4ee5\u76f4\u63a5\u904d\u5386\u6240\u6709\u5e73\u884c $x/y$ \u8f74\u7684\u5206\u5272\u7ebf\uff0c\u4f7f\u9009\u53d6\u7684\u4e24\u4e2a\u77e9\u5f62\u5206\u522b\u5728\u5206\u5272\u7ebf\u7684\u4e24\u8fb9\u3002\u5206\u522b\u627e\u51fa\u6781\u503c\u70b9\u76f4\u63a5\u8ba1\u7b97\u5373\u53ef\u3002\n\n\n2. \u76f8\u4ea4\u6210\u4e00\u4e2a\u5341\u5b57\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u6b64\u65f6\u4e24\u4e2a\u77e9\u5f62\u90fd\u81f3\u5c11\u6709\u4e24\u6761\u8fb9\u5728\u6070\u597d\u5305\u542b\u6240\u6709\u70b9\u7684\u5927\u77e9\u5f62\u7684\u8fb9\u754c\u4e0a\u3002\n\n\u56e0\u6b64\uff0c\u4e3a\u4e86\u6709\u6548\u627e\u51fa\u8fd9\u6837\u7684\u77e9\u5f62\uff0c\u8003\u8651\u904d\u5386\u201c\u7ad6\u201d\u77e9\u5f62\u7684\u53f3\u8fb9\u754c\u3002\u4ee4 $L_d$ \u4e3a\u201c\u7ad6\u201d\u77e9\u5f62\u5de6\u8fb9\u754c\u5de6\u4fa7\u70b9\u6700\u5c0f $y$ \u5750\u6807\uff0c$L_u$ \u4e3a\u5de6\u8fb9\u754c\u5de6\u4fa7\u70b9\u6700\u5927 $y$ \u5750\u6807\uff0c\u540c\u7406\u5b9a\u4e49\u53f3\u8fb9\u754c\u53f3\u4fa7\u70b9\u7684 $R_u,R_d$\u3002\n\n\u5047\u8bbe $R_u\\ge L_u$\u3002\u5728 $L_d\\ge R_d$ \u7684\u524d\u7f00\u4e0a\uff0c\u76f4\u63a5\u9009\u62e9\u6700\u53f3\u7684\u8fb9\u754c\u3002\u800c\u5728\u5269\u4e0b\u7684\u5b50\u533a\u95f4\u5c06\u4f1a\u6ee1\u8db3 $L_u\\le R_u,L_d\\le R_d$\u3002\u5047\u8bbe\u77e9\u5f62\u56fa\u5b9a\u7684\u8fb9\u754c\u4e3a $L,R$\uff0c\u5219\u603b\u9762\u79ef\u4e3a $(R_u-L_d)\\cdot H+(R-L)\\cdot W$\uff0c\u5176\u4e2d $H$ \u8868\u793a\u5927\u77e9\u5f62\u7684\u957f\u5ea6\uff0c$W$ \u8868\u793a\u5927\u77e9\u5f62\u7684\u9ad8\u5ea6\u3002\u6539\u4e00\u4e0b\u5c31\u53ef\u4ee5\u5f97\u5230\uff1a$(R\\cdot W+R_u\\cdot H)-(L\\cdot W+L_d\\cdot H)$,\u7ebf\u6bb5\u6811\u7ef4\u62a4\u4e00\u4e0b\u533a\u95f4\u6700\u503c\u5373\u53ef\u3002\n\n\n3. \u4e24\u4e2a\u77e9\u5f62\u5404\u81ea\u6709\u4e00\u4e2a\u9876\u70b9\u5728\u53e6\u4e00\u4e2a\u77e9\u5f62\u5185\u90e8\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u6b64\u65f6\u8fd9\u4e24\u4e2a\u77e9\u5f62\u4e00\u5b9a\u5404\u6709\u4e00\u4e2a\u89d2\u4e0e\u5927\u77e9\u5f62\u7684\u67d0\u4e2a\u89d2\u91cd\u5408\uff0c\u5373\u8fd9\u4e24\u4e2a\u5206\u522b\u8986\u76d6\u5bf9\u89d2\uff0c\u603b\u5171\u53ea\u6709\u8986\u76d6\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u4ee5\u53ca\u8986\u76d6\u5de6\u4e0b\u89d2\u8986\u76d6\u53f3\u4e0a\u89d2\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u5047\u8bbe\u662f\u8986\u76d6\u5de6\u4e0a\u548c\u53f3\u4e0b\u3002\u8003\u8651\u904d\u5386 $x$ \u8f74\uff0c\u6c42\u51fa\u524d\u7f00 $y$ \u7684\u6700\u5c0f\u503c\u548c\u540e\u7f00\u6700\u5927\u503c\u3002\u7136\u540e\u76f4\u63a5\u66b4\u529b\u679a\u4e3e\u70b9\u5bf9\u5c31\u662f $\\mathcal O (n^2) $ \u7684\uff0c\u8003\u8651\u4f18\u5316\u3002\u53ef\u4ee5\u53d1\u73b0\u7531\u4e8e\u8981\u6ee1\u8db3\u4e24\u4e2a\u77e9\u5f62\u76f8\u4ea4\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e2a\u5de6\u4e0a\u77e9\u5f62\u53f3\u4e0b\u89d2\u70b9\uff0c\u6240\u5bf9\u5e94\u53f3\u4e0b\u77e9\u5f62\u5de6\u4e0a\u89d2\u70b9\u7684\u5c31\u662f\u4e00\u6bb5\u533a\u95f4\uff0c\u7ef4\u62a4\u533a\u95f4\u9759\u6001\u51f8\u5305\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define R(i,a,b) for(int i=(a),i##E=(b);i<=i##E;i++)\n#define L(i,a,b) for(int i=(b),i##E=(a);i>=i##E;i--)\nusing namespace std;\nconst int N=222222;\n\nint n;\nlong long ans,v[N];\npair<int,int>p[N];\nvoid calc1()\n{\n\tsort(p+1,p+n+1);\n\tR(i,0,n+5) v[i]=0;\n\tint mny=p[1].second,mxy=p[1].second;\n\tR(i,2,n) \n\t{\n\t\tmny=min(mny,p[i].second);\n\t\tmxy=max(mxy,p[i].second);\n\t\tv[i]=1ll*(p[i].first-p[1].first)*(mxy-mny);\n\t}\n\tmny=p[n].second,mxy=p[n].second;\n\tL(i,1,n-1) \n\t{\n\t\tmny=min(mny,p[i].second);\n\t\tmxy=max(mxy,p[i].second);\n\t\tv[i-1]+=1ll*(p[n].first-p[i].first)*(mxy-mny);\n\t}\n\tR(i,0,n) ans=min(ans,v[i]);\n}\nint Ld[N],Lu[N],Rd[N],Ru[N];\n\ntemplate<class Callable>\n\nvoid solveofcalc2(int L,int R,int l,int r,Callable cc)\n{\n\tint mid=(l+r)>>1;\n\tlong long mn=3e18;\n\tint mnp=0;\n\tR(i,L,R) \n\t{\n\t\tlong long tp=cc(i,mid);\n\t\tif(tp<mn) mn=tp,mnp=i;\n\t}\n\tv[mid]=mn;\n\tif(l!=r) solveofcalc2(mnp,R,l,mid,cc),solveofcalc2(L,mnp,mid+1,r,cc);\n}\nvoid calc2()\n{\n\tsort(p+1,p+n+1);\n\tR(i,0,n+5) v[i]=0;\n\tint mny=1e9,mnyp=0,mxy=-1e9,mxyp=0,mxx=-1e9,mnx=1e9;\n\tR(i,1,n) \n\t{\n\t\tif(p[i].second<=mny) mny=p[i].second,mnyp=i;\n\t\tif(p[i].second>=mxy) mxy=p[i].second,mxyp=i;\n\t\tmxx=max(mxx,p[i].first);\n\t\tmnx=min(mnx,p[i].first);\n\t}\n\tLd[0]=1e9,Lu[0]=-1e9;\n\tRd[n+1]=1e9,Ru[n+1]=-1e9;\n\tR(i,1,n) Ld[i]=min(Ld[i-1],p[i].second),Lu[i]=max(Lu[i-1],p[i].second);\n\tL(i,1,n) Rd[i]=min(Rd[i+1],p[i].second),Ru[i]=max(Ru[i+1],p[i].second);\n\tif(mnyp>mxyp) swap(mnyp,mxyp);\n\tauto cc=[&](int x,int y)\n\t{\n\t\tif(x==1&&y==n) return 1ll*(p[y].first-p[x].first)*(mxy-mny);\n\t\treturn 1ll*(p[y].first-p[x].first)*(mxy-mny)+1ll*(max(Ru[y+1],Lu[x-1])-min(Rd[y+1],Ld[x-1]))*(mxx-mnx);\n\t};\n\tsolveofcalc2(1,mnyp,mxyp,n,cc);\n\tR(i,mxyp,n) ans=min(ans,v[i]);\n}\nint L1[N],L2[N],L3[N],L4[N];\nint q[N];\npair<int,int>pq[N];\ninline bool cmp(pair<int,int>x,pair<int,int>y)\n{\n\tif(!x.second&&!y.second) return x.first<y.first;\n\tif((!x.second)^(!y.second)) return !x.second;\n\tif(!x.first&&!y.first) return x.second<y.second;\n\tif(1ll*x.first*y.second!=1ll*y.first*x.second) return 1ll*x.first*y.second>1ll*y.first*x.second;\n\treturn x.first<y.first;\n}\ninline long long calc(pair<int,int>x,pair<int,int>y)\n{\n\treturn 1ll*x.first*y.first+1ll*x.second*y.second;\n}\n\nstruct segt\n{\n\tint rt[N<<2],nd;\n\tint ls[5555555],rs[5555555];\n\tpair<int,int> t[5555555];\n\tvoid build(int l,int r,int x)\n\t{\n\t\trt[x]=0;\n\t\tif(l==r) return;\n\t\tint mid=(l+r)>>1;\n\t\tbuild(l,mid,x<<1);\n\t\tbuild(mid+1,r,x<<1|1);\n\t}\t\n\tvoid init(int n)\n\t{\n\t\tR(i,0,nd) ls[i]=rs[i]=0,t[i]=pair<int,int>(0,0);\n\t\tnd=0;\n\t\tbuild(1,n,1);\n\t}\n\tvoid insert(int l,int r,pair<int,int> v,int &x)\n\t{\n\t\tif(!x) \n\t\t{\n\t\t\tx=++nd;\n\t\t\tt[x]=v;\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif(calc(t[x],pq[mid])>calc(v,pq[mid])) swap(t[x],v);\n\t\tif(calc(t[x],pq[l])>calc(v,pq[l])) insert(l,mid,v,ls[x]);\n\t\tif(calc(t[x],pq[r])>calc(v,pq[r])) insert(mid+1,r,v,rs[x]);\n\t}\n\tvoid insert(int p,int l,int r,pair<int,int> v,int x)\n\t{\n\t\tinsert(1,n,v,rt[x]);\n\t\tif(l==r) return;\n\t\tint mid=(l+r)>>1;\n\t\tif(p<=mid) insert(p,l,mid,v,x<<1);\n\t\telse insert(p,mid+1,r,v,x<<1|1);\n\t}\n\tvoid query(int p,int l,int r,int x)\n\t{\n\t\tif(!x) return;\n\t\tans=min(ans,calc(t[x],pq[p]));\n\t\tint mid=(l+r)>>1;\n\t\tif(p<=mid) query(p,l,mid,ls[x]);\n\t\tif(mid<p) query(p,mid+1,r,rs[x]);\n\t}\n\tvoid query(int L,int R,int l,int r,int x,int k)\n\t{\n\t\tif(L<=l&&r<=R) return query(k,1,n,rt[x]);\n\t\tint mid=(l+r)>>1;\n\t\tif(L<=mid) query(L,R,l,mid,x<<1,k);\n\t\tif(mid<R) query(L,R,mid+1,r,x<<1|1,k);\n\t}\n}st;\nvoid calc3()\n{\n\tint Mny=1e9,Mxy=-1e9;\n\tsort(p+1,p+n+1);\n\tR(i,1,n) Mny=min(Mny,p[i].second),Mxy=max(Mxy,p[i].second);\n\tint mny=Mxy,mxy=Mny;\n\tR(i,1,n) L1[i]=p[i].first-p[1].first,L2[i]=mxy-Mny,mxy=max(mxy,p[i].second);\n\tL(i,1,n) L3[i]=p[n].first-p[i].first,L4[i]=Mxy-mny,mny=min(mny,p[i].second);\n\tq[0]=0;\n\tR(i,1,n) q[i]=L2[i];\n\tsort(q+1,q+n+1);\n\tR(i,1,n) pq[i]=(L1[i]+L4[i]?pair<int,int>(L1[i],L4[i]):pair<int,int>(1,1));\n\tsort(pq+1,pq+n+1,cmp);\n\tst.init(n);\n\tR(i,1,n)\n\t{\n\t\tint p=lower_bound(q+1,q+n+1,L2[i])-q;\n\t\tst.insert(p,1,n,pair<int,int>(L2[i],L3[i]),1);\n\t\tp=lower_bound(q+1,q+n+1,Mxy-Mny-L4[i])-q;\n\t\tif(L1[i]||L4[i])\n\t\t{\n\t\t\tint pp=lower_bound(pq+1,pq+n+1,pair<int,int>(L1[i],L4[i]),cmp)-pq;\n\t\t\tif(p!=n+1) st.query(p,n,1,n,1,pp);\n\t\t}\n\t}\n}\nvoid solve()\n{\n\tans=1e18;\n\tcin>>n;\n\tR(i,1,n) cin>>p[i].first>>p[i].second;\n\tcalc1();\n\tR(i,1,n) swap(p[i].first,p[i].second);\n\tcalc1();\n\tR(i,1,n) swap(p[i].first,p[i].second);\n\tcalc2();\n\tcalc3();\n\tR(i,1,n) p[i].second=1e9-p[i].second;\n\tcalc3();\n\tcout<<ans<<'\\n';\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(NULL);\n\tint _;\n\tcin>>_;\n\twhile(_--) solve();\n\n}\n\n```\n\n",
        "postTime": 1663335738,
        "uid": 115779,
        "name": "\u6781\u5bd2\u795e\u51b0",
        "ccfLevel": 0,
        "title": "CF1470F"
    }
]
[
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a $O(m\\log m)$ \u7684\u66b4\u529b\u505a\u6cd5\n\n\u9996\u5148\u80fd\u591f\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u53ef\u4ee5\u4ea4\u6362\u7684\u6570\u5bf9 $(u,v)$\uff0c\u5982\u679c\u8d77\u59cb\u7684\u4f4d\u7f6e $v$ \u5728 $u$ \u524d\u9762\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4ea4\u6362\u662f\u6ca1\u6709\u610f\u4e49\u7684\n\n\u6240\u4ee5\u6bcf\u4e2a\u6570\u53ea\u4f1a\u548c\u540e\u9762\u7684\u4ea4\u6362\n\n\u518d\u4ed4\u7ec6\u601d\u8003\uff0c\u5982\u679c $p_i$ \u80fd\u591f\u4e00\u76f4\u6362\u5230 $p_j$\uff0c\u4e5f\u5c31\u662f\u8bf4 $p_i$ \u80fd\u591f\u548c $p_{i+1},p_{i+2},\\cdots,p_{j}$ \u4ea4\u6362\uff0c\u8ddf $p_{i+1}$ \u5230 $p_{j}$ \u7684\u987a\u5e8f\u65e0\u5173\n\n\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u7b97\u987a\u5e8f\u53d8\u6210 $p_{i+1}$ \u5230 $p_{j} $ \u7684\u987a\u5e8f\u6253\u4e71\uff0c\u4e5f\u4e0d\u5f71\u54cd $p_i$ \u7684\u4ea4\u6362\n\n\u6240\u4ee5\u6211\u4eec\u6309\u7167\u4f4d\u7f6e\u4ece\u5927\u5230\u5c0f\u6bcf\u4e2a\u6570\u8d2a\u5fc3\u5c3d\u91cf\u5411\u540e\u6362\u5373\u53ef \n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <algorithm>\n#define pb push_back\n#define maxn 300010\n#define ci const int \nusing namespace std;\n\nint n, m;\n\nint p[maxn], d[maxn];\n\ninline bool cmp (ci &u, ci &v) { return d[u] < d[v]; } \n\nvector<int> a[maxn]; \n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; ++i) scanf(\"%d\", &p[i]), d[p[i]] = i; \n    for (int i = 1; i <= m; ++i) {\n        int x, y; scanf(\"%d%d\", &x, &y);\n        a[x].pb(y); \n    }\n    for (int i = n - 1, u = p[i]; i; u = p[--i]) {\n        sort(a[u].begin(), a[u].end(), cmp);\n        for (auto it : a[u]) \n            if (d[it] == d[u] + 1) {\n                ++d[u]; --d[it]; \n            }\n    } cout << n - d[p[n]]; \n    return 0; \n}\n\n```",
        "postTime": 1555465753,
        "uid": 34531,
        "name": "DDOSvoid",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1136D \u3010Nastya Is Buying Lunch\u3011"
    },
    {
        "content": "upd(2022.11.19)\uff1a\u66f4\u65b0\u4e86latex\u548c\u90e8\u5206\u63cf\u8ff0\u3002\n## \u524d\u8a00\n\u4e00\u9053\u4e0d\u9519\u7684\u601d\u7ef4\u9898\uff0c\u4f46\u989c\u8272\u504f\u9ad8\u3002\n\n## \u9898\u610f\u7b80\u8ff0\n- \u6709\u4e00\u4e2a $1\\sim n$ \u7684\u6392\u5217\u3002\n- \u7ed9\u5b9a $m$ \u5bf9\u70b9\u5bf9 $(u,v)$\uff0c\u8868\u793a\u82e5 $u,v$ \u76f8\u90bb\uff0c\u4e14 $u$ \u5728 $v$ \u7684\u524d\u9762\uff0c\u5219\u53ef\u4ee5\u4ea4\u6362 $u,v$ \u7684\u4f4d\u7f6e\u3002\uff08\u4e0b\u6587\u79f0 $u$ \u53ef\u4ee5\u5f80\u540e\u8df3\uff0c\u6216 $v$ \u53ef\u4ee5\u5f80\u524d\u8df3\uff09\n- \u6c42\u6700\u540e\u4e00\u4e2a\u70b9\u6700\u591a\u53ef\u4ee5\u5f80\u524d\u8df3\u51e0\u6b65\u3002\n\n## \u9898\u76ee\u5206\u6790\n\u6211\u4eec\u5c06\u9664\u4e86 $n$ \u53f7\u70b9\uff08\u5373\u6700\u540e\u4e00\u4e2a\u70b9\uff09\u4ee5\u5916\u7684\u70b9\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u662f\u53ef\u4ee5\u8df3\u5230 $n$ \u53f7\u70b9\u540e\u9762\u7684\u70b9\uff08\u79f0\u4e3a**\u84dd\u70b9**\uff09\uff0c\u5176\u4ed6\u7684\u79f0\u4e3a**\u7ea2\u70b9**\u3002\n\n\u663e\u7136\uff0c\u9898\u76ee\u8981\u6c42\u7684\u5c31\u662f\u6700\u7ec8\u80fd\u8df3\u5230 $n$ \u53f7\u70b9\u540e\u9762\u7684\u84dd\u70b9\u7684\u4e2a\u6570\u3002\u6211\u4eec\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u4e00\u4e2a**\u6700\u53f3\u8fb9**\u7684\u84dd\u70b9\u8981\u8df3\u5230 $n$ \u53f7\u70b9\u540e\u9762\u53bb\uff0c\u5fc5\u5b9a\u8981\u5148\u8df3\u8fc7\u8fd9\u4e24\u4e2a\u70b9\u4e2d\u95f4\u7684\u6240\u6709\u7ea2\u70b9\uff0c\u5e76\u4e14\u4e2d\u95f4\u7684\u70b9\u65e2\u4e0d\u80fd\u8df3\u5230 $n$ \u53f7\u70b9\u540e\u9762\u53bb\uff08~~\u5b83\u4eec\u662f\u7ea2\u70b9\uff0c\u5b83\u4eec\u6ca1\u6709\u8d44\u683cqwq~~\uff09\uff0c\u4ed6\u4eec\u4e2d\u95f4\u7684\u524d\u540e\u5173\u7cfb\u4e5f\u4e0d\u91cd\u8981\u3002**\u6240\u4ee5\u53ea\u8981\u5224\u65ad\u6bcf\u4e2a\u84dd\u70b9\u80fd\u5426\u8df3\u8fc7\u4e2d\u95f4\u7684\u6240\u6709\u7ea2\u70b9**\u3002\n\n\u600e\u4e48\u6837\u5224\u65b9\u4fbf\u5462? \u6211\u4eec\u4ece\u540e\u5f80\u524d\u904d\u5386\uff0c\u8bb0\u5f55 $n$ \u53f7\u70b9\u548c\u5f53\u524d\u70b9\u4e4b\u95f4\u7684\u7ea2\u70b9\u4e2a\u6570 $cnt$\uff0c\u548c\u6bcf\u4e00\u4e2a\u6570\u80fd\u8df3\u8fc7\u8fd9\u4e4b\u95f4\u7ea2\u70b9\u7684\u4e2a\u6570 $num_i$\u3002\n\n- \u5982\u679c\u65b0\u904d\u5386\u5230\u4e00\u4e2a\u7ea2\u70b9\uff0c\u6211\u4eec\u5c06 $cnt \\gets cnt+1 $\uff0c\u5e76\u66f4\u65b0\u6240\u6709\u80fd\u8df3\u8fc7\u8fd9\u4e2a\u7ea2\u70b9\u7684\u70b9 $i$\uff0c\u5c06 $num_i\\gets num_i+1$\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u5173\u7cfb\u603b\u5171\u53ea\u6709 $m$ \u4e2a\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u662f\u5bf9\u7684\u3002\n\n- \u5982\u679c\u65b0\u904d\u5386\u5230\u4e00\u4e2a\u84dd\u70b9\uff0c\u6211\u4eec\u770b\u770b\u4ed6\u80fd\u4e0d\u80fd\u8df3\u5230 $n$ \u53f7\u70b9\u540e\u9762\u53bb\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u80fd\u4e0d\u80fd\u8df3\u8fc7\u5b83\u548c $n$ \u53f7\u70b9\u4e4b\u95f4\u7684\u6240\u6709\u7ea2\u70b9\uff08\u5373 ```num[i]==cnt``` \uff09\u3002\u5982\u679c\u53ef\u4ee5\uff0c$ans \\gets ans+1$\uff0c\u5e76\u9ed8\u8ba4\u628a\u5b83\u8d76\u5230 $n$ \u53f7\u70b9\u540e\u9762\u53bb\uff08\u8fd9\u6837\u4e0d\u4f1a\u6321\u4f4f\u540e\u9762\u84dd\u70b9\u7684\u8def\u5f84\uff09\uff1b\u5982\u679c\u4e0d\u884c\uff0c**\u5c31\u628a\u5b83\u53d8\u6210\u7ea2\u70b9**\uff0c\u5e76\u6267\u884c\u4e0a\u8ff0\u7ea2\u70b9\u7684\u64cd\u4f5c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n+m)$\u3002\n\n## \u4ee3\u7801\n```cpp\nint a[300005];\t//\u70b9\u7684\u7f16\u53f7\nvector<int> mp[300005];\t\t//\u5b58\u5173\u7cfb\uff0cmp[x]\u4e2d\u4e3a\u80fd\u8df3\u5230x\u540e\u9762\u7684\u6570\nbool blue[300005];\t//\u662f\u5426\u662f\u84dd\u70b9\uff08\u89c1\u4e0a\u6587\uff09\nint num[300005];\t//\uff08\u542b\u4e49\u89c1\u4e0a\u6587\uff09\nint mian()\n{\n\tint n=rd(),m=rd();\n\tfor(int i=1;i<=n;i++)\n\t\ta[i]=rd();\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u=rd(),v=rd();\n\t\tmp[v].push_back(u);\n\t\tif(v==a[n])\n\t\t\tblue[u]=1;\n\t}\n\tint ans=0;\n\tint cnt=0;\n\tfor(int i=n-1;i>=1;i--)   //\u4ece\u540e\u5f80\u524d\u904d\u5386\n\t{\n\t\tif(blue[a[i]])\n\t\t{\n\t\t\tif(num[a[i]]==cnt)  //\u53ef\u4ee5\u8df3\n\t\t\t\tans++;\t\n\t\t\telse\n\t\t\t\tblue[a[i]]=0;   //\u628a\u5b83\u53d8\u6210\u7ea2\u70b9\n\t\t}\n\t\tif(!blue[a[i]])\n\t\t{\n\t\t\tfor(int j=0;j<mp[a[i]].size();j++)   //\u66f4\u65b0\u6240\u6709\u70b9\u7684num\n\t\t\t{\n\t\t\t\tint v=mp[a[i]][j];\n\t\t\t\tnum[v]++;\n\t\t\t}\n\t\t\tcnt++;\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1646306142,
        "uid": 259300,
        "name": "hy233",
        "ccfLevel": 7,
        "title": "[Solution] CF1136D Nastya Is Buying Lunch"
    }
]
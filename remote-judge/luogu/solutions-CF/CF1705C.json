[
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u51fa\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s$\uff0c\u8fdb\u884c $c$ \u6b21\u590d\u5236\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u7ed9\u51fa $l$ \u548c $r$\uff0c\u5c06 $s_l$\uff0c$s_{l+1}$\uff0c\u00b7\u00b7\u00b7\uff0c$s_{r}$ \u63a5\u5728 $s$ \u540e\u9762\uff0c\u63a5\u7740\u6709 $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u6709\u4e00\u4e2a\u6570 $k$\uff0c\u8be2\u95ee $s_k$ \u662f\u4ec0\u4e48\u5b57\u7b26\u3002\n\n# \u5206\u6790\n\n\u9996\u5148\u770b\u4e00\u4e0b\u6570\u636e\u8303\u56f4\uff1a$1\\le l\\le r\\le 10^{18}$\uff0c$1\\le k\\le 10^{18}$\u3002\n\n\u8fd9\u4e48\u5927\u7684\u8303\u56f4\uff0c\u6570\u7ec4\u80af\u5b9a\u5f00\u4e0d\u4e0b\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u53d1\u73b0\u5176\u4e2d\u7684\u89c4\u5f8b\uff1a\u53d8\u5316\u540e\u7684\u5b57\u7b26\u4e32\u6bcf\u4e2a\u5b57\u7b26\u90fd\u5728\u539f\u5e8f\u5217\u4e2d\u51fa\u73b0\u8fc7\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5bfb\u627e\u8fdb\u884c\u51e0\u6b21\u590d\u5236\u64cd\u4f5c\uff08\u8bbe\u4e3a $i$ \u6b21\uff09\u540e\u53ef\u4ee5\u5230\u8fbe $k$ \u8fd9\u4e48\u5927\u7684\u4e0b\u6807\uff0c\u8fd9\u65f6 $a_k$ \u5c31\u7b49\u4e8e $a_{l_i+k-sum_{i-1}-1}$\uff08$sum_i$ \u6307\u8fdb\u884c $i$ \u6b21\u64cd\u4f5c\u540e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff09\uff0c\u5982\u6b64\u9012\u5f52\u4e0b\u53bb\uff0c\u5373\u53ef\u5c06 $k$ \u7f29\u5c0f\u5230 $[1,n]$\uff0c\u76f4\u63a5\u5c31\u53ef\u8f93\u51fa\u3002\n\n\u53e6\u5916\uff0c\u56e0\u4e3a\u6570\u636e\u8303\u56f4\u8fbe\u5230\u4e86 $10^{18}$\uff0c\u6240\u4ee5\u8981\u5f00 long long\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nstruct node {\n\tint l, r;\n}ch[42];\nint t, n, sum[42], k, c, q; \nchar a[200010];\nint query(int m) {\n\tif (m <= n) //\u5230\u8fbe 1 ~ n \u7684\u8303\u56f4\n\t\treturn m;\n\tint z = lower_bound(sum + 1, sum + c + 1, m) - sum;//\u5bfb\u627ei\n\tif (sum[z] > m) {\n\t\tz--;\n\t\treturn query(m - sum[z] + ch[z + 1].l - 1);//\u9012\u5f52\u67e5\u8be2\n\t}\n\treturn query(ch[z].r);//\u6b63\u597d\u662f\u53f3\u8fb9\u754c\u3002\n}\nsigned main () {\n\tcin >> t;\n\twhile (t--) {\n\t\tcin >> n >> c >> q;\n\t\tcin >> a + 1;\n\t\tsum[0] = n;\n\t\tfor (int i = 1; i <= c; i++)\n\t\t\tcin >> ch[i].l >> ch[i].r, sum[i] = sum[i - 1] + ch[i].r - ch[i].l + 1;//\u8bfb\u5165\u53ca\u9884\u5904\u7406\n\t\twhile (q--) {\n\t\t\tcin >> k;\n\t\t\tcout << a[query(k)] << \"\\n\";\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1657939555,
        "uid": 663517,
        "name": "Jeremiahy",
        "ccfLevel": 0,
        "title": "CF1705C Mark and His Unfinished Essay \u9898\u89e3"
    },
    {
        "content": "\u6211\u7684\u4ee3\u7801\u7b97\u77ed\u7684\u4e86\u3002\n### \u601d\u8def\uff1a\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4efb\u4f55\u4e00\u4e2a\u65b0\u589e\u7684\u5b57\u7b26\uff0c\u90fd\u662f\u7531\u4e4b\u524d\u7684\u5b57\u7b26\u590d\u5236\u8fc7\u6765\u7684\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u4e2a\u529e\u6cd5\uff0c\u8ba9\u4e00\u4e2a\u65b0\u589e\u7684\u4f4d\u7f6e\u56de\u6eaf\u5230\u539f\u5b57\u7b26\u4e32\u4e2d\u7684\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u590d\u5236\u7684\u6b21\u6570\u975e\u5e38\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5~~\u4e71\u641e~~**\u4ece\u540e\u5f80\u524d**\u904d\u5386\u6bcf\u6b21\u590d\u5236\u64cd\u4f5c\u3002\uff08\u4e0d\u80fd\u4ece\u524d\u5f80\u540e\u904d\u5386\uff0c\u4e0d\u7528\u6211\u8d58\u8ff0\u3002\uff09\n\n\u5982\u679c\u6211\u4eec\u6240\u6c42\u7684\u76ee\u6807\u4f4d\u7f6e\u5728\u7c98\u8d34\u533a\u95f4\u5185\uff0c\u5c31\u56de\u6eaf\u5230\u539f\u533a\u95f4\u7684\u5bf9\u5e94\u4f4d\u7f6e\u3002\n\n\u4e0d\u65ad\u56de\u6eaf\uff0c\u5c31\u53ef\u4ee5\u627e\u5230\u7b54\u6848\u3002\n### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint t,n,c,q,x,y,len,l[45],r[45],cha[45];\nchar a[200010];\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0),cout.tie(0);\n\tcin>>t;\n\twhile(t--){\n\t\tcin>>n>>c>>q;\n\t\tfor(int i=1;i<=n;i++) cin>>a[i];\n\t\tlen=n;\n\t\tfor(int i=1;i<=c;i++){\n\t\t\tcin>>l[i]>>r[i];\n\t\t\tcha[i]=len-l[i]+1;//\u6bcf\u4e2a\u7c98\u8d34\u7684\u4f4d\u7f6e\u548c\u5176\u5bf9\u5e94\u7684\u539f\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5dee\u503c\u662f\u4e00\u5b9a\u7684\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u5dee\u503c\u8bb0\u4e0b\u6765\u3002\n\t\t\tlen+=r[i]-l[i]+1;\n\t\t}\n\t\twhile(q--){\n\t\t\tcin>>x;\n\t\t\tfor(int i=c;i;i--) if(x>=l[i]+cha[i]&&x<=r[i]+cha[i]) x-=cha[i];//\u51cf\u53bb\u5dee\u503c\uff0c\u56de\u6eaf\u5230\u5bf9\u5e94\u4f4d\u7f6e\u3002\n\t\t\tcout<<a[x]<<endl;\n\t\t}\n\t}\n\treturn 0;\n} \n```\n",
        "postTime": 1658122522,
        "uid": 477118,
        "name": "Noby_Gld",
        "ccfLevel": 0,
        "title": "CF1705C Mark and His Unfinished Essay"
    },
    {
        "content": "# CF1705C Mark and His Unfinished Essay\n\n\u3010\u9898\u76ee\u5927\u610f\u3011\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e0d\u8d85\u8fc7 $2\\times 10^5$ \u7684\u539f\u4e32\uff0c\u8fdb\u884c\u4e0d\u8d85\u8fc7 $40$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u628a\u5b57\u7b26\u4e32\u7684 $[l,r]$ \u533a\u95f4\u590d\u5236\u5e76\u62fc\u63a5\u5230\u5b57\u7b26\u4e32\u672b\u5c3e\u3002\u6700\u540e\u6709\u4e0d\u8d85\u8fc7 $10^4$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u6700\u7ec8\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u7684\u7b2c $x$ \u4e2a\u5b57\u7b26\u3002\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u5982\u679c\u6a21\u62df\u62fc\u63a5\u5b57\u7b26\u4e32\u7684\u8fc7\u7a0b\uff0c\u5728\u6781\u9650\u60c5\u51b5\u4e0b\u6700\u7ec8\u7684\u4e32\u957f\u5ea6\u53ef\u4ee5\u8fbe\u5230 $2\\times 10^{17}$\uff0c\u65e0\u8bba\u662f\u65f6\u95f4\u8fd8\u662f\u7a7a\u95f4\u90fd\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\u3002\u4e0d\u8fc7\u4ece\u9898\u610f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u6b21\u590d\u5236\u662f\u5728\u524d\u9762\u590d\u5236\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u53ea\u8bb0\u5f55\u6bcf\u6b21\u590d\u5236\u524d\u9762\u5b57\u7b26\u4e32\u7684 $[l,r]$\uff0c\u8bb0\u5f55\u6bcf\u6b21\u5b8c\u6210\u4fee\u6539\u540e\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u67e5\u8be2\u65f6\u5f80\u524d\u8df3\u5373\u53ef\u3002\n\n\u5177\u4f53\u5730\uff0c\u9996\u5148\u5728\u8bb0\u5f55\u6bcf\u6b21\u4fee\u6539\u540e\u7684\u4e32\u957f\u6570\u7ec4\u4e2d\u4e8c\u5206\u51fa\u8be2\u95ee\u7684\u5750\u6807 $x$ \u662f\u5728\u54ea\u6b21\u64cd\u4f5c\u540e\u4ea7\u751f\u7684\uff0c\u7136\u540e\u901a\u8fc7\u8bb0\u5f55\u7684 $[l,r]$ \u63a8\u7b97\u51fa\u5bf9\u5e94\u7684\u5750\u6807 $x$ \u5728\u8fd9\u6b21\u64cd\u4f5c\u524d\u7684\u5b57\u7b26\u4e32\u4e2d\u5bf9\u5e94\u7684\u5750\u6807\uff0c\u8fd9\u6837\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u5b50\u95ee\u9898\uff0c\u53ef\u4ee5\u8fed\u4ee3\u6216\u9012\u5f52\u6c42\u89e3\u3002\u5355\u6b21\u8be2\u95ee\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(c\\log c)$\u3002\u5177\u4f53\u5b9e\u73b0\u6709\u4e00\u4e9b\u7ec6\u8282\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u5b9e\u73b0\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=50;\nstring str;int s[N];\npair<int,int> ch[N];\nchar solve(int lim, int x){\n    int pos=lower_bound(s+1,s+1+lim,x)-s-1;\n    int nxt=x-s[pos]+ch[pos].first-1;\n    if (pos==0) return str[nxt];\n    return solve(pos-1,nxt);\n}\nsigned main(){\n    int t;cin>>t;\n    while (t--){\n        int n,c,q;cin>>n>>c>>q;\n        ch[0].first=1,ch[0].second=n;\n        cin>>str;str='0'+str;s[1]=n;\n        for (int i=1;i<=c;i++){\n            cin>>ch[i].first>>ch[i].second;\n            s[i+1]=s[i]+ch[i].second-ch[i].first+1;\n        }\n        for (int i=1;i<=q;i++){\n            int x;cin>>x;cout<<solve(c,x)<<endl;\n        }\n    }\n    return 0;\n}\n```\n\n\n\n",
        "postTime": 1658110278,
        "uid": 574568,
        "name": "Dr_Gilbert",
        "ccfLevel": 7,
        "title": "CF1705C Mark and His Unfinished Essay"
    },
    {
        "content": "\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff08\u60b2\uff09\n\n\u9996\u5148\u8bfb\u9898\uff1a\n\n>One night, Mark realized that there is an essay due tomorrow. He hasn't written anything yet, so Mark decided to randomly copy-paste substrings from the prompt to make the essay.\n\n\u53ef\u4ee5\u53d1\u73b0 Mark \u975e\u5e38\u7684\u5f3a\uff08\u96fe\uff09\u5c45\u7136\u901a\u8fc7\u66b4\u529b\u4e71\u641e\u6765\u5b8c\u6210\u4ed6\u7684~~\u6da6~~\u6587\u3002\n\n\u7136\u540e\u5eb7\u4e00\u773c\u6570\u636e\u8303\u56f4\n\n$ 1\\leq n\\leq 2\\cdot 10^5$ \uff0c$c\\leq 40$  \n\n$ 1\\leq q\\leq 10^4 $ \uff0c$ 1\\leq l\\leq r\\leq 10^{18} $ \uff0c$ 1\\leq k\\leq 10^{18} $\n\n\n\u53d1\u73b0 $l,r$ \u7684\u8303\u56f4\u5f88\u5927\uff0c\u5982\u679c\u7528\u76f4\u63a5\u6a21\u62df\u590d\u5236\u64cd\u4f5c\u5b57\u7b26\u4e32\u957f\u5ea6\u53ef\u4ee5\u8fbe\u5230 $10^{18}$ \u7ea7\u522b\uff0c\u65f6\u95f4\u548c\u7a7a\u95f4\u90fd\u4f1a\u7206\uff09\n\n\u4e0d\u80fd\u76f4\u63a5\u590d\u5236\u5b57\u7b26\u4e32\u6a21\u62df\uff0c\u53d1\u73b0 $c\\leq 40$ \uff0c\u4e0d\u662f\u4e00\u822c\u7684\u5c0f\u3002\u8003\u8651\u628a\u6bcf\u6b21\u590d\u5236\u64cd\u4f5c\u5b58\u4e0b\u6765\u3002\n\n\u81ea\u7136\u5730\u60f3\u5230\u67e5\u8be2\u65f6\u53ef\u4ee5\u5148\u5bfb\u627e\u5728\u7b2c\u51e0\u6b21\u64cd\u4f5c\u540e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u624d\u80fd\u5927\u4e8e\u7b49\u4e8e\uff0c\u66b4\u529b\u626b\u63cf\u6bcf\u6b21\u590d\u5236\u540e\u7684\u957f\u5ea6\u5373\u53ef $k$\u3002\n\n\u7136\u540e\u6bcf\u6b21\u590d\u5236\u64cd\u4f5c\u7684 $l,r$ \u90fd\u4e0d\u4f1a\u8d85\u8fc7\u4e4b\u524d\u64cd\u4f5c\u540e\u5b57\u7b26\u4e32\u7684\u603b\u957f\u5ea6\uff0c\u5e76\u4e14\u5b57\u7b26\u4e32\u957f\u5ea6\u589e\u52a0\u7684 $r-l+1$ \u662f\u7531\u5148\u524d\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\u590d\u5236\u6765\u7684\uff0c\u6240\u4ee5\u67e5\u627e\u5f53\u524d\u4f4d\u7f6e\u5728\u4e0a\u4e00\u6b21\u590d\u5236\u64cd\u4f5c\u7684 \u201c\u590d\u5236\u6e90\u201d \u7684\u4f4d\u7f6e\u3002\n\n\u91cd\u590d\u6267\u884c\uff0c\u4e00\u76f4\u5230\u4e0b\u6807\u5728\u539f\u59cb\u5b57\u7b26\u4e32\u957f\u5ea6\u5185\uff0c\u5c31\u662f Mark \u6700\u5f00\u59cb\u590d\u5236\u7684\u90a3\u4e2a\u5b57\u7b26\u3002\n\n\uff08\u90a3\u4e2a\u5b57\u7b26\u7ecf\u8fc7\u4e86 Mark  \u5947\uff08\u6b8b\uff09\u5999 \uff08\u66b4\uff09\u4e71\u641e\u64cd\u4f5c\u540e\u5c45\u7136\u88ab\u590d\u5236\u5230\u4e86\u8bba\u6587\u7684\u90a3\u4e48\u540e\u9762\uff0c\u5341\u5206\u7684\u5947\u5999\uff09\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(cq)$ \uff0c\u770b\u8d77\u6765\u786e\u5b9e\u5f88\u5bf9\uff09\n\n\u601d\u8003\uff0c\u4ee3\u7801\u5e76\u4e0d\u96be\uff0c\u9700\u8981\u6ce8\u610f\u5b58\u50a8\u65f6\u8981\u4f7f\u7528 `long long` \u4ee5\u53ca\u9012\u5f52\u6c42\u89e3\u7684\u5199\u6cd5\u3002\n\n\u4e0b\u9762\u662f\u53c2\u8003\u4ee3\u7801\uff0c\u6709\u4e00\u4e9b\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\u6ce8\u91ca\u3002\n\n\n------------\n\n\n\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <math.h>\n#include <algorithm>\nconst int N=2e5+15;\nusing namespace std;\ntypedef long long ll;\n\nint t,c,q;\nll len[45],cp[45][2];\nchar a[N];\n\nvoid solve(ll x){  / /\u9012\u5f52\u6c42\u89e3\uff0cx \u8868\u793a\u8fd9\u6b21\u8be2\u95ee\u5728\u4e4b\u524d\u90a3\u6b21\u64cd\u4f5c\u65f6\u7684\u4e0b\u6807\n\tint pt=0;\n\tif(x<=len[0]){printf(\"%c\\n\",a[x-1]);return;}\n\twhile(len[pt]<x) ++pt;  //\u6ca1\u6709\u5fc5\u8981\u4e8c\u5206\u67e5\u627e\n\tx-=len[--pt];  //\u51cf\u53bb\u5148\u524d\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\n\tsolve(cp[pt+1][0]-1+x);  //\u5b57\u7b26\u4e32 s \u7c98\u8d34\u4f4d\u7f6e\u7684\u5b57\u7b26=\u5bf9\u5e94\u590d\u5236\u4f4d\u7f6e\u7684\u5b57\u7b26\n\treturn;\n}\n\nint main(){\n\tscanf(\"%d\",&t);\n\twhile(t--){\n\t\tscanf(\"%lld%d%d%s\",&len[0],&c,&q,a);\n\t\tfor(ll i=1;i<=c;++i)\n\t\t\tscanf(\"%lld%lld\",&cp[i][0],&cp[i][1]),len[i]=len[i-1]+cp[i][1]-cp[i][0]+1; \n            \t//\u8f93\u5165\u65f6\u5b58\u50a8\u5de6\uff0c\u53f3\u7aef\u70b9\uff0c\u987a\u4fbf\u5904\u7406\u957f\u5ea6\n                \n\t\twhile(q--){\n\t\t\tll k;scanf(\"%lld\",&k);\n\t\t\tsolve(k);\n\t\t\t\n\t\t}\n\t}\n\n\treturn 0;\n}\n```\n\n",
        "postTime": 1659080162,
        "uid": 411778,
        "name": "aleksey_RoFtaCD",
        "ccfLevel": 0,
        "title": "CF1705C Mark and His Unfinished Essay \u9898\u89e3"
    },
    {
        "content": "### 1 \u89c6\u9891\u9898\u89e3\n\n![](bilibili:BV1ud4y1Q7f5)\n\n### 2 \u601d\u8def\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u53ea\u8981\u77e5\u9053\u4e86\u64cd\u4f5c\u4e00\u6b21\u540e\u8981\u6c42\u7684\u4f4d\u7f6e\uff0c\u5c31\u80fd\u591f\u901a\u8fc7\u5b83\u53cd\u5411\u63a8\u65ad\u51fa\uff0c\u64cd\u4f5c\u524d\u7684\u5bf9\u5e94\u4f4d\u7f6e\u3002\n\n\u56e0\u4e3a $c$ \u7279\u522b\u5c0f\uff0c\u4f46\u662f $l$ \u548c $r$ \u90fd\u7279\u522b\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4e00\u6b65\u6b65\u6a21\u62df\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u8bbe\u64cd\u4f5c $i$ \u6b21\u540e\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a $cnt[i]$\uff0c\u8981\u6c42\u7684\u4f4d\u7f6e\u4e3a $x$\uff0c\u90a3\u4e48\u64cd\u4f5c $i-1$ \u6b21\u524d\uff0c\u5bf9\u5e94\u7684\u4f4d\u7f6e\u5c31\u662f $x-cnt[i-1]+l[i]-1$\u3002\n\n\u6a21\u62df\u5373\u53ef\u3002\n\n### 3 \u4ee3\u7801\u4e0e\u8bb0\u5f55\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\n#define max_n 200000\nint t;\nint n;\nint c;\nint q;\nchar s[max_n+2];\nlong long l[42];\nlong long r[42];\nlong long cnt[42];\nint main(){\n\t#ifndef ONLINE_JUDGE\n\tfreopen(\"CF1705C_1.in\",\"r\",stdin);\n\tfreopen(\"CF1705C_1.out\",\"w\",stdout);\n\t#endif\n\tscanf(\"%d\",&t);\n\twhile(t--){\n\t\tscanf(\"%d%d%d%s\",&n,&c,&q,s+1);\n\t\tfor(int i=1;i<=c;++i)scanf(\"%lld%lld\",l+i,r+i);\n\t\tcnt[0]=n;\n\t\tfor(int i=1;i<=c;++i)cnt[i]=cnt[i-1]+(r[i]-l[i]+1);\n\t\tfor(int i=1;i<=q;++i){\n\t\t\tlong long x;\n\t\t\tscanf(\"%lld\",&x);\n\t\t\tfor(int j=c;j>=1;--j){\n\t\t\t\tif(cnt[j-1]<x&&x<=cnt[j])x=x-cnt[j-1]+l[j]-1;\n\t\t\t}\n\t\t\tprintf(\"%c\\n\",s[x]);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n[\u8bb0\u5f55\u4f20\u9001\u95e8](https://www.luogu.com.cn/record/80111603)\n\nBy **dengziyue**",
        "postTime": 1658135469,
        "uid": 387840,
        "name": "happy_dengziyue",
        "ccfLevel": 6,
        "title": "CF1705C\u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\n\n\u9996\u5148\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5176\u4e2d\u7ef4\u62a4 $l,r,len$\uff0c\u8868\u793a\u6bcf\u4e00\u6b21\u64cd\u4f5c\u8f93\u5165\u7684 $l$ \u548c $r$\uff0c\u4ee5\u53ca $s_l \\sim s_r$  \u7684\u957f\u5ea6\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u4fee\u6539\u64cd\u4f5c\uff0c\u6211\u4eec\u5c06\u65b0\u7684\u4fe1\u606f\u52a0\u5165\u7ed3\u6784\u4f53\u4e2d\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u67e5\u8be2\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff1a$\\operatorname{f}(x)$\u3002\u5b83\u7684\u4f5c\u7528\u662f\uff1a\u67e5\u8be2\u5728\u65b0\u7684\u5b57\u7b26\u4e32\u4e2d\u4e0b\u6807\u4e3a $x$ \u7684\u5b57\u7b26\u5bf9\u5e94\u5728\u539f\u5b57\u7b26\u4e32\u4e2d\u7684\u4e0b\u6807\u4f4d\u7f6e\u3002\n\n\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u901a\u8fc7\u9012\u5f52\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\uff0c\u6211\u4eec\u6309\u7167\u63d2\u5165\u7684\u987a\u5e8f\u6765\u8ba1\u7b97 $x$ \u5e94\u5728\u7684\u4f4d\u7f6e\uff1a\n\n```cpp\ninline int f(int x){\n\tfor (int i = 1;i <= idx;i++){\n\t\tif (x <= arr[i].len){//\u5982\u679c x <= arr[i].len \u8bf4\u660e\u4e86 x \u4e00\u5b9a\u5728 arr[i].l ~ arr[i].r \u8fd9\u4e2a\u533a\u95f4\u4e2d \n\t\t\tint t;\n\t\t\t/*\n\t\t\t\u6211\u4eec\u5148\u5047\u8bbe\u5f53\u524d\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u80fd\u591f\u7b26\u5408\u6761\u4ef6\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u5e94\u8be5\u8fd4\u56de\u7684\u4e0b\u6807\u4e0d\u5c31\u5e94\u8be5\u4e3a\uff1aarr[i].l + x - 1 \u5417\uff1f\n\t\t\t\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u6211\u4eec arr[i].l + x - 1 \u4e5f\u662f\u6709\u53ef\u80fd\u4e0d\u5728\u539f\u5b57\u7b26\u4e32\u533a\u95f4\u4e2d\u7684\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u5fc5\u987b\u7ee7\u7eed\u9012\u5f52\u4e0b\u53bb \n\t\t\t*/\n\t\t\tif (arr[i].l + x - 1 > n) t = f(arr[i].l + x - 1);//\u9012\u5f52 \n\t\t\telse t = arr[i].l + x - 1;//\u6210\u7acb \n\t\t\treturn t;//\u8fd4\u56de \n\t\t}\n\t\telse x -= arr[i].len;//\u8bf4\u660e x \u4e00\u5b9a\u4e0d\u5728 arr[i].l ~ arr[i].r \u533a\u95f4\u4e2d \n\t}\n}\n```\n\n# code\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\n#define re register\n\nusing namespace std;\n\nconst int N = 1e4 + 10;\nint T,n,q,Q,idx;\nstring s;\n\nstruct node{\n\tint l;\n\tint r;\n\tint len;\n}arr[N];\n\ninline int f(int x){\n\tfor (int i = 1;i <= idx;i++){\n\t\tif (x <= arr[i].len){//\u5982\u679c x <= arr[i].len \u8bf4\u660e\u4e86 x \u4e00\u5b9a\u5728 arr[i].l ~ arr[i].r \u8fd9\u4e2a\u533a\u95f4\u4e2d \n\t\t\tint t;\n\t\t\t/*\n\t\t\t\u6211\u4eec\u5148\u5047\u8bbe\u5f53\u524d\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u80fd\u591f\u7b26\u5408\u6761\u4ef6\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u5e94\u8be5\u8fd4\u56de\u7684\u4e0b\u6807\u4e0d\u5c31\u5e94\u8be5\u4e3a\uff1aarr[i].l + x - 1 \u5417\uff1f\n\t\t\t\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u6211\u4eec arr[i].l + x - 1 \u4e5f\u662f\u6709\u53ef\u80fd\u4e0d\u5728\u539f\u5b57\u7b26\u4e32\u533a\u95f4\u4e2d\u7684\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u5fc5\u987b\u7ee7\u7eed\u9012\u5f52\u4e0b\u53bb \n\t\t\t*/\n\t\t\tif (arr[i].l + x - 1 > n) t = f(arr[i].l + x - 1);//\u9012\u5f52 \n\t\t\telse t = arr[i].l + x - 1;//\u6210\u7acb \n\t\t\treturn t;//\u8fd4\u56de \n\t\t}\n\t\telse x -= arr[i].len;//\u8bf4\u660e x \u4e00\u5b9a\u4e0d\u5728 arr[i].l ~ arr[i].r \u533a\u95f4\u4e2d \n\t}\n}\n\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin >> T;\n\twhile (T--){\n\t\tidx = 0;\n\t\tcin >> n >> q >> Q >> s;\n\t\ts = ' ' + s;\n\t\tarr[++idx] = {1,n,n};\n\t\twhile (q--){\n\t\t\tint l,r;\n\t\t\tcin >> l >> r;\n\t\t\tarr[++idx] = {l,r,r - l + 1};\n\t\t}\n\t\twhile (Q--){\n\t\t\tint x;\n\t\t\tcin >> x;\n\t\t\tint t = f(x);\n\t\t\tcout << s[t] << endl;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1676977100,
        "uid": 383395,
        "name": "WaterSun",
        "ccfLevel": 5,
        "title": "[\u9898\u89e3]CF1705C Mark and His Unfinished Essay"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32 $s$\uff0c\u4ee5\u53ca $c$ \u6b21 copy \u64cd\u4f5c\uff0c$q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21 copy \u64cd\u4f5c\u7ed9\u51fa\u4e00\u4e2a\u533a\u95f4 $[l, r]$\uff0c\u5c06 $s[l, r]$ \u8fd9\u4e2a\u5b50\u4e32\u62fc\u63a5\u5230\u539f\u4e32\u540e\u9762\u6784\u6210\u65b0\u4e32 $s$\uff0c$c$ \u6b64\u64cd\u4f5c\u540e\u6709 $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u8f93\u51fa\u6307\u5b9a\u4f4d\u7f6e\u7684\u5b57\u7b26\u3002\n\n## \u601d\u8def\u5206\u6790\n\n\u7531\u4e8e\u8fd9\u4e2a\u5b57\u7b26\u4e32\u6700\u7ec8\u4f1a\u975e\u5e38\u957f\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u4fdd\u5b58\u4e0b\u6765\u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\u90fd\u9700\u8981\u5411\u524d\u627e\u5230\u5b83\u6700\u521d\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u6b21\u8be2\u95ee\u627e\u51fa\u4ed6\u662f\u4ece\u54ea\u4e00\u6bb5\u590d\u5236\u8fc7\u6765\u7684\u3002\n\n\u627e\u4e4b\u524d\u53ef\u4ee5\u5148\u7ef4\u62a4\u524d $i$ \u6b21\u64cd\u4f5c\u540e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 $sum[i]$\uff0c\n\n$sum$ \u6570\u7ec4\u5f88\u597d\u5f97\u51fa\uff0c\u6bcf\u6b21 copy \u64cd\u4f5c\u65f6\uff1a $sum[i]=sum[i-1]+(r-l+1)$ \u5373\u53ef\u3002 \n\n\u8fd9\u6837\u627e\u7684\u8fc7\u7a0b\u5176\u5b9e\u5c31\u662f\u4e2a\u4e8c\u5206\u7684\u8fc7\u7a0b\uff0c\u4e8c\u5206\u627e\u5230\u5f53\u524d\u4f4d\u7f6e\u662f\u4ece\u7b2c\u51e0\u6b21 copy \u5f97\u5230\u7684\uff0c\n\n\u4e4b\u540e\u5c31\u8ba1\u7b97\u51fa\u5b83\u5411\u524d\u7684\u4f4d\u7f6e\uff0c\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u5f53\u524d\u4f4d\u7f6e\u843d\u5165\u5728\u8f93\u5165\u5b57\u7b26\u4e32\u8303\u56f4\u5185\u3002",
        "postTime": 1675235942,
        "uid": 807853,
        "name": "I_am_AKed_by_NOI",
        "ccfLevel": 0,
        "title": "CF1705C \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32 $s_0$\uff0c\u4ee5\u53ca $c$ \u6b21\u64cd\u4f5c\u3002\u7b2c $i$ \u64cd\u4f5c\u90fd\u4f1a\u4ece\u4e0a\u6b21\u64cd\u4f5c\u5f97\u5230\u7684\u7ed3\u679c\u4e32\u4e2d\uff0c\u9009\u62e9 $s_{i-1_{[l, r]}}$ \u8303\u56f4\u5185\u7684\u5b50\u4e32\uff0c\u590d\u5236\u7c98\u8d34\u5230\u4e0a\u6b21\u7ed3\u679c\u4e32\u7684\u672b\u5c3e\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u4e32 $s_i$\u3002\u7ecf\u5386\u5b8c $c$ \u6b21\u64cd\u4f5c\u4e4b\u540e\uff0c\u4f1a\u5f97\u5230\u4e00\u4e2a\u6700\u7ec8\u4e32 $s_c$\u3002\n\n\u6709 $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u6307\u5b9a\u4e00\u4e2a\u4f4d\u7f6e $x$\uff0c\u8be2\u95ee $s_c$ \u7684\u7b2c $x$ \u4e2a\u5b57\u7b26\u662f\u4ec0\u4e48\u3002\n\n$n \\leq 2 \\times 10^5$\uff0c$c \\leq 40$\uff0c$q \\leq 1 \\times 10^4$\u3002\n\n## \u5206\u6790\n\n\u7b2c $i$ \u6b21\u64cd\u4f5c\u7684\u6781\u9650\u60c5\u51b5\uff0c\u662f\u628a $s_{i-1}$ \u5b8c\u6574\u7684\u590d\u5236\u7c98\u8d34\u4e00\u904d\u3002\u4e8e\u662f\uff0c$c$ \u6b21\u64cd\u4f5c\u4e4b\u540e\uff0c$s_c$ \u7684\u957f\u5ea6\u53ef\u9ad8\u8fbe $n * 2^{40}$\u3002\u6545\u66b4\u529b\u6a21\u62df\u662f\u4e0d\u53ef\u884c\u7684\u3002\n\n\u8bb0\u5f55\u4e0b\u6bcf\u6b21\u64cd\u4f5c\u7684\uff1a$l$\uff0c$r$\uff0c\u65b0\u751f\u6210\u7684\u4e32\u7684\u5de6\u53f3\u7aef\u70b9 $L$\uff0c\u4ee5\u53ca $R$\u3002\u90a3\u4e48\uff0c\u6bcf\u6b21\u64cd\u4f5c\uff0c\u90fd\u4f1a\u628a\u4e0a\u4e00\u4e2a\u4e32\u7684\u7b2c $r$ \u4e2a\u4f4d\u7f6e\u590d\u5236\u5230\u65b0\u4e32\u7684 $R$ \u4f4d\u7f6e\uff0c$r-1$ \u590d\u5236\u5230 $R-1$ \u7684\u4f4d\u7f6e\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c$l$ \u590d\u5236\u5230 $R - (r - l) = L$ \u7684\u4f4d\u7f6e\u3002\u8bbe $d = R - r = L - l$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u6b21\u64cd\u4f5c\u65b0\u751f\u6210\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e $x$\uff0c\u90fd\u4e0e $x - d$ \u7684\u4f4d\u7f6e\u4e0a\u7684\u5b57\u7b26\u76f8\u540c\u3002\n\n\u4ee5\u6837\u4f8b\u5206\u6790\u3002\u7b2c\u4e00\u7ec4\u6837\u4f8b\uff0c\u4e00\u5171\u6709\u4e09\u6b21\u64cd\u4f5c\u3002\u539f\u59cb\u4e32\u7528\u539f\u8272\u8868\u793a\uff0c\u540e\u9762\u4e09\u4e2a\u751f\u6210\u7684\u4e32\u5206\u522b\u7528\u7ea2\u7eff\u84dd\u8868\u793a\u3002\n\n| 1 | 2 | 3 | 4 | $\\color{red}{\\text{5}}$ | $\\color{red}{\\text{6}}$ | $\\color{red}{\\text{7}}$ | $\\color{red}{\\text{8}}$ | $\\color{green}{\\text{9}}$ | $\\color{green}{\\text{10}}$ | $\\color{green}{\\text{11}}$ | $\\color{blue}{\\text{12}}$ | $\\color{blue}{\\text{13}}$ | $\\color{blue}{\\text{14}}$ | $\\color{blue}{\\text{15}}$ | $\\color{blue}{\\text{16}}$ | $\\color{blue}{\\text{17}}$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|\n| m | a | r | k | $\\color{red}{\\text{m}}$ | $\\color{red}{\\text{a}}$ | $\\color{red}{\\text{r}}$ | $\\color{red}{\\text{k}}$ | $\\color{green}{\\text{m}}$ |  $\\color{green}{\\text{a}}$ |  $\\color{green}{\\text{r}}$ | $\\color{blue}{\\text{r}}$ |  $\\color{blue}{\\text{k}}$ |  $\\color{blue}{\\text{m}}$ |  $\\color{blue}{\\text{a}}$ |  $\\color{blue}{\\text{r}}$ |  $\\color{blue}{\\text{k}}$ |\n\n1. \u82e5\u8be2\u95ee\u6700\u7ec8\u4e32\u7684\u7b2c $10$ \u4e2a\u5b57\u6bcd\uff0c\u53d1\u73b0\u4f4d\u7f6e $10$ \u5b9e\u5728\u7b2c\u4e8c\u6b21\u64cd\u4f5c\uff08\u7eff\u8272\u90e8\u5206\uff09\u751f\u6210\u7684\uff0c\u8fd9\u6b21\u64cd\u4f5c\u7684 $d = 11 - 7 = 9 - 5 = 4$\uff0c\u6240\u4ee5\u7b2c $10$ \u4e2a\u5b57\u7b26\u5c31\u4e0e\u7b2c $10-4=6$ \u4e2a\u5b57\u7b26\u76f8\u540c\u3002\n2. \u7ee7\u7eed\u5f80\u524d\u63a8\uff0c\u7b2c $6$ \u4e2a\u5b57\u7b26\u662f\u5728\u7b2c\u4e00\u6b21\u64cd\u4f5c\uff08\u7ea2\u8272\u90e8\u5206\uff09\u751f\u6210\u7684\uff0c\u8fd9\u6b21\u64cd\u4f5c\u7684 $d = 4$\uff0c\u4e8e\u662f\u5b83\u53c8\u4f1a\u4e0e\u7b2c $6-4=2$ \u4e2a\u5b57\u7b26\u76f8\u7b49\u3002\n3. \u7b2c $2$ \u4e2a\u5b57\u7b26\uff0c\u662f\u5728\u7b2c\u96f6\u6b21\u64cd\u4f5c\u4e2d\u751f\u6210\u7684\uff0c\u5373\u5c5e\u4e8e\u539f\u59cb\u5b57\u7b26\u4e32\u3002\u76f4\u63a5\u8f93\u51fa $s_2$ \u5373\u53ef\u3002\n\n\u5c31\u50cf\u8fd9\u6837\u4ece\u540e\u5f80\u524d\u8df3\uff0c\u65e0\u8bba\u8be2\u95ee\u7684\u5750\u6807\u591a\u5927\uff0c\u4e00\u5b9a\u4f1a\u5728 $c$ \u6b21\u4e4b\u5185\u8df3\u5230\u539f\u59cb\u4e32\u7684\u8303\u56f4\u5f53\u4e2d\u3002\u6545\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(qc)$\u3002\n\n## \u4ee3\u7801\n\n```cpp\nstruct OperationInfo {\n  ll l, r, L, R;\n  OperationInfo() {}\n  OperationInfo(ll l, ll r, ll L, ll R) : l(l), r(r), L(L), R(R) {}\n};\n\nvoid solution() {\n  int n, c, q;\n  read(n, c, q);\n  std::string s;\n  std::cin >> s;\n  s = \" \" + s;\n  std::vector<OperationInfo> oper(c + 1);\n  oper[0] = OperationInfo(0, 0, 1, n);\n  for (int i = 1; i <= c; ++i) {\n    read(oper[i].l, oper[i].r);\n    // \u6c42\u51fa\u6bcf\u6b21\u64cd\u4f5c\u65b0\u751f\u6210\u7684\u5750\u6807\u8303\u56f4\n    oper[i].L = oper[i - 1].R + 1;\n    oper[i].R = oper[i - 1].R + oper[i].r - oper[i].l + 1;\n  }\n  auto answer = [&]() {\n    ll pos;\n    read(pos);\n    for (int i = c; i >= 1; --i) {\n      if (pos >= oper[i].L) {\n        ll dis = oper[i].L - oper[i].l;\n        assert(dis == oper[i].R - oper[i].r);\n        pos -= dis;\n      }\n    }\n    std::cout << s[pos] << \"\\n\";\n  };\n  for (int kase = 1; kase <= q; ++kase) answer();\n}\n```\n",
        "postTime": 1658127279,
        "uid": 53062,
        "name": "Anguei",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1705C\u3010Mark and His Unfinished Essay\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5206\u6790\n\u9996\u5148\u53d1\u73b0 $1\\le l,r,k\\le 10^{18}$\uff0c\u6240\u4ee5\u76f4\u63a5\u6a21\u62df\u590d\u5236\u64cd\u4f5c\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u5176\u4ed6\u65b9\u6cd5\u3002\n\n\u53d1\u73b0 $c\\le40$\uff0c\u60f3\u5230\u53ef\u4ee5\u4e00\u6b21\u4e00\u6b21\u5411\u524d\u627e\u5bf9\u5e94\u7684\u5b57\u6bcd\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u53ea\u8981 $k\\gt n$\uff0c\u6211\u4eec\u4ece\u524d\u5f80\u540e\u679a\u4e3e\u6bcf\u6b21\u590d\u5236\u64cd\u4f5c\uff0c\u8bb0\u5f55\u76ee\u524d\u7684\u603b\u957f\u5ea6\uff0c\u5f53\u603b\u957f\u5ea6\u8d85\u8fc7 $k$ \u65f6\uff0c\u5c06 $k$ \u53d8\u4e3a\u5b83\u6765\u6e90\u7684\u4e0b\u6807\uff0c\u8fd9\u6837\u76f4\u5230 $k\\le n$ \u4e3a\u6b62\u3002\n\n\u8fd9\u6837\u505a\u7684\u8bdd\uff0c\u6bcf\u6b21\u67e5\u8be2\u7684\u6700\u9ad8\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\frac{c(c-1)}{2}$\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u6700\u540e\u6ce8\u610f\u4e00\u4e0b\u9700\u8981\u5f00 long long \u5373\u53ef\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<iostream>\nusing namespace std;\nlong long l[41],r[41];\nint main()\n{\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    long long t,n,c,q,i,j,k,s;\n    string a;\n    cin>>t;\n    while(t--)\n    {\n        cin>>n>>c>>q>>a;\n        for(i=1;i<=c;i++)\n            cin>>l[i]>>r[i];\n        for(i=1;i<=q;i++)\n       \t{\n            cin>>k;\n            while(k>n)\n            {\n                s=n;\n                for(j=1;j<=c;j++)\n                {\n                    if(s+r[j]-l[j]+1>=k)\n                    {\n                        k=k-s+l[j]-1;\n                        break;\n                    }\n                    s+=r[j]-l[j]+1;\n                }\n            }\n            cout<<a[k-1]<<\"\\n\";\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1658089609,
        "uid": 54922,
        "name": "codemap",
        "ccfLevel": 0,
        "title": "CF1705C"
    }
]
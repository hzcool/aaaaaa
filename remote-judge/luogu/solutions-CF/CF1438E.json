[
    {
        "content": "### \u9898\u76ee\u63cf\u8ff0\n\n---\n\n\u7ed9\u4f60\u4e00\u4e2a\u5927\u5c0f\u4e3a $n$  ($n\\le 2e5$) \u7684\u6570\u7ec4 $a$\uff0c\u5176\u4e2d $a_i$\uff08$1\\le a_i<2^{30}$\uff09.\n\n\u5b9a\u4e49\u4e00\u4e2a $a$ \u4e2d\u4e00\u4e2a\u5b57\u4e32 $a[l\\dots r]$ \u662f\u597d\u7684\uff0c\u5f53 $(a_l \\oplus a_r) = a_{l+1}+a_{l+2}+\\dots a_{r-2}+a_{r-1}$.\n\n\u8bf7\u8f93\u51fa\u6570\u7ec4 $a$ \u4e2d\u597d\u7684\u5b57\u4e32\u7684\u4e2a\u6570.\n\n### \u9898\u89e3\n\n----\n\n$O(n^2)$ \u7684\u66b4\u529b\u5341\u5206\u597d\u5199\uff0c\u53ea\u8981\u679a\u4e3e\u5b57\u4e32\u7684\u5de6\u53f3\u7aef\u70b9\u5e76\u5224\u65ad\u5373\u53ef.\n\n\u8003\u8651\u4e00\u4e2a\u66b4\u529b\u7684\u4f18\u5316\uff1a\n\n\u6211\u4eec\u5148\u786e\u5b9a\u4e00\u4e2a\u5de6\u7aef\u70b9 $l$\uff0c\u8bb0 $a_l$ \u5728\u4e8c\u8fdb\u5236\u4e0b\u7684\u6700\u9ad8\u4f4d\u4e3a $k$\n\n\u7136\u540e\u5f80\u53f3\u679a\u4e3e\u53f3\u7aef\u70b9 $r$ \uff0c\u4e8b\u5b9e\u4e0a\uff0c\u5f53 $a_{l+1}+a_{l+2}+\\dots +a_{r-2}+a_{r-1} \\ge 2^{k+1}$ \u65f6\n\n\u5c31\u4e0d\u7528\u7ee7\u7eed\u5f80\u53f3\u679a\u4e3e\u4e86.\n\n\u539f\u56e0\u662f $a_l$ \u5f02\u6216\u4e0a\u4efb\u4f55\u4e00\u4e2a\u4e0d\u5927\u4e8e $a_l$ \u7684\u6b63\u6574\u6570\u90fd\u4e0d\u4f1a\u5927\u4e8e\u7b49\u4e8e $2^{k+1}$.\n\n\u7136\u540e\uff0c\u8ba9\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u8fd9\u4e2a \u201c\u66b4\u529b\u201d \u7684\u590d\u6742\u5ea6\uff1a\n\n\u8003\u8651\u4e00\u4e2a $a_i$ \u4f5c\u4e3a\u53f3\u7aef\u70b9\u88ab\u679a\u4e3e\u5230\u7684\u6b21\u6570\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd $k$ \uff0c$a_i$ \u6700\u591a\u53ea\u4f1a\u88ab\u8bbf\u95ee\u5230\u4e24\u6b21\uff0c\n\n\u56e0\u4e3a\u5982\u679c\u6709\u7b2c\u4e09\u4e2a\u8fd9\u6837\u7684 $k$ \uff0c\u5728\u8fd9\u4e2a\u6570\u4e0e $a_i$ \u4e2d\u5c31\u6709\u4e24\u4e2a\u6570\u6700\u9ad8\u4f4d\u662f $k$ \uff0c\u8fd9\u4e24\u4e2a\u6570\u4e4b\u548c\u5c31\u5927\u4e8e\u7b49\u4e8e$2^{k+1}$\u4e86.\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u201c\u66b4\u529b\u201d\u7684\u590d\u6742\u7684\u662f $n log a_i$ \u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898.\n\n\u6700\u540e\u6709\u4e00\u70b9\u9700\u8981\u63d0\u9192\uff0c\u4e3a\u4e86\u9632\u6b62\u9057\u6f0f\uff0c\u8981\u4ece\u5de6\u5f80\u53f3\u626b\u4e00\u904d\u5728\u4ece\u6709\u5f80\u5de6\u626b\u4e00\u904d\u7136\u540e\u53bb\u91cd.\n\n### code\n---\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace moonpie {\n\t#define P pair<int,int>\n    const int N=2e5+5;\n    int n,a[N];\n    set<P> s;\n    void solve() {\n        cin>>n;\n        for(int i=1;i<=n;++i) scanf(\"%d\",&a[i]);\n\n        int cnt=0;\n        for(int i=1;i<=n;++i) {\n            int x = log2(a[i]);\n            int sum = 0;\n            for(int j=i+1;j<n;++j) {\n                sum += a[j];\n                if(sum > (1<<(x+1))) break;\n                if(sum == (a[i]^a[j+1])) s.insert(P(i,j+1));\n            }\n        }\n\n        for(int i=n;i>=1;--i) {\n            int x = log2(a[i]);\n            int sum = 0;\n            for(int j=i-1;j>1;--j) {\n                sum += a[j];\n                if(sum > (1<<(x+1))) break;\n                if(sum == (a[i]^a[j-1])) s.insert(P(j-1,i));\n            }\n        }\n\n        cout<<s.size()<<endl;\n        \n    }\n}\nsigned main() {\n    moonpie::solve();\n    return 0;\n}\n```",
        "postTime": 1605358885,
        "uid": 95246,
        "name": "MoonPie",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1438E \u3010Yurii Can Do Everything\u3011"
    },
    {
        "content": "## CF1438E \u3010Yurii Can Do Everything\u3011\n\n### \u9898\u610f\n\n+ \u4e00\u4e2a\u6570\u7ec4 $a[l,r]$ \u662f\u597d\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53 $r-l\\le2$ \u4e14 $a_l\\oplus a_r=sum_{r-1}-sum_{l}$\uff0c$sum$ \u4e3a $a$ \u7684\u524d\u7f00\u548c\u6570\u7ec4\uff1b\n+ \u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u7ec4 $a$\uff0c\u6c42 $a$ \u6709\u51e0\u4e2a\u5b50\u6570\u7ec4\u662f\u597d\u7684\uff1b\n+ $n\\le2\\times10^5,a\\le10^9$\u3002\n\n### \u505a\u6cd5\n\n\u76f4\u63a5\u679a\u4e3e\u5b50\u6570\u7ec4 $O(n^2)$\uff0c\u663e\u7136\u4e0d\u884c\u3002\n\n\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff1a$a\\oplus b<\\max(\\operatorname{highbit}(a),\\operatorname{highbit}(b))\\times2$\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e $l$\uff0c\u5411\u53f3\u679a\u4e3e $r$\uff0c\u627e\u5230\u6240\u6709 $a_l\\ge a_r$ \u7684\u597d\u7684\u5b50\u6570\u7ec4\uff0c\u5f53 $sum_{r-1}-sum_{l}\\ge\\operatorname{highbit}(a_l)\\times2$ \u65f6\uff0c\u9000\u51fa\u679a\u4e3e\uff0c\u56e0\u4e3a\u4e0d\u53ef\u540e\u9762\u4e0d\u53ef\u80fd\u6709\u7b54\u6848\uff0c\u518d\u679a\u4e3e $r$\uff0c\u5411\u5de6\u679a\u4e3e $l$\uff0c\u627e\u5230\u6240\u6709 $a_r>a_l$ \uff08\u76f8\u7b49\u7684\u60c5\u51b5\u5df2\u7ecf\u7edf\u8ba1\u8fc7\uff09\u7684\u597d\u7684\u5b50\u6570\u7ec4\uff0c\u5f53 $sum_{r-1}-sum_{l}\\ge\\operatorname{highbit}(a_r)\\times2$ \u65f6\uff0c\u9000\u51fa\u679a\u4e3e\u3002\n\n\u8fd9\u6837\u770b\u8d77\u6765\u5bf9\u4e8e\u6bcf\u4e2a $l$ \u90fd\u53ef\u80fd\u662f $O(n)$ \u7ea7\u522b\u7684\u679a\u4e3e\uff0c\u4f46\u6211\u4eec\u4ed4\u7ec6\u5206\u6790\u4e00\u4e0b\uff1a\u4ee5\u56fa\u5b9a $l$ \u627e $r$ \u4e3a\u4f8b\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $r$\uff0c\u8003\u8651\u7b2c\u4e00\u4e2a\u627e\u5230\u5b83\u7684 $l$\uff0c\u6b64\u65f6 $sum_{r-1}-sum_{l}\\ge\\operatorname{highbit}(a_l)\\times2$\uff0c\u5219 $(l,r)$ \u4e2d\u6ee1\u8db3 $\\operatorname{highbit}(a_i)=\\operatorname{highbit}(a_l)$ \u7684 $i$ \u4e0d\u8d85\u8fc7 $1$ \u4e2a\uff0c\u5219\u5bf9\u4e8e\u6bcf\u4e2a $r$\uff0c\u6bcf\u79cd $\\operatorname{highbit}$ \u7684 $l$ \u6700\u591a\u53ea\u4f1a\u679a\u4e3e\u5230 $2$ \u6b21\uff0c\u603b\u590d\u6742\u5ea6\u4e0d\u8d85\u8fc7 $O(n\\log a)$\u3002",
        "postTime": 1629729040,
        "uid": 246014,
        "name": "Cutest_Junior",
        "ccfLevel": 6,
        "title": "CF1438E \u3010Yurii Can Do Everything\u3011"
    },
    {
        "content": "[\u6211\u89c9\u5f97\u4f1a\u597d\u4e00\u70b9\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/whale-at-cola/p/solution-cf1438e.html)\n\n\u53d1\u73b0\u6211\u7684\u5783\u573e\u505a\u6cd5\u597d\u50cf\u548c\u522b\u4eba\u6709\u4e9b\u4e0d\u540c\uff0c\u5206\u4eab\u4e00\u4e0b\u3002\n\n\u9898\u76ee\u4f20\u9001\u95e8\uff1a[luogu](https://www.luogu.com.cn/problem/CF1438E)\uff0c[CF](https://codeforces.com/problemset/problem/1438/E)\u3002\n\n\u89c4\u5b9a\uff1a\u8bb0\u5e8f\u5217 $s$ \u8868\u793a\u5e8f\u5217 $a$ \u7684\u524d\u7f00\u548c\uff0c$highbit(x)$ \u8868\u793a\u6570 $x$ \u7684\u6700\u9ad8\u4f4d\uff0c\u5e8f\u5217 $a$ \u503c\u57df\u4e3a $m$\u3002\n\n\u9996\u5148\u8003\u8651\u679a\u4e3e\u4e00\u4e2a\u7aef\u70b9\u627e\u7b54\u6848\uff0c\u4e0d\u59a8\u679a\u4e3e $l$\uff0c\u7136\u540e\u5bfb\u627e\u679a\u4e3e $r$ \u7684\u6027\u8d28\u6765\u51cf\u5c11\u679a\u4e3e\u3002\n\n\u8003\u8651\u5de6\u7aef\u70b9 $l$\uff0c\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a $l$ \u4e4b\u540e\u6700\u5c0f\u7684\u4f4d\u7f6e $k$ \u6ee1\u8db3 $highbit(s_k-s_l)>highbit(a_l)$\uff0c$k$ \u4e4b\u540e\u7684\u6240\u6709\u4f4d\u7f6e $j$ \u82e5\u8981\u4f5c\u4e3a\u53f3\u7aef\u70b9 $r$\uff0c\u56e0\u4e3a $a_l$ \u7684\u7b2c $highbit(s_{j-1}-s_l)$ \u4f4d\u5fc5\u7136\u4e3a $0$\uff0c\u6240\u4ee5 $j$ \u5fc5\u987b\u6ee1\u8db3 $highbit(a_j) \\geq highbit(s_{j-1}-s_l)$\uff0c\u8fd9\u65f6\uff0c\u5bf9\u4e8e $j$ \u540e\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e $j'$\uff0c\u663e\u7136 $highbit(s_{j'-1}-s_l)$ \u5927\u4e8e $highbit(s_{j-1}-s_l)$\uff0c\u800c $highbit$ \u81f3\u591a\u589e\u5927\u5230 $\\log_2 m$\uff0c\u6240\u4ee5 $k$ \u540e\u6ee1\u8db3\u6761\u4ef6\u7684\u53f3\u7aef\u70b9\u6570\u91cf\u6700\u591a\u53ea\u6709 $\\log m$ \u4e2a\u3002\u6839\u636e\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u53ea\u8981\u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\u9884\u5904\u7406\u5b83\u540e\u9762\u7b2c\u4e00\u4e2a $highbit(a_j)$ \u5927\u4e8e\u67d0\u4e2a\u4f4d\u7684\u4f4d\u7f6e $j$\uff0c\u5373\u53ef\u5c06\u5bf9\u6ee1\u8db3 $r>k$ \u7684\u53f3\u7aef\u70b9 $r$ \u7684\u679a\u4e3e\u4f18\u5316\u5230 $O(n\\log_2 m)$ \u7684\u590d\u6742\u5ea6\u3002\n\n\u7136\u540e\u8003\u8651 $r\\leq k$ \u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u66b4\u529b\u505a\u590d\u6742\u5ea6\u5c31\u662f\u5bf9\u7684\uff0c\u522b\u7684\u9898\u89e3\u91cc\u90fd\u6709\u8fd9\u90e8\u5206\u7684\u8bc1\u660e\uff0c\u6211\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u65f6\u7a7a\u590d\u6742\u5ea6\u5747\u4e3a $O(n\\log_2 m)$\uff0c\u4ee3\u7801\u89c1\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define re register\ntypedef long long ll;\ninline int win(){\n\tint x=0,w=0;char c=getchar();\n\twhile(c>'9'||c<'0') w|=c=='-',c=getchar();\n\twhile(c>='0'&&c<='9') x=(x<<1)+(x<<3)+(c^48),c=getchar();\n\treturn w?-x:x;\n}\n\nconst int N=202020;\nint p[N][31];ll a[N],s[N];\n\nsigned main(){\n\tint n=win(),ans=0;\n\tfor(re int i=1;i<=n;++i) a[i]=win(),s[i]=a[i]+s[i-1];\n\tfor(re int j=0;j<30;++j) p[n][j]=n+1;\n\tfor(re int i=n,l;i>=1;--i){\n\t\tl=63-__builtin_clzll(a[i]);\n\t\tfor(re int j=0;j<=l;++j) p[i-1][j]=i;\n\t\tfor(re int j=l+1;j<30;++j) p[i-1][j]=p[i][j];\n\t}\n\tfor(re int i=1,j,lmt;i<=n;++i){\n\t\tj=i+1,lmt=64-__builtin_clzll(a[i]);\n\t\tfor(;j<n&&s[j]-s[i]<(1ll<<lmt);++j) if(s[j]-s[i]==(a[i]^a[j+1])) ++ans;\n\t\tif(j<n){\n\t\t\tlmt=63-__builtin_clzll(s[j]-s[i]),j=p[j][lmt];\n\t\t\tfor(;j<=n&&lmt<=30;lmt=63-__builtin_clzll(s[j]-s[i]),j=p[j][lmt]) if((a[j]^a[i])==s[j-1]-s[i]) ++ans;\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1657085183,
        "uid": 232349,
        "name": "WhaleAtCola",
        "ccfLevel": 9,
        "title": "\u3010\u9898\u89e3\u3011CF1438E Yurii Can Do Everything"
    },
    {
        "content": "## \u89e3\u6790\n\n\uff08\u8fd9\u91cc\u5148\u5206\u6790\u590d\u6742\u5ea6\u76f8\u5173\uff0c\u7136\u540e\u518d\u8bb2\u5177\u4f53\u505a\u6cd5\uff08\u6700\u540e\u53ef\u80fd\u6709\u5f88\u591a\u53ef\u884c\u7684\u5b9e\u73b0\u65b9\u5f0f\uff09\uff09\n\n### Part0\n\n\u9996\u5148\u4e0d\u96be\u53d1\u73b0 $a+b\\geq a\u2295b$\n\n\u4e8e\u662f\u6211\u4eec\u7684\u5927\u81f4\u601d\u8def\u5c31\u662f\u679a\u4e3e\u6ee1\u8db3 $a_l+a_r\\geq \\sum\\limits_{i=l+1}^{r-1}a_i$ \u7684\u533a\u95f4\uff1b\u53ea\u8981\u8bc1\u660e\u6700\u7ec8\u6ee1\u8db3\u8981\u6c42\u7684\u533a\u95f4\u4e2a\u6570\u4e0d\u591a\uff0c\u8fd9\u79cd\u601d\u8def\u5c31\u662f\u53ef\u884c\u7684\n\n### Part1\n\n\u53ef\u4ee5\u8bc1\u660e\u8fd9\u6837\u7684\u533a\u95f4\u4e2a\u6570\u662f\u4e0d\u8d85\u8fc7 $n\\log a$ \u7684\uff1a\n\n&nbsp;\n\n\u9996\u5148\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u4efb\u610f\u6ee1\u8db3\u8981\u6c42\u7684\u533a\u95f4\u4e2d\uff0c\u4e00\u5b9a\u80fd\u627e\u5230\u4e00\u70b9 $k, l < k < r$ \u6ee1\u8db3 $a_l\\geq\\sum\\limits_{i=l+1}^{k}, a_r\\geq\\sum\\limits_{i=k+1}^{r-1}$\u3002\u8bc1\u660e\u53ea\u9700\u8003\u8651\u53cd\u8bc1\u6cd5\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u679a\u4e3e\u8fd9\u4e2a\u4e2d\u95f4\u70b9 $k$\uff0c\u5e76\u5411\u5de6\u53f3 \u201c\u6269\u5f20\u201d\uff1b\u4e0d\u96be\u53d1\u73b0\u5de6\u53f3\u6ee1\u8db3\u8981\u6c42\u7684 $l, r$ \u5404\u4e0d\u4f1a\u8d85\u8fc7 $\\log a$ \u4e2a\u3002\u8fd9\u91cc\u53ea\u5bf9 $r$ \u505a\u8bc1\u660e\uff1a\u53ea\u9700\u8003\u8651\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u7b54\u6848\u70b9 $r_1, r_2$\uff0c\u4e0d\u59a8\u8bbe $r_1<r_2$\uff0c\u53d1\u73b0 $\\sum\\limits_{i=k+1}^{r_2-1}$ \u4e00\u5b9a**\u5305\u542b** $a_{r_1}$\uff0c\u4e8e\u662f $a_{r_2}$ \u76f8\u6bd4 $a_{r_1}$ \u5fc5\u5b9a\u7ffb\u500d\n\n\u679a\u4e3e\u7684\u4e2d\u95f4\u70b9 $k$ \u4e0d\u8d85\u8fc7 $n$ \u4e2a\uff1b\u4e8e\u662f\u8fd9\u6837\u7b97\u51fa\u7684\u533a\u95f4\u4e2a\u6570\u4e0a\u754c\u5c31\u662f $n\\log^2 a$ \u7684\n\n&nbsp;\n\n\u4f46\u53d1\u73b0\u6bcf\u4e2a\u533a\u95f4\u5176\u5b9e\u53ef\u80fd\u4f1a\u88ab\u4e0d\u540c\u7684 $k$ \u591a\u6b21\u7edf\u8ba1\n\n\u6211\u4eec\u5177\u4f53\u5206\u6790\u4e0b\uff0c\u5f53 $k$ \u53d8\u4e3a $k+1$ \u65f6\uff0c\u5408\u6cd5\u5de6\u7aef\u70b9\u96c6\u5408 $\\{l_i\\}$ \u4e0e\u5408\u6cd5\u53f3\u7aef\u70b9\u96c6\u5408 $\\{r_i\\}$ \u7684\u53d8\u5316\n\n\u5bf9\u4e8e $\\{l_i\\}$\uff0c\u53ef\u4ee5\u53d1\u73b0\uff1a\u5bf9\u4e8e\u539f\u5148\u4e0d\u5728 $\\{l_i\\}$ \u7684\u7aef\u70b9\uff0c\u4ecd\u65e7\u4e0d\u80fd\u4f5c\u4e3a\u5408\u6cd5\u7684\u5de6\u7aef\u70b9\uff08\u53ea\u9700\u8003\u8651\u7aef\u70b9\u5904\u503c\u4e0d\u53d8\uff0c\u4f46 $\\sum$ \u53d8\u5927\u4e86\uff09\uff1b\u539f\u5148\u5728 $\\{l_i\\}$ \u4e2d\u7684\u7aef\u70b9\uff0c\u6b64\u65f6\u53ef\u80fd \u201c\u5931\u6548\u201d \u4e86\uff1b\u800c\u65b0\u589e\u7684\u5de6\u7aef\u70b9\uff0c\u53ea\u6709\u53ef\u80fd\u662f $k$ \u8fd9\u4e2a\u70b9\n\n\u5bf9\u4e8e $\\{r_i\\}$\uff0c\u53ef\u4ee5\u53d1\u73b0\uff1a\u5bf9\u4e8e\u539f\u5148\u4e0d\u5728 $\\{r_i\\}$ \u7684\u7aef\u70b9\uff0c\u6b64\u65f6\u53ef\u80fd\u6210\u4e3a\u65b0\u7684\u5408\u6cd5\u7684\u53f3\u7aef\u70b9\uff08\u8bc1\u660e\u4ecd\u8003\u8651\u503c\u4e0d\u53d8\uff0c$\\sum$ \u53d8\u5927\uff09\uff1b\u539f\u5148\u5728 $\\{r_i\\}$ \u4e2d\u7684\u7aef\u70b9\uff0c\u6b64\u65f6\u57fa\u672c\u90fd\u5728\uff1b\u552f\u4e00\u4e00\u4e2a\u4f8b\u5916\u662f\u662f $k+1$ \u8fd9\u4e2a\u70b9\u53ef\u80fd\u4ece $\\{r_i\\}$ \u4e2d\u6d88\u5931\n\n\u4e8e\u662f\u4e0d\u96be\u53d1\u73b0\uff0c\u5f53 $k$ \u53d8\u4e3a $k+1$ \u65f6\uff0c$\\{l_i\\}, \\{r_i\\}$ \u7684\u5143\u7d20\u53d8\u5316\u4e2a\u6570\u90fd\u662f**\u5747\u644a** $O(1)$ \u7684\uff08\u8fd9\u91cc\u5177\u4f53\u8bf4\u8d77\u6765\u5176\u5b9e\u6709\u70b9\u6709\u8da3\uff1a$\\{l_i\\}$ \u662f\u5220\u9664\u65f6\u5747\u644a $O(1)$ \u4e2a\uff0c\u800c $\\{r_i\\}$ \u6b63\u597d\u53cd\u8fc7\u6765\uff09\u3002\u4e8e\u662f\u5bf9\u4e8e $k$ \u53d8\u4e3a $k+1$\uff0c\u65b0\u589e\u7684\u4e0d\u540c\u533a\u95f4\u4e8b\u5b9e\u4e0a\u53ea\u6709\u7ea6 $2\\cdot\\log a$ \u4e2a\uff08\u65b0\u52a0\u5165\u7684 $l, r$ \u7aef\u70b9\u5206\u522b\u4e0e\u539f\u5148\u5b58\u5728\u7684\u7aef\u70b9\u7ec4\u5408\uff09\n\n\u4e8e\u662f\u603b\u7684\u4e0d\u540c\u533a\u95f4\u4e2a\u6570\u5c31\u662f $n\\log a$ \u7684\n\n### Part2\n\n\u6700\u540e\u8003\u8651\u5982\u4f55\u5b9e\u73b0\n\n\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u8003\u8651\u5148\u53cd\u7740\u626b\u4e00\u904d\uff0c\u9884\u5904\u7406\u51fa\u6bcf\u4e2a $k$ \u7684 $r$ \u70b9\uff08\u5177\u4f53\u5b9e\u73b0\u7684\u8bdd\uff0c\u53cd\u7740\u626b $\\{r_i\\}$ \u7684\u53d8\u5316\u60c5\u51b5\u5c31\u548c\u987a\u7740\u626b\u7684 $\\{l_i\\}$ \u4e00\u6837\u4e86\uff0c\u4e8e\u662f\u53ea\u9700\u4ece\u5df2\u6709\u7684 $\\log a$ \u4e2a $\\{r_i\\}$ \u4e2d\u68c0\u67e5\uff09\uff1b\u8fd9\u6837\u5bf9\u6bcf\u4e2a $k$ \u5c31\u53ef\u4ee5 $O(1)$ \u5f97\u77e5\u5176\u7684 $\\{r_i\\}$ \u96c6\u5408\uff08\u5426\u5219\u7684\u8bdd\uff0c\u6bcf\u6b21\u90fd\u8981\u68c0\u67e5\u6240\u6709\u4e0d\u5728 $\\{r_i\\}$ \u5185\u7684\u5143\u7d20\uff0c\u662f $O(n)$ \u7684\uff09\u3002\u518d\u7ed3\u5408\u521a\u624d\u7684\u8bc1\u660e\u8fc7\u7a0b\uff0c\u987a\u7740\u626b\u4e00\u6b21\uff0c\u7edf\u8ba1\u65f6\u4e0d\u8981\u591a\u6b21\u68c0\u67e5\u540c\u4e00\u4e2a\u533a\u95f4\u5373\u53ef\u3002\u8fd9\u6837\u76f4\u63a5\u5b9e\u73b0\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n\\log a)$ \u7684\uff0c\u4f46\u7a7a\u95f4\u590d\u6742\u5ea6\u4e5f\u662f $O(n\\log a)$ \u7684\uff1b\u53ef\u80fd\u6709\u7c7b\u4f3c\u601d\u8def\u7684\u5199\u6cd5\u53ef\u4ee5\u4f18\u5316\u7a7a\u95f4\u590d\u6742\u5ea6\n\n\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u65e2\u7136\u5df2\u7ecf\u8bc1\u660e\u4e0d\u540c\u7684\u533a\u95f4\u4e2a\u6570\u4ec5\u6709 $n\\log a$ \u4e2a\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u679a\u4e3e\u5de6\u7aef\u70b9 $l$\uff0c\u5229\u7528\u7ebf\u6bb5\u6811\u67e5\u8be2\u6ee1\u8db3\u8981\u6c42\u7684\u53f3\u7aef\u70b9 $r$\u3002\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n\\log a\\log n)$ \u7684\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff0c\u5177\u4f53\u6765\u8bf4\u7684\u8bdd\uff0c\u5c31\u662f\u8003\u8651\u6211\u4eec\u9700\u8981\u5bf9\u6bcf\u4e2a $l$ \u627e\u5230\u6240\u6709\u7684 $r$ \u6ee1\u8db3 $a_l+a_r\\geq \\sum\\limits_{i=l+1}^{r-1}a_i$\u3002\u8bbe $s_i$ \u8868\u793a\u524d\u7f00\u548c\u6570\u7ec4\uff0c\u4e0a\u5f0f\u5373 $s_r-s_{l-1}\\geq 2(s_{r-1}-s_l)$\uff0c\u5373 $s_r-2s_{r-1}\\geq s_{l-1}-2s_l$\u3002\u4e8e\u662f\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u7684 $s_r-2s_{r-1}$\uff0c\u7ebf\u6bb5\u6811\u8be2\u95ee\u51fd\u6570\u5185\u66b4\u529b\u5411\u4e0b\u9012\u5f52\u6240\u6709\u53ef\u80fd\u6709\u7b54\u6848\u7684\u533a\u95f4\u5373\u53ef\u3002\u5177\u4f53\u5b9e\u73b0\u7ec6\u8282\u53ef\u89c1\u4e0b\u9762\u4ee3\u7801\n\n## CODE\n\n\u8fd9\u91cc\u4ec5\u6709\u7ebf\u6bb5\u6811\u7684\u5b9e\u73b0\uff08\u53e6\u4e00\u79cd\u6682\u65f6\u5495\u5495 \\fad\uff09\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#define ll long long\nusing std::max;\n\nconst int MAXN =2e5+20, MAXT =1<<19;\n\n/*------------------------------Array------------------------------*/\n\nint a[MAXN];\nll s[MAXN];\n\n/*------------------------------Seg------------------------------*/\n\nint N =1;\nll mx[MAXT];\n\n/*s_r-2s_{r-1} \\geq s_{l-1}-2s_l*/\nvoid query(const int &l, const int &r, const int &pos, int &ans, const int &nl =1, const int &nr =N, const int x =1){\n\tint mid =(nl+nr)>>1;\n\tif(nl == nr){\n\t\tif(nl-pos >= 2 && (a[pos]^a[nl]) == s[nl-1]-s[pos+1 -1])\n\t\t\t++ans;\n\t}\n\telse if(l == nl && r == nr){\n\t\tif(mx[x<<1] >= s[pos-1]-2*s[pos])\n\t\t\tquery(nl, mid, pos, ans, nl, mid, x<<1);\n\t\tif(mx[x<<1^1] >= s[pos-1]-2*s[pos])\n\t\t\tquery(mid+1, nr, pos, ans, mid+1, nr, x<<1^1);\n\t}\n\telse{\n\t\tif(r <= mid)\n\t\t\tquery(l, r, pos, ans, nl, mid, x<<1);\n\t\telse if(l >= mid+1)\n\t\t\tquery(l, r, pos, ans, mid+1, nr, x<<1^1);\n\t\telse\n\t\t\tquery(l, mid, pos, ans, nl, mid, x<<1), query(mid+1, r, pos, ans, mid+1, nr, x<<1^1);\n\t}\n}\n\ninline void pushup(const int &x){\n\tmx[x] =max(mx[x<<1], mx[x<<1^1]);\n}\n\n/*------------------------------Main------------------------------*/\n\nint read(){\n\tint x =0; char c =getchar(); bool f =0;\n\twhile(c < '0' || c > '9') (c == '-') ? f =1, c =getchar() : c =getchar();\n\twhile(c >= '0' && c <= '9') x =(x<<1)+(x<<3)+(48^c), c =getchar();\n\treturn (f) ? -x : x;\n}\n\nint main(){\n\tint n =read();\n\tfor(int i =1; i <= n; ++i)\n\t\ta[i] =read(), s[i] =s[i-1]+a[i];\n\t\n\twhile(N < n)\n\t\tN <<=1;\n\tfor(int i =N; i < N+n; ++i)\n\t\tmx[i] =s[i-N+1]-2*s[(i-N+1)-1];\n\tfor(int i =N+n; i < N*2; ++i)\n\t\tmx[i] =-0x3f3f3f3f3f3f3f3f;\n\tfor(int i =N-1; i >= 1; --i)\n\t\tpushup(i);\n\t\n\tint ans =0;\n\tfor(int l =1; l <= n; ++l)\n\t\tquery(l, n, l, ans);\n\tprintf(\"%d\", ans);\n}\n```",
        "postTime": 1605531398,
        "uid": 105254,
        "name": "Piwry",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1438E \u3010Yurii Can Do Everything\u3011"
    },
    {
        "content": "\u770b\u770b\u5b98\u65b9\u9898\u89e3\uff0c\u5229\u7528\u4e86\u5f02\u6216\u7684\u6027\u8d28\u3002\n\n$$a_l \\oplus a_r < 2^{highbit + 1}$$\n\n\u6b64\u5904 $highbit$ \u6307 $a_l$ \u4e0e $a_r$ \u7684\u6700\u9ad8\u4e3a $1$ \u7684\u4f4d\u3002  \n\n\u9996\u5148\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u8df3\u53f3\u7aef\u70b9\uff0c\u6211\u4eec\u5047\u5b9a $a_l \\ge a_r$ \u6765\u7edf\u8ba1\u3002\n\n\u7b49\u4e00\u4f1a\u7ffb\u8f6c\u6570\u7ec4\uff0c\u518d\u7edf\u8ba1\u4e00\u904d\uff0c\u5c31\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u7684\u60c5\u51b5\u3002\u518d\u53bb\u4e2a\u91cd\u5c31\u884c\u4e86\u3002\n\n\u7136\u540e\u8003\u8651\u600e\u4e48\u7edf\u8ba1\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a $l$\uff0c\u66b4\u529b\u679a\u4e3e $r$ \u53bb\u68c0\u67e5\uff0c\u4fdd\u8bc1 $\\sum \\limits _{i=l+1}^{r-1} a_i < 2^{highbit+1}$ \u5373\u53ef\u3002\n\n\u8fd9\u6837\u590d\u6742\u5ea6\u662f\u5982\u4f55\u4fdd\u8bc1\u7684\uff1f\u770b\u4e0a\u53bb\u6bcf\u4e2a $l$ \u90fd\u53ef\u80fd\u8dd1\u6ee1 $O(n)$\uff0c\u800c\u5bfc\u81f4\u6700\u540e\u9000\u5316\u4e3a $O(n^2)$ \u7684\u590d\u6742\u5ea6\u3002\n\n\u7136\u800c\u4f7f\u7528\u5947\u602a\u7684\u6574\u4f53\u5206\u6790\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u6837\u590d\u6742\u5ea6\u662f\u771f\u7684\u3002\n\n\u5bf9\u6bcf\u4e00\u4e2a $highbit$ \u5355\u72ec\u8003\u8651\u590d\u6742\u5ea6\u3002\n\n\u5bf9\u4e8e\u82e5\u5e72\u4e2a $a_{b_i}$ \u6ee1\u8db3\u5176\u6700\u9ad8\u4f4d\u4e3a $highbit$ \u65f6\uff0c\u5176\u4e0b\u6807\u5e8f\u5217\u4e3a $b_1 < b_2 < \\ldots < b_k$\n\n\u8003\u8651 $l = b_i$ \u65f6\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5b83\u7684\u53f3\u7aef\u70b9 $r$ \u81f3\u591a\u8d70\u5230 $b_{i+2}$ \u5c31\u4f1a\u505c\u6b62\uff0c\u56e0\u4e3a\u4e24\u4e2a\u6700\u9ad8\u4f4d\u76f8\u52a0\u8fdb\u4f4d\u4e86\uff0c\u4e0d\u518d\u6ee1\u8db3 $\\sum \\limits _{i=l+1}^{r-1} a_i < 2^{highbit+1}$\u3002\n\n\u90a3\u4e48\u4e00\u5171\u4f1a\u8d70\u8fc7 $\\sum \\limits _{i = 1}^k (b_{i+2} - b_i)$ \u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u4e2a\u7684\u4e0a\u754c\u662f $2 \\times n$\uff0c\u90a3\u4e48\u6bcf\u4f4d\u7684\u603b\u65f6\u95f4\u90fd\u662f\u7ebf\u6027\u7684\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n \\log a_i)$\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <set>\n#include <ctype.h>\nusing namespace std;\nconst int bufSize = 1e6;\ninline char nc()\n{\n    #ifdef DEBUG\n    return getchar();\n    #endif\n    static char buf[bufSize], *p1 = buf, *p2 = buf;\n    return p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, bufSize, stdin), p1 == p2) ? EOF : *p1++;\n}\ntemplate<typename T>\ninline T read(T &r)\n{\n    static char c;\n    static int flag;\n    flag = 1, r = 0;\n    for (c = nc(); !isdigit(c); c = nc()) if (c == '-') flag = -1;\n    for (; isdigit(c); c = nc()) r = r * 10 + c - 48;\n    return r *= flag;\n}\nconst int maxn = 2e5 + 100;\nint n, a[maxn], hb[maxn];\nset<pair<int,int> > S;\nint main()\n{\n    read(n);\n    for (int i = 1; i <= n; ++i) read(a[i]);\n    for (int i = 1; i <= n; ++i)\n        for (int j = 29; j >= 0; --j) if (a[i] & (1 << j)) { hb[i] = j; break; }\n    for (int l = 1; l <= n; ++l)\n    {\n        int maxx = 1 << (hb[l] + 1);\n        long long now = a[l + 1];\n        for (int r = l + 2; r <= n; ++r)\n        {\n            if (now >= maxx) break;\n            if ((a[l] ^ a[r]) == now) S.insert(make_pair(l, r));\n            now += a[r];\n        }\n    }\n    for (int r = n; r > 0; --r)\n    {\n        int maxx = 1 << (hb[r] + 1);\n        long long now = a[r - 1];\n        for (int l = r - 2; l > 0; --l)\n        {\n            if (now >= maxx) break;\n            if ((a[l] ^ a[r]) == now) S.insert(make_pair(l, r));\n            now += a[l];\n        }\n    }\n    printf(\"%d\\n\",S.size());\n    return 0;\n}\n```",
        "postTime": 1605513443,
        "uid": 220159,
        "name": "Clouder",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1438E \u3010Yurii Can Do Everything\u3011"
    },
    {
        "content": "## \u9898\u89e3\u601d\u8def\uff1a\n\u6211\u4eec\u4f1a\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff1a\u6ee1\u8db3\u6761\u4ef6\u7684\u533a\u95f4\u4e0d\u4f1a\u5f88\u591a\u3002\n\n\u56e0\u4e3a\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u5f88\u5c11\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u66b4\u529b\u3002\n\n\u6211\u4eec\u5148\u5047\u8bbe\uff0c\u8fd9\u4e2a\u533a\u95f4\u662f\u4ee5 $a_l$ \u4e3a\u4e3b\u5bfc\u7684\uff0c\u5c31\u662f $a_l$ \u662f $a_l$ \u548c $a_r$ \u91cc\u4e8c\u8fdb\u5236\u6700\u9ad8\u7684\u4e00\u4f4d\u3002\n\n\u5bf9\u4e8e\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u66b4\u529b\u6c42\u6ee1\u8db3\u6761\u4ef6\u7684\u533a\u95f4\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5148\u5bf9\u4e8e $l$ \u679a\u4e3e $r$\u3002\n\n\u7ec8\u6b62\u6761\u4ef6\u662f\u4ec0\u4e48\u5462\uff1f\n\n\u6211\u4eec\u5047\u8bbe\u6700\u9ad8\u4f4d\u662f\u7b2c k \u4f4d\uff0c\u90a3\u4e48 $\\sum^{n}_{i = 1}a_i$ \u4e00\u5b9a\u8981 $\\le 2^{k + 1}$\uff0c\u9996\u5148\u6211\u4eec\u6700\u5927\u503c\u5728\u7b2c k \u4f4d\u4e0a\uff0c\u800c\u5f02\u6216\u53c8\u662f\u4e0d\u8fdb\u4f4d\u52a0\u6cd5\uff0c\u6240\u4ee5\u8fd9\u4e2a\u533a\u95f4\u7684\u548c\u5c31\u662f\u4e00\u5b9a\u8981 $\\le 2^{k + 1}$ \u7684\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u66b4\u529b\u679a\u4e3e $r$\uff0c\u5f53\u9047\u5230\u4e0d\u7b26\u5408\u8fd9\u4e2a\u6761\u4ef6\u7684 $r$ \u65f6\uff0c\u5c31\u7ec8\u6b62\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u7136\u540e\u518d\u5012\u7740\uff0c\u5bf9\u4e8e $r$ \u679a\u4e3e $l$\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n## \u8bc1\u660e\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\u5047\u8bbe\u8fd9\u662f\u4ee5\u7b2c $k$ \u4f4d\u4e8c\u8fdb\u5236\uff0c\u90a3\u4e48\u6700\u591a\u6709 $\\log n$ \u4f4d\u4e8c\u8fdb\u5236\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u4e8c\u8fdb\u5236\u7684\u60c5\u51b5\u4e0b\u5462\uff0c\u6211\u4eec\u53bb\u8ba8\u8bba\u3002\n\n\u6211\u4eec\u5047\u8bbe\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u4e3a $k$\uff0c\u7684\u4e0b\u6807\u6709\uff1a $p_1 , p_2 ... ... p_n$\uff0c\u5047\u8bbe $l = p_1$\uff0c\u90a3\u4e48\u5f53 $r = p_3$ \u65f6\u4e00\u5b9a\u4f1a\u7ec8\u6b62\uff0c\u56e0\u4e3a\u8981\u662f $l = p_1 , r = p_3$ \u65f6\uff0c\u7d2f\u52a0\u548c\u5c31\u662f\uff1a$p_2 + p_3$ \u800c\u8fd9\u4e2a\u6570\u4e00\u5b9a\u4f1a\u8d85\u8fc7 $2^{k + 1}$\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a\u4e0b\u6807\u7d2f\u52a0\u548c\u662f\u591a\u5c11\uff1a\n$\\sum^{x}_{i = 3} p_i - p_{i - 2}$\n\n\u90a3\u4e48\u8fd9\u4e9b\u6570\u7684\u7d2f\u52a0\u548c\u7b97\u4e0b\u6765\u4ed6\u5c31\u662f $p_x + p_{x - 1} - p_1 - p_2 \\le 2n$\uff0c\u5c31\u662f\u4e00\u4e2a $O(n)$ \u7ea7\u522b\u7684\u3002\n\n\u6709 $\\log n$ \u6b21\u64cd\u4f5c\uff0c\uff0c\u6bcf\u6b21 $O(n)$ \u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\n\n## AC CODE:\n```cpp\n#include <iostream> \n#include <algorithm>\n#include <vector>\n#include <cstring>\n#include <cstdio>\n#include <set>\nusing namespace std;\ntypedef long long ll;\nconst int N = 200010;\nint n;\nint a[N];\nset <pair <int , int>> s;//\u7528set\u53bb\u91cd\nint log2 (int x) {//\u6c42log2 \n\tint cnt = 0;\n\twhile (x) {\n\t\t++ cnt;\n\t\tx >>= 1;\n\t}\n\treturn cnt;\n}\nvoid solve (bool op) {//0\u4ee3\u8868\u6b63\u7740\uff0c1\u4ee3\u8868\u5012\u7740 \n\tvector <int> pre (n + 10);\n\tfor (int i = 1; i <= n; ++ i)\n\t\tpre[i] = pre[i - 1] + a[i];//\u6c42\u524d\u7f00\u548c \n\tfor (int i = 1; i <= n - 2; ++ i) {\n\t\tll sum = a[i + 1];\n\t\tint x = log2 (a[i]) + 1;\n\t\tfor (int j = i + 2; j <= n; ++ j) {\n\t\t\tif ((a[i] ^ a[j]) == pre[j - 1] - pre[i]) {//\u770b\u770b\u8fd9\u4e2a\u533a\u95f4\u662f\u5426\u6ee1\u8db3\u8fd9\u4e2a\u6027\u8d28 \n\t\t\t\tif (!op) s.insert ({i , j});//\u6b63\u7740\u76f4\u63a5\u63d2\u5165 \n\t\t\t\telse s.insert ({n - j + 1 , n - i + 1});//\u5012\u7740 \n\t\t\t}\n\t\t\tif ((sum + a[i]) > (1ll << x)) break;//\u8d85\u8fc7\u4e86\u8303\u56f4\uff0cbreak \n\t\t\tsum += a[j];\n\t\t}\n\t}\n}\nint main() {\n\tscanf (\"%d\" , &n);\n\tfor (int i = 1; i <= n; ++ i)\n\t\tscanf (\"%d\" , &a[i]);\n\tsolve (0);//\u6b63\u7740\u6765\n\treverse (a + 1, a + 1 + n);\n\tsolve (1);//\u5012\u7740\u6765\n\tprintf (\"%d\\n\" , (int)s.size());//\u8f93\u51fa\u7b54\u6848\n\treturn 0;\n}\n```\n\u7801\u5b57\u4e0d\u6613\uff0c\u6c42\u8d5e\uff01",
        "postTime": 1651061041,
        "uid": 528430,
        "name": "FiraCode",
        "ccfLevel": 0,
        "title": "CF1438E"
    },
    {
        "content": "# CF1438E Yurii Can Do Everything\n\n## Introduction\n\n\u6280\u4e0d\u5982\u4eba\uff0c\u7518\u62dc\u4e0b\u98ce\u3002\n\n## Solution\n\n\u6211\u4eec\u9996\u5148\u89c2\u5bdf\u9898\u76ee\u7ed9\u51fa\u7684\u6761\u4ef6:\n$$\na(l)\\oplus a(r)=\\sum_{l+1}^{r-1} a(i)\n$$\n\u90a3\u4e48\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5982\u679c $ \\sum_{l+1}^{r-1} a(i) $ \u5df2\u7ecf\u5927\u4e8e\u4e86 $ \\max(a(l),a(r)) $ \u7684\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u7684\u540e\u4e00\u4f4d\uff0c\u90a3\u4e48\u4ed6\u4e00\u5b9a\u662f\u4e0d\u53ef\u80fd\u5408\u6cd5\u7684\u3002\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u9ad8\u5999\u7684\u505a\u6cd5\uff0c\u5c31\u662f\u6211\u4eec\u4ece $ l $ \u7684\u8fd9\u4e00\u6bb5\u5f00\u59cb\uff0c$ r $ \u7528\u4e00\u6839\u6307\u9488\u4e00\u76f4\u5411\u540e\u626b\uff0c\u77e5\u9053\u4ed6\u5927\u4e8e\u4e86 $ a(l) $ \u7684\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u7684\u540e\u4e00\u4f4d\u4e3a\u6b62\uff0c\u7136\u800c\u8fd9\u6837\u5b50\u4e00\u5b9a\u662f\u6709\u91cd\u590d\u7684\uff0c\u5982\u4f55\u89e3\u51b3\uff1f\u6211\u4eec\u53ef\u4ee5\u4ece $ r $ \u7684\u90a3\u4e00\u6bb5\u518d\u5411\u524d\u626b\uff0c\u7528\u540c\u6837\u7684\u505a\u6cd5\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u6837\u5b50\u662f\u53ef\u884c\u7684\u5462\uff1f\n\n\u56e0\u4e3a\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u7684\u540e\u4e00\u4f4d\u7684\u5927\u5c0f\u5728\u8d77\u59cb\u70b9\u7ed9\u5b9a\u540e\u662f\u4e0d\u4f1a\u53d8\u7684\uff0c\u6240\u4ee5\u957f\u5ea6\u662f\u5355\u8c03\u7684\uff0c\u4e0d\u5b58\u5728\u79fb\u52a8\u5230\u4e00\u534a\u5c31\u505c\u4e0b\u6765\uff0c\u518d\u540e\u9762\u53c8\u53ef\u4ee5\u7684\u60c5\u51b5\u3002\n\n\u6b63\u786e\u6027\u5df2\u7ecf\u8bc1\u660e\u4e86\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u89e3\u51b3\u7684\u662f\u4e3a\u4ec0\u4e48\u4ed6\u7684\u590d\u6742\u5ea6\u662f\u6b63\u786e\u7684\uff0c\u6211\u4eec\u8003\u8651\u5bf9\u6bcf\u4e00\u4f4d\u8fdb\u884c\u5206\u6790\u3002\n\n\u6211\u4eec\u5047\u8bbe\u73b0\u5728\u5728\u5904\u7406\u7684\u8fd9\u4e00\u4f4d\u662f $ x $\uff0c\u90a3\u4e48\u4ed6\u6700\u591a\u7ecf\u8fc7\u4e24\u4e2a\u6700\u9ad8\u4f4d\u662f\u4ed6\u4e4b\u540e\u5c31\u4e0d\u884c\u4e86\uff0c\u90a3\u4e48\u5bf9\u6bcf\u4e00\u4f4d\u6240\u4f1a\u79fb\u52a8\u7684\u6700\u5927\u6b21\u6570\u90fd\u662f $ n $\uff0c\u800c\u603b\u5171\u53ea\u6709 $ 30 $ \u51e0\u4f4d\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u5c31\u4fdd\u8bc1\u4e86\u3002\n\n## Code\n\n```c++\n\tn=read();\n\tfor (i=1;i<=n;i++) a[i]=read();\n\tfor (lft=1;lft<=n-2;lft++){\n\t\tup=check(a[lft]);\n\t\t\n\t\trit=lft+2;sum=a[lft+1];\n\t\twhile ((rit<=n)&&(sum<=up)){\n\t\t\tif (sum==(a[rit]^a[lft])) G.insert(make_pair(lft+1,rit-1));\n\t\t\tsum+=a[rit];rit++;\n\t\t}\n\t}\n\tfor (rit=n;rit>=3;rit--){\n\t\tup=check(a[rit]);//\u627e\u5230\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u7684\u540e\u4e00\u4f4d\n\t\tlft=rit-2;sum=a[rit-1];\n\t    while ((lft>=1)&&(sum<=up)){\n\t    \t\n\t\t\tif (sum==(a[rit]^a[lft])) G.insert(make_pair(lft+1,rit-1));\n\t\t\tsum+=a[lft];lft--;\n\t\t}\n\t}\n\tcout<<G.size()<<endl;\n```\n\n## Enlightenment\n\n\u770b\u5230\u4e00\u4e9b\u770b\u4f3c\u6ca1\u6709\u7528\u5904\u7684\u4f18\u5316\u7684\u65f6\u5019\uff0c\u4e0d\u8981\u76f4\u63a5\u653e\u5f03\uff0c\u82b1\u4e00\u70b9\u65f6\u95f4\u53bb\u601d\u8003\u4e00\u4e0b\u66b4\u529b\u4f18\u5316\u662f\u5426\u5c31\u662f\u6b63\u89e3\u3002",
        "postTime": 1643191142,
        "uid": 508480,
        "name": "Albedo",
        "ccfLevel": 0,
        "title": "CF1438E Yurii Can Do Everything"
    }
]
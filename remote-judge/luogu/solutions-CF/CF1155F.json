[
    {
        "content": "\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u6bd2\u7624\u4eec\u60f3\u8ba9\u6211\u4eec\u5199\u72b6\u538bdp\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u5982\u4f55\u4e0d\u5199\u72b6\u538bdp\u3002\n\n\u7531\u4e8e\u8fd9\u9898\u7684\u6570\u636e\u8303\u56f4\u5f88\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u968f\u673a\u3002\n\n\u5047\u8bbe\u5f53\u524d\u968f\u673a\u5230\u7684\u6570\u4e3atmp\uff0c\u5219\u5206\u4e3a3\u79cd\u60c5\u51b5\uff1a\n\n1.\u5c06\u6240\u6709\u7684\u70b9\u8bbe\u7f6e\u4e3a\"\u9009\u62e9\"\uff08\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u5728\u4e00\u5f00\u59cb\u6709\u4e00\u4e2a\u4e0d\u597d\u7684\u5f00\u5934\uff09\n\n2.\u968f\u673a\u5220\u9664\u4e00\u6761\u8fb9\n\n3.\u968f\u673a\u8865\u56de\u4e00\u6761\u8fb9\n\n\u7531\u4e8e\u8981\u4f7f\u5f97\u6700\u7ec8\u7ed3\u679c\u6700\u5c0f\uff0c\u6240\u4ee52\u7684\u6982\u7387\u8981\u5927\u70b9\n\n\u6d4b\u8bd5\u5f97\u52301\u4e3a$\\frac{1}{1024}$\uff0c2\u4e3a$\\frac{3}{4}$\uff0c3\u4e3a$\\frac{1}{4}$\u65f6\u53ef\u4ee5\u8fc7\u3002\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mxn=15;\nvector<short>g[mxn];\nshort n,m;\nvector<pair<short,short> >edges,cur;\nvector<pair<short,short> >erases,ans;\nbool used[mxn];\ninline bool go(){  //\u76f4\u63a5\u66b4\u529b\u5224\u8fb9\u53cc\n\tfor(short i=0;i<cur.size();++i){\n\t\tmemset(g,0,sizeof(g));\n\t\tfor(short j=0;j<cur.size();++j)if(i!=j)g[cur[j].first].push_back(cur[j].second),g[cur[j].second].push_back(cur[j].first);\n\t\tmemset(used,0,sizeof(used));\n\t\tqueue<int>q;q.push(1);\n\t\tfor(;q.size();){\n\t\t\tint p=q.front();q.pop();\n\t\t\tfor(int j=0;j<g[p].size();++j){\n\t\t\t\tif(!used[g[p][j]]){\n\t\t\t\t\tused[g[p][j]]=1;\n\t\t\t\t\tq.push(g[p][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t} \n\t\tfor(short i=1;i<=n;++i)if(!used[i])return 0;\n\t}\n\treturn 1;\n}\ninline void solve(){\n\tcin>>n>>m;\n\tfor(short i=1,x,y;i<=m;++i){\n\t\tcin>>x>>y;\n\t\tedges.push_back({x,y});\n\t\tans.push_back({x,y});\n\t}\n\tclock_t St=clock();\n\tcur=edges;\n\tfor(;clock()-St<1900;){  //\u5361\u65f6\u95f4\n\t\tshort rd=rand();\n\t\tif(rd%1024==0 or edges.size()==0){\n\t\t\tcur=edges;\n\t\t\terases.clear();\n\t\t\tcontinue;\n\t\t}\n\t\tif(rd%4 or !erases.size()){\n\t\t\tshort tmp=rand()%(cur.size());\n\t\t\tpair<short,short>pt=cur[tmp];\n\t\t\tcur.erase(cur.begin()+tmp);\n\t\t\tif(go()){\n\t\t\t\tif(cur.size()<ans.size())ans=cur;\n\t\t\t}else{\n\t\t\t\tcur.push_back(pt);\n\t\t\t}\n\t\t}else{\n\t\t\tshort tmp=rand()%(erases.size());\n\t\t\tcur.push_back(erases[tmp]);\n\t\t\terases.erase(erases.begin()+tmp);\n\t\t}\n\t}\n\tcout<<ans.size()<<'\\n';\n\tfor(short i=0;i<ans.size();++i)cout<<ans[i].first<<' '<<ans[i].second<<'\\n';\n}\nint main(){\n\tsrand(time(NULL));\n\tios_base::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0);\n\tshort T=1;//cin>>T;\n\tfor(;T--;)solve();\n}\n```",
        "postTime": 1596198816,
        "uid": 226760,
        "name": "RedLycoris",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1155F \u3010Delivery Oligopoly\u3011"
    },
    {
        "content": "\u4f1f\u5927\u7684 zrm \u66fe\u7ecf\u8bf4\u8fc7\uff1a\n\n> \u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u6bd2\u7624\u4eec\u60f3\u8ba9\u6211\u4eec\u5199\u72b6\u538b dp\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u5982\u4f55\u4e0d\u5199\u72b6\u538b dp\u3002\n\n\u4f46\u662f zrm \u7684\u505a\u6cd5\u9700\u8981\u8bd5\u4e00\u4e9b\u6982\u7387\uff0c\u8fd9\u53ef\u80fd\u5728 CF \u7684\u6bd4\u8d5b\u4e2d\u5e26\u6765\u4e00\u4e9b\u7f5a\u65f6\u3002\u6240\u4ee5\u6211\u4eec\u6362\u4e2a\u505a\u6cd5\u3002\n\n\u8003\u8651\u4e00\u4e2a\u751f\u6210\u53cc\u8054\u901a\u5b50\u56fe\u7684\u65b9\u6cd5\uff1a\u8dd1\u4e00\u904d tarjan\uff0c\u521d\u59cb\u65f6\u53ea\u9009\u62e9\u6240\u6709\u6811\u8fb9\uff0c\u6bcf\u6b21\u5f53\u4e00\u4e2a\u70b9\u5373\u5c06\u548c\u7236\u4eb2\u65ad\u5f00\uff0c\u4e5f\u5c31\u662f\u4ed6\u6240\u6709\u513f\u5b50\u7684 low \u503c\u6bd4\u4ed6\u7684 dfn \u8981\u5927\u7684\u65f6\u5019\uff0c\u5c31\u52a0\u5165\u4e00\u6761\u5b50\u6811\u5185\u5f80\u4e0a\u8fde\u7684\u5c3d\u91cf\u9ad8\u7684\u8fb9\uff0c\u4e5f\u5c31\u662f\u53e6\u4e00\u7aef\u6df1\u5ea6\u8981\u5c3d\u91cf\u5c0f\u3002\n\n\u53ef\u60dc\u8fd9\u4e2a\u505a\u6cd5\u5f97\u5230\u7684\u5b50\u56fe\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6bcf\u6b21\u968f\u673a\u9009\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u6839\u8fdb\u884c tarjan\uff0c\u7136\u540e\u6bcf\u6b21\u968f\u673a\u6253\u4e71\u90bb\u63a5\u8868\u7684\u987a\u5e8f\uff0c\u8dd1 $10^5$ \u6b21\u6216\u8005\u8fdb\u884c\u4e00\u4e2a\u5361\u65f6\u5373\u53ef\u901a\u8fc7\u3002\n\n```cpp\n//Author: Kevin5307\n#include<bits/stdc++.h>\n//#pragma GCC optimize(\"O2\")\nusing namespace std;\n#define ll long long\n#define pb push_back\n#define mp make_pair\n#define ALL(x) (x).begin(),(x).end()\n#define rALL(x) (x).rbegin(),(x).rend()\n#define srt(x) sort(ALL(x))\n#define rev(x) reverse(ALL(x))\n#define rsrt(x) sort(rALL(x))\n#define sz(x) (int)(x.size())\n#define inf 0x3f3f3f3f\n#define pii pair<int,int>\n#define lb(v,x) (int)(lower_bound(ALL(v),x)-v.begin())\n#define ub(v,x) (int)(upper_bound(ALL(v),x)-v.begin())\n#define uni(v) v.resize(unique(ALL(v))-v.begin())\n#define longer __int128_t\nvoid die(string S){puts(S.c_str());exit(0);}\nint low[15],dfn[15],low2[15];\nint t;\nvector<int> G[15];\nvector<pii> vec;\npii up[15];\nvoid dfs(int u,int fa)\n{\n\trandom_shuffle(ALL(G[u]));\n\tlow[u]=low2[u]=dfn[u]=++t;\n\tfor(auto v:G[u])\n\t\tif(v!=fa)\n\t\t{\n\t\t\tif(dfn[v])\n\t\t\t{\n\t\t\t\tif(dfn[v]<low[u])\n\t\t\t\t\tup[u]=mp(u,v);\n\t\t\t\tlow[u]=min(low[u],dfn[v]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvec.pb(mp(v,u));\n\t\t\t\tdfs(v,u);\n\t\t\t\tif(low[u]>low[v])\n\t\t\t\t\tup[u]=up[v];\n\t\t\t\tlow[u]=min(low[u],low[v]);\n\t\t\t\tlow2[u]=min(low2[u],low2[v]);\n\t\t\t}\n\t\t}\n\tif(dfn[u]==low2[u]&&fa)\n\t{\n\t\tvec.pb(up[u]);\n\t\tlow2[u]=low[u];\n\t}\n}\nvector<pii> ans;\nint main()\n{\n\tsrand(114514);\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u,v;\n\t\tscanf(\"%d%d\",&u,&v);\n\t\tG[u].pb(v);\n\t\tG[v].pb(u);\n\t\tans.pb(mp(u,v));\n\t}\n\tfor(int j=0;j<100000;j++)\n\t{\n\t\tt=0;\n\t\tmemset(dfn,0,sizeof(dfn));\n\t\tmemset(low,0,sizeof(low));\n\t\tmemset(low2,0,sizeof(low2));\n\t\tvec.clear();\n\t\tdfs(rand()%n+1,0);\n\t\tif(sz(vec)<sz(ans))\n\t\t\tans=vec;\n\t}\n\tprintf(\"%d\\n\",sz(ans));\n\tfor(auto pr:ans)\n\t\tprintf(\"%d %d\\n\",pr.first,pr.second);\n\treturn 0;\n}\n```\n\nBonus\uff1a\u8fd9\u4e2a\u505a\u6cd5\u6781\u5176\u4f18\u79c0\uff0c\u4ee5\u81f3\u4e8e\u4f3c\u4e4e\u8dd1\u4e2a $10^3$ \u6b21\u5c31\u80fd AC\uff1f\u4e0d\u592a\u4f1a\u8bc1\u3002",
        "postTime": 1678608229,
        "uid": 172020,
        "name": "Kevin090228",
        "ccfLevel": 8,
        "title": "Delivery Oligopoly \u9898\u89e3"
    },
    {
        "content": "QAQ \u8fd9\u91cc\u662f\u6734\u7d20\u7684\u72b6\u538b dp\n\n\u9996\u5148 $n\\le14$ \u80af\u5b9a\u60f3\u5230\u72b6\u538b\u76f8\u5173\uff0c\u66f4\u8fdb\u4e00\u6b65\u7684\u8bdd\u662f\u5b50\u96c6\u679a\u4e3e\u7684\u590d\u6742\u5ea6\u3002\u90a3\u4e48\u6211\u4eec\u5bb9\u6613\u8bbe\u51fa\u72b6\u6001 $dp_S$ \u8868\u793a $S$ \u96c6\u5408\u5185\u7684\u70b9\u7ec4\u6210\u8fb9\u53cc\u6240\u9700\u7684\u6700\u5c0f\u8fb9\u6570\u3002\n\n\u4f46\u662f\u4f60\u53d1\u73b0\u4e00\u4e2a\u96c6\u5408\u662f\u8fb9\u53cc\u4e0d\u4ee3\u8868\u5b83\u7684\u5b50\u96c6\u90fd\u662f\u8fb9\u53cc\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u627e\u5230\u4e00\u79cd\u826f\u597d\u7684\u6269\u5c55\u65b9\u5f0f\uff0c\u4f7f\u5f97\u4ece $dp_S$ \u51fa\u53d1\u80fd\u8f6c\u79fb\u5230\u6240\u6709\u5305\u542b $S$ \u7684\u96c6\u5408\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4f7f\u5176\u5177\u6709\u6700\u4f18\u5b50\u7ed3\u6784\u3002\n\n\u8fd9\u91cc\uff0c\u6211\u4eec\u9009\u62e9\u6bcf\u6b21\u679a\u4e3e $S$ \u4e2d\u4e24\u4e2a\u70b9 $u,v$\uff08$u,v$ \u53ef\u4ee5\u76f8\u540c\uff09\uff0c\u6269\u5c55\u4e00\u6761\u8fde\u63a5 $u,v$ \u7684\u94fe $T$\uff08\u5f53 $u=v$ \u5c31\u662f\u4e00\u4e2a\u73af\uff09\uff0c\u4e14 $T$ \u4e0a\u53ea\u6709 $u,v$ \u5728 $S$ \u96c6\u5408\u4e2d\u3002\n\n\u5bb9\u6613\u8bc1\u660e\u6269\u5c55\u540e\u7684\u96c6\u5408\u4e00\u5b9a\u662f\u4e00\u4e2a\u8fb9\u53cc\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u6269\u5c55\u5230\u6240\u6709\u5305\u542b $S$ \u7684\u8fb9\u53cc\uff0c\u53ef\u4ee5\u8003\u8651\u8033\u5206\u89e3\u7684\u7ed3\u8bba\uff1a\u65e0\u5411\u56fe\u6709\u8033\u5206\u89e3\u5f53\u4e14\u4ec5\u5f53\u5176\u8fb9\u53cc\u8054\u901a\u3002\u8033\u5206\u89e3\u5c31\u662f\u5c06\u4e00\u4e2a\u56fe\u62c6\u6210\u4e00\u4e2a\u73af\u548c\u82e5\u5e72\u4e2a\u8033\uff08\u8fd9\u91cc\u7684\u73af\u548c\u8033\u5c31\u662f\u6211\u4eec\u6240\u6269\u5c55\u7684\u94fe\uff09\u3002\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u81ea\u5df1\u767e\u5ea6\u4e00\u4e0b\u3002\n\n\u4e8e\u662f\u6211\u4eec\u9884\u5904\u7406 $path_{u,v,S}$ \u8868\u793a\u4ece $u$ \u5230 $v$\uff0c\u7ecf\u8fc7\u70b9\u96c6\u4e3a $S$ \u7684\u6700\u77ed\u94fe\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u76f4\u63a5 dfs\u3002\u4e4b\u540e\u901a\u8fc7\u5b50\u96c6\u679a\u4e3e\u8fdb\u884c dp \u8f6c\u79fb\u3002\n\n\u6700\u540e\u8bb0\u5f55\u8f6c\u79fb\u8def\u5f84\u5e76\u8f93\u51fa\u5373\u53ef\u3002\u590d\u6742\u5ea6\u74f6\u9888 $\\mathbb O(n^23^n)$\u3002\n\nCode\n\n\u4ee3\u7801\u5199\u4e11\u4e86\u70b9\u2026\u2026\n\n```cpp\n#include<bits/stdc++.h>\n#define p(x) (1<<((x)-1))\nusing namespace std;\nint n,m;\nbool e[15][15];\nstruct star{int val,u,v,S;}dp[1<<14],path[15][15][1<<14];\nvoid dfs(int id,int from1,int from2,int depth,int s,int S){\n\tif(path[s][id][S].val<=depth)return;\n\tpath[s][id][S]=(star){depth,from1,0,from2};\n\tfor(int i=1;i<=n;i++)if(e[id][i]){\n\t\te[id][i]=e[i][id]=0;\n\t\tdfs(i,id,S,depth+1,s,S|p(i));\n\t\te[id][i]=e[i][id]=1;\n\t}\n}\nvoid out2(int u,int v,int S){\n\tif(!path[u][v][S].u)return;\n\tint tmp=path[u][v][S].u;\n\tprintf(\"%d %d\\n\",tmp,v);\n\tout2(u,tmp,path[u][v][S].S);\n}\nvoid out(int S){\n\tif(!dp[S].u)return;\n\tout((S^dp[S].S)|p(dp[S].u)|p(dp[S].v));\n\tout2(dp[S].u,dp[S].v,dp[S].S);\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1,u,v;i<=m;i++)\n\tscanf(\"%d%d\",&u,&v),e[u][v]=e[v][u]=1;\n\tfor(int S=0;S<(1<<n);S++){\n\t\tdp[S].val=0x3f3f3f3f;\n\t\tfor(int u=1;u<=n;u++)\n\t\tfor(int v=1;v<=n;v++)path[u][v][S].val=0x3f3f3f3f;\n\t}\n\tfor(int i=1;i<=n;i++)dfs(i,0,0,0,i,p(i)),dp[p(i)].val=0;\n\tfor(int S=0;S<(1<<n);S++)\n\tfor(int u=1;u<=n;u++)if(S&p(u))\n\tfor(int v=u;v<=n;v++)if(S&p(v)){\n\t\tint U=((((1<<n)-1)^S)|p(u)|p(v));\n\t\tfor(int T=U;;T=(T-1)&U){\n\t\t\tif(dp[S|T].val>dp[S].val+path[u][v][T].val)\n\t\t\tdp[S|T]=(star){dp[S].val+path[u][v][T].val,u,v,T};\n\t\t\tif(!T)break;\n\t\t}\n\t}printf(\"%d\\n\",dp[(1<<n)-1].val),out((1<<n)-1),exit(0);\n}\n```\n",
        "postTime": 1678765711,
        "uid": 148226,
        "name": "Fan_sheng",
        "ccfLevel": 6,
        "title": "CF1155F Delivery Oligopoly"
    }
]
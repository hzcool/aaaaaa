[
    {
        "content": "$d(s)$\u4e3a\u5b57\u7b26\u4e32$s$\u7684\u5b57\u7b26\u79cd\u7c7b\u4e2a\u6570\uff0c\u6c42$d(s)$ \u7684\u503c\uff0c\u4ee5\u53ca$s$\u7684\u5b50\u4e32\u4e2d\uff0c\u5b57\u7b26\u79cd\u7c7b\u4e3a$1,2,...,d(s)$ \u7684\u5206\u522b\u6709\u591a\u5c11\u4e2a\u3002\n\nCF\u4e0a\u7684\u6807\u7b7e\u662f`dp` \u548c `two pointers`\u3002\n\n\u7b2c\u4e8c\u6b21\u9047\u5230\u7684\u53cc\u6307\u9488\u7684\u9898\uff0c\u4e0a\u4e00\u6b21\u9047\u5230\u662fCF\u7684514D\u3002\u8fd9\u4e2a\u7684\u53cc\u6307\u9488\u6bd4514D\u7684\u8981\u7a0d\u5fae\u9ebb\u70e6\u4e00\u4e9b\uff0c\u5b9e\u9645\u4e0a\u662f\u201d\u4e09\u6307\u9488\u201c\u3002\n\n\u53cc\u6307\u9488\u4e3b\u8981\u7528\u4e8e\uff0c\u9700\u8981\u904d\u5386\u67d0\u4e2a\u533a\u95f4\u7684\u6240\u6709\u5b50\u533a\u95f4 \u7684\u65f6\u5019\uff0c\u76f4\u63a5\u679a\u4e3e\u5de6\u53f3\u8fb9\u754c\u7684\u8bdd\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n^2)$,\u7528\u53cc\u6307\u9488\u7684\u8bdd\uff0c\u662f$O(n)$\u3002\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\u800c\u8a00\uff0c\u5bf9 $k =1,2,..,d(s)$ \u00a0\u5206\u522b\u8ba1\u7b97 $t(k)$\u3002\n\n\u9996\u5148\u679a\u4e3e\u533a\u95f4\u5de6\u7aef\u70b9$L$\uff0c$R_1$\u4e3a\u4fdd\u8bc1$d \\Big( \\big[L,R\\big] \\Big)=k$ \u7684\u6700\u5c0f$R$\u503c\uff0c$R_2$\u4e3a\u4fdd\u8bc1$d \\Big( \\big[L,R\\big] \\Big) > k$ \u00a0\u7684\u6700\u5c0f$R$\u503c,\u8fd9\u6837\u7684\u8bdd\uff0c\u4ee5$L$\u4e3a\u5de6\u7aef\u70b9\u7684\u533a\u95f4\u4e2d\uff0c\u5b57\u7b26\u79cd\u6570\u4e3a$k$\u7684\u5c31\u6709$R_2-R_1$\u79cd\u3002\n\n\u53cc\u6307\u9488\u80fd\u7b80\u5316\u8fd0\u7b97\u5c31\u5728\u4e8e\uff0c$L+1$\u6240\u5bf9\u5e94\u7684$R1$\u548c$R_2$ \u4e00\u5b9a\u5927\u4e8e\u7b49\u4e8e\u539f\u5148$L$\u5bf9\u5e94\u7684$R_1$\u548c$R_2$,\u6240\u4ee5\uff0c\u8ba1\u7b97\u65b0\u7684$R_1$\u548c$R_2$\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u4ece\u539f\u6765\u7684$R_1$,$R_2$\u5f80\u540e\u52a0\u5c31\u884c\u4e86\uff0c\n\n\u8fd9\u6837\u5c31\u53d8\u6210\u4e86$L$,$R_1$,$R2$\u8fd9\u4e09\u4e2a\u6307\u9488\u7684\u5355\u8c03\u9012\u589e\uff0c\u4e8e\u662f\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u5c31\u53d8\u6210$O(n)$\u7684\u4e86\u3002\n\n\u6709\u4e00\u4e2a\u4f8b\u5916\u60c5\u51b5\uff0c\u5f53$[L,R_1]$\u7684\u5b57\u7b26\u79cd\u6570\u5c0f\u4e8e$k$\u7684\u65f6\u5019\uff0c\u82e5$R_1<n$ \u5219$R_1++$,\u6240\u4ee5\uff0c\u82e5\u51fa\u73b0\u00a0$[L,R_1]$\u7684\u5b57\u7b26\u79cd\u6570\u5c0f\u4e8e$k$\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0c\u4e00\u5b9a\u662f$R_1=n$,$R_2=n+1$;\n\n\u8fd9\u65f6\uff0c\u7531\u4e8e\u7b54\u6848\u4e0d\u518d\u662f$R_2-R_1$\u79cd,\u800c\u662f$R_2-R_1-1$\u79cd\uff0c\u6240\u4ee5\u5176\u5b9e\u8868\u8fbe\u5f0f\u5e94\u8be5\u662f `ANS+=R2-R1-(R1==n);`\n\n\u00a0\u5f53\u7136\uff0c`\uff08R1==n)`\u7b49\u4ef7\u4e8e \u00a0 \u00a0(\u00a0$[L,R_1]$\u7684\u5b57\u7b26\u79cd\u6570\u5c0f\u4e8ek) \u00a0 \u00a0 \u5728\u6211\u7684\u4ee3\u7801\u4e2d\u5373\u4e3a`(M1.m<k)`:\n # ~~W~~AC\u4ee3\u7801:\n ```cpp\n #include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#define maxn 300007\nusing namespace std;\nstruct Mark{//\u5b58\u50a8\u72b6\u6001\u7684\u7ed3\u6784\u4f53\n\tint cnt[26];\n\tint m;\n\tMark(){memset(cnt,0,sizeof(cnt));m=0;}\n};\nstring str;\nint n;\nlong long d[27];\nint getK(Mark m){\n\tint ANS=0;\n\tfor(int i=0;i<26;++i) ANS+=(m.cnt[i]>0);\n\treturn ANS;\n}\nvoid T(int k){//\u6c42 T(k) \n\tint R1=1,R2=1;//[L,[R1..R2)]\u4e3a\u4ee5L\u5f00\u59cb\u7684\u533a\u95f4 \n\tMark M1,M2;//\u533a\u95f4[L,R1]\u548c [L,R2] \u7684\u72b6\u6001 \n\tM1.cnt[str[0]-'a']++;M1.m=1;M2=M1;\n\tfor(int L=1;L <=n;++L){//\u679a\u4e3e\u5de6\u7aef\u70b9 \n\t\t//\u66f4\u65b0 M1,M2 \u4f7f\u4e4b\u5bf9\u5e94\u533a\u95f4 [L,R1]\u548c[L,R2] (\u8fd9\u91cc\u7684L\u662f\u65b0\u7684L\u3002\u800cM1,M2\u5bf9\u5e94\u7684\u662f\u65e7L\u7684\u533a\u95f4)\n\t\tif(L>1){ \n\t\t\tM1.cnt[str[L-2]-'a']--;if(!M1.cnt[str[L-2]-'a']) M1.m--;\n\t\t\tM2.cnt[str[L-2]-'a']--;if(!M2.cnt[str[L-2]-'a']) M2.m--;\n\t\t}\n\t\t//\u8ba1\u7b97\u65b0\u7684R1,R2 \n\t\twhile(M1.m < k&&R1 < n){if(!M1.cnt[str[R1]-'a']) M1.m++;M1.cnt[str[R1++]-'a']++;}\n\t\twhile(M2.m <=k&&R2 <=n){if(!M2.cnt[str[R2]-'a']) M2.m++;M2.cnt[str[R2++]-'a']++;}\n\t\t//\u7d2f\u52a0\u8ba1\u7b97\u7ed3\u679c \n\t\td[k]+=R2-R1-(M1.m <k);//printf(\"d[%d]+=%d (L=%d  R1=%d R2=%d)\\n\",k,R2-R1,L,R1,R2);\n\t}\n}\nint main(void)\n{\n\twhile(cin>>str){\n\t\tMark M; \n\t\tn=str.length();\n\t\tfor(int i=0;i<n;++i) M.cnt[str[i]-'a']++;\n\t\tmemset(d,0,sizeof(d));\n\t\tint D=getK(M);\n\t\tfor(int i=1;i<=D;++i){T(i);}\n\t\tprintf(\"%d\\n\",D);\n\t\tfor(int i=1;i<=D;++i){\n\t\t\tcout<<d[i]<<endl;\n\t\t}\n\t}\nreturn 0;\n}\n ```\n > [\u539f\u6587](https://blog.csdn.net/zearot/article/details/43955707)",
        "postTime": 1557022813,
        "uid": 131288,
        "name": "\u6d77\u4e4b\u7737\u604b8",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF386C \u3010Diverse Substrings\u3011"
    },
    {
        "content": "[\u9898\u610f](https://www.luogu.com.cn/discuss/464141)\n\n\u5176\u5b9e\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u5148\u679a\u4e3e\u53f3\u7aef\u70b9\u7684\u8bdd\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684 $d$ \u7684\u503c\uff0c\u5de6\u7aef\u70b9\u7684\u6570\u91cf\u4ec5\u4ec5\u6709 $26$ \u4e2a\u3002\n\n\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u5f88\u591a\u5de6\u7aef\u70b9\u6765\u8bf4\uff0c\u4ed6\u4eec\u5230\u53f3\u7aef\u70b9\u7684\u5b50\u4e32 $d$ \u7684\u503c\u662f\u7c7b\u4f3c\u7684\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u5b83\u5177\u6709\u5355\u8c03\u6027\uff0c\u53ef\u4ee5\u8fdb\u884c\u4e8c\u5206\uff0c\u5177\u4f53\u7684\uff0c\u5bf9\u4e8e\u4ee5\u53f3\u7aef\u70b9 $i$ \u5f00\u59cb\u7684\uff0c\u6bcf\u4e00\u6bb5\u90fd\u4e8c\u5206\u4e00\u4e0b\u6700\u8fdc\u7684\u5de6\u7aef\u70b9\uff0c\u7136\u540e\u8bb0\u5f55\u524d\u7f00\u548c check\u3002\n\n~~\u7136\u800c\u8fc7\u4e0d\u53bb\u3002~~\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long \nusing namespace std;\nconst int INF=3e5+5;\nstring s1;\nint sum[INF][35],t[35];\nint check(int l,int r) {\n//\tcout<<l<<\" \"<<r<<\" \"<<\"bomb\\n\";\n\tint ans=0;\n\tfor (int i=0;i<26;i++)\n\t\tif (sum[r][i]-sum[l-1][i]) ans++;\n\treturn ans;\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>s1;int len=s1.size();s1=\" \"+s1;\n\tfor (int i=1;i<=len;i++) {\n\t\tfor (int j=0;j<26;j++) \n\t\t\tsum[i][j]=sum[i-1][j]+((s1[i]-'a')==j);\n\t}\n\t\n\tfor (int i=1;i<=len;i++) {\n\t\tint j=i;\n\t\twhile (j>=1) {\n\t\t\tint l=1,r=j,ans=-1,xx=check(j,i);\n\t\t\twhile (l<=r) {\n\t\t\t\tint Mid=(l+r)>>1;\n\t\t\t\tif (check(Mid,i)==xx) r=(ans=Mid)-1;\n\t\t\t\telse l=Mid+1;\n\t\t\t}\n\t\t\tt[xx]+=j-ans+1;\n\t\t\tj=ans-1;\n//\t\t\tcout<<j<<\" \"<<ans<<\" ??\\n\";\n\t\t}\n\t}\n\t\n\tcout<<check(1,len)<<\"\\n\";\n\t\n\tfor (int i=1;i<=26;i++)\n\t\tif (t[i]) cout<<t[i]<<\"\\n\";\n\treturn 0;\n}\n```\n\n\u53ef\u60dc\uff0c\u8fd9\u91cc\u662f $3 \\times 10^5$ \uff0c\u6211\u672c\u5730\u8dd1\u5927\u7ea6\u662f 2.5s\uff0cCF \u4e0a\u7684\u8fdc\u53e4\u9898\u65f6\u9650\u90fd\u6bd4\u8f83\u7d27\uff0c\u6240\u4ee5\u8fc7\u4e0d\u53bb\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u5982\u4f55\u4f18\u5316\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u590d\u6742\u5ea6\u7684\u74f6\u9888\u51fa\u5728\u4e8c\u5206\u4ee5\u53ca check\u3002\n\n\u5047\u5982\u8bf4\u6211\u4eec\u4ee5\u53ca\u77e5\u9053\u4e86\u8981\u8bb0\u5f55\u7684 $d$ \u7684\u503c\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u505a\u4e00\u70b9\uff1f\n\n\u8003\u8651\u679a\u4e3e\u8fd9\u4e2a $d$ \u7684\u503c\uff0c\u7136\u540e\u518d\u53bb\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u4ecd\u7136\u5177\u6709\u5355\u8c03\u6027\uff0c\u5e76\u4e14\u5f88\u597d\u7528\u53cc\u6307\u9488\u53bb\u7ef4\u62a4\u3002\n\n\u4f46\u662f\u8fd9\u9898\u7a0d\u5fae\u6709\u70b9\u70e6\uff0c\u56e0\u4e3a\u5b83\u53cc\u6307\u9488\u9700\u8981\u8bb0\u5f55\u76f8\u540c\u7684\u6570\u91cf\u3002\n\n\u5982\u679c\u4ec5\u4ec5\u8dd1\u7684\u6700\u540e\u4e00\u4e2a\u76f8\u540c\u7684\uff0c\u7136\u540e\u8dd1\u56de\u6765\uff0c\u90a3\u80af\u5b9a\u4f1a TLE \u8d77\u98de\u3002\n\n\u8003\u8651\u7528\u4e24\u4e2a\u53cc\u6307\u9488\uff0c\u4e00\u4e2a\u6307\u5411\u7b2c\u4e00\u4e2a\uff0c\u53e6\u5916\u4e00\u4e2a\u6307\u5411\u6700\u540e\u4e00\u4e2a\u3002\n\n\u548c\u83ab\u961f\u7684\u60f3\u6cd5\u4e00\u6837\uff0c\u5bf9\u4e8e\u65b0\u51fa\u73b0\u7684\u5b57\u7b26\u52a0\u5230\u4e00\u4e2a\u6876\u91cc\u9762\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5f88\u5feb\u901f\u7684\u67e5\u8be2\u5f53\u524d\u533a\u95f4\u51fa\u73b0\u5b57\u7b26\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long \nusing namespace std;\nconst int INF=3e5+5;\nstring s1;\nint sum[INF][35],t[35],la[35],la1[35];\nint check(int l,int r) {\n//\tcout<<l<<\" \"<<r<<\" \"<<\"bomb\\n\";\n\tint ans=0;\n\tfor (int i=0;i<26;i++)\n\t\tif (sum[r][i]-sum[l-1][i]) ans++;\n\treturn ans;\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>s1;int len=s1.size();s1=\" \"+s1;\n\tfor (int i=1;i<=len;i++) {\n\t\tfor (int j=0;j<26;j++) \n\t\t\tsum[i][j]=sum[i-1][j]+((s1[i]-'a')==j);\n\t}\n\t\n\tfor (int i=1;i<=26;i++) {\n\t\tint j1=0,j2=0,sum1=0,sum2=0;\n\t\tfor (int k=1;k<=len;k++) {\n\t\t\tj1=max(j1,k-1);j2=max(j2,k-1);\n\t\t\twhile (j1+1<=len && sum1<=i) {\n\t\t\t\tif (la[s1[j1+1]-'a']==0 && sum1==i) break;\n\t\t\t\tla[s1[j1+1]-'a']++;\n\t\t\t\tif (la[s1[j1+1]-'a']==1) sum1++;\n\t\t\t\tj1++;\n\t\t\t}\n//\t\t\tif (sum1>i) \n\t\t\twhile (j2+1<=len && sum2<i) {\n//\t\t\t\tif (la1[s1[j2+1]-'a']==0 && sum2==i-1) break;\n\t\t\t\tla1[s1[j2+1]-'a']++;\n\t\t\t\tif (la1[s1[j2+1]-'a']==1) sum2++;\n\t\t\t\tj2++;\n\t\t\t}\n\t\t\t\n//\t\t\tcout<<k<<\" \"<<i<<\" \"<<j1<<\" \"<<j2<<\" ?\\n\";\n\t\t\t\n\t\t\tif (sum2==i && sum1==i) t[i]+=j1-j2+1;\n\t\t\tla1[s1[k]-'a']--;\n\t\t\tif (la1[s1[k]-'a']==0) sum2--;\n////\t\t\t\n\t\t\tla[s1[k]-'a']--;\n\t\t\tif (la[s1[k]-'a']==0) sum1--;\n\t\t}\n\t}\n\t\n\tcout<<check(1,len)<<\"\\n\";\n\t\n\tfor (int i=1;i<=26;i++)\n\t\tif (t[i]) cout<<t[i]<<\"\\n\";\n\treturn 0;\n}\n```\n",
        "postTime": 1658486486,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF386C"
    }
]
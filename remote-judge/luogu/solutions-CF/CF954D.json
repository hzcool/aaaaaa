[
    {
        "content": "# \u4e3a\u4ec0\u4e48\u6ca1\u4eba\u7528 $dijkstra$ \u5462\uff1f\n\n- \u5173\u4e8e $spfa$\uff0c\u4ed6\u65e9\u5c31\u6b7b\u4e86\n\n- \u5173\u4e8e $floyd$\uff0c\u4ed6\u5df2\u6162\u6b7b\u4e86\n\n- \u5173\u4e8e $dijkstra$\uff0c\u4ed6\u4e0d\u9999\u4e48\uff1f\n\n\u9898\u610f\u5df2\u7ecf\u5f88\u660e\u663e\u4e86\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u65e0\u5411\u56fe\uff0c\u6c42\u6700\u591a\u6dfb\u52a0\u591a\u5c11\u8fb9\u53ef\u4ee5\u4fdd\u8bc1\u6700\u77ed\u8def\u4e0d\u4f1a\u6539\u53d8\u3002\n\n\u505a\u6cd5\uff1a\u7528 $dijkstra$ \u5c06\u56fe\u6b63\u53cd\u8dd1**\u4e24\u6b21**\uff0c\u5206\u522b\u5c06 $s$ \u8bbe\u4e3a\u8d77\u70b9\u548c $t$ \u8bbe\u4e3a\u8d77\u70b9\uff0c\u5c06\u6700\u77ed\u8def\u5b58\u5165\u5230 $first\\_dist$ \u4e0e $second\\_dist$ \u4e2d\uff0c\u8fd9\u65f6\uff0c\u6700\u77ed\u8def\u5df2\u7ecf\u6c42\u51fa\u6765\u4e86~~\u5e9f\u8bdd~~\uff0c\u5f00\u59cb\u52a0\u8fb9\u3002\n\n\u53ef\u4ee5\u8fd9\u6837\u60f3\uff0c\u53ea\u6709\u5f53\u5bf9\u4e8e\u4e00\u5bf9\u8282\u70b9 $(u,v)$\uff0c\u53ea\u6709\u4ece\u8d77\u70b9\u5230\u8fd9\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u52a0\u4e0a\u4ece\u7ec8\u70b9\u5230\u53e6\u4e00\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u5927\u4e8e\u7b49\u4e8e\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u8ddd\u79bb\uff0c\u624d\u53ef\u4ee5\u52a0\u8fb9\uff08\u663e\u7136\u6709\u4e24\u4e2a\u5224\u65ad\uff09\u3002\n\n**\u6ce8\u610f\uff1a** \u6700\u540e\u7b54\u6848 $ans$ \u521d\u59cb\u503c\u4e00\u5b9a\u8981\u8bbe\u4e3a $-m$ \u8fd9\u91cc\u6700\u4e3a\u601d\u8003\u9898\u5404\u4f4d $dalao$ \u73c2\u4ee5\u81ea\u5df1\u60f3\u60f3~~\u8bfb\u8005\u81ea\u8bc1\u4e0d\u96be~~\n\n$Code:$\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<vector>\n#include<queue>\nusing namespace std;\nconst int MAXN=1010;\nint n,m,s,t,second_dist[MAXN],first_dist[MAXN],ans;//\u53d8\u91cf\u540d\u79f0\u5982\u4e0a\u8ff0\u6240\u8bf4 \nstruct edge\n{\n\tint to,cost;//\u7ed3\u6784\u4f53\u88c5\u661f \n\tedge(int to,int cost):to(to),cost(cost){}//\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u5b58\u8fb9 \n};\nvector<edge>G[MAXN];\ntypedef pair<int,int>P;//\u5b9a\u4e49pair\u7c7b\u578b\u7684P \ninline int read()//\u5feb\u8bfb \n{\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')s=s*10+(ch-'0'),ch=getchar();\n\treturn s*w;\n}\nvoid dijkstra(int s)//\u6700\u77ed\u8defdijkstra\u7684\u677f\u5b50 \n{\n\tpriority_queue<P,vector<P>,greater<P> >q;\n\tfor(register int i=1;i<=n;i++) second_dist[i]=1e9;\n\tsecond_dist[s]=0;\n\tq.push(make_pair(0,s));\n\twhile(!q.empty())\n\t{\n\t\tP p=q.top();\n\t\tq.pop();\n\t\tint v=p.second;\n\t\tif(second_dist[v]<p.first) continue;\n\t\tfor(register int i=0;i<G[v].size();i++) \n\t\t{\n\t\t\tedge e=G[v][i];\n\t\t\tif(second_dist[e.to]>second_dist[v]+e.cost)\n\t\t\t{\n\t\t\t\tsecond_dist[e.to]=second_dist[v]+e.cost;\n\t\t\t\tq.push(make_pair(second_dist[e.to],e.to));\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tn=read(),m=read(),ans=-m,s=read(),t=read();//\u4e00\u5b9a\u8981\u5b58-m \n\twhile(m--)\n\t{\n\t\tint u=read(),v=read();\n\t\tG[u].push_back(edge(v,1));\n\t\tG[v].push_back(edge(u,1));\n\t\t//\u5176\u5b9e\u8fd9\u91ccvector\u4e5f\u73c2\u4ee5\u5b58int \n\t}\n\tdijkstra(s);\n\tfor(register int i=1;i<=n;i++) first_dist[i]=second_dist[i];//\u5148\u8d4b\u503c \n\tdijkstra(t);\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=i+1;j<=n;j++)\n\t\t\tif(first_dist[i]+second_dist[j]+1>=first_dist[t]&&first_dist[j]+second_dist[i]+1>=first_dist[t])\n\t\t\t\t//\u67ff\u5b50\n\t\t\t\tans++;//\u522b\u5fd8\u4e86\u66f4\u65b0 \n\tprintf(\"%d\\n\",ans);//\u5b8c\u7f8e\u8f93\u51fa \n\treturn 0;//\u5b8c\u7ed3\u6492\u82b1~~ \n}\n```\n\n\u70b9\u4e2a\u8d5e\u518d\u8d70\u5427Orz\n\n",
        "postTime": 1590673088,
        "uid": 342090,
        "name": "Fangfx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    },
    {
        "content": "\u4f5c\u4e1a\u9898\uff0c~~\u6c34\u4e00\u6c34~~\u9898\u89e3\u3002\n\n\u8003\u8651\u5206\u522b\u4ee5 $s$ \u548c $t$ \u4e3a\u8d77\u70b9\u8dd1\u6700\u77ed\u8def\uff08\u9898\u89e3\u4e2d\u7528\u7684 dijkstra \u5806\u4f18\u5316\uff0c~~\u56e0\u4e3a SPFA \u5b83\u5df2\u7ecf\u6b7b\u4e86~~\uff09\u3002\u6b64\u65f6 $n^2$ \u679a\u4e3e $i,j$ \u66b4\u529b\u5224\u65ad\u5373\u53ef\u3002\n\n\u5982\u4f55\u5224\u65ad\uff1f\u5c06 $s->i->j->t$ \u548c $s->j->i->t$ \u4e0e\u6700\u77ed\u8def\u6bd4\u8f83\u5373\u53ef\uff08\u90fd\u4e0d\u6bd4\u6700\u77ed\u8def\u77ed\uff09\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9')\n\t    ch=getchar();\n\tint res=0;\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tres=res*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn res;\n}\nint n,m,s,t,x,y,head[1001],to[2001],nxt[2001],dis1[1001],dis2[1001],tot,ans;\nbool vis1[1001],vis2[1001],e[1001][1001];\ninline void add(int x,int y)\n{\n\tto[++tot]=y;\n\tnxt[tot]=head[x];\n\thead[x]=tot;\n}\npriority_queue< pair<int,int> >q;\nvoid dijkstra1()\n{\n\tmemset(dis1,127/3,sizeof(dis1));\n\tdis1[s]=0;\n\tq.push(make_pair(0,s));\n\twhile(!q.empty())\n\t{\n\t\tint x=q.top().second;\n\t\tq.pop();\n\t\tif(vis1[x])\n\t\t\tcontinue;\n\t\tvis1[x]=1;\n\t\tfor(int i=head[x];i;i=nxt[i])\n\t\t{\n\t\t\tint y=to[i];\n\t\t\tif(dis1[y]>dis1[x]+1)\n\t\t\t{\n\t\t\t\tdis1[y]=dis1[x]+1;\n\t\t\t\tq.push(make_pair(-dis1[y],y));\n\t\t\t}\n\t\t}\n\t}\n}\nvoid dijkstra2()\n{\n\tmemset(dis2,127/3,sizeof(dis2));\n\tdis2[t]=0;\n\tq.push(make_pair(0,t));\n\twhile(!q.empty())\n\t{\n\t\tint x=q.top().second;\n\t\tq.pop();\n\t\tif(vis2[x])\n\t\t\tcontinue;\n\t\tvis2[x]=1;\n\t\tfor(int i=head[x];i;i=nxt[i])\n\t\t{\n\t\t\tint y=to[i];\n\t\t\tif(dis2[y]>dis2[x]+1)\n\t\t\t{\n\t\t\t\tdis2[y]=dis2[x]+1;\n\t\t\t\tq.push(make_pair(-dis2[y],y));\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tn=read();\n\tm=read();\n\ts=read();\n\tt=read();\n\twhile(m--)\n\t{\n\t\tx=read();\n\t\ty=read();\n\t\tadd(x,y);\n\t\tadd(y,x);\n\t\te[x][y]=e[y][x]=1;\n\t}\n\tdijkstra1();\n\tdijkstra2();\n\tfor(register int i=1;i<n;++i)\n\t\tfor(register int j=i+1;j<=n;++j)\n\t\t\tif(!e[i][j]&&dis1[i]+dis2[j]+1>=dis1[t]&&dis1[j]+dis2[i]+1>=dis1[t])\n\t\t\t\t++ans;\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1598447354,
        "uid": 68011,
        "name": "\u53e4\u660e\u5730_ypc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF954D)\n* * *\n\n\u8fd9\u9053\u9898\u4e4b\u6240\u4ee5\u662f\u84dd\u9898\uff0c\u662f\u56e0\u4e3a\u4ed6\u7684\u601d\u8def\u5341\u5206\u96be\u60f3\uff0c\u4f46\u662f\u4ee3\u7801\u5f88\u597d\u5199\u3002\n\n\u5148\u7406\u89e3\u4e00\u4e0b\u9898\u76ee:\n\n\u5728\u4e00\u4e2a\u65e0\u5411\u8054\u901a\u56fe\u4e0a\u627e\u5230\u4e00\u6761\u8fb9\uff0c\u4f7f\u5f97$s \\to t$\u7684\u6700\u77ed\u8def\u53d8\u5c0f\u3002\n\n\u6c42\u8fd9\u79cd\u8fb9\u7684\u4e2a\u6570\u3002\n\n* * *\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tudz1lri.png)\n\n\u6bd4\u5982\u8fd9\u4e2a\u56fe\uff0c\u6211\u4eec\u8981\u4f7f$s \\to t$\u7684\u8ddd\u79bb\u53d8\u77ed\uff0c\u5c31\u5f97\u52a0\u4e00\u6761\u8fb9\u6743\u4e3a1\u7684\u8fb9$x \\to y$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b5ov6m7b.png)\n\n\u4e00\u5171\u6709\u4e24\u79cd\u8def\u5f84\u53ef\u9009\n\n\u7b2c\u4e00\u79cd\uff1a\n$s \\to y \\to x \\to t$\n![](https://cdn.luogu.com.cn/upload/image_hosting/kmq6sjg4.png)\n\n\n\u7b2c\u4e8c\u79cd\uff1a\n$s \\to x \\to y \\to t$\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9zzm35b.png)\n\n\n\n\u6240\u4ee5\u4ee3\u7801\u662f\u8fd9\u6837\u5b9e\u73b0\u7684\uff1a\n\n`dis1[id]`\u8868\u793a\u4eces\u5f00\u59cb\u5230`id`\u7684\u6700\u77ed\u8def\u5f84\u3002\n`dis2[id]`\u8868\u793a\u4ecet\u5f00\u59cb\u5230`id`\u7684\u6700\u77ed\u8def\u5f84\u3002\n\n\u5148\u4eces\u548ct\u5206\u522b\u505a\u4e00\u904d`dijkstra`,\u4ed6\u4eec\u7684`dis`\u5206\u522b\u5b58\u5728dis1\u548cdis2\u91cc\u3002\n\n\u7136\u540e\u518d$O(n^2)$\u627e\u4e24\u4e2a\u70b9`(i, j)`\uff0c\u8868\u793a`(i, j)`\u4e4b\u95f4\u8fde\u4e86\u4e00\u6761\u8fb9\uff0c\u5982\u679c`dis1[i] + dis2[j] + 1 >= dis1[t]`\u5373$s \\to x \\to y \\to t$\u5c31\u8bf4\u660e\u52a0\u7684\u8fd9\u6761\u8fb9\u6210\u529f\u7684\u8ba9$s \\to t$\u7684\u6700\u77ed\u8def\u5f84\u53d8\u5c0f\u4e86,`ans++;`\n\n\u5982\u679c`dis1[j] + dis2[i] + 1 >= dis1[t]`\u5373$s \\to y \\to x \\to t$\u5c31\u8bf4\u660e\u52a0\u7684\u8fd9\u6761\u8fb9\u6210\u529f\u7684\u4e5f\u8ba9$s \\to t$\u7684\u6700\u77ed\u8def\u5f84\u53d8\u5c0f\u4e86,`ans++;`\n\n\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u5c31\u662f\u5df2\u7ecf\u6709\u7684\u8fb9\u5c31\u4e0d\u80fd\u52a0\u4e86\uff0c\u6240\u4ee5\u7528\u4e00\u4e2aflag\u8bb0\u5f55\u5df2\u7ecf\u6709\u7684\u8fb9\uff0c\u5982\u679c`flag[i][j]`\u5c31`continue`\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define MAXN 1005\nvector<int> myv[MAXN];\nint dis1[MAXN], dis2[MAXN];\nbool vis[MAXN];\nbool flg[MAXN][MAXN];\nvoid adde(int x, int y)\n{\n\tmyv[x].push_back(y);\n}\nvoid dijkstra(int s, int *dis)\n{\n\tpriority_queue<pair<int, int> > myq;\n\tmemset(vis, 0, sizeof(vis));\n\tdis[s] = 0;\n\tmyq.push(make_pair(0, s));\n\twhile(!myq.empty())\n\t{\n\t\tint id = myq.top().second;\n\t\tint sum = myq.top().first;\n\t\tmyq.pop();\n\t\tif(vis[id])\n\t\t\tcontinue;\n\t\tvis[id] = 1;\n\t\tfor(int i = 0; i < myv[id].size(); i++)\n\t\t{\n\t\t\tint nxt = myv[id][i];\n\t\t\tif(dis[nxt] > dis[id] + 1)\n\t\t\t{\n\t\t\t\tdis[nxt] = dis[id] + 1;\n\t\t\t\tmyq.push(make_pair(-dis[nxt], nxt));\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tint n, m, s, t;\n\tscanf(\"%d %d %d %d\", &n, &m, &s, &t);\n\tfor(int i = 1; i <= m; i++)\n\t{\n\t\tint u, v;\n\t\tscanf(\"%d %d\", &u, &v);\n\t\tflg[u][v]=1;\n\t\tflg[v][u]=1;\n\t\tadde(u, v);\n\t\tadde(v, u);\n\t}\n\tmemset(dis1, 0x3f, sizeof(dis1));\n\tdijkstra(s, dis1);\n\tmemset(dis2, 0x3f, sizeof(dis2));\n\tdijkstra(t, dis2);\n\tint ans = 0;\n\tfor(int i = 1; i <= n-1; i++)\n\t{\n\t\tfor(int j = i+1; j <= n; j++)\n\t\t{\t\n\t\t\tif(flg[i][j])\n\t\t\t\tcontinue;\n\t\t\tif(dis1[i]+dis2[j]+1 >= dis1[t] && dis1[j]+dis2[i]+1>=dis1[t])\n\t\t\t{\n\t\t\t\tans++;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1623568423,
        "uid": 498039,
        "name": "rain2021",
        "ccfLevel": 0,
        "title": "CF954D Fight Against Traffic"
    },
    {
        "content": "# \u9898\u89e3CF954D Fight Against Traffic\n\n### Description\n\n\u7ed9\u4f60\u4e00\u5f20\u65e0\u5411\u56fe\uff0c\u4e00\u5171\u6709 $n$ \u4e2a\u70b9 $(2 \\le n \\le 1000)$\uff0c\u7531 $m$ \u6761\u8fb9\u8fde\u63a5\u8d77\u6765($1 <= m <= 10000$)\uff0c\u73b0\u5728\u8981\u5728\u4efb\u610f\u4e00\u5bf9\u6ca1\u6709\u8fde\u8fb9\u7684\u70b9\u4e4b\u95f4\u8fde\u4e0a\u4e00\u6761\u8fb9\uff0c\u5e76\u4e14\u4fdd\u8bc1 $s$ \u5230 $t$ \u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u4e0d\u53d8\uff08\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u8868\u793a $s$ \u5230 $t$ \u6700\u5c11\u7ecf\u8fc7\u7684\u8fb9\u7684\u6570\u91cf\uff09$(1 \\le s,t \\le n , s \\ne t)$\uff0c\u8bf7\u4f60\u6c42\u51fa\u4e00\u5171\u6709\u591a\u5c11\u6761\u8fd9\u6837\u7684\u8fb9\u3002\n\n### Solution\n\n\u8fd9\u9053\u9898\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528 Dijkstra \u6765\u505a\uff0c\u56e0\u4e3a\u662f\u8fb9\u6743\u4e3a $1$ \u7684\u65e0\u5411\u56fe\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528 bfs \u89e3\u51b3\u3002\n\n\u9996\u5148\u7528\u4e24\u6b21 bfs \u5206\u522b\u6c42\u51fa $s$ \u548c $t$ \u5230\u56fe\u4e0a\u5176\u4f59\u5404\u70b9\u7684\u8ddd\u79bb\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u4e2a\u70b9\u5bf9\uff0c\u5224\u65ad\u52a0\u8fb9\u4e4b\u540e\u6700\u77ed\u8def\u662f\u5426\u6539\u53d8\u3002\n\n**\u6ce8\u610f\uff1a**\n\n**1. \u8ba1\u7b97\u7b54\u6848\u65f6\u8981\u51cf\u53bb\u539f\u6709\u7684 $m$ \u6761\u8fb9\u3002**\n\n**2. \u7b2c\u4e8c\u6b21\u8dd1\u6700\u77ed\u8def\u65f6\u8981\u6e05\u96f6\u3002**\n\n**3. \u5224\u65ad\u6700\u77ed\u8def\u662f\u5426\u6539\u53d8\u65f6\u8981\u52a0\u4e0a\u70b9\u5bf9\u4e24\u70b9\u4e4b\u95f4\u957f\u5ea6 $1$\u3002**\n\n### Code\n\n```c++\n#include <bits/stdc++.h>\n#define gc() getchar()\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T> void rd(T &x){\n\tll f=1;x=0;char c=gc();\n\tfor(;!isdigit(c);c=gc())if(c=='-')f=-1;\n\tfor(;isdigit(c);c=gc())x=(x<<1)+(x<<3)+(c^48);\n\tx*=f;\n}\n\nint n,m,s,t,ans,hd[1010],cnt;\nint vis[1010],d[1010],c[1010];\t// c \u5b58\u50a8 s \u5230\u5404\u70b9\u6700\u77ed\u8def\uff0cd \u5b58\u50a8 t \u5230\u5404\u70b9\u6700\u77ed\u8def\u3002\nstruct nd{\n\tint to,nxt;\n}e[10010];\t\t\t\t\t\t// \u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\n\ninline void add(int u,int v){\n\te[++cnt].to=v;\n\te[cnt].nxt=hd[u];\n\thd[u]=cnt;\n}\n\ninline void bfs(int k){\t\t\t// \u5bbd\u641c\u6700\u77ed\u8def\n\tvis[k]=1,d[k]=0;\n\tqueue<int> q;\n\tq.push(k);\n\twhile(!q.empty()){\n\t\tint nt=q.front();q.pop();\n\t\tfor(int i=hd[nt],nx;i;i=e[i].nxt){\n\t\t\tnx=e[i].to;\n\t\t\tif(!vis[nx]){\n\t\t\t\tvis[nx]=1;\n\t\t\t\td[nx]=d[nt]+1;\t// \u8fb9\u6743\u4e3a 1\n\t\t\t\tq.push(nx);\n\t\t\t}\n\t\t}\n\t}\n}\n\nint main(){\n\trd(n),rd(m),rd(s),rd(t);\n\tfor(int i=1,u,v;i<=m;i++)\n        rd(u),rd(v),\n    \tadd(u,v),add(v,u);\t\t// \u65e0\u5411\u56fe\u53cc\u5411\u52a0\u8fb9\n\tbfs(s);\n\tfor(int i=1;i<=n;i++)\n        c[i]=d[i];\t\t\t\t// \u628a\u6700\u77ed\u8def\u5b58\u5230 c \u4e2d\n\tmemset(vis,0,sizeof(vis));\t// \u6e05\u96f6\n\tbfs(t);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t\tif(d[i]+c[j]+1>=d[s]&&d[j]+c[i]+1>=d[s])\n                ++ans;\t\t\t// \u6ce8\u610f\u8fd9\u91cc\u4e24\u4e2a\u70b9\u90fd\u8981\u5224\u65ad\u662f\u5426\u4f1a\u4f7f\u6700\u77ed\u8def\u6539\u53d8\n\tprintf(\"%d\\n\",ans-m);\t\t// \u8981\u51cf\u6389\u539f\u6709\u7684 m \u6761\u8fb9\n\treturn 0;\n}\n\n```\n\n\n\n***by sysong***\n\n$2021.5.23$\n\n",
        "postTime": 1621779116,
        "uid": 373948,
        "name": "sysong",
        "ccfLevel": 6,
        "title": "\u9898\u89e3CF954D Fight Against Traffic"
    },
    {
        "content": "### \u4e3a\u4ec0\u4e48\u6ca1\u6709\u4eba\u7528floyd\u5462\uff1f\n\n\u8ba9\u6211\u4eec\u5148\u505a\u4e00\u9053\u4e0d\u7b49\u5f0f\u9898(~~\u5173\u4e8e\u4e0d\u7b49\u5f0f\u5176\u5b9e\u6211\u4e00\u9053\u4e5f\u4e0d\u4f1a~~)\n\n\u5df2\u77e5\n\n$$2<=n<=1000$$ \n\u6c42\n$$n^3$$\n\u7684\u53d6\u503c\u8303\u56f4 \n\n**\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u79d8\u5bc6:**\n\n$$8<=n^3<=10^9$$\n\n \u53ef\u4ee5~~\u901a\u8fc7\u5361\u5e38\u7684\u65b9\u6cd5~~\u901a\u8fc7\u672c\u9898\n\n### \u4f5c\u4e3a\u672c\u9898\u76ee\u524d\u552f\u4e00\u4e00\u4e2a\u4ee5 floyd AC\u7684\uff0c\u8363\u5e78\u7684\u4ee5\u4ed6\u4eba10\u591a\u500d\u7684\u65f6\u95f4\u7a33\u5c45\u699c\u5355\u6700\u540e\u4e00\u540d\u3002\n\n**\u4e0b\u9762\u662f\u6781\u7b80\u4ee3\u7801\uff1a**\n\n```\n#include <iostream>\n#include <cstdio>\n#include <queue>\n#include <cstdlib>\nusing namespace std;\n\nint n,m,s,t,ans; \nint f[1005][1005]; \n\nint main()\n{\t\n\tcin>>n>>m>>s>>t; \n\t\n\tfor(int i=1;i<=n;++i) \n\t    for(int j=1;j<=n;++j)\n\t        if(i!=j) //\u521d\u59cb\u5316\n\t\t    f[i][j]=1000000000; \n\t\n\tfor(int i=1;i<=m;++i) \n\t{\n\t    int x,y;\n            cin>>x>>y; \n\t    f[x][y]=f[y][x]=1; //\u5efa\u56fe\n\t} \n\t\n\tfor(int k=1;k<=n;++k) //floyd\n\t    for(int i=1;i<=n;++i) \n\t        for(int j=1;j<=n;++j) \n                    f[i][j]=min(f[i][j],f[i][k]+f[k][j]);\n\t\n\tfor(int i=1;i<n;++i)\n\t    for(int j=i+1;j<=n;++j) \n\t\tif(f[i][j]!=1&&min(f[i][s]+f[t][j],f[i][t]+f[s][j])+1>=f[s][t]) //\u5224\u65ad\u662f\u5426\u6709\u8fb9\u53ca\u6bd4\u8f83\n\t    \t    ans++;\n\t\n\tcout<<ans<<'\\n'; \n\t \n\treturn 0;\n}\n```",
        "postTime": 1569846893,
        "uid": 73881,
        "name": "bwoi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF954D)\n### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684**\u65e0\u5411\u8054\u901a\u56fe**\u3002\u4f60\u73b0\u5728\u53ef\u4ee5\u968f\u610f\u5c06\u4e24\u4e2a\u6ca1\u6709\u8fde\u8d77\u6765\u7684\u70b9\u76f8\u8fde\uff08\u53ea\u80fd\u8fde\u4e00\u6761\uff09\uff0c\u8f93\u51fa\u6709\u591a\u5c11\u79cd\u8fde\u6cd5\u4e0d\u5f71\u54cd\u70b9 $s$ \u5230\u70b9 $t$ \u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u3002  \n\n**\u70b9\u7684\u7f16\u53f7\u7531 $1$ \u5230 $n$\uff0c\u4e14\u8fb9\u6743\u5747\u4e3a $1$\u3002**  \n\n### \u601d\u8def  \n\n\u8981\u4ece $s$ \u5230 $t$\uff0c\u82e5\u4f1a\u5f71\u54cd\u6700\u5c0f\u503c\uff0c\u80af\u5b9a\u7ecf\u8fc7\u4e86\u521a\u624d\u8fde\u4e0a\u7684\u4e00\u6761\u8fb9\u3002  \n\u73b0\u79f0\uff1a\n\n- $d1_i$ \u8868\u793a\u4ece $s \\to i$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\uff1b\n- $d2_i$ \u8868\u793a\u4ece $i \\to t$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\uff0c\u540c\u65f6\u56e0\u4e3a\u8fd9\u662f\u65e0\u5411\u56fe\uff0c\u6545 $d2_i$ \u7684\u542b\u4e49 $\\Leftrightarrow t \\to i$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\uff1b\n- \u8fde\u4e0a\u7684\u8fb9\u662f $x$ \u4e0e $y$ \u8fd9\u6761\u8fb9\u3002\n\n\u5219\uff0c\u4ece $s$ \u5230 $t$ \u6709\u4e24\u79cd\u60c5\u51b5\uff1a  \n1. $s \\to x \\to y \\to t$\uff1b\n1. $s \\to y \\to x \\to t$\u3002  \n\n\u7531\u4e8e $x \\to y$ \u7684\u6743\u662f $1$\uff0c\n\u5219\u4e24\u79cd\u60c5\u51b5\u6240\u5bf9\u5e94\u7684\u8ddd\u79bb\u5206\u522b\u662f\uff1a  \n1. $ans1 = d1_x + 1 + d2_y$\n1. $ans2 = d1_y + 1 + d2_x$\n\n\u7531\u4e8e $s \\to t$ \u7684\u6700\u77ed\u8def\u7684\u957f\u5ea6\u662f $d1_t$ $(d1_t = d2_s$\uff0c\u90fd\u662f\u8fd9\u4e2a\u6700\u77ed\u7684\u957f\u5ea6$)$\u3002  \n\n\u5982\u679c $\\min(x1, x2) < d1_t$\uff0c\u8bf4\u660e\u5f71\u54cd\u4e86\uff0c\u6211\u4eec\u8981\u6c42\u4e0d\u5f71\u54cd\u7684\u6761\u6570\uff0c\u6545\n- \u5982\u679c $\\min(x1, x2) \\geqslant d1_t$\uff0c`cnt++`\u3002\n\n\n**\u672c\u9898\u7684\u5927\u4f53\u601d\u8def\u603b\u7ed3\uff1a**  \n1. \u9884\u5904\u7406 $d1$ \u548c $d2$\uff1b\n1. $O(n^2)$ \u679a\u4e3e\u6bcf\u4e00\u5bf9 $x$ \u548c $y$\uff0c\u5982\u679c $x \\ne y \\land x$ \u548c $y$ \u4e4b\u95f4\u6ca1\u6709\u8fde\u8fb9\uff0c\u6c42\u51fa $ans1$ \u548c $ans2$\uff0c\u5e76\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff1b\n1. \u8f93\u51fa\u7b54\u6848\u3002  \n\n\u4e0b\u9762\u7b80\u5355\u8bf4\u4e00\u4e0b\u9884\u5904\u7406 $d1$ \u548c $d2$\u3002  \n\u672c\u9898\u6ca1\u6709\u91cd\u8fb9\uff0c\u6545\u53ef\u4ee5\u90bb\u63a5\u77e9\u9635\u6765\u5b58\u56fe\u3002  \n\u76f4\u63a5\u7528 bfs \u7b97\u51fa\u6240\u6709\u70b9\u7684\u6700\u77ed\u8def\u3002  \n\n- \u6c42 $d1$ \u65f6\uff0c\u961f\u5217\u4e2d\u5148\u63d2\u5165 $s$\uff0c\u63a5\u4e0b\u6765\u6269\u5c55\u5230\u4e0b\u4e00\u4e2a\u70b9\uff1b  \n- \u6c42 $d2$ \u65f6\uff0c\u961f\u5217\u4e2d\u5148\u63d2\u5165 $t$\uff0c\u63a5\u4e0b\u6765\u540c\u4e0a\u3002  \n\n\u89e3\u91ca\u4e00\u4e0b\u7b2c\u4e09\u4e2a~~\u6700\u7b80\u5355\u7684~~\u6837\u4f8b\uff1a  \n![](https://cdn.luogu.com.cn/upload/image_hosting/tvqt5lrq.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n\n\u5982\u56fe\uff0c\u4ece $1 \\to 5$\uff0c\u539f\u56fe\u7684\u6700\u77ed\u8def\u957f\u5ea6\u4e3a $2$\uff0c \u6709\u4ee5\u4e0b $3$ \u4e2d\u8fde\u6cd5\u4f7f\u5f97\u6700\u77ed\u8def\u957f\u5ea6\u4e0d\u53d8\uff1a  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dq1sn3g5.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n1. \u8fde\u63a5 $2 \\to 3$\uff0c\u6700\u77ed\u8def\u957f\u5ea6\u4e0d\u53d8\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdgk77yk.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n2. \u8fde\u63a5 $2 \\to 4$\uff0c\u6700\u77ed\u8def\u957f\u5ea6\u4e0d\u53d8\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/81wc8vkb.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n3. \u8fde\u63a5 $3 \\to 4$\uff0c\u6700\u77ed\u8def\u957f\u5ea6\u4e0d\u53d8\u3002  \n\n\u6545\u8f93\u51fa $3$\u3002\n\n[AC code\u8bb0\u5f55](https://www.luogu.com.cn/record/51754453)\n\n```cpp\n#include <bits/stdc++.h>\n#define fr(i, l, r) for (int i = l; i <= r; ++i)\nusing namespace std;\nint n, m, s, t, x, y, cnt, d1[1010], d2[1010], link[1010][1010];\nbool vis[1010];\nqueue<int>q;\n\nint min(int x, int y)\n{\n\treturn x < y ? x : y;\n}\n\nvoid bfs(int *dis)\n{\n\twhile (q.size())\n\t{\n\t\tint now = q.front(); q.pop();\n\t\tfr(i, 1, n)\n\t\t{\n\t\t\tif (!link[now][i] || vis[i]) continue;\n\t\t\tvis[i] = true, dis[i] = dis[now] + 1, q.push(i);\n\t\t}\n\t}\n\tfr(i, 1, n) vis[i] = false; // \u6e05\u7a7a\u6570\u7ec4 \n\twhile (q.size()) q.pop();\n}\n\nint main()\n{\n\tscanf(\"%d%d%d%d\", &n, &m, &s, &t);\n\tfr(i, 1, m) scanf(\"%d%d\", &x, &y), link[x][y] = 1, link[y][x] = 1;\n\tvis[s] = true, /*\u8fd9\u91cc\u6570\u7ec4\u6807 true \u4e0d\u80fd\u5fd8*/q.push(s), bfs(d1);\n\tvis[t] = true, q.push(t), bfs(d2);\n\tfr(i, 1, n) fr(j, i, n)\n\t{\n\t\tif (i == j || link[i][j]) continue; // \u5982\u679c\u672c\u6765\u5c31\u6709\u8fb9\u6216\u8005 i = j\uff0ccontinue \n\t\tint ans1 = d1[i] + 1 + d2[j],\n\t\t\tans2 = d1[j] + 1 + d2[i];\n\t\tcnt += min(ans1, ans2) >= d1[t]; // \u5982\u679c\u4e24\u79cd\u65b9\u6848\u7684\u6700\u5c0f\u503c\u5927\u4e8e\u7b49\u4e8e\u539f\u672c\u7684\u6700\u77ed\u8def\u7684\u957f\u5ea6\uff0c\u8bf4\u660e\u5408\u6cd5 \n\t}\n\tprintf(\"%d\", cnt);\n\treturn 0;\n}\n}\n```",
        "postTime": 1623569260,
        "uid": 409236,
        "name": "StayAlone",
        "ccfLevel": 6,
        "title": "CF954D Fight Against Traffic C++\u3010\u601d\u7ef4\u9898\u3011\u9898\u89e3"
    },
    {
        "content": "## \u8fd9\u662f\u4e00\u9053\u7c7b\u4f3c\u6a21\u677f\u7684\u6a21\u677f\u9898...\n### \u7528\u4e24\u6b21Dijkstra\uff1a\u4eceS\u5f00\u59cb\uff0c\u4eceT\u5f00\u59cb\n### \u7136\u540e\u5224\u65ad<i,j>\u8fd9\u6761\u8fb9\u662f\u5426\u4f1a\u5f71\u54cd\u6700\u77ed\u8def\n```cpp\n#include<cstdio>\n#include<vector>\n#include<queue>\n#define NN 1001\n#define inf 0x7fffffff\nusing namespace std;\nint N,M,S,T,A,B,C,D1,D2,ANS;\nint used[NN][3],dis[NN][3],map[NN][NN];\nstruct ss{\n\tint to,c;\n\tbool operator < (const ss &r)const{return r.c<c;}\n};\nvector<int>q[NN];\nvoid Dij(int s,int c)\n{\n\tfor(int i=1;i<=N;i++)dis[i][c]=inf;\n\tdis[s][c]=0;\n\tpriority_queue<ss>que;\n\tque.push((ss){s,0});\n\twhile(!que.empty())\n\t{\n\t\tss t=que.top();que.pop();\n\t\tint u=t.to;\n\t\tif(used[u][c])continue;\n\t\tused[u][c]=1;\n\t\tfor(int i=0;i<q[u].size();i++)\n\t\t{\n\t\t\tint v=q[u][i];\n\t\t\tif(!used[v][c]&&dis[v][c]>dis[u][c]+1)\n\t\t\t{\n\t\t\t\tdis[v][c]=dis[u][c]+1;\n\t\t\t\tque.push((ss){v,dis[v][c]});\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\t//freopen(\"c.in\",\"r\",stdin);\n\tscanf(\"%d%d%d%d\",&N,&M,&S,&T);\n\tfor(int i=1;i<=M;i++)\n\t{\n\t\tscanf(\"%d%d\",&A,&B);\n\t\tmap[B][A]=map[A][B]=1;\n\t\tq[A].push_back(B);\n\t\tq[B].push_back(A);\n\t}\n\tDij(S,1);//\u4eceS\u5f00\u59cb\n    Dij(T,2);//\u4eceT\u5f00\u59cb\n\tfor(int i=1;i<N;i++)\n\t for(int j=i+1;j<=N;j++)\n\t  if(!map[i][j])//\u4e24\u4e2a\u70b9\u662f\u5426\u8fde\u901a\n\t  {\n\t  \tD1=dis[i][1]+dis[j][2]+1;\n\t  \tD2=dis[i][2]+dis[j][1]+1;\n\t  \tif(min(D1,D2)>=dis[T][1])//\u7528\u6700\u77ed\u7684\u8fd9\u6761\u548c\u6700\u4f18\u89e3\u6bd4\u8f83\n        //\u56e0\u4e3a\u6700\u77ed\u7684\u8fd9\u6761\u624d\u662f\u5f53\u524d\u56fe\u4e2d\u7684\u8fd9\u6761\n\t  \t ANS++;//\u5982\u679c\u4e0d\u5f71\u54cd\u6700\u4f18\u89e3\uff0c\u5219ans++\n\t  }\n\tprintf(\"%d\\n\",ANS);\n\treturn 0;//OK.\n}\n```",
        "postTime": 1525847101,
        "uid": 57146,
        "name": "ifyml",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u5bf9\u4e8e\u4e00\u4e2a**\u65e0\u5411\u65e0\u6743\u8054\u901a**\u56fe $G$\uff0c\u6709 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\uff0c\u5f80\u8fd9\u4e2a**\u56fe\u91cc\u6ca1\u6709\u88ab\u8fde\u63a5\u7684\u4e24\u4e2a\u70b9**\u4e4b\u95f4\u8fde\u8fb9\uff0c\u95ee\u6709\u591a\u5c11\u8fde\u6cd5\u53ef\u4ee5\u4f7f\u5f97 $s$ \u5230 $t$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\u4e0d\u53d8\u3002\n\n## \u89e3\u51b3\u601d\u8def\n\n### 2.1 \u66b4\u529b\u505a\u6cd5\n\n\u53ef\u4ee5\u679a\u4e3e\u4efb\u610f\u4e24\u4e2a\u70b9\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u8fde\u63a5\u4f7f\u7528 bfs \u6c42\u6700\u77ed\u8def\uff0c\u8ba1\u7b97\u51fa\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2(n+m))$\uff0c\u4e0d\u53ef\u901a\u8fc7\u3002\n\n### 2.2 \u9884\u5904\u7406\n\n\u5982\u679c\u8fde\u63a5 $x,y$ \u4e24\u4e2a\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5148\u4ece $s$ \u8d70\u5230 $x$ \u6216 $y$ \u70b9\uff0c\u518d\u4ece\u53e6\u4e00\u7aef\u524d\u5f80 $t$ \u70b9\uff0c\u8ba1\u7b97\u51fa\u8fd9\u6837\u8d70\u7684\u8def\u7ebf\u957f\u5ea6\u3002\u5982\u679c\u8fd9\u6837\u8d70\u7684\u8def\u7ebf\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e\u4e24\u8005\u95f4\u7684\u6700\u77ed\u8def\u957f\u5ea6\uff08\u4e5f\u5c31\u662f\u4e0d\u4f1a\u4f7f\u6700\u77ed\u8def\u957f\u5ea6\u53d8\u5316\uff09\uff0c\u90a3\u4e48\u5c31\u5c06\u8ba1\u6570\u5668\u52a0\u4e00\u3002\n\n\u90a3\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\u51fa $s$ \u70b9\u5230\u4efb\u4f55\u4e00\u4e2a\u70b9\u7684\u6700\u77ed\u8def\uff0c\u7528 $p1_i$ \u8868\u793a\u3002\n\n\u518d\u9884\u5904\u7406\u51fa\u4efb\u610f\u4e00\u70b9\u5230 $t$ \u70b9\u7684\u6700\u77ed\u8def\uff0c\u7531\u4e8e\u8fd9\u662f\u65e0\u5411\u56fe\uff0c\u7b49\u540c\u4e8e\u6c42\u51fa $t$ \u70b9\u5230\u4efb\u610f\u4e00\u70b9\u7684\u6700\u77ed\u8def\uff0c\u7528 $p2_i$ \u8868\u793a\u3002\n\n\u6700\u540e\u679a\u4e3e\u4e24\u4e2a\u70b9 $x,y$\uff0c\u8ba1\u7b97 $p1_x+p2_y$ \u548c $p1_y+p2_x$\uff0c\u518d\u548c $p1_t$ \u6216\u8005 $p2_s$ \u6bd4\u8f83\uff08\u8fd9\u4e24\u8005\u662f\u7b49\u4ef7\u7684\uff0c\u4e0b\u6587\u4e2d\u90fd\u4f7f\u7528 $p1_t$\uff09\u3002\u5982\u679c $p1_t \\leqslant p1_x+p2_y+1 \\ \\land \\ p1_t \\leqslant p1_y+p2_x+1$ \u5c31\u8ba9\u8ba1\u6570\u5668\u53d8\u91cf\u52a0\u4e00\u3002\n\n## \u4ee3\u7801\u5b9e\u73b0\n\n### 3.1 \u5efa\u56fe\n\n\u91c7\u7528\u90bb\u63a5\u8868\u5efa\u65e0\u5411\u56fe\uff1a\n\n```\nfor(int i=1;i<=m;i++){\n\tint a1,a2;\n\tcin>>a1>>a2;\n\tl[a1].push_back(a2);\n\tl[a2].push_back(a1);//\u65e0\u5411\u56fe\u5efa\u56fe\n    bol[a1][a2]=1;\n\tbol[a2][a1]=1;//\u8868\u793aa1\u548ca2\u95f4\u6709\u4e86\u4e00\u6761\u8fb9\n}\n```\n\n\u8fd9\u91cc\u7684 $l$ \u662f\u90bb\u63a5\u8868\u3002\n\n### 3.2 bfs \u9884\u5904\u7406\u6700\u77ed\u8def\n\n```\nq1.push(s);\np1[s]=0;\nok1[s]=1; //\u72b6\u6001\u521d\u59cb\u5316\uff0c\u8d77\u70b9\u4e3as\nwhile(!q1.empty()){\n\tint x=q1.front();\n\tq1.pop();\n\tfor(int i=0;i<l[x].size();i++){\n\t\tif(!ok1[l[x][i]]){ //\u6392\u9664\u4e86\u53cd\u590d\u8d70\u4e00\u4e2a\u70b9\u7684\u60c5\u51b5\n\t\t\tif(p1[l[x][i]]!=0){ //\u5982\u679c\u8fd9\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u503c\u4e0d\u662f0\n\t\t\t\tp1[l[x][i]]=min(p1[l[x][i]],p1[x]+1);//\u6bd4\u8f83\u5df2\u77e5\u7684\u6700\u77ed\u8def\u548c\u73b0\u5728\u8fd9\u6761\u8def\n\t\t\t}\n\t\t\telse{\n\t\t\t\tp1[l[x][i]]=p1[x]+1;//\u5982\u679c\u8fd9\u4e2a\u70b9\u8fd8\u6ca1\u6709\u6700\u77ed\u8def\u503c\uff0c\u5c31\u5c06\u73b0\u5728\u8fd9\u6761\u8def\u7684\u957f\u5ea6\u8d4b\u503c\u7ed9\u5b83\n\t\t\t}\n\t\t\tq1.push(l[x][i]);//push\u65b0\u7684\u72b6\u6001\n\t\t\tok1[l[x][i]]=1;//\u8fd9\u4e2a\u70b9\u5df2\u7ecf\u8d70\u8fc7\u4e86\n\t\t}\n\t}\n}\n```\n\u7528\u4e00\u4e2a\u961f\u5217 $q1$ \u5b58\u50a8 bfs \u7684\u72b6\u6001\uff0c\u7528 $\\texttt{bool}$ \u6570\u7ec4 $ok$ \u5b58\u50a8\u8fd9\u4e2a\u70b9\u662f\u5426\u8d70\u8fc7\u4ee5\u907f\u514d\u51fa\u73b0\u73af\u7684\u60c5\u51b5\uff0c\u7528 $p1$ \u6570\u7ec4\u5b58\u50a8\u6700\u77ed\u8def\u7684\u957f\u5ea6\u3002\n\n\u4ece $t$ \u70b9\u5f00\u59cb\u7684 bfs \u9884\u5904\u7406\u5982\u6cd5\u70ae\u5236\uff0c\u57fa\u672c\u6ca1\u6709\u533a\u522b\u3002\n\n### 3.3 \u679a\u4e3e\u6bcf\u4e00\u4e2a $x,y$\n\n\u73b0\u5728\u6211\u4eec\u5f97\u5230\u4e86\u4ece $s$ \u70b9\u5230\u4efb\u610f\u4e00\u70b9\u7684\u6700\u77ed\u8def\u6570\u7ec4 $p1$\uff0c\u4ece $t$ \u70b9\u5230\u4efb\u610f\u4e00\u70b9\u7684\u6700\u77ed\u8def\u6570\u7ec4 $p2$\u3002\n\n\u5148\u7528\u4e8c\u91cd\u5faa\u73af\u679a\u4e3e $x,y$\uff0c\u4e3a\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c$y$ \u7684\u679a\u4e3e\u4ece $x+1$ \u5f00\u59cb\uff0c\u5e76\u6392\u9664\u6389\u5df2\u6709\u8fb9\u7684\u60c5\u51b5\u3002\n\n\u5728\u679a\u4e3e\u4e2d\u6bd4\u8f83 $p1_t$ \u4e0e $p1_x+p2_y+1$ \u548c $p1_y+p2_x+1$ \u7684\u503c\u3002\n\n```\nfor(int i=1;i<=n;i++){\n\tfor(int j=i+1;j<=n;j++){\n\t\tif(bol[i][j]){//\u6392\u9664\u6389\u6709\u8fb9\u7684\u60c5\u51b5\uff0c\u8fd9\u5c31\u662f\u5efa\u56fe\u65f6\u591a\u5b58\u50a8\u4e00\u4e2abool\u6570\u7ec4\u7684\u4f5c\u7528\n\t\t\tcontinue;\n\t\t}\n\t\tif((p1[i]+p2[j])+1>=p1[t]&&(p2[i]+p1[j])+1>=p1[t]){//\u6bd4\u8f83\n\t\t\tcnt++;//\u5982\u679c\u8fd9\u6761\u65b0\u8def\u7684\u957f\u5ea6\u6bd4\u539f\u6700\u77ed\u8def\u957f\uff0c\u8ba1\u6570\u5668\u52a0\u4e00\n\t\t}\n\t}\n}\n```\n\n[\u6d1b\u8c37 AC\u8bb0\u5f55](https://www.luogu.com.cn/record/51753530)\n\n[CF AC\u8bb0\u5f55](https://codeforces.com/contest/954/submission/119305840)",
        "postTime": 1623569419,
        "uid": 399150,
        "name": "Shunpower",
        "ccfLevel": 7,
        "title": "CF954D Fight Against Traffic \u9898\u89e3"
    },
    {
        "content": "# \u9898\u610f\u5206\u6790\n\u5bf9\u6ca1\u6709\u8fde\u8fb9\u7684\u4e24\u4e2a\u70b9\u8fde\u8fb9\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u8fde\u8fb9\u65b9\u5f0f\u4e0d\u4f1a\u5f71\u54cds->t\u7684\u6700\u77ed\u8def\u957f\u5ea6\uff1f\n# \u601d\u8def\n\u5206\u522b\u4ee5s\u3001t\u4e3a\u6e90\u70b9\u8dd1\u6700\u77ed\u8def\uff08\u6211\u7528\u7684dijkstra\uff09\n\n\u65b0\u5efa\u7acb\u4e00\u6761\u8fb9\u540e\uff0c\u82e5\u6700\u77ed\u8def\u53d1\u751f\u53d8\u5316\uff0c\u5219\u4e00\u5b9a\u7ecf\u8fc7\u4e86\u8fd9\u6761\u65b0\u8fb9\u3002\n\n\u6545\u6211\u4eec\u53ef\u679a\u4e3e\u70b9i\u3001j\u3002\n\n\u5982\u679cs->i->j->t\u6216\u8005s->j->i->t\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u4e0d\u5c0f\u4e8e\u539f\u6700\u77ed\u8def\u957f\u5ea6\u3002\n\u5219\u53ef\u77e5\u8fde\u63a5\u8fb9i,j\u540e\u4e0d\u4f1a\u6539\u53d8\u6700\u77ed\u8def\u3002\n\n\uff08\u4ee5\u6570\u7ec4f\u8868\u793as\u5230\u5176\u4ed6\u70b9\u7684\u6700\u77ed\u8def\uff0c\u4ee5f'\u8868\u793at\u5230\u5176\u4ed6\u70b9\u7684\u6700\u77ed\u8def,\u6700\u77ed\u8def\u957f\u5ea6\u4e3aL\uff09\n\n\u5219\u4e0a\u8ff0\u6761\u4ef6\u53ef\u8868\u793a\u4e3af[i]+f'[j]+1>=L&&f[j]+f'[i]+1>=L\n\n# Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,s,t;\nbool b[1001][1001];//\u7528\u4e34\u63a5\u8868\u5b58\u50a8\u8f83\u4e3a\u65b9\u4fbf\nint f[200001];\nint _f[200001];\ntypedef pair<int,int>p;\nstruct cmp{\n\tbool operator()(const p a,const p b)\n\t{\n\t\treturn a.second>b.second;\n\t}\n};\npriority_queue<pair<int,int>,vector<pair<int,int> >,cmp>q;\ninline int read() {\n    int x=0,w=1; \n\tchar c=getchar();\n    while(c<'0'||c>'9') \n\t{ \n\t\tc=getchar(); \n\t}\n    while(c>='0'&&c<='9') \n\t{\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n    return x;\n}\nint main()\n{\n\tcin>>n>>m>>s>>t;\n\tint tot=0;\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tint x=read(),y=read();\n\t\tb[x][y]=b[y][x]=1;\n\t}\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tf[i]=0x7fffffff;\n\t\t_f[i]=0x7fffffff;\n\t}\n\tq.push(make_pair(s,0));\n\tf[s]=0;\n\twhile(!q.empty())\n\t{\n\t\tint now=q.top().first;\n\t\tint k=q.top().second;\n\t\tq.pop();\n\t\tif(k!=f[now])\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(b[now][i])\n\t\t\t{\n\t\t\t\tif(f[i]>f[now]+1)\n\t\t\t\t{\n\t\t\t\t\tf[i]=f[now]+1;\n\t\t\t\t\tq.push(make_pair(i,f[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tq.push(make_pair(t,0));\n\t_f[t]=0;\n\twhile(!q.empty())\n\t{\n\t\tint now=q.top().first;\n\t\tint k=q.top().second;\n\t\tq.pop();\n\t\tif(k!=_f[now])\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(b[now][i])\n\t\t\t{\n\t\t\t\tif(_f[i]>_f[now]+1)\n\t\t\t\t{\n\t\t\t\t\t_f[i]=_f[now]+1;\n\t\t\t\t\tq.push(make_pair(i,_f[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tif(!b[i][j])\n\t\t\t{\n\t\t\t\tif(f[i]+_f[j]+1>=f[t]&&f[j]+_f[i]+1>=f[t])\n\t\t\t\t{\n\t\t\t\t\tans++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1599208459,
        "uid": 73711,
        "name": "HC20050615",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    },
    {
        "content": "\u849f\u84bb\u601d\u8def\uff1a\n\n\u5148\u6c42\u51fa$s$\u5230$t$\u7684\u6700\u77ed\u8def\n\n\u518d$n^2$\u6c42\u51fa\u8d70\u8fd9\u6761\u52a0\u4e0a\u7684\u8def\u7684\u6700\u77ed\u8def\n\n\u5177\u4f53\u64cd\u4f5c\uff1a\n\n\u5148\u5206\u522b\u4ece$s$\u548c$t$\u5f00\u59cb\u8dd1\u6700\u77ed\u8def\n\n\u5f53\u8981\u6dfb\u52a0\u7684\u5730\u65b9\u6ca1\u6709\u8fb9\u65f6\u6dfb\u52a0\u4e0a\n\n\u7136\u540e\u6c42\u6dfb\u7684\u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u5206\u522b\u5230$s$\u548c$t$\u7684\u6700\u77ed\u8def\n\n(\u5982\u679c\u90fd\u5c0f\u4e8e\u539f\u5148\u7684\u6700\u77ed\u8def\u5c31$ans++$)\n\n\u8d34\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n,m,s,t;\nint g[1010][1010];\nint dis[1010];\nint dis2[1010];\nbool vis[1010];\nint ans;\nvoid dij(int s)//Dijkstra\u6a21\u677f\n{\n    memset(dis,0x3f,sizeof(dis));\n    memset(vis,0,sizeof(vis));\n    int minn,next;\n    dis[s]=0;\n    for(int i=1;i<=n;i++) \n\t{\n        minn=0x3f3f3f3f;\n        for(int j=1;j<=n;j++) \n\t\t{\n            if(!vis[j]&&dis[j]<minn) \n\t\t\t{\n                minn=dis[j];\n                next=j;\n            }\n        }\n        vis[next]=1;\n        for(int j=1;j<=n;j++) \n\t\t{\n            if(!vis[j]&&dis[j]>dis[next]+g[next][j]&&g[next][j])\n\t\t\t{\n                dis[j]=dis[next]+g[next][j];\n            }\n        }\n    }\n}\nvoid dij2(int s) \n{\n    memset(dis2,0x3f,sizeof(dis2));\n    memset(vis,0,sizeof(vis));\n    int minn,next;\n    dis2[s]=0;\n    for(int i=1;i<=n;i++) \n\t{\n        minn=0x3f3f3f3f;\n        for(int j=1;j<=n;j++) \n\t\t{\n            if(!vis[j]&&dis2[j]<minn) \n\t\t\t{\n                minn=dis2[j];\n                next=j;\n            }\n        }\n        vis[next]=1;\n        for(int j=1;j<=n;j++) \n\t\t{\n            if(!vis[j]&&dis2[j]>dis2[next]+g[next][j]&&g[next][j])\n\t\t\t{\n                dis2[j]=dis2[next]+g[next][j];\n            }\n        }\n    }\n}\nint main()\n{\n\tscanf(\"%d%d%d%d\",&n,&m,&s,&t);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u,v;\n\t\tscanf(\"%d%d\",&u,&v);\n\t\tg[u][v]=1;\n\t\tg[v][u]=1;//\u65e0\u5411\u56fe\uff01\n\t}\n\tdij(s);\n\tdij2(t);//\u5206\u522b\u4eces\u548ct\u8dd1\u6700\u77ed\u8def\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tif(g[i][j]==0&&dis[t]<=dis[i]+dis2[j]+1&&dis[t]<=dis[j]+dis2[i]+1)\n\t\t\t{\n\t\t\t\tans++;//\u5982\u679c\u6dfb\u7684\u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u5206\u522b\u5230s\u548ct\u7684\u6700\u77ed\u8def\u90fd\u5c0f\u4e8e\u539f\u5148\u7684\u6700\u77ed\u8def\u5c31ans++\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1578835773,
        "uid": 116067,
        "name": "Create_Random",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF954D \u3010Fight Against Traffic\u3011"
    }
]
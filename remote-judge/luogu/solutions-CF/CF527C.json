[
    {
        "content": "lang:C++\n\n\u601d\u8def\uff1a\u7528set&multiset\u50a8\u5b58\u5207\u5272\u540e\u7684\u788e\u5757\u8fb9\u957f\u6700\u5927\u503c\u53ca\u5207\u5272\u4f4d\u7f6e\n\n\u6bcf\u6b21\u5207\u5272\u540e\u7ef4\u62a4\u4e00\u4e0b,\u8f93\u51fa\u6700\u5927\u788e\u5757\u8fb9\u957f\u7684\u79ef\u5c31\u53ef\u4ee5\u4e86\n\nSTL\u5927\u6cd5\u597d\n\n\u4f7f\u7528STL\u4e2d\u7684set&multiset\uff08set\u4e2d\u5143\u7d20\u4e0d\u53ef\u91cd\u590d,multiset\u53ef\u4ee5\uff09\n\n\u76f4\u63a5\u7701\u53bb\u4e86\u6392\u5e8f\u7684\u8fc7\u7a0b\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<algorithm>\n#include<set>\nusing namespace std;\nint w,h,n,t;\nset<long long>lx,ly;\nmultiset<long long>x,y;\nmultiset<long long>::iterator it;\nchar c;\nint main()\n{\n\tscanf(\"%d%d%d\",&w,&h,&n);\n\tx.insert(w);\n\ty.insert(h);\n     //x,y\u50a8\u5b58\u788e\u5757\u8fb9\u957f\n\tlx.insert(0);lx.insert(w);\n\tly.insert(0);ly.insert(h);\n     //lx,ly\u50a8\u5b58\u5207\u5272\u4f4d\u7f6e\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tcin>>c>>t;\n\t\tif(c=='H')\n\t\t{\n\t\t\tly.insert(t);//\u52a0\u5165\u65b0\u7684\u5207\u5272\u4f4d\u7f6e\n\t\t\tit=ly.find(t);\n            //\u65e0\u987b\u6392\u5e8f\n\t\t\t--it;\n\t\t\tlong long l=*it;//\u524d\u4e00\u6761\u5207\u5272\u4f4d\u7f6e\n\t\t\t++it;++it;\n\t\t\tlong long r=*it;//\u540e\u4e00\u6761\u5207\u5272\u4f4d\u7f6e\n\t\t\tit=y.find(r-l);\n            //\u627e\u5230\u539f\u6765\u7684\u201c\u788e\u5757\u8fb9\u957f\u201d\n\t\t\ty.erase(it);\n            //\u5df2\u88ab\u7834\u574f\n\t\t\ty.insert(r-t);\n\t\t\ty.insert(t-l);\n            //\u65b0\u52a0\u4e86\u4e24\u6761\u201c\u788e\u5757\u8fb9\u957f\u201d\n\t\t}\n\t\telse\n\t\t{\n        \t//\u540c\u7406\n\t\t\tlx.insert(t);\n\t\t\tit=lx.find(t);\n\t\t\t--it;\n\t\t\tint l=*it;\n\t\t\t++it;++it;\n\t\t\tint r=*it;\n\t\t\tit=x.find(r-l);\n\t\t\tx.erase(it);\n\t\t\tx.insert(r-t);\n\t\t\tx.insert(t-l);\n\t\t}\n\t\tit=x.end();it--;\n\t\tlong long l=*it;\n\t\tit=y.end();it--;\n\t\tlong long r=*it;\n        //\u5bfb\u627e\u6700\u5927\u503c\n\t\tcout<<(long long)(l*r)<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1517634404,
        "uid": 83168,
        "name": "KNO3",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "\u4f3c\u4e4e\u5404\u4f4ddalao\u90fd\u662f\u7528\u7ebf\u6bb5\u6811\u6216set\u505a\u7684\u8fd9\u9053\u9898\uff0c\u90a3\u4e48\u672c\u849f\u84bb\u6765\u4e00\u53d1**\u94fe\u8868\u79bb\u7ebf\u505a\u6cd5**\u3002\n\n\u5bf9\u4e8e\u6b64\u9898\u800c\u8a00\uff0c\u663e\u7136\u6700\u540e\u7684\u5207\u5272\u72b6\u6001\u4e00\u5b9a\u662f\u6b63\u786e\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u6309\u7167\u65f6\u95f4\u5012\u5e8f\u6765\u6c42\u51fa\u6bcf\u4e00\u6b21\u5207\u5272\u540e\u7684\u6700\u5927\u9762\u79ef\u3002\n\n\u9996\u5148\uff0c\u5c06\u6240\u6709\u5207\u5272\u5b8c\u6210\u540e\u7684\u6a2a\u5750\u6807\u548c\u7eb5\u5750\u6807\u5206\u522b\u6392\u5e8f\uff0c\u7136\u540e\u5206\u522b\u6c42\u51fa\u6a2a\u8f74\u548c\u7eb5\u8f74\u4e2d\u7684\u6700\u5927\u957f\u5ea6\uff0c\u540c\u65f6\u7528\u94fe\u8868\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u70b9\u7684\u524d\u9a71\u548c\u540e\u7ee7\uff08\u6bd4\u5b83\u5750\u6807\u5c0f\u7684\u7b2c\u4e00\u4e2a\u70b9\u548c\u6bd4\u5b83\u5750\u6807\u5927\u7684\u7b2c\u4e00\u4e2a\u70b9\uff09\uff0c\u6839\u636e\u4eba\u7c7b\u7684\u667a\u6167\uff0c\u6a2a\u8f74\u6700\u5927\u503c*\u7eb5\u8f74\u6700\u5927\u503c\u5373\u4e3a\u6700\u540e\u4e00\u4e2a\u7b54\u6848\u3002\n\n\u5176\u6b21\uff0c\u6309\u7167\u65f6\u95f4\u5012\u5e8f\u6c42\u51fa\u7b2cn-1~1\u6b21\u5207\u5272\u540e\u7684\u7b54\u6848\u3002\u663e\u7136\uff0c\u6bcf\u6b21\u5207\u5272\u540e\u65b0\u4ea7\u751f\u7684\u70b9\u53ea\u4f1a\u5f71\u54cd\u5b83\u7684\u524d\u9a71\u548c\u540e\u7ee7\uff0c\u90a3\u4e48\u6211\u4eec\u628a\u6bcf\u4e2a\u70b9\u6309\u7167\u65f6\u95f4\u5012\u5e8f\u5220\u6389\uff0c\u540c\u65f6\u66f4\u65b0\u88ab\u5220\u9664\u70b9\u7684\u524d\u9a71\u540e\u7ee7\uff0c\u518d\u7528\u88ab\u5220\u9664\u70b9\u7684\u540e\u7ee7\u5750\u6807-\u524d\u9a71\u5750\u6807\u66f4\u65b0\u8be5\u5750\u6807\u8f74\u4e0a\u7684\u6700\u5927\u957f\u5ea6\u5373\u53ef\u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u7c97\u7565\u4f30\u7b97O(n)\uff0c\u6709\u53ef\u80fd\u88ab\u5361\u51fa\u6765log\uff0c\u4e0d\u8fc72e5\u8fd8\u662f\u59a5\u59a5\u7684\uff08\u6e9c\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n\nusing namespace std;\n\nconst int maxn=200020;\n\nint n,m,q,cnt,tot,maxx,maxy;\nint stra[maxn],strb[maxn],fx[maxn],fy[maxn],sum[maxn];\n\nstruct haha{int len,nxt,pre,flag;}a[maxn],b[maxn];\n\nstruct hahaha{char opt[10];int len,flag;}num[maxn];\n\nvoid read()\n{\n\tcin>>n>>m>>q;\n\tfor(int i=1,k;i<=q;i++)\n\t{\n\t\tchar str[5]; scanf(\"%s\",str+1); scanf(\"%lld\",&k);\n\t\tif(str[1]=='V' && (((k==0)||(k==n)) || fx[k]) \n\t\t|| str[1]=='H' && (((k==0)||(k==m)) || fy[k]))\n\t\t{num[i].flag=1;continue;} \n\t\tnum[i].opt[1]=str[1]; \n\t\tnum[i].len=k; \n\t\tnum[i].flag=0;\n\t\tif(num[i].opt[1]=='H')\n\t\t{\n\t\t\tstrb[++tot]=num[i].len;\n\t\t\tfy[num[i].len]=1;\n\t\t} \n\t\telse \n\t\t{\n\t\t\tstra[++cnt]=num[i].len;\n\t\t\tfx[num[i].len]=1;\n\t\t}\n\t}\n}\n\nvoid deal_first()\n{\n\tsort(stra+1,stra+cnt+1);\n\tsort(strb+1,strb+tot+1);\n\tif(strb[tot]!=m)strb[++tot]=m;\n\tif(stra[cnt]!=n)stra[++cnt]=n;\n\tfor(int i=1,pre=0;i<=cnt+1;i++)\n\t{\n\t\tif(stra[i]==pre) continue;\n\t\ta[pre].nxt=stra[i];\n\t\ta[stra[i]].pre=pre;\n\t\ta[stra[i]].flag=1;\n\t\ta[stra[i]].len=stra[i]-pre;\n\t\tmaxx=max(maxx,(stra[i]-pre));\n\t\tpre=stra[i];\n\t}\n\tfor(int i=1,pre=0;i<=tot;i++)\n\t{\n\t\tif(strb[i]==pre) continue;\n\t\tb[pre].nxt=strb[i];\n\t\tb[strb[i]].pre=pre;\n\t\tb[strb[i]].flag=1;\n\t\tb[strb[i]].len=strb[i]-pre;\n\t\tmaxy=max(maxy,(strb[i]-pre));\n\t\tpre=strb[i];\n\t}\n\tsum[q]=maxx*maxy;\n}\n\nvoid do_it()\n{\n\tfor(int i=q;i>=2;i--)\n\t{\n\t\tif(num[i].flag){sum[i-1]=sum[i];continue;}\n\t\tint len=num[i].len;\n\t\tif(num[i].opt[1]=='H')\n\t\t{\n\t\t\tif(!b[len].flag) continue;\n\t\t\tb[len].flag=0;\n\t\t\tb[b[len].nxt].len+=b[len].len;\n\t\t\tmaxy=max(maxy,b[b[len].nxt].len);\n\t\t\tb[b[len].pre].nxt=b[len].nxt;\n\t\t\tb[b[len].nxt].pre=b[len].pre;\n\t\t\tsum[i-1]=maxx*maxy;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(!a[len].flag) continue;\n\t\t\ta[len].flag=0;\n\t\t\ta[a[len].nxt].len+=a[len].len;\n\t\t\tmaxx=max(maxx,a[a[len].nxt].len);\n\t\t\ta[a[len].pre].nxt=a[len].nxt;\n\t\t\ta[a[len].nxt].pre=a[len].pre;\n\t\t\tsum[i-1]=maxx*maxy;\n\t\t}\n\t}\n\tfor(register int i=1;i<=q;i++) printf(\"%lld\\n\",sum[i]);\n}\n\nsigned main()\n{\n\tread();\n\tdeal_first();\n\tdo_it();\n\treturn 0;\n}\n```\n",
        "postTime": 1570939909,
        "uid": 117965,
        "name": "KRMS",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "\u5148\u6765\u5206\u6790\u9898\u76ee\uff0c\u8981\u6c42\u627e\u5230\u5207\u5272\u540e\u6700\u5927\u7684\u77e9\u5f62\u9762\u79ef\uff0c\u6839\u636e\u8bf4\u660e\u91cc\u7684\u56fe\u7247\u5206\u6790\u5f97\u77e5\uff0c\u95ee\u9898\u53ef\u4ee5\u8f6c\u6362\u4e3a\u6c42\u6a2a\u7eb5\u4e24\u8fb9\u6700\u957f\u7684\u4e00\u6bb5\u3002\n\n\u770b\u5230\u8fd9\u91cc\uff0c\u60f3\u5230\u4e86\u4e00\u9053\u7ecf\u5178\u7684\u9898\u76ee\uff1a[hotel\u9152\u5e97\uff08\u65c5\u9986\uff09](https://www.luogu.org/problemnew/show/P2894)\n\n\u7ef4\u62a4\u6a2a\u7eb5\u4e24\u8fb9\u6700\u957f\u7684\u672a\u88ab\u5207\u5272\u7684\u4e00\u6bb5\uff0c\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u3002\u6a2a\u7eb5\u4e24\u8fb9\u5404\u5efa\u4e00\u68f5\u7ebf\u6bb5\u6811\u3002\n\n\u75280\u8868\u793a\u6ca1\u88ab\u5207\u5272\uff0c\u75281\u8868\u793a\u88ab\u5207\u5272\u3002\n\n## \u6c42\u533a\u95f4\u6700\u957f\u7684\u8fde\u7eed0\uff1a\n\n\u9996\u5148\u60f3\u5230\uff0c\u7ef4\u62a4\u5f53\u524d\u533a\u95f4\u6700\u957f\u8fde\u7eed0\uff0c\u5927\u533a\u95f4\u7684\u6700\u957f\u8fde\u7eed0\u7b49\u4e8e\u5de6\u53f3\u533a\u95f4\u6700\u957f\u8fde\u7eed0\u7684max\u3002\n\n\u7136\u800c\uff0c\u5bf9\u8fd9\u4e00\u4e2a\u5de6\u53f3\u533a\u95f4\uff1a11000011000  00011000001\uff0c\u5408\u5e76\u540e\u5927\u533a\u95f4\u7684\u6700\u957f\u8fde\u7eed0\u660e\u663e\u662f6\uff08\u4e2d\u95f4\u7684\u4e00\u6bb5\uff09\uff0c\u800c\u4e0d\u662f5\uff08max(4,5)\uff09\u3002\n\n\u8fd9\u79cd\u60c5\u51b5\u5982\u4f55\u5904\u7406\u5462\uff1f\n\n\u5206\u6790\u53d1\u73b0\uff0c\u4e2d\u95f4\u7684\u8fd9\u4e00\u6bb5\u662f\u7531\u5de6\u8fb9\u533a\u95f4\u7684\u53f3\u8fb9\u8fde\u7eed\u96f6\uff0c\u548c\u53f3\u8fb9\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6\u3002\n\n\u6240\u4ee5\u6211\u4eec\u7ef4\u62a4\u533a\u95f4\u5de6\u53f3\u8fde\u7eed\u96f6\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5c06\u5de6\u53f3\u533a\u95f4\u7684 \u4e2d\u95f4\u6700\u5927\u8fde\u7eed\u96f6\u548c \u5de6\u533a\u95f4\u7684\u53f3\u8fb9\u548c\u53f3\u533a\u95f4\u7684\u5de6\u8fb9\u7684\u548c \u8fdb\u884c\u6bd4\u8f83\u6c42\u6700\u5927\u503c\uff0c\u5c31\u662f \u9664\u5de6\u53f3\u533a\u95f4\u4e4b\u5916\u7684\u6700\u957f\u8fde\u7eed\u96f6\n\n\u5173\u4e8e\u5de6\u53f3\u533a\u95f4\u8fde\u7eed\u96f6\uff0c\n\n\u5927\u533a\u95f4\u7684\u5de6\u53f3\u8fde\u7eed\u96f6\u7b49\u4e8e\u5de6\\\u53f3\u533a\u95f4\u8fde\u7eed\u5de6\\\u53f3\u96f6\n\n\u5417\uff1f\n\n\u5bf9\u4e8e\u4e0b\u9762\u8fd9\u4e2a\u6570\u636e\uff1a000000 001001,\u5408\u5e76\u533a\u95f4\u540e\u5de6\u8fb9\u6700\u957f\u8fde\u7eed\u96f6\u5e94\u8be5\u662f8\uff086+2\uff09\u800c\u4e0d\u662f6\uff08\u5de6\u533a\u95f4\u7684\u5de6\u8fde\u7eed\u96f6\uff09\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8fd8\u9700\u8981\u7ef4\u62a4\u4e00\u4e2abool\uff0c\u6807\u8bb0\u662f\u5426\u5f53\u524d\u533a\u95f4\u5168\u662f\u96f6\u3002\n\n\u5982\u679c\u5168\u662f\u96f6\uff0c\u90a3\u4e48 \u5927\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6 \u7b49\u4e8e \u5de6\u8fb9\u533a\u95f4\u7684\u6240\u6709\u96f6 \u52a0\u4e0a \u53f3\u8fb9\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6\n\n\u5927\u533a\u95f4\u7684\u5de6\u53f3\u8fde\u7eed\u96f6\n**000000 00**1001\n\n\u7b49\u4e8e\n\n\u5de6\u8fb9\u533a\u95f4\u7684\u6240\u6709\u96f6**000000** 001001\n\n\u52a0\u4e0a\n\n\u53f3\u8fb9\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6000000 **00**1001\n\n\u5982\u679c\u4e0d\u5168\u662f\u96f6\uff0c\u90a3\u4e48\u5927\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6\u7b49\u4e8e\u5de6\u533a\u95f4\u7684\u5de6\u8fb9\u8fde\u7eed\u96f6\u3002\uff08\u53f3\u8fb9\u540c\u7406\n\n\n\n## \u4fee\u6539\u548c\u67e5\u8be2\uff1a\n\n\u4fee\u6539\u5c31\u662f\u5c06\u5f53\u524d\u70b9\u6240\u6709\u7ef4\u62a4\u7684\u4fe1\u606f\u53d8\u62100 \u3002\n\n\u5efa\u6811\u65f6\u5c06\u5f53\u524d\u70b9\u6240\u6709\u7ef4\u62a4\u7684\u4fe1\u606f\u53d8\u62101 \u3002\n\n\u7531\u4e8e\u67e5\u8be2\u6574\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\uff0c\u6240\u4ee5\u76f4\u63a5\u67e5\u8be2\u6839\u8282\u70b9\u5373\u53ef\uff0c\u4e0d\u5fc5\u6253\u533a\u95f4\u67e5\u8be2\u677f\u5b50\uff08\u624b\u75d2\u9664\u5916\uff09\u3002\n\n## \u5c0f\u7ec6\u8282\n\n\u8f93\u5165\u7684\u662f\u8ddd\u79bb\uff0c\u6240\u4ee5\u5728\u5efa\u6811\u67e5\u8be2\u65f6\u8981-1\uff0c\u5728\u8f93\u51fa\u65f6\u8981+1 \u3002\n\n\u6a2a\u5207\u5f71\u54cd\u7684\u662f\u7eb5\uff0c\u7eb5\u5207\u5f71\u54cd\u7684\u662f\u6a2a\u3002\n\n\u5de6\u53f3\u533a\u95f4\u5168\u662f\u96f6\uff0c\u5f53\u524d\u533a\u95f4\u5168\u662f\u96f6\uff0c**\u5426\u5219\u4e0d\u5168\u662f\u96f6**\u3002\n\n\u5f00longlong\u597d\u4e60\u60ef\u3002\n\n## \u4ee3\u7801\uff08\u7801\u98ce\u6e05\u5947\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN 1000010\n#define int long long\nint sum_z[MAXN][5];//\u5de6\u533a\u95f4\u6700\u5927\u503c\nint sum_y[MAXN][5];//\u53f3\u533a\u95f4\u6700\u5927\u503c\nint sum_m[MAXN][5];//\u6574\u4e2a\u6700\u5927\u503c\nbool ifallzero[MAXN][5];//\u662f\u5426\u5168\u662f\u96f6\nvoid update(int now,int horz)\n{\n\tif(ifallzero[now<<1][horz]==1)//\u5de6\u513f\u5b50\u5168\u96f6\n\t\tsum_z[now][horz]=sum_z[now<<1][horz]+sum_z[now<<1|1][horz];//\u5f53\u524d\u5de6\u8fb9\u7b49\u4e8e\u5de6\u8fb9\u7684\u5168\u90e8+\u53f3\u8fb9\u7684\u5de6\u8fb9\n\telse\n\t\tsum_z[now][horz]=sum_z[now<<1][horz];//\u5426\u5219\u5f53\u524d\u5de6\u8fb9\u7b49\u4e8e\u5de6\u513f\u5b50\u5de6\u8fb9\n\t\t\n\tif(ifallzero[now<<1|1][horz]==1)//\u53f3\u513f\u5b50\u5168\u96f6\n\t\tsum_y[now][horz]=sum_y[now<<1|1][horz]+sum_y[now<<1][horz];//\u540c\u4e0a \n\telse\n\t\tsum_y[now][horz]=sum_y[now<<1|1][horz];//\u540c\u4e0a \n\n\tsum_m[now][horz]=max((sum_y[now<<1][horz]+sum_z[now<<1|1][horz]),max(sum_m[now<<1][horz],sum_m[now<<1|1][horz]));//\u4e2d\u95f4\u7b49\u4e8e\u5de6\u8fb9\u7684\u53f3\u8fb9+\u53f3\u8fb9\u7684\u5de6\u8fb9\u4e0e\u5de6\u53f3\u4e24\u8fb9\u6700\u5927\u503c\u7684\u6700\u5927\u503c \n\n\tif(ifallzero[now<<1][horz]==1&&ifallzero[now<<1|1][horz]==1)\n\tifallzero[now][horz]=true;//\u5de6\u53f3\u5168\u96f6\u548c\u5168\u96f6\n\telse\n\tifallzero[now][horz]=false;\n}\nvoid build(int now,int l,int r,int horz)//\u5efa\u6811\n{\n\tif(l==r)\n\t{\n\t\tsum_z[now][horz]=1;\n\t\tsum_y[now][horz]=1;\n\t\tsum_m[now][horz]=1;\n\t\tifallzero[now][horz]=true;//\u5168\u662f1\n\t\treturn ;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(now<<1,l,mid,horz);\n\tbuild(now<<1|1,mid+1,r,horz);\n\tupdate(now,horz);\n}\nvoid change(int now,int l,int r,int go,int horz)//\u4fee\u6539\n{\n\tif(l==r)\n\t{\n\t\tifallzero[now][horz]=false;//\u5168\u662f0\n\t\tsum_z[now][horz]=0;\n\t\tsum_y[now][horz]=0;\n\t\tsum_m[now][horz]=0;\n\t\treturn ;\n\t}\n\tint mid=(l+r)>>1;\n\tif(go<=mid)\n\tchange(now<<1,l,mid,go,horz);\n\telse\n\tchange(now<<1|1,mid+1,r,go,horz);\n\tupdate(now,horz);\n}\nsigned main()\n{\n\tint w,h,n,x;\n\tchar o;\n\tcin>>w>>h>>n;\n\tbuild(1,1,w-1,1);//\u6a2a \n\tbuild(1,1,h-1,2);//\u7eb5 \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>o>>x;\n\t\tif(o=='H')\n\t\t\tchange(1,1,h-1,x,2);//\u6a2a\u5207\u5f71\u54cd\u7eb5 \n\t\tif(o=='V')\n\t\t\tchange(1,1,w-1,x,1);//\u7eb5\u5207\u5f71\u54cd\u6a2a \n\t\tcout<<(sum_m[1][1]+1)*(sum_m[1][2]+1)<<endl;\n\t}\n    //return 0 \u597d\u4e60\u60ef\n}\n```\n\n\u8fd9\u91cc\u987a\u4fbf\u6574\u7406\u4e86\u7ebf\u6bb5\u6811\u6bd4\u8f83\u7b80\u5355\u7684\u201c\u677f\u5b50\u201d\u9898\n\n\u7ebf\u6bb5\u6811\u9898\u76ee\uff1a\n\n[\u7edf\u8ba1\u548c\uff1a\u7b80\u5316\u7248\u7684\u6a21\u677f1](https://www.luogu.org/problemnew/show/P2068)\n\n[\u5fe0\u8bda\uff1a\u6a21\u677f1\u96be\u5ea6\u7ecf\u5178\u9898](https://www.luogu.org/problemnew/show/P1816)\n\n[XOR\u7684\u827a\u672f\uff1a\u6a21\u677f1\u7684\u53d8\u79cd](https://www.luogu.org/problemnew/show/P2574)\n\n[\u6700\u5927\u6570\uff1a\u6a21\u677f1\u7684\u53d8\u79cd](https://www.luogu.org/problemnew/show/P1198)\n\n[\u5149\u5f00\u5173\uff1aXOR\u827a\u672f\u7684\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.org/problemnew/show/P2846)\n\n[\u5f00\u5173\uff1aXOR\u827a\u672f\u7684\u4e09\u500d\u7ecf\u9a8c](https://www.luogu.org/problemnew/show/P3870)\n\n[\u7ef4\u62a4\u5e8f\u5217\uff1a\u6a21\u677f2\u7684\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.org/problemnew/show/P2023)\n\n[\u65b9\u5dee\uff1a\u7ebf\u6bb5\u6811+\u6570\u5b66\uff0c\u6a21\u677f1\u53d8\u79cd](https://www.luogu.org/problemnew/show/P1471)\n\n[\u6570\u5b66\u8ba1\u7b97\uff1a\u6a21\u677f1\u7b80\u5316](https://www.luogu.org/problemnew/show/P4588)\n\n[Glass Carving\uff1a\u6a21\u677f1\u56f0\u96be](https://www.luogu.org/problemnew/show/CF527C)\n\n[\u9152\u5e97hotel\uff1aGlass\u7684\u56f0\u96be\u7248](https://www.luogu.org/problemnew/show/P2894)",
        "postTime": 1563499027,
        "uid": 50138,
        "name": "Liu_zj",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "## \u6765\u4e00\u53d160\u884c\uff08\u4e0d\u538b\u884c\uff09\u7684\u6e05\u65b0\u7ebf\u6bb5\u6811\u3002\n**\u6b64\u9898\u8ba9\u4f60\u6c42\u6bcf\u6b21\u5207\u5272\u4e4b\u540e\u7684 \u6700\u5927\u503c\uff0c \u4f60\u53ef\u4ee5\u628a\u5b83 \u6ca1\u6709\u5207\u5f97\u90e8\u5206\u8d4b\u4e3a0\u88ab\u5207\u5272\u5f97\u90e8\u5206\u8d4b\u4e3a\u4e00 \u8f6c\u5316\u4e3a\u6c42 \u6700\u957f\u7684 \u8fde\u7eed 0\u7684\u4e32\u7684\u957f\u5ea6\u3002 \u7531\u4e8ew\uff0ch\u8fc7\u4e8e\u5927\uff0c\u6211\u4eec\u53ef\u4ee5\u5f00\u4e24\u9897\u7ebf\u6bb5\u6811\u5206\u522b\u7ef4\u62a4\u518d \u6c42\u4e58  \u4f46\u7531\u4e8e\u662f\u8ddd\u79bb \u6240\u4ee5\u51cf\u4e00\u52a0\u4e00\u8981\u6ce8\u610f \u4e0b\u9762\u9644AC\u4ee3\u7801\uff1a**\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define int long long\nusing namespace std;\nconst int N=200005;\nstruct node\n{\n\tint lma;\n\tint rma;\n\tint ma;\n};\nnode tr[N<<2][3];\nvoid up(int id,int k,int l,int r)\n{\n\tint mid=(l+r)>>1;\n\ttr[k][id].lma=tr[k<<1][id].lma==(mid-l+1)?tr[k<<1][id].lma+tr[k<<1|1][id].lma:tr[k<<1][id].lma;\n\ttr[k][id].rma=tr[k<<1|1][id].rma==(r-mid)?tr[k<<1|1][id].rma+tr[k<<1][id].rma:tr[k<<1|1][id].rma;\n\ttr[k][id].ma=max(tr[k<<1][id].ma,tr[k<<1|1][id].ma);\n\ttr[k][id].ma=max(tr[k][id].ma,tr[k<<1][id].rma+tr[k<<1|1][id].lma);\n}\nvoid build(int id,int k,int l,int r)\n{\n\tif(l==r) return (void) (tr[k][id].lma=tr[k][id].rma=tr[k][id].ma=1);\n\tint mid=(l+r)>>1;\n\tbuild(id,k<<1,l,mid);\n\tbuild(id,k<<1|1,mid+1,r);\n\tup(id,k,l,r);\n}\nvoid add(int id,int k,int l,int r,int pos)\n{\n\tif(l==r) return(void)(tr[k][id].lma=tr[k][id].rma=tr[k][id].ma=0);\n\tint mid=(l+r)>>1;\n\tif(pos<=mid)\n\tadd(id,k<<1,l,mid,pos);\n\telse\n\tadd(id,k<<1|1,mid+1,r,pos);\n\tup(id,k,l,r);\n}\nint query(int id,int k,int l,int r,int ql,int qr)\n{\n\tif(ql==l&&qr==r) return max(tr[k][id].ma,max(tr[k][id].lma,tr[k][id].rma));\n\tint mid=(l+r)>>1;\n\tif(qr<=mid)\n\treturn query(id,k<<1,l,mid,ql,qr);\n\telse\n\tif(ql>mid)\n\treturn query(id,k<<1|1,mid+1,r,ql,qr);\n\telse\n\treturn max(query(id,k<<1,l,mid,ql,mid),query(id,k<<1|1,mid+1,r,mid+1,qr));\n}\nint w,h,q;\nsigned main()\n{\n\tscanf(\"%lld%lld%lld\",&w,&h,&q);\n\tbuild(1,1,1,w-1),build(2,1,1,h-1);\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tchar x;\n\t\tint y;\n\t\tcin>>x>>y;\n\t\tif(x=='H')add(2,1,1,h-1,y);\n\t\telse add(1,1,1,w-1,y);\n\t\tcout<<(query(1,1,1,w,1,w)+1)*(1+query(2,1,1,h,1,h))<<endl;\n\t}\n}\n```\n",
        "postTime": 1569333397,
        "uid": 128852,
        "name": "\u751f\u800c\u4e3a\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u6709\u4e00\u5757 $w\\times h$ \u7684\u73bb\u7483\uff0c\u6bcf\u6b21\u6a2a\u7740\u5207\u4e00\u5200 $(H)$ \u6216\u8005\u7ad6\u7740\u5207\u4e00\u5200 $(V)$ \uff0c\u6ca1\u6709\u4e24\u6b21\u76f8\u540c\u7684\u5207\u5272\uff0c\u6c42\u6700\u5927\u7684\u77e9\u5f62\u788e\u7247\u9762\u79ef\u3002 \n\n## \u5206\u6790\n\n\u663e\u7136\uff0c\u6700\u5927\u77e9\u5f62\u788e\u7247\u9762\u79ef $=$ \u6700\u5927\u7684\u957f $\\times$ \u6700\u5927\u7684\u5bbd\u3002\u56e0\u4e3a\u957f\u5bbd\u4e92\u4e0d\u5e72\u6270\uff0c\u6240\u4ee5\u6211\u4eec\u5206\u5f00\u5904\u7406\u3002\n\n\u6211\u4eec\u628a\u6c42\u957f\u548c\u5bbd\u770b\u4f5c\u67e5\u8be2\uff0c\u628a\u5207\u770b\u6210\u4fee\u6539\uff0c\u663e\u7136\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u652f\u6301\u5355\u70b9\u4fee\u6539+\u533a\u95f4\u67e5\u8be2\u7684\u7ebf\u6bb5\u6811\u3002\n\n\u63a5\u4e0b\u6765\u4ee5 $w$\uff08\u6a2a\u7740\uff09\u4e3a\u4f8b\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rzovi7bp.png)\n\n\u6211\u4eec\u7ebf\u6bb5\u6811\u4e2d\u5b9a\u4e49\u7684\u70b9\u662f\u4e00\u6bb5\u957f\u5ea6\uff0c\u4f46\u9898\u76ee\u8981\u628a\u4e00\u6bb5\u957f\u5ea6\u5206\u5f00\uff0c\u600e\u4e48\u529e\u5462\uff1f\n\n**\u52a0\u51e0\u4e2a\u70b9**\u5457\uff01\n\n\u6ca1\u9519\uff0c\u7531\u4e8e\u5207\u5272\u90fd\u662f\u6574\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u76f8\u90bb\u4e24\u4e2a\u5355\u4f4d\u957f\u5ea6\u4e4b\u95f4\u52a0\u4e00\u4e2a\u70b9\uff0c\u539f\u6765 $w$ \u4e2a\u70b9\u53d8\u6210\u4e86 $2\\times w-1$ \u4e2a\u70b9\uff0c\u7b2c $x$ \u4e2a\u5355\u4f4d\u957f\u5ea6\u4e0e\u7b2c $x+1$ \u4e2a\u5355\u4f4d\u957f\u5ea6\u4e4b\u95f4\u7684\u95f4\u9699\u76f8\u5f53\u4e8e\u7b2c $2\\times x$ \u4e2a\u8282\u70b9\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tmil6q8a.png)\n\n\u5efa\u6811\u65f6\uff0c\u6211\u4eec\u4ee4\u5168\u5c40\u4e3a $1$\u3002\n\n\u5207\u65ad\u65f6\uff0c\u6211\u4eec\u53ea\u8981\u628a\u7b2c $2\\times x$ \u4e2a\u8282\u70b9\u6539\u6210 $0$\uff0c\u7ef4\u62a4\u6700\u957f\u7684\u8fde\u7eed $1$ \u7684\u4e2a\u6570\u5c31\u884c\u4e86\u3002\n\n\u8ba1\u7b97\u7b54\u6848\u65f6\uff0c\u6700\u5927\u77e9\u5f62\u788e\u7247\u9762\u79ef $=$\uff08\u7b2c\u4e00\u4e2a\u7ebf\u6bb5\u6811\u6700\u957f\u7684\u8fde\u7eed $1$ \u7684\u4e2a\u6570 $+1$\uff09$\\div2\\times$ \uff08\u7b2c\u4e8c\u4e2a\u7ebf\u6bb5\u6811\u6700\u957f\u7684\u8fde\u7eed $1$ \u7684\u4e2a\u6570 $+1$\uff09$\\div2$\u3002\n\n**\u53cb\u60c5\u63d0\u793a**\uff1a\u6ce8\u610f\u5f00 ``long long``\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define pl p<<1\n#define pr p<<1|1\nusing namespace std;\nint read(){\n\tint x=0,f=1;char ch=getchar();\n\twhile (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}\n\twhile (isdigit(ch)){x=x*10+ch-48;ch=getchar();}\n\treturn x*f;\n}\nconst int N=4e5+10;\nint w,h,n,x;\nchar op;\nstruct Tree{\n\tint l,r;\n\tint lmx,rmx,mx;\n}s[2][4*N];\nvoid pushup(int k,int p){\n\ts[k][p].lmx=s[k][pl].lmx;\n\tif(s[k][pl].lmx==s[k][pl].r-s[k][pl].l+1)\n\t\ts[k][p].lmx=max(s[k][p].lmx,s[k][pl].lmx+s[k][pr].lmx);\n\ts[k][p].rmx=s[k][pr].rmx;\n\tif(s[k][pr].rmx==s[k][pr].r-s[k][pr].l+1)\n\t\ts[k][p].rmx=max(s[k][p].rmx,s[k][pr].rmx+s[k][pl].rmx);\n\ts[k][p].mx=max(max(s[k][pl].mx,s[k][pr].mx),max(s[k][p].lmx,s[k][p].rmx));\n\ts[k][p].mx=max(s[k][p].mx,s[k][pl].rmx+s[k][pr].lmx);\n}\nvoid build(int k,int p,int l,int r){\n\ts[k][p].l=l;s[k][p].r=r;\n\tif(l==r){\n\t\ts[k][p].mx=s[k][p].lmx=s[k][p].rmx=1;\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(k,pl,l,mid);\n\tbuild(k,pr,mid+1,r);\n\tpushup(k,p);\n}\nvoid change(int k,int p,int x){\n\tif(s[k][p].l==s[k][p].r){\n\t\ts[k][p].mx=s[k][p].lmx=s[k][p].rmx=0;\n\t\treturn;\n\t}\n\tint mid=(s[k][p].l+s[k][p].r)>>1;\n\tif(x<=mid)\n\t\tchange(k,pl,x);\n\telse\n\t\tchange(k,pr,x);\n\tpushup(k,p);\n}\nll ask(){\n\treturn (ll)(s[0][1].mx+1)/2*(s[1][1].mx+1)/2;\n}\nint main()\n{\n    w=read();h=read();n=read();\n\tbuild(0,1,1,2*w-1);\n\tbuild(1,1,1,2*h-1);\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>op;\n      x=read();\n\t\tif(op=='H')\n\t\t\tchange(1,1,2*x);\n\t\telse\n\t\t\tchange(0,1,2*x);\n\t\tcout<<ask()<<endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1629389129,
        "uid": 419144,
        "name": "chenjunxiu",
        "ccfLevel": 7,
        "title": "CF527C Glass Carving"
    },
    {
        "content": "\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u5207\u5272\u540e\uff0c\u6c42\u51fa\u6700\u5927\u7684\u788e\u7247\u9762\u79ef\uff0c\u4e5f\u5c31\u662f\u6c42\u51fa\u5b8c\u6574\u7684\u73bb\u7483\u7684\u6700\u5927\u957f\u5ea6\u4e0e\u6700\u5927\u5bbd\u5ea6\u4e4b\u79ef\u3002\n\n\u7531\u9898\u610f\u53ef\u77e5\uff0c\u4e00\u6761\u957f\u5ea6\u4e3a $k$ \u7684\u8fb9\uff0c\u6700\u591a\u53ef\u4ee5\u88ab\u5207 $k - 1$ \u6b21\uff0c\u56e0\u4e3a\u5728\u6b64\u4e4b\u540e\u5747\u4e3a\u957f\u5ea6\u4e3a $1$ \u7684\u8fb9\u65e0\u6cd5\u5728\u5207\u5272\u3002\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u7528 $0$ \u6216 $1$ \u6765\u8868\u793a\u8be5\u8fb9\u7684\u67d0\u4e2a\u70b9\u662f\u5426\u88ab\u5207\u5272\uff0c\u603b\u5171\u8868\u793a $k - 1$ \u4e2a\u70b9\u3002\u521d\u59cb\u7684\u65f6\u5019\u6bcf\u4e2a\u70b9\u5747\u4e3a $0$\uff0c\u8868\u793a\u6240\u6709\u7684\u70b9\u5747\u672a\u88ab\u5207\u5272\uff0c\u6bcf\u8f93\u5165\u4e00\u6b21\u540e\u5c06\u76f8\u5e94\u7684\u5207\u5272\u70b9\u6807\u8bb0\u4e3a $1$\u3002\u4e8e\u662f\u4e4e\uff0c\u4e0d\u96be\u5c06\u95ee\u9898\u8f6c\u5316\u6210\u6c42\u6bcf\u6b21\u5207\u5272\u540e\u6bcf\u6761\u8fb9\u7684\u6700\u957f $0$ \u7684\u4e2a\u6570\u3002\n\n\u8003\u8651\u7528\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\uff0c\u4e00\u68f5\u7ebf\u6bb5\u6811\u5171\u6709\u4ee5\u4e0b\u53c2\u6570\uff1a`len`\u3001`l`\u3001`r` \u4e0e `mx`\uff0c\u5206\u522b\u8868\u793a\u533a\u95f4\u7684\u957f\u5ea6\u3001\u4ece\u5de6\u7aef\u70b9\u6700\u957f $0$ \u7684\u4e2a\u6570\u3001\u4ece\u53f3\u7aef\u70b9\u6700\u957f $0$ \u7684\u4e2a\u6570\u4ee5\u53ca\u8be5\u533a\u95f4\u6700\u957f $0$ \u7684\u4e2a\u6570\u3002\n\n\u4e0b\u9762\u6211\u5c06\u5206\u522b\u8bb2\u8ff0 `build` \u3001 `modify` \u4e0e `pushup` \u51fd\u6570\u3002\n\n\u5728 `build` \u51fd\u6570\u4e2d\uff0c\u56e0\u521d\u59cb\u65f6\u5747\u4e3a $0$\uff0c\u6240\u4ee5\u6bcf\u6bb5\u533a\u95f4\u7684 `l`\u3001`r` \u4e0e `mx` \u7684\u503c\u5747\u4e3a `len`\uff0c\u5373 $r - l + 1$\uff0c\u6709\u4ee5\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\nvoid build (T tree[],int cur,int l,int r)\n{\n\ttree[cur].l = tree[cur].r = tree[cur].mx = tree[cur].len = r - l + 1;\n\tif (l == r) return ;\n\tint mid = (l + r) >> 1;                                    \n\tbuild (tree,cur << 1,l,mid);\n\tbuild (tree,cur << 1 | 1,mid + 1,r); \n\tpushup (tree,cur);//\u8fd9\u4e2a\u5728\u63a5\u4e0b\u53bb\u8bb2\n}\n```\n\n\u5728 `modify` \u51fd\u6570\u4e2d\uff0c\u7531\u9898\u53ef\u77e5\u662f\u4e00\u4e2a\u5355\u70b9\u7684\u4fee\u6539\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5728 $l = r$ \u4e4b\u65f6\u628a\u8be5\u70b9\u7684\u503c\u6539\u4e3a $1$\uff0c\u8868\u793a\u5df2\u88ab\u5207\u5272\u5c31\u53ef\u4ee5\u4e86\u3002\u540c\u65f6\uff0c\u8be5\u533a\u95f4\u7684 `l`\u3001`r` \u4e0e `mx` \u56e0\u6570\u503c\u7684\u53d8\u5316\u5747\u4f1a\u53d8\u4e3a $0$\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nvoid modify (T tree[],int cur,int l,int r,int x)\n{\n\tif (l == r && x == l)\n\t{\n\t\ttree[cur].l = tree[cur].r = tree[cur].mx = 0;//\u5df2\u88ab\u5207\u5272\uff0c\u6b64\u70b9\u53d8\u4e3a 1\uff0c\u6545\u8be5\u70b9\u7684 0 \u4e2a\u6570\u5747\u66f4\u65b0\u4e3a 0\n\t\treturn ;\n\t}\n\tint mid = (l + r) >> 1;\n\tif (x <= mid) modify (tree,cur << 1,l,mid,x);\n\telse modify (tree,cur << 1 | 1,mid + 1,r,x);\n\tpushup (tree,cur);\n}\n```\n\n\u6700\u540e\u6765\u8bb2 `pushup` \u51fd\u6570\uff0c\u6bcf\u4e2a\u533a\u95f4\u5728\u66f4\u65b0\u540e\u9664\u957f\u5ea6\u4e0d\u4f1a\u6539\u53d8\u5916\u5176\u4f59\u5747\u6709\u53d8\u52a8\u3002\u9996\u5148\u662f `l` \u7684\u503c\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u82e5\u4ece\u5de6\u7aef\u70b9\u6700\u957f $0$ \u7684\u4e2a\u6570\u4e0e\u533a\u95f4\u957f\u5ea6\u76f8\u7b49\uff0c\u5219\u8bf4\u660e\u6b63\u4e00\u6bb5\u533a\u95f4\u5747\u4e3a $0$\uff0c\u56e0\u6b64\u53ef\u4ee5\u66f4\u65b0\u81f3\u53f3\u533a\u95f4\u7684\u5de6\u7aef $0$ \u6240\u80fd\u8fbe\u5230\u7684\u6700\u8fdc\u4e4b\u5904\uff0c\u76f8\u52a0\u5373\u53ef\uff1b\u5426\u5219\u5c31\u662f\u5de6\u7aef\u70b9\u7684 `l` \u7684\u503c\u3002`r` \u7684\u503c\u540c\u7406\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\u540c\u65f6\uff0c\u9700\u8981\u66f4\u65b0\u533a\u95f4 `mx`\uff0c\u6613\u5f97\u6709\u4e09\u79cd\u60c5\u51b5\uff0c\u5206\u522b\u4e3a\u5de6\u7aef\u70b9\u5f00\u59cb\u6700\u957f\u7684 $0$ \u7684\u4e2a\u6570\uff0c\u53f3\u7aef\u70b9\u5f00\u59cb\u6700\u957f\u7684 $0$ \u7684\u4e2a\u6570\u4ee5\u53ca\u5e8f\u5217\u4e2d\u95f4\u6700\u957f\u7684 $0$ \u7684\u4e2a\u6570\uff0c\u4e09\u8005\u53d6\u6700\u503c\u5c31\u80fd\u66f4\u65b0\u7b54\u6848\u4e86\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nvoid pushup (T tree[],int cur)\n{\n\tif (tree[cur << 1].l == tree[cur << 1].len) tree[cur].l = tree[cur << 1].len + tree[cur << 1 | 1].l;\n\telse tree[cur].l = tree[cur << 1].l;\t\n\tif (tree[cur << 1 | 1].r == tree[cur << 1 | 1].len) tree[cur].r = tree[cur << 1 | 1].len + tree[cur << 1].r;\n\telse tree[cur].r = tree[cur << 1 | 1].r;\n\ttree[cur].mx = max (tree[cur << 1].mx,max (tree[cur << 1 | 1].mx,tree[cur << 1].r + tree[cur << 1 | 1].l));//\u4e09\u6bb5\u53d6\u6700\u503c\n}\n```\n\n\u6700\u540e\u7ed9\u51fa\u4e3b\u51fd\u6570\uff0c\u67e5\u8be2\u5373\u4e3a\u4e0b\u6807\u4e3a $1$ \u7684\u7ebf\u6bb5\u6811\u7684\u6570\u7ec4\u7684 `mx` \u503c\uff0c\u4f46\u8fd4\u56de\u7684\u7b54\u6848\u8bb0\u5f97 $+1$\uff0c\u753b\u4e00\u4e0b\u56fe\u5c31\u80fd\u609f\u4e86\u54e6\uff01\n\n```cpp\nint main ()\n{\n\tm = read ();n = read ();q = read ();\n\tbuild (tree_l,1,1,n - 1);build (tree_h,1,1,m - 1);\n\twhile (q--)\n\t{\n\t\tchar x;int num;\n\t\tscanf (\"%c\",&x);num = read ();\n\t\tif (x == 'H') modify (tree_l,1,1,n - 1,n - num);//\u8ddd\u79bb\u5e95\u90e8\n\t\telse modify (tree_h,1,1,m - 1,num);//\u8ddd\u79bb\u5de6\u7aef\n\t\tll da = tree_h[1].mx + 1,db = tree_l[1].mx + 1;//\u522b\u5fd8\u4e86\n\t\tprintf (\"%lld\\n\",da * db);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1628256257,
        "uid": 183603,
        "name": "SUNCHAOYI",
        "ccfLevel": 6,
        "title": "\u3010CF527C Glass Carving\u3011 \u9898\u89e3"
    },
    {
        "content": "\u7528 multiset \u548c set \u505a\u7684\u3002\n\n\u56e0\u4e3a\u5207\u5272\u4f4d\u7f6e\u53ef\u4ee5\u91cd\u590d\uff0c\u56e0\u6b64\u8003\u8651\u7528 multiset \u5b58\u50a8\u3002\u800c set \u53ef\u4ee5\u5b58\u50a8\u5207\u5272\u540e\u7684\u788e\u5757\u8fb9\u957f\u7684\u6700\u503c\u3002\n\n\u6700\u540e\u6bcf\u6b21\u5207\u5272\u4e4b\u540e\u7ef4\u62a4\u4e00\u4e0b\u6700\u5927\u79ef\u8f93\u51fa\u5373\u53ef\u3002\n\n\u56e0\u4e3a set \u548c multiset \u90fd\u662f\u9ed8\u8ba4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7684\uff0c\u56e0\u800c\u4e0d\u7528\u6392\u5e8f\u3002\n\n\u5177\u4f53\u770b\u4ee3\u7801\u7406\u89e3\u3002\n\n```cpp\n\n#include<bits/stdc++.h>\n//by :zplqwq\nusing namespace std;\n\nint w,h,n;\nmultiset<int> sx;\nmultiset<int> sy;\nset<int> x;\nset<int> y;\nchar c;\nint p;\nint main()\n{\n\t\n\tscanf(\"%d%d%d\",&w,&h,&n);\n\tx.insert(0);\n\tx.insert(h);\n\ty.insert(w);\n\ty.insert(0);\n   // \u8fb9\u957f\n\tsx.insert(h);\n\tsy.insert(w);\n   //\u4f4d\u7f6e\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tchar c;\n\t\tint p;\n\t\tscanf(\"%s%d\",&c,&p);\n\t\t//scanf(\"%d\",&p);\n\t\t//cout<<endl;\n      //\u8fd9\u91cc\u6211\u8003\u8651\u4e86\u4f1a\u6709\u4e24\u4e2a\u4e00\u6837\u7684\u5207\u7684\u60c5\u51b5\uff0c\u5176\u5b9e\u6309\u7167\u9898\u610f\u662f\u53ef\u4ee5\u4e0d\u8003\u8651\u7684\u3002\n\t\tif(c=='V')\n\t\t{\n\t\t\tmultiset<int>::iterator it,itt,ittt;\n\t\t\tit=y.lower_bound(p);\n\t\t\titt=it;\n\t\t\tif(it!=y.begin())\t--it;\n\t\t\ty.insert(p);\n\t\t\tittt=sy.lower_bound(*itt-*it);\n        //\u5220\u9664\u5df2\u88ab\u7834\u574f\u7684\n\t\t\tsy.erase(ittt);\n        //\u65b0\u589e\u8fb9\u957f\n\t\t\tsy.insert(*itt-p);\n\t\t\tsy.insert(p-*it);\n\t\t\t//sy.insert(rs); \n\t\t\t/*\n\t\t\telse\n\t\t\t{\n\t\t\t\tsy.insert(ls);\n\t\t\t\tsy.insert(rs);\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\telse\n\t\t{\n        //\u4e0e\u4e0a\u9762\u51e0\u4e4e\u540c\u7406\n\t\t\tmultiset<int>::iterator it,itt,ittt;\n\t\t\tit=x.lower_bound(p);\n\t\t\titt=it;\n\t\t\tif(it!=x.begin())\t--it;\n\t\t\tx.insert(p);\n\t\t\tittt=sx.lower_bound(*itt-*it);\n\t\t\tsx.erase(ittt);\n\t\t\tsx.insert(*itt-p);\n\t\t\tsx.insert(p-*it);\n\t\t//\tsx.insert(rs);\n\t\t\t/*\n\t\t\telse\n\t\t\t{\n\t\t\t\tsy.insert(ls);\n\t\t\t\tsy.insert(rs);\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t}\n\t\tint a,b;\n\t\ta=*(--sx.end());\n\t\tb=*(--sy.end());\n     //\u53d6\u6700\u5927\u4e58\u79ef\n\t\t//cout<<a<<\" \"<<b<<endl;\n\t\tprintf(\"%lld\\n\",(1LL)*a*b);\n\t}\n\t\n\treturn 0;\n}\n```",
        "postTime": 1624879183,
        "uid": 369904,
        "name": "zplqwq",
        "ccfLevel": 0,
        "title": "CF527C Glass Carving \u9898\u89e3"
    },
    {
        "content": "### \u89e3\u9898\u601d\u8def\n\u672c\u9898\u4f7f\u7528 `multiset<>`\uff0c\u6ce8\u610f\uff1a\u56e0\u4e3a $2 \\leq w,h \\leq 200000$\uff0c\u5e76\u4e14 $200000 \\times 200000 > 2^{31}$\uff0c\u6709\u4e9b\u8fd8\u8981\u5f00 `long long`\uff0c\u4e0d\u7136\u4f1a\u70b8\u6389\u7684\u3002\u4e3a\u4e86\u8bb0\u5f55\u6bcf\u4e00\u6b21\u5207\u5272\uff0c\u6211\u4eec\u5c31\u8981\u5b9a\u4e49\u8fd9\u4e9b\uff1a\n\n```cpp\nmultiset<long long> x, V;  //\u524d\u8005 x \u7528\u4e8e\u8bb0\u5f55\u6240\u6709\u957f\u7684\u5206\u6bb5\uff0c\u540e\u8005 V \u7528\u4e8e\u8bb0\u5f55\u573a\u4e0a\u6240\u6709\u5207\u5272\u70b9\u3002\nmultiset<long long> y, H;  //\u524d\u8005 y \u7528\u4e8e\u8bb0\u5f55\u6240\u6709\u957f\u7684\u5206\u6bb5\uff0c\u540e\u8005 H \u7528\u4e8e\u8bb0\u5f55\u573a\u4e0a\u6240\u6709\u5207\u5272\u70b9\u3002\n```\n\n\u7136\u540e\u518d\u6bcf\u6b21\u5207\u5272\u65f6\uff1a\n\n+ \u627e\u5230\u5207\u5272\u70b9 $mid$ \u9760\u8fd1\u4e24\u65c1\u7684\u4e24\u4e2a\u70b9 $l$ \u548c $r$\u3002\u56e0\u4e3a\u4e00\u5200\u4e0b\u53bb\uff0c\u73bb\u7483\u7edd\u5bf9\u6709\u4e00\u6bb5\u53d8\u6210\u4e24\u4efd\u4e86\uff0c\u6240\u4ee5\u73b0\u5728\u8981\u64e6\u9664 $r-l$ \u7684\u4e00\u6bb5\uff0c\u6362\u6210 $r - mid$ \u548c $mid - l$\u3002\n\n### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nlong long w, h, n;\nchar ch;\nlong long mid;\nmultiset<long long> x, V;  //\u524d\u8005 x \u7528\u4e8e\u8bb0\u5f55\u6240\u6709\u957f\u7684\u5206\u6bb5\uff0c\u540e\u8005 V \u7528\u4e8e\u8bb0\u5f55\u573a\u4e0a\u6240\u6709\u5207\u5272\u70b9\u3002\nmultiset<long long> y, H;  //\u524d\u8005 y \u7528\u4e8e\u8bb0\u5f55\u6240\u6709\u957f\u7684\u5206\u6bb5\uff0c\u540e\u8005 H \u7528\u4e8e\u8bb0\u5f55\u573a\u4e0a\u6240\u6709\u5207\u5272\u70b9\u3002\nint main() {\n  cin >> w >> h >> n;  //\u957f \u9ad8 \u6b21\u6570\n\n  // \u8bb0\u5f55\u6709\u54ea\u51e0\u6bb5\uff08\u957f\u5ea6\uff09\uff1a\n  x.insert(w);\n  y.insert(h);\n\n  // \u8bb0\u5f55\u6536\u5c3e\u70b9\uff08\u4e5f\u7b97\u4e0a\u5207\u5272\uff09\uff1a\n  V.insert(0);\n  V.insert(w);\n  H.insert(0);\n  H.insert(h);\n\n  // \u63a5\u53d7\u5207\u5272\uff1a\n  while (n--) {\n    long long l, r;\n    cin >> ch >> mid;\n    if (ch == 'H') {\n      H.insert(mid);\n      auto it = H.lower_bound(mid);  //\u83b7\u53d6\u8be5\u5728\u9ad8\u4e0a\u7684\u5207\u5272\u70b9\u4f4d\u7f6e\u3002\n      it--;                          //\u8be5\u70b9\u7684\u4e0a\u4e00\u70b9\u3002\n      l = *it;                       //\u8bb0\u5f55\u4e0a\u4e00\u70b9\u4f4d\u7f6e\u3002\n      it++;                          //\u8fd4\u56de\u8be5\u70b9\u3002\n      it++;                          //\u8be5\u70b9\u7684\u4e0b\u4e00\u70b9\u3002\n      r = *it;                       //\u8bb0\u5f55\u4e0b\u4e00\u70b9\u4f4d\u7f6e\u3002\n\n      // \u7528\u4f4d\u7f6e\u5dee\u5f97\u51fa\u4e3b\u8981\u5207\u5272\u70b9\u4f1a\u6539\u53d8\u7684\u957f\u5ea6\uff1a\n      it = y.lower_bound(r - l);\n\n      //\u64e6\u9664\u5e76\u4e14\u66f4\u65b0\u957f\u5ea6\uff0c\u56e0\u4e3a\u4e00\u5200\u4e0b\u53bb\uff0c\u73bb\u7483\u7edd\u5bf9\u6709\u4e00\u6bb5\u53d8\u6210\u4e24\u4efd\u4e86\uff1a\n      y.erase(it);\n      y.insert(r - mid);\n      y.insert(mid - l);\n    } else {\n      // \u610f\u601d\u4e0e\u9ad8\u7684\u65b9\u6cd5\u5dee\u4e0d\u591a\uff1a\n      V.insert(mid);\n      auto it = V.lower_bound(mid);\n      it--;\n      l = *it;\n      it++;\n      it++;\n      r = *it;\n      it = x.lower_bound(r - l);\n      x.erase(it);\n      x.insert(r - mid);\n      x.insert(mid - l);\n    }\n\n    // \u56e0\u4e3a multiset \u662f\u6392\u4e86\u5e8f\u7684\uff0c\u6240\u4ee5\u5206\u522b\u53ea\u8981\u627e\u6700\u540e\u9762\u7684\u4e24\u4e2a\u6700\u5927\u957f\u5ea6\u5c31\u80fd\u7b97\u51fa\u6700\u5927\u9762\u79ef\uff1a\n    long long VV, HH;\n    auto it = x.end();\n    it--;\n    VV = *it;\n    it = y.end();\n    it--;\n    HH = *it;\n    cout << VV * HH << \"\\n\";\n  }\n  return 0;\n}\n```",
        "postTime": 1642493198,
        "uid": 482347,
        "name": "ZZQF5677",
        "ccfLevel": 0,
        "title": "CF527C TJ"
    },
    {
        "content": "### \u9898\u610f\u7b80\u8ff0  \n\u5207\u5272\u4e00\u5757 $W \\times H$ \u7684\u73bb\u7483\uff0c```H``` \u8868\u793a\u6a2a\u7740\u5207\uff0c```V``` \u8868\u793a\u7ad6\u7740\u5207\u3002\u95ee\u6bcf\u6b21\u5207\u5272\u540e\u6700\u5927\u7684\u90a3\u5757\u73bb\u7483\u6709\u591a\u5927\u3002  \n### \u601d\u8def  \n```cpp\nmultiset<long long> x,y;\n```  \n\u7528 $x$ \u5b58\u6240\u6709\u788e\u7247\u7684\u5bbd\uff0c$y$ \u5b58\u6240\u6709\u788e\u7247\u7684\u9ad8\u3002  \n```cpp\nmultiset<long long> lx,ly;\n```  \n\u7528 $lx$ \u5b58\u7ad6\u7740\uff08```V```\uff09\u5207\u7684\u4f4d\u7f6e\uff0c$ly$ \u5b58\u6a2a\u7740\uff08```H```\uff09\u5207\u7684\u4f4d\u7f6e\u3002\n\n\u6bcf\u6b21\u5faa\u73af\u65f6\uff1a  \n>+ \u5982\u679c\u8f93\u5165\u7684\u662f $V$\uff0c$pos$\u3002  \n>\u5047\u5982\u6211\u4eec\u7ad6\u7740\u5207 $pos$ \u8fd9\u4e2a\u4f4d\u7f6e\u3002 \u90a3\u4e48\u6211\u4eec\u76f4\u63a5 ```lx.insert(pos)```\u3002\u7136\u540e\u627e\u5230 $pos$ \u5c0f\u548c\u6bd4 $pos$ \u5927\u7684\u4e24\u4e2a\u4f4d\u7f6e $l$,$r$\uff0c\u663e\u7136\u6211\u4eec\u662f\u5207\u5272 $x$ \u4e2d\u8fb9\u754c $l$,$r$ \u7684\u73bb\u7483\uff0c\u5b83\u4eec\u7684\u5bbd\u4e3a $r-l$\u3002  \n>+ \u5982\u679c\u8f93\u5165\u7684\u662f $H$\uff0c$pos$\u3002  \n>\u540c\u7406\u3002\u6bcf\u6b21\u5207\u5272\u4e00\u6b21\uff0c\u90fd\u4f1a\u5220\u9664\u4e00\u4e2a $x$ \u6216\u8005 $y$ \u4e2d\u7684\u4e00\u4e2a\u5bbd\u5ea6\u6216\u8005\u9ad8\u5ea6\uff0c\u7136\u540e\u4ea7\u751f\u4e24\u4e2a\u65b0\u7684\u5bbd\u5ea6\u6216\u8005\u9ad8\u5ea6\u3002  \n\n### \u5949\u4e0a\u849f\u84bb\u7684 $AC$ \u4ee3\u7801:  \n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nint w,h,n;\nmultiset<int> x,y,lx,ly;//\u5b58\u50a8\u6240\u6709\u788e\u7247\u7684\u8fb9\u957f\u3001\u5207\u5272\u7684\u4f4d\u7f6e \nmultiset<int>::iterator it;\nsigned main()\n{\n\tcin >> w >> h >> n;//\u6700\u5f00\u59cb\u662f\u4e00\u6574\u5757\u73bb\u7483\n\tx.insert(w);\n\ty.insert(h);\n\tlx.insert(0);\n\tlx.insert(w);\n\tly.insert(0);\n\tly.insert(h);\n\twhile(n--)\n\t{\n\t\tchar ch;\n\t\tint pos;\n\t\tcin >> ch >> pos;\n\t\tif (ch=='H')\n\t\t{\n\t\t\tint l,r;\n\t\t\tly.insert(pos);\n\t\t\tit=ly.find(pos);\n\t\t\tit--;//\u627e\u5230pos\u524d\u4e00\u4e2a\u5207\u5272\u4f4d\u7f6e\n\t\t\tl=*it;\n\t\t\tit++;\n\t\t\tit++;//\u627e\u5230pos\u540e\u4e00\u4e2a\u5207\u5272\u4f4d\u7f6e\n\t\t\tr=*it;//\u5220\u9664\u4e00\u4e2a\u9ad8\u5ea6r-l\uff0c\u589e\u52a0\u4e24\u4e2a\u65b0\u9ad8\u5ea6\n\t\t\tit=y.find(r-l);\n\t\t\ty.erase(it);\n\t\t\ty.insert(r-pos);\n\t\t\ty.insert(pos-l);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint l,r;\n\t\t\tlx.insert(pos);\n\t\t\tit=lx.find(pos);\n\t\t\tit--;//\u627e\u5230pos\u524d\u4e00\u4e2a\u5207\u5272\u4f4d\u7f6e\n\t\t\tl=*it;\n\t\t\tit++;\n\t\t\tit++;//\u627e\u5230pos\u540e\u4e00\u4e2a\u5207\u5272\u4f4d\u7f6e\n\t\t\tr=*it;//\u5220\u9664\u4e00\u4e2a\u5bbd\u5ea6r-l\uff0c\u589e\u52a0\u4e24\u4e2a\u65b0\u5bbd\u5ea6\n\t\t\tit=x.find(r-l);\n\t\t\tx.erase(it);\n\t\t\tx.insert(r-pos);\n\t\t\tx.insert(pos-l);\n\t\t}\n\t\tint r,c;\n\t\tit=x.end();\n\t\tit--;\n\t\tr=*it;\n\t\tit=y.end();\n\t\tit--;\n\t\tc=*it;\n\t\tcout << r*c << \"\\n\";\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1640674561,
        "uid": 367194,
        "name": "kdy20100729",
        "ccfLevel": 0,
        "title": "CF527C \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\uff0c\u957f\u5bbd\u90fd\u662f 10^5\uff0c\u6240\u4ee5\uff0c\u7528 01 \u5e8f\u5217\u8868\u793a\u6bcf\u4e2a\u70b9\u662f\u5426\u88ab\u5207\u5272\uff0c\u7136\u540e\uff0c\n\n\u6700\u957f\u7684\u957f\u5c31\u662f\u957f\u7684\u6700\u957f\u8fde\u7eed 0 \u7684\u6570\u91cf+1\n\n\u6700\u957f\u7684\u5bbd\u5c31\u662f\u5bbd\u7684\u6700\u957f\u8fde\u7eed 0 \u7684\u6570\u91cf+1\n\n\u4e8e\u662f\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6700\u957f\u8fde\u7eed\u96f6\n\n\u95ee\u9898\u8f6c\u6362\u6210\uff1a\n\n\u76ee\u6807\u4fe1\u606f\uff1a\u533a\u95f4\u6700\u957f\u8fde\u7eed\u96f6\u7684\u4e2a\u6570\n\n\u70b9\u4fe1\u606f\uff1a0 \u6216 1 \u7531\u4e8e\u76ee\u6807\u4fe1\u606f\u4e0d\u7b26\u5408\u533a\u95f4\u52a0\u6cd5\uff0c\u6240\u4ee5\u8981\u6269\u5145\u76ee\u6807\u4fe1\u606f\u3002\n\u8f6c\u6362\u540e\u7684\u7ebf\u6bb5\u6811\u7ed3\u6784\uff1a\n\n\u533a\u95f4\u4fe1\u606f\uff1a\u4ece\u5de6\uff0c\u53f3\u5f00\u59cb\u7684\u6700\u957f\u8fde\u7eed\u96f6\uff0c\u672c\u533a\u95f4\u662f\u5426\u5168\u96f6\uff0c\u672c\u533a\u95f4\u6700\u957f\u8fde\u7eed\u96f6\u3002\n\n\u70b9\u4fe1\u606f\uff1a0 \u6216 1\n\n\u7136\u540e\u8fd8\u662f\u90a3 2 \u4e2a\u95ee\u9898\uff1a\n\n1.\u533a\u95f4\u52a0\u6cd5\uff1a\n\n\u8fd9\u91cc\uff0c\u4e00\u4e2a\u533a\u95f4\u7684\u6700\u957f\u8fde\u7eed\u96f6\uff0c\u9700\u8981\u8003\u8651 3 \u90e8\u5206\uff1a\n\n\uff081\uff09\uff1a\u5de6\u5b50\u533a\u95f4\u6700\u957f\u8fde\u7eed\u96f6\n\n\uff082\uff09\uff1a\u53f3\u5b50\u533a\u95f4\u6700\u957f\u8fde\u7eed\u96f6\n\n\uff083\uff09\uff1a\u5de6\u53f3\u5b50\u533a\u95f4\u62fc\u8d77\u6765\uff0c\u800c\u5728\u4e2d\u95f4\u751f\u6210\u7684\u8fde\u7eed\u96f6\uff08\u53ef\u80fd\u957f\u4e8e\u4e24\u4e2a\u5b50\u533a\u95f4\u7684\u6700\u957f\u8fde\u7eed\u96f6\uff09\u800c\u4e2d\u95f4\u62fc\u8d77\u6765\u7684\u90e8\u5206\u957f\u5ea6\uff0c\u5176\u5b9e\u662f\u5de6\u533a\u95f4\u4ece\u53f3\u5f00\u59cb\u7684\u6700\u957f\u8fde\u7eed\u96f6+\u53f3\u533a\u95f4\u4ece\u5de6\u5f00\u59cb\u7684\u6700\u957f\u8fde\u7eed\u96f6\u3002\n\n\u6240\u4ee5\u6bcf\u4e2a\u8282\u70b9\u9700\u8981\u591a\u4e24\u4e2a\u91cf\uff0c\u6765\u5b58\u4ece\u5de6\u53f3\u5f00\u59cb\u7684\u6700\u957f\u8fde\u7eed\u96f6\u3002\n\n\u7136\u800c\uff0c\u5de6\u5f00\u59cb\u7684\u6700\u957f\u8fde\u7eed\u96f6\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\n\n\uff081\uff09\uff1a\u5de6\u533a\u95f4\u4e0d\u662f\u5168\u96f6\uff0c\u90a3\u4e48\u7b49\u4e8e\u5de6\u533a\u95f4\u7684\u5de6\u6700\u957f\u8fde\u7eed\u96f6\n\n\uff082\uff09\uff1a\u5de6\u533a\u95f4\u5168\u96f6\uff0c\u90a3\u4e48\u7b49\u4e8e\u5de6\u533a\u95f4 0 \u7684\u4e2a\u6570\u52a0\u4e0a\u53f3\u533a\u95f4\u7684\u5de6\u6700\u957f\u8fde\u7eed\u96f6\n\n\u4e8e\u662f\uff0c\u9700\u8981\u77e5\u9053\u5de6\u533a\u95f4\u662f\u5426\u5168\u96f6\uff0c\u4e8e\u662f\u518d\u591a\u52a0\u4e00\u4e2a\u53d8\u91cf\u3002\n\n\u6700\u7ec8\uff0c\u901a\u8fc7\u7ef4\u62a4 4 \u4e2a\u503c\uff0c\u8fbe\u5230\u4e86\u7ef4\u62a4\u533a\u95f4\u6700\u957f\u8fde\u7eed\u96f6\u7684\u6548\u679c\u3002\n\n2.\u70b9\u4fe1\u606f->\u533a\u95f4\u4fe1\u606f \uff1a\n\n\u5982\u679c\u662f 0\uff0c\u90a3\u4e48 \u6700\u957f\u8fde\u7eed\u96f6=\u5de6\u6700\u957f\u8fde\u7eed\u96f6=\u53f3\u6700\u957f\u8fde\u7eed\u96f6=1 \uff0c\u5168\u96f6=true\u3002\n\n\u5982\u679c\u662f 1\uff0c\u90a3\u4e48 \u6700\u957f\u8fde\u7eed\u96f6=\u5de6\u6700\u957f\u8fde\u7eed\u96f6=\u53f3\u6700\u957f\u8fde\u7eed\u96f6=0\uff0c \u5168\u96f6=false\u3002\n\n\u81f3\u4e8e\u4fee\u6539\u548c\u67e5\u8be2\uff0c\u6709\u4e86\u533a\u95f4\u52a0\u6cd5\u4e4b\u540e\uff0c\u673a\u68b0\u5730\u5199\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n\u7531\u4e8e\u8fd9\u91cc\u5176\u5b9e\u53ea\u6709\u5bf9\u6574\u4e2a\u533a\u95f4\u7684\u67e5\u8be2\uff0c\u6240\u4ee5\u67e5\u8be2\u51fd\u6570\u662f\u4e0d\u7528\u5199\u7684\uff0c\u76f4\u63a5\u627e\u6839\u7684\u7edf\u8ba1\u4fe1\u606f\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\nusing namespace std;\n#define lson id<<1\n#define rson id<<1|1\nconst long long maxn=200001;\nlong long x,w,h,n,a[maxn],b[maxn];\nchar c;\nlong long lt[maxn<<2][2];\nlong long rt[maxn<<2][2];\nlong long l[maxn<<2][2];\nlong long r[maxn<<2][2];\nlong long ma[maxn<<2][2];\nbool pure[maxn<<2][2];\nvoid pushup(long long id,long long k){\n \tpure[id][k]=pure[lson][k]&&pure[rson][k];\n \tma[id][k]=max(r[lson][k]+l[rson][k],max(ma[lson][k],ma[rson][k]));\n \tl[id][k]=pure[lson][k]?l[lson][k]+l[rson][k]:l[lson][k];\n \tr[id][k]=pure[rson][k]?r[rson][k]+r[lson][k]:r[rson][k];\n}\ninline void build(long long id,long long ll,long long rr,long long k)\n{\n\tlt[id][k]=ll;\n\trt[id][k]=rr;\n\tif (ll==rr)\n\t{\n\t\tpure[id][k]=true;\n\t\tma[id][k]=1;\n\t\tl[id][k]=1;\n\t\tr[id][k]=1;\n\t\treturn;\n\t}\n\tlong long mid=(ll+rr)>>1;\n\tbuild(lson,ll,mid,k);\n\tbuild(rson,mid+1,rr,k);\n\tpushup(id,k);\n}\ninline void update(long long id,long long x,long long k)\n{\n\tif (lt[id][k]==x && rt[id][k]==x)\n\t{\n\t\tpure[id][k]=false;\n\t\tma[id][k]=0;\n\t\tl[id][k]=0;\n\t\tr[id][k]=0;\n\t\treturn;\n\t}\n\tlong long mid=(lt[id][k]+rt[id][k])>>1;\n\tif (x<=mid) update(lson,x,k);\n\t  else update(rson,x,k);\n\tpushup(id,k);\n}\nint main()\n{\n\tscanf(\"%lld%lld%lld\",&w,&h,&n);\n\tbuild(1,1,w-1,1);\n\tbuild(1,1,h-1,0);\n\tfor (long long i=1;i<=n;i++)\n\t{\t\n\t\tc=getchar();\n\t\twhile (c!='H' && c!='V') c=getchar();\n\t\tif (c=='V') \n\t\t{\n\t\t\tscanf(\"%lld\",&x);\n\t\t\tupdate(1,x,1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tscanf(\"%lld\",&x);\n\t\t\tupdate(1,x,0);\n\t\t}\n\t\tprintf(\"%lld\\n\",(ma[1][1]+1)*(ma[1][0]+1));\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1521371494,
        "uid": 8352,
        "name": "\u5982\u6211\u897f\u6c89",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "\u6572+\u8c03\u8bd5\u4e86\u4e00\u4e2a\u5c0f\u65f6...\u7801\u529b\u8fd8\u662f\u4e0d\u884c\u554a..\n\n\u9996\u5148\u505a\u6cd5\u662f\u5f88\u660e\u786e\u7684\uff0c\u5206\u522b\u5728$x$\u8f74\u548c$y$\u8f74\u4e0a\u7ef4\u62a4\u4e00\u9897\u7ebf\u6bb5\u6811\uff0c\u7ebf\u6bb5\u6811\u4e2d$1$\u4ee3\u8868\u5207\u65ad\uff0c\u4e8e\u662f\u95ee\u9898\u8f6c\u5316\u6210\u4e86\u6700\u957f\u7684\u4e00\u4e32$0$.\n\n\u5bf9\u4e8e\u7ebf\u6bb5\u6811\u4e2d\u7684\u7ed3\u70b9\uff0c\u6211\u4eec\u7ef4\u62a4\u4e0b\u9762\u51e0\u4e2a\u4fe1\u606f\uff1a\n\n- \u5de6\u8fb9\u6700\u957f\u7684\u8fde\u7eed\u96f6\u5e8f\u5217\n- \u53f3\u8fb9\u6700\u957f\u7684\u8fde\u7eed\u96f6\u5e8f\u5217\n- \u4e2d\u95f4\u6700\u957f\u7684\u8fde\u7eed\u96f6\u5e8f\u5217\n\n\u7136\u540e\u6211\u4eec\u7684\u96be\u70b9\u5728\u4e8e\u8bbe\u8ba1`pushup`\n\n\u6211\u4eec\u6bcf\u6b21`pushup`\u7684\u65f6\u5019\uff0c\u5148\u7ee7\u627f\u5de6\u513f\u5b50\u7684\u5de6\u6700\u957f\uff0c\u7136\u540e\u518d\u770b\u5de6\u513f\u5b50\u7684\u5de6\u6700\u957f\u662f\u5426\u662f\u6574\u4e2a\u5e8f\u5217\uff0c\u82e5\u662f\u7684\u8bdd\u518d\u52a0\u4e0a\u53f3\u513f\u5b50\u7684\u5de6\u6700\u957f\u3002\n\n\u53f3\u6700\u957f\u548c\u4e2d\u95f4\u6700\u957f\u540c\u7406\u3002\n\n\u4e8e\u662f\u8fd9\u9053\u9898\u5c31\u53d8\u6210\u4e86\u7801\u519c\u9898\uff0c\n\n~~\u6211\u624d\u4e0d\u4f1a\u544a\u8bc9\u4f60\u4eec\u6211\u56e0\u4e3a\u5fd8\u4e86\u5f00`long long`\u8c03\u4e86\u5341\u591a\u5206\u949f~~\n\n(\u4e8e\u662f\u5c31\u66b4\u8e81\u7684`#define int long long`)\n\n$Code:$\n\n```cpp\n#include <bits/stdc++.h>\n#define ls(x) x << 1\n#define rs(x) x << 1 | 1 \n#define int long long\n\nusing namespace std;\n\nconst int N = 200000 + 5;\nint w , h , m;\n\nstruct Seg {\n\tint l , r , len;\n\tint lft , rgt , mid;\n\tint ld , rd;\n}t[2][N << 2];\n\nvoid pushup_0(int x) {\n\tt[0][x].ld = t[0][ls(x)].ld; t[0][x].rd = t[0][rs(x)].rd;\n\tt[0][x].lft = t[0][ls(x)].lft;\n\tif(t[0][ls(x)].lft == t[0][ls(x)].len && t[0][ls(x)].rd == t[0][rs(x)].ld)\n\t\tt[0][x].lft += t[0][rs(x)].lft;\n\tt[0][x].rgt = t[0][rs(x)].rgt;\n\tif(t[0][rs(x)].rgt == t[0][rs(x)].len && t[0][rs(x)].ld == t[0][ls(x)].rd)\n\t\tt[0][x].rgt += t[0][ls(x)].rgt;\n\tt[0][x].mid = max(t[0][ls(x)].mid , t[0][rs(x)].mid);\n\tif(t[0][ls(x)].rd == t[0][rs(x)].ld && t[0][ls(x)].rd == 0) \n\t\tt[0][x].mid = max(t[0][x].mid , t[0][ls(x)].rgt + t[0][rs(x)].lft);\n}\nvoid pushup_1(int x) {\n\tt[1][x].ld = t[1][ls(x)].ld; t[1][x].rd = t[1][rs(x)].rd;\n\tt[1][x].lft = t[1][ls(x)].lft;\n\tif(t[1][ls(x)].lft == t[1][ls(x)].len && t[1][ls(x)].rd == t[1][rs(x)].ld)\n\tt[1][x].lft += t[1][rs(x)].lft;\n\tt[1][x].rgt = t[1][rs(x)].rgt;\n\tif(t[1][rs(x)].rgt == t[1][rs(x)].len && t[1][rs(x)].ld == t[1][ls(x)].rd)\n\tt[1][x].rgt += t[1][ls(x)].rgt;\n\tt[1][x].mid = max(t[1][ls(x)].mid , t[1][rs(x)].mid);\n\tif(t[1][ls(x)].rd == t[1][rs(x)].ld && t[1][ls(x)].rd == 0) \n\tt[1][x].mid = max(t[1][x].mid , t[1][ls(x)].rgt + t[1][rs(x)].lft);\n}\nvoid built_0 (int x ,int l , int r){\n\tt[0][x].l = l , t[0][x].r = r;\n\tt[0][x].len = r - l + 1;\n\tif(l == r) {\n\t\tt[0][x].ld = t[0][x].rd = 0;\n\t\tt[0][x].lft = t[0][x].rgt = t[0][x].mid = 1;\n\t\treturn;\n\t}\n\tint mid = l + r >> 1;\n\tbuilt_0(ls(x) , l , mid);\n\tbuilt_0(rs(x) , mid + 1 , r);\n\tpushup_0(x);\n}\n\nvoid built_1 (int x ,int l , int r){\n\tt[1][x].l = l , t[1][x].r = r;\n\tt[1][x].len = r - l + 1;\n\tif(l == r) {\n\t\tt[1][x].ld = t[1][x].rd = 0;\n\t\tt[1][x].lft = t[1][x].rgt = t[1][x].mid = 1;\n\t\treturn;\n\t}\n\tint mid = l + r >> 1;\n\tbuilt_1(ls(x) , l , mid);\n\tbuilt_1(rs(x) , mid + 1 , r);\n\tpushup_1(x);\n}\n\nvoid updata_0(int x , int p) {\n\tif(t[0][x].l == t[0][x].r) {\n\t\tt[0][x].ld = t[0][x].rd = 1;\n\t\tt[0][x].lft = t[0][x].rgt = t[0][x].mid = 0;\n\t\treturn;\n\t}\n\tint mid = (t[0][x].l + t[0][x].r ) >> 1;\n\tif(p <= mid) updata_0(ls(x) , p);\n\telse updata_0(rs(x) , p);\n\tpushup_0(x);\n}\n\nvoid updata_1(int x , int p) {\n\tif(t[1][x].l == t[1][x].r) {\n\t\tt[1][x].ld = t[1][x].rd = 1;\n\t\tt[1][x].lft = t[1][x].rgt = t[1][x].mid = 0;\n\t\treturn;\n\t}\n\tint mid = (t[1][x].l + t[1][x].r ) >> 1;\n\tif(p <= mid) updata_1(ls(x) , p);\n\telse updata_1(rs(x) , p);\n\tpushup_1(x);\n}\n\nint query() {\n\tint ans1 = 0 , ans2 = 0;\n\tans1 = max(t[0][1].mid , max(t[0][1].lft , t[0][1].rgt)) + 1;\n\tans2 = max(t[1][1].mid , max(t[1][1].lft , t[1][1].rgt)) + 1;\n\treturn ans1 * ans2;\n}\n\nsigned main () {\n\tios::sync_with_stdio(false);\n\tcin >> w >> h >> m;\n\tbuilt_0(1 , 1 , w - 1);\n\tbuilt_1(1 , 1 , h - 1);\n\n\twhile(m -- ) {\n\t\tchar opt; int aim;\n\t\tcin >> opt >> aim;\n\t\tif(opt == 'V') {\n\t\t\tupdata_0(1 , aim);\n\t\t\tcout << query() << endl;\n\t\t} else {\n\t\t\tupdata_1(1 , aim);\n\t\t\tcout << query() << endl;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1572598934,
        "uid": 134080,
        "name": "jins3599",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "\u65b0\u624b\u6765\u4e00\u53d1\u7ebf\u6bb5\u6811\u7684\u9898\u89e3\uff0c\u624d\u56db\u5341\u884c\u3002\u73bb\u7483\u662f\u77e9\u5f62\u7684\uff0c\u5373\u77e9\u5f62\u9762\u79ef=\u957f\u8fb9\u6700\u5927\u8fb9 * \u77ed\u8fb9\u6700\u5927\u8fb9\uff1b\u90a3\u4e48\u6211\u4eec\u53ef\u4e0d\u53ef\u4ee5\u53ea\u8003\u8651\u5b83\u7684\u4e0a\u8fb9\u548c\u5de6\u8fb9\uff1f\u5047\u8bbe\u4e0a\u8fb9\u957f\u4e8e\u5de6\u8fb9\uff08\u53cd\u4e4b\u540c\u7406\uff09\u3002\u90a3\u4e48\u628a\u77e9\u5f62\u4ece\u4e0a\u5230\u4e0b\u62cd\u5e73\u4e86\uff0c\u8ba9\u77e9\u5f62\u9762\u79ef\u6700\u5927\u7684\u6700\u957f\u8fb9\u662f\u4e0d\u662f\u5c31\u662f\u4e0a\u8fb9\u7684\u6700\u957f\u8fb9\uff1f\u4ece\u53f3\u5f80\u5de6\u62cd\u6241\u4e86\uff0c\u77e9\u5f62\u9762\u79ef\u6700\u5927\u7684\u6700\u77ed\u8fb9\u4e0d\u5c31\u662f\u5de6\u8fb9\u7684\u6700\u957f\u8fb9\u5417\uff1f\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u8981\u7528\u4e24\u68f5\u7ebf\u6bb5\u6811\u7ef4\u62a4\u5de6\u8fb9\u4e0e\u4e0a\u8fb9\u7684\u6700\u5927\u503c\u5373\u53ef\u3002\n```c\n#include<bits/stdc++.h>//\u6a2a\u662f0\uff0c\u7eb5\u662f1\uff1b \n#define lk (fat<<1)\n#define rk (fat<<1|1)\n#define ll long long\nusing namespace std;\nconst ll N=200005;\nll L[N<<2][2],R[N<<2][2],E[N<<2][2],M[2],w,h,n;\nbool P[N<<2][2];\nvoid push(ll l,ll r,ll fat,ll k)\n{\n    P[fat][k]=P[lk][k]&&P[rk][k];\n    E[fat][k]=max(R[lk][k]+L[rk][k],max(E[lk][k],E[rk][k]));\n    L[fat][k]=P[lk][k]==1?L[lk][k]+L[rk][k]:L[lk][k];\n    R[fat][k]=P[rk][k]==1?R[rk][k]+R[lk][k]:R[rk][k];\n}\nvoid build(ll l,ll r,ll fat,ll k)\n{\n    if(l==r){L[fat][k]=R[fat][k]=E[fat][k]=1;P[fat][k]=true; return;}\n    ll m=(l+r)>>1;\n    build(l,m,lk,k); build(m+1,r,rk,k);\n    push(l,r,fat,k);\n}\nvoid update(ll l,ll r,ll fat,ll k,ll num)\n{\n    if(l==r){\tL[fat][k]=R[fat][k]=E[fat][k]=0;P[fat][k]=false;return ;}\n    ll m=(l+r)>>1;\n    if(num<=m)update(l,m,lk,k,num); else update(m+1,r,rk,k,num);\n    push(l,r,fat,k);\n    //cout<<num<<\" \"<<E[fat][k]<<\"  L:\"<<l<<\" R:\"<<r<<endl;\n}\nint main()\n{\n    cin>>w>>h>>n;\n    build(1,w-1,1,0);build(1,h-1,1,1);\n    for(ll i=1;i<=n;i++)\n    {\n        char sg;ll num;\n        cin>>sg>>num;\n        if(sg=='H')update(1,h-1,1,1,num);//\u6a2a\u5207\u5f71\u54cd\u7eb5\u884c;\n        if(sg=='V')update(1,w-1,1,0,num);//\u7eb5\u5207\u5f71\u54cd\u6a2a\u884c;\n        cout<<(E[1][0]+1)*(E[1][1]+1)<<endl;//<<\"  w:\"<<E[1][0]+1<<\"  h:\"<<E[1][1]+1\n    }\n    return 0;\n}\n```",
        "postTime": 1521372978,
        "uid": 38539,
        "name": "lvjiyuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    },
    {
        "content": "\u5f31\u9e21\u6765\u5199\u4e00\u6ce2\u9898\u89e3\n\n\u5927\u591a\u6570julao\u7528\u7684\u90fd\u662fSTL \u7136\u800c\u6211\u4e3a\u4e86\u7ec3\u4e60\u6211\u7684\u7ebf\u6bb5\u6811\u91c7\u7528\u4e86\u7ebf\u6bb5\u6811\u7684\u7684\u5199\u6cd5\n\n\u8003\u8651\u4e00\u4e0b\u6211\u4eec\u6bcf\u6b21\u6a2a\u5411\u6216\u8005\u662f\u7ad6\u5411\u5207 \u5bf9\u4e8e\u53e6\u4e00\u4e2a\u65b9\u5411\u662f\u6ca1\u6709\u5f71\u54cd\u7684\n\n\uff08\u81ea\u5df1\u753b\u56fe\u6a21\u62df\u4e0b\u5373\u53ef\uff09\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\u884c\u548c\u5217\u5206\u522b\u7ef4\u62a4\n\n\u6211\u4eec\u5bf9\u884c\u548c\u5217\u5206\u522b\u7ef4\u62a4\u4e00\u4e2a01\u5e8f\u5217 \u7136\u540e\u6211\u4eec\u627e\u5230\u4ee51\u4e3a\u6839\u8282\u70b9\u7684\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\n\n\u6700\u540e\u8981\u52a01\u56e0\u4e3a\u6211\u4eec\u7684\u7ebf\u6bb5\u6811\u7ef4\u62a4\u7684\u662f\u8ddd\u79bb\n\n\u8fd8\u6709\u5c31\u662f\u8981\u6ce8\u610f\u7684\u662f\u6211\u4eec\u6a2a\u7740\u5207\u5176\u5b9e\u662f\u5bf9\u7ad6\u7740\u7684\u4ea7\u751f\u5f71\u54cd\n\n\u7ad6\u7740\u5207\u4f1a\u5bf9\u6a2a\u7740\u4ea7\u751f\u5f71\u54cd\n\n\u7ef4\u62a4\u7684\u65f6\u5019\u4e0d\u8981\u7ef4\u62a4\u53cd\u4e86\n\n\u5173\u4e8epushdown?\n\n\u56e0\u4e3a\u6211\u4eec\u8981\u7ef4\u62a4\u7684\u662f\u4e00\u4e2a\u8fde\u7eed01\u5e8f\u5217\u4e2d\u8fde\u7eed0 \u8003\u8651\u4e0b\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1f\n\n1.\u5728\u5de6\u8fb9\n2.\u5728\u53f3\u8fb9\n3.\u5de6\u53f3\u53ef\u4ee5\u8fde\u63a5\u4e0a\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u8981\u5728\u7ed3\u6784\u4f53\u7ef4\u62a4\u4e00\u4e2a\u4ece\u5de6\u8fb9\u5f00\u59cb\u7684\u6700\u5927 \u548c\u4ece\u53f3\u8fb9\u5f00\u59cb\u7684\u6700\u5927\n\n\u540c\u65f6\u4e5f\u8981\u6ce8\u610f\u5224\u65ad\u6574\u90e8\u5206\u533a\u95f4\u662f\u5426\u6ee1\u8db3 \u7136\u540e\u62fc\u63a5\n\n\u8fd8\u662f\u770b\u4ee3\u7801\u6bd4\u8f83\u597d\u7406\u89e3\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=1e6+10;\nint n,m,q;\ninline int read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-'){\n\t\t\tf=-1;\n\t\t}\n\t\tch=getchar();\n\t}   \n\twhile(ch>='0'&&ch<='9'){\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*f;\n} \nstruct node{\n\tint lsum,rsum,sum,l,r;\n}tree1[N<<1],tree2[N<<1];\ninline int ls(int x){return x<<1;}\ninline int rs(int x){return x<<1|1;}\ninline void upd1(int p){\n\tint mid=(tree1[p].l+tree1[p].r)>>1;\n\ttree1[p].sum=max(tree1[ls(p)].sum,tree1[rs(p)].sum);\n\ttree1[p].sum=max(tree1[p].sum,tree1[ls(p)].rsum+tree1[rs(p)].lsum);\n\ttree1[p].lsum=tree1[ls(p)].lsum;\n\tif(tree1[ls(p)].lsum==mid-tree1[p].l+1){\n\t   tree1[p].lsum+=tree1[rs(p)].lsum;\t//\u5982\u679c\u5de6\u513f\u5b50\u533a\u95f4\u5168\u90fd\u662f \u90a3\u4e48\u53ef\u4ee5\u548c\u53f3\u533a\u95f4\u8fde\u63a5\u4e0a\t\t\t\t\t\t\t  \n\t}\n\ttree1[p].rsum=tree1[rs(p)].rsum;\n\tif(tree1[rs(p)].rsum==tree1[p].r-mid){\n\t   tree1[p].rsum+=tree1[ls(p)].rsum;\t//\u5982\u679c\u53f3\u513f\u5b50\u533a\u95f4\u5168\u90fd\u662f \u90a3\u4e48\u53ef\u4ee5\u548c\u5de6\u533a\u95f4\u8fde\u63a5\u4e0a\t\t\t\t\t\t\t  \n\t}\n}\ninline void upd2(int p){\n    int mid=(tree2[p].l+tree2[p].r)>>1;\n\ttree2[p].sum=max(tree2[ls(p)].sum,tree2[rs(p)].sum);\n\ttree2[p].sum=max(tree2[p].sum,tree2[ls(p)].rsum+tree2[rs(p)].lsum);\n\ttree2[p].lsum=tree2[ls(p)].lsum;\n\tif(tree2[ls(p)].lsum==mid-tree2[p].l+1){\n\t   tree2[p].lsum+=tree2[rs(p)].lsum;\t//\u5982\u679c\u5de6\u513f\u5b50\u533a\u95f4\u5168\u90fd\u662f \u90a3\u4e48\u53ef\u4ee5\u548c\u53f3\u533a\u95f4\u8fde\u63a5\u4e0a\t\t\t\t\t\t\t  \n\t}\n\ttree2[p].rsum=tree2[rs(p)].rsum;\n\tif(tree2[rs(p)].rsum==tree2[p].r-mid){\n\t   tree2[p].rsum+=tree2[ls(p)].rsum;\t//\u5982\u679c\u53f3\u513f\u5b50\u533a\u95f4\u5168\u90fd\u662f \u90a3\u4e48\u53ef\u4ee5\u548c\u5de6\u533a\u95f4\u8fde\u63a5\u4e0a\t\t\t\t\t\t\t  \n\t}   \n}\ninline void build1(int l,int r,int p){\n\ttree1[p].lsum=tree1[p].sum=tree1[p].rsum=r-l+1;\n\ttree1[p].l=l,tree1[p].r=r;\n\tif(l==r){\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild1(l,mid,ls(p));\n\tbuild1(mid+1,r,rs(p));\n\tupd1(p);\n}\ninline void build2(int l,int r,int p){\n    tree2[p].lsum=tree2[p].sum=tree2[p].rsum=r-l+1;\n   \ttree2[p].l=l,tree2[p].r=r;\n\tif(l==r){\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild2(l,mid,ls(p));\n\tbuild2(mid+1,r,rs(p));\n\tupd2(p);\n}\ninline void change1(int l,int r,int p,int x){\n\tif(l==r){\n\t\ttree1[p].lsum=tree1[p].rsum=tree1[p].sum=0;\n\t\treturn ;\n\t}\n\tint mid=(l+r)>>1;\n\tif(x<=mid){\n\t\tchange1(l,mid,ls(p),x);\n\t}\n\telse change1(mid+1,r,rs(p),x);\n\tupd1(p);\n} \ninline void change2(int l,int r,int p,int x){\n    if(l==r){\n        tree2[p].lsum=tree2[p].rsum=tree2[p].sum=0;\n\t\treturn ;\n\t}\n\tint mid=(l+r)>>1;\n\tif(x<=mid){\n\t\tchange2(l,mid,ls(p),x);\n\t}\n\telse change2(mid+1,r,rs(p),x);\n\tupd2(p);\n}\nsigned  main(){\n\tn=read(),m=read(),q=read();\n\tbuild1(1,n-1,1);\n\tbuild2(1,m-1,1);\n\twhile(q--){\n\t\tchar ch[3];\n\t\tint k;\n\t\tscanf(\"%s\",ch);\n\t\tk=read();\n\t\tif(ch[0]=='H'){\n\t\t\tchange2(1,m-1,1,k);\n\t\t}\n\t\telse change1(1,n-1,1,k);\n\t\tprintf(\"%lld\\n\",(tree1[1].sum+1)*(tree2[1].sum+1)); \n\t}\n\treturn 0;\n}\n```\n\n\n\u867d\u7136\u4ee3\u7801\u7279\u522b\u957f100+\u884c\uff0c\u4f46\u662f\u5176\u5b9e\u5c31\u662f\u590d\u5236\u4e00\u4efd \u5b9e\u9645\u4e5f\u5c31\u662f\u51e0\u5341\u884c\u7684\u4ee3\u7801\u91cf\n\n",
        "postTime": 1564580523,
        "uid": 142373,
        "name": "Kendrick_Z",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF527C \u3010Glass Carving\u3011"
    }
]
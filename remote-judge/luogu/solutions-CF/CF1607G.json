[
    {
        "content": "\u672c\u9898\u8fd8\u662f\u6709\u70b9\u9605\u8bfb\u7406\u89e3\u7684\u3002\n\n\u9898\u610f\u5c31\u662f\u8ba9\u4f60\u6c42\u4e00\u7ec4 $n$ \u4e2a $x_i$\uff0c\u4f7f\u5f97\uff1a\n\n$$\n\\left|\\sum_{i = 1}^n(a_i - x_i) - \\sum_{i = 1}^n(b_i - (m - x_i))\\right|\n$$\n\n\u8fd9\u4e2a\u4e1c\u897f\u6700\u5c0f\u3002\n\n\u5148\u5316\u7b80\u4e00\u4e0b\u5f0f\u5b50\uff1a\n\n$$\n\\left|\\sum_{i = 1}^n(a_i - b_i + m) - 2\\sum_{i = 1}^n x_i\\right|\n$$\n\n\u5176\u4e2d\u6bcf\u4e00\u4e2a $x_i$ \u90fd\u6709\u4e00\u4e2a\u8303\u56f4\u9650\u5236\uff1a\n\n$$\n\\max(m - b_i, 0) \\leq x_i \\leq \\min(a_i, m)\n$$\n\n\u5de6\u8fb9\u662f\u4e00\u4e2a\u56fa\u5b9a\u503c\uff0c\u6211\u4eec\u628a\u5b83\u8bb0\u4e3a $S$\uff1b\u53f3\u8fb9\u662f\u4e00\u4e2a\u4e00\u5806\u8303\u56f4\u6c42\u548c\u3002\u662f\u4e0d\u662f\u611f\u89c9\u597d\u505a\u4e00\u4e9b\u4e86\uff1f\n\n\u6ce8\u610f\u5230\u4e00\u4e2a\u6027\u8d28\uff1a\u5047\u5982\u6211\u4eec\u628a\u6240\u6709 $x_i$ \u53d6\u5230\u6700\u5c0f\u503c\u7684\u548c\u8bb0\u4e3a $L$\uff0c\u53d6\u5230\u6700\u5927\u503c\u7684\u548c\u8bb0\u4e3a $R$\uff0c\u90a3\u4e48 $L \\leq \\sum x_i \\leq R$\uff0c\u800c\u4e14 $\\sum x_i$ \u53ef\u4ee5\u53d6\u904d\u6240\u6709\u7684 $[L, R]$\u3002\u8fd9\u662f\u521d\u4e2d\u7684\u4e0d\u7b49\u5f0f\u77e5\u8bc6\uff0c\u5f88\u597d\u7406\u89e3\u3002\n\n\u8fd9\u4e2a\u6027\u8d28\u5c06\u9898\u76ee\u8f6c\u5316\u4e3a\u4e86\uff1a\u6211\u4eec\u8981\u5728 $[L, R]$ \u4e2d\u627e\u5230\u6700\u63a5\u8fd1 $\\lfloor \\frac{S}{2} \\rfloor$ \u7684\u6570\u3002\n\n\u6b64\u65f6\u8fd9\u5c31\u662f\u4e00\u9053\u5927\u6c34\u9898\u4e86\uff1a\u5bf9 $S, 2L, 2R$ \u5206\u7c7b\u8ba8\u8bba\uff0c\n\n- $S \\leq 2L$ \u65f6\u76f4\u63a5\u5c06\u6240\u6709\u503c\u53d6\u5230\u6700\u5c0f\uff1b\n- $2R \\leq S$ \u65f6\u76f4\u63a5\u5c06\u6240\u6709\u503c\u53d6\u5230\u6700\u5927\uff1b\n- $S \\in [2L, 2R]$ \u65f6\uff0c\u5982\u679c $S$ \u662f\u5076\u6570\u90a3\u4e48\u7b54\u6848\u662f $0$\uff0c\u5426\u5219\u662f $1$\uff08\u56e0\u4e3a\u4e00\u4e2a\u5947\u6570\u51cf\u4e00\u4e2a\u5076\u6570\u4e0d\u53ef\u80fd\u662f\u4e00\u4e2a\u5076\u6570\uff09\uff0c\u6b64\u65f6\u65b9\u6848\u53ef\u4ee5\u76f4\u63a5\u8d2a\u5fc3\u7684\u53bb\u53d6\uff0c\u5148\u5c06\u6240\u6709\u7684 $x$ \u4fdd\u5e95\u53d6\u5230\u6700\u5c0f\u503c\uff0c\u7136\u540e\u5c06 $\\lfloor \\frac{S}{2} \\rfloor - L$ \u8d2a\u5fc3\u5730\u8fdb\u884c\u5206\u914d\uff0c\u5982\u679c\u5f53\u524d\u80fd\u53d6\u6700\u5927\u503c\u5c31\u5c3d\u91cf\u53d6\u6700\u5927\u503c\u3002\n\n```cpp\nconst int MAXN = 2e5 + 10;\n\nint n, m;\nstd::pair<lli, lli> dishes[MAXN];\nstd::pair<lli, lli> bounds[MAXN];\nlli chosenx[MAXN];\n\nvoid _main() {\n    n = read(); m = read();\n    lli s = 0;\n    lli suml = 0, sumr = 0;\n    rep (i, 1, n) {\n        lli a = read(); lli b = read();\n        dishes[i] = {a, b};\n        s += (a - b + m);\n        bounds[i].fi = std::max(m - b, 0ll);\n        bounds[i].se = std::min((lli) m, a);\n        suml += bounds[i].fi; sumr += bounds[i].se;\n    }\n    if (2ll * sumr <= s) {\n        printf(\"%lld\\n\", s - 2ll * sumr);\n        rep (i, 1, n) {\n            lli x = bounds[i].se, y = m - x;\n            printf(\"%lld %lld\\n\", x, y);\n        }\n    }\n    else if (s <= 2ll * suml) {\n        printf(\"%lld\\n\", 2ll * suml - s);\n        rep (i, 1, n) {\n            lli x = bounds[i].fi, y = m - x;\n            printf(\"%lld %lld\\n\", x, y);\n        }\n    }\n    else {\n        printf(\"%lld\\n\", (s % 2));\n        lli ns = (s >> 1) - suml;\n        rep (i, 1, n) {\n            chosenx[i] = bounds[i].fi;\n            lli dtx = bounds[i].se - bounds[i].fi;\n            if (ns >= dtx) {\n                ns -= dtx; chosenx[i] += dtx;\n            } else {\n                chosenx[i] += ns; ns = 0;\n            }\n        }\n        lli checksum = 0;\n        rep (i, 1, n) {\n            printf(\"%lld %lld\\n\", chosenx[i], m - chosenx[i]);\n            checksum += chosenx[i];\n        }\n        assert(std::abs(checksum * 2 - s) <= 1);\n    }\n}\n\nint main() {\n    // freopen(\"gout.out\", \"w\", stdout);\n    std::ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n    int T = read();\n    while (T --> 0) {\n        _main();\n    }\n    return 0;\n}\n```",
        "postTime": 1635947703,
        "uid": 56626,
        "name": "HDWR",
        "ccfLevel": 6,
        "title": "CF1607G Banquet Preparations 1 \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1607G)\n\n\u7ffb\u8bd1\uff1a\n\n\u73b0\u5728\u6709 $ n $ \u9053\u83dc\uff0c\u6bcf\u9053\u83dc\u7531 $ a_i $ \u514b\u9c7c\u8089\u4e0e $ b_i $ \u514b\u732a\u8089\u7ec4\u6210\u3002\u73b0\u6709\u4e00\u4e2a\u8bc4\u59d4\u8981\u5c06\u6bcf\u9053\u83dc\u5403\u6389 $ m $ \u514b\uff0c\u5176\u4e2d\u5403\u6389\u9c7c\u8089\u4e0e\u732a\u8089\u7684\u6570\u91cf\u90fd\u8981\u662f\u6574\u6570\u3002\u95ee\u5269\u4f59\u7684\u83dc\u4e2d\u9c7c\u8089\u91cd\u91cf\u4e4b\u548c\u4e0e\u732a\u8089\u91cd\u91cf**\u4e4b\u5dee\u6700\u5c0f**\u662f\u591a\u5c11\uff0c\u5e76\u8f93\u51fa\u4e00\u79cd\u65b9\u6848\u3002\u591a\u7ec4\u8be2\u95ee\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u5148\u8bbe\u51e0\u4e2a\u53d8\u91cf\u3002\n\n\u8bbe $ suma=\\sum\\limits_{i=1}^na_i $\uff0c$ sumb=\\sum\\limits_{i=1}^nb_i $\u3002\u4e5f\u5c31\u662f $ suma $ \u8868\u793a\u9c7c\u8089\u603b\u91cd\uff0c$ sumb $ \u8868\u793a\u732a\u8089\u603b\u91cd\u3002\n\n\u8bbe $ maxa=\\sum\\limits_{i=1}^n\\max(a_i,m) $\uff0c$ sumb=\\sum\\limits_{i=1}^n\\max(b_i,m) $\u3002\u4e5f\u5c31\u662f $ maxa $ \u8868\u793a\u6700\u591a\u80fd\u5403\u7684\u9c7c\u8089\u6570\u91cf\uff0c$ maxb $ \u8868\u793a\u6700\u591a\u80fd\u5403\u7684\u732a\u8089\u6570\u91cf\u3002\n\n\u4e0a\u8ff0\u56db\u4e2a\u53d8\u91cf\u90fd\u53ef\u4ee5\u5728 $ O(n) $ \u65f6\u95f4\u5185\u6c42\u51fa\u3002\n\n\u4e0d\u59a8\u8bbe $ suma\\ge sumb $\uff0c$ suma<sumb $ \u65f6\u662f\u4e00\u6837\u7684\u3002\u4e0b\u9762\u6211\u4eec\u6765\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1.  $ suma-maxa\\ge sumb $ \u4e5f\u5c31\u662f\u8bf4\u65e0\u8bba\u5403\u591a\u5c11\u9c7c\u8089\uff0c\u9c7c\u8089\u603b\u6570\u90fd\u6bd4\u732a\u8089\u603b\u6570\u591a\uff0c\u6b64\u65f6\u80fd\u5403\u9c7c\u8089\u5c31\u5403\u9c7c\u8089\uff0c\u5269\u4e0b\u7684\u5c31\u5403\u732a\u8089\u3002\n\n2.  $ suma-maxa<sumb $\uff0c\u6b64\u65f6\u6211\u4eec\u5f88\u5bb9\u6613\u77e5\u9053\u5f53 $ suma+sumb-n\\times m $ \u4e3a\u5947\u6570\u65f6\u7b54\u6848\u4e3a $ 1 $\uff0c$ suma+sumb-n\\times m $ \u4e3a\u5076\u6570\u65f6\u7b54\u6848\u4e3a $ 0 $\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u8fdb\u884c\u6784\u9020\u3002\n\n\u73b0\u5728\u5047\u8bbe\u7b54\u6848\u4e3a $ 0 $\uff0c\u7b54\u6848\u4e3a $ 1 $ \u65f6\u540c\u7406\u3002\n\n\u8bbe\u8bc4\u59d4\u4f1a\u5403 $ x $ \u514b\u9c7c\u8089\uff0c\u5219\u4f1a\u5403 $ (n\\times m-x) $ \u514b\u732a\u8089\uff0c\u4e14\u6700\u4f18\u60c5\u51b5\u4e0b\u4e00\u5b9a\u4f1a\u6ee1\u8db3 $ x<maxa $\u3002\n\n\u5bb9\u6613\u5217\u51fa\u65b9\u7a0b\uff1a\n\n$$\nsuma-x=sumb-(n\\times m-x)\n$$\n\n\u89e3\u5f97\uff1a\n\n$$\nx=\\dfrac{suma-sumb+n\\times m}{2}\n$$\n\n\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u8981\u5403\u6389 $ x=\\dfrac{suma-sumb+n\\times m}{2} $ \u514b\u9c7c\u8089\uff0c\u76f4\u63a5\u8fdb\u884c\u6784\u9020\u5373\u53ef\u3002\n\n\u6700\u540e\uff0c\u8d34\u4e0a AC \u4ee3\u7801\uff1a\n\n```\n#include<algorithm>\n#include<cstdlib>\n#include<cstdio>\n#define il inline\n#define gc getchar\nusing namespace std;\nil int min(int a,int b){ return a<b?a:b;}\nusing ll=long long;\nil int read()\n{\nint s=0,w=1;char ch;\nwhile((ch=gc())>'9'||ch<'0') if(ch=='-') w=-1;\n\twhile(ch>='0'&&ch<='9'){ s=s*10+ch-'0';ch=gc();}\n\treturn s*w;\n}\nil ll lread()\n{\n\tlong long s=0,w=1;char ch;\n\twhile((ch=gc())>'9'||ch<'0') if(ch=='-') w=-1;\n\twhile(ch>='0'&&ch<='9'){ s=s*10+ch-'0';ch=gc();}\n\treturn s*w;\n}\nint a[200001];\nint b[200001];\nll maxa,maxb;\nll suma,sumb;\nint n,m;\nll ans;\nsigned main()\n{\n\tint t=read();\n\twhile(t--)\n\t{\n\t\tmaxa=maxb=ans=suma=sumb=0;\n\t\tn=read(),m=read();\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\ta[i]=read(),b[i]=read();\n\t\t\tsuma+=a[i],sumb+=b[i];\n\t\t\tmaxa+=min(m,a[i]);\n\t\t\tmaxb+=min(m,b[i]);\n\t\t}\n\t\tif(suma>=sumb)\n\t\t{\n\t\t\tif(suma-maxa>=sumb-((ll)m*n-maxa))\n\t\t\t{\n\t\t\t\tprintf(\"%lld\\n\",suma-maxa-(sumb-((ll)m*n-maxa)));\n\t\t\t\tfor(int i=1;i<=n;i++)\n\t\t\t\t\tif(a[i]<=m) printf(\"%d %d\\n\",a[i],m-a[i]);\n\t\t\t\t\telse printf(\"%d %d\\n\",m,0);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tll flag=maxa-(suma-sumb+(ll)m*n)/2;\n\t\t\tprintf(\"%lld\\n\",(suma-sumb+(ll)m*n)%2);\n\t\t\tfor(int i=1;i<=n;i++)\n\t\t\t{\n\t\t\t\tint num=min(a[i],m),minn=m-min(m,b[i]);\n\t\t\t\tif(flag>num-minn) flag-=num-minn,num=minn;\n\t\t\t\telse num=num-flag,flag=0;\n\t\t\t\tprintf(\"%d %d\\n\",num,m-num);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(sumb-maxb>=suma-((ll)m*n-maxb))\n\t\t\t{\n\t\t\t\tprintf(\"%lld\\n\",sumb-maxb-(suma-((ll)m*n-maxb)));\n\t\t\t\tfor(int i=1;i<=n;i++)\n\t\t\t\t\tif(b[i]<=m) printf(\"%d %d\\n\",m-b[i],b[i]);\n\t\t\t\t\telse printf(\"%d %d\\n\",0,m);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tll flag=maxb-(sumb-suma+(ll)m*n)/2;\n\t\t\tprintf(\"%lld\\n\",(sumb-suma+(ll)m*n)%2);\n\t\t\tfor(int i=1;i<=n;i++)\n\t\t\t{\n\t\t\t\tint num=min(b[i],m),minn=m-min(m,a[i]);\n\t\t\t\tif(flag>num-minn) flag-=num-minn,num=minn;\n\t\t\t\telse num=num-flag,flag=0;\n\t\t\t\tprintf(\"%d %d\\n\",m-num,num);\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u611f\u8c22\u89c2\u770b\uff01",
        "postTime": 1640097339,
        "uid": 400201,
        "name": "Wuyanru",
        "ccfLevel": 7,
        "title": "CF1607G Banquet Preparations 1"
    },
    {
        "content": "### $\\operatorname{Description.}$\n\u53a8\u5e08\u4e3a\u4e00\u6b21\u5bb4\u4f1a\u51c6\u5907\u4e86 $n$ \u9053\u83dc\u54c1\uff0c\u51fa\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u6240\u6709\u83dc\u54c1\u90fd\u662f\u7531\u9c7c\u8089\u548c\u732a\u8089\u7ec4\u6210\u7684\u3002\u7b2c $i$ \u9053\u83dc\u54c1\u4e2d\u5305\u542b\u4e86 $a_i$ \u5355\u4f4d\u7684\u9c7c\u8089\u548c $b_i$ \u5355\u4f4d\u7684\u732a\u8089\u3002\n\n\u665a\u5bb4\u7684\u4e3b\u529e\u65b9\u5b9a\u4e49\u665a\u4f1a\u7f8e\u98df\u7684\u5e73\u8861\u5ea6\u4e3a $|\\sum_{i=1}^n\\ a_i\\ - \\ \\sum_{i=1}^n\\ b_i|$\uff0c\u5e76\u4e14\u5e0c\u671b\u8fd9\u4e2a\u503c\u8d8a\u5c0f\u8d8a\u597d\u3002\u4e3a\u4e86\u8fbe\u6210\u8fd9\u4e00\u70b9\uff0c\u4e3b\u529e\u65b9\u8bf7\u6765\u4e86\u4e00\u4e2a\u5403\u5ba2\u3002\u6b64\u4eba\u4f1a\u5728\u6bcf\u9053\u83dc\u4e2d\u521a\u597d\u5403\u4e0b $m$ \u5355\u4f4d\u7684\u98df\u7269\uff0c\u73b0\u5728\u8bf7\u4f60\u89c4\u5212\u4ed6\u5728\u6bcf\u9053\u83dc\u4e2d\u8be5\u5403\u591a\u5c11\u9c7c\u8089\uff0c\u591a\u5c11\u732a\u8089\uff0c\u4f7f\u5f97\u6700\u540e\u7684\u5e73\u8861\u503c\u6700\u5c0f\u3002\n\n$1\\le n \\le 2\\times 10^5,\\ 0\\le m\\le 10^6$\n\n### $\\operatorname{Solution.}$\n\n\u601d\u8def\u5e94\u8be5\u5f88\u597d\u60f3\uff0c\u5206\u60c5\u51b5\u8ba8\u8bba\uff0c\u5982\u679c\u4e24\u79cd\u8089\u5dee\u7684\u503c\u8d85\u8fc7 $m$\uff0c\u90a3\u663e\u7136\u5e94\u8be5\u90fd\u5403\u591a\u7684\u3002\u8fd9\u79cd\u4e5f\u5f88\u597d\u5b9e\u73b0\uff0c\u6bcf\u9053\u83dc\u90fd\u5c3d\u91cf\u5403\u5c11\u7684\u83dc\uff0c\u4e0d\u591f\u4e86\u518d\u5403\u53e6\u4e00\u79cd\u5373\u53ef\u3002\n\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u663e\u7136\u662f\u5148\u628a\u591a\u7684\u524a\u5e73\uff0c\u4e4b\u540e\u4e24\u79cd\u8089\u7b49\u91cf\u7684\u5f80\u4e0b\u5403\uff0c\u8fd9\u6837\u5373\u53ef\u4fdd\u8bc1\u7b54\u6848\u7684\u6b63\u786e\u6027\u3002\n\n### $\\operatorname{Code.}$\n\n```cpp\n#include \"bits/stdc++.h\"\n#define int long long\n\nusing namespace std;\n\nconst int N = 200010;\n\nint read () {\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9') {\n        if (c == '-') f = -1;\n        c = getchar();\n    }\n    while (c >= '0' && c <= '9') {\n        x = (x << 1) + (x << 3) + (c ^ 48);\n        c = getchar();\n    }\n    return x * f;\n}\n\nstruct Dishes {\n    int a, b;\n};\n\nDishes my_Dishes[N];\nDishes ans[N];\n\nint n, m;\nsigned main() {\n    int T = read();\n    while (T--) {\n        n = read();\n        m = read();\n        for (int i = 0; i < n; i++) {\n            my_Dishes[i].a = read();\n            my_Dishes[i].b = read();\n        }\n        int sum = 0;\n        for (int i = 0; i < n; i++) {\n            ans[i].a = min(my_Dishes[i].a, m);\n            ans[i].b = m - ans[i].a;\n            sum += (my_Dishes[i].a - ans[i].a - my_Dishes[i].b + ans[i].b);\n        }\n        if (sum >= 0) {\n            printf(\"%lld\\n\", sum);\n            for (int i = 0; i < n; i++) {\n                printf(\"%lld %lld\\n\", ans[i].a, ans[i].b);\n            }\n        }\n        else {\n            sum = -sum;\n            for (int i = 0; i < n; i++) {\n                int give_max = min(ans[i].a, my_Dishes[i].b - ans[i].b);\n                if ((give_max << 1) <= sum) {\n                    sum -= (give_max << 1);\n                    ans[i].a -= give_max;\n                    ans[i].b += give_max;\n                }\n                else {\n                    int give = (sum >> 1);\n                    sum -= (give << 1);\n                    ans[i].a -= give;\n                    ans[i].b += give;\n                }\n            }\n            printf(\"%lld\\n\", sum);\n            for (int i = 0; i < n; i++) {\n                printf(\"%lld %lld\\n\", ans[i].a, ans[i].b);\n            }\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1637138772,
        "uid": 156297,
        "name": "\u77ed\u77ed_",
        "ccfLevel": 6,
        "title": "CF1607G\u9898\u89e3"
    }
]
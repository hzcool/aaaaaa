[
    {
        "content": "## \u9898\u89e3 CF1187G \u3010Gang Up\u3011\n\n### \u3010[\u9898\u610f](https://www.luogu.com.cn/problem/CF1187G)\u3011\n\n[CF\u9898\u9762](https://codeforces.com/contest/1187/problem/G)\n\n\u7ed9\u5b9a\u4e00\u5f20\u56fe\uff0c\u6709 $k$ \u4e2a\u4eba\uff0c\u6bcf\u4e2a\u4eba\u8981\u8d70\u5230 $1$ \u53f7\u70b9\uff0c\u9014\u4e2d\u8981\u82b1\u8d39\u4ee3\u4ef7\uff0c\u95ee\u6700\u5c0f\u82b1\u8d39\u3002\n\n### \u3010\u5206\u6790\u3011\n\n\u56e0\u4e3a\u9898\u4e2d\u82b1\u8d39\u4e0e\u65f6\u95f4\u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6309\u65f6\u95f4\u5206\u5c42\uff0c\u6bcf\u4e00\u5c42\u4ee3\u8868\u4e86\u6bcf\u4e00\u5206\u949f\u7684\u8282\u70b9\u3002\u53c8\u56e0\u4e3a $n$ \u53ea\u6709$50$\uff0c\u6240\u4ee5\u6bcf\u4e00\u4e2a\u4eba\u6700\u591a\u9700\u8981\u82b1$50$\u5206\u949f\u5230 $1$ \u53f7\u70b9\uff0c\u4e3a\u4e86\u907f\u514d\u591a\u4e2a\u4eba\u8d70\u540c\u4e00\u6761\u9053\u8def\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u8ba9\u4ed6\u4eec\u628a\u65f6\u95f4\u9519\u5f00\uff0c\u6240\u4ee5\u5206 $100$ \u5c42\u5373\u53ef\u3002\u5efa\u7acb\u865a\u62df\u6e90\u70b9\u8fde\u5411$0$\u5206\u949f\u65f6\uff08\u7b2c\u4e00\u5c42\uff09\u4eba\u521d\u59cb\u70b9\uff0c\u6c47\u70b9\u5c31\u662f\u7b2c$100$\u5c42\u7684 $1$ \u53f7\u70b9\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u82b1\u8d39\u3002\u6bcf\u4e00\u4e2a\u4eba\u5728\u6bcf\u5206\u949f\u6709\u4e24\u79cd\u9009\u62e9\uff1a\u5446\u5728\u5f53\u524d\u70b9\u4e0d\u52a8\uff0c\u6216\u8005\u8d70\u5230\u4e0b\u4e00\u4e2a\u70b9\u3002\u7b2c\u4e00\u79cd\u60c5\u51b5\u53ea\u8981\u4ece\u8fd9\u4e00\u5c42\u7684\u70b9\u8fde\u5411\u4e0b\u4e00\u5c42\u7684\u5bf9\u5e94\u70b9\u5373\u53ef\uff0c\u5bb9\u91cf\u4e3a $\\inf$ \u82b1\u8d39\u4e3a $c$\uff0c\u6ce8\u610f\u7279\u5224 $1$ \u53f7\u70b9\u82b1\u8d39\u4e3a $0$\u3002\u7b2c\u4e8c\u79cd\u60c5\u51b5\u9700\u8981\u62c6\u8fb9\uff0c\u8bbe\u4e00\u4e2a\u4eba\u662f\u7b2c $k$ \u4e2a\u5728\u540c\u4e00\u65f6\u95f4\uff08\u5c42\uff09\u8d70\u4e0a\u8fd9\u6761\u8fb9\u7684\uff0c\u603b\u82b1\u8d39\u662f $d\\times k^2+k\\times c$\uff0c\u76f8\u8f83\u4e8e\u524d\u4e00\u4e2a\u4eba\uff0c\u589e\u52a0\u4e86$d\\times k^2-d\\times (k-1)^2+c$\uff0c\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u539f\u56fe\u7684\u6bcf\u6761\u8def\u5f84\uff0c\u4ece\u8fd9\u4e00\u5c42\u7684\u8def\u5f84\u7aef\u70b9\u8fde\u82e5\u5e72\u6761\u8fb9\u5411\u4e0b\u4e00\u5c42\u7684\u8def\u5f84\u7684\u53e6\u4e00\u4e2a\u7aef\u70b9\uff0c\u5bb9\u91cf\u4e3a $1$\u82b1\u8d39\u4e3a\u4e0a\u8ff0\u3002\n\n\u8dd1\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u5373\u53ef\u3002\n\n\u4e0b\u9762\u662fAC\u4ee3\u7801\n\n```cpp\n/*\nluogu CF1187G\n*/\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int INF = 0x7f7f7f7f;\n\nint n,m,s,t,p,c,d,x[505],y[505];\nint mxf,mnc;\nint ee=1,h[5000005],nex[5000005<<1],to[5000005<<1],val[5000005<<1],cost[5000005<<1];\nint dis[5000005],pre[5000005],last[5000005],flow[5000005];\nbool vis[5000005];\n\nvoid addedge(int x,int y,int z,int c)\n{\n\tnex[++ee] = h[x];\n\tto[ee] = y;\n\tval[ee] = z;\n\tcost[ee] = c;\n\th[x] = ee;\n}\n\nbool spfa()\n{\n\tmemset(dis,INF,sizeof(dis));\n\tmemset(vis,false,sizeof(vis));\n\tqueue<int> q;\n\tq.push(s);\n\tvis[s] = true;\n\tdis[s] = 0;\n\tflow[s] = INF;\n\tpre[t] = -1;\n\twhile(!q.empty())\n\t{\n\t\tint x=q.front();\n\t\tq.pop();\n\t\tvis[x] = false;\n\t\tfor(int i=h[x];i;i=nex[i])\n\t\t\tif(val[i] && dis[to[i]]>dis[x]+cost[i])\n\t\t\t{\n\t\t\t\tdis[to[i]] = dis[x]+cost[i];\n\t\t\t\tpre[to[i]] = x;\n\t\t\t\tlast[to[i]] = i;\n\t\t\t\tflow[to[i]] = min(flow[x],val[i]);\n\t\t\t\tif(!vis[to[i]])\n\t\t\t\t{\n\t\t\t\t\tvis[to[i]] = true;\n\t\t\t\t\tq.push(to[i]);\n\t\t\t\t}\n\t\t\t}\n\t}\n\treturn pre[t]!=-1;\n}\n\nvoid mcmf()\n{\n\tmxf = mnc = 0;\n\twhile(spfa())\n\t{\n\t\tint now=t;\n\t\tmxf += flow[t];\n\t\tmnc += flow[t]*dis[t];\n\t\twhile(now!=s)\n\t\t{\n\t\t\tval[last[now]] -= flow[t]; \n\t\t\tval[last[now]^1] += flow[t];\n\t\t\tnow = pre[now];\n\t\t}\n\t}\n}\n\nint zh(int t,int x)\n{\n\treturn t*n+x;\n}\n\nint main()\n{\n\tcin>>n>>m>>p>>c>>d;\n\ts = 0, t = n*99+1;\n\tfor(int i=1,x;i<=p&&cin>>x;i++)\n\t\taddedge(s,zh(0,x),1,0), addedge(zh(0,x),s,0,0);\n\tfor(int i=1;i<=m;cin>>x[i]>>y[i],i++);\n\tfor(int i=0;i<=99;i++)\n\t{\n\t\taddedge(zh(i,1),zh(i+1,1),INF,0), addedge(zh(i+1,1),zh(i,1),0,0);\n\t\tfor(int j=2;j<=n;j++)\n\t\t\taddedge(zh(i,j),zh(i+1,j),INF,c), addedge(zh(i+1,j),zh(i,j),0,-c);\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tfor(int k=1;k<=p;k++)\n\t\t\t{\n\t\t\t\tint cst=d*k*k-d*(k-1)*(k-1)+c;\n\t\t\t\taddedge(zh(i,x[j]),zh(i+1,y[j]),1,cst), addedge(zh(i+1,y[j]),zh(i,x[j]),0,-cst);\n\t\t\t\taddedge(zh(i,y[j]),zh(i+1,x[j]),1,cst), addedge(zh(i+1,x[j]),zh(i,y[j]),0,-cst);\n\t\t\t}\n\t}\n\tmcmf();\n\tcout<<mnc<<endl;\n\t\n\treturn 0;\n}\n```\n\n\u795d\u5927\u5bb6AC\u6109\u5feb\uff01",
        "postTime": 1584343388,
        "uid": 123298,
        "name": "kouylty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1187G \u3010Gang Up\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5176\u5b9e\u6ca1\u6709\u9ed1\u9898\u5427\n\n\u7f51\u7edc\u6d41\uff0c\u6309\u7167\u65f6\u95f4\u5206\u5c42\u5efa\u56fe\n\n\u8d85\u7ea7\u6e90\u5411\u6709\u4eba\u70b9\u6d411\u8d390\n\n\u96641\u5916\u4e0b\u5c42\u70b9\u5411\u4e0a\u5c42\u70b9\u6d41inf\u8d39c\n\n1\u53f7\u70b9\u4e0b\u5c42\u5411\u4e0a\u5c42\u6d41inf\u8d390\n\n\u6bcf\u6761\u8fb9(u,v)\u8fd9\u4e2a$d*a^2$\u62c6\u6210d*\u5947\u6570\u4e4b\u548c\n\n\u56e0\u4e3a$1+3+5+...+n*2-1=n^2$\n>\u4e0b\u5c42u\u5411\u4e0a\u5c42v\u5efa\u6d411\u8d39d+c\uff0c\u6d411\u8d39d*3+c...\n\n>\u4e0b\u5c42v\u5411\u4e0a\u5c42u\u540c\u7406\n\n\u5efa\u5b8c\u540e\u6c47\u70b9\u4e3a\u9876\u5c421\uff0c\u8dd1\u4e00\u904d\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u5373\u53ef\n\nCode\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int M = 5e6;\nstruct edge{\n\tint to, flow, w, nxt;\n}g[M << 1];\nint tot = 0, head[M];\ninline void add(int u, int v, int flow, int w){\n\tg[tot] = edge{v, flow, w, head[u]}, head[u] = tot++;\n\tg[tot] = edge{u, 0, -w, head[v]}, head[v] = tot++;\n}\nbool vis[M];\nint dis[M], flow[M], pre[M], cur[M];\nint n, m, s, t;\nqueue <int> q;\n#define clr0(x) memset(x, 0, sizeof(x))\n#define clrmx(x) memset(x, 127/3, sizeof(x))\ninline bool spfa(){\n\tclr0(vis); clrmx(dis); clrmx(flow);\n\tq.push(s); dis[s] = 0; vis[s] = 1; pre[t] = -1;\n\twhile(! q.empty()){\n\t\tint u = q.front(); q.pop(); vis[u] = 0;\n\t\tfor(int i = head[u]; ~i; i = g[i].nxt){\n\t\t\tint v = g[i].to;\n\t\t\tif(dis[v] > dis[u] + g[i].w && g[i].flow > 0){\n\t\t\t\tdis[v] = dis[u] + g[i].w; pre[v] = u; cur[v] = i;\n\t\t\t\tflow[v] = min(flow[u], g[i].flow);\n\t\t\t\tif(! vis[v]){vis[v] = 1; q.push(v);}\n\t\t\t}\n\t\t}\n\t}\n\treturn pre[t] != -1;\n}\ninline void input(){\n\tmemset(head, -1, sizeof(head));\n\tint k, c, d; scanf(\"%d%d%d%d%d\", &n, &m, &k, &c, &d);\n\tfor(int i = 1; i <= k; ++ i){int u; scanf(\"%d\", &u); add(0, u, 1, 0);}\n\tfor(int i = 1; i <= m; ++ i){\n\t\tint u, v; scanf(\"%d%d\", &u, &v);\n\t\tfor(int j = 1; j <= n + k; ++ j)\n\t\t\tfor(int l = 1; l <= k; ++ l){\n\t\t\t\tadd(u + (j - 1) * n, v + j * n, 1, d * l * 2 - d + c);\n\t\t\t\tadd(v + (j - 1) * n, u + j * n, 1, d * l * 2 - d + c);\n\t\t\t}\n\t}\n\tfor(int i = 1; i < n + k; ++ i){\n\t\tfor(int j = 2; j <= n; ++ j)\n\t\t\tadd(j + (i - 1) * n, j + i * n, 1e9, c);\n\t\tadd(1 + (i - 1) * n, 1 + i * n, 1e9, 0);\n\t}\n\ts = 0, t = 1 + (n + k - 1) * n;\n}\ninline void solve(){\n\tint minw = 0;\n\twhile(spfa()){\n\t\tint now = t; minw += flow[t] * dis[t];\n\t\twhile(now != s){\n\t\t\tg[cur[now]].flow -= flow[t];\n\t\t\tg[cur[now]^1].flow += flow[t];\n\t\t\tnow = pre[now];\n\t\t}\n\t}\n\tprintf(\"%d\", minw);\n}\nint main(){\n\tinput(); solve();\n\treturn 0;\n}\n```",
        "postTime": 1562147607,
        "uid": 29519,
        "name": "qianfujia",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1187G \u3010Gang Up\u3011"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1187G)\u3002\n\n\u540c\u6b65\u53d1\u8868\u4e8e\u6211\u7684 [$\\texttt{cnblog}$](https://www.cnblogs.com/UperFicial/p/16162734.html)\n\n### $\\texttt{Description}$\n\n$k$ \u4e2a\u4eba\u4f4d\u4e8e\u4e00\u5f20\u65e0\u5411\u56fe\u4e0a\uff0c\u6bcf\u4e2a\u65f6\u95f4\u53ef\u4ee5\u9009\u62e9\u8d70\u52a8\u6216\u505c\u7559\u3002\n\n\u6709 $a$ \u4e2a\u4eba\u540c\u65f6\u7ecf\u8fc7\u4e00\u6761\u8fb9\u9700\u8981 $d\\times a^2$ \u7684\u4ee3\u4ef7\u3002\n\n\u4e00\u4e2a\u4eba\u5230\u8fbe $1$ \u7684\u65f6\u95f4\u4e3a $t$\uff0c\u5219\u9700\u8981\u8bdd\u8d39 $c\\times t$ \u7684\u4ee3\u4ef7\u3002\n\n\u6c42\u6240\u6709\u4eba\u5230\u8fbe $1$ \u540e\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n$1\\le n,m,k\\le 50$\u3002\n\n### $\\texttt{Solution}$\n\n\u53d1\u73b0\u9898\u76ee\u4e2d\u6d89\u53ca\u5230\u4e86\u65f6\u95f4\uff0c\u76f4\u63a5\u60f3\u5230\u6309\u7167\u65f6\u95f4\u5206\u5c42\u3002\n\n\u7b2c $i$ \u4e2a\u70b9\uff0c\u5728\u7b2c $j$ \u4e2a\u65f6\u95f4\u7684\u7f16\u53f7\u4e3a $i+j\\times n$\u3002\n\n\u6211\u4eec\u7528 $(i,j)$ \u8868\u793a\u7b2c $i$ \u4e2a\u70b9\u7b2c $j$ \u4e2a\u65f6\u95f4\u7684\u72b6\u6001\u3002\n\n\u4e00\u5f00\u59cb\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a_i$\uff0c\u4ece $s$ \u5411 $(a_i,0)$ \u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $0$ \u7684\u8fb9\uff0c\u8fd9\u662f\u5f88\u663e\u7136\u7684\u3002\n\n\u6bcf\u4e00\u4e2a\u4eba\u90fd\u53ef\u4ee5\u9009\u62e9\u505c\u7559\uff0c\u6240\u4ee5\u5c06 $(i,j)$ \u5411 $(i,j+1)$ \u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a $\\infty$\uff0c\u8d39\u7528\u4e3a $c$\u3002\u7279\u522b\u7684\uff0c\u82e5 $i=1$\uff0c\u5219\u8d39\u7528\u4e3a $0$\uff0c\u56e0\u4e3a\u5df2\u7ecf\u5230\u4e86 $1$ \u53f7\u70b9\uff0c\u4efb\u52a1\u5c31\u7ed3\u675f\u4e86\u3002\n\n\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0 $d^2$ \u8fd9\u4e2a\u6761\u4ef6\u7279\u522b\u4e0d\u597d\u5904\u7406\u3002\n\n\u4f46\u662f\u4f60\u4f1a\u628a $d^2$ \u8f6c\u5316\u6210 $\\sum_{i=1}^d(2\\times d-1)$ \u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u6839\u636e[\u8fd9\u9053\u9898](https://www.luogu.com.cn/problem/CF863F)\u7684 $\\texttt{trick}$\uff0c\u4ece\u5bf9\u4e8e\u539f\u56fe\u7684\u4e00\u6761 $u$ \u5230 $v$ \u7684\u8fb9\uff0c\u4f46\u4e0d\u540c\u7684\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u5c42\uff0c\u8fde $k$ \u6761\u8fb9\uff0c\u5bf9\u4e8e\u7b2c $t$ \u6761\u8fb9\uff0c\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $d\\times (2t-1)+c$\u3002\n\n\u8fd9\u4e2a\u600e\u4e48\u89e3\u91ca\u5462\uff0c\u5bb9\u91cf\u4e00\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u80af\u5b9a\u4f1a\u4ece\u6700\u5c0f\u7684\u8d39\u7528\u7684\u90a3\u6761\u8fb9\u5230\u5c3d\u53ef\u80fd\u6d41\u7684\u6700\u5927\u8d39\u7528\u7684\u8fd9\u4e9b\u8fb9\u6d41\u6ee1\uff0c\u8fd9\u4e9b\u8fb9\u6c42\u548c\u80af\u5b9a\u5c31\u662f $d^2a$ \u4e86\u3002\u5176\u4e2d $a$ \u4e3a\u6211\u4eec\u7684\u6d41\u91cf\u3002\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\uff0c\u6570\u7ec4\u4e0d\u8981\u5f00\u5c0f\uff0c\u4ee3\u7801\uff1a\n\n```cpp\nint main()\n{\n\tn=read(),m=read(),k=read(),c=read(),D=read();\n\tint s=0;\n\tfor(register int i=1;i<=k;i++)\n\t{\n\t\tint x=read();\n\t\tadd_edge(s,x,1,0);\n\t}\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tint u=read(),v=read();\n\t\tfor(register int j=1;j<=n+k;j++)\n\t\t\tfor(register int kk=1;kk<=k;kk++)\n\t\t\t\tadd_edge(u+(j-1)*n,v+j*n,1,D*((kk<<1)-1)+c),add_edge(v+(j-1)*n,u+j*n,1,D*((kk<<1)-1)+c);;\n\t}\n\tfor(register int i=1;i<k+n;i++)\n\t{\n\t\tfor(register int j=2;j<=n;j++)\n\t\t\tadd_edge(j+(i-1)*n,j+i*n,INF,c);\n\t\tadd_edge(1+(i-1)*n,1+i*n,INF,0);\n\t}\n\tt=1+(k+n-1)*n;\n\tMCMF();\n\treturn 0;\n}\n```\n\n$$\\texttt{The End.by UF}$$",
        "postTime": 1650286696,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010CF1187G Gang Up\u3011"
    },
    {
        "content": "\u5206\u5c42\u56fe\u8d39\u7528\u6d41\n\n---- \n\n\u7ed9\u5b9a\u4e00\u5f20$n$\u4e2a\u70b9$m$\u6761\u8fb9\u7684\u65e0\u5411\u8fde\u901a\u56fe\uff0c\u6709$k$\u4e2a\u4eba\u5206\u522b\u4ece\u4e00\u4e9b\u70b9\uff0c\u60f3\u8d70\u5230$1$\u53f7\u70b9\u3002\u8d70$1$\u4e00\u6761\u8fb9\u8981$1$\u4e2a\u65f6\u523b\uff0c$1$\u4e2a\u65f6\u523b\u53ef\u4ee5\u8d70$1$\u6761\u8fb9\u4e5f\u53ef\u4ee5\u4e0d\u8d70\u3002\u4e00\u4e2a\u4eba\u5982\u679c$t$\u65f6\u523b\u624d\u5230$1$\u53f7\u70b9\uff0c\u8981\u82b1\u8d39$c \\cdot t$\u7684\u4ee3\u4ef7\u3002\u4e00\u6761\u8fb9**\u4e00\u4e2a\u65b9\u5411\u4e0a**\u67d0\u4e00\u65f6\u523b\u5982\u679c\u6709$a$\u4e2a\u4eba\u540c\u65f6\u7ecf\u8fc7\uff0c\u8981\u82b1\u8d39$d \\cdot a^2$\u7684\u4ee3\u4ef7\u3002$c$\u548c$d$\u90fd\u662f\u7ed9\u5b9a\u5e38\u6570\u3002\u6c42\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u6309\u7167\u8d70\u8fc7\u7684\u8fb9\u6570\uff0c\u5efa\u539f\u56fe\u7684\u5206\u5c42\u56fe\u3002\n\n\u5bf9\u6bcf\u4e2a\u65f6\u523b\u7684\u6bcf\u4e2a\u70b9\uff0c\u5411\u4e0b\u4e00\u65f6\u523b\u7684\u540c\u4e00\u4e2a\u70b9\u8fde\u8fb9\uff0c\u8868\u793a\u4e0d\u8d70\u3002\n\n\u6700\u591a\u4e00\u5171\u4f1a\u6709$(n+k)$\u4e2a\u65f6\u523b\uff0c\u9700\u8981\u5efa$n(n+k)+2$\u4e2a\u70b9\u3002\n\n\u5bf9\u4e8e\u4e00\u6761\u8fb9\uff0c\u62c6\u6210$2k(n+k)$\u6761\u8fb9\u3002\n\n\u7136\u540e\u8dd1\u8d39\u7528\u6d41\u3002\n\n\u8981\u6ce8\u610f\u52a0\u8fb9\u65f6\u5c3d\u53ef\u80fd\u628a\u4ef7\u503c\u5c0f\u7684\u8fb9\u653e\u5728\u524d\u9762\uff0c\u8fd9\u6837\u4e0d\u88ab\u5361\u5e38\uff0c\u5e38\u6570\u5c0f\u3002",
        "postTime": 1590067825,
        "uid": 267783,
        "name": "yyy\u7231\u7f16\u7a0b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1187G \u3010Gang Up\u3011"
    }
]
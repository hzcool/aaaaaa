[
    {
        "content": "\u9996\u5148\uff0c\u5982\u679c\u7ed9\u5b9a\u76f4\u7ebf\u5b8c\u5168\u5782\u76f4\u4e8ex\u8f74\uff0c\u53ef\u4ee5\u5c06\u6240\u6709\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\u4ea4\u6362\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u65e0\u6cd5\u5199\u51fa\u89e3\u6790\u5f0f\u7684\u95ee\u9898\u4e86\n\n\u53d1\u73b0\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u7684\u8fb9\u91cd\u5408\u7684\u60c5\u51b5\u6700\u96be\u8003\u8651\uff0c\u4e8e\u662f\u5148\u4e0d\u8003\u8651\u8fd9\u79cd\u60c5\u51b5\n\n\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u7684\u8fb9\u7b2c\u5947\u6570\u6b21\u76f8\u4ea4\uff0c\u4e00\u5b9a\u662f\u201c\u8fdb\u5165\u201d\u591a\u8fb9\u5f62\uff0c\u7b2c\u5076\u6570\u6b21\u76f8\u4ea4\uff0c\u4e00\u5b9a\u662f\u201c\u7a7f\u51fa\u201d\u591a\u8fb9\u5f62\u3002\u4e8e\u662f\u53ef\u4ee5\u4fdd\u5b58\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u8fb9\u7684\u4ea4\u70b9\uff0c\u7136\u540e\u5bf9\u6a2a\u5750\u6807\u6392\u5e8f\uff0c\u5f88\u5bb9\u6613\u5f97\u89e3\n\n\u8003\u8651\u52a0\u4e0a\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u7684\u8fb9\u91cd\u5408\u7684\u60c5\u51b5\u3002\n\n\u5728\u628a\u91cd\u5408\u90e8\u5206\u8ba1\u5165\u7b54\u6848\u540e\uff0c\u4fbf\u53ef\u4ee5\u628a\u8fd9\u6bb5\u76f4\u63a5\u201c\u7565\u53bb\u201d\uff0c\u7136\u540e\u4f9d\u7136\u53ef\u4ee5\u6309\u7167\u4e0a\u8ff0\u65b9\u6cd5\u5f97\u51fa\u7b54\u6848\n\n\u5177\u4f53\u65b9\u6cd5\u662f\uff0c\u5728\u76f4\u7ebf\u5f00\u59cb\u91cd\u5408\u7684\u65f6\u5019\uff0c\u4fdd\u5b58\u4e0a\u4e00\u4e2a\u70b9\u76f8\u5bf9\u76f4\u7ebf\u7684\u4f4d\u7f6e\uff08\u4e0a/\u4e0b\uff09\uff1b\u5728\u76f4\u7ebf\u7ed3\u675f\u91cd\u5408\u7684\u65f6\u5019\uff0c\u4fdd\u5b58\u4e0b\u4e00\u4e2a\u70b9\u76f8\u5bf9\u76f4\u7ebf\u7684\u4f4d\u7f6e\uff08\u4e0a/\u4e0b\uff09\u3002\u5982\u679c\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u76f8\u540c\uff0c\u5c31\u7b97\u4f5c\u201c\u6ca1\u6709\u4e0e\u8fb9\u76f8\u4ea4\u201d\uff1b\u5982\u679c\u4e0d\u540c\uff0c\u5c31\u7b97\u4f5c\u201c\u4e0e\u8fb9\u76f8\u4ea4\u201d\n\n\u5728\u5b9e\u73b0\u4e2d\uff0c\u7528flag\u8868\u793a\u8be5\u70b9\u662f\u5426\u662f\u201c\u8fdb\u5165\u201d\u591a\u8fb9\u5f62\u7684\u70b9\uff0cflag2\u8868\u793a\u5f53\u524d\u662f\u5426\u4e0e\u76f4\u7ebf\u91cd\u5408\n\n\u7ed3\u5408\u4ee3\u7801\u66f4\u597d\u7406\u89e3\n\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\ntypedef long double db;\nconst int MAXN = 1e3 + 5;\nconst db eps = 1e-7;\nusing namespace std;\n\ninline db Fabs(db x){ return x<0? -x: x;}\ninline bool eq(db x,db y){ return Fabs(x-y)<=eps;}\n\nstruct Point\n{\n\tdb x,y;\n}p[MAXN];\ninline db dist(const Point &u,const Point &v){ return sqrt((u.x-v.x)*(u.x-v.x) + (u.y-v.y)*(u.y-v.y));}\n\nstruct Line\n{\n\tdb a,b;\n\tinline void calc(Point u,Point v)\n\t{\n\t\ta = (u.y-v.y)/(u.x-v.x),\n\t\tb = u.y - a * u.x;\n\t}\n\tinline int pos(Point u)\n\t{\n\t\tdb y = a*u.x + b;\n\t\tif(eq(y,u.y)) return 0;\n\t\tif(y < u.y) return 1;\n\t\treturn -1;\n\t}\n\t\n\tinline Line(Point u,Point v){ calc(u,v);}\n};\n\nstruct Point_\n{\n\tPoint u;\n\tint id;\n}q[MAXN];\nint ql;\ninline void push(Point u,int id){ q[++ql].u=u; q[ql].id=id;}\ninline bool cmp(const Point_ &u,const Point_ &v){ return u.u.x<v.u.x;}\n\nint n;\ninline void solve(Point u,Point v)\n{\n\tLine l(u,v);\n\t\n\tql=0;\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tint p1=l.pos(p[i-1]), p2=l.pos(p[i]), p3=l.pos(p[i+1]);\n\t\tif(!p2)\n\t\t{\n\t\t\tif(p1!=p3) push(p[i], p1+p3);\n\t\t}\n\t\telse if(p2+p3==0)\n\t\t{\n\t\t\tif(eq(p[i].x, p[i+1].x)) push((Point){ p[i].x, l.a*p[i].x + l.b},0);\n\t\t\telse\n\t\t\t{\n\t\t\t\tLine l2(p[i],p[i+1]);\n\t\t\t\tdb x = (l.b - l2.b)/(l2.a - l.a);\n\t\t\t\tpush((Point){x, l.a*x + l.b},0);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsort(q+1,q+ql+1,cmp);\n\tdb ans=0;\n\tint flag=0,flag2=0;\n\tfor(int i=1; i<ql; ++i)\n\t{\n\t\tif(q[i].id && !flag2)\n\t\t{\n\t\t\tflag2=1;\n\t\t\tans+=dist(q[i].u,q[i+1].u);\n\t\t\tif(q[i].id==q[i+1].id) flag^=1;\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\tflag2=0;\n\t\tflag^=1;\n\t\tif(flag) ans+=dist(q[i].u,q[i+1].u);\n\t}\n\tprintf(\"%.20lf\\n\",(double)ans);\n}\n\nint main(void)\n{\n\tint m;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tdouble x,y;\n\t\tscanf(\"%lf%lf\",&x,&y);\n\t\tp[i] = (Point){x,y};\n\t}\n\tp[0]=p[n];\n\tp[n+1]=p[1];\n\t\n\twhile(m--)\n\t{\n\t\tdouble x1,y1,x2,y2;\n\t\tscanf(\"%lf%lf%lf%lf\",&x1,&y1,&x2,&y2);\n\t\tif(eq(x1,x2))\n\t\t{\n\t\t\tswap(x1,y1); swap(x2,y2);\n\t\t\tfor(int i=0; i<=n+1; ++i) swap(p[i].x,p[i].y);\n\t\t\tsolve((Point){x1,y1}, (Point){x2,y2});\n\t\t\tfor(int i=0; i<=n+1; ++i) swap(p[i].x,p[i].y);\n\t\t}\n\t\telse solve((Point){x1,y1}, (Point){x2,y2});\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1573522650,
        "uid": 73687,
        "name": "He_Ren",
        "ccfLevel": 10,
        "title": "\u89e3\u9898\u62a5\u544a CF598F \u3010Cut Length\u3011"
    },
    {
        "content": "\u5361\u7cbe\u5ea6\u5c51\u9898\uff0c\u7279\u522b\u662f26\u300127\u90a3\u4e24\u4e2ahack\u7684\u70b9\uff0c\u672c\u5730\u90fd\u8dd1\u8fc7\u53bb\u4e86\u5374\u88abCF\u8bc4\u6d4b\u59ec\u5361\u6389\u4e86\uff0c\u540e\u6765\u53d1\u73b0\u662f\u7cbe\u5ea6\u5f00 $10^{-8}$ \u592a\u5c0f\u4e86\u4f1a\u628a\u76f8\u540c\u7684\u4e1c\u897f\u770b\u6210\u4e0d\u540c\u7684\uff0c$10^{-6}$ \u624d\u521a\u521a\u597d\u5361\u8fc7\u2026\u2026\n\n\u601d\u60f3\u975e\u5e38simple\u3002\u6211\u4eec\u56de\u5fc6\u4e00\u4e0b\u6240\u8c13\u7684\u201c\u5c04\u7ebf\u6cd5\u201d\uff08\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u70b9\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\u7684\u90a3\u4e2a\u7b97\u6cd5\uff09\uff0c\u7136\u540e\u5c06\u5176\u9b54\u6539\u4e00\u4e0b\uff0c\u5c31\u53d8\u6210\u4e86\u6c42\u51fa\u8be5\u76f4\u7ebf\u4e0e\u6b64\u591a\u8fb9\u5f62\u7684\u6240\u6709\u4ea4\u70b9\uff0c\u7136\u540e\u5904\u5728\u76f8\u90bb\u4e24\u4e2a\u4ea4\u70b9\u95f4\u7684\u7ebf\u6bb5\u4fbf\u662f\u5176\u5904\u4e8e\u591a\u8fb9\u5f62\u5185\u7684\u90e8\u5206\u3002\n\n\u56e0\u4e3a $n$ \u53ea\u6709 $1000$\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e00\u6761\u7ebf\u6bb5\u6765\u627e\u5230\u5b83\u4e0e\u76f4\u7ebf\u7684\u4ea4\u70b9\u3002\u5f88\u660e\u663e\u8fd9\u4e9b\u4ea4\u70b9\u90fd\u5728\u8be5\u76f4\u7ebf\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u628a\u5b83\u4eec\u6309\u7167\u4ece\u76f4\u7ebf\u7684\u4e00\u6bb5\u5230\u53e6\u4e00\u7aef\u7684\u987a\u5e8f\u6392\u5e8f\uff0c\u7136\u540e\u5c31\u662f\u627e\u51fa\u7b2c\u4e00\u4e2a\u4ea4\u70b9\u548c\u7b2c\u4e8c\u4e2a\u4ea4\u70b9\u95f4\u7684\u7ebf\u6bb5\uff0c\u7b2c\u4e09\u4e2a\u548c\u7b2c\u56db\u4e2a\u95f4\u7684\u7ebf\u6bb5\u2026\u2026\n\n\u8fd9\u662f\u7406\u8bba\u4e0a\u7684\u7b97\u6cd5\u3002\u771f\u6b63\u5b9e\u73b0\u8d77\u6765\u4f1a\u53d1\u73b0\u6709\u5f88\u591a\u8981\u5904\u7406\u7684\uff1a\n\n1. \u5173\u4e8e\u91cd\u5408\u7684\u8fb9\u7684\u95ee\u9898\u3002\n\n\u660e\u663e\uff0c\u5982\u679c\u8fb9\u4e0e\u76f4\u7ebf\u91cd\u5408\uff0c\u8be5\u8fb9\u662f\u4e00\u5b9a\u8981\u8ba1\u5165\u7684\uff1b\u4e8e\u662f\u6211\u4eec\u5355\u72ec\u5f00\u4e00\u4e2a\u6570\u7ec4\u7ef4\u62a4\u6240\u6709\u8fd9\u6837\u7684\u8fb9\uff0c\u7136\u540e\u5c06\u8fd9\u6837\u7684\u8fb9\u4e0e\u4e0a\u6587\u6240\u8ff0\u7ebf\u6bb5\u6c42\u4e00\u4e2a\u5e76\u5373\u53ef\u3002\n\n2. \u5173\u4e8e\u76f4\u7ebf\u4f55\u65f6\u4e0e\u8fb9\u6709\u4ea4\u7684\u95ee\u9898\n\n\u5f53\u76f4\u7ebf\u4e0e\u8fb9\u4e0d\u4ea4\u5728\u4e00\u4e9b\u5947\u5947\u602a\u602a\u7684\u4f4d\u7f6e\u4e4b\u524d\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u5f88simple\u7684\uff1b\u4f46\u662f\u7684\u786e\u4f1a\u51fa\u73b0\u5947\u5947\u602a\u602a\u7684\u4f4d\u7f6e\uff0c\u6bd4\u5982\u8bf4\u76f4\u7ebf\u4e0e\u4e00\u4e2a\u89d2\u76f8\u4ea4\uff08\u8fd9\u65f6\u9700\u8981\u5224\u65ad\u76f4\u7ebf\u662f\u7a7f\u8fc7\u4e86\u89d2\u8fdb\u5165\u4e86\u591a\u8fb9\u5f62\uff08\u8fd9\u65f6\u5c31\u8d21\u732e\u4e86\u4e00\u4e2a\u4ea4\u70b9\uff09\uff0c\u8fd8\u662f\u53ea\u662f\u64e6\u8fc7\u53bb\u5e76\u6ca1\u6709\u771f\u6b63\u8fdb\u53bb\uff09\uff0c\u6216\u662f\u76f4\u7ebf\u4e0e\u8fb9\u91cd\u5408\uff08\u8fd9\u65f6\u8fd8\u662f\u4e0a\u6587\u6240\u8ff0\u4e24\u79cd\u60c5\u51b5\uff0c\u8fdb\u53bb\u6216\u662f\u6ca1\u8fdb\u53bb\uff09\u3002\u8fd9\u73a9\u610f\u9700\u8981\u597d\u597d\u8ba8\u8bba\u4e00\u4e0b\uff0c\u5982\u679c\u4e0d\u60f3\u8ba8\u8bba\u4e5f\u53ef\u4ee5\u76f4\u63a5\u770b\u4ee3\u7801\uff0c\u91cc\u9762\u6709\u6ce8\u91ca\u3002\n\n\u5728\u5904\u7406\u8fd9\u60c5\u5f622\u7684\u65f6\u5019\uff0c\u6700\u597d\u628a\u6240\u6709 $180^{\\circ}$ \u7684\u89d2\u90fd\u5220\u6389\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u589e\u52a0\u8ba8\u8bba\u91cf\u3002\n\n\u6700\u7ec8\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm\\log n)$\uff0c\u56e0\u4e3a\u533a\u95f4\u5e76\u662f $O(n\\log n)$ \u7684\u3002\n\n\u4ee3\u7801\uff08\u6700\u540e\u9644\u6709\u4e09\u7ec4\u6211\u7ede\u5c3d\u8111\u6c41\u6784\u9020\u51fa\u6765\u5361\u6389\u6211\u81ea\u5df1\u7684\u6570\u636e\uff0c\u5982\u679c\u5b9e\u5728\u4e0d\u77e5\u9053\u4ec0\u4e48\u9519\u4e5f\u53ef\u4ee5\u62ff\u53bb\u73a9\u73a9\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define double long double\nconst double eps=1e-6;\nint cmp(double x){\n\tif(x>eps)return 1;\n\tif(x<-eps)return -1;\n\treturn 0;\n}\nstruct Vector{\n\tdouble x,y;\n\tVector(){}\n\tVector(double X,double Y){x=X,y=Y;}\n\tfriend Vector operator +(const Vector &u,const Vector &v){return Vector(u.x+v.x,u.y+v.y);}\n\tfriend Vector operator -(const Vector &u,const Vector &v){return Vector(u.x-v.x,u.y-v.y);}\n\tfriend Vector operator *(const Vector &u,const double &v){return Vector(u.x*v,u.y*v);}\n\tfriend Vector operator /(const Vector &u,const double &v){return Vector(u.x/v,u.y/v);}\n\tfriend double operator &(const Vector &u,const Vector &v){return u.x*v.y-u.y*v.x;}//cross times\n\tfriend double operator |(const Vector &u,const Vector &v){return u.x*v.x+u.y*v.y;}//point times\n\tdouble operator ~()const{return sqrt(x*x+y*y);}//the modulo of a vector\n\tdouble operator !()const{return atan2(y,x);}//the angle of a vector\n\tfriend bool operator <(const Vector &u,const Vector &v){return cmp(u.x-v.x)?u.x<v.x:u.y<v.y;}\n\tfriend bool operator ==(const Vector &u,const Vector &v){return !cmp(u.x-v.x)&&!cmp(u.y-v.y);}\n\tvoid read(){scanf(\"%Lf%Lf\",&x,&y);}\n\tvoid print()const{printf(\"(%Lf,%Lf)\",x,y);}\n}p[1010];\nVector read(){Vector x;x.read();return x;}\ntypedef Vector Point;\nstruct Line{\n\tPoint x,y;\n\tVector z;\n\tLine(){}\n\tLine(Point X,Point Y){x=X,y=Y,z=Y-X;}\n\tvoid print()const{x.print(),y.print();}\n\tfriend Point operator &(const Line &u,const Line &v){return u.x+u.z*((v.z&(u.x-v.x))/(u.z&v.z));}\n\tfriend int operator &(const Line &u,const Point &v){return cmp((v-u.x)&(v-u.y));}//point v is on which side of line u\n};\ntypedef Line Segment;\nint n,m;\nvector<Segment>u;\nvector<Point>v,w;\nvector<int>b;\nbool on[1010];\ndouble calc(Line l){\n\tu.clear(),v.clear(),memset(on,false,sizeof(on));\n\tfor(int i=0;i<n;i++){\n\t\tif(!cmp((p[i]-p[(i+1)%n])&l.z)){//two lines parallel\n\t\t\tif(cmp(l.z&(p[i]-l.x)))continue;\n\t\t\tu.emplace_back(p[i],p[(i+1)%n]);//two lines coincide\n\t\t\tSegment tmp(p[i],p[(i+1)%n]);if((tmp&p[(i+n-1)%n])!=(tmp&p[(i+2)%n]))v.push_back(p[i]);\n\t\t\t//the line crossed the border at the coincided edge\n\t\t\tcontinue;\n\t\t}\n\t\tPoint x=Line(p[i],p[(i+1)%n])&l;//if not parallel, this is the intersection point\n\t\tif(x==p[i]){on[i]=true;continue;}\n\t\tif(x==p[(i+1)%n]){on[(i+1)%n]=true;continue;}//if intersection point is concide with one endpoint of the segment,consider it specially\n\t\tif(cmp((x-p[i])|(x-p[(i+1)%n]))==1)continue;//intersection is not on the segment\n\t\tv.push_back(x);\n\t}\n\tfor(int i=0;i<n;i++){//this loop only consider points exactly on the line\n\t\tif(!on[i])continue;\n\t\tif(on[(i+n-1)%n]||on[(i+1)%n])continue;//if this point is endpoint of a coinciding edge, do not bother as we've considered it previously\n\t\tPoint x=(l.x==p[i]?l.y:l.x);//find one point on the line which do not coincide with the current point\n\t\tSegment A(p[(i+n-1)%n],p[i]);bool a=((A&x)!=(A&p[(i+1)%n]));\n\t\tSegment B(p[(i+1)%n],p[i]);bool b=((B&x)!=(B&p[(i+n-1)%n]));\n\t\tif(a==b)v.push_back(p[i]);//cross the border.\n\t}\n\tsort(v.begin(),v.end()),w=v;\n\tfor(auto i:u)w.push_back(i.x),w.push_back(i.y);\n\tsort(w.begin(),w.end());\n\tb.assign(w.size(),0);\n\tfor(int i=0;i<v.size();i+=2){\n\t\tint l=lower_bound(w.begin(),w.end(),v[i])-w.begin();\n\t\tint r=lower_bound(w.begin(),w.end(),v[i+1])-w.begin();\n\t\tb[l]++,b[r]--;\n\t}\n\tfor(int i=0;i<u.size();i++){\n\t\tint l=lower_bound(w.begin(),w.end(),u[i].x)-w.begin();\n\t\tint r=lower_bound(w.begin(),w.end(),u[i].y)-w.begin();\n\t\tif(l>r)swap(l,r);\n\t\tb[l]++,b[r]--;\n\t}\n\tfor(int i=1;i<b.size();i++)b[i]+=b[i-1];\n\tdouble ret=0;\n\tfor(int i=0;i+1<b.size();i++)if(b[i])ret+=~(w[i+1]-w[i]);\n\treturn ret;\n}\nint N;\nint main(){\n\tscanf(\"%d%d\",&N,&m);\n\tfor(int i=0;i<N;i++){\n\t\tp[n].read();\n\t\tif(n>=2&&cmp((p[n]-p[n-1])&(p[n]-p[n-2]))==0)n--,p[n]=p[n+1];//eliminating those 180-degree angles.\n\t\tn++;\n\t}\n\tif(n>=3&&cmp((p[0]-p[n-1])&(p[0]-p[n-2]))==0)n--;\n\tif(n>=3&&cmp((p[1]-p[0])&(p[1]-p[n-1]))==0){for(int i=0;i+1<n;i++)p[i]=p[i+1];n--;}\n\twhile(m--)printf(\"%.10Lf\\n\",calc(Line(read(),read())));\n\treturn 0;\n}\n/*\n12 5\n-1 0\n-2 1\n-1 2\n0 1\n1 2\n2 1\n1 0\n2 -1\n1 -2\n0 -1\n-1 -2\n-2 -1\n-2 -1 -1 0\n-2.01 -1 -1.01 0\n-1.99 -1 -0.99 0\n-1 0 1 0\n1 2 2 1\n\n8 4\n0 0\n0 1\n0 2\n1 2\n2 2\n2 1\n1 1\n1 0\n1 0 1 1\n0 1 1 1\n0 0 1 1\n1 0 2 1\n\n6 3\n0 0\n0 1\n0 2\n1 1\n2 0\n1 0\n0 0 1 1\n2 0 0 2\n2 0 0 1\n*/\n```\n\n",
        "postTime": 1608460294,
        "uid": 123369,
        "name": "xtx1092515503",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF598F \u3010Cut Length\u3011"
    },
    {
        "content": "\u5982\u679c\u7b54\u6848\u5927\u4e8e $0$\uff0c\u90a3\u4e48\u7ed9\u7684\u76f4\u7ebf\u4e00\u5b9a\u548c\u591a\u8fb9\u5f62\u7684\u8fb9\u6709\u4ea4\u70b9\uff0c\u53ef\u4ee5\u7528\u5411\u91cf\u7684\u53c9\u79ef\u6b63\u8d1f\u5224\u65ad\u70b9\u5728\u76f4\u7ebf\u7684\u5de6\u4fa7\u8fd8\u662f\u53f3\u4fa7\uff0c\u5982\u679c\u7ebf\u6bb5\u4e0a\u4e24\u4e2a\u70b9\u5728\u76f4\u7ebf\u7684\u4e0d\u540c\u4fa7\uff0c\u90a3\u4e48\u5c31\u8bf4\u660e\u4ed6\u4eec\u76f8\u4ea4\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9xqimomd.png)\n\n\u56e0\u4e3a $\\overrightarrow{AQ'}\\times\\overrightarrow{AP}=2S_{\\triangle{APQ}},\\overrightarrow{AQ'}\\times\\overrightarrow{AB}=2S_{\\triangle{ABQ'}}$\uff0c\u4e14 $\\triangle_{APQ'}$ \u548c $\\triangle{ABQ'}$ \u5171\u5e95\uff0c\n\n\u6240\u4ee5 $P$ \u5230 $AQ'$ \u7684\u8ddd\u79bb\u6bd4 $B$ \u5230 $AQ'$ \u7684\u8ddd\u79bb\u7b49\u4e8e $\\frac{\\overrightarrow{AQ'}\\times\\overrightarrow{AP}}{\\overrightarrow{AQ'}\\times\\overrightarrow{AB}}$\uff0c\u56e0\u4e3a $AQ'\\parallel PQ$\uff0c\u6240\u4ee5 $A$ \u5230 $AQ'$ \u7684\u8ddd\u79bb\u7b49\u4e8e $P$ \u5230 $AQ'$ \u7684\u8ddd\u79bb\u3002\n\n\u53c8\u7531\u76f8\u4f3c\u53ef\u77e5\uff0c$\\frac{|AC|}{|AB|}=\\frac{\\overrightarrow{AQ'}\\times\\overrightarrow{AP}}{\\overrightarrow{AQ'}\\times\\overrightarrow{AB}}$\uff0c\u5c06\u8fd9\u4e2a\u503c\u8bb0\u4e3a $PQ$ \u7684\u8d21\u732e\u3002\n\n\u7528\u5c0f\u6839\u5806\u628a\u6709\u8d21\u732e\u7684\u8fb9\u5b58\u4e0b\u6765\uff0c\u7528 pair \u8bb0\u5f55\u8fb9\uff0c$first$ \u8868\u793a\u8d21\u732e\uff0c$second$ \u8868\u793a\u76f8\u5bf9\u4f4d\u7f6e\uff08\u5373 $r_{i+1}-r_i$\uff0c\u5982\u679c $i$ \u5728\u76f4\u7ebf\u5de6\u8fb9\uff0c$r_i=-1$\uff0c\u5982\u679c\u5728\u53f3\u8fb9 $r_i=1$\uff0c\u5982\u679c\u5728\u4e0a\u9762 $r_i=0$\uff09\u3002\n\n\u8bb0\u5f55 $sum$ \u8868\u793a $second$ \u7684\u524d\u7f00\u548c\uff0c\u5982\u679c $sum\\not=0$\uff0c\u5c31\u8bf4\u660e\u5f53\u524d\u6bb5\u5728\u591a\u8fb9\u5f62\u5185\u3002\n\n\u5982\u4e0b\u56fe\uff0c$|AC|=first_i$\uff0c$|AD|=first_{i+1}$\uff0c\u6240\u4ee5 $CD$ \u7684\u8d21\u732e\u4e3a $first_{i+1}-first_{i}$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uasuz2jm.png)\n\n\u6700\u540e\u628a\u603b\u8d21\u732e\u4e58\u4e0a $|AB|$ \u5c31\u662f\u7b54\u6848\u3002",
        "postTime": 1661849135,
        "uid": 571634,
        "name": "hgzxwzf",
        "ccfLevel": 7,
        "title": "CF598F"
    }
]
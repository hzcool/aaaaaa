[
    {
        "content": "\u6309\u7167\u9898\u610f\u6a21\u62df\u5373\u53ef\uff0c\u6ce8\u610f\u5982\u679c\u5728\u4e0a\u65b9\u7b49\u5f85\u7684\u4eba\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u53d8\u6210\u4e0b\u65b9\u7b49\u5f85\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u6240\u4ee5\u53ef\u4ee5\u5206\u4e0a\u4e0b\u8fdb\u884c\u7ef4\u62a4\uff0c\u5c06\u7b49\u5f85\u4e0e\u7535\u68af\u91cc\u7684\u4eba\u5206\u5f00\u5904\u7406\uff0c\u627e\u6700\u8fd1\u7684\u4eba\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u4f18\u5148\u961f\u5217 STL \u7ef4\u62a4\u6ce8\u610f\u4e00\u4e9b\u5c0f\u7ec6\u8282\uff0c\u5c06\u4eba\u79bb\u7ebf\u5904\u7406\uff0c\u6309\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u8fdb\u884c\u6392\u5e8f\uff0c\u8be6\u89c1\u4ee3\u7801\u6ce8\u91ca\u3002\n\n\n```cpp\n\n#include<bits/stdc++.h>\n#define int long long\n#define p_up go_up.size()+wait_up.size()\n#define p_down go_down.size()+wait_down.size()//\u540c\u9898\u610f\nusing namespace std;\ninline int read()\n{\n   int s=0,w=1;char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\nint n,m,x,ans[100010],T;\nstruct node{int t,l,r,id;bool operator < (const node &c) {return t<c.t;}}q[100010];//\u6309\u65f6\u95f4\u5148\u540e\u6392\u5e8f\npriority_queue< pair<int,int> > go_down,wait_down;//\u4e0b\u884c\u3001\u5728\u4e0b\u65b9\u7b49\u5f85\u7684\u4eba\npriority_queue< pair<int,int> , vector< pair<int,int> > , greater< pair<int,int> > > go_up,wait_up;//\u4e0a\u884c\u3001\u5728\u4e0a\u65b9\u7b49\u5f85\u7684\u4eba\nsigned main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++) q[i]=(node){read(),read(),read(),i};\n\tsort(q+1,q+n+1);x=1;q[n+1].t=0x3f3f3f3f3f3f3f3f;//x\u4ee3\u8868\u5f53\u524d\u697c\u5c42\uff0cq[n+1].t\u4fdd\u8bc1\u6700\u540e\u5904\u7406\u5b8c\u5168\n\tfor(int i=1;i<=n+1;i++)\n\t{\n\t\tint p=q[i].t-q[i-1].t;T=q[i-1].t;//p\u8868\u793a\u5269\u4f59\u65f6\u95f4\u76f4\u5230\u4e0b\u4e00\u6b21\u6709\u4eba\u52a0\u5165\u7b49\u5f85\u5e8f\u5217\uff0cT\u8868\u793a\u5f53\u524d\u65f6\u95f4\n\t\twhile(p&&p_up+p_down>0)\n\t\t{\n\t\t\tif(p_up>=p_down)\n\t\t\t{\n\t\t\t\tint hf=0x3f3f3f3f3f3f3f3f;\n\t\t\t\tif(!wait_up.empty()) hf=min(hf,wait_up.top().first);\n\t\t\t\tif(!go_up.empty()) hf=min(hf,go_up.top().first);\n\t\t\t\thf-=x;//\u6700\u8fd1\u4e0a\u65b9\u6d88\u8017\u65f6\u95f4\n\t\t\t\tif(hf>p) {x+=p;break;}//\u5269\u4f59\u65f6\u95f4\u4e0d\u591f\n\t\t\t\tif(!wait_up.empty()&&x+hf==wait_up.top().first)\n\t\t\t\t{\n\t\t\t\t\twhile(!wait_up.empty()&&wait_up.top().first==x+hf)\n\t\t\t\t\t{\n\t\t\t\t\t\tint u=wait_up.top().second;wait_up.pop();\n\t\t\t\t\t\tif(q[u].r>x+hf) go_up.push(make_pair(q[u].r,q[u].id));\n\t\t\t\t\t\t  else go_down.push(make_pair(q[u].r,q[u].id));\n\t\t\t\t\t}\t\n\t\t\t\t}//\u8fdb\u7535\u68af\n\t\t\t\tif(!go_up.empty()&&x+hf==go_up.top().first)\n\t\t\t\t{\t\n\t\t\t\t\twhile(!go_up.empty()&&go_up.top().first==x+hf)\n\t\t\t\t\t{\n\t\t\t\t\t\tint u=go_up.top().second;go_up.pop();\n\t\t\t\t\t\tans[u]=T+hf;\n\t\t\t\t\t}\n\t\t\t\t}//\u51fa\u7535\u68af\n\t\t\t\tp-=hf;T+=hf;x+=hf;\n\t\t\t}//\u4e0a\u884c\n\t\t\telse\n\t\t\t{\n\t\t\t\tint hf=-1;\n\t\t\t\tif(!wait_down.empty()) hf=max(hf,wait_down.top().first);\n\t\t\t\tif(!go_down.empty()) hf=max(hf,go_down.top().first);\n\t\t\t\thf=x-hf;//\u6700\u8fd1\u4e0b\u65b9\u6d88\u8017\u65f6\u95f4\n\t\t\t\tif(hf>p) {x-=p;break;}//\u5269\u4f59\u65f6\u95f4\u4e0d\u591f\n\t\t\t\tif(!wait_down.empty()&&x-hf==wait_down.top().first)\n\t\t\t\t{\n\t\t\t\t\twhile(!wait_down.empty()&&wait_down.top().first==x-hf)\n\t\t\t\t\t{\n\t\t\t\t\t\tint u=wait_down.top().second;wait_down.pop();\n\t\t\t\t\t\tif(q[u].r>x-hf) go_up.push(make_pair(q[u].r,q[u].id));\n\t\t\t\t\t\t  else go_down.push(make_pair(q[u].r,q[u].id));\n\t\t\t\t\t}\n\t\t\t\t}//\u8fdb\u7535\u68af\n\t\t\t\tif(!go_down.empty()&&x-hf==go_down.top().first)\n\t\t\t\t{\n\t\t\t\t\twhile(!go_down.empty()&&go_down.top().first==x-hf)\n\t\t\t\t\t{\n\t\t\t\t\t\tint u=go_down.top().second;go_down.pop();\n\t\t\t\t\t\tans[u]=T+hf;\n\t\t\t\t\t}\n\t\t\t\t}//\u51fa\u7535\u68af\n\t\t\t\tp-=hf;T+=hf;x-=hf;\n\t\t\t}//\u4e0b\u884c\n\t\t}\n\t\tif(i>n) break;\n\t\tif(q[i].l==x)\n\t\t  if(q[i].r>x) go_up.push(make_pair(q[i].r,q[i].id));\n\t\t\telse go_down.push(make_pair(q[i].r,q[i].id));\n\t\telse \n\t\t  if(q[i].l>x) wait_up.push(make_pair(q[i].l,i));\n\t\t  \telse wait_down.push(make_pair(q[i].l,i)); \n\t\twhile(q[i+1].t==q[i].t)\n\t\t{\n\t\t\ti++;\n\t\t\tif(q[i].l==x)\n\t\t\t  if(q[i].r>x) go_up.push(make_pair(q[i].r,q[i].id));\n\t\t\t    else go_down.push(make_pair(q[i].r,q[i].id));\n\t\t\telse \n\t\t\t  if(q[i].l>x) wait_up.push(make_pair(q[i].l,i));\n\t\t  \t    else wait_down.push(make_pair(q[i].l,i)); \n\t\t}//\u5c06\u8fd9\u4e00\u4e32\u65f6\u95f4\u76f8\u7b49\u7684\u4eba\u5168\u90e8\u52a0\u5165\uff0c\u6ce8\u610f\u521a\u597d\u4e0e\u7535\u68af\u540c\u4e00\u9ad8\u5ea6\u7684\u4eba\u53ef\u4ee5\u76f4\u63a5\u8fdb\u7535\u68af\n\t}\n\tfor(int i=1;i<=n;i++) printf(\"%lld\\n\",ans[i]);\n}\n```\n",
        "postTime": 1678540189,
        "uid": 233815,
        "name": "zhjzhmh",
        "ccfLevel": 6,
        "title": "\u4e2d\u6a21\u62df\uff08\u786e\u4fe1"
    }
]
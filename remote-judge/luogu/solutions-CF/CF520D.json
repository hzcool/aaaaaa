[
    {
        "content": "\u601d\u8def\uff1a\n\n\u6a21\u62df\uff0c\u7528\u4e00\u4e2a\u5927\u6839\u5806\u548c\u4e00\u4e2a\u5c0f\u6839\u5806\u7ef4\u62a4\u80fd\u62c6\u7684\u65b9\u5757\uff0c\u7528 map \u7ef4\u62a4\u65b9\u5757\u7684\u7f16\u53f7\uff0c\u6bcf\u6b21\u62c6\u4e00\u4e2a\u65b9\u5757\u5c31\u5411\u5468\u56f4\u65b9\u5757\u6269\u5c55\u4e00\u6b21\uff0c\u5230 Vasya \u5c31\u4ece\u5927\u6839\u5806\u4e2d\u53d6\uff0c\u5230 Petya \u5c31\u4ece\u5c0f\u6839\u5806\u4e2d\u53d6\uff0c\u53d6\u51fa\u7684\u65b9\u5757\u6807\u8bb0\u4e3a 1 \u5e76\u5220\u9664\uff0c\u907f\u514d\u91cd\u590d\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define pii pair<int,int>\n#define mp make_pair\n\nconst int mod=1e9+9;\n\nint n,x[100010],y[100010],ans[100010];\t//ans\u7edf\u8ba1\u7b54\u6848\nbool vis[100010];\t//\u6807\u8bb0\u6570\u7ec4\npriority_queue<int> maxi;\t//\u5927\u6839\u5806\npriority_queue<int,vector<int>,greater<int> > mini;\t//\u5c0f\u6839\u5806\nmap<pii,int> M;\t//\u7ef4\u62a4\u6bcf\u4e2a\u65b9\u5757\u7684\u7f16\u53f7\n\nbool check(int a,int b){\t//\u5224\u65ad\u80fd\u4e0d\u80fd\u53d6\u51fa (a,b) \u8fd9\u4e2a\u65b9\u5757\uff0c\u5982\u679c\u5b83\u4e0a\u65b9\u6216\u659c\u4e0a\u65b9\u6709\u65b9\u5757\u4f46\u65c1\u8fb9\u6ca1\u6709\u65b9\u5757\u5c31\u4e0d\u80fd\u53d6\n\tif(M[mp(a,b+1)]&&M[mp(a-1,b)]==0&&M[mp(a+1,b)]==0)\n\t\treturn 0;\n\tif(M[mp(a-1,b+1)]&&M[mp(a-1,b)]==0&&M[mp(a-2,b)]==0)\n\t\treturn 0;\n\tif(M[mp(a+1,b+1)]&&M[mp(a+1,b)]==0&&M[mp(a+2,b)]==0)\n\t\treturn 0;\n\treturn 1;\n}\n\nvoid update(int a,int b){\t//\u6269\u5c55\u5468\u56f4\u7684\u65b9\u5757\n\tif(M[mp(a,b-1)]&&check(a,b-1)){\n\t\tmaxi.push(M[mp(a,b-1)]);\n\t\tmini.push(M[mp(a,b-1)]);\n\t}\n\tif(M[mp(a-1,b-1)]&&check(a-1,b-1)){\n\t\tmaxi.push(M[mp(a-1,b-1)]);\n\t\tmini.push(M[mp(a-1,b-1)]);\n\t}\n\tif(M[mp(a+1,b-1)]&&check(a+1,b-1)){\n\t\tmaxi.push(M[mp(a+1,b-1)]);\n\t\tmini.push(M[mp(a+1,b-1)]);\n\t}\n\treturn;\n}\n\nsigned main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>x[i]>>y[i];\n\t\tM[mp(x[i],y[i])]=i;\t//\u7ef4\u62a4\u65b9\u5757\u7f16\u53f7\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(check(x[i],y[i])){\t//\u521d\u59cb\u53ef\u884c\u7684\u65b9\u5757\u5165\u5806\n\t\t\tmaxi.push(M[mp(x[i],y[i])]);\n\t\t\tmini.push(M[mp(x[i],y[i])]);\n\t\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(i%2){\t//\u5230 Vasya \u5c31\u4ece\u5927\u6839\u5806\u4e2d\u53d6\n\t\t\tans[i]=maxi.top();\n\t\t\tmaxi.pop();\n\t\t}\n\t\telse {\t//\u5230 Petya \u5c31\u4ece\u5c0f\u6839\u5806\u4e2d\u53d6\n\t\t\tans[i]=mini.top();\n\t\t\tmini.pop();\n\t\t}\n\t\tint t=ans[i];\n\t\tif(vis[t]||check(x[t],y[t])==0){\t//\u5982\u679c\u5df2\u88ab\u53d6\u51fa\u6216\u4e0d\u80fd\u53d6\uff0c\u8df3\u8fc7\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\t\tvis[t]=1;\t//\u6807\u8bb0\n\t\tM.erase(mp(x[t],y[t]));\t//\u5220\u9664\n\t\tupdate(x[t],y[t]);\n\t}\n\tint s=0,cj=1;\n\tfor(int i=n;i>=1;i--){\t//\u8fdb\u5236\u8f6c\u6362\n\t\ts=(s+(ans[i]-1)*cj%mod)%mod;\t//\u7f16\u53f7\u4e3a0\u5230n-1\uff0c\u6240\u4ee5ans[i]-1\n\t\tcj=cj*n%mod;\n\t}\n\tcout<<s;\n\treturn 0;\n}\n```\n",
        "postTime": 1606224902,
        "uid": 113202,
        "name": "\u6768\u6c0f\u4e4b\u5b50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF520D \u3010Cubes\u3011"
    }
]
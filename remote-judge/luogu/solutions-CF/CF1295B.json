[
    {
        "content": "#### \u9898\u76ee\u601d\u8def\n\n\u611f\u89c9\u8fd9\u9053\u9898\u6ca1\u6709\u9694\u58c1\u9898\u89e3\u8bf4\u7684\u90a3\u4e48\u590d\u6742...\n\n\u5bf9\u4e8e\u4e32 $s$, \u5148\u7b97\u51fa\u6765\u5b83\u524d\u7f00\u7684 balance, \u8bb0\u4f5c $A_i$, \u90a3\u4e48\u5bf9\u4e8e\u6837\u4f8b\u7684\u7b2c\u4e00\u79cd\u60c5\u51b5, \u6709\n\n| Pos | 0 | 1 | 2 | 3 | 4 | 5 | 6 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| s |  | 0 | 1 | 0 | 0 | 1 | 0 |\n| $A_i$ | 0 | 1 | 0 | 1 | 2 | 1 | 2 |\n\n\u6ce8\u610f\u5230\u8fd9\u91cc $s$ \u4e0b\u6807\u4ece $1$ \u5f00\u59cb, \u5e76\u4e14 $A_0$ \u503c\u6709\u610f\u4e49, \u4e3a\u53d6\u7a7a\u4e32\u7684\u60c5\u51b5.\n\n\u8003\u8651 $t$ \u7531 $s$ \u5faa\u73af\u5f97\u5230, \u53ef\u770b\u4f5c\u6570\u4e2a\u5b8c\u6574\u7684 $s$ \u548c\u96f6\u6563\u7684\u51e0\u4e2a\u4f4d\u7f6e\u62fc\u63a5\u800c\u6210, \u4e0d\u59a8\u8bb0 $A_n$ \u4e3a $p$, \u90a3\u4e48\u5bf9\u4e8e $t$ \u67d0\u4e00\u4e2a\u4f4d\u7f6e\u7684 balance \u53ef\u8bb0\u4f5c\n\n$$p \\cdot m + A_i$$\n\n\u5176\u4e2d $m$ \u4e3a\u5b8c\u6574\u5305\u542b $m$ \u4e2a $s$, \u4f59\u4e0b $i$ \u4e2a\u4f4d\u7f6e.\n\n\u8981\u7edf\u8ba1 balance \u4e3a $x$ \u7684\u6570\u91cf, \u5373\n\n$$p \\cdot m + A_i = x$$\n\n\u73b0\u5728\u6211\u4eec\u5206\u7c7b\u8ba8\u8bba\n\n- $p \\neq 0$\n$$m = \\dfrac{x - A_i}{p}$$\n\n  \u7edf\u8ba1 $(x - A_i)\\mod p = 0$ \u6570\u91cf\u5c31\u662f\u7b54\u6848.\n\n  \u6709\u4e24\u4e2a\u7ec6\u8282.\n  \n  1. $x = 0$, \u6b64\u65f6\u53d6\u7a7a\u4e32\u4e5f\u662f\u5408\u6cd5\u7684\u4e00\u79cd\u7b54\u6848.\n  \n  2. $x - A_i$ \u548c $p$ \u53ef\u80fd\u4e00\u6b63\u4e00\u8d1f, \u4f46\u662f\u53ea\u6709\u8fd9\u4e24\u6570\u6b63\u8d1f\u6027\u76f8\u540c\u7684\u65f6\u5019\u624d\u5bf9\u7b54\u6848\u6709\u8d21\u732e. \u4e5f\u5c31\u662f $p \\cdot (x - A_i) \\geq 0$ \u7684\u65f6\u5019.\n  \n- $p = 0$\n  \n  \u8003\u8651 $p = 0$ \u7684\u610f\u4e49, balance \u515c\u4e86\u4e00\u5708\u53c8\u56de\u6765\u4e86.\n  \n  \u6b64\u65f6\u5982\u679c\u5b58\u5728 $A_i = x$, \u90a3\u4e48\u5b58\u5728\u65e0\u9650\u4e2a\u7b54\u6848.\n  \n  \u5982\u679c\u4e0d\u5b58\u5728 $A_i = x$, \u90a3\u4e48\u4e0d\u5b58\u5728\u7b54\u6848.\n\n#### \u4ee3\u7801\u5b9e\u73b0\n\n\u5176\u5b9e\u633a\u597d\u5199\u7684, \u7ec6\u8282\u4e5f\u4e0d\u662f\u5f88\u591a.\n\n```cpp\n// B\n// DeP\n#include <cstdio>\n\nconst int MAXN = 1e5+5;\n\nint n, x;\nint A[MAXN];\nchar S[MAXN];\n\nint main() {\n#ifndef ONLINE_JUDGE\n    freopen(\"B.in\", \"r\", stdin);\n#endif\n    int Ti;\n    scanf(\"%d\", &Ti);\n    while (Ti--) {\n        scanf(\"%d%d%s\", &n, &x, S+1);\n        A[0] = 0;\n        for (int i = 1; i <= n; ++i) {\n            if (S[i] == '0') A[i] = A[i-1] + 1;\n            else A[i] = A[i-1] - 1;\n        }\n        int p = A[n];\n        if (!p) {\n            bool infty = false;\n            for (int i = 0; i <= n && !infty; ++i)\n                if (A[i] == x) infty = true;\n            puts(infty? \"-1\": \"0\");\n        } else {\n            int ans = x == 0;\n            for (int i = 1; i <= n; ++i)\n                if (1LL * (x-A[i]) * p >= 0 && (x - A[i]) % p == 0) ++ans;\n            printf(\"%d\\n\", ans);\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1580448597,
        "uid": 109751,
        "name": "DepletedPrism",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1295B \u3010Infinite Prefixes\u3011"
    },
    {
        "content": "\u9898\u76ee\u8868\u8fbe\u7684\u5f88\u96be\u770b\u61c2\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u7ed9\u4e00\u4e2a\u957f\u5ea6\u5df2\u77e5\u53ef\u4ee5\u65e0\u9650\u91cd\u590d\u7684\u5b57\u7b26\u4e32\uff0c\u53ea\u67090\u548c1\u4e24\u79cd\u5b57\u7b26\uff0c\u95ee\u6709\u51e0\u4e2a\u70b9\u53ef\u4ee5\u4f7f0\u6bd41\u591ax\u4e2a\u3002\n\n\u6bd4\u5982\u6837\u4f8b`1, 010010` 1\u4e2a\u5b50\u4e32\u4e2d0\u6bd41\u591a2\u4e2a\uff0c\u6240\u4ee5\u524d\u56db\u4e2a\u5b50\u4e32\u7ed3\u675f\u540e0\u4e00\u5171\u6bd41\u591a\u4e868\u4e2a\uff0c\u800c0\u6bd41\u591a10\u4e2a\u5c06\u5728\u4e0b\u4e00\u4e2a\u5b50\u4e32\u4e2d\u51fa\u73b0\uff0c\u4e5f\u5c31\u662f\u7b2c`28 30` \u548c`32`\u4f4d\u7684\u65f6\u5019\u3002\n\n\u7528\u4e00\u4e2a\u524d\u7f00\u548c`pre`\u6570\u7ec4\u6765\u8868\u793a\u5f53\u524d0\u548c1\u7684\u4e2a\u6570\u5dee\u503c\uff0c\u7136\u540e\u7279\u5224\u5373\u53ef\u3002\n\n\u5177\u4f53\u7684\u76f4\u63a5\u770b\u4ee3\u7801\u5c31\u597d\u3002\n\n\n```cpp\n#include<bits/stdc++.h>\n#define debug cout<<\"ok\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst int N=1e5+7;\nconst int mod=1e9+7;\nll n,x,t,pre[N];\nstring s;\nint main()\n{\n    ios::sync_with_stdio(false);\n    cin.tie(0),cout.tie(0);\n    cin>>t;\n    while(t--)\n    {\n        cin>>n>>x>>s;\n        ll ans=0;bool flag=0;pre[0]=0;\n        for(int i=0;i<s.length();i++)\n        {\n            if(s[i]=='0')pre[i+1]=pre[i]+1;//\u524d\u7f00\u548c\u6570\u7ec4\uff0cpre[i]\u8868\u793a0\u7684\u4e2a\u6570\u4e0e1\u7684\u4e2a\u6570\u7684\u5dee\u503c\n            else pre[i+1]=pre[i]-1;\n        }\n        ll date=pre[s.length()];\n        for(int i=0;i<=s.length();i++)//\u8981<=\u56e0\u4e3a\u770b\u8d70\u5b8c\u5982\u679c\u662f\u5426\u6ee1\u8db3\u9898\u610f\n        {\n            if(pre[i]==x)ans++;\n            if(pre[i]==x&&date==0)flag=1;\n            if(i!=0&&pre[i]<x&&date>0&&(x-pre[i])%date==0)ans++;\n            if(i!=0&&pre[i]>x&&date<0&&(pre[i]-x)%(-date)==0)ans++;\n        }\n        if(!flag)\n            cout<<ans<<endl;\n        else cout<<-1<<endl;\n    }\n    return 0;\n}\n\n```\n\n\n",
        "postTime": 1580375817,
        "uid": 262605,
        "name": "fanfansann",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1295B \u3010Infinite Prefixes\u3011"
    },
    {
        "content": "\u53c8\u4e00\u9053\u6f84\u78a7\u9898\u3002\n\n## \u601d\u8def\n\n\u4ee4 $pre_i$ \u8868\u793a\u4e00\u4e2a\u524d\u7f00\u548c\u3002\n\n\n\u5047\u8bbe\u5df2\u7ecf\u5faa\u73af\u4e86 $m$ \u6b21\uff0c\u5f53\u524d\u4f4d\u7f6e\u662f $i$\uff0c\u90a3\u4e48\u5f53\u524d\u7684\u548c\u5c31\u662f $m \\times pre_n + pre_i$\u3002\u6211\u4eec\u9700\u8981\u7b97\u51fa\u6240\u6709\u7684 $m \\times pre_n + pre_i = x$ \u7684\u60c5\u51b5\u3002\n\n\u663e\u7136\uff0c\u6700\u597d\u60f3\u7684\u5c31\u662f $pre_n = 0$ \u7684\u60c5\u51b5\u3002\u5982\u679c\u6709\u4efb\u610f\u4e00\u4e2a $pre_i = x$\uff0c\u90a3\u4e48\u5c31\u8f93\u51fa ```-1```\uff0c\u5426\u5219\u8f93\u51fa ```0```\u3002\n\n\u800c $pre_n \\neq 0$ \u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa $m$ \u7684\u53d6\u503c\uff1a\n\n$$m = \\frac{x-pre_i}{pre_n}$$ \n\n\u663e\u7136\uff0c\u6211\u4eec\u8981\u6c42\u51fa $m$ \u7684\u6240\u6709\u6b63\u6574\u6570\u89e3\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7edf\u8ba1$pre_n$ \u6574\u9664 $x-pre_i$ \u7684\u6570\u91cf\u5373\u53ef\u3002\n\n\u6700\u540e\u6ce8\u610f\u4e00\u4e0b $x=0$ \u7684\u65f6\u5019\uff0c\u7a7a\u4e32\u4e5f\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u663e\u7136\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nchar s[100005];\nint now[100005]; // \u524d\u7f00\u548c\nint main()\n{\n\tint T; scanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tint n,x; scanf(\"%d%d\",&n,&x);\n\t\tscanf(\"%s\",s+1);\n\t\tint ans,flag; ans=flag=(x==0); // \u7279\u5224\u4e00\u4e0b\u7a7a\u4e32\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tnow[i]=now[i-1];\n\t\t\tif(s[i]=='0') now[i]++;\n\t\t\telse now[i]--;\n\t\t\tif(now[i]==x) flag=1;\n\t\t}\n\t\tif(now[n]==0) // \u5373\u4e0a\u6587\u7684\u7279\u5224 pre[n]=0\n\t\t{\n\t\t\tif(flag) puts(\"-1\");\n\t\t\telse puts(\"0\");\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif((x-now[i])%now[n]==0 && 1ll*(x-now[i])*now[n]>=0) ans++; // \u7edf\u8ba1\u7b54\u6848\n\t\tprintf(\"%d\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1652665843,
        "uid": 195198,
        "name": "E1_de5truct0r",
        "ccfLevel": 7,
        "title": "CF1295B \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6211\u5c31\u60f3\u5230\u4e86\u524d\u7f00\u548c\uff0c\u5728 $0$ \u7684\u4f4d\u7f6e $+1$ \uff0c$1$ \u7684\u4f4d\u7f6e $-1$\uff0c\u8fd9\u91cc\u524d\u7f00\u548c\u6570\u7ec4\u8868\u793a\u4e3a $f[i]=\\sum _{j=1}^i a[j]$\n\n\u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5 $O(n)$ \u6c42\u51fa\u6bcf\u52a0\u5165\u4e00\u6b21 $s$ \u540e\u5bf9\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u8d21\u732e\uff0c\u4e5f\u5c31\u662f $f[n]$\n\n\u5982\u679c $f[n]=0$\uff0c\u90a3\u4e48\u8bf4\u660e\u6bcf\u4e2a $s$ \u90fd\u53ef\u4ee5\u88ab\u770b\u4f5c\u72ec\u7acb\u7684\uff0c\u5982\u679c\u4e00\u4e2a $s$ \u4e2d\u5b58\u5728\u7b26\u5408\u8981\u6c42\u7684\u524d\u7f00\uff0c\u90a3\u4e48\u4e0d\u7ba1\u52a0\u4e0a\u591a\u5c11\u4e2a $s$ \u90fd\u4f1a\u6709\u7b26\u5408\u8981\u6c42\u7684\u524d\u7f00\uff0c\u4e8e\u662f\u8f93\u51fa $-1$ \uff0c\u5982\u679c\u6ca1\u6709\u8f93\u51fa $0$\uff0c\u8fd9\u91cc $O(n)$ \u626b\n\n\u5982\u679c $f[n]>0$\uff0c\u90a3\u4e48\u8bf4\u660e\u6bcf\u52a0\u4e0a\u4e00\u4e2a $s$ \uff0c\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u5dee\u5206\u7684\u6700\u524d\u9762\u7684\u201c\u57fa\u51c6\u6570\u201d\u5c31\u88ab\u52a0\u4e0a\u4e86 $f[n]$ \uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u7b97\u51fa\u6bcf\u4e2a $f[i]$ \u5230 $x$ \u7684\u201c\u8ddd\u79bb\u201d\u662f\u4e0d\u662f $f[n]$ \u7684**\u6b63**\u6574\u6570\u500d\uff0c\u5982\u679c\u662f\uff0c\u90a3\u4e48\u7b54\u6848 $+1$\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u628a $i$ \u4ece $1$ \u5230 $n$ $for$\u4e00\u904d\uff0c\u78b0\u5230\u4e00\u4e2a $(x-f[i])\\%f[n]==0$ \u5c31\u628a\u7b54\u6848 $+1$\n\n\u4e5f\u662f $O(n)$ \u626b\n\n$f[n]<0$\uff0c\u7684\u60c5\u51b5\u7c7b\u4f3c $f[n]>0$\n\n\u6ce8\u610f\uff0c$x=0$ \u7684\u65f6\u5019\u8981\u8bb0\u5f97\u8fd8\u6709\u4e2a\u7a7a\u5b57\u7b26\u4e32\n\n\u4ee3\u7801\uff1a\n\n```cpp\n// This code wrote by chtholly_micromaker(MicroMaker)\n#include <bits/stdc++.h>\n#define reg register\nusing namespace std;\nconst int MaxN=100050;\ntemplate <class t> inline void read(t &s)\n{\n\ts=0;\n\treg int f=1;\n\treg char c=getchar();\n\twhile(!isdigit(c))\n\t{\n\t\tif(c=='-')\n\t\t\tf=-1;\n\t\tc=getchar();\n\t}\n\twhile(isdigit(c))\n\t\ts=(s<<3)+(s<<1)+(c^48),c=getchar();\n\ts*=f;\n\treturn;\n}\nchar s[MaxN];\nint f[MaxN];\ninline void work()\n{\n\tmemset(f,0,sizeof f);\n\treg int n,k;\n\tread(n);read(k);\n\tscanf(\"%s\",s+1);\n\tfor(int i=1;i<=n;++i)\n\t\tif(s[i]=='0')\n\t\t\tf[i]=f[i-1]+1;\n\t\telse\n\t\t\tf[i]=f[i-1]-1;\n\treg int ans=0;\n\tif(!k)\n\t\t++ans;\n\tif(!f[n])\n\t{\n\t\treg int sum=0;\n\t\tif(!k)\n\t\t{\n\t\t\tputs(\"-1\");\n\t\t\treturn;\n\t\t}\n\t\tfor(int i=1;i<=n;++i)\n\t\t{\n\t\t\tif(s[i]=='0')\n\t\t\t\t++sum;\n\t\t\telse\n\t\t\t\t--sum;\n\t\t\tif(sum==k)\n\t\t\t{\n\t\t\t\tputs(\"-1\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\",ans);\n\t\treturn;\n\t}\n\tif(f[n]>0)\n\t{\n\t\tfor(int i=1;i<=n;++i)\n\t\t{\n\t\t\tif(f[i]>k)\n\t\t\t\tcontinue;\n\t\t\tif(!((k-f[i])%f[n]))\n\t\t\t\t++ans;\n\t\t}\n\t\tprintf(\"%d\\n\",ans);\n\t\treturn;\n\t}\n\tif(f[n]<0)\n\t{\n\t\tfor(int i=1;i<=n;++i)\n\t\t{\n\t\t\tif(f[i]<k)\n\t\t\t\tcontinue;\n\t\t\tif(!((f[i]-k)%f[n]))\n\t\t\t\t++ans;\n\t\t}\n\t\tprintf(\"%d\\n\",ans);\n\t\treturn;\n\t}\n\tputs(\"\u73c2\u6735\u8389\u5929\u4e0b\u7b2c\u4e00\u53ef\u7231!\");\n\treturn;\n}\nsigned main(void)\n{\n\tint n;cin>>n;\n\twhile(n--)\n\t\twork();\n\treturn 0;\n}\n```",
        "postTime": 1580476529,
        "uid": 51376,
        "name": "MyukiyoMekya",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1295B \u3010Infinite Prefixes\u3011"
    }
]
[
    {
        "content": "## \u3010\u5206\u6790\u8fc7\u7a0b\u3011\n\n~~\u5f88\u6709\u610f\u601d\uff0c\u5f88\u6709\u610f\u601d~~\n\n\u9996\u5148\u7b80\u5355\u7684\u624b\u73a9\u4e00\u4e0b\u53d1\u73b0\u8d2a\u5fc3\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u8003\u8651\u52a8\u5f52\n\n\u663e\u7136**\u7b2c\u4e00\u7ef4\u662f\u6211\u4eec\u73b0\u5728\u5904\u7684\u4f4d\u7f6e**\uff0c\u770b\u770b\u7b2c\u4e8c\u7ef4\uff1a\n\n- \u5982\u679c\u6211\u4eec\u5c06\u4e0a\u4e00\u6b21\u8df3\u7684\u6b65\u6570 $c$ \u4f5c\u4e3a\u4e00\u4e2a\u72b6\u6001\u7ef4\uff0c\u90a3\u4e48\u8fd9\u4e00\u7ef4\u7684\u5927\u5c0f\u5c31\u662f$30000$\n\n$30000*30000$\u7684\u6570\u7ec4\u53ef\u4ee5MLE\u4e0a\u5929...\n\n\u8003\u8651\u4f18\u5316\n\n\u6211\u4eec\u53d1\u73b0\u8df3\u5b8c\u6bcf\u4e00\u6b21\u4e4b\u540e\u4e0b\u4e00\u6b21\u80fd\u8df3\u7684\u8ddd\u79bb\u662f\u80fd**\u786e\u5b9a**\u7684\uff0c\u5e76\u4e14\u8981\u4e48\u4e0d\u53d8\uff0c\u8981\u4e48+1\uff0c\u8981\u4e48-1\n\n\u6240\u4ee5\u8fd9\u91cc\u5bb9\u6613\u60f3\u5230\u628a\u53d8\u5316\u7684\u6b21\u6570\u4f5c\u4e3a\u4e00\u7ef4\uff0c\u53d8\u5316n\u6b21\u4e4b\u540e\u53ef\u4ee5\u8df3 $c+n-1$ ~ $c+n+1$ \u8ddd\u79bb\u8fdc\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u7b2c\u4e00\u6b65\u53ef\u4ee5\u8df3 $300$ \u8ddd\u79bb\uff0c\u90a3\u4e48\u53d8\u5316 $150$ \u6b21\u4e0b\u4e00\u6b21\u5c31\u662f\u8df3 $449$ ~ $451$ \u8ddd\u79bb\u8fdc\uff0c\u53d8\u5316 $-150$ \u6b21\u4e0b\u4e00\u6b21\u5c31\u662f $149$ ~ $151$ \u8ddd\u79bb\u8fdc\n\n\u624b\u7b97\u4e00\u4e0b\u53ef\u77e5\u6700\u591a\u53d8\u5316 $300$ \u591a\u6b21\uff0c\u6240\u4ee5\u6211\u4eec\u5f00 $650$ \u662f\u5b8c\u5168\u591f\u7528\u7684\n\n\u6240\u4ee5\u5f88\u5bb9\u6613\u5199\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a$f[i][o]=\\max(f[i][o],\\max(f[i-(m+o)][o],f[i-(m+o)][o-1],f[i-(m+o)][o+1])+v[i]);$\n\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#define N 30010\nusing namespace std;\nconst int df=320;\nint n,m,f[N][650],in,v[N],ans;\ninline int tm(int a,int b,int c) {return a>b?(a>c?a:c):(b>c?b:c);}\nsigned main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>in;\n\t\tv[in]+=1;\n\t}\n\tmemset(f,-0x3f,sizeof(f));\n\tans=f[m][df]=v[0]+v[m];\n\tfor(int i=m+1;i<=in;i++){\n\t\tfor(int o=-320;o<=320;o++){\n\t\t\tif(m+o>0&&m+o<=i) f[i][df+o]=max(f[i][df+o],tm(f[i-(m+o)][df+o],f[i-(m+o)][df+o-1],f[i-(m+o)][df+o+1])+v[i]);\n\t\t\tans=max(ans,f[i][df+o]);\n\t\t}\n\t}\n\tcout<<ans;\n}\n```\n\n\u6709\u4eba\u95ee\u4e0d\u662f\u6700\u591a\u53d8\u5316 $300$ \u591a\u6b21\u5417\uff0c\u4e3a\u4ec0\u4e48\u5982\u679c\u5c06\u4e0a\u4e00\u6b21\u8df3\u7684\u6b65\u6570 $c$ \u4f5c\u4e3a\u4e00\u4e2a\u72b6\u6001\u7ef4\uff0c\u8fd9\u4e00\u7ef4\u7684\u5927\u5c0f\u5c31\u662f$30000$\u5462\uff1f\n\n- \u7b54\uff1a\u8f93\u5165 $d$ \u7684\u65f6\u5019\u53ef\u6ca1\u5199\u5c0f\u4e8e $300$ \u554a\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u53d8\u5316\u6b21\u6570",
        "postTime": 1602250328,
        "uid": 215573,
        "name": "zythonc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF505C \u3010Mr. Kitayuta, the Treasure Hunter\u3011"
    },
    {
        "content": "CF505C Mr. Kitayuta, the Treasure Hunter \n\n\u9898\u610f\uff1a\n\n\u5728\u4e00\u4e2a\u6709n\u4e2a\u70b9\u7684\u5c9b\u5c7f\u4e0a\uff0c\u6709n\u4e2a\u70b9\u6709\u5b9d\u85cf\u3002\n\n\u73b0\u5728\u7ed9\u4f60\u4e00\u4e2ad\u3002\n\n\u5f00\u59cb\u4f60\u57280\n\n\u7b2c\u4e00\u6b65\uff0c\u4f60\u5c06\u8df3\u5230d\u5904\n\n\u4e4b\u540e\u4f60\u53ef\u4ee5\u9009\u62e9\u8df3c-1,c,c+1\u6b65(c\u4e3a\u4f60\u4e0a\u4e00\u6b65\u8df3\u7684\u6b65\u6570)\n\n\u6bcf\u8df3\u5230\u67d0\u5904\u53ef\u83b7\u5f97\u8be5\u5730\u5b9d\u85cf\n\n\u8be2\u95ee\u6700\u5927\u5b9d\u85cf\u6570\n\n\u8fd9\u4e2a\u9898\u5f53Div.1 A,\u73b0\u573a\u8dea\u4e86\u4e0d\u5c11\u4eba\uff0c\u5404\u79cd\u5927\u4f6c\uff0c\u795e\u7287\n\n\u89e3\u6790\uff1a\n\n\u5f88\u660e\u663e\u662f\u4e2aDP\n\nDp[i][j]\u8868\u793a\u5728i\uff0c\u4e0a\u4e00\u6b65\u8df3\u4e86c\u6b65\u7684\u6700\u5927\u503c\n\n\u4f46i<=30000,j<=30000\uff0c\u65f6\u7a7a\u4e00\u8d77\u70b8\uff0cHow to do it?\n\n\u8003\u8651\u4f18\u5316\uff1a\n\n\u56e0\u4e3a\u6bcf\u6b21\u6311\u4e00\u90e8c\u90fd\u53ea\u4f1a\u6539\u53d81\uff0c\u6240\u4ee5j\u6709\u5f88\u591a\u7a7a\u95f4\u6d6a\u8d39\n\ndp[i][j]\u8868\u793a\u5728i,\u4e0ed\u53d8\u5316\u4e86j\u7684\u6700\u5927\u503c\n\n\u901a\u8fc7\u7b49\u5dee\u6570\u5217\u6c42\u548c\uff0c\u53ef\u8f7b\u677e\u5f97\u77e5j\u6700\u591a\u53d8\u5316300\u6b21\n\n\u5219\u8fd9\u4e2a\u9898\u5c31\u53d8\u6210\u6c34\u9898\u4e86\u3002\u3002\u3002\n\n\u9012\u63a8\u7248\n```cpp\n#include <bits/stdc++.h>\nusing namespace std ;\nconst int inf=0x3f3f3f3f ;\nconst int D=400 ; \nconst int N=3e4 ;\nint cnt[N+10];\nint dp[N+10][2*D+10] ;\nint n,d,x,ans ;\nint main(){\n\tscanf(\"%d%d\",&n,&d) ;\n\tfor (int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&x);\n\t\tcnt[x]++ ;\n\t}\n\tfor (int i=0;i<=N;i++){\n\t\tfor (int j=-D;j<=D;j++)\n\t\tdp[i][j+D]=-inf ;\n\t}\n\tdp[d][D]=cnt[0]+cnt[d] ;\n\tfor (int i=d;i<=N;i++){\n\t\tfor (int j=-D;j<=D;j++){\n\t\t\tif (dp[i][j+D]==-inf){\n\t\t\t\tcontinue ;\n\t\t\t}\n\t\t\tfor (int z=-1;z<=1;z++){\n\t\t\t\tint len=j+d+z ;\n\t\t\t\tif (j+z < -D || j+z >D || len<1 || i+len>N) continue ;\n\t\t\t\tdp[i+len][j+z+D]=max(dp[i+len][j+z+D],dp[i][j+D]+cnt[i+len]) ;\n\t\t\t}\n\t\t}\n\t}\n\tans=0 ;\n\tfor (int i=0;i<=N;i++){\n\t\tfor (int j=-D;j<=D;j++){\n\t\t\tans=max(ans,dp[i][j+D]) ;\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans) ;\n\treturn 0 ;\n}\n```\n\n\u8bb0\u5fc6\u5316DP\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std ;\n#define N 30010\n#define M 610\nint s[N] ;\nint dp[N][M] ;//\u6eda\u52a8\u6570\u7ec4\n//dp[i][j]\u8868\u793a\u8df3\u5230i,d\u7684\u4f0f\u52a8\u8303\u56f4\u4e3aj-300\u7684\u6700\u5927\u5b9d\u85cf\u6570 \n//\u7b49\u5dee\u6570\u5217 \u544a\u8bc9\u6211\u4eec\u8fd9\u5927\u6982\u6700\u5927\u6709 sqrt(n)\u9879\u2248300 \nint n,d,x ;\nbool ok(int x,int c){ //\u662f\u5426\u8d8a\u754c \n\tint delta=d+c-300 ;\n\tif (delta<=0) return false ;\n\tif (delta+x>30000) return false ; \n\treturn true ;\n}\nint dfs(int x,int c){\n\tint &ret=dp[x][c] ;\n\tif (ret==-1){ //\u6ca1\u7b97\u8fc7 \n\t\tret=0;\n\t\tif (ok(x,c)) ret=max(ret,dfs(x+d+c-300,c)) ;\n\t\tif (ok(x,c-1)) ret=max(ret,dfs(x+d+c-1-300,c-1)) ;\n\t\tif (ok(x,c+1)) ret=max(ret,dfs(x+d+c+1-300,c+1)) ;\n\t\tret+=s[x] ;\n\t} \n\treturn ret ;\n} \nint main(){\n\tscanf(\"%d%d\",&n,&d);\n\tmemset(dp,-1,sizeof(dp)) ;//\u6e05\u96f6 \n\tfor (int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&x) ;\n\t\ts[x]++;//\u8be5\u70b9\u5b9d\u85cf\u6570 \n\t}\n\tprintf(\"%d\\n\",dfs(d,300)) ;//\u6eda\u52a8 \n} \n```\n",
        "postTime": 1531285407,
        "uid": 54900,
        "name": "__Hacheylight__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF505C \u3010Mr. Kitayuta, the Treasure Hunter\u3011"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a $n$ \u4e2a\u6709\u5b9d\u85cf\u7684\u70b9\u7684\u5750\u6807\u4ee5\u53ca\u7b2c\u4e00\u6b65\u7684\u53ef\u4ee5\u8d70\u7684\u957f\u5ea6 $d$\uff0c\u6c42\u6700\u591a\u53ef\u4ee5\u83b7\u5f97\u591a\u5c11\u5b9d\u85cf\u3002\uff08$n,d\\le 3 \\times 10^4$\uff0c\u5750\u6807 $\\le 3 \\times 10^4$\uff09\n\n-----\n\n\u9996\u5148\u7ed9\u4eba\u7684\u611f\u89c9\u662f\u4e00\u9053\u8d2a\u5fc3\u9898\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u4ec0\u4e48\u597d\u7684\u8d2a\u5fc3\u601d\u8def\u3002\u5bf9\u4e8e\u8fd9\u79cd\u6bcf\u4e00\u6b65\u51b3\u7b56\u90fd\u5bf9\u540e\u7eed\u51b3\u7b56\u6709\u5f71\u54cd\u7684\u9898\u76ee\u8003\u8651DP\uff0c\u9996\u5148\u8bbe $f_{i,j}$ \u4e3a\u8d70\u5230\u5750\u6807\u4e3a $i$\uff0c\u4e0a\u4e00\u6b65\u8d70\u7684\u957f\u5ea6\u4e3a $j$ \u83b7\u5f97\u7684\u5b9d\u85cf\u6570\u3002\u4e0d\u96be\u7ed9\u51fa\u65b9\u7a0b\u5f0f\uff1a\n$$\nf_{i + j,j} = \\max(f_{i,j},f_{i,j - 1},f_{i,j+1}) + cnt_{i+j}\n$$\n\u5176\u4e2d $cnt_i$ \u8868\u793a $i$ \u5750\u6807\u5904\u6709\u591a\u5c11\u5b9d\u85cf\u3002\n\n\u6ce8\u610f\u5230\u6570\u636e\u8303\u56f4\uff0c\u5982\u679c\u662f $O(n\\cdot d)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u5b9a\u8fc7\u4e0d\u53bb\uff0c\u6211\u4eec\u8003\u8651\u88c1\u526a\u65e0\u6548\u72b6\u6001\u3002\n\n\u6211\u4eec\u8003\u8651\u6709\u54ea\u4e9b\u72b6\u6001\u624d\u80fd\u88ab\u8f6c\u79fb\uff0c\u5047\u8bbe\u7b2c\u4e00\u6b21\u79fb\u52a8\u7684\u6b65\u6570\u4e3a $d$\uff0c\u6700\u7ec8\u7684\u79fb\u52a8\u6b65\u6570\u4e3a $d + \\lvert k\\rvert $\uff0c\u6839\u636e\u7b49\u5dee\u6570\u5217 $\\frac{(d + d + \\lvert k\\rvert) \\times (\\lvert k \\rvert + 1)}{2} \\le 3\\times 10^4$\uff0c\u89e3\u5f97 $\\lvert k \\rvert$ \u4e0d\u8d85\u8fc7 $400$\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5220\u53bb\u5927\u90e8\u5206\u65e0\u7528\u72b6\u6001\u3002\u65f6\u95f4\u548c\u7a7a\u95f4\u4e5f\u5c31\u90fd\u5728\u53ef\u63a5\u53d7\u8303\u56f4\u5185\u4e86\u3002\u8fd9\u9053\u9898\u672c\u8eab\u4e0d\u96be\uff0c\u4e3b\u8981\u662f\u5982\u4f55\u5224\u65ad\u54ea\u4e9b\u72b6\u6001\u65e0\u7528\u3002\n\n### Code\n\n\u5728\u4ee3\u7801\u4e2d\u8d34\u4e86\u8be6\u7ec6\u6ce8\u91ca\u3002\n\n```cpp\nconstexpr int N = 30005, D = 400;\nint n, d, cnt[N], f[N][(D << 1) + 10];\nint main() {\n    // read \u662f\u5feb\u8bfb\uff0c\u8fd9\u91cc\u4e0d\u7ed9\u51fa\u5b9e\u73b0\n    read(n), read(d);\n    for (int i = 1; i <= n; ++i) {\n        int pos;\n        read(pos);\n        ++cnt[pos];//\u7edf\u8ba1\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u5b9d\u85cf\u6570\u91cf\n    }\n    memset(f, -0x3f, sizeof(f));\n    f[d][D] = cnt[0] + cnt[d];//\u8003\u8651\u7b2c\u4e00\u6b65\u8d70 d \u6b65\uff0c\u4e8e\u662f\u521d\u59cb\u72b6\u6001\u76f4\u63a5\u8bbe\u7f6e\u5728 d \u4f4d\u7f6e\n    // \u6211\u4eec\u5c06 D \u770b\u4f5c\u96f6\u70b9\uff0c\u9632\u6b62\u51fa\u73b0\u8d1f\u4e0b\u6807\n    int ans = 0;\n    for (int i = d + 1; i <= 30000; ++i) {\n        for (int j = -D; j <= D; ++j) {\n            for (int k = -1; k <= 1; ++k) {\n                int step = j + d + k; // \u8fd9\u4e00\u6b65\u7684\u6b65\u957f\n                if (step < 1 || i + step > 30000 || j + k < -D || j + k > D)\n                    continue;\n                f[i + step][j + k + D] = max(f[i + step][j + k + D], f[i][j + D] + cnt[i + step]);//\u8fd9\u4e2adp\u5f0f\u5b50\u4e0e\u6734\u7d20\u7684dp\u5f0f\u5b50\u662f\u76f8\u540c\u7684\n            }\n            ans = max(ans, f[i][j + D]);\n        }\n    }\n    write(ans);\n    return 0;\n}\n```\n\n\n\n",
        "postTime": 1667701025,
        "uid": 218167,
        "name": "cheng_qi",
        "ccfLevel": 4,
        "title": "CF505C\u9898\u89e3"
    }
]
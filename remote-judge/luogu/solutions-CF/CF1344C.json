[
    {
        "content": "[$\\Huge\\texttt{In Cnblogs}$](https://www.cnblogs.com/Wendigo/p/12845268.html)\n\n---\n> [Quantifier Question](https://www.luogu.com.cn/problem/CF1344C)\n\n> \u6709\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $x\\{n\\}$\uff0c\u6709 $m$ \u4e2a\u6761\u4ef6 $(j_i,k_i)$\u3002\u6709 $n$ \u4e2a\u5f85\u5b9a\u7684\u6761\u4ef6\u7b26 $Q_i\\in\\{\\forall,\\exists\\}$\uff0c\u4f7f\n> $$Q_1x_1,Q_2x_2,...,Q_nx_n,(x_{j_1}<x_{k_1})\u2227(x_{j_2}<x_{k_2})\u2227\\cdots\u2227(x_{j_m}<x_{k_m})$$\n> \u6c42 $\\forall$ \u6700\u591a\u7684\u65b9\u6848\u3002\u5982\u679c\u6ca1\u6709\u6ee1\u8db3\u65b9\u6848\uff0c\u8f93\u51fa $-1$\u3002\u5426\u5219\u8f93\u51fa $\\forall$ \u7684\u6570\u91cf\u53ca\u6574\u4e2a\u6761\u4ef6\u7b26\u4e32\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$2\\le n\\le 2\\cdot 10^5$\uff0c$1\\le m\\le 2\\cdot 10^5$\uff0c$1\\le j_i,k_i\\le n,j_i\\not=k_i$\u3002\n\n---\n**\u4e00\u53e5\u8bdd\u9898\u89e3\uff1a\u62d3\u6251\u6392\u5e8f\uff0c\u6709\u73af\u8f93\u51fa $-1$\uff0c\u5426\u5219\u5c06\u6bcf\u4e2a\u4e0d\u88ab\u524d\u540e\u8282\u70b9\u5f71\u54cd\u7684\u8282\u70b9\u7f6e\u4e3a $\\forall$\u3002**\n\n---\n\u9996\u5148\u7406\u89e3\u4e00\u4e0b\uff0c\u4e0d\u540c\u5e8f\u53f7\u7684 $Q_i$ \u662f**\u6709\u987a\u5e8f\u7684**\uff0c\u4e0d\u662f**\u5e73\u7b49\u7684**\u3002\u5982 **$x_1<x_2$\uff0c$x_1<x_3$\uff0c\u4ee4 $Q_1=\\exists,Q_2=\\forall,Q_3=\\forall$ \u662f\u4e0d\u53ef\u4ee5\u7684\uff08\u5982\u9009\u5b9a $x_1$ \u540e\u53d6 $x_2=x_1-1$ \u5c31\u7206\u4e86\uff09\uff1b\u4f46\u662f\u5982\u679c $x_3<x_1,x_3<x_2$\uff0c\u4ee4 $Q_1=\\exists,Q_2=\\forall,Q_3=\\forall$ \u662f\u53ef\u4ee5\u7684**\u3002\n\n\u5148\u7528**\u5dee\u5206\u7ea6\u675f**\u7684\u601d\u60f3\uff0c\u628a\u6761\u4ef6\u8f6c\u5316\u4e3a\u8fb9\uff0c\u5373\u8fde $j_i\\to k_i$\u3002\u7136\u540e**\u62d3\u6251\u6392\u5e8f**\u3002\u5982\u679c\u62d3\u6251\u6392\u5e8f\u5e8f\u5217\u957f\u5ea6 $<n$\uff0c\u8bf4\u660e**\u6709\u73af**\uff0c\u65e0\u89e3\uff0c\u8f93\u51fa $-1$\u3002\u5426\u5219\u5b58\u4e0b\u8fd9\u4e2a\u62d3\u6251\u5e8f\u5217\u3002\n\n\u8bbe $u<v$\uff0c\u56e0\u4e3a\u5148\u53d1\u6325 $u$ \u7684\u6761\u4ef6\u7b26\u518d\u53d1\u6325 $v$ \u7684\u6761\u4ef6\u7b26\u3002\u6240\u4ee5\u5982\u679c $u$ \u53ef\u4ee5\u8d70\u5230 $v$ \u6216\u8005 $v$ \u53ef\u4ee5\u8d70\u5230 $u$\uff0c\u90a3\u4e48 $v$ \u70b9\u5c31\u4e0d\u80fd\u9009 $\\forall$ \u4e86\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u5bf9\u4e8e $v$\uff0c\u4e0d\u5b58\u5728 $u<v$ \u53ef\u4ee5\u8d70\u5230\u5b83\u6216\u88ab\u5b83\u8d70\u5230\uff0c\u8fd9\u6837\u7684\u8282\u70b9\u6761\u4ef6\u7b26\u9009 $\\forall$ \u662f\u6700\u4f18\u4e14\u6ca1\u6709\u540e\u6548\u6027\u7684\u3002\n\n\u7136\u540e\u7528\u7c7b\u4f3c $\\texttt{dp}$ \u7684\u65b9\u6cd5\uff0c\u6c42\u51fa\u6bcf\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u524d\u9a71\uff08\u53ef\u4ee5\u8d70\u5230\u5b83\uff09\u548c\u6700\u5c0f\u540e\u7ee7\uff08\u5b83\u53ef\u4ee5\u8d70\u5230\uff09\uff0c\u7136\u540e\u5982\u679c**\u6700\u5c0f\u524d\u9a71\u548c\u6700\u5c0f\u540e\u7ee7\u90fd\u4e0d\u5c0f\u4e8e\u8be5\u8282\u70b9\u7f16\u53f7**\uff0c\u90a3\u4e48\u8be5\u8282\u70b9\u7684\u6761\u4ef6\u7b26\u9009 $\\forall$\u3002\n\n---\n**\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n+m)$\u3002**\n\n---\n**\u4ee3\u7801\uff1a**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n//Start\ntypedef long long ll;\ntypedef double db;\n#define mp(a,b) make_pair(a,b)\n#define x(a) a.first\n#define y(a) a.second\n#define b(a) a.begin()\n#define e(a) a.end()\n#define sz(a) int((a).size())\n#define pb(a) push_back(a)\nconst int inf=0x3f3f3f3f;\nconst ll INF=0x3f3f3f3f3f3f3f3f;\n\n//Data\nconst int N=2e5;\nint n,m,d[N+7],f[N+7],b[N+7],sm,ans[N+7];\nvector<int> e[N+7],g[N+7];\n\n//Bfs\nint Bfs(vector<int>&q){ //\u5c31\u662f\u62d3\u6251\u6392\u5e8f\n\t//\u5c06\u56fe\u7684\u62d3\u6251\u5e8f\u5b58\u5165q\uff0c\u5982\u679c\u5f62\u6210\u4e86\u73af\u5c31\u8fd4\u56de0\u3002\n\tq.clear();\n\tfor(int i=1;i<=n;i++)if(!d[i]) q.pb(i);\n\tfor(int i=0;i<sz(q);i++)\n\t\tfor(int to:e[q[i]])if(!--d[to]) q.pb(to);\n\treturn sz(q)==n;\n}\n\n//Main\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1,u,v;i<=m;i++) scanf(\"%d%d\",&u,&v),e[u].pb(v),g[v].pb(u);\n\tfor(int i=1;i<=n;i++) d[i]=sz(g[i]); //d\u4e3a\u5165\u5ea6\n\tvector<int> tp;\n\tif(!Bfs(tp)) return puts(\"-1\"),0;\n\tiota(f+1,f+n+1,1),iota(b+1,b+n+1,1); //\u5c06fi:=i,bi:=i\u3002\n\tfor(int i=0;i<=sz(tp)-1;i++)\n\t\tfor(int to:g[tp[i]]) f[tp[i]]=min(f[tp[i]],f[to]); //\u6700\u5c0f\u524d\u9a71\n\tfor(int i=sz(tp)-1;i>=0;i--)\n\t\tfor(int to:e[tp[i]]) b[tp[i]]=min(b[tp[i]],b[to]); //\u6700\u5c0f\u540e\u7ee7\n\tfor(int i=1;i<=n;i++)if(min(f[i],b[i])==i) sm++,ans[i]=1; //\u8bb2\u89e3\u4e2d\u8bf4\u4e86\n\tprintf(\"%d\\n\",sm);\n\tfor(int i=1;i<=n;i++) putchar(\"EA\"[ans[i]]);puts(\"\");\n\treturn 0;\n}\n```\n---\n**\u795d\u5927\u5bb6\u5b66\u4e60\u6109\u5feb\uff01**",
        "postTime": 1588922301,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "\u672c\u9898\u7684\u96be\u70b9\u5728\u4e8e\u770b\u61c2\u9898\u610f\u3002\n\n\u9898\u610f\u641e\u61c2\u4e4b\u540e\uff0c\u4f1a\u81ea\u7136\u7684\u60f3\u5230\u8fde\u8fb9\uff0c\u6709\u73af\u5219\u975e\u6cd5\uff0c\u5426\u5219\u95ee\u9898\u5373\u7ed9\u5b9a\u4e00\u5f20 $\\rm DAG$\uff0c\u7136\u540e\u95ee\u9898\u7b49\u4ef7\u4e8e\u6309\u7167\u987a\u5e8f\u4ece $1\\to n$ \u52a0\u70b9\uff0c\u7136\u540e\u6bcf\u6b21\u52a0\u70b9\u4e4b\u540e\u5982\u679c\u8fd9\u4e2a\u70b9\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\u5219\u6807\u8bb0\u5176\uff0c\u7136\u540e\u5c06\u80fd\u591f\u8bbf\u95ee\u5230\u5b83\u7684\u70b9\u4ee5\u53ca\u80fd\u88ab\u5b83\u8bbf\u95ee\u7684\u70b9\u5220\u9664\u3002\n\n\u5728\u6b63\u5411 DAG \u548c\u53cd\u5411 DAG \u5206\u522b dp \u51fa\u8fd9\u4e2a\u70b9\u80fd\u591f\u5230\u8fbe\u7684\u70b9\u4e2d\u7f16\u53f7\u6700\u5c0f\u503c\u5373\u53ef\uff0c\u82e5\u4e3a\u672c\u8eab\u5219\u610f\u5473\u7740\u8fd9\u4e2a\u70b9\u65e0\u6cd5\u88ab\u5220\u9664\u3002\n\n$Code:$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std ;\n#define Next( i, x ) for( register int i = head[x]; i; i = e[i].next )\n#define rep( i, s, t ) for( register int i = (s); i <= (t); ++ i )\n#define drep( i, s, t ) for( register int i = (t); i >= (s); -- i )\n#define re register\nint gi() {\n\tchar cc = getchar() ; int cn = 0, flus = 1 ;\n\twhile( cc < '0' || cc > '9' ) {  if( cc == '-' ) flus = - flus ; cc = getchar() ; }\n\twhile( cc >= '0' && cc <= '9' )  cn = cn * 10 + cc - '0', cc = getchar() ;\n\treturn cn * flus ;\n}\nconst int N = 2e5 + 5 ; \nint n, m, dp[N], dp2[N], deg[N], vis[N] ; \nvector<int> G[N], e[N] ; \nvoid add( int x, int y ) {\n\tG[x].push_back(y), e[y].push_back(x) ; \n}\nqueue<int> q ; \nsigned main()\n{\n\tn = gi(), m = gi() ; int x, y ; \n\trep( i, 1, m ) x = gi(), y = gi(), add( y, x ) ; \n\trep( i, 1, n ) {\n\t\tfor( int j : G[i] ) ++ deg[i] ;\n\t\tif( !deg[i] ) q.push(i) ; \n\t}\n\trep( i, 1, n ) dp[i] = i ;\n\twhile( !q.empty() ) {\n\t\tint u = q.front() ; q.pop(), vis[u] = 1 ;  \n\t\tfor( int j : e[u] ) {\n\t\t\tdp[j] = min( dp[j], dp[u] ), -- deg[j] ;\n\t\t\tif( !deg[j] ) q.push(j) ; \n\t\t}\n\t}\n\tint flag = 0 ; \n\trep( i, 1, n ) if( !vis[i] ) flag = 1 ;\n\tif( flag ) {\n\t\tputs(\"-1\") ; exit(0) ; \n\t}\n\trep( i, 1, n ) {\n\t\tfor( int j : e[i] ) ++ deg[i] ;\n\t\tif( !deg[i] ) q.push(i) ;\n\t} \n\trep( i, 1, n ) dp2[i] = i ;\n\twhile( !q.empty() ) {\n\t\tint u = q.front() ; q.pop() ;\n\t\tfor( int j : G[u] ) {\n\t\t\tdp2[j] = min( dp2[j], dp2[u] ), -- deg[j] ;\n\t\t\tif( !deg[j] ) q.push(j) ;\n\t\t}\n\t}\n\tflag = 0 ;\n\trep( i, 1, n ) {\n\t\tif( min( dp[i], dp2[i] ) == i ) ++ flag ; \n\t}\n\tcout << flag << endl ; \n\trep( i, 1, n ) \n\tif( min( dp[i], dp2[i] ) == i ) printf(\"A\") ;\n\telse printf(\"E\") ; \n\treturn 0 ;\n}\n```",
        "postTime": 1588988839,
        "uid": 30036,
        "name": "Soulist",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "\u6211\u6765\u53d1\u4e2a\u5b8c\u6574\u7684\u505a\u9898\u601d\u8def\u5427QWQ\n\n\u9996\u5148\u770b\u5230\u4e0d\u7b49\u5f0f\u53ef\u4ee5\u60f3\u5230\u5b83\u662f\u6709**\u4f20\u9012\u6027**\u7684\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u7528\u6709\u5411\u8fb9\u63cf\u8ff0\u8fd9\u79cd\u5173\u7cfb\uff08\u800c\u975e\u679a\u4e3e\uff09\u3002\n\n\u4f46\u4e3a\u4ec0\u4e48\u8981\u7528\u6709\u5411\u8fb9\uff0c\u6216\u8005\u8fde\u8fb9\u7684\u65b9\u5411\u5982\u4f55\u5224\u65ad\u5462\uff1f\u8003\u8651 $a<b>c$\uff0c\u6211\u4eec\u80fd\u786e\u5b9a $a, b; a, c$ \u7684\u5173\u7cfb $a<b, c<b$\uff0c\u4f46\u6211\u4eec\u4e0d\u80fd\u786e\u5b9a $a, c$ \u7684\u5173\u7cfb\uff0c\u56e0\u6b64\u662f\u4e0d\u80fd\u7528\u65e0\u5411\u8fb9\u7684\uff1b\u800c\u7531\u4e8e\u4e0d\u7b49\u5f0f\u7684\u5bf9\u79f0\u6027\uff0c\u5b9e\u9645\u4e0a\u6b63\u53cd\u8fde\u8fb9\u90fd\u662f\u53ef\u884c\u7684\uff0c\u4f46\u56e0\u4e3a\u904d\u5386\u65f6\u9700\u8981**\u6309\u540c\u4e00\u4e2a\u4e0d\u7b49\u53f7\u904d\u5386**\uff08\u907f\u514d\u51fa\u73b0\u4e0a\u8ff0\u60c5\u51b5\uff09\uff0c\u6240\u4ee5\u8fde\u8fb9\u65f6\u4e0d\u8bba\u6b63\u53cd\uff0c\u6240\u6709\u8fb9\u7684 \"\u4e0d\u7b49\u5f0f\u65b9\u5411\" \u5fc5\u987b\u7edf\u4e00\uff08\u5747\u662f\u6309 $a<b$ : $a$ -> $b$ \u6216 $a>b$ : $a$ -> $b$ \u8fde\uff09\u3002\n\n\u8003\u8651\u5982\u4f55\u6709\u89e3\uff0c\u53ef\u4ee5\u53d1\u73b0\u53ea\u8981\u6784\u9020\u5168\u90e8\u5143\u7d20\uff08$\\exists$\uff09\u5c31\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u4e0d\u7b49\u5f0f\u6210\u7acb\uff0c\u4f46\u552f\u4e00\u4f8b\u5916\u662f\u7c7b\u4f3c $a<b<a$\uff0c\u4ece\u5b83\u53ef\u4ee5\u5f97\u5230 $a<a$\uff0c\u8fd9\u662f\u663e\u7136\u4e0d\u6210\u7acb\u7684\uff1b\u5bf9\u5e94\u5230\u6709\u5411\u56fe\u4e2d\uff0c\u8fd9\u6bb5\u8def\u5f84\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u73af\uff0c**\u56e0\u6b64\u53ea\u8981\u5728\u627e\u5230\u73af\u65f6\u5224 `\"-1\"` \u5373\u53ef**\u3002\n\n\u63a5\u7740\u8003\u8651\u5982\u4f55\u653e\u8fdb\u66f4\u591a\u7684 `\"A\"`\u3002\u6709\u4e00\u4e2a\u9700\u8981\u8bf4\u660e\u7684\u4e8b\u662f\uff1a\uff08\u4ece\u9898\u610f\u53ef\u5f97\uff09**\u8fd9\u51e0\u4e2a\u5143\u7d20\u7684\u786e\u5b9a\u662f\u6709\u987a\u5e8f\u7684**\u3002\n\n\uff08\u4e0b\u9762\u4f1a\u9ed8\u8ba4\u7528 $a<b$ : $a$ -> $b$ \u7684\u65b9\u5f0f\u8fde\u8fb9\uff09\n\n1. \u8bbe $x_k<x_{k'}, k'>k$\uff0c\u7531\u4e8e $x_k$ \u5148\u786e\u5b9a\uff0c\u8fd9\u65f6\u5019\u663e\u7136 $x_{k'}$ \u53ea\u53ef\u53d6 `\"E\"`\u3002\n\n2. \u8bbe $x_{k'}<x_k, k'>k$\uff0c\u7531\u4e8e $x_k$ \u5148\u786e\u5b9a\uff0c\u8fd9\u65f6\u5019 $x_{k'}$ \u4e5f\u53ea\u53ef\u53d6 `\"E\"`\u3002\n\n\u518d\u7ed3\u5408**\u4e0d\u7b49\u5f0f\u7684\u4f20\u9012\u6027**\uff0c\u663e\u7136\u82e5\u4e00\u4e2a\u70b9\u5728\u56fe\u4e2d\u7684**\u6240\u6709\u53ef\u4ee5\u5230\u8fbe\u8fd9\u4e2a\u70b9\u7684\u70b9**\u4ee5\u53ca**\u6240\u6709\u53ef\u4ee5\u5230\u8fbe\u7684\u70b9**\u7684\u7f16\u53f7\u5747\u5927\u4e8e\u5b83\uff0c\u8fd9\u4e2a\u70b9\u5c31\u53ef\u4ee5\u4e0d\u53d6 `\"E\"`\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u53ef\u4ee5\u53d6 `\"A\"`\u3002\n\n\u7531\u4e8e\u540c\u65f6\u9700\u8981 \"\u524d\u9a71\" \u548c \"\u540e\u7ee7\"\uff08~~\u4e0d\u592a\u6807\u51c6\u4f46\u8fd9\u6837\u5199\u6bd4\u8f83\u77ed...~~\uff09\u6ee1\u8db3\u6761\u4ef6\uff0c\u8fde\u8fb9\u7684\u65b9\u5411\u5b9e\u9645\u4e0a\u5bf9\u7ed3\u679c\u6ca1\u6709\u5f71\u54cd\uff0c\u56e0\u6b64\u5e94\u8be5\u53ef\u4ee5\u53d1\u73b0\u65b9\u6848\u662f\u552f\u4e00\u7684\u3002\n\n\u5b9e\u73b0\u7684\u8bdd\u904d\u5386\u5224\u4e00\u6b21\u73af\uff0c\u518d\u904d\u5386\u62d3\u8865\u6392\u5e8f\u5f97\u5230\u7684\u5e8f\u5217\u7c7b\u4f3cdp\u5730\u6c42\u4e00\u4e0b\uff08\u6b63\u7740\u904d\u5386\u4e00\u6b21\u53cd\u7740\u904d\u5386\u4e00\u6b21\uff09 \"\u524d\u9a71\"\u3001\"\u540e\u7ee7\" \u7684\u6700\u5c0f\u7f16\u53f7\u7b54\u6848\u5c31\u51fa\u6765\u4e86\u3002\n\n# CODE\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <vector>\n#include <queue>\n#define IT vector<int>::iterator\nusing std::vector;\nusing std::queue;\nusing std::min;\n\nconst int MAXN =2e5+50;\n\nint n, m;\nint in[MAXN], minpre[MAXN], minpost[MAXN];\nvector<int> to[MAXN], from[MAXN];\n\ninline int read(){\n\tint x =0; char c =getchar();\n\twhile(c < '0' || c > '9') c =getchar();\n\twhile(c >= '0' && c <= '9') x = (x<<3) + (x<<1) + (48^c), c =getchar();\n\treturn x;\n}\n\nbool vis[MAXN], isA[MAXN]/*\u8fd9\u4e2a\u6570\u7ec4\u5176\u5b9e\u53ef\u4ee5\u4e0d\u8981*/;\nvector<int> Sort;\n\ninline void topo(){\n\tqueue<int> q, ss;\n\tfor(int i =1; i <= n; ++i) if(!in[i]) q.push(i);\n\twhile(!q.empty()){\n\t\tint nw =q.front();\n\t\tq.pop();\n\t\tif(vis[nw]) continue;\n\t\tvis[nw] =1;\n\t\t/*\u8bdd\u8bf4 c++11\u53ef\u4ee5\u5199:for(int i:to[nw])\u904d\u5386 vector\u5143\u7d20\u5f15\u7528*/\n\t\tfor(IT it =to[nw].begin(); it != to[nw].end(); ++it)\n\t\t\tif(--in[*it] == 0) q.push(*it);\n\t\tSort.push_back(nw);\n\t}\n\tif((int)Sort.size() < n) printf(\"-1\"), exit(0);/*\u62d3\u8865\u5224\u73af*/\n}\n\nint main(){\n\tn =read(), m =read();\n\tfor(int i =0; i < m; ++i){\n\t\tint x =read(), y =read();\n\t\tto[x].push_back(y);\n\t\tfrom[y].push_back(x);\n\t\t++in[y];\n\t}\n\ttopo();\n\tfor(int i =1; i <= n; ++i) minpre[i] =minpost[i] =i;\n\tfor(IT it =Sort.begin(); it != Sort.end(); ++it) for(IT it2 =from[*it].begin(); it2 != from[*it].end(); ++it2)\n\t\tminpre[*it] =min(minpre[*it], minpre[*it2]);\n\tfor(IT it =Sort.end(); it != Sort.begin(); --it){\n\t\tIT it3 =it; --it3;/*\u7b28\u62d9\u7684\u904d\u5386\u65b9\u6cd5*/\n\t\tfor(IT it2 =to[*it3].begin(); it2 != to[*it3].end(); ++it2)\n\t\t\tminpost[*it3] =min(minpost[*it3], minpost[*it2]);\n\t}\n\tint ans =0;\n\tfor(int i =1; i <= n; ++i) if(min(minpre[i], minpost[i]) ==/*>=*/ i) isA[i] =1, ++ans;\n\tprintf(\"%d\\n\", ans);\n\tfor(int i =1; i <= n; ++i) if(isA[i]) putchar('A'); else putchar('E');\n}\n```\n",
        "postTime": 1590720028,
        "uid": 105254,
        "name": "Piwry",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "# \u9898\u76ee\u5206\u6790\n\u5efa\u56fe+\u62d3\u6251\u6392\u5e8f+dfs  \n\u5148\u8003\u8651-1\u7684\u60c5\u51b5\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u4e00\u5b9a\u4e0d\u53ef\u4ee5\uff0c\u5426\u5219\u5c31\u4e00\u5b9a\u53ef\u4ee5\uff0c\u5224\u73af\u53ef\u4ee5\u7528\u62d3\u6251\u6392\u5e8f\u3002  \n\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c $X_i>X_j$ \u6216 $X_i<X_j(i<j)$ \u90a3\u4e48 $Q_j$ \u4e00\u5b9a\u662fE\u3002  \n\u6240\u4ee5\u6211\u4eec\u5efa\u4e24\u4e2a\u56fe\uff0c\u4e00\u4e2a\u56fe\u5b58\u6b63\u8fb9\uff0c\u4e00\u4e2a\u56fe\u5b58\u53cd\u8fb9\u3002\u7136\u540e\u4ece1\u626b\u5230 $n$\uff0c\u5bf9\u4e8e\u5f53\u524d\u7684\u70b9 $i$\uff0c\u6211\u4eec\u5728\u6b63\u53cd\u56fe\u4e0a\u90fd\u8fdb\u884c\u4e00\u6b21dfs\uff0c\u628a\u904d\u5386\u5230\u7684\u70b9\u90fd\u6807\u8bb0\u6389\u3002\u5982\u679c\u70b9 $i$ \u6ca1\u6709\u88ab\u6807\u8bb0\uff0c\u90a3\u4e48 $Q_i$ \u5c31\u53ef\u4ee5\u662fA\u3002  \n\u6700\u540e\u8f93\u51fa\u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(N)$\u3002\n``` cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 200005\nint n,m,ans,head1[N],head2[N],cnt1,cnt2,rd1[N],q[N],l=1,r,s,mi[N],ma[N];\nint c[N],vis1[N],vis2[N];\nstruct sb//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\n{\n\tint a,b;\n}e1[N],e2[N];\ninline void add1(int a,int b)\n{\n\te1[++cnt1].a=head1[a],e1[cnt1].b=b,head1[a]=cnt1;\n}\ninline void add2(int a,int b)\n{\n\te2[++cnt2].a=head2[a],e2[cnt2].b=b,head2[a]=cnt2;\n}\ninline void dfs1(int x)//\u6b63\u56fe\u4e0adfs\n{\n\tvis1[x]=1;\n\tfor(int i=head1[x];i;i=e1[i].a)\n\t{\n\t\tif(vis1[e1[i].b])continue;\n\t\tdfs1(e1[i].b);\n\t}\n}\ninline void dfs2(int x)//\u53cd\u56fe\u4e0adfs\n{\n\tvis2[x]=1;\n\tfor(int i=head2[x];i;i=e2[i].a)\n\t{\n\t\tif(vis2[e2[i].b])continue;\n\t\tdfs2(e2[i].b);\n\t}\n}\nsigned main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1,a,b;i<=m;i++)scanf(\"%d%d\",&a,&b),add1(a,b),add2(b,a),++rd1[b];//\u5efa\u6b63\u53cd\u56fe\n\tfor(int i=1;i<=n;i++)//\u62d3\u6251\u6392\u5e8f\n\t{\n\t\tma[i]=i;\n\t\tif(rd1[i])continue;\n\t\tq[++r]=i;\n\t}\n\twhile(l<=r)\n\t{\n\t\t++s;\n\t\tint x=q[l++];\n\t\tfor(int i=head1[x];i;i=e1[i].a)\n\t\t{\n\t\t\tma[e1[i].b]=min(ma[e1[i].b],ma[x]);\n\t\t\t--rd1[e1[i].b];\n\t\t\tif(rd1[e1[i].b]==0)q[++r]=e1[i].b;\n\t\t}\n\t}\n\tif(s!=n){printf(\"-1\");return 0;}//-1\u7684\u60c5\u51b5\n\tfor(int i=1;i<=n;i++)//\u4ece1\u626b\u5230n\n\t{\n\t\tif(!vis1[i] && !vis2[i])++ans,c[i]=1;//\u7edf\u8ba1\u7b54\u6848\n\t\tdfs1(i),dfs2(i);//\u904d\u5386\n\t}\n\tprintf(\"%d\\n\",ans);\n\tfor(int i=1;i<=n;i++)if(c[i])printf(\"A\");else printf(\"E\");\n\treturn 0;\n}\n```",
        "postTime": 1589107036,
        "uid": 60075,
        "name": "pzc2004",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "# \u592a\u68d2\u4e86\u2193\n\n[\u8d85\u8d85\u8d85\u8d85\u8d85\u8d85\u8d85\u8d85\u8d85\u723d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/dysyn1314/p/13388056.html)\n\n\u9996\u5148\uff0c\u56e0\u4e3a\u5c0f\u4e8e\u7684\u5173\u7cfb\u662f**\u53ef\u4f20\u9012**\u7684\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4e00\u7ec4\u9650\u5236$(j_i,k_i)$\uff0c\u6211\u4eec\u8003\u8651\u8fde\u4e00\u6761\u6709\u5411\u8fb9$j_i\\to k_i$\u3002\u8fd9\u6837\u80fd\u5efa\u51fa\u4e00\u4e2a\u56fe\u3002\u663e\u7136\u3002\u5982\u679c\u56fe\u4e0a\u6709\u73af\uff0c\u80af\u5b9a\u65e0\u89e3\uff0c\u7b54\u6848\u662f$-1$\u3002\u800c\u53ea\u8981\u56fe\u4e0a\u6ca1\u6709\u73af\uff0c\u90a3\u4e48\u4e00\u5b9a\u6709\u89e3\uff0c\u56e0\u4e3a\u81f3\u5c11\u5168\u586b$\\exist$\u7684\u65f6\u5019\u662f\u6210\u7acb\u7684\u3002\u6240\u4ee5\u4ee5\u4e0b\u53ea\u8003\u8651\u4e00\u4e2aDAG\u7684\u60c5\u51b5\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u8981\u8ba9$\\forall$\u5c3d\u53ef\u80fd\u591a\u3002\u8fd9\u5c31\u9700\u8981\u4f60\u7ec6\u7ec6\u5730\u54c1\u8fd9\u4e2a\u5173\u7cfb\u4e86\u3002\n\n\u4f60\u4f1a\u53d1\u73b0\uff0c\u6bcf\u4e2a$Q_i$\uff0c\u4e0d\u662f\u5e73\u7b49\u7684\u3002\u4f8b\u5982\uff0c\u5982\u679c\u662f$x_1<x_2,x_3<x_2$\uff0c\u7b54\u6848\u5c31\u662f$Q_1=\\forall,Q_2=\\exist,Q_3=\\exist$\u3002\u4f46\u5982\u679c\u662f$x_1<x_3,x_2<x_3$\uff0c\u7b54\u6848\u5c31\u53ef\u4ee5\u53d8\u6210$Q_1=\\forall,Q_2=\\forall,Q_3=\\exist$\u3002\uff08\u5907\u6ce8\uff1a\u8fd9\u4e2a\u4f8b\u5b50\u5176\u5b9e\u5c31\u662f\u6837\u4f8b3\uff09\u3002\u4f60\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u4e24\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u7ed3\u6784\u91cc\uff0c\u4ec5\u4ec5\u662f\u7f16\u53f7\u4e0d\u540c\uff08$2$\u548c$3$\u4ea4\u6362\u4e86\uff09\uff0c\u5c31\u53ef\u4ee5\u6539\u53d8$\\forall$\u7684\u6570\u91cf\uff0c\u6240\u4ee5\u4ece\u524d\u5f80\u540e\u6bcf\u4e2a\u7f16\u53f7\u662f\u6709\u533a\u522b\u7684\u3001**\u4e0d\u5e73\u7b49**\u7684\u3002\n\n\u8fdb\u800c\u53d1\u73b0\uff0c\u5bf9\u4e8e$i<j$\uff0c\u53ea\u8981$i$\u80fd\u5230\u8fbe$j$\u6216$j$\u80fd\u5230\u8fbe$i$\uff0c\u90a3\u4e48$Q_j$\u4e00\u5b9a\u7b49\u4e8e$\\exist$\uff0c\u4e0d\u8bba$Q_i$\u7b49\u4e8e\u4ec0\u4e48\u3002\u90a3\u65e2\u7136\u4e0d\u8bba\u6211\u586b$\\forall$\u8fd8\u662f$\\exist$\uff0c\u5f71\u54cd\u662f\u4e00\u6837\u7684\uff0c\u6211\u5f53\u7136\u5c3d\u53ef\u80fd\u591a\u586b$\\forall$\u3002\u4e5f\u5c31\u662f\u7528\u8fd9\u6837\u4e00\u79cd\u8d2a\u5fc3\u7684\u601d\u60f3\uff1a\u80fd\u586b$\\forall$\u5c31\u7edd\u4e0d\u586b$\\exist$\u3002\n\n\u4e8e\u662f\u95ee\u9898\u8f6c\u5316\u4e3a\uff0c\u6309\u7f16\u53f7\u4ece\u5c0f\u5230\u5927\uff0c\u4f9d\u6b21\u6807\u8bb0\u6bcf\u4e2a\u8282\u70b9\u3002\u5bf9\u5f53\u524d\u8282\u70b9$i$\uff0c\u5982\u679c\u6240\u6709\u3010$i$\u80fd\u5230\u8fbe\u7684\u3011\u548c\u3010\u80fd\u5230\u8fbe$i$\u7684\u3011\u8282\u70b9\u90fd\u672a\u88ab\u6807\u8bb0\uff0c\u5219$Q_i=\\forall$\uff0c\u5426\u5219$Q_i=\\exist$\u3002\n\n\u5f53\u7136\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u5bf9\u6240\u6709\u3010$i$\u80fd\u5230\u8fbe\u7684\u3011\u548c\u3010\u80fd\u5230\u8fbe$i$\u7684\u3011\u8282\u70b9\u8fdb\u884c\u67e5\u8be2\uff0c\u975e\u5e38\u56f0\u96be\u3002\u8f6c\u5316\u4e00\u4e0b\uff0c\u53d8\u6210\u4fee\u6539\u64cd\u4f5c\uff0c\u4e5f\u540c\u6837\u56f0\u96be\uff01\u5982\u679c\u4f60\u8fd9\u4e48\u60f3\u8fd9\u4e2a\u95ee\u9898\uff0c\u90a3\u4f60\u5c31\u662f\u7528\u4e86\u201c\u6570\u636e\u7ed3\u6784\u201d\u7684\u601d\u7ef4\uff0c\u603b\u60f3\u5728**\u8fc7\u7a0b\u8fdb\u884c\u4e2d**\uff0c\u5927\u529b\u7ef4\u62a4\u4e00\u4e9b\u4ec0\u4e48\u3002\u4f46\u5176\u5b9e\uff0c\u8fd8\u6709\u53e6\u4e00\u79cd\u601d\u7ef4\uff0c\u4e5f\u5c31\u662f\u201cDP\u201d\u7684\u601d\u7ef4\u3002\u4e0d\u5728\u8fc7\u7a0b\u4e2d\u7ef4\u62a4\uff0c\u800c\u662f\u9884\u5904\u7406\u51fa\u6765\uff1a\u7528\u9012\u63a8\u7684\u65b9\u5f0f\u9884\u5904\u7406\u51fa\u6765\uff0c\u4e0d\u65ad\u4ece\u5df2\u77e5\u7684\uff0c\u63a8\u51fa\u672a\u77e5\u7684\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u53ef\u4ee5\u73b0\u5728DAG\u4e0a\u6b63\u7740\u8dd1\u4e00\u904d\u62d3\u6251\u6392\u5e8f\uff0c\u5c31\u80fd\u9012\u63a8\u51fa\u3010\u80fd\u5230\u8fbe\u6bcf\u4e2a\u70b9\u7684\u3011\u6700\u5c0f\u7f16\u53f7\u3002\u518d\u5728\u53cd\u56fe\u4e0a\u8dd1\u4e00\u904d\u62d3\u6251\u6392\u5e8f\uff0c\u5c31\u80fd\u9012\u63a8\u51fa\u3010\u6bcf\u4e2a\u70b9\u80fd\u5230\u8fbe\u7684\u3011\u6700\u5c0f\u7f16\u53f7\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n+m)$\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n//problem:\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define pb push_back\n#define mk make_pair\n#define lob lower_bound\n#define upb upper_bound\n#define fi first\n#define se second\n#define SZ(x) ((int)(x).size())\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\n\ntemplate<typename T>inline void ckmax(T& x,T y){x=(y>x?y:x);}\ntemplate<typename T>inline void ckmin(T& x,T y){x=(y<x?y:x);}\n\nconst int MAXN=2e5;\nint n,m,ind[MAXN+5],ind_rev[MAXN+5];\nint dp[MAXN+5],dp_rev[MAXN+5];\nvector<int>G[MAXN+5],RG[MAXN+5];\n\nchar ans[MAXN+5];\nint maxnum;\nint main() {\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;++i){\n\t\tint u,v; cin>>u>>v;\n\t\tG[u].pb(v); RG[v].pb(u);\n\t\tind[v]++; ind_rev[u]++;\n\t}\n\tqueue<int>q;\n\tfor(int i=1;i<=n;++i){\n\t\tdp[i]=i;\n\t\tif(!ind[i]){\n\t\t\tq.push(i);\n\t\t}\n\t}\n\twhile(!q.empty()){\n\t\tint u=q.front(); q.pop();\n\t\tfor(int i=0;i<SZ(G[u]);++i){\n\t\t\tint v=G[u][i];\n\t\t\tind[v]--;\n\t\t\tckmin(dp[v],dp[u]);\n\t\t\tif(!ind[v]){\n\t\t\t\tq.push(v);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i)\n\t\tif(ind[i]){\n\t\t\tcout<<\"-1\"<<endl;\n\t\t\treturn 0;\n\t\t}\n\tfor(int i=1;i<=n;++i){\n\t\tdp_rev[i]=i;\n\t\tif(!ind_rev[i]){\n\t\t\tq.push(i);\n\t\t}\n\t}\n\twhile(!q.empty()){\n\t\tint u=q.front(); q.pop();\n\t\tfor(int i=0;i<SZ(RG[u]);++i){\n\t\t\tint v=RG[u][i];\n\t\t\tind_rev[v]--;\n\t\t\tckmin(dp_rev[v],dp_rev[u]);\n\t\t\tif(!ind_rev[v]){\n\t\t\t\tq.push(v);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tif(dp[i]<i || dp_rev[i]<i){\n\t\t\tans[i]='E';\n\t\t}\n\t\telse{\n\t\t\tans[i]='A';\n\t\t\tmaxnum++;\n\t\t}\n\t}\n\tcout<<maxnum<<endl;\n\tfor(int i=1;i<=n;++i)\n\t\tcout<<ans[i];\n\tcout<<endl;\n\treturn 0;\n}\n```\n\n\n\n\n\n",
        "postTime": 1595859714,
        "uid": 100674,
        "name": "duyi",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "\u9996\u5148\u65e0\u89e3\u663e\u7136\u662f\u8f93\u5165\u4e2d\u5b58\u5728\u73af\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u62d3\u6251\u6392\u5e8f\u89e3\u51b3\n\n\u8003\u8651\u4e00\u5bf9\u9650\u5236 $x_j<x_k$ \u4e14 $j<k$\uff0c\u5982\u4f55\u586b\u624d\u80fd\u5408\u6cd5\n\n- $\\forall x_j,\\forall x_k$ \u4e0d\u5408\u6cd5\n\n- $\\exists x_j,\\forall x_k$ \u4e0d\u5408\u6cd5\n\n- $\\forall x_j,\\exists x_k$ \u5408\u6cd5\n\n- $\\exists x_j,\\exists x_k$ \u5408\u6cd5\n\n\u7531\u6b64\u63a8\u5bfc\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff1a\u5bf9\u4e8e\u4e00\u4e2a $x_i$\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a $j$\uff0c$1\\leq j<i$\uff0c\u6709\u9650\u5236 $x_j<x_i$\uff0c\u90a3\u4e48\u8fd9\u4e2a $x_i$ \u524d\u4e0d\u80fd\u5c31\u4e0d\u80fd\u586b $\\forall$ \u56e0\u4e3a\u4e0d\u5b58\u5728\u4e00\u4e2a\u5b9e\u6570 $x$\uff0c\u4f7f\u5f97\u5bf9\u4e8e\u4efb\u610f\u5b9e\u6570\u90fd\u5927\u4e8e\u5b83\n\n\u5982\u679c\u9650\u5236\u662f\u5927\u4e8e\u4e5f\u662f\u540c\u7406\u7684\n\n\u90a3\u4e48\u53ef\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u627e\u5230\u786e\u5b9a\u4e86\u4e0e\u5b83\u5173\u7cfb\u662f\u5c0f\u4e8e\u548c\u5927\u4e8e\u7684\u6240\u6709\u70b9\u4e2d\u7f16\u53f7\u6700\u5c0f\u7684\u70b9\uff0c\u5982\u679c\u8fd9\u4e2a\u70b9\u7f16\u53f7\u6bd4\u5f53\u524d\u70b9\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u5c31\u4e0d\u80fd\u586b $\\forall$\uff0c\u5426\u5219\u53ef\u4ee5\n\n\u5177\u4f53\u8fc7\u7a0b\u53ef\u4ee5\u6309\u7167\u6240\u6709 $j,k$ \u7684\u9650\u5236\u5efa\u4e24\u4e2a\u56fe\uff0c\u7136\u540e\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u6c42\u4e0e\u6b64\u70b9\u786e\u5b9a\u5927\u5c0f\u5173\u7cfb\u7684\u70b9\u4e2d\u6700\u5c0f\u7f16\u53f7\n\n\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5\u7528\u4e00\u4e2a\u7c7b\u4f3c $dp$ \u7684\u505a\u6cd5\u89e3\u51b3\uff0c\u8bbe $Min1_i$ \u8868\u793a\u6709\u6bd4 $i$ \u5c0f\u7684\u9650\u5236\u7684\u70b9\u4e2d\u7f16\u53f7\u6700\u5c0f\u7684\u70b9\uff0c $Min2_i$ \u8868\u793a\u6709\u6bd4 $i$ \u5927\u7684\u9650\u5236\u7684\u70b9\u4e2d\u7f16\u53f7\u6700\u5c0f\u7684\u70b9\uff0c\u7136\u540e\u5b83\u4eec\u663e\u7136\u90fd\u53ef\u4ee5\u4ece\u4e0e\u5b83\u6709\u8fde\u8fb9\u7684\u70b9\u4e2d\u8f6c\u79fb\u8fc7\u6765\u3002\u90a3\u4e48\u5c06\u6240\u6709\u70b9\u7684\u5165\u8fb9\u548c\u51fa\u8fb9\u5206\u522b\u5b58\u4e0b\u6765\uff0c\u7136\u540e\u6309\u7167\u62d3\u6251\u5e8f\u8f6c\u79fb\u5373\u53ef\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O(n+m)}$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\n\nint read()\n{\n\tint s=0;\n\tchar c=getchar(),lc='+';\n\twhile (c<'0'||'9'<c) lc=c,c=getchar();\n\twhile ('0'<=c&&c<='9') s=s*10+c-'0',c=getchar();\n\treturn lc=='-'?-s:s;\n}\nvoid write(int x)\n{\n\tif (x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tif (x<10) putchar(x+'0');\n\telse\n\t{\n\t\twrite(x/10);\n\t\tputchar(x%10+'0');\n\t}\n}\nvoid print(int x,char c='\\n')\n{\n\twrite(x);\n\tputchar(c);\n}\nstruct edge\n{\n\tint to,nxt;\n}e[N];\nint head[N],cnt=0;\nvoid add(int u,int v)\n{\n\te[++cnt].to=v;\n\te[cnt].nxt=head[u];\n\thead[u]=cnt;\n}\nint siz[N],Min1[N],Min2[N];\nbool vis[N];\nint q[N],h=1,t=0;\nbool check(int n)\n{\n\tfor (int i=1;i<=n;i++)\n\tif (siz[i]==0)\n\tq[++t]=i;\n\twhile (h<=t)\n\t{\n\t\tint now=q[h];\n\t\tfor (int i=head[now];i;i=e[i].nxt)\n\t\t{\n\t\t\tint to=e[i].to;\n\t\t\tsiz[to]--;\n\t\t\tif (!siz[to]) q[++t]=to;\n\t\t}\n\t\th++;\n\t}\n\treturn t!=n;\n}\nvector<int>in[N],out[N];\n\nsigned main()\n{\n\tmemset(vis,0,sizeof(vis));\n\tmemset(siz,0,sizeof(siz));\n\tint n=read(),m=read(),ans=0;\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tint u=read(),v=read();\n\t\tadd(u,v);\n\t\tsiz[v]++;\n\t\tvis[max(u,v)]=1;\n\t\tin[v].push_back(u);\n\t\tout[u].push_back(v);\n\t}\n\tif (check(n)) return puts(\"-1\"),0;\n\tfor (int i=1;i<=n;i++) Min1[i]=Min2[i]=i;\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tint now=q[i];\n\t\tfor (int j=0;j<in[now].size();j++)\n\t\tMin1[now]=min(Min1[now],Min1[in[now][j]]);\n\t}\n\tfor (int i=n;i>=1;i--)\n\t{\n\t\tint now=q[i];\n\t\tfor (int j=0;j<out[now].size();j++)\n\t\tMin2[now]=min(Min2[now],Min2[out[now][j]]);\n\t}\n\tfor (int i=1;i<=n;i++) vis[i]=Min1[i]>=i&&Min2[i]>=i;\n\tfor (int i=1;i<=n;i++) ans+=vis[i];\n\tprint(ans);\n\tfor (int i=1;i<=n;i++) putchar(vis[i]?'A':'E');\n\n\treturn 0;\n}\n```",
        "postTime": 1604908488,
        "uid": 61120,
        "name": "QwQcOrZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1344C \u3010Quantifier Question\u3011"
    },
    {
        "content": "# \u5206\u6790\n\n\u9996\u5148\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u9898\u63d0\u4f9b\u4e86\u5f88\u591a\u5927\u5c0f\u5173\u7cfb\uff0c\u8fd9\u542f\u53d1\u6211\u4eec\u4ee5\u5927\u5c0f\u5173\u7cfb\u4e3a\u8fb9\u5efa\u56fe\uff08 $ x_1<x_2 $ \u65f6\u90fd\u4ece $ x_1 $ \u5411 $ x_2 $ \u8fde\u8fb9\uff09\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u4f1a\u5f88\u5bb9\u6613\u5730\u53d1\u73b0\u53ea\u8981\u56fe\u4e2d\u6709\u73af\uff0c\u6211\u4eec\u5c31\u5e94\u8be5\u8f93\u51fa $ -1 $ \uff0c\u53ef\u4ee5\u7528\u62d3\u8865\u6392\u5e8f\u5224\u65ad\u662f\u5426\u6709\u89e3\u3002\n\n\u5176\u6b21\u6211\u4eec\u8981\u6ce8\u610f\u5230\u8fd9\u6837\u4e00\u4ef6\u4e8b\uff1a\u6bcf\u4e2a\u4f4d\u7f6e\u662f\u4e0d\u5e73\u7b49\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4 $ \u2200x_1,\u2203x_2 $ \u548c $ \u2203x_1,\u2200x_2 $ \u662f\u4e0d\u540c\u7684\u8868\u8fbe\uff08\u539f\u82f1\u6587\u9898\u9762\u4e2d\u89e3\u91ca\u4e86\u8fd9\u4e00\u70b9\uff0c\u4f46\u7ffb\u8bd1\u4e2d\u6ca1\u6709\u89e3\u91ca\u539f\u56e0\uff09\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\n\n\u5bf9\u4e8e\u8f93\u5165\n\n\t7 6\n    1 2\n    3 4\n    5 2\n    3 6\n    2 7\n    7 3\n    \n\u53ef\u4ee5\u5f97\u5230\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wicqe7fo.png)\n\n\u6b64\u65f6\u53ea\u6709 $ Q_1 $ \u53ef\u4ee5\u662f $ \u2200 $ \uff0c\u5176\u5b83\u90fd\u53ea\u80fd\u662f $ \u2203 $\n\n\u4f46\u5982\u679c\u8f93\u5165\u4e3a\n\n\t7 6\n    1 5\n    3 4\n    5 7\n    3 6\n    2 5\n    7 3\n    \n\u5219\u56fe\u53d8\u4e3a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7u6zsd2t.png)\n\n\u6b64\u65f6 $ Q_1\uff0cQ_2 $ \u90fd\u53ef\u4ee5\u662f $ \u2200 $ \uff0c\u5176\u5b83\u90fd\u53ea\u80fd\u662f $ \u2203 $ \u3002\n\n\uff08\u8fd9\u4e5f\u662fhack\u6389\u6211\u66fe\u7ecf\u7684\u4e00\u4e2a\u9519\u8bef\u505a\u6cd5\u7684\u6570\u636e\uff09\n\n\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\uff08\u6709\u89e3\u7684\u60c5\u51b5\u4e0b\uff09\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a $ x_i $ \uff0c\u5982\u679c\u6211\u4eec\u60f3\u8ba9 $ Q_i $ \u53d6 $ \u2200 $ \uff0c\u5219\u4e00\u5207\u53ef\u4ee5\u786e\u5b9a\u6bd4 $ x_i $ \u5c0f\u7684\u6570\u548c\u786e\u5b9a\u6bd4 $ x_i $ \u5927\u7684\u6570\u7f16\u53f7\u90fd\u5fc5\u987b\u6bd4 $ i $ **\u5927**\u4e14\u53ea\u80fd\u53d6 $ \u2203 $ \u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u67e5\u627e\u6240\u6709**\u5b83\u80fd\u5230\u8fbe**\u7684\u70b9\uff08\u5373\u6bd4\u5b83\u5927\u7684\u6570\uff09\u7f16\u53f7\u7684**\u6700\u5c0f\u503c**\u548c\u6240\u6709**\u80fd\u5230\u8fbe\u5b83**\u7684\u70b9\uff08\u5373\u6bd4\u5b83\u5c0f\u7684\u6570\uff09\u7f16\u53f7\u7684**\u6700\u5c0f\u503c**\uff0c\u82e5\u4e24\u8005\u7684\u7f16\u53f7\u90fd\u6bd4\u6b64\u70b9\u5927\uff0c\u5219\u8be5\u70b9\u53ef\u4ee5\u53d6 $ \u2200 $ \uff0c\u5426\u5219\u53ea\u80fd\u53d6 $ \u2203 $ \u3002\n\n\u901a\u8fc7\u8bb0\u5fc6\u5316\u641c\u7d22\u5b9e\u73b0\uff0c\u590d\u6742\u5ea6 $ \\operatorname{O}(n+m) $ \u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <queue>\nusing namespace std;\nint n,m,in[200001],ans,sum;\nbool aa[200001];\nstruct edge{\n\tint to,next;\n};\ninline int mmin(const int &x,const int &y){\n\treturn x<y?x:y;\n}\nnamespace s1{\n\tedge e[200001];\n\tint h[200001],ans[200001],tot;\n\t//ans[i]\u8868\u793a\u201ci\u53f7\u70b9\u80fd\u5230\u8fbe\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n\tinline void add(int u,int v){\n\t\te[++tot]=(edge){v,h[u]};\n\t\th[u]=tot;\n\t}\n\tinline void dfs(int k){\n\t\tans[k]=k;\n\t\tfor(int i=h[k];i;i=e[i].next){\n\t\t\tif(!ans[e[i].to])dfs(e[i].to);\n\t\t\tans[k]=mmin(ans[k],ans[e[i].to]);\n\t\t}\n\t}\n\t//\u67e5\u8be2\u201c\u8be5\u70b9\u80fd\u5230\u8fbe\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n}\nnamespace s2{\n\tedge e[200001];\n\tint h[200001],ans[200001],tot;\n\t//ans[i]\u8868\u793a\u201c\u80fd\u5230\u8fbei\u53f7\u70b9\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n\tinline void add(int u,int v){\n\t\te[++tot]=(edge){v,h[u]};\n\t\th[u]=tot;\n\t}\n\tinline void dfs(int k){\n\t\tans[k]=k;\n\t\tfor(int i=h[k];i;i=e[i].next){\n\t\t\tif(!ans[e[i].to])dfs(e[i].to);\n\t\t\tans[k]=mmin(ans[k],ans[e[i].to]);\n\t\t}\n\t}\n\t//\u67e5\u8be2\u201c\u80fd\u5230\u8fbe\u8be5\u70b9\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n}\n//\u5927\u5bb6\u4f1a\u53d1\u73b0\u4e24\u4e2anamespace\u662f\u5b8c\u5168\u76f8\u540c\u7684\uff0c\u8fd9\u4e5f\u662fnamespace\u7684\u597d\u5904\u4e4b\u4e00\nqueue<int> q;\nint main(){\n\tcin>>n>>m;\n\tint x,y;\n\tdo{\n\t\tcin>>x>>y;\n\t\ts1::add(x,y);//\u7531\u5c0f\u5230\u5927\u5efa\u8fb9\n\t\ts2::add(y,x);//\u7531\u5927\u5230\u5c0f\u5efa\u8fb9\n\t\t++in[y];\n\t}while(--m);\n\t//\u62d3\u8865\u6392\u5e8f\u5224\u65ad\u662f\u5426\u6709\u89e3\n\tfor(int i=1;i<=n;++i)\n\t\tif(!in[i])q.push(i);\n\twhile(!q.empty()){\n\t\tusing namespace s1;\n\t\tint u=q.front();\n\t\t++sum;\n\t\tq.pop();\n\t\tfor(int i=h[u];i;i=e[i].next){\n\t\t\tint v=e[i].to;\n\t\t\tif(!(--in[v]))q.push(v);\n\t\t}\n\t}\n\tif(sum<n){\n\t\tcout<<\"-1\\n\";\n\t\treturn 0;\n\t}\n\t//\u8fd0\u884c\u5230\u8fd9\u91cc\u5c31\u4e00\u5b9a\u6709\u89e3\n\tfor(int i=1;i<=n;++i){\n\t\tif(!(s1::ans[i] || s2::ans[i])){\n\t\t\ts1::dfs(i);//\u6c42\u51fa\u201ci\u53f7\u70b9\u80fd\u5230\u8fbe\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n\t\t\ts2::dfs(i);//\u6c42\u51fa\u201c\u80fd\u5230\u8fbei\u53f7\u70b9\u7684\u70b9\u201d\u7684\u6700\u5c0f\u7f16\u53f7\n\t\t}\n\t\tif(s1::ans[i]>=i && s2::ans[i]>=i){\n\t\t\t//\u53ef\u4ee5\u53d6\u2200\n\t\t\t++ans;\n\t\t\taa[i]=1;\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\tfor(int i=1;i<=n;++i)\n\t\tcout<<(aa[i]?'A':'E');\n\tcout<<endl;\n\treturn 0;\n}\n```\n\u8c22\u8c22\u5927\u5bb6\n\n[\u56fe\u7247\u6765\u6e90\uff1ahttps://csacademy.com/app/graph_editor/](https://csacademy.com/app/graph_editor/)",
        "postTime": 1603339884,
        "uid": 179182,
        "name": "CCCCOrz",
        "ccfLevel": 7,
        "title": "CF1344C Quantifier Question \u9898\u89e3"
    },
    {
        "content": "### $\\text{Difficulty : 2600}$\n---\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u611a\u8822\u7684\u9605\u8bfb\u7406\u89e3\u9898\u3002\n\n---\n\u5c06\u4e00\u4e2a\u7ea6\u675f\u6761\u4ef6\u63cf\u8ff0\u4e3a\u4e00\u6761\u8fb9\uff0c\u4e0d\u59a8\u8bbe\u4e3a\u82e5\u6709\u7ea6\u675f\u6761\u4ef6 $x_i<x_j$ \u65f6\uff0c$i$ \u5411 $j$ \u94fe\u63a5\u4e00\u6761\u6709\u5411\u8fb9\u3002\n\n\u5047\u8bbe\u56fe\u4e2d\u5b58\u5728\u73af\uff0c\u53ef\u4ee5\u53d1\u73b0\u65e0\u8bba\u5982\u4f55\u8bbe\u7f6e\u8fb9\u7684\u7ea6\u675f\u6761\u4ef6\u5f3a\u5f31\uff0c\u90fd\u65e0\u6cd5\u4f7f\u5f97\u7b54\u6848\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u4e3a\u5373\u4f7f\u662f\u5c06\u6240\u6709\u7684\u7ea6\u675f\u6761\u4ef6\u8bbe\u7f6e\u4e3a\u201c\u5b58\u5728\u201d\uff0c\u90fd\u4e5f\u4e00\u5b9a\u80fd\u591f\u63a8\u51fa\u5f62\u5982 $x<x$ \u7684\u8fd9\u6837\u4e0d\u53ef\u80fd\u5b58\u5728\u7684\u7ea6\u675f\u3002\n\n\u5426\u5219\u56fe\u5c31\u662f\u4e00\u4e2a $\\text{DAG}$\uff0c\u7531\u4e8e\u4e0d\u7b49\u5f0f\u5b58\u5728\u4f20\u9012\u6027\uff0c\u6240\u4ee5\u5176\u5b9e\u53ea\u8981\u4e00\u4e2a\u70b9 $i$ \u7684\u67d0\u4e00\u7ea7\u540e\u7ee7\u662f $j$\uff0c\u5c31\u4e00\u5b9a\u6709 $x_i<x_j$\uff0c\u5bf9\u4e8e\u524d\u9a71\u4e5f\u662f\u540c\u7406\u3002\n\n\u5904\u7406\u5b8c\u56fe\u4e4b\u540e\u5177\u4f53\u8003\u8651\u4e0d\u7b49\u5f0f\u5173\u7cfb\u4e4b\u95f4\u7684\u76f8\u4e92\u5f71\u54cd\uff0c\u6b64\u5904\u7279\u522b\u6ce8\u610f\u6761\u4ef6\u548c\u6761\u4ef6\u4e4b\u95f4\u7684\u987a\u5e8f\u662f\u5f88\u91cd\u8981\u7684\u3002\u5982\u679c\u6709 $x_i<x_j$\uff0c\u5176\u4e2d $i<j$\uff0c\u5219\u65e0\u8bba $x_i$ \u4e3a\u4efb\u610f\u8fd8\u662f\u5b58\u5728\uff0c$x_j$ \u90fd\u53ea\u80fd\u662f\u201c\u5b58\u5728\u201d\uff0c\u5bf9\u4e8e $x_i>x_j$ \u4e5f\u662f\u540c\u7406\u3002\n\n\u7531\u6b64\u5f97\u51fa\uff0c\u53ea\u8981\u662f\u6709\u8fb9\u76f8\u8fde\u7684\u4e24\u4e2a\u70b9\uff0c\u7f16\u53f7\u8f83\u5927\u7684\u4e00\u4e2a\u53ea\u80fd\u53d6\u201c\u7c97\u5728\u201d\uff0c\u800c\u5982\u679c\u4e00\u4e2a\u70b9\u6ee1\u8db3\u7684\u6240\u6709\u4e0d\u7b49\u5f0f\u5173\u7cfb\u4e2d\u90fd\u6ca1\u6709\u6bd4\u5f53\u524d\u70b9\u7f16\u53f7\u5c0f\u7684\uff0c\u5219\u5f53\u524d\u70b9\u4e00\u5b9a\u80fd\u591f\u53d6\u201c\u4efb\u610f\u201d\u3002\n\n\u7ed3\u5408\u4e4b\u524d\u4e0d\u7b49\u5f0f\u7684\u4f20\u9012\u6027\uff0c\u53d1\u73b0\u53ea\u9700\u8981\u8ba1\u7b97\u51fa\u4e00\u4e2a\u70b9\u7684\u6240\u6709\u524d\u9a71\u548c\u540e\u7ee7\u4e2d\u7684\u6700\u5c0f\u7f16\u53f7\uff0c\u4e0e\u5f53\u524d\u70b9\u6bd4\u8f83\u5373\u53ef\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n+m)$\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<ALGORITHM>\nusing namespace std;\nconst int MAXN=200005;\nint n,m,head[MAXN],nxt[MAXN*2],num[MAXN*2],tot,x,y,d[MAXN],q[MAXN],l,r,f1[MAXN],f2[MAXN];\nint head_[MAXN],nxt_[MAXN*2],num_[MAXN*2],tot_,cnt;\nvoid add(int x,int y){nxt[++tot]=head[x];head[x]=tot;num[tot]=y;}\nvoid add_(int x,int y){nxt_[++tot_]=head_[x];head_[x]=tot_;num_[tot_]=y;}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++){\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tadd(x,y);add_(y,x);d[y]++;\n\t}\n\tfor(int i=1;i<=n;i++)\n\tif(d[i]==0)q[++r]=i;\n\twhile(l<=r){\n\t\tint now=q[l];\n\t\tfor(int i=head[now];i;i=nxt[i]){\n\t\t\td[num[i]]--;\n\t\t\tif(d[num[i]]==0)\n\t\t\tq[++r]=num[i];\n\t\t}\n\t\tl++;\n\t}\n\tif(r!=n){\n\t\tprintf(\"-1\\n\");\n\t\treturn 0;\n\t}\n\tfor(int i=1;i<=n;i++)\n\tf1[i]=f2[i]=i;\n\tfor(int l=1;l<=n;l++){\n\t\tint now=q[l];\n\t\tfor(int i=head_[now];i;i=nxt_[i])\n\t\tf1[now]=min(f1[now],f1[num_[i]]);\n\t}\n\tfor(int l=n;l>=1;l--){\n\t\tint now=q[l];\n\t\tfor(int i=head[now];i;i=nxt[i])\n\t\tf2[now]=min(f2[now],f2[num[i]]);\n\t}\n\tfor(int i=1;i<=n;i++)if(f1[i]==i&&f2[i]==i)cnt++;\n\tprintf(\"%d\\n\",cnt);\n\tfor(int i=1;i<=n;i++){\n\t\tif(f1[i]==i&&f2[i]==i)printf(\"A\");\n\t\telse printf(\"E\");\n\t}\n\tprintf(\"\\n\");\n\treturn 0;\n}\n```\n",
        "postTime": 1663768812,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "CF1344C Quantifier Question"
    }
]
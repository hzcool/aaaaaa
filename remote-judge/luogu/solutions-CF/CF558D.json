[
    {
        "content": "\u9996\u5148\u9884\u5904\u7406\u51fa\u6bcf\u4e00\u5c42\u7684\u7ed3\u70b9\u7f16\u53f7\u8303\u56f4\uff0c\u7136\u540e\u5904\u7406\u6bcf\u4e00\u4e2a\u8be2\u95ee\u65f6\u5148\u5c06$L$\u548c$R$\u7684\u8303\u56f4\u7f29\u5c0f\u5230$i$\u5c42\u7684\u7f16\u53f7\u8303\u56f4\u5185(\u5373\u53d6\u4ea4\u96c6)\uff0c\u7136\u540e\u5bf9$L$\u548c$R$\u6620\u5c04\u5230$h$\u5c42\u7684\u4f4d\u7f6e\u8fdb\u884c\u5dee\u5206\uff0c\u5728\u7b26\u5408\u672c\u6b21\u8be2\u95ee\u7684\u70b9\u7684\u4f4d\u7f6e\u5904+1\u3002\u6700\u540e\u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u4f4d\u7f6e\u7684\u503c\u662f$q$\u5373\u53ef\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 400005;\nusing ll = long long;\nint h,q,idx,ptr;\nll idl[N],idr[N];\nstruct Query {ll pos;int v;} d[N],dd[N];\nll lleaf(ll num)\n{\n    while (idl[h] > num) num = num << 1;\n    return num;\n}\nll rleaf(ll num)\n{\n    while (idl[h] > num) num = num << 1 | 1;\n    return num;\n}\nint main ()\n{\n    ios::sync_with_stdio(false);\n    cin >> h >> q;\n    idl[1] = idr[1] = 1;\n    for (int i = 2;i <= h;i++) idl[i] = idl[i - 1] << 1,idr[i] = idr[i - 1] << 1 | 1;\n    int t1,op;ll t2,t3;\n    d[++idx] = {idl[h],0};d[++idx] = {idr[h] + 1,0};\n    for (int i = 1;i <= q;i++)\n    {\n        cin >> t1 >> t2 >> t3 >> op;\n        t2 = max(t2,idl[t1]);t3 = min(t3,idr[t1]);\n        if (op == 1)\n        {\n            d[++idx] = {lleaf(t2),1};d[++idx] = {rleaf(t3) + 1,-1};\n        }\n        else\n        {\n            d[++idx] = {idl[h],1};d[++idx] = {lleaf(t2),-1};\n            d[++idx] = {rleaf(t3) + 1,1};d[++idx] = {idr[h] + 1,-1};\n        }\n    }\n    sort(d + 1,d + idx + 1,[](Query a,Query b) {return a.pos < b.pos;});\n    for (int i = 1;i <= idx;i++)\n        if (i == 1 || d[i].pos != d[i - 1].pos) dd[++ptr] = d[i];\n        else dd[ptr].v += d[i].v;\n    ll cnt = 0,ans = 0;int cur = dd[1].v;\n    for (int i = 2;i <= ptr;i++)\n    {\n        ll diff = dd[i].pos - dd[i - 1].pos;\n        if (cur == q) cnt += diff,ans = dd[i - 1].pos;\n        cur += dd[i].v;\n    }\n    if (cnt > 1) cout << \"Data not sufficient!\" << endl;\n    else if (cnt == 1) cout << ans << endl;\n    else cout << \"Game cheated!\" << endl;\n    return 0;\n}\n```",
        "postTime": 1586683530,
        "uid": 92602,
        "name": "SIGSEGV",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF558D \u3010Guess Your Way Out! II\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u73c2\u6735\u8389\u6811\u7684\u5199\u6cd5\u3002\n\n## \u3010\u601d\u8def\u3011\n\u9996\u5148\u8003\u8651\u6bcf\u4e00\u6b21\u64cd\u4f5c\u7684\u672c\u8d28\uff0c\u5b9e\u9645\u4e0a\u662f\u786e\u5b9a\u4e86\u7b54\u6848\u5728\u67d0\u4e00\u6bb5\u533a\u95f4\u5185\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u7406\u89e3\u6210\u7b54\u6848\u4e0d\u5728\u67d0\u4e00\u6bb5\u533a\u95f4\u5185\u3002\n\n\u7136\u540e\u6bcf\u4e00\u5c42\u7684\u5143\u7d20\u6240\u4ee3\u8868\u7684\u533a\u95f4\u663e\u7136\u662f\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6765\u7684\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f $[2^{i-1},2^i-1]$ \u8fd9\u6bb5\u533a\u95f4\uff0c\u7528\u4f4d\u8fd0\u7b97\u5341\u5206\u65b9\u4fbf\u3002\n\n\u8003\u8651\u6bcf\u4e00\u6b21\u8be2\u95ee\u5148\u4e0e\u5bf9\u5e94\u5c42\u7684\u533a\u95f4\u53d6\u4e00\u4e2a\u4ea4\uff0c\u7279\u5224\u4e00\u4e0b\u7a7a\u533a\u95f4\u7684\u60c5\u51b5\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u6269\u5c55\u5230\u5bf9\u5e94\u7684\u53f6\u5b50\u3002\n\n\u8003\u8651\u5982\u679c\u7b54\u6848\u8fd4\u56de\u503c\u662f $1$ \u90a3\u4e48\u5269\u4e0b\u7684\u5de6\u53f3\u4e24\u4e2a\u533a\u95f4\u90fd\u65e0\u89e3\uff0c\u76f4\u63a5\u63a8\u5e73\u6210 $0$ \u5373\u53ef\u3002\u8fd4\u56de\u503c\u662f $0$ \u7684\u8bdd\u90a3\u4e48\u63a8\u5e73\u7ed9\u51fa\u7684\u533a\u95f4\u5373\u53ef\u3002\n\n\u7136\u540e\u6269\u5c55\u5230\u5bf9\u5e94\u7684\u53f6\u5b50\u5c31\u662f\u5de6\u7aef\u70b9\u6269\u5c55\u5230\u6700\u5de6\u7684\u513f\u5b50\uff0c\u53f3\u7aef\u70b9\u6269\u5c55\u5230\u6700\u53f3\u7684\u513f\u5b50\u3002\u8fd9\u4e2a\u5de6\u7aef\u70b9\u4e58\u4e0a\u4e00\u4e2a $2^{h-i}$ \uff0c\u53f3\u7aef\u70b9 $+ 1$ \u4e4b\u540e\u4e58\u4e0a $2^{h-i}$ \u518d $-1$ \u5c31\u662f\u5bf9\u5e94\u7684\u5de6\u53f3\u53f3\u7aef\u70b9\u3002\n\n\u7136\u540e\u73c2\u6735\u8389\u6811\u533a\u95f4\u63a8\u5e73\u5373\u53ef\uff0c\u7531\u4e8e\u53ea\u6709\u63a8\u5e73\u590d\u6742\u5ea6\u662f\u5bf9\u7684\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u5361\u5230 $O(n\\log n)$ \uff08\u4f46\u4e5f\u662f\u5bf9\u7684\uff09\uff0c\u4e0d\u8fc7\u5b9e\u6d4b\u5f88\u5feb\u3002\n\n\u6700\u540e\u5224\u65ad\u5269\u4e0b\u7684\u4e3a $1$ \u7684\u70b9\u6570\u5373\u53ef\uff0c\u82e5\u6ca1\u6709\u5219\u65e0\u89e3\uff0c\u5426\u5219\u8981\u4e48\u591a\u89e3\u8981\u4e48\u552f\u4e00\u89e3\u3002\n\n\u6b63\u786e\u6027\u663e\u7136\u3002\n\n## \u3010\u4ee3\u7801\u3011\n```cpp\n/*\n    author: DPair\n    language: C++11\n\n    description:\n    \u660e\u955c\u6b62\u6c34\u4e4b\u5fc3\n*/\n#include <cstdio>\n#include <cstring>\n#include <set>\nusing std :: set;\n#define rep(i,s,t) for(int i=s;i<=t;++i)\nnamespace MyMinMax{\n    template <typename T>\n    inline T mn(T x, T y) {return x < y ? x : y;}\n    template <typename T>\n    inline T mx(T x, T y) {return x > y ? x : y;}\n    template <typename T>\n    inline void chmin(T &x, T y) {(x > y) && (x = y);}\n    template <typename T>\n    inline void chmax(T &x, T y) {(x < y) && (x = y);}\n}\nusing namespace MyMinMax;\n//\u5220\u53bb\u4e86\u4e0d\u91cd\u8981\u7684\u5feb\u8bfb\ntypedef long long LL;\nstruct NODE{\n    LL l, r;\n    int val;\n    NODE(LL l, LL r, int val) : l(l), r(r), val(val){}\n    inline bool operator < (const NODE &tmp) const{return l < tmp.l;}\n};\nstruct Inter{\n    LL l, r;\n    Inter(){}\n    Inter(LL l, LL r) : l(l), r(r){}\n    inline Inter operator + (const Inter &b) const{return Inter(mx(l, b.l), mn(r, b.r));}\n    inline void operator += (const Inter &b){chmax(l, b.l);chmin(r, b.r);}\n    inline bool empty(){return l > r;}\n}lay[55];\nint h, q;\nset <NODE> t;\ntypedef set <NODE> :: iterator IT;\ninline IT split(LL x){\n    if(x > lay[h].r) return t.end();\n    IT it = t.lower_bound(NODE(x, 0, 0));\n    if(it != t.end() && it -> l == x) return it;\n    -- it;\n    LL l = it -> l, r = it -> r;int val = it -> val;\n    t.erase(it);t.emplace(NODE(l, x - 1, val));\n    return t.emplace(NODE(x, r, val)).first;\n}\ninline void assign(LL l, LL r){\n    IT R = split(r + 1), L = split(l);\n    t.erase(L, R);\n    t.emplace(NODE(l, r, 0));\n}\n\nint main(){\n    read(h, q);\n    rep(i, 1, h) lay[i] = Inter(1ll << (i - 1), (1ll << i) - 1);\n    t.emplace(NODE(1ll << (h - 1), (1ll << h) - 1, 1));\n    while(q --){\n        LL l, r;int p, x;read(p, l, r, x);\n        Inter inv = Inter(l, r);\n        inv += lay[p];\n        if(inv.empty()){\n            if(x) return put(\"Game cheated!\"), 0;\n            continue;\n        }\n        l = inv.l, r = inv.r;\n        if(!x) assign(l << (h - p), ((r + 1) << (h - p)) - 1);\n        else {\n            if(lay[h].l <= (l << (h - p)) - 1) assign(lay[h].l, (l << (h - p)) - 1);\n            if(((r + 1) << (h - p)) <= lay[h].r) assign(((r + 1) << (h - p)), lay[h].r);\n        }\n    }\n    LL ans = 0;\n    for (auto it : t){\n        if(it.val){\n            if(it.r ^ it.l) return put(\"Data not sufficient!\"), 0;\n            if(ans) return put(\"Data not sufficient!\"), 0;\n            ans = it.l;\n        }\n    }\n    if(!ans) put(\"Game cheated!\");\n    else print(ans);\n}\n\n```",
        "postTime": 1615207263,
        "uid": 66511,
        "name": "DPair",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF558D \u3010Guess Your Way Out! II\u3011"
    }
]
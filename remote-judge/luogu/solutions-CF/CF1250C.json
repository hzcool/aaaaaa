[
    {
        "content": "~~\u6700\u8fd1CF\u4e0a\u7684\u8bc4\u5206\u8d8a\u6765\u8d8a\u8ff7\u4e86...~~\n\n\u5047\u8bbe\u53bb\u5f80\u65f6\u95f4\u4e3a$[L,R]$\uff0c\u7531\u4e8e\u4efb\u610f\u5de5\u4f5c\u7684\u5de5\u8d44\u5747$>0$\uff0c\u6240\u4ee5\u6211\u4eec\u9009\u8d70\u7684\u5de5\u4f5c\u5fc5\u7136\u662f\u6240\u6709\u6ee1\u8db3$L\\le l_i\\le r_i\\le R$\u7684\u5de5\u4f5c\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u679a\u4e3e$R$\uff0c\u7136\u540e\u5bf9\u4e8e$R$\u6c42\u89e3\u6700\u4f18\u7684$L$\n\n\u7c7b\u4f3c\u4e8e\u626b\u63cf\u7ebf\u4ece$1\\to R$\u626b\u8fc7\u53bb\uff0c\u6bcf\u6b21\u4f9d\u6b21\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\uff0c\u8003\u8651\u4e00\u6761\u7ebf\u6bb5$[l_i,r_i]$\u53ef\u4ee5\u8d21\u732e\u7684$L$\u6709\u90a3\u4e9b\uff0c\u663e\u7136\u662f$[1,L]$\u8fd9\u6bb5\u533a\u95f4\u5185\u7684\u6240\u6709$L$\uff0c\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u652f\u6301\u533a\u95f4\u4fee\u6539\u5373\u53ef\u3002\n\n\u7136\u540e\u518d\u505a\u4e00\u4e2a\u533a\u95f4\u67e5\u503c\u5c31\u597d\u4e86...\n\n$Code:$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std ;\n#define rep( i, s, t ) for( register int i = s; i <= t; ++ i )\n#define re register\n#define ls(x) ( x << 1 )\n#define rs(x) ( x << 1 | 1 )\nint gi() {\n\tchar cc = getchar() ; int cn = 0, flus = 1 ;\n\twhile( cc < '0' || cc > '9' ) {  if( cc == '-' ) flus = - flus ; cc = getchar() ; }\n\twhile( cc >= '0' && cc <= '9' )  cn = cn * 10 + cc - '0', cc = getchar() ;\n\treturn cn * flus ;\n}\nconst int N = 2e5 + 5 ; \nint n, m, Maxn, L, num, Ans, AL, AR, s[N], top ; \nstruct node {\n\tint l, w, id ; \n} ;\nstruct Tree {\n\tint mx, tag, id ; \n} tr[N << 2] ;\nvector<node> a[N] ; \nvoid pushmark( int x ) {\n\tif( tr[x].tag ) {\n\t\ttr[ls(x)].mx += tr[x].tag, tr[ls(x)].tag += tr[x].tag,\n\t\ttr[rs(x)].mx += tr[x].tag, tr[rs(x)].tag += tr[x].tag,\n\t\ttr[x].tag = 0 ;\n\t}\n}\nvoid Q( int x, int l, int r, int ql, int qr ) {\n\tif( qr < l || r < ql ) return ; \n\tif( ql <= l && r <= qr ) { if( tr[x].mx > num ) L = tr[x].id, num = tr[x].mx ; return ; }\n\tint mid = ( l + r ) >> 1 ; pushmark(x) ; \n\tQ( ls(x), l, mid, ql, qr ), Q( rs(x), mid + 1, r, ql, qr ) ;\n\ttr[x].mx = tr[ls(x)].mx, tr[x].id = tr[ls(x)].id ; \n\tif( tr[rs(x)].mx > tr[x].mx ) tr[x].mx = tr[rs(x)].mx, tr[x].id = tr[rs(x)].id ; \n}\nvoid Add( int x, int l, int r, int ql, int qr, int k ) {\n\tif( qr < l || r < ql ) return ; \n\tif( ql <= l && r <= qr ) { tr[x].mx += k ; tr[x].tag += k; return ; }\n\tint mid = ( l + r ) >> 1 ; pushmark(x) ;\n\tAdd( ls(x), l, mid, ql, qr, k ), Add( rs(x), mid + 1, r, ql, qr, k ) ;\n\ttr[x].mx = tr[ls(x)].mx, tr[x].id = tr[ls(x)].id ; \n\tif( tr[rs(x)].mx > tr[x].mx ) tr[x].mx = tr[rs(x)].mx, tr[x].id = tr[rs(x)].id ; \n}\nvoid build( int x, int l, int r ) {\n\ttr[x].id = l ; if( l == r ) return ; \n\tint mid = ( l + r ) >> 1 ; \n\tbuild( ls(x), l, mid ), build( rs(x), mid + 1, r ) ;\n}\nsigned main()\n{\n\tn = gi(), m = gi() ; int x, y, z ;\n\trep( i, 1, n ) {\n\t\tx = gi(), y = gi(), z = gi(), Maxn = max( Maxn, y ),\n\t\ta[y].push_back((node){ x, z, i }) ;\n\t}  build( 1, 1, Maxn ) ; \n\trep( i, 1, Maxn ) {\n\t\tAdd( 1, 1, Maxn, 1, i, -m ) ;\n\t\tfor( re int j = 0; j < a[i].size(); ++ j ) {\n\t\t\tAdd( 1, 1, Maxn, 1, a[i][j].l, a[i][j].w ) ;\n\t\t}\n\t\tnum = 0, L = 0, Q( 1, 1, Maxn, 1, i ) ;\n\t\tif( num > Ans ) Ans = num, AL = L, AR = i ; \n\t}\n\tif( Ans == 0 ) { puts(\"0\") ; exit(0) ; }\n\tprintf(\"%lld %lld %lld \", Ans, AL, AR ) ;\n\trep( i, 1, AR )\n\t\tfor( re int j = 0; j < a[i].size(); ++ j )\n\t\tif( a[i][j].l >= AL ) s[++ top] = a[i][j].id ; \n\tprintf(\"%lld\\n\", top ) ;\n\trep( i, 1, top ) printf(\"%lld \", s[i] ) ;\n\treturn 0 ;\n}\n```",
        "postTime": 1572430298,
        "uid": 30036,
        "name": "Soulist",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1250C \u3010Trip to Saint Petersburg\u3011"
    },
    {
        "content": "[\u66f4\u5dee\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/tx-lcy/p/16809263.html)\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1250C)\n## \u601d\u8def\n\u7ebf\u6bb5\u6811\u5165\u95e8\u9898\u3002\n\n\u4e0d\u59a8\u56fa\u5b9a\u4e00\u4e2a\u53f3\u7aef\u70b9 $r$\uff0c\u628a\u6240\u6709\u53f3\u7aef\u70b9\u5c0f\u4e8e $r$ \u7684\u533a\u95f4\u90fd\u5728 $1$ \u81f3\u6b64\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u5904 $\\verb!update!$ \u4e00\u4e2a $p$\uff0c\u7136\u540e\u6bcf\u6b21\u90fd\u7ed9\u533a\u95f4 $1$ \u81f3 $i$ $\\verb!update!$ \u4e00\u4e2a $-k$\uff0c\u6700\u540e\u67e5\u8be2\u533a\u95f4 $\\max$ \u5373\u53ef\u3002\n\n## \u4ee3\u7801\n```cpp\n//A tree without skin will surely die. \n//A man without face is invincible.\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint const N=2e5+10;\nstruct answ{int first,second,id;};\nstruct node{int x,y;};\nvector<answ>a[N];\nvector<int>anss;\nstruct Segment_Tree{\n    #define ls (x<<1)\n    #define rs (x<<1|1)\n    #define mid ((l+r)>>1)\n    int c[N<<2],lazy[N<<2],pl[N<<2];\n    inline void build(int x,int l,int r){\n        if (l==r){pl[x]=l;return;}\n        build(ls,l,mid);build(rs,mid+1,r);\n        pl[x]=pl[ls];\n    }\n    inline void pushdown(int x){\n        c[ls]+=lazy[x];c[rs]+=lazy[x];\n        lazy[ls]+=lazy[x];lazy[rs]+=lazy[x];\n        lazy[x]=0;\n    }\n    inline void pushup(int x){\n        if (c[ls]>c[rs]) c[x]=c[ls],pl[x]=pl[ls];\n        else c[x]=c[rs],pl[x]=pl[rs];\n    }\n    inline void update(int x,int l,int r,int ll,int rr,int v){\n        if (l==r){pl[x]=l;}\n        if (ll<=l && r<=rr){c[x]+=v,lazy[x]+=v;return;}\n        pushdown(x);\n        if (ll<=mid) update(ls,l,mid,ll,rr,v);\n        if (mid<rr) update(rs,mid+1,r,ll,rr,v);\n        pushup(x);\n    }\n    inline node query(int x,int l,int r,int ll,int rr){\n        if (l==r) pl[x]=l;\n        if (ll<=l && r<=rr) return {c[x],pl[x]};\n        pushdown(x);node res;res.x=res.y=0;\n        if (ll<=mid) res=query(ls,l,mid,ll,rr);\n        if (mid<rr){\n            node qq=query(rs,mid+1,r,ll,rr);\n            if (qq.x>res.x) res=qq;\n        }\n        pushup(x);\n        return res;\n    }\n}T;\nsigned main(){\n    int n,k;cin>>n>>k;int maxr=0;\n    for (int i=1;i<=n;++i){\n        int l,r,p;cin>>l>>r>>p;\n        a[r].push_back({l,p,i});maxr=max(maxr,r);\n    }\n    T.build(1,1,maxr);\n    int ans=0,ansl=0,ansr=0;\n    for (int i=1;i<=maxr;++i){\n        T.update(1,1,maxr,1,i,-k);\n        for (auto j:a[i]) T.update(1,1,maxr,1,j.first,j.second);\n        node reply=T.query(1,1,maxr,1,i);\n        if (reply.x>ans) ans=reply.x,ansl=reply.y,ansr=i;\n    }\n    //\u8f93\u51fa\n    return 0;\n}\n```\n",
        "postTime": 1666236887,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "CF1250C Trip to Saint Petersburg"
    }
]
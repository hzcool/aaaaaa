[
    {
        "content": "\u4e5f\u8bb8\u662f\u6211\u505a\u8fc7\u7684\u6700\u6c34\u7684 D \u9898\u4e4b\u4e00\u5427.\n\n## \u9898\u610f\n\u6709 $n$ \u4e2a\u6574\u6570\u5bf9 $(a_1, b_1), (a_2, b_2), \\cdots, (a_n, b_n)$. \u4fdd\u8bc1 $a_1, b_1, a_2, b_2, \\cdots, a_n, b_n$ \u4e24\u4e24\u4e0d\u76f8\u7b49, \u5e76\u4e14\u5747\u5728\u533a\u95f4 $[1, 2 \\cdot n]$ \u4e2d.\n\n\u597d\u5e8f\u5217\u7684\u5b9a\u4e49:  \n\u5bf9\u4e8e\u4e00\u4e2a\u5e8f\u5217 $x_1, x_2, \\cdots, x_{2k}$, \u6ee1\u8db3\n- $x_1 < x_2 > x_3 < \\cdots < x_{2k - 2} > x_{2k - 1} < x_{2k}$ \u6216\n- $x_1 > x_2 < x_3 > \\cdots > x_{2k - 2} < x_{2k - 1} > x_{2k}$.\n\n\u6c42\u4e00\u4e2a\u5e8f\u5217 $i_1, i_2, \\cdots, i_t$ \u6ee1\u8db3 $a_{i_1}, b_{i_1}, a_{i_2}, b_{i_2}, \\cdots, a_{i_t}, b_{i_t}$ \u662f\u597d\u5e8f\u5217.\n\n\u8f93\u51fa $t$ \u7684\u6700\u5927\u503c\u4ee5\u53ca\u5bf9\u5e94\u7684\u5e8f\u5217 $i_1, i_2, \\cdots, i_t$.\n\n## \u89e3\u6cd5\n\u9996\u5148\u53ef\u4ee5\u53d1\u73b0, \u5bf9\u4e8e\u5728 $[1, n]$ \u533a\u95f4\u5185\u7684\u6bcf\u4e00\u4e2a\u6574\u6570 $j$, \u90fd\u6ee1\u8db3 $a_{i_{2j - 1}} < b_{i_{2j}}$ \u6216\u8005 $a_{i_{2j - 1}} > b_{i_{2j}}$. \u56e0\u6b64\u88ab\u9009\u51fa\u7684\u4e0b\u6807\u5bf9\u5e94\u7684\u6570\u5bf9**\u90fd\u6ee1\u8db3**\u7b2c\u4e00\u4e2a\u6570\u6bd4\u7b2c\u4e8c\u4e2a\u6570\u5c0f\u6216\u8005\u5927.\n\n\u56e0\u6b64, \u6211\u4eec\u5c31\u5c06\u9898\u76ee\u7ed9\u51fa\u7684\u6570\u5bf9\u5206\u6210\u4e24\u7c7b, \u7b2c\u4e00\u7c7b\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6570\u6bd4\u7b2c\u4e8c\u4e2a\u6570\u5c0f, \u7b2c\u4e8c\u7c7b\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6570\u6bd4\u7b2c\u4e8c\u4e2a\u6570\u5927.\n\n### \u5bf9\u4e8e\u7b2c\u4e00\u7c7b\n\n\u5f53 $b_{i_1} > b_{i_2} > \\cdots > b_{i_t}$ \u65f6  \n\u6ee1\u8db3 $b_{i_j} > a_{i_{j + 1}} < b_{i_{j + 1}}$  \n\u6240\u4ee5\u5fc5\u7136\u6ee1\u8db3 $a_{i_1} < b_{i_1} > a_{i_2} < b_{i_2} > \\cdots > a_{i_t} < b_{i_t}$.\n\n\u56e0\u6b64\u5f53\u6211\u4eec\u5c06\u7b2c\u4e00\u7c7b\u4e2d\u7684\u6240\u6709\u6570\u5bf9\u6309\u7b2c\u4e8c\u4e2a\u6570\u4ece\u5927\u5230\u5c0f\u6392\u5e8f, \u987a\u6b21\u8fde\u63a5\u5f97\u5230\u7684\u5fc5\u7136\u662f\u4e2a\u597d\u5e8f\u5217.\n\n### \u5bf9\u4e8e\u7b2c\u4e8c\u7c7b\n\n\u5f53 $b_{i_1} < b_{i_2} < \\cdots < b_{i_t}$ \u65f6  \n\u6ee1\u8db3 $b_{i_j} < a_{i_{j + 1}} > b_{i_{j + 1}}$  \n\u6240\u4ee5\u5fc5\u7136\u6ee1\u8db3 $a_{i_1} > b_{i_1} < a_{i_2} > b_{i_2} < \\cdots < a_{i_t} > b_{i_t}$.\n\n\u56e0\u6b64\u5f53\u6211\u4eec\u5c06\u7b2c\u4e8c\u7c7b\u4e2d\u7684\u6240\u6709\u6570\u5bf9\u6309\u7b2c\u4e8c\u4e2a\u6570\u4ece\u5c0f\u5230\u5927\u6392\u5e8f, \u987a\u6b21\u8fde\u63a5\u5f97\u5230\u7684\u5fc5\u7136\u662f\u4e2a\u597d\u5e8f\u5217.\n\n\u6240\u4ee5\u6211\u4eec\u6311\u9009\u4e24\u7c7b\u4e2d\u6570\u5bf9\u66f4\u591a\u7684\u4e00\u7c7b, \u8fdb\u884c\u4e0a\u8ff0\u5904\u7406\u4e4b\u540e\u5373\u53ef.\n\n\u56e0\u4e3a\u6700\u540e\u8f93\u51fa\u7684\u662f\u539f\u4e0b\u6807, \u6240\u4ee5\u6392\u5e8f\u7684\u65f6\u5019\u8981\u5e26\u4e0a\u539f\u4e0b\u6807\u4e00\u8d77\u6392\u5e8f.\n\n\u5177\u4f53\u89c1\u4ee3\u7801:\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef pair<int, int> pii;\ntypedef pair<pii, int> ppi;\n\nint n;\n\n// \u5b58\u653e\u5728 pair<pair<int, int>, int> \u4e2d\u66f4\u65b9\u4fbf\u6392\u5e8f (\u4e0d\u7528\u624b\u5199 comp)\nppi a[300001], b[300001]; // \u4e24\u7c7b\u6570\u5bf9\n\nint n1 = 0, n2 = 0;\n\ntemplate <typename T>\ninline T read() {\n    T x = 0;\n    T multiplier = 1;\n    char ch = getchar();\n    while (ch < '0' || ch > '9') {\n        if (ch == '-') {\n            multiplier = -1;\n        }\n        ch = getchar();\n    }\n    while (ch >= '0' && ch <= '9') {\n        x = (x << 3) + (x << 1) + (ch & 15);\n        ch = getchar();\n    }\n    return x * multiplier;\n}\n\nint main() {\n    n = read<int>();\n    for (int i = 1; i <= n; i++) {\n        int x = read<int>(), y = read<int>();\n        if (x < y) {        // \u7b2c\u4e00\u4e2a\u6570\u66f4\u5c0f, \u5f52\u4e3a\u7b2c\u4e00\u7c7b\n            // \u6309\u7b2c\u4e8c\u4e2a\u6570\u6392\u5e8f, \u56e0\u6b64\u53cd\u7740\u5b58\u653e, \u4e0b\u540c\n            a[++n1] = ppi(pii(y, x), i);\n        } else if (x > y) { // \u5426\u5219\u5f52\u4e3a\u7b2c\u4e8c\u7c7b\n            b[++n2] = ppi(pii(y, x), i);\n        }\n    }\n\n    if (n1 >= n2) { // \u9009\u7b2c\u4e00\u7c7b\n        sort(a + 1, a + n1 + 1, greater<ppi>()); // \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\n        printf(\"%d\\n\", n1);\n        for (int i = 1; i <= n1; i++) {\n            cout << a[i].second << ' ';\n        }\n    } else { // \u9009\u7b2c\u4e8c\u7c7b\n        sort(b + 1, b + n2 + 1); // \u4ece\u5c0f\u5230\u5927\u6392\u5e8f (\u9ed8\u8ba4\u6392\u5e8f)\n        printf(\"%d\\n\", n2);\n        for (int i = 1; i <= n2; i++) {\n            cout << b[i].second << ' ';\n        }\n    }\n    puts(\"\");\n\n    return 0;\n}\n\n```\n",
        "postTime": 1559729912,
        "uid": 22227,
        "name": "mraymes",
        "ccfLevel": 7,
        "title": "Solution for Codeforces Problem 1148D"
    }
]
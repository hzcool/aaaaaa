[
    {
        "content": "[\u6211\u7684blog](https://www.cnblogs.com/wangjunrui/p/12624553.html)\n\n> > \u9898\u76ee\u94fe\u63a5\uff1a[CF93D Flags](https://codeforces.com/problemset/problem/93/D)\n> >\n> > \u6d1b\u8c37\u7ffb\u8bd1\uff1a[CF93D Flags](https://www.luogu.com.cn/problem/CF93D)\n\n$$preface$$\n\n~~\u770b\u5230\u8fd9\u9053\u9898\u6ca1\u4eba\u5199\u9898\u89e3\u6211\u5c31\u6765\u6c34\u4e00\u7bc7\u5427~~\n\n$$solution$$\n\n\u6211\u4eec\u5148\u4e0d\u8003\u8651\u6761\u4ef6 $4$ \u3002\n\n\u8bbe\u6ee1\u8db3\u6761\u4ef6 $1,2,3$ \u65f6\u957f\u5ea6\u5728 $[1,x]$ \u4e4b\u95f4\u7684\u4e32\u7684\u4e2a\u6570 $g(x)$\n\n\u5c06 $x$ \u6309\u5947\u5076\u6027\u5212\u5206\uff0c~~\u901a\u8fc7\u7b80\u5355\u7684\u8ba1\u7b97~~\u53ef\u4ee5\u6c42\u51fa\n\n$$\ng(x)=\\left\\{\\begin{matrix}19\\times3^{\\frac{x}{2}-1}-7 & (x\\equiv0\\pmod2)\n\\\\ 11\\times3^{\\frac{x-1}2}-7 & (x\\equiv1\\pmod2)\n\n\\end{matrix}\\right.\n$$\n\n\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u52a0\u4e0a\u6761\u4ef6 $4$ \u7b2c\u4e00\u53cd\u5e94\u4e3a\u5c06\u7b54\u6848\u9664 $2$ \uff0c\u4f46\u662f\u8fd9\u79cd\u5904\u7406\u65f6\u4e0d\u6b63\u786e\u7684\uff0c\u4e00\u4e2a\u56de\u6587\u4e32\u672c\u6765\u53ea\u4f1a\u88ab\u8ba1\u7b97\u4e00\u6b21\u5374\u88ab\u9664 $2$ \u4e86\uff0c\u8bbe\u6ee1\u8db3\u9898\u76ee\u6240\u7ed9\u7684\u6240\u6709\u6761\u4ef6\u65f6\u957f\u5ea6\u5728 $[1,x]$ \u4e4b\u95f4\u7684\u4e32\u7684\u4e2a\u6570 $f(x)$ \u3002\n\n\u56e0\u4e3a  $1,2,3$ \u65f6\u957f\u5ea6\u5728 $[1,x]$ \u4e4b\u95f4\u7684\u56de\u6587\u4e32\u7684\u4e2a\u6570 $g(\\left \\lceil \\frac{x}{2} \\right \\rceil)$ \u3002\n\n\u6240\u4ee5 $f(x)=\\frac{g(x)+g(\\left \\lceil \\frac{x}{2} \\right \\rceil)}{2}$\n\n\u7b54\u6848\u4e3a $f(r)-f(l-1)$\n\n\n$$code$$\n```cpp\n#include <bits/stdc++.h>\n#define lowbit(x) ((x)&(-(x)))\n#define re register\n#define ll long long\n#define ull unsigned long long\n#define rep(i,a,b) for(re int i=a;i<=b;++i)\n#define per(i,a,b) for(re int i=a;i>=b;--i)\ntemplate<typename T>\ninline void read(T&x)\n{\n\tx=0;\n\tchar s=(char)getchar();\n\tbool f=false;\n\twhile(!(s>='0'&&s<='9'))\n\t{\n\t\tif(s=='-')\n\t\t\tf=true;\n\t\ts=(char)getchar();\n\t}\n\twhile(s>='0'&&s<='9')\n\t{\n\t\tx=(x<<1)+(x<<3)+s-'0';\n\t\ts=(char)getchar();\n\t}\n\tif(f)\n\t\tx=(~x)+1;\n}\ntemplate<typename T,typename ...T1>\ninline void read(T&x,T1&...x1)\n{\n\tread(x);\n\tread(x1...);\n}\ntemplate<typename T>\ninline void clear(T*array,int l,int r,int val)\n{\n\tmemset(&array[l],val,sizeof(T)*(r-l+1));\n}\nusing namespace std;\nconst int mod=1e9+7;\nconst int inv2=(mod+1)/2;\ninline ll quickpow(ll a,int b)\n{\n\tll res=1;\n\twhile(b)\n\t{\n\t\tif(b&1)\n\t\t\tres=res*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}\n\treturn res;\n}\ninline ll f(int x)\n{\n\tif(x==0)\n\t\treturn 0;\n\tif(x&1)\n\t\treturn (11*quickpow(3,x/2)-7)%mod;\n\telse\n\t\treturn (19*quickpow(3,x/2-1)-7)%mod;\n}\ninline ll g(int x)\n{\n\treturn (f(x)+f((x+1)>>1))*inv2%mod;\n}\nint n;\nsigned main()\n{\n\tint l,r;\n\tread(l,r);\n\tprintf(\"%lld\\n\",(g(r)-g(l-1)+mod)%mod);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1629045027,
        "uid": 133322,
        "name": "QwQ\u849f\u84bbwjr",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF93D \u3010Flags\u3011"
    }
]
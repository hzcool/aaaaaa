[
    {
        "content": "\u9996\u5148\u628a\u533a\u95f4\u6539\u6210 $[l,r)$ \u7684\u5f62\u5f0f\u7136\u540e\u79bb\u6563\u5316\u3002\n\n\u8003\u8651\u6bcf\u4e2a\u70b9\uff0c\u5982\u679c\u8fd9\u4e2a\u70b9\u4e0a\u5168\u90fd\u662f\u4e00\u4e2a\u989c\u8272\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u662f\u5bc4\u6389\u7684\uff0c\u53cd\u4e4b\u8986\u76d6\u5230\u8fd9\u4e2a\u70b9\u7684\u7ebf\u6bb5\u5c31\u5168\u90fd\u8fde\u901a\u4e86\u3002\n\n\u6211\u4eec\u628a\u7b2c\u4e8c\u79cd\u70b9\u79f0\u4f5c\u5173\u952e\u70b9\uff0c\u628a\u5b83\u4eec\u5355\u72ec\u62ce\u51fa\u6765\u6392\u4e2a\u5e8f\u3002\u6bcf\u4e2a\u7ebf\u6bb5\u80fd\u8986\u76d6\u5230\u7684\u5173\u952e\u70b9\u662f\u4e2a\u533a\u95f4\uff0c\u628a\u8fd9\u4e9b\u533a\u95f4\u6c42\u51fa\u6765\uff0c\u6c42\u4e2a\u5e76\u7136\u540e\u7b97\u8fde\u901a\u5757\u6570\u91cf\u5373\u53ef\uff0c\u8fd9\u4e2a\u4e1c\u897f\u6309\u7167\u5de6\u7aef\u70b9\u6392\u4e2a\u5e8f\u5c31\u80fd\u6c42\u3002\n\n$\\mathcal O(n\\log n)$\u3002\n\n```cpp\n\nconst int N=2e5+10;\nstruct seg{\n\tint l,r;\n}a[N],b[N];\nbool cmp(seg x,seg y){return x.l<y.l;}\nint c[N],pos[N];\nint t[N];\npii x[N];\nvoid sol()\n{\n\tint n=read(),m=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tc[i]=read();\n\t\ta[i].l=read(),a[i].r=read()+1;//[l,r)\n\t\tt[++m]=a[i].l,t[++m]=a[i].r;\n\t}\n\tsort(t+1,t+m+1),m=unique(t+1,t+m+1)-t-1;\n\tfor(int i=1;i<=n;i++)a[i].l=lower_bound(t+1,t+m+1,a[i].l)-t,a[i].r=lower_bound(t+1,t+m+1,a[i].r)-t;\n//\tfor(int i=1;i<=n;i++)printf(\"c=%d, [%d, %d)\\n\",c[i],a[i].l,a[i].r);\n\tfor(int i=1;i<=n;i++)x[i*2-1]=mp(a[i].l,c[i]<<1),x[i*2]=mp(a[i].r,c[i]<<1|1);//0:add, 1:del\n\tsort(x+1,x+2*n+1);int c0=0,c1=0,cnt=0;\n\tfor(int i=1;i<=n*2;i++)\n\t{\n\t\tint c=x[i].se>>1,tp=x[i].se&1;\n\t\tif(c==0&&tp==0)c0++;\n\t\telse if(c==0&&tp==1)c0--;\n\t\telse if(c==1&&tp==0)c1++;\n\t\telse if(c==1&&tp==1)c1--;\n\t\tif(i==n*2||x[i].fi!=x[i+1].fi){if(c0&&c1)pos[++cnt]=x[i].fi;}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tb[i].l=lower_bound(pos+1,pos+cnt+1,a[i].l)-pos,b[i].r=lower_bound(pos+1,pos+cnt+1,a[i].r)-pos-1;//[l,r]\n\tsort(b+1,b+n+1,cmp);\n\tint ans=0;\n//\tfor(int i=1;i<=n;i++)printf(\"[%d, %d]\\n\",b[i].l,b[i].r);\n\tfor(int i=1,r=-1;i<=n;i++)\n\t{\n\t\tif(b[i].l>b[i].r)ans++;\n\t\telse if(r<b[i].l)ans++,r=b[i].r;\n\t\telse r=max(r,b[i].r);\n//\t\tprintf(\"i=%d, r=%d\\n\",i,r);\n\t}\n\tprintf(\"%d\\n\",ans);\n}\nint main()\n{\n\tint T=read();\n\twhile(T--)sol();\n\treturn 0;\n}\n```",
        "postTime": 1656759620,
        "uid": 125913,
        "name": "zztqwq",
        "ccfLevel": 8,
        "title": "CF1691E"
    },
    {
        "content": "### \u505a\u6cd5 1\uff1aboruvka + \u7ebf\u6bb5\u6811\n\n\u8003\u8651\u5efa\u51fa\u751f\u6210\u68ee\u6797\u7136\u540e\u7edf\u8ba1\u751f\u6210\u68ee\u6797\u4e2d\u8fde\u901a\u5757\u7684\u4e2a\u6570\u3002\u4f7f\u7528\u7c7b\u4f3c boruvka \u7684\u601d\u60f3\u3002\u7b97\u6cd5\u6bcf\u4e00\u8f6e\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u901a\u5757\u627e\u5230\u662f\u5426\u5b58\u5728\u4e00\u6761\u548c\u5176\u4ed6\u8fde\u901a\u5757\u4e4b\u95f4\u7684\u8fb9\u3002\u8fd9\u90e8\u5206\u53ef\u4ee5\u4f7f\u7528\u7ebf\u6bb5\u6811\u4f18\u5316\u3002\u6ce8\u610f\u4e00\u5b9a\u8981\u6b63\u7740\u627e\u4e00\u904d\u5012\u7740\u627e\u4e00\u904d\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e00\u4e2a\u8fde\u901a\u5757\u800c\u8a00\u6709\u53ef\u80fd\u5411\u524d\u627e\u627e\u4e0d\u5230\u8fb9\u5411\u540e\u627e\u80fd\u627e\u5230\u8fb9\u800c\u8fd9\u6761\u8fb9\u6ca1\u88ab\u679a\u4e3e\u5bfc\u81f4\u6bcf\u8f6e\u8fde\u901a\u5757\u4e2a\u6570\u4e0d\u80fd\u51cf\u534a\u3002\u590d\u6742\u5ea6 $O(n\\log ^2n)$\u3002\n\n[\u4ee3\u7801](https://codeforces.com/contest/1691/submission/159139562)\n\n### \u505a\u6cd52\uff1a\u62c6\u4e8b\u4ef6 + \u8d2a\u5fc3\n\n\u8003\u8651\u4e00\u79cd\u6734\u7d20\u7684\u8fde\u8fb9\u7b97\u6cd5\u3002\u5bf9\u4e8e\u4e24\u6761\u6709\u8fb9\u7684\u7ebf\u6bb5 $[l_1,r_1],[l_2,r_2]$\uff0c\u5982\u679c $l_1<l_2$\uff0c\u90a3\u4e48\u4e00\u5b9a\u6709 $l_2\\in [l_1,r_1]$\u3002\u5373\u7ebf\u6bb5 $[l_1,r_1]$ \u201c\u8986\u76d6\u201d\u4e86\u70b9 $l_2$\uff0c\u8003\u8651\u5728\u5904\u7406 $[l_2,r_2]$ \u65f6\u5904\u7406\u8fd9\u6761\u8fb9\u3002\u8003\u8651\u5c06\u4e00\u6761\u7ebf\u6bb5 $[l,r]$ \u62c6\u6210\u4e24\u4e2a\u5728\u65f6\u523b $l$ \u548c $r$ \u7684\u4e8b\u4ef6\u6309\u65f6\u95f4\u7ef4\u626b\u63cf\u7ebf\u3002\u5728\u626b\u5230\u5de6\u7aef\u70b9\u65f6\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\u626b\u5230\u53f3\u7aef\u70b9\u65f6\u5220\u6389\u4e00\u6761\u7ebf\u6bb5\u3002\u5bf9\u4e8e\u70b9 $k$\uff0c\u5c06\u5de6\u7aef\u70b9\u5728 $[1,l]$ \u8303\u56f4\u5185\u7684\u7ebf\u6bb5\u90fd\u52a0\u5165\u540e\u8fd8\u672a\u5220\u7684\u7ebf\u6bb5\u5373\u8986\u76d6\u70b9 $k$ \u7684\u7ebf\u6bb5\u3002\n\n\u90a3\u4e48\u8fd9\u91cc\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u66b4\u529b\u505a\u6cd5\uff1a\n\n\n* \u5c06\u6240\u6709\u7ebf\u6bb5\u62c6\u6210\u4e24\u4e2a\u4e8b\u4ef6\uff08\u52a0\u5165\u548c\u5220\u9664\uff09\u6392\u5e8f\uff0c\u6bcf\u4e2a\u65f6\u523b\u53ea\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u3002\u5f00\u4e24\u4e2a\u96c6\u5408\u8868\u793a\u4e24\u79cd\u989c\u8272\u7ebf\u6bb5\u5df2\u7ecf\u52a0\u5165\u4f46\u672a\u5220\u9664\u7684\u7ebf\u6bb5\u3002\n\n* \u5bf9\u4e8e\u4e24\u6761\u76f8\u4ea4\u7684\u7ebf\u6bb5 $[l_1,r_1]$\uff0c$[l_2,r_2]$ \u5728\u52a0\u5165\u540e\u52a0\u5165\u7684\u7ebf\u6bb5\u65f6\u8fde\u8fb9\u3002\n\n* \u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\u65f6\u626b\u4e0e\u8be5\u7ebf\u6bb5\u989c\u8272\u76f8\u5f02\u7684\u96c6\u5408\u5411\u96c6\u5408\u5185\u7684\u6240\u6709\u7ebf\u6bb5\u8fde\u8fb9\u3002\n\n\u4ee4 $f_i$ \u8868\u793a\u52a0\u5165\u5de6\u7aef\u70b9\u5728 $[1,l_i]$ \u7684\u7ebf\u6bb5\u540e\u6709\u591a\u5c11\u6761\u989c\u8272\u4e0e $i$ \u76f8\u5f02\u7684\u7ebf\u6bb5\u8fd8\u672a\u88ab\u5220\u3002\u66b4\u529b\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u5373 $O(\\sum f_i)=O(n^2)$\u3002\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u8d2a\u5fc3\u7b56\u7565\uff1a\u5728\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\u8fde\u8fb9\u540e\u53ea\u4fdd\u7559\u53e6\u4e00\u4e2a\u989c\u8272\u96c6\u5408\u4e2d\u53f3\u7aef\u70b9\u6700\u5927\u7684\u7ebf\u6bb5\u4e0d\u5f71\u54cd\u8fde\u901a\u6027\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u94a6\u5b9a\u989c\u8272\u7684\u7ebf\u6bb5 $p_1,p_2,...,p_k$ \u8ba1\u7b97 $\\sum f_i$\uff0c\u56e0\u4e3a\u5904\u7406\u5b8c\u4e00\u6761\u7ebf\u6bb5\u540e $f$ \u53d8\u6210 $1$\u3002\u6240\u4ee5 $\\sum f_i=O(n)$\u3002\n\n\u7528 set \u7ef4\u62a4\u7ebf\u6bb5\u96c6\u5408\uff0c\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n[\u4ee3\u7801](https://codeforces.com/contest/1691/submission/159156663)\n\n",
        "postTime": 1654132439,
        "uid": 317459,
        "name": "RyexAwl",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011CF1691E Number of Groups"
    },
    {
        "content": "# Number of Groups\n\n## \u89e3\u6790\uff1a\n\n### \u9898\u76ee\u5927\u610f\uff1a\n\n\u6570\u8f74\u4e0a\u6709 $n$ \u4e2a\u7ebf\u6bb5\uff0c\u6bcf\u6bb5\u7684\u989c\u8272\u4e3a\u7ea2\u8272\u6216\u84dd\u8272\u3002\u7b2c $i$ \u6bb5\u7684\u989c\u8272\u4e3a $c_i$ \uff08\u5982\u679c $c_i=0$ \u5219\u4e3a\u7ea2\u8272\u6bb5\uff0c\u5982\u679c $c_i=1$ \u5219\u4e3a\u84dd\u8272\u6bb5\uff09\uff0c\u8be5\u6bb5\u5305\u542b\u7684\u70b9\u7684\u8303\u56f4\u4e3a $[l_i,r_i]$ \u3002\n\n\u5982\u679c\u4e24\u4e2a**\u4e0d\u540c\u989c\u8272**\u7684\u6bb5\u76f8\u4ea4\uff08\u6709\u81f3\u5c11\u5171\u4eab\u4e00\u4e2a\u516c\u5171\u70b9\uff09\uff0c\u5219\u8ba4\u4e3a\u5b83\u4eec\u662f\u8fde\u63a5\u7684\u3002\u5982\u679c\u4e24\u4e2a\u989c\u8272\u6bb5\u76f4\u63a5\u8fde\u63a5\u6216\u901a\u8fc7\u4e00\u7cfb\u5217\u76f4\u63a5\u8fde\u63a5\u7684\u6bb5\u8fde\u63a5\uff0c\u5219\u5b83\u4eec\u5c5e\u4e8e\u540c\u4e00\u7ec4\u3002\u8bf7\u4f60\u67e5\u627e\u989c\u8272\u6bb5\u7684\u7ec4\u6570\u3002\n\n- ($1 \\leq n \\leq 10^5 $)\n- ($0 \\leq c_i \\leq 1, 0 \\leq l_i \\leq r_i \\leq 10^9$)\n\n--------------------------\n\n### \u601d\u8def\uff1a\n\n\u7ebf\u6bb5\u6811\u4e71\u641e\u3002\n\n\u6211\u4eec\u8003\u8651\u679a\u4e3e\u989c\u8272\uff08\u5176\u5b9e\u5c31\u4e24\u4e2a\uff09\uff0c\u8003\u8651\u8fd9\u4e2a\u989c\u8272\u7684\u6240\u6709\u7ebf\u6bb5\u5206\u522b\u8ddf\u8c01\u76f8\u8fde\uff0c\u5982\u679c\u6211\u4eec\u80fd\u7ef4\u62a4\u8fd9\u4e2a\u4e1c\u897f\u5e76\u7528\u5e76\u67e5\u96c6\u5408\u5e76\uff0c\u5c31\u53ef\u4ee5\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u6211\u4eec\u8003\u8651\u5148\u5bf9\u53e6\u4e00\u4e2a\u989c\u8272 $y$ \u6309 $r$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u6211\u4eec\u679a\u4e3e\u8fd9\u4e2a\u989c\u8272 $x$ \u7684\u6240\u6709\u7ebf\u6bb5\uff0c\u56e0\u4e3a $y$ \u7684\u5750\u6807\u6709\u5e8f\uff0c\u5982\u679c\u5f53\u524d\u7ebf\u6bb5 $i$ \u60f3\u8981\u548c\u989c\u8272 $y$ \u7684\u7ebf\u6bb5\u76f8\u8fde\uff0c\u90a3\u4e48\u5f53\u4e14\u4ec5\u5f53 $r_j\\in[l_i,r_i]$\uff0c\u8fd9\u6837\u7684 $r_j$ \u4e00\u5b9a\u662f\u4e0b\u6807\u4e0a\u8fde\u7eed\u7684\u4e00\u6bb5\uff0c\u6211\u4eec\u8003\u8651\u5bf9\u989c\u8272 $y$ \u5efa\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u5f00\u4e00\u4e2a `vector` \u7ef4\u62a4\u8986\u76d6\u4e86\u5f53\u524d\u533a\u95f4\u4e0a\u8868\u793a\u7684\u6240\u6709\u7ebf\u6bb5\u7684\u989c\u8272 $x$ \u7684\u96c6\u5408\uff0c\u8003\u8651\u6807\u8bb0\u6c38\u4e45\u5316\u601d\u60f3\uff0c\u7531\u4e8e\u6bcf\u4e2a $i$ \u53ea\u4f1a\u5bf9\u5e94\u4e00\u4e2a\u533a\u95f4\uff0c\u800c\u6bcf\u4e2a\u533a\u95f4\u6700\u591a\u4f1a\u88ab\u5206\u6210 $\\log n$ \u4e2a\u5c0f\u533a\u95f4\uff0c\u8fd9\u6837\u6240\u6709\u6807\u8bb0\u7684\u603b\u548c\u4e0d\u4f1a\u8d85\u8fc7 $n \\log n$\uff0c\u590d\u6742\u5ea6\u662f\u6b63\u786e\u7684\u3002\n\n\u73b0\u5728\u6240\u6709\u7ebf\u6bb5\u5bf9\u5e94\u7684\u533a\u95f4\u90fd\u5df2\u7ecf\u6807\u8bb0\u5b8c\u6210\uff0c\u6211\u4eec\u5148\u8003\u8651\u989c\u8272 $y$ \u7684\u7ebf\u6bb5\u5982\u679c\u7528\u5e76\u67e5\u96c6\u548c $x$ \u8fde\u63a5\uff0c\u7531\u4e8e\u6211\u4eec\u662f\u5bf9\u989c\u8272 $y$ \u7684\u5750\u6807\u5f00\u7684\u7ebf\u6bb5\u6811\uff0c\u6240\u6709\u5bf9\u4e8e\u6bcf\u4e2a\u7ebf\u6bb5\u53ea\u9700\u8981\u548c\u4ed6\u4e0a\u9762 $\\log$ \u4e2a\u533a\u95f4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u6807\u8bb0\u5408\u5e76\u5373\u53ef\uff0c\u4e3a\u4e86\u65b9\u4fbf\u6211\u4eec\u94a6\u5b9a\u9009\u62e9\u7ebf\u6bb5\u6811\u4ece\u4e0a\u5f80\u4e0b\u7b2c\u4e00\u4e2a\u51fa\u73b0\u7684\u6807\u8bb0\u4e3a\u5408\u5e76\u5bf9\u8c61\u3002\n\n\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u6807\u8bb0\u5982\u4f55\u5408\u5e76\uff0c\u56e0\u4e3a\u4ed6\u4eec\u6709\u5171\u540c\u53ef\u4ee5\u8fde\u63a5\u7684\u989c\u8272 $y$ \u7684\u7ebf\u6bb5\uff0c\u6240\u4ee5\u540c\u5c5e\u4e00\u4e2a\u96c6\u5408\uff0c\u6211\u4eec\u4e5f\u662f\u5bf9\u4e8e\u6bcf\u4e2a\u6807\u8bb0\u5408\u5e76\u8fd9\u4e2a\u533a\u95f4\u4e0a\u9762 $\\log$ \u4e2a\u533a\u95f4\u4e2d\u7b2c\u4e00\u4e2a\u51fa\u73b0\u7684\u6807\u8bb0\uff0c\u8fd9\u6837\u5c31\u628a\u6240\u6709\u7ebf\u6bb5\u8fde\u63a5\u8d77\u6765\u4e86\u3002\n\n\u8fd9\u6837\u5408\u5e76\u6709\u4e00\u4e2a\u6f0f\u6d1e\uff0c\u5c31\u662f\u5982\u679c\u679a\u4e3e\u7684\u7ebf\u6bb5\u88ab\u67d0\u4e2a\u7ebf\u6bb5\u5b8c\u5168\u5305\u542b\uff08\u5373 $l_j<l_i\\leq r_i<r_j$\uff09\uff0c\u8fd9\u6837\u4e0d\u7ba1\u5bf9 $l$ \u6392\u5e8f\u8fd8\u662f\u5bf9 $r$ \u6392\u5e8f\u90fd\u4e0d\u80fd\u88ab\u5224\u5b9a\u4e0e $i$ \u76f8\u8fde\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u679a\u4e3e $j$ \u91cd\u65b0\u505a\u4e00\u904d\u4e0a\u8ff0\u6d41\u7a0b\uff0c\u4e5f\u5c31\u662f\u4ea4\u6362 $x,y$\u3002\n\n\u590d\u6742\u5ea6\u662f $\\mathcal O(n\\log n+n\\log^2n)$\uff0c\u4f46\u5e38\u6570\u5f88\u5c0f\uff0c\u5e76\u4e14\u5b58\u5728\u5355 $\\log$ \u505a\u6cd5\u3002\n\n----------------------------------------------------\n\n## code\uff1a\n\n```c++\n#include <bits/stdc++.h>\n#define eb emplace_back\n#define lob lower_bound\n#define upb upper_bound\nusing namespace std;\nconst int N = 1e5 + 10;\ntypedef pair <int, int> pii;\ninline int read ()\n{\n    int x = 0, f = 1;\n    char ch = getchar ();\n    while (ch < '0' || ch > '9') { if (ch == '-') f = -1; ch = getchar (); }\n    while (ch >= '0' && ch <= '9') { x = (x << 1) + (x << 3) + (ch ^ 48); ch = getchar (); }\n    return x * f;\n}\nint n;\nstruct Line {\n    int l, r, id;\n    Line () { }\n    Line (int _l, int _r, int _id) { l = _l; r = _r; id = _id; }\n    bool operator < (const Line &A) const {\n        return r < A.r;\n    }\n} line[2][N];\nbool cmp (Line x, Line y) { return x.r == y.r ? x.l < y.l : x.r < y.r; }\nint cnt[2];\nstruct DSU {\n    int fa[N];\n    void init () { for (int i = 1; i <= n; i++) fa[i] = i; }\n    inline int find (int x) { return x == fa[x] ? x : fa[x] = find (fa[x]); }\n    void merge (int x, int y)\n    {\n        int fx = find (x), fy = find (y);\n        if (fx != fy) fa[fx] = fy;\n    }\n}d;\nstruct Seg_tree {\n    #define lson rt << 1\n    #define rson rt << 1 | 1\n    struct seg_tree {\n        vector <int> vec;\n        #define vec(rt, i) tree[rt].vec[i]\n    } tree[N << 2];\n    void build (int rt, int l, int r)\n    {\n        if(tree[rt].vec.size ()) tree[rt].vec.clear ();\n        if (l == r) return ;\n        int mid = (l + r) >> 1;\n        build (lson, l, mid);\n        build (rson, mid + 1, r);\n    }\n    void modify (int rt, int l, int r, int L, int R, int id)\n    {\n        if (L <= l && r <= R)\n        {\n            tree[rt].vec.eb (id);\n            return ;\n        }\n        int mid = (l + r) >> 1;\n        if (L <= mid) modify (lson, l, mid, L, R, id);\n        if (R > mid) modify (rson, mid + 1, r, L, R, id);\n    }\n    void merge (int rt, int l, int r, int id, int x, int y)\n    {\n        if (!id && tree[rt].vec.size ()) id = vec(rt, 0);\n        if (id) for (int i = 0; i < tree[rt].vec.size (); i++) d.merge (id, vec(rt, i));\n        if (l == r)\n        {\n            if (id) d.merge (line[y][l].id, id);\n            return ;\n        }\n        int mid = (l + r) >> 1;\n        merge (lson, l, mid, id, x, y);\n        merge (rson, mid + 1, r, id, x, y);\n    }\n} T;\nvoid merge (int x, int y)\n{\n    T.build (1, 1, cnt[y]);\n    for (int i = 1; i <= cnt[x]; i++)\n    {\n        if (line[x][i].r < line[y][1].r || line[x][i].l > line[y][cnt[y]].r) continue;\n        int l = lob (line[y] + 1, line[y] + cnt[y] + 1, (Line) {0, line[x][i].l, 0}) - line[y];\n        int r = upb (line[y] + 1, line[y] + cnt[y] + 1, (Line) {0, line[x][i].r, 0}) - line[y] - 1;\n        if (line[x][i].r >= line[y][cnt[y]].r) r = cnt[y];\n        if (l > r) continue;\n        T.modify (1, 1, cnt[y], l, r, line[x][i].id);\n    }\n    T.merge (1, 1, cnt[y], 0, x, y);\n}\nvoid solve ()\n{\n    cnt[0] = cnt[1] = 0;\n    n = read ();\n    for (int i = 1; i <= n; i++)\n    {\n        int c = read (), l = read (), r = read ();\n        line[c][++cnt[c]] = Line(l, r, i);\n    }\n    if (!cnt[0] || !cnt[1]) { printf(\"%d\\n\", n); return ; }\n    d.init ();\n    sort (line[1] + 1, line[1] + cnt[1] + 1, cmp);\n    merge (0, 1);\n    sort (line[0] + 1, line[0] + cnt[0] + 1, cmp);\n    merge (1, 0);\n    int ans = 0;\n    for (int i = 1; i <= n; i++) ans += (d.fa[i] == i);\n    printf (\"%d\\n\", ans);\n}\nsigned main()\n{\n    int t = read ();\n    while (t--) solve ();\n    return 0;\n}\n```\n",
        "postTime": 1656728950,
        "uid": 177837,
        "name": "violin_wyl",
        "ccfLevel": 6,
        "title": "CF1691E Number of Groups"
    },
    {
        "content": "# \u9898\u76ee\u5927\u610f\n\u7ed9\u4e00\u4e9b\u9ed1\u8272\u767d\u8272\u7684\u7ebf\u6bb5\uff0c\u82e5\u4e24\u4e2a\u7ebf\u6bb5\u989c\u8272\u4e0d\u540c\u4e14\u76f8\u4ea4\u5219\u8fde\u4e00\u6761\u8fb9\uff0c\u8be2\u95ee\u6700\u7ec8\u4e00\u5171\u6709\u591a\u5c11\u4e2a\u8fde\u901a\u5757\uff1f\n\n# \u89e3\u51b3\u65b9\u6848\n\u4ecb\u7ecd\u4e00\u79cd\u4e0d\u7528\u7ebf\u6bb5\u6811\u4e14\u7279\u522b\u597d\u5199\u7684\u505a\u6cd5\uff0c\u8003\u8651\u5c06\u4e24\u79cd\u989c\u8272\u5206\u5f00\u8003\u8651\uff08\u4e3a\u4e86\u65b9\u4fbf\u753b\u56fe\uff0c\u5c06\u7ebf\u6bb5\u6539\u4e3a\u7ea2\u8272\u548c\u84dd\u8272\uff09\uff0c\u5047\u8bbe\u73b0\u5728\u7ebf\u6bb5\u4e0a\u53ea\u6709\u84dd\u8272\u7684\u7ebf\u6bb5\u3002\n\n\u73b0\u5728\u52a0\u5165\u4e86\u4e00\u6761\u7ea2\u8272\u7ebf\u6bb5\u3002\u53d1\u73b0\u8be5\u7ebf\u6bb5\u5b9e\u9645\u4e0a\u662f\u5c06 $1$\uff0c$2$\uff0c$3$ \u5408\u5e76\u5230\u4e86\u4e00\u4e2a\u96c6\u5408\u4e2d\u3002(\u81ea\u5df1\u4e5f\u52a0\u5165\u8be5\u96c6\u5408)\n![](https://cdn.luogu.com.cn/upload/image_hosting/y23pxqj4.png)\n\n\u90a3\u53ef\u4ee5\u8003\u8651\u4e3a\uff0c\u6bcf\u6b21\u52a0\u5165\u4e00\u4e2a\u7ea2\u8272\u7ebf\u6bb5\uff0c\u90fd\u5c06\u8ddf\u5b83\u6709\u4ea4\u7684\u84dd\u8272\u7ebf\u6bb5\u5408\u5e76\u8d77\u6765\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a $[l_{i},r_{i}]$ \u7684\u533a\u95f4\u4e0e $[l_{j},r_{j}]$ \u7684\u533a\u95f4\u6709\u4ea4\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\uff1a\n\n $l_{i}\\le r_{j}$  \u4e14  $r_{i} \\ge l_{j}$ \n\n\u6240\u4ee5\u5bf9\u4e8e\u84dd\u8272\u7ebf\u6bb5\u6309\u7167\u5de6\u7aef\u70b9\u6392\u5e8f\uff0c\u7ea2\u8272\u7ebf\u6bb5\u6309\u53f3\u7aef\u70b9\u6392\u5e8f\u3002\n\n\u8003\u8651\u5230\u67d0\u6761\u7ea2\u8272\u7ebf\u6bb5\uff0c\u5219\u5c06\u6240\u6709\u5de6\u7aef\u70b9\u5c0f\u4e8e\u8be5\u7ea2\u8272\u7ebf\u6bb5\u53f3\u7aef\u70b9\u7684\u503c\u90fd\u52a0\u5165\u8fdb\u53bb\u3002\n\n\u6b64\u65f6\u53ea\u9700\u8981\u8003\u8651\u52a0\u5165\u7684\u84dd\u8272\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\uff0c\u662f\u5426\u5927\u4e8e\u8be5\u7ea2\u8272\u7ebf\u6bb5\u7684\u5de6\u7aef\u70b9\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u7528\u4e00\u4e2a\u4f18\u5148\u961f\u5217\u7ef4\u62a4\u52a0\u5165\u7684\u84dd\u8272\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\u3002\u5728\u4e00\u6761\u7ea2\u8272\u7ebf\u6bb5\u5408\u5e76\u4e86\u51e0\u4e2a\u84dd\u8272\u7ebf\u6bb5\u540e\uff0c\u518d\u5c06\u6700\u5927\u7684\u53f3\u7aef\u70b9\u5165\u8fdb\u53bb\uff0c\u6765\u4ee3\u66ff\u88ab\u5408\u5e76\u7684\u8fd9\u51e0\u4e2a\u84dd\u8272\u7ebf\u6bb5\u3002\uff08\u62ff\u6700\u5927\u7684\u4ee3\u66ff\uff0c\u662f\u56e0\u4e3a\u53ef\u4ee5\u60f3\u8c61\u6210\u5c06\u8fd9\u4e9b\u84dd\u8272\u7ebf\u6bb5\u5408\u6210\u4e86\u4e00\u4e2a\uff0c\u6b64\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\u5c31\u662f\u6700\u5927\u7684\u53f3\u7aef\u70b9\uff09\u3002 \n\n\u5c0f\u7ec6\u8282\uff1a\u5982\u679c\u8be5\u7ea2\u7ebf\u6ca1\u6709\u5408\u5e76\u4efb\u4f55\u84dd\u7ebf\uff0c\u90a3\u4e48\u5b83\u81ea\u5df1\u5c31\u662f\u4e00\u4e2a\u65b0\u7684\u8fde\u901a\u5757\u3002\n\n# \u4ee3\u7801\u5b9e\u73b0\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\n\nll read() {\n    ll x = 0, f = 1; char ch = getchar();\n    while(ch < '0' || ch > '9') {if(ch == '-') f = -1; ch = getchar();}\n    while(ch >= '0' && ch <= '9') {x = (x << 3) + (x << 1) + (ch ^ 48); ch = getchar();}\n    return x * f;\n}\n\nstruct node {int l, r;}p[1000010], q[1000010];\nll tip0, tip1, tip, ans, n;\npriority_queue<int> qe;\n\nint main() {\n    for(int T = read(); T; T--) {\n        n = read(); tip1 = tip0 = ans = 0; tip = 1;\n        for(int i = 1; i <= n; i++) {\n            int opt = read(), l = read(), r = read();\n            if(opt) p[++tip1] = {l, r}, ans++;\n            else q[++tip0] = {l, r};\n        }\n        sort(p + 1, p + 1 + tip1, [](node a, node b) {return a.l < b.l;});\n        sort(q + 1, q + 1 + tip0, [](node a, node b) {return a.r < b.r;});\n        for(int i = 1; i <= tip0; i++) {\n            while(tip <= tip1 && p[tip].l <= q[i].r) qe.push(p[tip++].r);\n            if(!qe.empty() && q[i].l <= qe.top()) {\n                int w = qe.top(); qe.pop();\n                while(!qe.empty() && q[i].l <= qe.top()) ans--, qe.pop();\n                qe.push(w);\n            }\n            else ans++;//\u82e5\u6ca1\u6709\u5408\u5e76\u4efb\u4f55\u84dd\u7ebf\n        }\n        while(!qe.empty()) qe.pop(); printf(\"%lld\\n\", ans);\n    }\n    return 0;\n}\n```\n",
        "postTime": 1676375915,
        "uid": 134339,
        "name": "CruiseY",
        "ccfLevel": 7,
        "title": "CF1691E\u9898\u89e3"
    }
]
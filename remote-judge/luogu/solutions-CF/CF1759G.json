[
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n$t(1\\leq t\\leq 10^4)$ \u7ec4\u6570\u636e\uff0c\u6bcf\u7ec4\u6570\u636e\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a $n\\over2$ \u7684\u6570\u5217 $b\\ (2\\leq n\\leq 2\\cdot10^5,2\\leq \\sum n\\leq 2\\cdot 10^5)$\u3002   \n\n\u8bf7\u627e\u51fa\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6392\u5217 $p$, \u4f7f\u5f97\u5bf9\u4e8e $\u2200i\u2208[1,n/2]$, \u6ee1\u8db3 $b_i=\\max(p_{2i-1},p_{2i})$\uff0c\u5e76\u4e14\u4f7f\u5f97\u6392\u5217 $p$ \u7684\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u82e5\u4e0d\u5b58\u5728\u5219\u8f93\u51fa $-1$\u3002  \n\n## \u9898\u76ee\u5206\u6790\n\u770b\u5230\u5b57\u5178\u5e8f\u7684\u9650\u5236\uff0c\u8003\u8651\u4ece\u540e\u5411\u524d\uff0c\u8d2a\u5fc3\u5730\u9009\u53d6\u80fd\u7528\u7684\u6700\u5927\u5143\u7d20\uff0c\u4e0b\u9762\u8bc1\u660e\u8fd9\u79cd\u505a\u6cd5\u7684\u6b63\u786e\u6027\u3002  \n\n1. \u9996\u5148\uff0c\u56e0\u4e3a\u65e0\u89e3\u7684\u5145\u8981\u6761\u4ef6\u662f $\\exists\\ i\u2208[1,n]$, \u4f7f\u5f97 $[1,i]$ \u4e2d\u6709\u8d85\u8fc7 $i\\over2$ \u4e2a\u6570\u5728 $b$ \u4e2d\uff0c\u663e\u7136\u8fd9\u4e2a\u505a\u6cd5\u7684\u6784\u9020\u4e0d\u4f1a\u8bef\u5224\u65e0\u89e3\u3002  \n\n2. \u518d\u8003\u8651\u5b57\u5178\u5e8f\u3002\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u6784\u9020\u51fa\u7684 $p_1$ \u5e76\u4e0d\u6700\u5c0f\uff0c\u90a3\u4e48\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a $i\\geq1$, \u4f7f\u5f97 $p_1$ \u53ef\u4ee5\u4e0e $p_{2i-1}$ \u4e92\u6362\uff0c\u800c\u8fd9\u4e0e\u6211\u4eec\u6784\u9020\u6570\u5217\u7684\u65b9\u6cd5\u77db\u76fe\uff0c\u6545 $p_1$ \u4e00\u5b9a\u6ee1\u8db3\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u8981\u6c42\u3002\u540c\u7406\uff0c\u5728\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u524d\u63d0\u4e0b\uff08\u5373 $p_{1...2i}$ \u56fa\u5b9a\uff09\uff0c$p_{2i+1}$ \u4e5f\u4e00\u5b9a\u6ee1\u8db3\u8981\u6c42\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6392\u5217 $p$ \u7684\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\n\n## \u4ee3\u7801\n\u7528 map/set \u5373\u53ef\u3002\n```cpp\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <set>\nusing namespace std;\nint t,n,b[100005],c[100005];\nset <int> s;\nint main()\n{\n\tcin>>t;\n\twhile(t--)\n\t{\n\t\tcin>>n;\n\t\ts.clear();\n\t\tbool flag=0;\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\ts.insert(i);\n\t\t}\n\t\tfor(int i=1;i<=n/2;i++)\n\t\t{\n\t\t\tcin>>b[i];\n\t\t\tif(s.find(b[i])==s.end())//\u7279\u5224\u65e0\u89e3 \n\t\t\t{\n\t\t\t\tflag=1;\n\t\t\t}\n\t\t\ts.erase(b[i]);\n\t\t}\n\t\tif(flag)\n\t\t{\n\t\t\tcout<<\"-1\"<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=n/2;i>=1;i--)\n\t\t{\n\t\t\tauto it=s.upper_bound(b[i]);\n\t\t\tif(it==s.begin())//\u7279\u5224\u65e0\u89e3 \n\t\t\t{\n\t\t\t\tflag=1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tit--;\n\t\t\tc[i]=*it;\n\t\t\ts.erase(c[i]);\n\t\t}\n\t\tif(flag)\n\t\t{\n\t\t\tcout<<\"-1\"<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=1;i<=n/2;i++)\n\t\t{\n\t\t\tcout<<c[i]<<\" \"<<b[i]<<\" \";\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n```\n\u4ee3\u7801\u5199\u5f97\u5f88\u4e71\u3002",
        "postTime": 1668943755,
        "uid": 529697,
        "name": "PEKKA_l",
        "ccfLevel": 6,
        "title": "CF1759G\u9898\u89e3"
    },
    {
        "content": "\u95f2\u8bdd\uff1a \u611f\u89c9\u6ca1\u6709 \\*1900 \u554a\uff0c\u4e2a\u4eba\u611f\u89c9 1759E\uff08\\*1500\uff09\u6bd4\u8fd9\u4e2a\u96be qwq\n\n\u9898\u610f\n---\n\u7ed9\u5b9a $b_1\\sim b_\\frac n2$\uff0c\u6c42\u4e00\u4e2a\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u6392\u5217 $p_1\\sim p_n$ \u4f7f\u5f97 $\\forall i\\in[1,\\frac n2] \\text{ s.t. }b_i = \\max(p_{2i-1},p_{2i})$\u3002\n\n\u4fdd\u8bc1 $n$ \u662f\u5076\u6570\uff0c\u4e14 $\\sum n\\leqslant 2\\times10^5$\u3002\n\n\u89e3\u6cd5\n---\n\u9996\u5148\u663e\u7136\u6211\u4eec\u9700\u8981\u8d2a\u5fc3\u5730\u628a\u5927\u6570\u5f80\u540e\u9762\u653e\u3002\n\n1. \u663e\u7136 $b_i=p_{2i}$\uff08\u663e\u7136\u5f53 $p_{2i-1} > p_{2i}$ \u65f6\u4ea4\u6362 $p_{2i-1}$ \u548c $p_{2i}$ \u4f1a\u4f7f\u5b57\u5178\u5e8f\u53d8\u5c0f\uff0c\u66f4\u4f18\uff09\uff0c\u6240\u4ee5\u7531 $p_{2i-1} < p_{2i}$ \u5f97 $p_{2i-1} < b_i$\u3002\n2. \u8bbe $x\\in[1,n]$ \u4e14 $\\forall i\\text{ s.t. }x \\not= b_i$\uff08\u56e0\u4e3a\u5f53 $x=b_i$ \u65f6\u8fd9\u4e2a $x$ \u5df2\u7ecf\u88ab\u56fa\u5b9a\u4f4d\u7f6e\u4e86\uff09\uff0c\u90a3\u4e48\u8fd9\u4e2a $x$ \u9700\u8981\u5c3d\u53ef\u80fd\u5f80\u540e\u653e\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c $x$ \u9700\u8981\u653e\u5728 $\\max\\limits_{b_i > x}(2i)-1$ \u7684\u4f4d\u7f6e\u3002\n3. \u5982\u679c $\\forall i \\text{ s.t. } b_i\\leqslant x$ \u90a3\u4e48\u4e00\u5b9a\u65e0\u89e3\uff0c\u56e0\u4e3a\u4f60 $x$ \u6ca1\u5904\u653e\u3002\u6216\u8005\u6362\u53e5\u8bdd\u8bf4\uff0c$x$ \u653e\u54ea\u91cc\u90fd\u4f1a\u4f7f $b_?$ \u7684\u503c\u548c\u7ed9\u5b9a\u503c\u4e0d\u4e00\u6837\u3002\n4. \u4e0a\u8ff0\u8fc7\u7a0b\u53ef\u4ee5\u7528\u5806\u5b9e\u73b0\u3002\n\n```\nint a[N], b[N];// a[i] <-> p[2i-1]; b[i] <-> p[2i]\nint vis[N];//\u6bcf\u4e2ab\u6570\u503c\u51fa\u73b0\u7684\u4f4d\u7f6e / 2\nbool major(int T = 1) {\n\tint n = read(); for(int i = 1; i <= n; i++) vis[i] = 0;\n\tfor(int i = 1; i <= n >> 1; i++) vis[b[i] = read()] = i;\n\tpriority_queue<int> s;\n\tfor(int i = n; i; i--) {\n\t\tif(vis[i]) s.push(vis[i]);\n\t\telse if(s.empty()) return puts(\"-1\");\n\t\telse a[s.top()] = i, s.pop();\n\t}\n\tfor(int i = 1; i <= n >> 1; i++) printf(\"%d %d%c\", a[i], b[i], \" \\n\"[i == n]);\n\treturn 0;\n}\n```",
        "postTime": 1669002363,
        "uid": 592895,
        "name": "y_kx_b",
        "ccfLevel": 6,
        "title": "CF1759G Restore_the_Permutation Solution"
    },
    {
        "content": "\u9898\u610f\u7b80\u5316\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u6392\u5217 $p$\uff0c$b_i=\\max(p_{2i-1},p_{2i})$\u3002\u6784\u9020\u4e00\u4e2a\u7b26\u5408\u9898\u610f\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u6392\u5217\u3002\n\n\u5148\u5224\u65e0\u89e3\u7684\u60c5\u51b5\uff0c\u628a $b_i$ \u5347\u5e8f\uff0c\u5347\u5e8f\u540e\uff0c\u82e5\u5269\u4e0b\u6765\u7684\u6bd4\u5b83\u5c0f\u7684\u6570\u7684\u4e2a\u6570 $<i$ \u5219\u65e0\u89e3\u3002\n\n\u8fd8\u6709\u4e00\u79cd\u65e0\u89e3\u60c5\u51b5\uff0c\u662f $b_i$ \u6709\u91cd\u590d\u3002\n\n\u6709\u89e3\u65f6\uff1a\n\n\u628a\u5269\u4e0b\u6765\u7684\u6570\u4ece\u5927\u5230\u5c0f\u8003\u8651\uff0c\u628a\u5b83\u653e\u5230 $b_i$ \u4e2d\u4ece\u540e\u5f80\u524d\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u653e\u7684\u4f4d\u7f6e\u3002\n\n\u56e0\u4e3a $b_i=\\max(p_{2i-1},p_{2i})$\uff0c\u6240\u4ee5 $b_i$ \u5e94\u8be5\u5728 $p_{2i}$ \u7684\u4f4d\u7f6e\u4f7f\u5b57\u5178\u5e8f\u5c0f\u3002\n\n\u56e0\u4e3a\u5927\u7684\u6570\u8981\u5728\u540e\u9762\uff0c\u624d\u80fd\u4f7f\u5b57\u5178\u5e8f\u5c3d\u53ef\u80fd\u5c0f\u3002\n\n\u6b64\u65f6\uff0c$b_i$ \u4e2d\u5269\u4e0b\u7684\u6570\u4e00\u5b9a\u4f1a\u6709\u4e00\u4e2a\u6bd4\u6b21\u5927\u5927\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u5c0f\uff0c\u5c31\u65e0\u89e3\u4e86\u3002\n\n\u7ef4\u62a4\u4ece\u540e\u5f80\u524d\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u653e\u7684\u4f4d\u7f6e\u5c31\u53ef\u4ee5\u7528\u5206\u5757\u4e86\u3002\n\n\u5206\u5757\u52a8\u6001\u7ef4\u62a4\u4e00\u4e2a\u533a\u95f4\u6700\u5927\u503c\u5373\u53ef\u3002\n\n$O(n\\sqrt n)$\n\n$\\text{code:}$\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define inf 0x3f3f3f3f\n#define mp make_pair\n#define fi first\n#define se second\n#define pr printf\n#define ps puts\n#define pb push_back\n#define For(i,a,b) for(i=a;i<=b;i++)\n#define FOR(i,a,b) for(i=a;i>=b;i--)\nusing namespace std;\nconst int N=2e5+10;\nint n,m,a[N],b[N],ans[N],maxn[N];\nbool vis[N],st[N];\nvector<int> p1,p2;\nint t;\nint bh(int x){return (x-1)/t+1;}\nint left(int x){return x*t-t+1;}\nint right(int x){return x*t;}\nint read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nvoid solve(){\n\tint i,j,k,l;\n\tFor(i,1,n/2) if(vis[b[i]]){ps(\"-1\");return ;} else vis[b[i]]=1;\n\tp1.clear();p2.clear();\n\tFor(i,1,n) if(vis[i]) p1.pb(i);else p2.pb(i);\n\tsort(p1.begin(),p1.end());\n\tsort(p2.begin(),p2.end());\n\tfor(i=0;i<p1.size();i++){\n\t\tif(p1[i]<p2[i]){\n\t\t\tps(\"-1\");\n\t\t\treturn ;\n\t\t}\n\t}\n\tfor(i=p2.size()-1;~i;i--){\n\t\tfor(j=bh(n/2);j>=bh(1);j--){\n\t\t\tif(maxn[j]>p2[i]){\n\t\t\t\tfor(k=min(n/2,right(j));k>=left(j);k--){\n\t\t\t\t\tif(st[k]) continue;\n\t\t\t\t\tif(b[k]>p2[i]){\n\t\t\t\t\t\tans[k]=p2[i];\n\t\t\t\t\t\tst[k]=1;\n\t\t\t\t\t\tmaxn[j]=-2e9;\n\t\t\t\t\t\tfor(l=min(n/2,right(j));l>=left(j);l--) if(st[l]) continue;\n\t\t\t\t\t\telse maxn[j]=max(maxn[j],b[l]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=1;i<=n/2;i++){\n\t\tpr(\"%lld %lld \",ans[i],b[i]);\n\t}\n\tps(\"\");\n}\nsigned main(){\n\tint T,i,j;\n\tT=read();\n\twhile(T--){\n\t\tn=read();\n\t\tt=sqrt(n/2);\n\t\tFor(i,1,n/2) b[i]=read();\n\t\tfor(i=bh(1);i<=bh(n/2);i++){\n\t\t\tmaxn[i]=-2e9;\n\t\t\tfor(j=left(i);j<=min(right(i),n/2);j++) maxn[i]=max(maxn[i],b[j]);\n\t\t}\n\t\tsolve();\n\t\tFor(i,1,n) vis[i]=0;\n\t\tFor(i,1,n) st[i]=0;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1669096950,
        "uid": 225100,
        "name": "ice_in_sky",
        "ccfLevel": 0,
        "title": "CF1759G Restore the Permutation"
    },
    {
        "content": "\u636e\u8bf4\u8fd9\u9053\u9898\u53cd\u7740\u586b\u6570\u5f88\u5bb9\u6613\uff0c\u4f46\u6211\u504f\u8981\u6b63\u7740\u505a\uff08\n\n\u8003\u8651 $b_i=\\max(p_{2i-1},p_{2i})$\uff0c\u6700\u4f18\u7684\u65b9\u5f0f\u4e00\u5b9a\u662f\u8ba9 $p_{2i}=b_i$\uff0c\u7136\u540e\u5c3d\u91cf\u5f80\u5c0f\u7684 $p_{2i-1}$ \u91cc\u586b\u6570\u3002\n\n\u5047\u8bbe\u73b0\u5728\u5df2\u7ecf\u586b\u5b8c\u4e86\u6240\u6709\u7684 $p_{2i}$\uff0c\u8003\u8651\u600e\u4e48\u6837\u586b $p_{2i-1}$\u3002\n\n\u5c06 $p_{2i}$ \u6392\u5e8f\uff0c\u8bbe\u7b2c $x$ \u5927\u7684 $p_{2i}$ \u4e3a $c_x$\u3002\u90a3\u4e48\u5982\u679c\u5b58\u5728 $c_i<2i$\uff0c\u5c31\u4e00\u5b9a\u65e0\u89e3\uff0c\u53cd\u4e4b\u81f3\u5c11\u5b58\u5728\u4e00\u7ec4\u89e3\uff0c\u5373\u6309\u7167 $p_{2i}$ \u7684\u5927\u5c0f\u987a\u5e8f\u4ece\u5927\u5230\u5c0f\u586b\u6570\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u5728\u4e00\u5b9a\u6709\u89e3\u7684\u60c5\u51b5\u4e0b\u627e\u5230\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u89e3\u3002\n\n\u8003\u8651\u5982\u679c $c_i=2i$\uff0c\u90a3\u4e48\u610f\u5473\u7740\u53ef\u586b\u7684\uff08$b$ \u4e2d\u6ca1\u6709\u51fa\u73b0\u7684\u6570\uff09\u524d $i$ \u5c0f\u7684\u6570\uff0c\u586b\u7684\u4f4d\u7f6e\u5fc5\u987b\u5728\u524d $i$ \u5c0f\u7684 $p_{2i}$ \u6240\u5bf9\u5e94\u7684 $p_{2i-1}$ \u7684\u4f4d\u7f6e\u4e0a\uff08**\u4e0d\u4e00\u5b9a\u4e00\u4e00\u5bf9\u5e94**\uff09\u3002\n\n\u8fdb\u4e00\u6b65\u5730\uff0c\u82e5 $c_i-2i=k$\uff0c\u90a3\u4e48\u610f\u5473\u7740\u53ef\u586b\u7684\u524d $i$ \u5c0f\u7684\u6570\uff0c\u6700\u591a\u6709 $k$ \u4e2a\u6570\u53ef\u4ee5\u4e0d\u586b\u5728\u524d $i$ \u5c0f\u7684 $p_{2i}$ \u6240\u5bf9\u5e94\u7684 $p_{2i-1}$ \u7684\u4f4d\u7f6e\u4e0a\u3002\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u8d2a\u5fc3\u4e86\u3002\u6211\u4eec\u4ece\u5927\u5230\u5c0f\u586b\u6570 \uff0c\u6bcf\u6b21\u627e\u5230\u7b2c\u4e00\u4e2a\u6ee1\u8db3 $c_i=2i$ \u7684\u4f4d\u7f6e\uff0c\u610f\u5473\u7740\u5f53\u524d\u6570\u586b\u7684\u4f4d\u7f6e\u4e0d\u80fd\u8d85\u8fc7 $i$\u3002\u7136\u540e\u8d2a\u5fc3\u5730\u586b\u5728 $[1,i]$ \u5185\u8fd8\u672a\u88ab\u586b\u8fc7\u7684\u3001\u7f16\u53f7\u6700\u5c0f\u7684\u4f4d\u7f6e $k$ \u4e0a\u3002\u586b\u5b8c\u8fd9\u4e2a\u6570\u540e\uff0c\u518d\u5c06 $[1,k)$ \u5185\u7684\u4f4d\u7f6e\u5bf9\u5e94\u7684 $(c_j-2j)$ \u7684\u503c $-1$ \u5373\u53ef\u3002\n\n\u7ef4\u62a4\u4e24\u4e2a\u7ebf\u6bb5\u6811\u6765\u6a21\u62df\u4ee5\u4e0a\u8fc7\u7a0b\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define mp make_pair\n#define il inline\nusing namespace std;\nconst int maxn=200010;\nconst int N=maxn<<2;\nil int read(){\n\tint x=0,f=1;\n\tchar c=getchar();\n\tfor(;!(c>='0'&&c<='9');c=getchar())\n\t\tif(c=='-')f=-1;\n\tfor(;c>='0'&&c<='9';c=getchar())\n\t\tx=(x<<1)+(x<<3)+c-'0';\n\treturn x*f;\n}\nint st[maxn],top;\nvector<pair<int,int> >v;\npair<int,int>c[maxn];\npair<int,int>data[N];\npair<int,int>dataa[N];\nint lz[N];\nint tap[maxn];\nint b[maxn],p[maxn];\nint T,n;\nil void pushup(int i){\n\tif(data[i<<1].first==data[i<<1|1].first)\n\t\tdata[i]=mp(data[i<<1].first,min(data[i<<1].second,data[i<<1|1].second));\n\telse if(data[i<<1].first<data[i<<1|1].first) data[i]=data[i<<1];\n\telse data[i]=data[i<<1|1];\n}\nil void pushdown(int i){\n\tif(lz[i]==0) return ;\n\tdata[i<<1].first+=lz[i],data[i<<1|1].first+=lz[i];\n\tlz[i<<1]+=lz[i],lz[i<<1|1]+=lz[i],lz[i]=0;\n}\npair<int,int> Queryy(int i,int l,int r,int L,int R){\n\tif(l>=L&&r<=R) return dataa[i];\n\tint mid=l+r>>1;\n\tif(mid<L) return Queryy(i<<1|1,mid+1,r,L,R);\n\tif(mid>=R) return Queryy(i<<1,l,mid,L,R);\n\tpair<int,int>t1=Queryy(i<<1,l,mid,L,R);\n\tpair<int,int>t2=Queryy(i<<1|1,mid+1,r,L,R);\n\treturn min(t1,t2);\n}\nvoid Modifyy(int i,int l,int r,int x,int k){\n\tif(l==x&&r==x){\n\t\tdataa[i]=mp(k,l);\n\t\treturn ;\n\t}int mid=l+r>>1;\n\tif(mid>=x) Modifyy(i<<1,l,mid,x,k);\n\telse Modifyy(i<<1|1,mid+1,r,x,k);\n\tdataa[i]=min(dataa[i<<1],dataa[i<<1|1]); \n}\nvoid Modify(int i,int l,int r,int L,int R,int x){\n\tif(L>R) return ;\n\tif(l>=L&&r<=R){\n\t\tdata[i].first+=x,lz[i]+=x;\n\t\treturn ;\n\t}int mid=l+r>>1;\n\tpushdown(i);\n\tif(mid>=L) Modify(i<<1,l,mid,L,R,x);\n\tif(mid<R) Modify(i<<1|1,mid+1,r,L,R,x);\n\tpushup(i);\n}\nvoid buildd(int i,int l,int r){\n\tif(l==r){\n\t\tdataa[i]=mp(0,0);\n\t\treturn;\n\t}int mid=l+r>>1;\n\tif(mid>=l) buildd(i<<1,l,mid);\n\tif(mid<r) buildd(i<<1|1,mid+1,r);\n\tdataa[i]=mp(0,0);\n}\nvoid build(int i,int l,int r){\n\tlz[i]=0;\n\tif(l==r){\n\t\tif(l==n/2+1) data[i]=mp(0,l);\n\t\telse data[i]=mp(c[l].first-l-l,l);\n\t\treturn;\n\t}int mid=l+r>>1;\n\tif(mid>=l) build(i<<1,l,mid);\n\tif(mid<r) build(i<<1|1,mid+1,r);\n\tpushup(i);\n}\nint main(){\n\tT=read();\n\twhile(T--){\n\t\ttop=0;\n\t\tfor(int i=1;i<=n/2;i++) tap[b[i]]--;\n\t\tn=read();bool fl=0;v.clear();\n\t\tfor(int i=1;i<=n/2;i++) b[i]=c[i].first=read(),tap[b[i]]++,c[i].second=i;\n\t\tfor(int i=1;i<=n/2;i++) p[2*i]=b[i];\n\t\tfor(int i=1;i<=n;i++) if(tap[i]>1){fl=1;printf(\"-1\\n\");break;}\n\t\tif(fl) continue;\n\t\tsort(c+1,c+1+n/2);\n\t\tfor(int i=1;i<=n/2;i++)\n\t\t\tif(c[i].first<i+i){fl=1;printf(\"-1\\n\");break;}\n\t\tif(fl) continue;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!tap[i]) st[++top]=i;\n\t\tbuild(1,1,n/2+1),buildd(1,1,n/2);\n\t\tfor(int i=1;i<=n/2;i++)\n\t\t\tModifyy(1,1,n/2,i,c[i].second);\n\t\tfor(int i=1;i<=n/2;i++){\n\t\t\tint End=data[1].second;\n\t\t\tpair<int,int>Min_id=Queryy(1,1,n/2,1,End);\n\t\t\tModifyy(1,1,n/2,Min_id.second,1e9);\n\t\t\tp[Min_id.first*2-1]=st[i],Modify(1,1,n/2+1,1,Min_id.second,-1);\n\t\t\tModify(1,1,n/2+1,Min_id.second,Min_id.second,1e9);\n\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tprintf(\"%d \",p[i]);\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1668920358,
        "uid": 288716,
        "name": "lzqy_",
        "ccfLevel": 7,
        "title": "CF1759G Restore the Permutation \u9898\u89e3"
    },
    {
        "content": "## Solution\n\n$b_i=\\max(p_{2i-1},p_{2i})$\uff0c\u8981\u8ba9\u5b57\u5178\u5e8f\u5c3d\u53ef\u80fd\u5c0f\uff0c\u5927\u7684\u6570\u4e00\u5b9a\u653e\u540e\u9762\uff0c\u4e8e\u662f\u6211\u4eec\u786e\u5b9a\u4e86\u539f\u6765\u7684\u6392\u5217\u7684\u5076\u6570\u4f4d\u3002\n\n\u4e8e\u662f\u95ee\u9898\u8f6c\u5316\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u8981\u6c42\u586b\u4e00\u4e2a\u5c0f\u4e8e $b_i$ \u7684\u6570\uff08\u6709\u4e00\u5b9a\u9009\u62e9\u8303\u56f4\uff0c\u4e14\u7528\u8fc7\u7684\u4e0d\u80fd\u518d\u7528\uff09\uff0c\u8981\u6c42\u6700\u540e\u7684\u7ed3\u679c\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\n\n\u6211\u4eec\u9996\u5148\u8003\u8651\u4ece\u524d\u5f80\u540e\u653e\uff0c\u6bcf\u6b21\u653e\u80fd\u653e\u7684\u5f53\u4e2d\u6700\u5c0f\u7684\uff0c\u5982\u679c\u6ca1\u6709\u80fd\u653e\u7684\u5219\u65e0\u89e3\u3002\u7136\u800c\u8fd9\u662f\u9519\u8bef\u7684\u3002\n\n\u770b\u8fd9\u4e2a\u4f8b\u5b50\uff1a`6 4 2`\u3002\n\n\u6309\u7167\u4e0a\u9762\u7684\u505a\u6cd5\uff0c\u6211\u4eec\u524d\u4e24\u4f4d\u4f1a\u586b `1 3`\uff0c\u6b64\u65f6\uff0c\u6700\u540e\u586b\u4e0d\u4e86 `5`\uff0c\u4e8e\u662f\u65e0\u89e3\u3002\n\n\u4f46\u663e\u7136\u5b58\u5728\u53e6\u4e00\u79cd\u65b9\u6848\uff1a`5 6 3 4 1 2 `\u3002\n\n\u6240\u4ee5\u6211\u4eec\u6539\u53d8\u4e00\u4e0b\u7b56\u7565\uff0c\u8003\u8651\u4ece\u540e\u5f80\u524d\u653e\uff0c\u6bcf\u6b21\u653e\u80fd\u653e\u7684\u5f53\u4e2d\u6700\u5927\u7684\uff0c\u5982\u679c\u6ca1\u6709\u80fd\u653e\u7684\u5219\u65e0\u89e3\u3002\u8fd9\u662f\u6b63\u786e\u7684\u3002\n\n\u4ece\u540e\u5f80\u524d\u653e\uff0c\u6bcf\u6b21\u653e\u80fd\u653e\u7684\u5f53\u4e2d\u6700\u5927\u7684\u4fdd\u8bc1\u4e86\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u540c\u65f6\u9632\u6b62\u4e86\u524d\u9762\u56e0\u4e3a\u7528\u4e86\u5c0f\u7684\u6570\u5bfc\u81f4\u540e\u9762\u65e0\u6cd5\u586b\u5165\u6570\u7684\u95ee\u9898\u3002\n\n\u653e\u7f6e\u6570\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 `vector` + \u4e8c\u5206\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n//#define int long long\nusing namespace std;\nint n,m,i,l,vis[200005],b[200005],tot,ans[200005];\nvector <int> vec;\nint find(int tag){\n\tint ans=-1,l=0,r=vec.size()-1;\n\twhile (l<=r){\n\t\tint mid=(l+r)>>1;\n\t\tif (vec[mid]<=tag) l=(ans=mid)+1;\n\t\t\telse r=mid-1;\n\t}\n\tif (ans==-1) return -1;\n\tint ret=vec[ans];\n\tvec.erase(lower_bound(vec.begin(),vec.end(),ret));\n\treturn ret;\n}\nvoid go(){\n\tcin>>n,m=(n>>1);\n\tint flag=0;\n\tmemset(vis,0,sizeof(vis));\n\tfor (i=1;i<=m;i++){\n\t\tcin>>b[i];\n\t\tif (!vis[b[i]]) vis[b[i]]=1;\n\t\telse flag=1;\n\t}\n\tif (flag){\n\t\tcout<<\"-1\\n\";\n\t\treturn ;\n\t} \n\tvec.clear();\n\tfor (i=1;i<=n;i++)\n\t\tif (!vis[i]) vec.push_back(i);\n\tfor (i=m;i>=1;i--){\n//\t\t<=b[i] max \n\t\tint G=find(b[i]);\n\t\tif (G==-1){\n\t\t\tcout<<\"-1\\n\";\n\t\t\treturn ;\n\t\t}\n\t\tans[i*2-1]=G,ans[i*2]=b[i];\n\t}\n\tfor (i=1;i<=n;i++) cout<<ans[i]<<(i==n?'\\n':' ');\n}\nsigned main(){\n    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n    int tests=1;\n    cin>>tests;\n    while (tests--) go();\n    return 0;\n}\n```",
        "postTime": 1668920181,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "CF1759G Restore the Permutation \u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u9996\u5148\u5f88\u5bb9\u6613\u53d1\u73b0\u5982\u679c $b$ \u6570\u7ec4\u6709\u91cd\u590d\u7684\u6570\u5c31\u662f\u65e0\u89e3\u3002\n\n\u63a5\u7740\u53c8\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u6211\u7ed9 $b$ \u6570\u7ec4\u91cc\u9762\u6bcf\u4e2a\u6570\u6784\u9020\u51fa\u53e6\u4e00\u534a\uff08\u4e5f\u5c31\u662f\u4e24\u8005\u7684 $\\min$ \u7684\u90a3\u4e2a\u6570\uff0c\u56e0\u4e3a $\\max$ \u88ab\u653e\u8fdb\u4e86 $b$ \u6570\u7ec4\uff09\u4e4b\u540e\uff0c\u6211\u8981\u628a\u5b83\u7684\u53e6\u4e00\u534a\u653e\u5728\u5b83\u524d\u9762\u66f4\u597d\u3002\n\n\u4e8e\u662f\u8003\u8651\u5982\u4f55\u7ed9\u6bcf\u4e2a\u6570\u627e\u51fa\u5b83\u7684\u53e6\u4e00\u534a\u3002\n\n\u6709\u4e00\u4e2a\u663e\u7136\u7684\u8d2a\u5fc3\u662f\u6211\u4eec\u628a\u6240\u6709\u4e0d\u5728 $b$ \u6570\u7ec4\u91cc\u9762\u7684\u6570\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7136\u540e\u4f9d\u6b21\u914d\u5bf9\uff0c\u4f46\u662f\u6709\u4e00\u4e2a\u95ee\u9898\u662f\u540e\u9762\u7684\u6570\u53ef\u80fd\u6ca1\u5f97\u9009\uff0c\u88ab\u524d\u9762\u7684\u6570\u5360\u5b8c\u4e86\u3002\u8fd9\u79cd\u60c5\u51b5\u4e5f\u4e0d\u4e00\u5b9a\u65e0\u89e3\uff0c\u53ef\u80fd\u53ef\u4ee5\u901a\u8fc7\u4ea4\u6362\u5f97\u5230\u7b54\u6848\u3002\n\n\u6240\u4ee5\u4f60\u4e0d\u59a8\u8003\u8651\u5012\u7740\u653e\uff0c\u4ece\u540e\u9762\u5f00\u59cb\u914d\u5bf9\uff0c\u53bb\u907f\u514d\u524d\u9762\u7684\u5e72\u6d89\u540e\u9762\u7684\u3002\u4e3a\u4e86\u4f7f\u5f97\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6211\u6bcf\u6b21\u62ff\u51fa\u8fd8\u672a\u914d\u5bf9\u7684\u7b2c\u4e00\u4e2a\u6bd4\u5b83\u5c0f\u7684\u4e0d\u5728 $b$ \u6570\u7ec4\u4e2d\u7684\u6570\u548c\u5b83\u914d\u5bf9\u3002\n\n\u4e0b\u9762\u662f\u5bf9\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u914d\u5bf9\u4e00\u5b9a\u662f\u65e0\u89e3\u7684\u8bc1\u660e\u3002\n\n> \u8003\u8651\u5f53\u524d\u679a\u4e3e\u5230\u4e86\u4e0b\u6807 $x$\u3002\u7531\u4e8e\u65e0\u6cd5\u914d\u5bf9\uff0c\u8fd9\u610f\u5473\u7740\u5982\u679c\u6211\u4eec\u60f3\u8981\u8ba9\u4ed6\u4eec\u914d\u5bf9\uff0c\u6211\u4eec\u5c06\u4ece $x$ \u540e\u9762\u7684\u6240\u6709\u4f4d\u7f6e\u4e2d\u5bfb\u627e\u4e00\u4e2a\u4f4d\u7f6e $y$ \u901a\u8fc7\u4e00\u6b21\u4ea4\u6362\u4f7f\u5f97\u4e24\u8005\u90fd\u80fd\u6ee1\u8db3\u3002\u800c\u8fd9\u610f\u5473\u7740\u5b58\u5728\u4e00\u4e2a\u6570 $z$ \u5927\u4e8e $b_x$ \u5e76\u5c0f\u4e8e $b_y$\uff0c\u540c\u65f6\u4f4d\u7f6e $y$ \u7684\u53e6\u4e00\u534a\u8981\u5c0f\u4e8e $b_x$\uff0c\u4f46\u4f4d\u7f6e $y$ \u4e0a\u7684\u53e6\u4e00\u534a\u6ca1\u6709\u53d6\u5230 $z$\uff0c\u8bf4\u660e\u5176\u53e6\u4e00\u534a\u4e00\u5b9a\u5927\u4e8e $z$\uff0c\u56e0\u6b64\u5927\u4e8e $b_x$\u3002\n\n\u4e8e\u662f\u76f4\u63a5\u6a21\u62df\u5373\u53ef\u3002\u5c06\u6240\u6709\u4e0d\u5728 $b$ \u6570\u7ec4\u4e2d\u7684\u6570\u653e\u5165 `set` \u7136\u540e\u4f7f\u7528 `set` \u7684 `lower_bound` \u5373\u53ef\u627e\u5230\u201c\u8fd8\u672a\u914d\u5bf9\u7684\u6bd4\u5b83\u5c0f\u7684\u4e0d\u5728 $b$ \u6570\u7ec4\u4e2d\u7684\u6570\u201d\u3002\n\n## \u4ee3\u7801\n\n```\n#include <bits/stdc++.h>\n#define ET return 0\n#define fi first\n#define se second\n#define mp make_pair\n#define pb emplace_back\n#define inf INT_MAX\n#define uinf INT_MIN\n#define fr1(i,a,b) for(int i=a;i<=b;i++)\n#define fr2(i,a,b) for(int i=a;i>=b;i--)\nusing namespace std;\nconst int N=2e5+10;\nint T;\nint n;\nint b[N];\nint bol[N];\nvector <int> ans;\n// vector <int> p;\nset <int> s;\nvoid solve(){\n    cin>>n;\n    s.clear();\n    ans.clear();\n    fr1(i,1,n){\n        bol[i]=0;\n    }\n    fr1(i,1,n/2){\n        cin>>b[i];\n        bol[b[i]]++;\n    }\n    fr1(i,1,n){\n        if(bol[i]>=2){\n            cout<<\"-1\"<<endl;\n            return;\n        }\n        if(!bol[i]){\n            // p.pb(i);\n            s.insert(i);\n        }\n    }\n    fr2(i,n/2,1){\n        // int d=lower_bound(p.begin(),p.end(),b[i])-p.begin();\n        auto d=s.lower_bound(b[i]);\n        if(d==s.begin()){\n            cout<<\"-1\"<<endl;\n            return;\n        }\n        d--;\n        // cout<<i<<\",\"<<(*d)<<endl;\n        ans.pb(*d);\n        s.erase(d);\n    }\n    reverse(ans.begin(),ans.end());\n    fr1(i,1,n/2){\n        cout<<ans[i-1]<<\" \"<<b[i]<<\" \";\n    }\n    cout<<endl;\n}\nint main(){\n    cin>>T;\n    while(T--){\n        solve();\n    }\n    ET;\n}\n//Teens-in-Times\n//HJL 2004.06.15\n//YHX 2004.08.16\n//Everything For Ji, Lin, Hao, Shun, Hang and You.\n```\n\n[AC \u8bb0\u5f55](https://www.luogu.com.cn/record/95239716)",
        "postTime": 1669264573,
        "uid": 399150,
        "name": "Shunpower",
        "ccfLevel": 7,
        "title": "CF1759G Restore the Permutation"
    }
]
[
    {
        "content": "[\u6216\u8bb8\u66f4\u597d\u7684\u4f53\u9a8c](https://www.cnblogs.com/syzf2222/p/15836804.html)\n\n\u5410\u69fd\u4e00\u53e5\uff0c\u8fd9\u4e2a\u4e0d\u964d\u7684\u6761\u4ef6\u5728\u7ffb\u8bd1\u91cc\u5c5e\u5b9e\u662f\u6709\u4e9b\u9690\u853d\u3002\n\n\u8003\u8651\u5206\u6cbb\u5730\u5904\u7406\uff0c\u7528 $solve(l,r)$ \u6c42\u51fa\u533a\u95f4 $[l,r]$ \u5185\u7684\u6240\u6709\u6570\u503c\u3002\n\n\u6c42\u4e00\u904d\u533a\u95f4\u4f17\u6570 $x$ \u548c\u51fa\u73b0\u6b21\u6570 $y$\u3002\u82e5\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4e00\u4e2a\u4f4d\u7f6e $a_p=x$ \uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e24\u6b21\u8be2\u95ee\u6c42\u51fa\u8fd9\u4e2a\u533a\u95f4\u3002\n\n\u5177\u4f53\u5730\uff0c\u6211\u4eec\u77e5\u9053 $[p-y+1,p]$ \u548c $[p,p+y-1]$ \u4e4b\u95f4\u4e00\u5b9a\u81f3\u5c11\u6709\u4e00\u4e2a\u7684\u4f17\u6570\u4e5f\u4e3a $x$\u3002\n\n\u5982\u679c\u6211\u4eec\u8fd8\u4e0d\u77e5\u9053\uff0c\u90a3\u4e48\u9694 $y$ \u8be2\u95ee\u4e00\u4e2a\u5355\u70b9\uff0c\u6ce8\u610f\u5230\u6211\u4eec\u8be2\u95ee\u7684\u6bcf\u4e00\u4e2a\u6570\u90fd\u4e0d\u540c\uff0c\u4e14\u4e00\u5b9a\u53ef\u4ee5\u8be2\u95ee\u5230\u4e00\u4e2a $x$\u3002\n\n\u4f46\u662f\u8fd9\u6837\u8fd8\u662f\u4f1a\u6709\u5f88\u591a\u91cd\u590d\u7684\u8be2\u95ee\u6d6a\u8d39\u4e86\uff0c\u4e8e\u662f\u6211\u4eec\u5229\u7528\u4ee5\u524d\u7684\u4fe1\u606f\uff0c\u4ece\u4e4b\u524d\u7684\u6700\u540e\u4e00\u4e2a\u6bd4 $x$ \u5c0f\u7684\u6570\u7684\u4f4d\u7f6e\u5f00\u59cb\u3002\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u8be2\u95ee\u533a\u95f4\u4f17\u6570\u4e00\u4e2a $k$\uff0c\u8be2\u95ee\u6bcf\u4e2a\u5355\u70b9\u4e00\u4e2a $k$\uff0c\u786e\u5b9a\u533a\u95f4\u4e24\u4e2a $k$\uff0c\u6b63\u597d $4k$\uff0c\u505a\u5b8c\u4e86\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define inf 1e9\nconst int maxn=2e5+10;\nconst int mod=1e9+7;\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+c-'0';c=getchar();}\n\treturn x*f;\n}\nint n,m,a[maxn];\n#define pii pair<int,int>\n#define mkp make_pair\n#define fi first\n#define se second\nmap<int,int>mp;\nmap<int,int>::iterator it;\ninline pii ask(int l,int r){\n\tif(l<1)l=1;if(r>n)r=n;\n\tif(l>r)return mkp(0,0);\n\tprintf(\"? %d %d\\n\",l,r);\n\tfflush(stdout);\n\tint x=read(),y=read();\n\treturn mkp(x,y);\n}\ninline void solve(int l,int r){\n\tif(l>r)return;\n\t//printf(\"solving interval:[%d,%d]\\n\",l,r);\n\tpii now=ask(l,r);\n\tint x=now.fi,y=now.se;\n\tif(r-l+1==y){\n\t\tfor(int i=l;i<=r;i++)a[i]=x;\n\t\tmp[x]=l;return;\n\t}\n\tif(!mp[x]){\n\t\tit=mp.lower_bound(x);--it;\n\t\tfor(int i=max(l,it->se+y);;i+=y){\n\t\t\tpii cur=ask(i,i);\n\t\t\tmp[cur.fi]=i;\n\t\t\tif(cur.fi==x)break;\n\t\t}\n\t}int pos=mp[x];\n\tpii L=ask(pos-y+1,pos);\n\tpii R=ask(pos,pos+y-1);\n\tint lb=0,rb=0;\n\tif(L.fi==x)lb=1+pos-L.se,rb=lb+y-1;\n\telse lb=pos+R.se-y,rb=lb+y-1;\n\tfor(int i=lb;i<=rb;i++)a[i]=x;\n\tsolve(l,lb-1);solve(rb+1,r);\n}\nint main(){\n\tmp[0]=0;\n\tn=read();solve(1,n);\n\tprintf(\"! \");\n\tfor(int i=1;i<=n;i++)\n\t\tprintf(\"%d \",a[i]);puts(\"\");\n\tfflush(stdout);\n    return 0;\n}\n```",
        "postTime": 1642946373,
        "uid": 140876,
        "name": "syzf2222",
        "ccfLevel": 9,
        "title": "CF1372F"
    },
    {
        "content": "\u9996\u5148\uff0c\u7531\u4e8e\u8fd9\u4e2a\u5e8f\u5217\u662f\u4e0d\u964d\u7684\uff0c\u5fc5\u7136\u662f\u6709\u5e8f\u7684\uff0c\u6240\u4ee5\u76f8\u540c\u662f\u6570\u5fc5\u7136\u4f1a\u8fde\u5728\u4e00\u8d77\u3002\n\n\u901a\u8fc7\u89c2\u5bdf\uff0c\u53ef\u4ee5\u5f97\u5230\u7ed3\u8bba\uff1a\u5982\u679c $[l,r]$ \u7684\u4f17\u6570\u4e3a $x$ \uff0c\u6709 $f$ \u4e2a\uff0c\u533a\u95f4 $[r-f+1,l+f-1]$ \u91cc\u5fc5\u7136\u5168\u662f $x$ \u3002\n\n\u5f53\u7136\uff0c\u524d\u63d0\u662f $r-f+1\\leq l+f-1$ \u3002\n\n\u8bc1\u660e\u6bd4\u8f83\u96be\u5199\uff0c\u6545\u8bfb\u8005\u81ea\u884c\u601d\u8003\u3002\uff08\u86ee\u597d\u60f3\u7684\uff09\n\n\u7136\u540e\u7528\u5206\u6cbb\u7684\u601d\u60f3\u8fdb\u884c\u6c42\u89e3\u3002\n\n\u559c\u95fb\u4e50\u89c1\u7684\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[200001];\npair<int,int> ask(int l,int r)\n{\n\tcout<<\"? \"<<l<<\" \"<<r<<endl;\n\tint x,f;\n\tscanf(\"%d%d\",&x,&f);\n\treturn make_pair(x,f);\n}\nvoid solve(int l,int r)\n{\n\tif(l>r)\t\n\t\treturn ;\n\tpair<int,int> p=ask(l,r);\n\tint ll=r-p.second+1;\n\tint rr=l+p.second-1;\n\tif(ll<=rr)\n\t{\n\t\tfor(int i=ll;i<=rr;i++)\n\t\t\ta[i]=p.first;\n\t\tsolve(l,ll-1);\n\t\tsolve(rr+1,r);\n\t}\n\telse\n\t{\n\t\tint mid=(l+r)>>1;\n\t\tsolve(l,mid);\n\t\tsolve(mid+1,r);\n\t}\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tsolve(1,n);\n\tcout<<\"! \";\n\tfor(int i=1;i<=n;i++)\n\t\tcout<<a[i]<<\" \";\n\treturn 0;\n}\n```\n",
        "postTime": 1595938473,
        "uid": 334379,
        "name": "45din\u043e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1372F \u3010Omkar and Modes\u3011"
    }
]
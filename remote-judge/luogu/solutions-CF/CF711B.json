[
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF711B)\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1f](https://www.luogu.com.cn/blog/zyc-Kevin-Luogu-blog/Solution-CF711B)\n# \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u51fa\u4e00\u4e2a $n \\times n$ \u7684\u77e9\u9635\uff0c\u6709\u4e00\u4e2a\u4f4d\u7f6e\u4e3a `0` \uff0c\u8bf7\u4f60\u586b\u4e00\u4e2a\u6b63\u6574\u6570\u4f7f\u5f97\u8fd9\u4e2a\u77e9\u9635\u6210\u4e3a\u5e7b\u65b9\u3002\n\n\u82e5\u65e0\u6cd5\u8fbe\u6210\u8f93\u51fa `-1` \u3002\n\n# \u89e3\u9898\u601d\u8def\n\n\u5148\u8f93\u5165\u6570\u636e\uff0c\u540c\u65f6\u8ba1\u7b97\u51fa\u6bcf\u884c\u7684\u548c\u3002\n\n\u7136\u540e\uff0c\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u8fbe\u6210\u5e7b\u65b9\u3002\u5177\u4f53\u65b9\u6cd5\uff1a\u627e\u51fa\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u5e7b\u548c\uff0c\u5927\u4e8e $2$ \u79cd\u76f4\u63a5\u8f93\u51fa `-1` \u3002\n\n\u82e5\u53ef\u4ee5\u8fbe\u6210\uff0c\u5219\u8f93\u51fa**\u5176\u4ed6\u884c**\u4e0e**\u7a7a\u767d\u70b9\u5173\u8054\u7684\u884c**\u7684\u5dee\u503c\u3002\n\n\u6700\u540e\uff0c\u6ce8\u610f\u5f00 `long long`\u3002\n\n# AC\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint a[501][501], sum1[501], sum2[501], n, zero, x;\nvoid Put_in(int ans){//\u628a ans \u653e\u8fdb\u53bb \n\tfor(int i = 1; i <= n; i++){\n\t\tfor(int j = 1; j <= n; j++){\n\t\t\tif(!a[i][j]){\n\t\t\t\ta[i][j] = ans;\n\t\t\t\treturn; \n\t\t\t}\n\t\t}\n\t}\n\treturn;\n}\nbool check(int ans){\n\tint aa, bb, cc;\n\tPut_in(ans);\n\tint __sum1 = 0, __sum2 = 0;\n\tfor(int i = 1; i <= n; i++){\n\t\t__sum1 += a[i][i];\n\t\t__sum2 += a[i][n-i+1];\n\t}\n\t//cout << __sum1 << \" \" << __sum2 << endl;\n\tif(__sum1 != __sum2){\n\t\treturn false;\n\t}\n\taa = __sum1;\n\tint sum[501];\n\tmemset(sum, 0, sizeof(sum));\n\tfor(int i = 1; i <= n; i++){\n\t\tfor(int j = 1; j <= n; j++){\n\t\t\tsum[i] += a[j][i];\n\t\t} \n\t}\n\tint cnt = 0;\n\tfor(int i = 2; i <= n; i++) {\n\t\tif(sum[i] != sum[i-1]){\n\t\t\tcnt++;\n\t\t}\n\t}\n\t//for(int i = 1; i <= n; i++) {\n\t//\tcout << sum[i] << \" \"; \n\t//}\n\t//cout << endl;\n\tif(cnt){\n\t\treturn false;\n\t}\n\tbb = sum[1];\n\tmemset(sum, 0, sizeof(sum));\n\tfor(int i = 1; i <= n; i++){\n\t\tfor(int j = 1; j <= n; j++){\n\t\t\tsum[i] += a[i][j];\n\t\t} \n\t}\n\tcnt = 0;\n\tfor(int i = 2; i <= n; i++) {\n\t\tif(sum[i] != sum[i-1]){\n\t\t\tcnt++;\n\t\t}\n\t}\n\t//for(int i = 1; i <= n; i++) {\n\t//\tcout << sum[i] << \" \"; \n\t//}\n\t//cout << endl;\n\tif(cnt){\n\t\treturn false;\n\t}\n\tcc = sum[1];\n\t//cout << aa << \" \" << bb << \" \" << cc << \" \" << endl;\n\tif(aa != bb || bb != cc || cc != aa){\n\t\treturn false;\n\t}\n\treturn true;\n}\nsigned main(){\n\tcin >> n;\n\tfor(int i = 1; i <= n; i++){\n\t\tfor(int j = 1; j <= n; j++){\n\t\t\tcin >> a[i][j];\n\t\t\tif(!a[i][j]){\n\t\t\t\tzero = i;\n\t\t\t}\n\t\t}\n\t}\n\tif(n == 1){//\u7279\u5224 n = 1 \n\t\tcout << \"1\" << endl;\n\t\treturn 0;\n\t}\n\tfor(int i = 1; i <= n; i++){\n\t\tfor(int j = 1; j <= n; j++){\n\t\t\tsum1[i] += a[i][j];\n\t\t\tsum2[i] += a[j][i];\n\t\t}\n\t}\n\tint cnt1 = 0, cnt2 = 0;\n\tfor(int i = 2; i <= n; i++) {\n\t\tif(sum1[i] != sum1[i-1]){\n\t\t\tcnt1++;\n\t\t}\n\t\tif(sum2[i] != sum2[i-1]){\n\t\t\tcnt2++;\n\t\t}\n\t}\n\tif(cnt1 > 2 || cnt2 > 2){//\u5982\u679c\u5e7b\u548c\u6570\u91cf\u5927\u4e8e 2 \n\t\tcout << \"-1\" << endl;//\u5219\u65e0\u89e3\uff0c\u8f93\u51fa -1 \n\t\treturn 0;//\u7136\u540e\u7ed3\u675f\u7a0b\u5e8f \n\t}\n\t//\u6709\u89e3\u7684\u8bdd\n\tint other;\n\tif(zero == 1){\n\t\tother = sum1[2];\n\t}else{\n\t\tother = sum1[1];\n\t}\n\tint ans = other - sum1[zero];\n\tif(ans < 1 || !check(ans)){\n\t\tans = -1;\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1658109932,
        "uid": 679961,
        "name": "zhang_kevin",
        "ccfLevel": 0,
        "title": "CF711B \u9898\u89e3"
    },
    {
        "content": "### CF711B Chris and Magic Square\n\n#### \u9898\u610f\n\n\u7ed9\u51fa\u4e00\u4e2a$n\\times n$\u7684\u77e9\u9635\uff0c\u6709\u4e00\u4e2a\u4f4d\u7f6e\u7f3a\u5c11\u4e00\u4e2a\u6570\u5b57\uff0c\u8bf7\u4f60\u586b\u4e00\u4e2a\u6b63\u6574\u6570\u4f7f\u5f97\u8fd9\u4e2a\u77e9\u9635\u6bcf\u884c\u6bcf\u5217\u4e0e\u4e24\u6761\u5bf9\u89d2\u7ebf\u4e4b\u548c\u76f8\u7b49\n\n\u82e5\u65e0\u6cd5\u8fbe\u6210\u5219\u8f93\u51fa$-1$\n\n#### Solution\n\n\u8fd8\u662f\u5f88\u6c34\u7684\uff0c\u8bb0\u5f55\u6bcf\u884c\u6bcf\u5217\u5bf9\u89d2\u7ebf\u7684\u503c\uff0c\u5982\u679c\u8d85\u8fc7\u4e09\u4e2a\u4e00\u5b9a\u65e0\u89e3\n\n\u82e5\u6709\u89e3\u5219\u4e0e\u7a7a\u767d\u70b9\u5173\u8054\u7684\u884c\u5217\u5bf9\u89d2\u7ebf\u4e00\u5b9a\u548c\u76f8\u540c\uff0c\u8fd9\u65f6\u5019\u586b\u5165\u4e00\u4e2a\u5176\u4ed6\u884c\u4e0e\u8fd9\u4e00\u884c\u7684\u5dee\u503c\u5373\u53ef\n\n```cpp\n#include <iostream>\nusing namespace std;\ntypedef long long ll;\nll a[1001][1001];\nll r[1001];\nll c[1001];\nint n;\nint main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cin >> n;\n    int x, y;\n    ll pdsum = 0;\n    ll sdsum = 0;\n    for (int i = 0; i < n; i++) {\n        for (int j = 0; j < n; j++) {\n            cin >> a[i][j];\n            if (a[i][j] == 0) {\n                x = i;\n                y = j;\n            } else {\n                r[i] += a[i][j];\n                c[j] += a[i][j];\n                if (i == j) {\n                    pdsum += a[i][j];\n                }\n                if (i + j == n - 1) {\n                    sdsum += a[i][j];\n                }\n            }\n        }\n    }\n    if (n == 1) {\n        cout << 233 << '\\n';\n        return 0;\n    }\n    ll commonsum = r[0];\n    if (x == 0) {\n        commonsum = r[1];\n    }\n    ll rowsum = -1;\n    ll colsum = -1;\n    ll d1sum  = -1;\n    ll d2sum  = -1;\n    for (int i = 0; i < n; i++) {\n        if (i != x) {\n            if (r[i] != commonsum) {\n                cout << -1 << endl;\n                return 0;\n            }\n        } else {\n            rowsum = r[i];\n        }\n    }\n    for (int i = 0; i < n; i++) {\n        if (i != y) {\n            if (c[i] != commonsum) {\n                cout << -1 << endl;\n                return 0;\n            }\n        } else {\n            colsum = c[i];\n        }\n    }\n    bool isd1 = false;\n    bool isd2 = false;\n    if (x == y)\n        isd1 = true;\n    if (x + y == n - 1)\n        isd2 = true;\n    if (!isd1) {\n        if (pdsum != commonsum) {\n            cout << -1 << endl;\n            return 0;\n        }\n    } else {\n        d1sum = pdsum;\n    }\n    if (!isd2) {\n        if (sdsum != commonsum) {\n            cout << -1 << endl;\n            return 0;\n        }\n    } else {\n        d2sum = sdsum;\n    }\n    if (rowsum == colsum) {\n        if (isd1 && d1sum != rowsum) {\n            cout << -1 << endl;\n            return 0;\n        }\n        if (isd2 && d2sum != rowsum) {\n            cout << -1 << endl;\n            return 0;\n        }\n        ll value = commonsum - rowsum;\n        if (value > 0) {\n            cout << value << '\\n';\n            return 0;\n        } else {\n            cout << -1 << endl;\n            return 0;\n        }\n    } else {\n        cout << -1 << endl;\n        return 0;\n    }\n}\n```\n\n",
        "postTime": 1614256643,
        "uid": 46099,
        "name": "YCS_GG",
        "ccfLevel": 0,
        "title": "CF711B Chris and Magic Square"
    }
]
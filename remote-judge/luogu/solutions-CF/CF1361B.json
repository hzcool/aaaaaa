[
    {
        "content": "\u53d6\u6a21\u8fd9\u4e2a\u8fd0\u7b97\u771f\u7684\u5f88\u5999\n\n\u524d\u7f6e\u829d\u58eb\uff1aa%mod+b%mod=(a+b)%mod\n\n\uff08\u6ca1\u9519\u5c31\u662f\u8fd9\u4e48~~\u6c34~~\n\n\u65b9\u6cd5\u662f\u8ddf\u697c\u4e0b\u51e0\u4f4ddalao\u4e00\u6837\uff0c\u4f46\u5177\u4f53\u5b9e\u73b0\u6709\u4e00\u4e9b\u4f18\u5316\u3002\n\n\u5176\u5b9e\u6211\u4eec\u5728\u53d1\u73b0k[i]\u4f46\u4e2a\u6570\u4e3a\u5947\u6570\u65f6\uff0c\u5c31\u8981\u5728<k[i]\u7684\u503c\u4e2d\u627e\u5230\u503c\u6765\u8865\u9f50\u3002\u4f46\u662f\u8fd9\u6837\u7b80\u5355\u7684\u6a21\u62df\uff0c\u6211\u5199\u70b8\u4e86\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u6211\u592a\u83dc\u4e86\u3002\u4e8e\u662f\u53d6\u6a21\u5c31\u8fd9\u6837\u4e0a\u573a\u4e86\u3002\n\n\u9996\u5148\u6211\u4eec\u80af\u5b9a\u8981\u6392\u5e8fk\n\n\u73b0\u5728\u6211\u4eec\u5047\u8bbe\u8fd9\u4e24\u4e2a\u96c6\u5408\u4e3aA\u548cB\n\n\uff08\u89c4\u5b9asumA\u8868\u793a\u96c6\u5408A\u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c\n\n\u5219\u6211\u4eec\u4fdd\u8bc1sumA>=sumB\u6052\u6210\u7acb\u5c31\u53ef\u4ee5\u4e86\n\n\u6709\u4e86\u53d6\u6a21\u8fd9\u4e2a\u8fd0\u7b97\u5c31\u4e0d\u9700\u8981\u53bb\u4e00\u4e2a\u4e00\u4e2a\u627e\u4e86\uff0c\u56e0\u4e3a\u53d6\u6a21\u53ef\u4ee5\u5e2e\u6211\u4eec\u81ea\u52a8\u62b5\u6d88\u3002\n\n\u5047\u5982\u6211\u4eec\u73b0\u5728\u6709\u4e00\u4e2ak[x]\u8981\u53bb\u6d88\uff0c\u53c8\u6b63\u597d\u5728\u540e\u9762\u627e\u5230\u4e86k[x+i],k[x+i+1],k[x+i+2]...k[x+j]\u53ef\u4ee5\u62b5\u6d88\uff08\u8fd9\u4e9b\u503c\u53ef\u4ee5\u76f8\u7b49\uff0c\u8bdd\u8bf4\u8981\u662f\u4e0d\u76f8\u7b49\u600e\u4e48\u6d88k[x]\uff09\uff0c\u90a3\u5728\u53d6\u6a21\u4e4b\u4e2d\u5c31\u53ef\u4ee5\u81ea\u52a8\u62b5\u6d88\u4e86\u3002\n\n\u82e5\u627e\u4e0d\u5230\u62b5\u6d88\u7684\uff0c\u90a3\u5c31\u76f4\u63a5\u51cf\u4e0d\u5c31\u597d\u4e86\u3002\u4e00\u6837\u7684\u9053\u7406\u3002\n\n\u6700\u540e\u7ecf\u8fc7pyx\u5927\u4f6c\u7684\u63d0\u9192\uff0c\u6709\u53ef\u80fd\u6b63\u597d\u662f1e9+7\u7684\u500d\u6570\uff0c\u8fd9\u5c31\u9700\u8981\u5728\u52a0\u4e00\u4e2amod\uff0c\u6765\u5224\u65ad\u662f\u4e0d\u662f\u771f\u20180\u2019\u3002\u7136\u540epyx\u52a0\u4e86\u4e2a1e9+9\uff0c\u88ab\u5361\u4e86\u2026\u2026\n\nAC\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define N 1000005\n#define ll long long\nusing namespace std;\nconst ll mod1=1000000007,mod2=1621836843;\nll n,p,k[N];\n\nll qkm(ll x,ll y,ll mod){\n\tll ans=1;\n\tfor(;y;y>>=1,x=(x*x)%mod)\n\t    if(y&1)ans=(ans*x)%mod;\n\treturn ans;\n}\n\nint main(){\n\tint T;scanf(\"%d\",&T);\n\twhile(T--){\n\t\tscanf(\"%lld%lld\",&n,&p);\n\t\tfor(ll i=1;i<=n;i++)scanf(\"%lld\",&k[i]);\n\t\tif(p==1){\n\t\t\tprintf(\"%lld\\n\",n&1);\n\t\t\tcontinue;\n\t\t}\n\t\tsort(k+1,k+n+1);\n\t\tll sum1=0,sum2=0;\n\t\tfor(ll i=n;i>=1;i--)\n\t\t    if(!sum1&&!sum2){\n\t\t    \tsum1=qkm(p,k[i],mod1);\n\t\t    \tsum2=qkm(p,k[i],mod2);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tsum1=(sum1-qkm(p,k[i],mod1)+mod1)%mod1;\n\t\t\t\tsum2=(sum2-qkm(p,k[i],mod2)+mod2)%mod2;\n\t\t\t}\n\t\tprintf(\"%lld\\n\",sum1);\n\t} \n\treturn 0;\n}\n\n```\n\u8003\u573a\u65f6\u5019\u5c31\u9700\u8981\u6ce8\u610f\u8fd9\u4e9b\u7ec6\u8282\u4e86%%%pyx\n\nPS\uff1a\u522b\u5fd8\u8bb0\u5f00longlong",
        "postTime": 1600593748,
        "uid": 153588,
        "name": "dChengx",
        "ccfLevel": 7,
        "title": "CF1361B\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "> [\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1361B)\u3002\n\n> \u9898\u610f\u7b80\u8ff0\uff1a\u5c06 $n$ \u4e2a\u6570 $p^{k_1},p^{k_2},\\cdots,p^{k_n}$ \u5206\u6210\u4e24\u7ec4\uff0c\u8bb0 $a,b$ \u5206\u522b\u4e3a\u8fd9\u4e24\u7ec4\u6570\u7684\u548c\uff0c\u8bf7\u6c42\u51fa $|a-b|$ \u7684\u6700\u5c0f\u503c\uff0c\u5bf9 $10^9+7$ \u53d6\u6a21\u3002\n\n> \u6ce8\u610f\u4e0d\u662f\u6c42 $|a-b| \\bmod (10^9+7)$ \u7684\u6700\u5c0f\u503c\u3002\n\n---\n\n\u5148\u7279\u5224\u6389 $p=1$ \u7684\u60c5\u51b5\uff0c\u663e\u7136\u8f93\u51fa $n\\bmod 2$\u3002\n\n\u63a5\u4e0b\u6765\u53ef\u80fd\u6bd4\u8f83 tricky\uff0c\u6709\u70b9\u96be\u61c2\u3002\u4e0d\u59a8\u8bbe $a\\geq b$\uff0c$df=\\dfrac{a-b}{p^{k_i}}$\u3002\n\n\u5c06 $k_i$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u540e\u904d\u5386\uff1a\n\n1. \u5f53 $i>1$ \u4e14 $df>0$ \u65f6\uff0c\u7b97\u51fa $c=k_{i-1}-k_i$\u3002\u5426\u5219\u8df3\u5230\u6b65\u9aa4 $2$\u3002\n\n   \u63a5\u4e0b\u6765\u5c06 $df$ \u4e0d\u65ad\u4e58\u4e0a $p$\uff0c\u76f4\u5230\u4e58\u4e86 $c$ \u4e2a $p$ \u4e3a\u6b62\u3002\n   \n   \u82e5\u5728\u8fc7\u7a0b\u4e2d\u4efb\u610f\u65f6\u523b $df\\geq n-i+1$\uff0c\u5219\u610f\u5473\u7740 $b+\\sum_{j=i}^n p^{k_j}\\leq a$\u3002\u6b64\u65f6\u5c31\u53ef\u4ee5\u8d2a\u5fc3\u5e76\u9000\u51fa\u904d\u5386\u3002\n\n2. \u82e5 $df>0$\uff0c\u5219 $b\\gets b+p^{k_i},df\\gets df-1$\u3002\n\n   \u5426\u5219 $df$ \u4e00\u5b9a\u4e3a $0$\uff0c\u5219 $a\\gets a+p^{k_i},df\\gets 1$\u3002\n\n\u6700\u540e $a-b$ \u5373\u4e3a $|a-b|$ \u7684\u6700\u5c0f\u503c\u3002\n\n\u56e0\u4e3a\u8981\u4f7f\u7528\u5feb\u901f\u5e42\uff0c\u6240\u4ee5\u6bcf\u6b21\u8be2\u95ee\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f\u60c5\u51b5\u4e0b\u4e3a $O(n\\log_2 k)$\u3002\n\n\u9664\u53bb\u5feb\u901f\u5e42\uff0c\u6bcf\u6b21\u8be2\u95ee\u6b65\u9aa4 $1$ \u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f\u60c5\u51b5\u4e0b\u4e3a $O(n\\log_p 10^6)$\uff08\u5176\u539f\u56e0\u8bfb\u8005\u53ef\u81ea\u884c\u601d\u8003\uff09\u3002\n\n\u4e00\u4e9b\u8bf4\u660e\u4ee5\u5e2e\u52a9\u66f4\u597d\u7406\u89e3\uff1a\n\n1. \u53ef\u4ee5\u5c06 $df$ \u7406\u89e3\u4e3a $b$ \u5728\u4ee5 $p^{k_i}$ \u4e3a\u5355\u4f4d\u4e0b\u6b20 $a$ \u7684\u6570\u7684\u4e2a\u6570\u3002\u56e0\u4e3a $p^{v+1}=p\\times p^v$\uff0c\u6240\u4ee5\u6bcf\u6b21\u7f29\u5c0f\u5355\u4f4d\u65f6 $df$ \u90fd\u8981\u4e58\u4e0a $p$\u3002\n\n2. \u4e3a\u4ec0\u4e48 $df\\geq n-i+1$ \u65f6\uff0c$b+\\sum_{j=i}^n p^{k_j}\\leq a$\uff1f\n\n   \u89e3\u91ca\uff1a\u5f53 $df\\geq n-i+1$ \u65f6\uff0c\u7531\u4e8e $k$ \u662f\u4e0d\u589e\u7684\uff0c\u6240\u4ee5 $b$ \u81f3\u5c11\u8981\u8fd8 $n-i+1$ \u4e2a\u6570\u7ed9 $a$\uff0c\u5373\u6b64\u65f6\u65e0\u8bba\u5982\u4f55 $b$ \u90fd\u4e0d\u4f1a\u518d\u5927\u4e8e $a$\uff08\u6216\u8005\u8bf4\uff0c$a$ \u4e0d\u9700\u8981\u518d\u6dfb\u52a0\u6570\u8fdb\u5165\uff09\u3002\u800c\u5982\u679c\u4e0d\u8d2a\u5fc3\uff0c$df$ \u4e0d\u4f46\u4f1a\u8fc7\u5927\u800c\u5bfc\u81f4\u65e0\u6cd5\u5b58\u50a8\uff0c\u8fd8\u4f1a\u8ba9\u5355\u6b21\u8be2\u95ee\u65f6\u95f4\u590d\u6742\u5ea6\u9000\u5316\u6210\u4e3a $O(10^6)$\u3002\n\n\u4e3a\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff0c\u4ee3\u7801\u4e2d\u7684\u677f\u5b50\u5df2\u7701\u7565\u3002\n\n```cpp\nconst int N=1e6+50;\n\nint n,p,a,b,df,k[N];\n\nvoid solve(){\n\tn=read(),p=read(),a=b=df=0; for(int i=1;i<=n;i++)k[i]=read();\n\tif(p==1){a=n&1; return;}\n\tsort(k+1,k+n+1),reverse(k+1,k+n+1);\n\tfor(int i=1;i<=n;i++){\n\t\tif(i>1&&df) for(int j=k[i-1]-1;j>=k[i];j--)\n\t\t\tif((df*=p)>=(n-i+1)){while(i<=n)b=(b+ksm(p,k[i++]))%mod; return;}\n\t\tdf?(b=(b+ksm(p,k[i]))%mod,df--):(a=(a+ksm(p,k[i]))%mod,df=1);\n\t}\n}\n\nint main(){\n\tint t=read();\n\twhile(t--)solve(),cout<<(a-b+mod)%mod<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1591368282,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1361B \u3010Johnny and Grandmaster\u3011"
    },
    {
        "content": "\n\n## CF1361B Johnny and Grandmaster\n\n\u9996\u5148\u7279\u5224$p=1$\u7684\u60c5\u51b5\uff1a$n$\u4e3a\u5947\u6570\u7b54\u6848\u5c31\u662f$1$\uff0c\u5426\u5219\u5c31\u662f$0$\u3002\n\n\u5f53$p>2$\u65f6\uff0c\u6bcf$p$\u4e2a$p^{k-1}$\u53ef\u4ee5\u6362\u4e00\u4e2a$p^{k}$\u3002\u5148\u8bb0\u5f55\u4e0b\u6bcf\u4e2a$k$\u503c\u7684\u51fa\u73b0\u6b21\u6570\u3002\u7136\u540e**\u4ece\u5927\u5230\u5c0f**\u626b\u63cf$k$\u503c\u3002\u5bf9\u4e8e\u5f53\u524d$k$\u503c\uff0c\u8bb0\u5b83\u5728\u8f93\u5165\u5e8f\u5217\u91cc\u7684\u51fa\u73b0\u6b21\u6570\u4e3a$\\text{cnt}$\u3002\u5047\u8bbe\u5728\u6b64\u4e4b\u524d\uff0c\u4e24\u4e2a\u96c6\u5408\u7684\u548c\u662f\u76f8\u540c\u7684\uff08\u663e\u7136\u521d\u59cb\u65f6\u5c31\u662f\u8fd9\u6837\uff09\u3002\u90a3\u4e48\u5f53\u524d\u4f1a\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1. $\\text{cnt}$\u4e3a\u5076\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u7ed9\u4e24\u4e2a\u96c6\u5408\u7684\u548c\u5404\u52a0\u4e0a$\\frac{\\text{cnt}}{2}\\cdot p^k$\u3002\u6b64\u65f6\u4e24\u4e2a\u96c6\u5408\u7684\u548c\u4ecd\u7136\u662f\u76f8\u540c\u7684\uff0c\u76f4\u63a5\u8003\u8651\u4e0b\u4e00\u4e2a$k$\u3002\n2. $\\text{cnt}$\u4e3a\u5947\u6570\u3002\u5148\u7ed9\u4e00\u4e2a\u96c6\u5408\u52a0\u4e0a$\\lceil\\frac{\\text{cnt}}{2}\\rceil\\cdot p^k$\uff08\u79f0\u4e3a\u5927\u96c6\u5408\uff09\uff0c\u7ed9\u53e6\u4e00\u4e2a\u96c6\u5408\u52a0\u4e0a$\\lfloor\\frac{\\text{cnt}}{2}\\rfloor\\cdot p^k$\uff08\u79f0\u4e3a\u5c0f\u96c6\u5408\uff09\u3002\u73b0\u5728\u4e24\u4e2a\u96c6\u5408\u548c\u76f8\u5dee\u4e86$p^k$\u3002\u6211\u4eec\u5c1d\u8bd5\u4ece$<k$\u7684\u503c\u91cc\u62ff\u4e00\u4e9b\u4e0a\u6765\uff0c\u628a\u8fd9\u90e8\u5206\u5dee\u503c\u8865\u9f50\u3002\u6709\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u53d1\u73b0\u662f\uff1a\u60f3\u8981\u8865\u9f50\u8fd9\u4e2a\u5dee\u503c\uff0c\u6700\u591a\u5411\u4e0b\u627e$\\log_pn$\u4e2a\u503c\uff0c\u6240\u4ee5\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e$(k-1),(k-2),\\dots (k-\\log_pn)$\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u770b\u80fd\u4e0d\u80fd\u8865\u9f50\u3002\u5982\u679c\u80fd\u8865\u9f50\uff0c\u90a3\u4e48\u73b0\u5728\u4e24\u4e2a\u96c6\u5408\u7684\u548c\u8fd8\u662f\u76f8\u540c\u7684\uff0c\u7ee7\u7eed\u8003\u8651\u4e0b\u4e00\u4e2a$k$\u3002\n3. \u5982\u679c\u7b2c2\u6b65\u4e2d\uff0c\u6211\u4eec\u65e0\u6cd5\u8865\u9f50\u4e24\u4e2a\u96c6\u5408\u7684\u5dee\uff0c\u90a3\u8bf4\u660e\u5269\u4e0b\u6240\u6709\u6570\u7684\u548c\u52a0\u8d77\u6765\u90fd\u4e0d\u5230$p^k$\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u5269\u4e0b\u7684\u6240\u6709\u6570\u5168\u90e8\u52a0\u5165\u201c\u5c0f\u96c6\u5408\u201d\u91cc\uff0c\u7136\u540e\u8f93\u51fa\u7b54\u6848\uff08\u4e24\u96c6\u5408\u4e4b\u5dee\uff09\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_2n+n\\log_p n)$\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n//problem:B\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define pb push_back\n#define mk make_pair\n#define lob lower_bound\n#define upb upper_bound\n#define fi first\n#define se second\n#define SZ(x) ((int)(x).size())\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\n\nconst int MOD=1e9+7;\ninline int mod1(int x){return x<MOD?x:x-MOD;}\ninline int mod2(int x){return x<0?x+MOD:x;}\ninline void add(int& x,int y){x=mod1(x+y);}\ninline void sub(int& x,int y){x=mod2(x-y);}\ninline int pow_mod(int x,int i){int y=1;while(i){if(i&1)y=(ll)y*x%MOD;x=(ll)x*x%MOD;i>>=1;}return y;}\n\nconst int MAXN=1e6;\nint n,p,a[MAXN+5];\n\nint main() {\n\tint T;cin>>T;while(T--){\n\t\tcin>>n>>p;\n\t\tmap<int,int>mp;\n\t\tfor(int i=1;i<=n;++i){\n\t\t\tcin>>a[i];\n\t\t\tmp[-a[i]]++;\n\t\t}\n\t\tif(p==1){\n\t\t\tcout<<(n&1)<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tint summx=0,summn=0;\n\t\tbool flag=0;\n\t\tfor(map<int,int>::iterator it=mp.begin();it!=mp.end();++it){\n\t\t\tint k=-(it->fi);\n\t\t\tint cnt=(it->se);\n\t\t\t//cout<<k<<\" \"<<cnt<<endl;\n\t\t\tint v=pow_mod(p,k);\n\t\t\tif(flag){\n\t\t\t\tadd(summn,(ll)v*cnt%MOD);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(cnt&1){\n\t\t\t\tll need=1;\n\t\t\t\tfor(int kk=k-1;kk>=0;--kk){\n\t\t\t\t\tneed*=p;\n\t\t\t\t\tif(need>MAXN)break;\n\t\t\t\t\tif(!mp.count(-kk))continue;\n\t\t\t\t\tif(mp[-kk]>=need){\n\t\t\t\t\t\tneed=0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tneed-=mp[-kk];\n\t\t\t\t}\n\t\t\t\tif(!need){\n\t\t\t\t\tneed=1;\n\t\t\t\t\tfor(int kk=k-1;kk>=0;--kk){\n\t\t\t\t\t\tneed*=p;\n\t\t\t\t\t\tif(need>MAXN)break;\n\t\t\t\t\t\tif(!mp.count(-kk))continue;\n\t\t\t\t\t\tif(mp[-kk]>=need){\n\t\t\t\t\t\t\tmp[-kk]-=need;\n\t\t\t\t\t\t\tneed=0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tneed-=mp[-kk];\n\t\t\t\t\t\tmp[-kk]=0;\n\t\t\t\t\t}\n\t\t\t\t\tadd(summx,(ll)v*(cnt/2+1)%MOD);\n\t\t\t\t\tadd(summn,(ll)v*(cnt/2+1)%MOD);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tflag=1;\n\t\t\t\t\tadd(summx,(ll)v*(cnt/2+1)%MOD);\n\t\t\t\t\tadd(summn,(ll)v*(cnt/2)%MOD);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tadd(summx,(ll)v*(cnt/2)%MOD);\n\t\t\t\tadd(summn,(ll)v*(cnt/2)%MOD);\n\t\t\t}\n\t\t}\n\t\tcout<<mod2(summx-summn)<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1591438151,
        "uid": 100674,
        "name": "duyi",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1361B \u3010Johnny and Grandmaster\u3011"
    },
    {
        "content": "# CF1361B - Johnny and Grandmaster\n- https://www.luogu.com.cn/problem/CF1361B\n- \u5e42\u8fd0\u7b97\u7684\u6027\u8d28\u3001\u8d2a\u5fc3\n\n## \u9898\u610f\n\u7ed9\u51fa\u4e00\u4e2a\u957f\u5ea6\u4e3a $n(n\\leq 10^6)$ \u7684\u5e8f\u5217\u548c\u4e00\u4e2a\u6b63\u6574\u6570 $p(1\\leq p\\leq 10^6)$\uff0c\u5e8f\u5217 $a=[a_1,a_2,\\dots a_n](0\\leq a_i\\leq 10^6)$ \u5b9e\u9645\u610f\u4e49\u662f\u7ed9\u51fa $n$ \u4e2a\u6570\u5b57 $[p^{a_1},p^{a_2},\\dots p^{a_n}]$\u3002\n\n\u73b0\u8981\u6c42\u5c06\u8fd9 $n$ \u4e2a\u6570\u5b57\u5212\u5206\u4e3a\u4e24\u4e2a\u96c6\u5408\uff0c\u6bcf\u4e2a\u6570\u5b57\u5fc5\u987b\u5c5e\u4e8e\u67d0\u4e00\u4e2a\u96c6\u5408\u3002\n\n\u73b0\u5728\u9700\u8981\u6700\u5c0f\u5316\u4e24\u4e2a\u96c6\u5408\u5143\u7d20\u52a0\u548c\u7684\u5dee\u503c\uff0c\u6c42\u5dee\u503c\u5bf9 $10^9+7$ \u53d6\u6a21\u7684\u7ed3\u679c\u3002\uff08\u6ce8\u610f\uff1a\u662f\u6700\u5c0f\u5316\u539f\u6765\u5143\u7d20\u52a0\u548c\u7684\u5dee\u503c\uff0c\u800c\u4e0d\u662f\u6700\u5c0f\u5316\u53d6\u6a21\u540e\u7684\u5dee\u503c\u3002\uff09\n\n## \u601d\u8def\n\n\u5c06\u6240\u6709\u5143\u7d20\u964d\u5e8f\u6392\u5e8f\u3002\n\n\u7b2c $1$ \u4e2a\u5143\u7d20\u662f $p^{a_1}$\uff0c\u5c06\u5176\u653e\u5728 $A$ \u96c6\u5408\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u9700\u8981\u5411\u540e\u5bfb\u627e\u5143\u7d20\u653e\u5728 $B$ \u96c6\u5408\uff0c\u7528\u4e8e\u51cf\u5c11\u5dee\u503c\u3002\n\n\u5bfb\u627e\u7684\u8fc7\u7a0b\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n- \u5b58\u5728\u4f4d\u7f6e $2\\leq k\\leq n$\uff0c\u6ee1\u8db3 $p^{a_1}=\\sum_{i=2}^{k} p^{a_i}$\u3002\n- \u4e0d\u5b58\u5728\u4f4d\u7f6e $2\\leq k\\leq n$\uff0c\u6ee1\u8db3 $p^{a_1}=\\sum_{i=2}^{k} p^{a_i}$\uff0c\u5e76\u4e14 $p^{a_1}<\\sum_{i=2}^{n} p^{a_i}$\u3002\n\n>**\u4e3a\u4ec0\u4e48\u6ca1\u6709\u8fd9\u79cd\u60c5\u51b5\uff1f**\n>- \u5b58\u5728\u4f4d\u7f6e $k$\uff0c\u6ee1\u8db3 $p^{a_1}>\\sum_{i=2}^{k} p^{a_i}$ \u4f46 $p^{a_1}<\\sum_{i=2}^{k+1} p^{a_i}$\u3002\n>\n>\u5047\u8bbe\u5f53\u524d\u5728\u4f4d\u7f6e $q$\uff0c\u4e24\u96c6\u5408\u5dee\u503c\u4e3a $d$\uff0c\u90a3\u4e48\u4e00\u5b9a\u6709 $d\\geq p^{a_q}$ \u4e14 $d \\mod p^{a_q}=0$\u3002\n>\n> \u56e0\u6b64\uff0c\u5c06\u4e24\u96c6\u5408\u5dee\u503c\u51cf\u5c0f $p^{a_q}$ \u540e\uff0c\u4e00\u5b9a\u6709 $d\\geq 0$\u3002\n\n\u5206\u522b\u7ef4\u62a4 $A,B$ \u4e24\u4e2a\u96c6\u5408\u7684\u5143\u7d20\u52a0\u548c\uff0c\u964d\u5e8f\u6392\u5e8f\u540e\u904d\u5386\u6240\u6709\u5143\u7d20\u3002\u5bf9\u4e8e\u5f53\u524d\u5143\u7d20\uff0c\u54ea\u4e2a\u96c6\u5408\u7684\u52a0\u548c\u8f83\u5c0f\uff0c\u5c31\u5c06\u5f53\u524d\u5143\u7d20\u52a0\u5230\u54ea\u4e2a\u96c6\u5408\u4e2d\u3002\n\n\u964d\u5e8f\u6392\u5e8f\u540e\uff0c$A,B$ \u4e24\u4e2a\u96c6\u5408\u7684\u5dee\u503c\u5448\u73b0\u5982\u4e0b\u53d8\u5316\u7279\u70b9\uff1a\n- $A,B$ \u7684\u5dee\u503c\u4e0d\u65ad\u903c\u8fd1 $0$\u3002\n- $A,B$ \u7684\u5dee\u503c\u5728\u7b49\u4e8e $0$ \u540e\uff0c\u7a81\u7136\u589e\u5927\uff0c\u540e\u53c8\u903c\u8fd1 $0$\u3002\u7a81\u589e\u7684\u589e\u52a0\u91cf\u4e00\u6b21\u6bd4\u4e00\u6b21\u5c0f\u3002\n\n\u57fa\u4e8e\u8d2a\u5fc3\u7684\u601d\u60f3\uff0c$A,B$ \u7684\u5dee\u503c\u5728\u7b49\u4e8e $0$ \u540e\uff0c\u7a81\u7136\u589e\u5927\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528\u540e\u9762\u7684\u5143\u7d20\u5f25\u8865\u589e\u52a0\u91cf\u3002\n\n#### \u5177\u4f53\u5b9e\u73b0\n\u5047\u8bbe $A$ \u7684\u52a0\u548c $>$ $B$ \u7684\u52a0\u548c\uff0c\u7ef4\u62a4\u5dee\u503c $d$\u3002\n\n\u4e00\u5f00\u59cb\u5c06\u6700\u5927\u7684 $p^{a_1}$ \u653e\u5165\u96c6\u5408 $A$\uff08\u6b64\u65f6 $d=p^{a_1}$\uff09\uff0c\u518d\u5c06\u7b2c\u4e8c\u4e2a\u5143\u7d20\u653e\u5165 $B$ \u4e2d\uff08$d:=d-p^{a_2}$\uff09\u3002\n\n\u5f53\u8fdb\u884c\u5230\u67d0\u4e00\u4e2a\u5143\u7d20\u65f6\u53d1\u73b0 $d=0$ \u65f6\uff0c\u5c06\u5f53\u524d\u5143\u7d20\u653e\u5165 $A$\uff08$d:=p^{a_i}$\uff09\u5373\u53ef\u3002\n",
        "postTime": 1681636193,
        "uid": 36285,
        "name": "\u6c27\u5c11Kevin",
        "ccfLevel": 4,
        "title": "# CF1361B-Johnny and Grandmaster-\u5e42\u8fd0\u7b97\u7684\u6027\u8d28,\u8d2a\u5fc3"
    },
    {
        "content": "## \u601d\u8def\n\n\u8003\u8651\u8d2a\u5fc3\u3002\u5148\u5c06 $k$ \u4ece\u5927\u5230\u5c0f\u6392\u4e2a\u5e8f\u3002\u5230\u7b2c $i$ \u4e2a\u6570\u65f6\uff0c\u5982\u679c\u8fd9\u65f6\u4e24\u4e2a\u96c6\u5408\u91cc\u7684\u6570\u548c\u76f8\u7b49\uff0c\u5c31\u628a\u8fd9\u4e2a\u6570\u6254\u5230\u5176\u4e2d\u4e00\u4e2a\u96c6\u5408\u91cc\uff0c\u6211\u4eec\u79f0\u4e3a\u7b2c\u4e00\u4e2a\u96c6\u5408\uff0c\u4ee5\u540e\u7684\u6570\u90fd\u6254\u5230\u53e6\u4e00\u4e2a\u96c6\u5408\u91cc\uff0c\u6211\u4eec\u79f0\u4e3a\u7b2c\u4e8c\u4e2a\u96c6\u5408\uff0c\u76f4\u5230\u4e24\u4e2a\u96c6\u5408\u91cc\u7684\u6570\u548c\u518d\u6b21\u76f8\u7b49\u4e3a\u6b62\uff0c\u91cd\u590d\u4e0a\u8ff0\u64cd\u4f5c\u3002\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u7b2c\u4e00\u4e2a\u96c6\u5408\u4e2d\u7684\u6570\u548c\u4e00\u5b9a\u4f1a\u5927\u4e8e\u7b49\u4e8e\u7b2c\u4e8c\u4e2a\u96c6\u5408\u4e2d\u7684\u6570\u548c\u5462\uff1f\u56e0\u4e3a $p^k=p\\times p^{k-1}$\uff0c\u800c $k$ \u53c8\u5df2\u7ecf\u964d\u5e8f\u6392\u5e8f\u4e86\uff0c\u6240\u4ee5\u7b2c\u4e8c\u4e2a\u96c6\u5408\u4e2d\u7684\u6570\u548c\u4e00\u5b9a\u4e0d\u4f1a\u5927\u4e8e\u7b2c\u4e00\u4e2a\u96c6\u5408\u4e2d\u7684\u6570\u548c\u3002\n\n\u4f46\u662f\u672c\u9898\u4e2d $p^k$ \u4f1a\u5f88\u5927\uff0c\u9700\u8981\u53d6\u6a21\u3002\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a\u6570\u662f $10^9+7$ \u7684\u500d\u6570\uff0c\u5bfc\u81f4\u88ab\u6211\u4eec\u5f53\u505a $0$ \u7684\u60c5\u51b5\u3002\u600e\u4e48\u89e3\u51b3\u5462\uff1f\u53ef\u4ee5\u91c7\u7528\u53cc\u6a21\u6570\u7684\u65b9\u5f0f\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u51fa\u73b0\u5047\u7684 $0$ \u7684\u6982\u7387\u3002\n\n## \u4ee3\u7801\n\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int moda=1e9+7;\nconst int modb=1e6+5;\nconst int N=1e6+5;\nint T,n,p,a[N],suma,sumb;\nint read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nint qp(int x,int y,int mod){\n\tint ans=1;\n\twhile(y){\n\t\tif(y&1)ans*=x,ans%=mod;\n\t\tx*=x;x%=mod;\n\t\ty>>=1;\n\t}\n\treturn ans;\n}\nsigned main(){\n\tT=read();\n\twhile(T--){\n\t\tn=read();p=read();suma=0;sumb=0;\n\t\tfor(int i=1;i<=n;i++)a[i]=read();\n\t\tsort(a+1,a+1+n);\n\t\tfor(int i=n;i>=1;i--){\n\t\t\tif(!suma&&!sumb){\n\t\t\t\tsuma=qp(p,a[i],moda);\n\t\t\t\tsumb=qp(p,a[i],modb);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tsuma-=qp(p,a[i],moda);suma=(suma%moda+moda)%moda;\n\t\t\t\tsumb-=qp(p,a[i],modb);sumb=(sumb%modb+modb)%modb;\n\t\t\t}\n\t\t}\n\t\tprintf(\"%lld\\n\",suma);\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1680670498,
        "uid": 356925,
        "name": "\u5feb\u6597\u6e38\u9e7f",
        "ccfLevel": 4,
        "title": "CF1361B\u9898\u89e3"
    },
    {
        "content": "\u76ee\u524d\u6700\u4f18\u89e3\u5199\u6cd5\u3002\n\n\u9996\u5148\u5c06 $k_i$ \u964d\u5e8f\u6392\u5217\uff0c\u5e76\u5c06\u76f8\u540c\u7684 $k_i$ \u5408\u5e76\u3002\u7531\u4e8e\u6bcf\u4e2a\u5f0f\u5b50\u90fd\u662f\u5f62\u5982 $p^{k_i}$ \u7684\u5f62\u5f0f\uff0c\u5373\u5e95\u6570\u76f8\u540c\uff0c\u53ef\u4ee5\u8003\u8651\u53d8\u6210 $p$ \u8fdb\u5236\uff0c\u53d1\u73b0\u5bf9\u4e8e\u4efb\u610f $c_1,\\, \\ldots ,\\, c_{i+1}$ \u548c $a_0 < a_1 < a_2 \\ldots < a_{i+1}$\uff0c\u6ee1\u8db3 $c_{i+1} \\times p^{a_{i+1}} \\ge \\sum\\limits_{j=1}^i c_{j} \\times p_{a_j}$ \u65f6\uff0c$c_{i+1} \\times p^{a_{i+1}} - \\sum\\limits_{j=1}^i c_{j} \\times p_{a_j}$ \u4e00\u5b9a\u88ab $p^{a_0}$ \u6574\u9664\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u8bb0\u5f55 $s1,\\,s2$ \u8868\u793a\u4e24\u5806\u7684\u548c\uff0c\u4f7f\u4efb\u610f\u65f6\u523b $s1 < s2$\u3002\n\u8003\u8651 $k_i$ \u964d\u5e8f\u6392\u5e8f\u65f6\u8d2a\u5fc3\u7528\u8f83\u5927\u7684 $k$ \u8865\u8db3 $s2-s1$\u3002$\\text{now}$ \u5f53\u524d\u5230 $i$\uff0c\u4e14 $p^{k_i} \\times \\text{now} = s2 - s1$\u3002\u7531\u4e8e\u662f\u964d\u5e8f\u6392\u5e8f\uff0c\u5982\u679c $\\text{now} > n$ \u90a3\u4e48\u540e\u9762\u7684 $k$ \u90fd\u4e00\u5b9a\u5206\u914d\u5230 $s1$\u3002\u5426\u5219\u5148\u4f7f $s1=s2$\uff0c\u518d\u7528\u5269\u4e0b\u7684 $k_i$ \u5206\u914d\u7ed9 $s1,s2$\uff0c\u6ce8\u610f\u6ee1\u8db3 $s1<s2$\u3002\n\n$\\text{Code}$\uff1a\n\n```cpp\ndef(N, int, 1e6 + 5)\ndef(p, int, 1e9 + 7)\n\nint n, m;\nint k[N];\n\nint main() {\n\tint t; qread(t);\n\tW(t) {\n\t\tqread(n, m);\n\t\trep(i, 1, n) qread(k[i]);\n\t\tsort(k + 1, k + n + 1, greater<int>());\n\t\tll nw = 0;\n\t\tll s1 = 0, s2 = 0;\n\t\trep(i, 1, n) {\n\t\t\tif(nw && m != 1 && i != 1) {\n\t\t\t\tint nwm = k[i - 1] - k[i];\n\t\t\t\trep(j, 1, nwm) {\n\t\t\t\t\tnw *= m;\n\t\t\t\t\tif(nw > n) {\n\t\t\t\t\t\trep(l, i, n) s1 = (s1 + qpow(k[l], m, p)) % p;\n\t\t\t\t\t\tgoto End;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tint cn = 0, j = i;\n\t\t\twhile(j <= n && k[i] == k[j]) ++j, ++cn;\n\t\t\tint ps = min(nw, (ll)cn); nw -= ps;\n\t\t\tif(cn > ps) {\n\t\t\t\tcn -= ps;\n\t\t\t\tint c1 = cn >> 1, c2 = cn - c1;\n\t\t\t\tif(c1 != c2) nw = 1;\n\t\t\t\ts1 = qpow(k[i], m, p) * c1 % p;\n\t\t\t\ts2 = qpow(k[i], m, p) * c2 % p;\n\t\t\t}\n\t\t\telse s1 = (s1 + qpow(k[i], m, p) * cn % p) % p;\n\t\t\ti = j - 1;\n\t\t\t// cout << s1 << ' ' << s2 << endl;\n\t\t}\n\t\tEnd:;\n\t\tprintf(\"%lld\\n\", (s2 - s1 + p) % p);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1640669061,
        "uid": 242543,
        "name": "BreezeEnder",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1361B Johnny and Grandmaster"
    },
    {
        "content": "\u8fd9\u9898\u7684\u5927\u6982\u610f\u601d\u5c31\u662ft\u7ec4\u6570\u636e\uff0c\u6bcf\u7ec4\u7ed9\u4f60\u4e00\u4e2an\u548cp\uff0c\u6709n\u4e2a\u6570\u5b57\uff0c\u6bcf\u4e2a\u6570\u5b57\u4ee3\u8868\u662fp^k ,\u95ee\u628a\u8fd9\u4e9b\u6570\u5b57\u5206\u62102\u7ec4\uff0c\u7b2c\u4e00\u7ec4\u6240\u6709\u548c\u4e3aa,\u7b2c\u4e8c\u7ec4\u548c\u4e3ab,\u6c42|a-b|\u6700\u5c0f\u503c\uff0c\u8fd9\u4e2a\u503c\u53ef\u80fd\u5f88\u5927\uff0c\u5bf91000000007\u53d6\u4f59\n\n\u9996\u5148\u770b\u5230\u8fd9\u9898\uff0c\u6211\u5c31\u60f3\u8d77\u4e86\u524d\u6bb5\u65f6\u95f4\u67d0\u573adiv2\u7684A\uff0c[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1348A)\uff0c\u90a3\u9898\u8303\u56f4\u6bd4\u8fd9\u9898\u5c0f\u5f88\u591a\uff0c\u76f8\u5f53\u4e8e\u9650\u5236\u4e86t\u4e3a1\uff0cp\u4e3a2\uff0c\u5e76\u4e14\u4e0d\u4f1a\u8d85\u51faint\u8303\u56f4\uff0cn\u4e2a\u6570\u5b57\u4e5f\u4e0d\u4f1a\u91cd\u590d\uff0c\u4f46\u662f\u57fa\u672c\u601d\u60f3\u662f\u53ef\u4ee5\u501f\u9274\u7684\n\n\uff08\u5177\u4f53\u53ef\u4ee5\u7ed3\u5408\u4ee3\u7801\uff09\n\n\u5047\u5982\u8fd9n\u4e2a\u6570\u5b57\uff0c\u6709\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u6570\u5b57\uff0c\u5c31\u7b97\u4ed6\u4e00\u4e2a\u6570\u5b57\u4e00\u7ec4\uff0c\u5176\u4ed6\u6240\u6709n-1\u4e2a\u6570\u5b57\u52a0\u8d77\u6765\u90fd\u6ca1\u4ed6\u5927\uff0c\u90a3\u7ed3\u679c\u80af\u5b9a\u662f\u4ed6\u51cf\u53bb\u5176\u4ed6\u6240\u6709\u7684\u6570\u5b57\n\n\u90a3\u600e\u4e48\u5224\u65ad\u8fd9\u4e2a\u6570\u5b57\u662f\u5426\u8db3\u591f\u5927\u5462\uff1f\u6211\u4eec\u90fd\u77e5\u9053p^n\u76f8\u5f53\u4e8en\n\u4e2ap^(n-1)\u76f8\u4e58\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u628a\u8fd9n\u4e2a\u6570\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u4e00\u6b21\uff0c\u53d6\u7b2c\u4e00\u4f4d\u4e3a\u6700\u5927\u503c\uff0c\u8bb0\u5f55\u5f53\u524d\u7684\u9636\u6570ans,\u7136\u540e\u5224\u65ad\u7b2c\u4e8c\u4f4d\uff0c\u7b2c\u4e8c\u4f4d\u80af\u5b9a\u662f\u5c0f\u4e8e\u7b49\u4e8e\u7b2c\u4e00\u4f4d\u7684\uff0c\u6240\u4ee5\u5206\u5f00\u5224\u65ad\uff0c\n\n\u5047\u5982\u5c0f\u4e8eans\uff0c\u8fd9\u4e2a\u65f6\u5019\u518d\u5206\uff0c\u7b2c\u4e09\u4f4d\uff0c\u7b2c\u56db\u4f4d\u4e00\u76f4\u5230\u7b2cn\u4f4d\uff0c\u80af\u5b9a\u90fd\u662f\u5c0f\u4e8e\u7b49\u4e8e\u7b2c\u4e8c\u4f4d\u7684\uff0c\u6240\u4ee5\u540e\u9762\u7684\u6570\u5b57\u6700\u5927\u7d2f\u52a0\u4e5f\u5c31\u662f(n-1)\u4e2ap^(\u7b2c\u4e8c\u4f4d),\u6240\u4ee5\u53ea\u8981\u7b2c\u4e00\u4f4d\u6362\u7b97\u6210x * p^(n-1)\u7684\u65f6\u5019\uff0cx\u5927\u4e8e\u7b49\u4e8en-1\u5373\u53ef\uff0c\u800c\u6362\u7b97\u5c31\u7b80\u5355\u4e86\uff0cp^n\u53d8\u6210p^(n-1)\u7684\u65f6\u5019\uff0cx\u4e58\u4ee5p\u5c31\u884c\u3002\u5047\u5982x\u5c0f\u4e8en-1\uff0c\u5c31\u4ee3\u8868\u7b2c\u4e00\u4e2a\u503c\u8fd8\u4e0d\u591f\u5927\uff0c\u90a3\u6682\u65f6\u8fd8\u4e0d\u80fd\u76f4\u63a5\u51cf\u53bb\u540e\u9762\u6240\u6709\u7684\uff0c\u6682\u65f6\u5148\u51cf\u6389\u7b2c\u4e8c\u5927\u7684\u3002\u7136\u540e\u4ece\u7b2c\u4e09\u4f4d\u5f00\u59cb\uff0c\u8fd9\u4e2a\u65f6\u5019\u7b2c\u4e09\u4f4d\u53c8\u662f\u6700\u5927\u503c\u4e86\uff0c\u91cd\u590d\u8fdb\u884c\u4e0a\u8ff0\u64cd\u4f5c\n\n\u7b49\u4e8eans\u7684\u8bdd\uff0c\u76f4\u63a5\u51cf\u53bb\u7b2c\u4e8c\u4f4d\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4f4d\u548c\u7b2c\u4e8c\u4f4d\u76f8\u7b49\uff0c\u6d88\u53bb\u4e86\n```cpp\n#include <bits/stdc++.h>\n#define rep(i,a,n) for(int i=a;i<n;i++)\ntypedef long long ll;\nusing namespace std;\nconst int maxn = 1000005;\nconst ll mod = 1000000007;\nint cmp(int a,int b)\n{\n\treturn a>b;\n}\nlong long qpow(long long m,long long n,long long mod)\n{//\u5feb\u901f\u5e42 \n\tlong long temp;\n\tif (n==0) return 1;\n\ttemp=qpow(m,n>>1,mod);\n\tif (n%2==0) return temp*temp%mod;\n\t\telse return m*temp%mod*temp%mod;\n}\nll ans,sum,num,p,n;\nint T;\nll a[maxn];\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\t//\u6b64\u9898\u4e0d\u8981\u7528cin\u548ccout\u8bfb\u5165\u8f93\u51fa\uff0c\u4f1aT \n\tscanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tbool flag=false;\n\t\tscanf(\"%lld %lld\",&n,&p);\n\t\trep(i,1,n+1)\n\t\t{\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t}\n\t\tif(p==1)\n\t\t{//\u5047\u5982p\u662f1\uff0c1\u4e0d\u7ba1\u591a\u5c11\u6b21\u5e42\u90fd\u662f1\uff0c\u6240\u4ee5n\u662f\u5947\u6570\uff0csum\u5c31\u662f1\uff0cn\u662f\u5076\u6570\uff0csum\u5c31\u662f0 \n\t\t\tprintf(\"%lld\\n\",n&1);\n\t\t\tcontinue;\n\t\t}\n\t\tsort(a+1,a+n+1,cmp);//\u4ece\u5927\u5230\u5c0f\u6392\u5e8f \n\t\tsum=0,num=0;//sum\u603b\u548c\uff0cnum\u8868\u793a\u5f53\u524d\u5b58\u50a8\u4e86\u51e0\u4e2a\u672a\u5904\u7406\u7684\u6570\u5b57 \n\t\trep(i,1,n+1)\n\t\t{\n\t\t\tif(!num)\n\t\t\t{//num\u4e3a0\u4e86\uff0c\u4e4b\u524d\u7684\u6570\u5b57\u5168\u90e8\u5904\u7406\u5149\u4e86\uff0c\u76f8\u5f53\u4e8e\u91cd\u65b0\u5f00\u59cb\u4e86 \n\t\t\t\tnum++;\n\t\t\t\tans=a[i];//ans\u5b58\u50a8\u5f53\u524d\u5f85\u5904\u7406\u7684\u6570\u7684\u5e42\u6b21 \n\t\t\t\t(sum+=qpow(p,a[i],mod))%=mod;\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twhile(ans>a[i])//\u5f85\u5904\u7406\u7684\u6570\u5b57\u7684\u5e42\u6b21\u6bd4\u540e\u9762\u7684\u5e42\u6b21\u5927 \n\t\t\t\t{\n\t\t\t\t\tans--;//\u5e42\u6b21\u964d\u4f4e\u4e00 \n\t\t\t\t\tnum*=p;//\u6570\u91cf\u4e58\u4ee5p   p * (p ^ n-1) = p ^ n \n\t\t\t\t\tif(num>=n-i+1)//num\u6bd4\u5269\u4f59\u7684\u52a0\u8d77\u6765\u90fd\u591a\u6216\u8005\u4e0d\u5c0f\u4e8e \n\t\t\t\t\t{//\u76f4\u63a5\u5f00\u51cf,\u628a\u5f53\u524d\u6570\u5b57\u540e\u9762\u7684\u5168\u7ed9\u51cf\u53bb \n\t\t\t\t\t\trep(j,i+1,n+1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(sum-=qpow(p,a[j],mod)-mod)%=mod;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tflag=true;//\u6807\u8bb0\u6539\u4e3atrue,\u65b9\u4fbf\u5f85\u4f1a\u76f4\u63a5\u9000\u51fa\uff0c\u9632\u6b62\u5197\u4f59\u5904\u7406 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}//\u5f53\u5f85\u5904\u7406\u7684\u6570\u5b57\u7684\u5e42\u6b21\u7b49\u4e8e\u540e\u9762\u7684\u5e42\u6b21\u4e86 \n\t\t\t\tnum--;//\u56e0\u4e3a\u5e42\u6b21\u76f8\u540c\uff0c\u6d88\u53bb\u4e00\u4e2a \n\t\t\t\t(sum-=qpow(p,a[i],mod)-mod)%=mod; \n\t\t\t}\n\t\t\tif(flag)//\u9000\u51fa \n\t\t\tbreak;\n\t\t}\n\t\tprintf(\"%lld\\n\",sum);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1591344671,
        "uid": 251466,
        "name": "wwldx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1361B \u3010Johnny and Grandmaster\u3011"
    }
]
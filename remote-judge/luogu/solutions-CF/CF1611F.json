[
    {
        "content": "### \u89e3\u9898\u601d\u8def:\n\n~~1800 \u5c31\u8fd9\uff1f~~\n\n\u8003\u8651\u5c3a\u53d6\u6cd5\uff0c\u6bcf\u4e00\u6b21\u5411\u53f3\u79fb\u52a8\u4e00\u6b21\u53f3\u6307\u9488\uff0c\u7136\u540e\u4e0d\u65ad\u5411\u53f3\u79fb\u52a8\u5de6\u6307\u9488\u76f4\u5230\u6ee1\u8db3\u6761\u4ef6\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u7ef4\u62a4\u5f53\u524d\u5269\u4e0b\u7684\u94b1\u5c31\u884c\u4e86\u3002\n\n\u4e00\u4e2a\u5c0f trick \u5c31\u662f\u53ef\u4ee5\u8ba9\u5de6\u6307\u9488\u79fb\u52a8\u8d85\u8fc7\u53f3\u6307\u9488\u4e00\u4e2a\u5355\u4f4d\uff0c\u518d\u66f4\u6539\u4e00\u4e0b\u8ba1\u7b97\u957f\u5ea6\u7684\u4ee3\u7801\uff0c\u4f7f\u5f97\u7b97\u4e0b\u6765\u7684\u7b54\u6848\u65e0\u6cd5\u66f4\u65b0 ans\uff0c\u76f4\u63a5\u7701\u53bb\u65e0\u89e3\u7684\u7279\u5224\u3002\n\n\n\u6ce8\u610f\u7528\u957f\u6574\u578b\u5b58\u50a8\u6570\u636e\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define int long long\nint l,r,a[200005],T,n,now,ans=-1,ansl,ansr;\nsigned main(){\n\tscanf(\"%I64d\",&T);\n\twhile(T--){\n\t\tscanf(\"%I64d%I64d\",&n,&now);\n\t\tfor(int i=1;i<=n;i++)scanf(\"%I64d\",&a[i]);\n\t\tr=0;\n\t\tans=-1;\n\t\tl=1;\n\t\twhile(r<n){\n\t\t\tnow+=a[++r];\n\t\t\tif(now<0){\n\t\t\t\twhile(l<=r&&now<0){\n\t\t\t\t\tnow-=a[l];\n\t\t\t\t\tl++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(r-l>ans){\n\t\t\t\tans=r-l;\n\t\t\t\tansl=l;\n\t\t\t\tansr=r;\n\t\t\t}\n\t\t}\n\t\tif(ans==-1)printf(\"-1\\n\");\n\t\telse printf(\"%I64d %I64d\\n\",ansl,ansr);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1639441660,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "CF1611F ATM and Students \u9898\u89e3"
    },
    {
        "content": "\u5468\u4e09\u7684\u65f6\u5019 vp CF1611\uff0c\u8fd9\u9053\u9898\u6709\u601d\u8def\u4f46\u6ca1\u505a\u51fa\u6765\uff0c\u8bfe\u540e\u8ddf\u738b\u6c5f\u777f\u8ba8\u8bba\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u53ef\u4ee5\u7528\u524d\u7f00\u548c\uff0cST\u8868\u641e\u641e\u3002\n\n\u82b1\u4e86\u4e00\u5929\u65f6\u95f4\uff0c\u7ec8\u4e8e\u5728\u8d5b\u540e\u628a\u8fd9\u9053\u9898\u5199\u5b8c\u4e86\u3002\n\n\u9898\u610f\uff1a\u6c42\u6700\u957f\u533a\u95f4 $[l,r]$ \u4f7f\u5f97 $s+\\sum\\nolimits_{i=l}^ra_i$ \u7684\u6bcf\u4e00\u4e2a\u524d\u7f00\u5747\u5927\u4e8e\u7b49\u4e8e $0$\u3002\n\n\u8fd9\u9053\u9898\u9996\u5148\u5148\u5426\u5b9a\u66b4\u529b\uff1a\u56e0\u4e3a\u8981\u5728\u6bcf\u4e00\u65f6\u523b\u90fd\u5927\u4e8e\u7b49\u4e8e $0$\uff0c\u6240\u4ee5\u5149\u662f\u4e00\u4e2a\u524d\u7f00\u548c\u8fd8\u6ca1\u5565\u7528\uff0c\u590d\u6742\u5ea6 $O(N^3)$\uff0c\u663e\u7136\u8d85\u65f6\u3002\uff08\u6839\u636e\u6570\u636e\u8303\u56f4\u53ef\u4ee5\u53d1\u73b0\uff0c\u5c31\u7b97\u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\u540e $O(1)$ \u67e5\u8be2\uff0c\u4e5f\u4f1a\u8d85\u65f6\uff09\n\n\u56e0\u4e3a\u6839\u636e\u6570\u636e\u548c\u65f6\u9650\uff0c\u80fd\u63a5\u53d7\u7684\u6700\u5927\u590d\u6742\u5ea6\u5728 $O(n\\log n)$ \u5de6\u53f3\uff0c\u770b\u89c1\u5e26 log\uff0c\u5c31\u80fd\u7acb\u523b\u60f3\u5230\u4e00\u79cd\u505a\u6cd5\uff1a\u4e8c\u5206\u7b54\u6848\uff01\n\n\u8fd9\u4e2a\u6570\u5217\u662f\u53ef\u4ee5\u4e8c\u5206\u7684\uff0c\u56e0\u4e3a\u5728\u524d $n$ \u4e2a\u6570\u53ef\u4ee5\uff0c\u90a3\u66f4\u5c11\u7684\u6570\u4e5f\u7167\u6837\u80fd\u53ef\u4ee5\u3002\u4f46\u4e00\u6b21\u4e8c\u5206\u53ef\u8fdc\u8fdc\u4e0d\u884c\uff0c\u9700\u8981\u5c06\u5de6\u7aef\u70b9\u4ece 1 \u5230 n \u679a\u4e3e\uff0c\u518d\u4e8c\u5206\u53f3\u7aef\u70b9\u5c31\u53ef\u4ee5\u4e86\u3002\u82e5\u662f\u5c06\u4e8c\u5206\u7b54\u6848\u7684 check \u964d\u5230 $O(1)$\uff0c\u590d\u6742\u5ea6\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u90a3\u5982\u4f55 $O(1)$ check\uff1f\n\n\u96be\u7684\u4e0d\u662f\u5728 $[l,r]$ \u533a\u95f4\u6c42\u548c\uff0c\u533a\u95f4\u6c42\u548c\u4e00\u4e2a\u57fa\u672c\u7684\u524d\u7f00\u548c\u5c31\u80fd\u5b9e\u73b0\u3002\u800c\u662f\u5982\u4f55\u5224\u5b9a\u6bcf\u4e00\u4e2a\u524d\u7f00\u90fd\u5927\u4e8e\u7b49\u4e8e $0$\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53\u8fd9\u4e2a\u533a\u95f4\u548c\u7684\u503c\u52a0\u4e0a\u8fd9\u4e2a\u533a\u95f4\u7684\u6700\u5c0f\u503c\u4e5f\u5927\u4e8e\u7b49\u4e8e $0$ \u65f6\uff0c\u90a3\u5c31\u80af\u5b9a\u5927\u4e8e\u7b49\u4e8e $0$\u3002\u5426\u5219\u5c31\u5b58\u5728\u524d\u7f00\u4f7f\u5f97 \n$[l,x]\\lt s$ $(x\u2208[l,r])$\u3002\n\n\u90a3\u5982\u4f55 $O(1)$ \u6c42\u9759\u6001\u533a\u95f4\u6700\u5c0f\u503c\uff1f\n\n\u5f53\u7136\u662fST\u8868\u554a\uff01\u590d\u6742\u5ea6 $O(n\\log n)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u6240\u4ee5\uff0c\u53ea\u8981\u9700\u524d\u7f00\u548c + ST\u8868 + \u4e8c\u5206\u7b54\u6848\u5373\u53ef\u89e3\u51b3\u6b64\u9898\uff01\n\n### \u63a5\u4e0b\u6765\u4e0a\u7279\u522b\u597d\u7406\u89e3\u7684\u4ee3\u7801:\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint st[200005][105];//ST\u8868 \nint a[200005];//\u628a\u6570\u7ec4\u672c\u8eab\u5f53\u524d\u7f00\u548c\u6570\u7ec4\u7528 \nint ansleft, ansright;\nint answer;\nint stmin(int left, int right){//\u5229\u7528ST\u8868\u6c42\u4efb\u610f\u533a\u95f4\u7684\u6700\u5c0f\u503c \n\tint X = log(right - left + 1) / log(2);\n\treturn min(st[left][X], st[right - (1 << X) + 1][X]);\n}\nbool check(int left, int right, int s){//\u4e8c\u5206\u7b54\u6848\u7684check\u51fd\u6570 \n    return stmin(left, right) + s - a[left - 1] >= 0; //[left,right]min + s - [1,left)sum>=0\n\t//\u5373\uff1aleft\u5230right\u533a\u95f4\u7684\u6700\u5c0f\u503c\u52a0\u4e0as\u518d\u51cf\u53bb\u524dleft-1\u4e2a\u6570\u7684\u548c\u5927\u4e8e\u7b49\u4e8e0 \n}\nsigned main(){\n    ios::sync_with_stdio(false);\n\tint t;\n\tcin >> t;\n\twhile(t--){\n\t\tanswer = ansleft = ansright = 0;\n\t\tint n, s;\n\t\tcin >> n >> s;\n\t\tfor(int i = 1; i <= n; i++){\n\t\t\tcin >> a[i];\n\t\t\ta[i] += a[i - 1];//\u8f6c\u4e3a\u524di\u4e2a\u6570\u7684\u548c\uff0c\u524d\u7f00\u548c \n\t\t}\n\t\tfor(int i = 1; i <= n; i++) st[i][0] = a[i];\n\n\t\tfor(int j = 1; j <= (int)(log(n) / log(2)); j++){\n\t\t\tfor(int i = 1; i <= n - (1 << j) + 1; i++){\n\t\t\t\tst[i][j] = min(st[i][j - 1], st[i + (1 << (j - 1))][j - 1]);//\u8fd9\u91cc\u662fmin\uff0c\u6700\u5c0f\u503c \n\t\t\t}\n\t\t}//ST\u8868\u6c42\u9759\u6001\u533a\u95f4\u6700\u5c0f\u503c \n\t\tfor(int L = 1; L <= n; L++){//\u4e8c\u5206\u7b54\u6848 \n\t\t\tint num = 0;\n\t\t\tint left = L;//\u679a\u4e3e\u5de6\u7aef\u70b9 \n\t\t\tint right = n;//\u5148\u9ed8\u8ba4\u53f3\u7aef\u70b9\u4e3an \n\t\t\twhile(left <= right){\n\t\t\t\tint mid = (left + right) / 2;//\u4e2d\u95f4\u503c \n\t\t\t\tif(check(L, mid, s)){//\u5224\u65ad\u533a\u95f4 \n\t\t\t\t\tnum = mid;//\u8bb0\u5f55 \n\t\t\t\t\tleft = mid + 1;//\u7f29\u5c0f\u533a\u95f4 \n\t\t\t\t}\n\t\t\t\telse right = mid - 1;//\u7f29\u5c0f\u533a\u95f4 \n\t\t\t}\n\t\t\tif(num - L + 1 > answer){//\u5f53\u524d\u7b54\u6848\u6700\u4f18 \n\t\t\t\tanswer = num - L + 1;//\u8bb0\u5f55\u7b54\u6848 \n\t\t\t\tansleft = L;//\u8bb0\u5f55\u5de6\u7aef\u70b9 \n\t\t\t\tansright = num;//\u8bb0\u5f55\u53f3\u7aef\u70b9 \n\t\t\t}\n\t\t}\n\t\tif(answer != 0) cout << ansleft << ' ' << ansright << endl;//\u6709\u89e3\u8f93\u51fa \n\t\telse cout << -1 << endl;//\u65e0\u89e3-1 \n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1639741515,
        "uid": 402269,
        "name": "szkzyc",
        "ccfLevel": 5,
        "title": "CF1611F[ATM and Students]\u9898\u89e3"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1611F)\n\n\u7b2c\u4e00\u7bc7 $O(n)$ \u9898\u89e3\uff1f\n\n### \u601d\u8def\n\n\u6211\u4eec\u4f7f\u7528 two pointers \u6765\u505a\u8fd9\u9053\u9898\u3002\n\n\u6bcf\u6b21\u5de6\u6307\u9488\u5411\u53f3\u79fb\u52a8\u4e00\u683c\uff0c\u53f3\u6307\u9488\u5c3d\u91cf\u5411\u53f3\u79fb\u52a8\uff0c\u7528 $sum$ \u8bb0\u5f55\u5de6\u53f3\u6307\u9488\u4e4b\u95f4\u6240\u6709\u6570\u7684\u548c\uff0c\u5982\u679c $s+sum<0$ \u5c31\u505c\u6b62\u79fb\u52a8\u53f3\u6307\u9488\uff0c\u5e76\u4e14\u7528 $r-l+1$ \u6765\u66f4\u65b0\u7b54\u6848\u3002\n\n\u590d\u6742\u5ea6\u4e3a $O(n)$ \u3002\n\n### Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define forr(i, a, n) for (int i = a; i <= n; i++)\n#define rep(i, n) forr(i, 0, n - 1)\n#define repp(i, n) forr(i, 1, n)\n#define pb push_back\n#define mp make_pair\n#define init(a, i) memset(a, i, sizeof(a))\n#define fi first\n#define se second\n#define mod 1000000007\n#define MOD 998244353\n#define MAXN 0x3f3f3f3f\nint T, case_;\nint n, a[200005], r, ans, ansl, ansr;\nll s, sum;\nvoid solve()\n{\n    cin >> n >> s;\n    rep(i, n) cin >> a[i];\n    r = -1;\n    sum = 0;\n    ans = -1;\n    rep(i, n)\n    {\n        if (r < i)\n            r = i, sum = a[i];\n        while (r < n && s + sum >= 0)\n        {\n            if (r - i + 1 > ans)\n                ans = r - i + 1, ansl = i, ansr = r;\n            r++, sum += a[r];\n        }\n        if (r < n)\n            sum -= a[r], r--;\n        else\n            break;\n        sum -= a[i];\n    }\n    if (ans == -1)\n        cout << ans << endl;\n    else\n        cout << ansl + 1 << ' ' << ansr + 1 << endl;\n}\nint main()\n{\n    T = 1;\n    cin >> T;\n    for (case_ = 1; case_ <= T; case_++)\n        solve();\n    return 0;\n}//by JFHT\n```\n",
        "postTime": 1638167850,
        "uid": 407564,
        "name": "Rushroom",
        "ccfLevel": 7,
        "title": "CF1611F ATM and Students"
    },
    {
        "content": "### UPD\n\n\u53d1\u73b0\u8fd9\u9053\u9898\u5c3a\u53d6\u6cd5\u80fd $O(n)$ \u505a\uff0c\u662f\u6211\u592a\u84bb\u4e86 qwq\u3002\n\n### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u5e8f\u5217 $\\{a\\}$ \u548c\u4e00\u4e2a\u6574\u6570 $s$\uff0c\u6c42\u4e00\u4e2a\u6700\u957f\u7684\u5b50\u4e32 $\\{b\\}$ \u4f7f\u5f97 $\\{b\\}$ \u7684\u4efb\u4f55\u524d\u7f00\u548c\u5747 $\\geqslant -s$\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u7531\u4e8e\u662f\u5173\u4e8e\u524d\u7f00\u548c\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6c42\u51fa $\\{a\\}$ \u7684\u524d\u7f00\u548c $\\{c\\}$\u3002\n\n\u679a\u4e3e\u5b50\u4e32\u7684\u5de6\u7aef\u70b9 $x$\uff0c\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55 $O(\\log n)$ \u627e\u5230\u6700\u9760\u53f3\u7684\u53f3\u7aef\u70b9 $y$ \u4f7f\u5f97\uff1a\n$$\\forall z \\ | \\ x\\leqslant z\\leqslant y,c_z\\geqslant c_{x-1}-s$$\n\n\u6211\u4eec\u60f3\u5230\u500d\u589e\u5f80\u53f3\uff0c\u53ef\u7528 ST \u8868\u7ef4\u62a4\u533a\u95f4 $\\{c\\}$ \u7684\u6700\u5c0f\u503c\u3002\n\n\u6700\u540e\u7684\u6700\u540e\u518d\u53d6\u957f\u5ea6 $\\max$ \u8f93\u51fa\u5373\u53ef\u3002\n\n### Code\n\n**\u6ce8\uff1a\u4ee3\u7801\u53d8\u91cf\u540d\u4e0e\u4e0a\u6587\u63a8\u5bfc\u53d8\u91cf\u540d\u4e0d\u540c\uff0c\u8bf7\u4ed4\u7ec6\u8fa8\u522b\u3002**\n\n```cpp\n#define For(i,j,k) for(register int i=j;i<=k;i++)\n#define Rof(i,j,k) for(register int i=j;i>=k;i--)\n#define fir first\n#define sec second\n#define mkp make_pair\n#define pii pair<int,int>\n#define N 200010\n#define C 20\n#define int long long\nint n,m,a[N];\npii ans;\nint b[N][C+1];//ST \u8868\nbool flag;\nint check(int x){//\u6c42\u957f\u5ea6\u6700\u5927\u503c\n\tint pos=x,tar=b[x-1][0]-m;\n\tRof(i,C,0){\n\t\tif(pos-1+(1<<i)<=n && b[pos][i]>=tar){\n\t\t\tpos+=(1<<i);\n\t\t}\n\t}\n\treturn pos-x;\n}\nvoid work(){\n\tcin>>n>>m;\n\tans=mkp(0,0);\n\tFor(i,1,n) cin>>a[i];\n\tflag=1;\n\tFor(i,1,n)\n\t\tif(a[i]>=-m)\n\t\t\tflag=0;\n\tif(flag){//\u65e0\u4eba\u751f\u8fd8\n\t\tcout<<-1<<endl;\n\t\treturn ;\n\t}\n\tFor(i,1,n) b[i][0]=b[i-1][0]+a[i];//\u524d\u7f00\u548c\n\tFor(j,1,C){\n\t\tFor(i,1,n){\n\t\t\tif(i+(1<<j)>n+1) break;\n\t\t\tb[i][j]=min(b[i][j-1],b[i+(1<<(j-1))][j-1]);\n\t\t}\n\t}\n\tFor(i,1,n)//\u679a\u4e3e\u5de6\u7aef\u70b9\n\t\tckmx(ans,mkp(check(i),i));\n\tcout<<ans.sec<<\" \"<<ans.sec+ans.fir-1<<endl;\n}\n```",
        "postTime": 1638071813,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1611F ATM and Students \u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u53cc\u6307\u9488\u3002\n\n\u4ece\u5c0f\u5230\u5927\u679a\u4e3e $l$\uff0c\u5bf9\u4e8e\u6bcf\u4e2a $l$ \u8ba1\u7b97\u51fa\u6700\u4f18\u7684 $r$\u3002\u8fd9\u4e2a\u5f88\u5bb9\u6613\u60f3\u5230 $O(\\log n)$ \u7684\u4e8c\u5206\uff0c\u4f46\u662f\u5b58\u5728\u7ebf\u6027\u505a\u6cd5\u3002\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u6807 $r$\uff0c\u5f53 $\\sum\\limits_{i=l}^{r+1}a_i \\geq -s$ \u5c31\u79fb\u52a8 $r$\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u6700\u4f18\u7684 $r$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n/*\n\np_b_p_b txdy\nAThousandMoon txdy\nAThousandSuns txdy\nhxy txdy\n\n*/\n\n#include <bits/stdc++.h>\n#define pb push_back\n#define fst first\n#define scd second\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll, ll> pii;\n\nconst int maxn = 200100;\n\nll n, m, a[maxn];\n\nvoid solve() {\n\tscanf(\"%lld%lld\", &n, &m);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf(\"%lld\", &a[i]);\n\t}\n\tint l = 0, r = -1;\n\tll sum = 0;\n\tfor (int i = 1, j = 0; i <= n; ++i) {\n\t\tsum -= a[i - 1];\n\t\tif (j < i - 1) {\n\t\t\tj = i - 1;\n\t\t\tsum = 0;\n\t\t}\n\t\twhile (j < n && sum + a[j + 1] >= -m) {\n\t\t\tsum += a[++j];\n\t\t}\n\t\tif (j - i > r - l) {\n\t\t\tr = j;\n\t\t\tl = i;\n\t\t}\n\t}\n\tif (r == -1) {\n\t\tputs(\"-1\");\n\t} else {\n\t\tprintf(\"%d %d\\n\", l, r);\n\t}\n}\n\nint main() {\n\tint T = 1;\n\tscanf(\"%d\", &T);\n\twhile (T--) {\n\t\tsolve();\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1639840123,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "CF1611F \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\n[\u9898\u9762\u7ffb\u8bd1](https://www.luogu.com.cn/paste/wrrwu53t)\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$ \u548c\u4e00\u4e2a\u6574\u6570 $s$\uff0c\u6c42\u4e00\u6bb5\u6700\u957f\u7684\u533a\u95f4 $[l,r]$ \u4f7f\u5f97 $\\forall i \\in [l,r] , s + \\sum\\limits_{j = l}^i a_j \\geq 0$\u3002\n\n## \u601d\u8def\n\n\u5bf9\u4e8e\u8fd9\u79cd\u201c\u6c42\u6700\u957f\u7684\u7b26\u5408\u8981\u6c42\u7684\u533a\u95f4\u7684\u95ee\u9898\u201d\uff0c\u7531\u4e8e\u5b83\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u201c\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u4e8c\u5206\u53f3\u7aef\u70b9\u201d\u7684\u5e38\u7528\u5957\u8def\u6c42\u89e3\u3002\n\n\u6211\u4eec\u5148\u6c42\u51fa $a$ \u6570\u7ec4\u7684\u524d\u7f00\u548c $sum$\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u6c42\u4e00\u6bb5\u6700\u957f\u7684\u533a\u95f4 $[l,r]$ \u4f7f\u5f97 $s + \\min_{j = l}^r sum_j - sum_{i - 1} \\geq 0$\u3002\u4e2d\u95f4\u6c42\u533a\u95f4\u6700\u5c0f\u503c\u7684\u90e8\u5206\u53ef\u4ee5\u7528 ST \u8868\u9884\u5904\u7406\u51fa\u6765\uff0c\u7136\u540e $O(1)$ \u67e5\u8be2\uff1b\u800c\u8fd9\u4e2a\u5f0f\u5b50\u672c\u8eab\u5219\u53ef\u4ee5\u7528\u4e8c\u5206\u7b54\u6848\u6c42\u89e3\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n \\ \\log\\ n)$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n\nconst int MAXN = 200000 + 5;\nconst int MAXB = 21;\n\nlong long st[MAXN][MAXB], lg[MAXN];\nlong long a[MAXN];\nint n, s;\n\nvoid init() {\n    for(int i = 1; i <= n; i++) {\n\t\tst[i][0] = a[i];\n\t\tif(i >= 2) {\n\t\t\tlg[i] = lg[i / 2] + 1;\n\t\t}\n\t}\n\tfor(int j = 1; j < MAXB; j++) {\n\t\tfor(int i = 1; i + (1 << j) - 1 <= n; i++) {\n\t\t\tst[i][j] = min(st[i][j - 1], st[i + (1 << (j - 1))][j - 1]);\n\t\t}\n\t}\n}\n\nlong long ask(int l, int r) {\n\tint t = lg[r - l + 1];\n\treturn min(st[l][t], st[r - (1 << t) + 1][t]);\n}\n\nint main() {\n    int T;\n\n    scanf(\"%d\", &T);\n    while(T--) {\n        scanf(\"%d%d\", &n, &s);\n        for(int i = 1; i <= n; i++) {\n            scanf(\"%lld\", &a[i]);\n            a[i] += a[i - 1];\n        }\n        init();\n        int ansl, ansr, ans = 0;\n        for(int i = 1; i <= n; i++) {\n            int l = i, r = n, res = 0;\n            while(l <= r) {\n                int mid = (l + r) / 2;\n\n                if(s + ask(i, mid) >= a[i - 1]) {\n                    res = mid;\n                    l = mid + 1;\n                } else {\n                    r = mid - 1;\n                }\n            }\n            if(res == 0) {\n                continue;\n            }\n            if(res - i + 1 > ans) {\n                ans = res - i + 1;\n                ansl = i;\n                ansr = res;\n            }\n        }\n        if(ans == 0) {\n            printf(\"%d\\n\", -1);\n        } else {\n            printf(\"%d %d\\n\", ansl, ansr);\n        }\n    }\n\n    return 0;\n}\n\n```",
        "postTime": 1638200331,
        "uid": 132435,
        "name": "\u667a\u5b50",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1611F ATM and Students"
    },
    {
        "content": "[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/kevin07/p/15609743.html)\n\n## \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a $n(n\\leq 2\n\\times 10^5)$ \u7684\u5e8f\u5217 $a$ \u548c\u4e00\u4e2a\u6574\u6570 $s$\uff0c\u6c42\u4e00\u6bb5\u6700\u957f\u7684\u8fde\u7eed\u5b50\u5e8f\u5217 $[l,r]$ \u4f7f\u5f97 $\\forall i\\in[l,r],x+\\sum\\limits_{j=l}^i a_j\\geq 0$\u3002\n\n## \u5206\u6790\n\n\u6211\u4eec\u9996\u5148\u770b\u5230\u9898\u76ee\u7ed9\u5b9a\u7684\u8fd9\u4e00\u4e2a\u9650\u5236\u6761\u4ef6\uff0c\u53ef\u4ee5\u7528***\u524d\u7f00\u548c***\u6765\u8fdb\u884c\u4e00\u6b21\u8f6c\u5316 $\\forall i\\in[l,r],x+qzh_i-qzh_{l-1}\\geq 0$\uff0c\u518d\u6b21\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\u53ea\u8981 $[l,r]$ \u4e2d\u6700\u5c0f\u7684 $qzh_i$ \u6ee1\u8db3\u8fd9\u4e00\u4e2a\u6761\u4ef6\uff0c\u6574\u4e2a\u533a\u95f4\u5c31\u53ef\u4ee5\u6ee1\u8db3\u4e86\uff0c\u6c42\u533a\u95f4\u6700\u5c0f\u53ef\u4ee5\u7528ST\u8868\u6765\u505a\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\u67e5\u8be2 $O(1)$\uff0c\u9884\u5904\u7406 $O(n\\log n)$\n\n\u7136\u540e\u8003\u8651\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u5728\u5e94\u7528\u4e8c\u5206\u7684\u65b9\u6cd5\u6765\u5bfb\u627e\u53f3\u7aef\u70b9\uff0c\u5224\u65ad\u7528ST\u8868\u4f18\u5316\u5230 $O(1)$\uff0c\u6bcf\u4e00\u7ec4\u6570\u636e\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\n\n\u4ee3\u7801\u5b9e\u73b0\u5c31\u4e0d\u662f\u5f88\u590d\u6742\u4e86\uff08\u8bb0\u5f97\u5f00`long long`\uff09\n\n```c++\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=2e5+10;\nint T,n,s;\nint qzh[N],a[N];\nint f[N][32];\nint lg[N];\nvoid Pre(){\n    // int xx=loog(n);\n    lg[1]=0;\n    for(int i=2;i<=n;i++)lg[i]=lg[i/2]+1;\n    for(int j=1;j<=lg[n];j++) {\n        for(int i=1;i+(1<<j)-1<=n;i++)\n            f[i][j]=min(f[i][j-1],f[i+(1<<j-1)][j-1]);\n    }\n}\n\nint Query(int l,int r){\n    int delta=lg[r-l+1];\n    return min(f[l][delta],f[r-(1<<delta)+1][delta]);\n}\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin>>T;\n    while(T--){\n        cin>>n>>s;\n        for(int i=1;i<=n;i++){\n            cin>>a[i];\n            qzh[i]=qzh[i-1]+a[i];\n            for(int j=1;j<=30;j++) f[i][j]=0x3f3f3f3f;\n            f[i][0]=qzh[i];\n        }\n        Pre();\n        int ans=-1,ansv=0,ansl=0,ansr=0;\n        for(int l=1;l<=n;l++){\n            int rl=l,rr=n,fl=0;\n            while(rl<=rr){\n                int mid=rl+rr>>1;\n                if(s+Query(l,mid)-qzh[l-1]<0) rr=mid-1;\n                else rl=mid+1,fl=mid;\n                // cout<<rl<<' '<<rr<<endl;\n            }\n            // if(fl==0) continue;\n            if(fl-l+1>ansv){\n                ansl=l;ansr=fl;\n                ansv=fl-l+1;\n            }\n        }\n        if(ansv) cout<<ansl<<' '<<ansr<<endl;\n        else cout<<-1<<endl;\n    }\n    return 0;\n}\n```",
        "postTime": 1637983839,
        "uid": 112275,
        "name": "Gloaming",
        "ccfLevel": 0,
        "title": "CF1611F \u9898\u89e3"
    }
]
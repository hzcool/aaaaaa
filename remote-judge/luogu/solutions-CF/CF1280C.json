[
    {
        "content": "[\u672c\u573a\u6bd4\u8d5b\u5b8c\u6574\u9898\u89e3](https://www.luogu.com.cn/blog/c2522943959/cf1281round-607-div-2-ti-xie)\n### E - Jeremy Bearimy\n\u9898\u610f:\u7ed9\u4e00\u68f5\u6709\u8fb9\u6743\u6811,\u6811\u4e0a\u6709$2k$\u4e2a\u70b9.  \n\u5b9a\u4e49$G=$\u4efb\u610f\u9009k\u7ec4\u65e0\u91cd\u590d\u7684\u70b9(\u6bcf\u7ec4\u70b9\u4e24\u4e2a\u70b9),\u6bcf\u7ec4\u70b9\u7684\u8ddd\u79bb\u548c\u7684**\u6700\u5c0f\u503c**,$B=$\u4efb\u610f\u9009k\u7ec4\u65e0\u91cd\u590d\u7684\u70b9(\u6bcf\u7ec4\u70b9\u4e24\u4e2a\u70b9),\u6bcf\u7ec4\u70b9\u7684\u8ddd\u79bb\u548c\u7684**\u6700\u5927\u503c**.\u6c42$G,B$  \n$k\\le 10^5$\n\n\u8003\u8651\u8d2a\u5fc3.\u9996\u5148$G,B$\u5206\u5f00\u6c42\u6ca1\u6709\u4efb\u4f55\u95ee\u9898.\n\n\u6c42$G$:\u4e3e\u4e2a\u4f8b\u5b50:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b1jxronm.png)\n\n\u56fe\u793a\u662f\u6700\u4f18\u7684\u65b9\u6848(\u4e4b\u4e00).  \n\u6211\u4eec\u5f97\u5230\u7ed3\u8bba:\u8981\u5c3d\u53ef\u80fd\u7684\u8ba9\u6ca1\u6709\u7684\u4f7f\u7528\u8fc7\u7684\u513f\u5b50\u4eec\u4e92\u76f8\u5339\u914d,\u6709\u5269\u4f59\u7684\u548c\u5f53\u524d\u70b9\u5339\u914d,\u6ca1\u6709\u5269\u4f59\u5c31\u628a\u5f53\u524d\u70b9\u7559\u7ed9\u4ee5\u540e\u7684\u70b9,\u56e0\u4e3a\u70b9\u6709$2k$\u4e2a\u6240\u4ee5\u6700\u540e\u6070\u597d\u5339\u914d\u5b8c.  \n\u8bc1\u660e:\u53cd\u8bc1\u6cd5.\u5047\u8bbe\u6211\u4eec\u660e\u660e\u80fd\u5339\u914d\u5374\u8981\u7559\u7ed9\u4e0a\u9762,\u6bd4\u5982\u5728\u4e0a\u9762\u7684\u56fe\u4e2d,\u628a2,6\u90fd\u7559\u7ed9\u4e0a\u9762,\u90a3\u4e48\u6211\u4eec\u5f97\u5230:\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwzhrbqv.png)\n\n\u4e24\u79cd\u9009\u6cd5\u7684\u552f\u4e00\u533a\u522b\u662f,\u4e0b\u9762\u7684\u9009\u6cd5\u4e2d,\u8fb9(2,5)\u88ab\u9009\u62e9\u4e86\u4e24\u6b21,\u800c\u4e0a\u9762\u7684\u9009\u6cd5\u6ca1\u6709\u7528\u5230(2,5)\u6240\u4ee5\u66f4\u4f18\n\u4ee3\u7801:\n```cpp\nll n,ans,size[MAXN];//size[u]\u8868\u793au\u7684\u5b50\u6811\u5927\u5c0f\nvoid dfs1(ll u,ll fa=0)\n{\n\tsize[u]=1;\n\tfor(ll i=last[u];i;i=e[i].nxt)\n\t{\n\t\tll v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs1(v,u);\n\t\tsize[u]+=size[v];\n\t\tif(size[v]&1)ans+=e[i].w;//size[v]&1\u90a3\u4e48v\u5c31\u4f1a\u88ab\u5269\u4e0b,\u8fd9\u4e00\u6b21\u5c31\u8981\u9009\u4e0a\n\t}\n}\n```\n\u63a5\u4e0b\u6765\u6c42$B$.\u4e0e$G$\u4e0d\u540c,\u6211\u4eec\u8981\u6c42\u6700\u5927\u503c,\u90a3\u4e48\u5c31\u8ba9\u6bcf\u4e00\u6761\u8fb9\u90fd\u7ecf\u8fc7\u5c3d\u53ef\u80fd\u591a\u6b21.\n\u800c\u5bf9\u4e8e$(fa[u],u)$,\u4e0b\u9762\u6709$size[u]$\u4e2a\u70b9,\u4e0a\u9762\u6709$n-size[u]$\u4e2a\u70b9,\u8fd9\u6761\u8fb9\u5c31\u6700\u591a\u88ab\u7ecf\u8fc7$min(size[u],n-size[u])$\u6b21(\u7406\u89e3\u4e5f\u53ef\u4ee5\u770b\u4e0a\u9762\u90a3\u4e2a\u56fe,\u6211\u5c31\u4e0d\u5c55\u5f00\u8bb2\u4e86)\n```cpp\nvoid dfs2(ll u,ll fa=0)\n{\n\tfor(ll i=last[u];i;i=e[i].nxt)\n\t{\n\t\tll v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs2(v,u);\n\t\tans+=min(size[v],n-size[v])*e[i].w;//\u8fd9\u6761\u8fb9\u7684\u8d21\u732e\n\t}\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6\u663e\u7136$O(k)$  \n\u6700\u540e\u5b8c\u6574\u4ee3\u7801\u5949\u4e0a(\u5176\u5b9e\u4e5f\u4e0d\u5b8c\u6574,\u7701\u7565\u4e86\u5feb\u8bfb\u4e4b\u7c7b)\n```cpp\n/**********/\n#define MAXN 200011\nstruct Edge\n{\n\tll v,w,nxt;\n}e[MAXN<<1|1];\nll cnt=0,last[MAXN];\nvoid adde(ll u,ll v,ll w)\n{\n\t++cnt;\n\te[cnt].v=v,e[cnt].w=w;\n\te[cnt].nxt=last[u],last[u]=cnt;\n}\n \nll n,ans,size[MAXN];\nvoid dfs1(ll u,ll fa=0)\n{\n\tsize[u]=1;\n\tfor(ll i=last[u];i;i=e[i].nxt)\n\t{\n\t\tll v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs1(v,u);\n\t\tsize[u]+=size[v];\n\t\tif(size[v]&1)ans+=e[i].w;\n\t}\n}\nvoid dfs2(ll u,ll fa=0)\n{\n\tfor(ll i=last[u];i;i=e[i].nxt)\n\t{\n\t\tll v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs2(v,u);\n\t\tans+=min(size[v],n-size[v])*e[i].w;\n\t}\n}\nint main()\n{\n\tll task=read();\n\twhile(task--)\n\t{\n\t\tn=read()<<1;//\u67092k\u4e2a\u70b9\n\t\tfor(ll i=1;i<n;++i)\n\t\t{\n\t\t\tll u=read(),v=read(),w=read();\n\t\t\tadde(u,v,w),adde(v,u,w);\n\t\t}\n\t\tans=0;\n\t\tdfs1(1);\n\t\tprintf(\"%lld \",ans);\n\t\tans=0;//\u6ce8\u610fans\u8981\u6e05\u96f6\n\t\tdfs2(1);\n\t\tprintf(\"%lld\\n\",ans);\n\t\tfor(ll i=1;i<=n;++i)last[i]=0,size[i]=0;//\u591a\u6d4b\u4e0d\u6e05\u7a7a..\u54b3\u54b3\n\t\tcnt=0;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1576475939,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1280C \u3010Jeremy Bearimy\u3011"
    },
    {
        "content": "### [\u5728\u535a\u5ba2\u98df\u7528\u4f53\u9a8c\u66f4\u4f73](https://www.luogu.com.cn/blog/224229/solution-cf1280c)\n### [\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1280C)\n\n------------\n\u9898\u76ee\u662f\u6c42\u5728\u4e00\u68f5\u6811\u4e0a\uff0c\u9009\u53d6\u7684\u6bcf\u4e00\u5bf9\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u7684\u548c\u7684**\u6700\u5927\u503c**\u548c**\u6700\u5c0f\u503c**\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u5206\u5f00\u8ba8\u8bba\n\n#### \u6700\u5c0f\u503c\n\u5bf9\u4e8e\u6700\u5c0f\u503c\uff0c\u5373\u6bcf\u6761\u8fb9\u7684\u4f7f\u7528\u6b21\u6570\u6700\u5c0f\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4ee5$u$\u4e3a\u6839\u8282\u70b9\u7684\u4e00\u68f5\u6811,\u8bbe$v$\u662f\u4e0e\u5b83\u76f8\u8fde\u7684\u5b50\u6811\u7684\u6839\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230\uff1a **\u5f53\u5b50\u6811\u7684size\u4e3a\u5076\u6570\u65f6\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u8ba9\u5b50\u6811\u81ea\u5df1\u5185\u90e8\u6d88\u5316\uff0c\u800c\u5f53\u5b50\u6811\u7684size\u4e3a\u5947\u6570\u65f6\uff0c\u5219\u8fb9$(u,v)$,\u4e00\u5b9a\u4f1a\u88ab\u7ecf\u8fc7**,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5bf9\u4e8e\u6700\u5c0f\u503c\u7684\u8ba1\u7b97\u65b9\u6cd5\n\n\u4ee3\u7801:\n~~~cpp\nvoid dfs_min(int u,int fa)\n{\n\tsi[u]=1;\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs_min(v,u);\n\t\tsi[u]+=si[v];\n\t\tif(si[v]&1)\n\t\t\tans+=e[i].w;\n\t}\n}\n~~~\n#### \u6700\u5927\u503c\n\u5bf9\u4e8e\u6700\u5927\u503c\uff0c\u6211\u4eec\u4e0d\u80fd\u5355\u7eaf\u7684\u53d6\u53cd\u540e\u518d\u6309\u6700\u5c0f\u503c\u7684\u65b9\u6cd5\u505a\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u6761\u8fb9\u4e3a\u5355\u4f4d\uff0c\u8ba9\u8fd9\u4e00\u6761\u8fb9\u5c3d\u53ef\u80fd\u591a\u7684\u88ab\u901a\u8fc7\uff0c**\u90a3\u4e48\uff0c\u5bf9\u4e8e\u8fb9$(u,v)$,\u6211\u4eec\u7684\u6700\u591a\u7ecf\u8fc7\u6b21\u6570\u5373\u4e3a$min(size[v],n-size[v])$\uff0c\u6362\u6210\u8bed\u8a00\u8bf4\u660e\u5373\u4e3a\u8fd9\u6761\u8fb9\u8fde\u63a5\u7684\u4e24\u4e2a\u5b50\u6811\u7684size\u6700\u5c0f\u503c**\n\u65e2\u7136\u77e5\u9053\u6700\u591a\u8d21\u732e\u6b21\u6570\u4e86\u4e4b\u540e\uff0c\u90a3\u4e48\u5176\u5bf9\u4e8e\u7b54\u6848\u7684\u8d21\u732e\u5c31\u4e3a$min(size[v],n-size[v]) *  e[i].val$\n\n\u4ee3\u7801:\n~~~cpp\nvoid dfs_max(int u,int fa)\n{\n\tsi[u]=1;\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs_max(v,u);\n\t\tsi[u]+=si[v];\n\t\tans+=(ll)min(si[v],n-si[v])*e[i].w;\n\t}\n}\n~~~\n>> **_Talk is cheap, show you the code_**\n\n~~~cpp\n#include<touwenjian.h>//MMM\u7684\u5934\u6587\u4ef6\uff0c\u6084\u6084\u5077\u8fc7\u6765\u7528\n#define ll long long\n#define maxn 200005\nusing namespace std;\nint T,n,k,head[maxn],si[maxn];\nstruct eage\n{\n\tint v,w,last;\n}e[maxn<<1];\nll ans;\n\nint read()\n{\n\tint num,sign=1;\n\tchar c;\n\twhile((c=getchar())<'0'||c>'9')\n\t\tif(c=='-')sign=-1;\n\tnum=c-'0';\n\twhile((c=getchar())>='0'&&c<='9')\n\t\tnum=(num<<1)+(num<<3)+c-'0';\n\treturn num*sign;\n}\n\ninline void addeage(int u,int v,int w)\n{\n\te[++k].last=head[u];\n\te[k].v=v;\n\te[k].w=w;\n\thead[u]=k;\n}\n\nvoid dfs_min(int u,int fa)\n{\n\tsi[u]=1;\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs_min(v,u);\n\t\tsi[u]+=si[v];\n\t\tif(si[v]&1)\n\t\t\tans+=e[i].w;\n\t}\n}\n\nvoid dfs_max(int u,int fa)\n{\n\tsi[u]=1;\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==fa)continue;\n\t\tdfs_max(v,u);\n\t\tsi[u]+=si[v];\n\t\tans+=(ll)min(si[v],n-si[v])*e[i].w;\n\t}\n}\n\nint main()\n{\n\tT=read();\n\twhile(T--)\n\t{\n\t\tn=read()<<1;\n\t\tk=0;\n\t\tfor(register int i=1;i<=n;++i)head[i]=0;\n\t\tfor(register int u,v,w,i=1;i<n;++i)\n\t\t{\n\t\t\tu=read(),v=read(),w=read();\n\t\t\taddeage(u,v,w);\n\t\t\taddeage(v,u,w);\n\t\t}\n\t\tans=0;\n\t\tdfs_min(1,0);\n\t\tprintf(\"%lld \",ans);\n\t\tans=0;\n\t\tdfs_max(1,0);\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n~~~",
        "postTime": 1591402355,
        "uid": 224229,
        "name": "Caicz",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1280C \u3010Jeremy Bearimy\u3011"
    }
]
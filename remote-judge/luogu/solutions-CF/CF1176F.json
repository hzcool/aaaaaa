[
    {
        "content": "\u4e00\u9053\u7b80\u5355 dp\u3002\n\n\u72b6\u6001 $dp_{i,j}$ \u4e3a\u7b2c $i$ \u8f6e\uff0c\u79bb\u4e0a\u4e00\u6b21\u66b4\u51fb\u8fc7\u4e86 $j$ \u6b21\u653b\u51fb\u7684\u6700\u5927\u503c\u3002\n\n\u7136\u540e\u76f4\u63a5\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u6ce8\u610f\u6240\u6709\u7684\u60c5\u51b5\u90fd\u8981\u8f6c\u79fb\uff0c\u5305\u62ec $3,2+1,2,1+1+1,1+1,1$ \u548c\u5565\u90fd\u4e0d\u9009\u3002\n\n\u7531\u4e8e\u6211\u6bd4\u8f83\u61d2\uff0c\u5c31\u5199\u4e86\u4e2a $k\\log k$ \u7684\u6392\u5e8f\uff0c\u4e8b\u5b9e\u4e0a\u53ef\u4ee5 $O(k)$ \u505a\uff0c\u4f46\u662f\u7ec6\u8282\u6bd4\u8f83\u591a\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(Sn+k\\log k)$\uff0c\u672c\u9898 $S=10$\u3002\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <algorithm>\n#include <queue>\n#define int long long\ninline int read()\n{\n    int num=0,f=1;char c=getchar();\n    while(c<48||c>57){if(c=='-')f=-1;c=getchar();}\n    while(c>47&&c<58)num=(num<<3)+(num<<1)+(c^48),c=getchar();\n    return num*f;\n}\ninline int min(int a,int b){return a<b?a:b;}\ninline int max(int a,int b){return a>b?a:b;}\nint dp[200005][10];\nint a[4][200005];\nsigned main()\n{\n    int T=read();\n    //while(T--)\n    //memset(dp,-0x3f,sizeof(dp));\n    for(int i=0;i<=T;i++)for(int j=0;j<=9;j++)dp[i][j]=-0x3f3f3f3f3f3f3f3fll;\n    dp[0][0]=0;\n    for(int i=1;i<=T;i++)\n    {\n        int n=read();\n            int c1=0,c2=0,c3=0;\n            for(int i=0;i<n;i++)\n            {\n                int c=read(),d=read();\n                if(c==1)a[1][c1++]=-d;\n                if(c==2)a[2][c2++]=-d;\n                if(c==3)a[3][c3++]=-d;\n            }\n            std::sort(a[1],a[1]+c1);\n            std::sort(a[2],a[2]+c2);\n            std::sort(a[3],a[3]+c3);\n            for(int ii=0;ii<=9;ii++)dp[i][ii]=dp[i-1][ii];\n            if(c3)\n            {\n                for(int j=0;j<9;j++)dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]-a[3][0]);\n                dp[i][0]=max(dp[i][0],dp[i-1][9]-2*a[3][0]);\n            }\n            if(c2&&c1)\n            {\n                for(int j=0;j<8;j++)dp[i][j+2]=max(dp[i][j+2],dp[i-1][j]-a[2][0]-a[1][0]);\n                dp[i][0]=max(dp[i-1][8]-min(a[2][0],a[1][0])-a[2][0]-a[1][0],dp[i][0]);\n                dp[i][1]=max(dp[i-1][9]-min(a[2][0],a[1][0])-a[2][0]-a[1][0],dp[i][1]);\n            }\n            if(c1>2)\n            {\n                for(int j=0;j<7;j++)\n                    dp[i][j+3]=max(dp[i][j+3],dp[i-1][j]-a[1][0]-a[1][1]-a[1][2]);\n                dp[i][0]=max(dp[i-1][7]-a[1][1]-a[1][0]-a[1][0]-a[1][2],dp[i][0]);\n                dp[i][1]=max(dp[i-1][8]-a[1][1]-a[1][0]-a[1][0]-a[1][2],dp[i][1]);\n                dp[i][2]=max(dp[i-1][9]-a[1][1]-a[1][0]-a[1][0]-a[1][2],dp[i][2]);\n            }\n            if(c1>=1)\n            {\n                for(int j=0;j<9;j++)dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]-a[1][0]);\n                dp[i][0]=max(dp[i][0],dp[i-1][9]-a[1][0]*2);\n            }\n            if(c1>=2)\n            {\n                for(int j=0;j<8;j++)dp[i][j+2]=max(dp[i][j+2],dp[i-1][j]-a[1][1]-a[1][0]);\n                dp[i][0]=max(dp[i-1][8]-a[1][1]-a[1][0]*2,dp[i][0]);\n                dp[i][1]=max(dp[i-1][9]-a[1][1]-a[1][0]*2,dp[i][1]);\n            }\n\n            if(c2>=1)\n            {\n                for(int j=0;j<9;j++)dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]-a[2][0]);\n                dp[i][0]=max(dp[i][0],dp[i-1][9]-a[2][0]*2);\n            }\n            //puts(\"\");for(int ii=0;ii<=9;ii++)printf(\"%lld \",dp[i][ii]);\n        \n    }\n    //puts(\"\");\n    int ans=0;\n    for(int i=0;i<=9;i++)ans=max(ans,dp[T][i]);\n    printf(\"%lld\\n\",ans);\n}\n```",
        "postTime": 1616899300,
        "uid": 171487,
        "name": "cmll02",
        "ccfLevel": 8,
        "title": "pigstdwin"
    },
    {
        "content": "\u6765\u4e00\u4e2a\u4e0d\u7528\u8bb0\u641c\u7684\u9898\u89e3\n\n\u9996\u5148\u53d1\u73b0\u6bcf\u4e00\u4e2aturn\u6709\u7528\u7684\u724c\u6700\u591a5\u5f20\uff083\u5f20cost=1\uff0c1\u5f20cost=2\uff0c,1\u5f20cost=3\uff09\n\n\u4ee4$dp[i][j]$\u8868\u793a\u5f53\u524d\u8981\u6253$i$\u8f6e\uff0c\u4e4b\u524d\u6700\u540e\u4e00\u6b21\u6253\u7684\u724c\u4e3a\u7b2c$j$\u5f20\uff08$\\mod 10$\uff09\u7684\u6700\u5927\u4f24\u5bb3\n\n\u5219\u6211\u4eec\u6709\n\n$$dp[i][(j+k)\\ mod\\ 10]=max\\{dp[i-1][j]+z[k][fg]) \\}$$\n\u5176\u4e2d\uff1a$i$\u8868\u793a\u5f53\u524d\u8f6e\uff0c$j$\u679a\u4e3e\u4e0a\u4e00\u8f6e\u5230$j-th$\u5f20\u724c\u4e86\uff08$\\mod 10$\uff09\uff0c$k$\u8868\u793a\u8fd9\u4e00\u8f6e\u6253\u51e0\u5f20\u724c\uff0c$z[][]$\u5b9a\u4e49\u5982\u4e0b\n\n\u4ee4$z[i][flag]$\u8868\u793a\u5f53\u524d\u8fd9\u4e00\u8f6e\u6253\u4e86$i$\u5f20\u724c\uff0c\u662f\u5426\uff08$flag==0$\u8868\u793a\u5426\uff09\u6709double\u7684\u6700\u5927\u4f24\u5bb3\n\n\u6ce8\u610f\u5230\u56e0\u4e3a$i \\le 5$\uff0c\u6240\u4ee5\u6bcf\u4e00\u8f6e\u66b4\u529b$O(5!)$\u5224\u65ad\u5373\u53ef\n\n\u4ee3\u7801\uff1a\n```cpp\n// by Balloons\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#define mpr make_pair\n#define debug() puts(\"okkkkkkkk\")\n#define rep(i,a,b) for(int (i)=(a);(i)<=(b);(i)++)\n\nusing namespace std;\n\ntypedef long long LL;\n#define int LL \n\nconst int inf = 1 << 30;\nconst int maxn=2e5+5;\n\nint n;\nint nk[maxn];\nint c1_tmp[maxn],c1[maxn][4],c2[maxn],c3[maxn];\nint dp[maxn][11],z[7][3];\n\nint cmp(int a,int b){return a>b;}\n\nsigned main(){\n//\tfreopen(\"CF-1176F.in\",\"r\",stdin);\n\tscanf(\"%I64d\",&n);\n\tint tyf;\n\tfor(int i=1;i<=n;i++){\n\t\tint ccnt=0,len=0,len2=0,len3=0;\n\t\tc2[i]=-1;c3[i]=-1;\n\t\tscanf(\"%I64d\",&nk[i]);\n\t\tfor(int j=1;j<=nk[i];j++){\n\t\t\tint cst,cx;scanf(\"%I64d%I64d\",&cst,&cx);\n\t\t\tif(cst==1)c1_tmp[++ccnt]=cx;\n\t\t\tif(cst==2)c2[i]=max(c2[i],cx),len2=1;\n\t\t\tif(cst==3)c3[i]=max(c3[i],cx),len3=1;\n\t\t}\n\t\tsort(c1_tmp+1,c1_tmp+ccnt+1,cmp);\n\t\tc1[i][1]=c1[i][2]=c1[i][3]=-1;\n\t\tif(ccnt>=1)c1[i][1]=c1_tmp[1],++len;\n\t\tif(ccnt>=2)c1[i][2]=c1_tmp[2],++len;\n\t\tif(ccnt>=3)c1[i][3]=c1_tmp[3],++len;\n\t\tif(i==1)tyf=len+len2+len3;\n\t}\n\t\n\tfor(int i=0;i<=n;i++){\n\t\tfor(int j=0;j<=9;j++){\n\t\t\tdp[i][j]=-1e18;\n\t\t}\n\t}\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tvector<pair<int,int> >vm;\n\t\tfor(int j=0;j<=3;j++)z[j][0]=z[j][1]=-1e18;\n\t\tz[0][0]=0;\n\t\tif(c1[i][3]!=-1)vm.push_back(mpr(1,c1[i][3]));\n\t\tif(c1[i][2]!=-1)vm.push_back(mpr(1,c1[i][2]));\n\t\tif(c1[i][1]!=-1)vm.push_back(mpr(1,c1[i][1]));\n\t\tif(c2[i]!=-1)vm.push_back(mpr(2,c2[i]));\n\t\tif(c3[i]!=-1)vm.push_back(mpr(3,c3[i]));\n\t\t\n\t\tdo{\n\t\t\tint cnt=0,res=0,pc1=0,mx=0,nums=0;\n\t\t\tfor(int j=0;j<vm.size();j++){\n\t\t\t\tpair<int,int>cur=vm[j];\n\t\t\t\tif(cnt+cur.first>3)break;\n\t\t\t\tcnt+=cur.first;\n\t\t\t\t++nums;\n\t\t\t\t\n\t\t\t\tres+=cur.second;mx=max(mx,cur.second); \n//\t\t\t\tprintf(\"Q %d %d\\n\",tmp,z[cnt][1]);\n\t\t\t\tz[nums][0]=max(z[nums][0],res);\n\t\t\t\tz[nums][1]=max(z[nums][1],res+mx);\n\t\t\t}\n\t\t}while(next_permutation(vm.begin(),vm.end()));\n\t\t\n\t\tfor(int j=0;j<10;j++){\n\t\t\tfor(int k=0;k<=3;k++){\n\t\t\t\tint fg=0;\n\t\t\t\tif(j+k>=10)fg=1;\n\t\t\t\tdp[i][(j+k)%10]=max(dp[i][(j+k)%10],dp[i-1][j]+z[k][fg]);\n//\t\t\t\tif(i==n && (j+k)%10==0)printf(\"FQ  %d %d %d %d\\n\",dp[i-1][j],z[k][fg],j,k);\n//\t\t\t\tprintf(\"%d %d %d;  (j,k)=(%d,%d)\\n\",i,(j+k)%10,dp[i][(j+k)%10],j,k);\n\t\t\t}\n\t\t} \n\t\tvm.clear();\n\t}\n\tint ans=0;\n\tfor(int j=0;j<=9;j++)ans=max(ans,dp[n][j]);\n//\tprintf(\"%I64d\\n\",dp[n][j]);\n\tprintf(\"%I64d\\n\",ans);\n\n\treturn 0;\n}\n\n```",
        "postTime": 1561117105,
        "uid": 84042,
        "name": "SkyRainWind",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1176F \u3010Destroy it!\u3011"
    },
    {
        "content": "\u7b97\u6cd5\uff1a\u7ebf\u6027\u52a8\u6001\u89c4\u5212\n\n## dp\u6210\u7acb\u7684\u8bc1\u660e\uff1a\n\n**\u91cd\u590d\u5b50\u95ee\u9898\uff1a**\n\n\u5bf9\u4e8e\u7b2ci\u6b21\u653b\u51fb\uff0c\u8fd8\u6709j\u8f6e\u89e6\u53d1\u66b4\u51fb\u65f6\uff0c\u5904\u7406\u65b9\u6848\u76f8\u540c\n\n**\u6700\u4f18\u5b50\u7ed3\u6784\uff1a**\n\n\u5bf9\u4e8e\u7b2ci\u6b21\u653b\u51fb\uff0c\u8fd8\u6709j\u8f6e\u89e6\u53d1\u66b4\u51fb\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e4b\u524d\u7684\u5904\u7406\u65b9\u5f0f\u5f97\u5230\u6700\u4f18\u7ed3\u6784\n\n**\u65e0\u540e\u6548\u6027\uff1a**\n\n\u5bf9\u4e8e\u7b2ci\u6b21\u653b\u51fb\uff0c\u8fd8\u6709j\u8f6e\u89e6\u53d1\u66b4\u51fb\u65f6\uff0c\u4e4b\u524d\u7684\u53d6\u6cd5\u7684\u4e0d\u540c\u4e0d\u4f1a\u5bfc\u81f4\u4e4b\u540e\u7684\u53d6\u6cd5\u53d1\u751f\u53d8\u5316\n\n## \u5176\u4ed6\uff1a\n\n**\u5982\u4f55\u8f6c\u79fb\u548c\u8ba1\u7b97\u4ef7\u503c\uff1a**\n\n\u7531\u4e8e\u9650\u5236\u4e86\u6bcf\u6b21\u51fa\u624b\u7684\u603b\u82b1\u8d39$\\leq 3$\uff0c\u5e76\u4e14\u6bcf\u5f20\u724c\u82b1\u8d39\u90fd\u4e3a\u6b63\uff0c\u6240\u4ee5\u6bcf\u6b21\u6700\u591a\u51fa\u4e09\u5f20\u3002\u6240\u4ee5\uff0c\u53ea\u4fdd\u75593\u5f20\u6700\u5927\u76841\uff0c1\u5f20\u6700\u5927\u76842\u548c1\u5f20\u6700\u5927\u76843\uff0c\u679a\u4e3e\u5b50\u96c6\u5373\u53ef\u3002\u679a\u4e3e\u7684\u65f6\u5019\u53ef\u4ee5\u5148\u9884\u5904\u7406\u5404\u79cd\u65b9\u6848\u7684\u548c\uff0c\u518d\u7528\u72b6\u6001\u538b\u7f29\u7684\u5f62\u5f0f\u6765\u65b9\u4fbf\u8ba1\u7b97\u3002\n\n\u8f6c\u79fb\u7684\u4ef7\u503c\u5c31\u662f\u7528\u7684\u548c\uff0c\u5982\u679c\u4e00\u6b21\u64cd\u4f5c\u80fd\u591f\u89e6\u53d1\u66b4\u51fb\uff0c\u90a3\u4e48\u6839\u636e\u8d2a\u5fc3\u53ef\u4ee5\u77e5\u9053\uff0c\u5728\u5f53\u524d\u7684\u9009\u9879\u4e2d\u653e\u4e0a\u4ef7\u503c\u6700\u5927\u7684\u4e00\u4e2a\u65f6\u6700\u4f18\u7684\n\n**\u8fb9\u754c\uff1a** \u6ca1\u6709\u5751\uff0c\u5728\u6b64\u4e0d\u518d\u591a\u8bb2\n\n## \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$f_{i,j}=f_{i-1,j-k}+v$\n\n\u5176\u4e2dv\u8868\u793a\u8f6c\u79fb\u540e\u7684\u4ef7\u503c\n\ndp\u7c7b\u9898\u76ee\uff0c\u6211\u5c31\u4e0d\u653e\u4ee3\u7801\u4e86\uff0c\u539f\u56e0\u67092\uff1a\n1. dp\u91cd\u5728\u7406\u89e3\uff0c\u7406\u89e3\u4e4b\u540e\u4ee3\u7801\u4e00\u822c\u90fd\u4e0d\u96be\u60f3\n2. dp\u7c7b\u9898\u76ee\u662f\u8d3a\u9898\u515a\u798f\u5229\uff0c\u4e0d\u653e\u4ee3\u7801\u4e5f\u662f\u4e3a\u4e86\u9632\u6b62\u8d3a\u9898",
        "postTime": 1564578380,
        "uid": 27924,
        "name": "xukuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1176F \u3010Destroy it!\u3011"
    }
]
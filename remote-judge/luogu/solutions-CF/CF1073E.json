[
    {
        "content": "> Codeforces 1073E\n\n> \u9898\u610f\uff1a\u6c42 $[l,r]$ \u4e4b\u95f4\u5305\u542b\u4e0d\u8d85\u8fc7 $k$ \u4e2a\u4e0d\u540c\u6570\u7801\u7684\u6570\u7684\u548c\u3002\n\n> $1 \\leq l,r \\lt 10^{18}$\uff0c$1 \\leq k \\leq 10$\n\n\u9996\u5148\uff0c\u770b\u5230\u95ee\u9898\u8981\u6c42 $[l,r]$ \u4e4b\u95f4\u6ee1\u8db3\u4e00\u79cd\u6761\u4ef6\u7684\u6570\u7684\u548c\uff0c\u53ef\u4ee5\u60f3\u5230\u6570\u4f4d $dp$\u3002\u518d\u770b\u5230 $k$ \u7684\u6570\u636e\u8303\u56f4\u53ea\u6709 $10$ \u53ef\u4ee5\u60f3\u5230\u72b6\u538b $dp$\u3002\n\n\u6211\u4eec\u8bbe $calc(i)$ \u8868\u793a $[1,i]$ \u4e2d\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u7684\u4e2a\u6570\u3002\u90a3\u4e48\u539f\u95ee\u9898\u7684\u7b54\u6848\u5c31\u53ef\u4ee5\u53d8\u6210 $calc(r)-calc(l-1)$\n\n\u5173\u952e\u662f\u600e\u4e48\u6c42 $calc(x)$ \u7684\u503c\u3002\u6211\u4eec\u5c06 $x$ \u4e00\u4f4d\u4e00\u4f4d\u62c6\u5f00\uff0c$a[0]$ \u8868\u793a\u6700\u4f4e\u4f4d\uff0c$a[cnt-1]$ \u8868\u793a\u6700\u9ad8\u4f4d\u3002\n\n\u7136\u540e\u6211\u4eec\u4ece\u9ad8\u5230\u4f4e\u8fdb\u884c\u6570\u4f4d $dp$\u3002\u6211\u4eec\u8bb0 $f[i][j]$ \u8868\u793a\u679a\u4e3e\u5230\u7b2c $i$ \u4f4d\uff0c\u51fa\u73b0\u7684\u6570\u7684\u96c6\u5408\u4e3a $j$ \u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u6570\u7684**\u548c**\uff0c\u8bb0 $g[i][j]$ \u8868\u793a\u5728\u524d $i$ \u4f4d\u91cc\u9762\uff0c\u51fa\u73b0\u7684\u6570\u7684\u96c6\u5408\u4e3a $j$ \u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u7684**\u4e2a\u6570**\u3002\n\n\u8003\u8651\u8f6c\u79fb\u3002\u6211\u4eec\u679a\u4e3e\u7b2c $i$ \u4e3a\u4e0a\u586b\u7684\u6570 $t$\uff0c\u5047\u8bbe\u586b\u5b8c $t$ \u4ee5\u540e\u51fa\u73b0\u7684\u6570\u7684\u96c6\u5408\u4e3a $j'$\uff0c\u90a3\u4e48\n\n- $f[i][j]=\\sum\\ (10^i \\times t \\times g[i-1][j']+f[i-1][j'])$\n\n- $g[i][j]=\\sum\\ g[i-1][j']$\n\n\u8fb9\u754c\u6761\u4ef6\uff1a\n\n- $f[-1][j]=0$\uff0c$g[-1][j]=1$ $\\ \\ \\ (cnt(j) \\leq k)$\n\n- $f[-1][j]=0$\uff0c$g[-1][j]=0$ $\\ \\ \\ (cnt(j) > k)$\n\n\u90a3\u4e48 $calc(i)=f[cnt-1][0]$\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\u6ce8\u610f\u524d\u5bfc $0$ \u4e0d\u80fd\u88ab\u7edf\u8ba1\u8fdb\u72b6\u6001\u4e2d\u3002\n\n```cpp\n//Coded by tzc_wk\n/*\n\u6570\u636e\u4e0d\u6e05\u7a7a\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u591a\u6d4b\u4e0d\u8bfb\u5b8c\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u8fb9\u754c\u4e0d\u7279\u5224\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u8d2a\u5fc3\u4e0d\u8bc1\u660e\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\nD P \u987a\u5e8f\u9519\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u5927\u5c0f\u5c11\u7b49\u53f7\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u53d8\u91cf\u4e0d\u7edf\u4e00\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u8d8a\u754c\u4e0d\u5224\u65ad\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u8c03\u8bd5\u4e0d\u6ce8\u91ca\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n\u6ea2\u51fa\u4e0d l l\uff0c\u7206\u96f6\u4e24\u884c\u6cea\u3002\n*/\n#include <bits/stdc++.h>\nusing namespace std;\n#define fi\t\t\tfirst\n#define se\t\t\tsecond\n#define fz(i,a,b)\tfor(int i=a;i<=b;i++)\n#define fd(i,a,b)\tfor(int i=a;i>=b;i--)\n#define foreach(it,v) for(__typeof(v.begin()) it=v.begin();it!=v.end();it++)\n#define all(a)\t\ta.begin(),a.end()\n#define giveup(...) return printf(__VA_ARGS__),0;\n#define fill0(a)\tmemset(a,0,sizeof(a))\n#define fill1(a)\tmemset(a,-1,sizeof(a))\n#define fillbig(a)\tmemset(a,0x3f,sizeof(a))\n#define fillsmall(a) memset(a,0xcf,sizeof(a))\n#define mask(a)\t\t(1ll<<(a))\n#define maskx(a,x)\t((a)<<(x))\n#define _bit(a,x)\t(((a)>>(x))&1)\n#define _sz(a)\t\t((int)(a).size())\n#define filei(a)\tfreopen(a,\"r\",stdin);\n#define fileo(a)\tfreopen(a,\"w\",stdout);\n#define fileio(a) \tfreopen(a\".in\",\"r\",stdin);freopen(a\".out\",\"w\",stdout)\n#define eprintf(...) fprintf(stderr,__VA_ARGS__)\n#define put(x)\t\tputchar(x)\n#define eoln        put('\\n')\n#define space\t\tput(' ')\n#define y1\t\t\ty_chenxiaoyan_1\n#define y0\t\t\ty_chenxiaoyan_0\n#define int long long\ntypedef pair<int,int> pii;\ninline int read(){\n\tint x=0,neg=1;char c=getchar();\n\twhile(!isdigit(c)){\n\t\tif(c=='-')\tneg=-1;\n\t\tc=getchar();\n\t}\n\twhile(isdigit(c))\tx=x*10+c-'0',c=getchar();\n\treturn x*neg;\n}\ninline void print(int x){\n\tif(x<0){\n\t\tputchar('-');\n\t\tprint(abs(x));\n\t\treturn;\n\t}\n\tif(x<=9)\tputchar(x+'0');\n\telse{\n\t\tprint(x/10);\n\t\tputchar(x%10+'0');\n\t}\n}\ninline int qpow(int x,int e,int _MOD){\n\tint ans=1;\n\twhile(e){\n\t\tif(e&1)\tans=ans*x%_MOD;\n\t\tx=x*x%_MOD;\n\t\te>>=1;\n\t}\n\treturn ans;\n}\nconst int MOD=998244353;\nint l=read(),r=read(),k=read();\nint a[20],cnt,P[20];\npii dp[20][1024];\ninline pii dfs(int pos,int sta,bool lead,bool limit){\n\tif(!~pos)\treturn pii(__builtin_popcount(sta)<=k,0);\n\tif(!lead&&!limit&&~dp[pos][sta].fi)\treturn dp[pos][sta];\n\tint up=(limit)?a[pos]:9;\n\tpii ans=pii(0,0);\n\tfor(int i=0;i<=up;i++){\n\t\tint nsta=(lead&&i==0)?sta:(sta|(1<<i));\n\t\tpii nxt=dfs(pos-1,nsta,(lead&&i==0),(limit&&i==up));\n\t\tans=pii((ans.fi+nxt.fi)%MOD,(nxt.fi*P[pos]%MOD*i%MOD+nxt.se+ans.se)%MOD);\n\t}\n//\tcout<<pos<<\" \"<<sta<<\" \"<<ans.fi<<\" \"<<ans.se<<endl;\n\tif(!limit&&!lead)\tdp[pos][sta]=ans;\n\treturn ans;\n}\ninline int solve(int x){\n\tfill0(a);cnt=0;\n\twhile(x){\n\t\ta[cnt++]=x%10;x/=10;\n\t}\n\tfz(i,0,18)\tfz(j,0,1023)\tdp[i][j].fi=dp[i][j].se=-1;\n\treturn dfs(cnt-1,0,1,1).se;\n}\nsigned main(){\n\tP[0]=1;fz(i,1,18)\tP[i]=P[i-1]*10%MOD;\n\tcout<<(solve(r)-solve(l-1)+MOD)%MOD<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1584502259,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1073E \u3010Segment Sum\u3011"
    },
    {
        "content": "# \u9898\u76ee\n\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1073E)\n\n# \u9898\u89e3\n\n\u4e00\u9053 ~~\u8bb0\u5fc6\u5316\u641c\u7d22~~ \u7528\u72b6\u538b\u914d\u5408\u6570\u4f4d $DP$ \u7684\u9898\u3002\n\n\u9996\u5148\u5c06\u201d\u6c42\u533a\u95f4 $[l,r]$ \u7684\u548c\u201c\u8f6c\u5316\u4e3a\u201d\u6c42\u533a\u95f4 $[1,i]$ \u7684\u548c\u201c\uff0c\u8bb0 $[1,i]$ \u7684\u5408\u6cd5\u6570\u5b57\u548c\u4e3a $f(i)$\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f $f(r)-f(l-1)$\uff0c\u8fd9\u662f\u6570\u4f4d $DP$ \u7684\u7ecf\u5178\u64cd\u4f5c\uff0c\u4e0d\u4f5c\u8fc7\u591a\u89e3\u91ca\u3002\n\n\u8003\u8651 `dfs(pos,s,pz,rl)` \u4e3a\u586b\u6570\u5230\u7b2c $pos$ \u4f4d\uff08\u6700\u4f4e\u4f4d\u4fdd\u8bc1 $pos=1$\uff09\uff0c\u6570\u5b57\u51fa\u73b0\u60c5\u51b5\u4e3a $s$\uff08\u4e8c\u8fdb\u5236\u4e32\uff09\uff0c\u662f\u5426\u524d\u5bfc\u96f6\uff0c\u662f\u5426\u89e6\u53ca\u4e0a\u754c\u7684\u72b6\u6001\uff0c\u8003\u8651 $f[pos][s][pz][rl]$ \u4e3a\u8fd9\u4e2a\u72b6\u6001\u7684\u5408\u6cd5\u540e\u7eed\u6570\u5b57\u7684\u548c\uff0c\u8003\u8651\u600e\u4e48\u4ece $f[pos-1]$ \u5904\u7b97\u51fa $f[pos]$ \u7684\u503c\u3002\n\n\u5047\u8bbe\u7b2c $pos$ \u4f4d\u586b\u7684\u662f $x$\uff0c\u90a3\u4e48\u5176\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5e94\u8be5\u4e3a $x\\times 10^{pos-1}\\times cnt$\uff0c\u5176\u4e2d $cnt$ \u662f\u4e4b\u540e\u72b6\u6001\u7684\u5408\u6cd5\u6570\u5b57\u7684\u4e2a\u6570\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u53ea\u6709 $f$ \u4f3c\u4e4e\u662f\u65e0\u6cd5\u540c\u65f6\u8bb0\u5f55\u8fd9\u4e2a $cnt$ \u7684\u3002\n\n\u8003\u8651\u591a\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55 $cnt$\uff0c\u8bbe $g[pos][s][pz][rl]$ \u4e3a\u72b6\u6001 `dfs(pos,s,pz,rl)` \u7684\u5408\u6cd5\u540e\u7eed\u7684\u6570\u5b57\u4e2a\u6570\uff0c\u90a3\u4e48 $g[pos]$ \u5f88\u597d\u4ece $g[pos-1]$ \u5904\u8f6c\u79fb\uff0c\u6709\n$$\ng[pos][s][pz][rl]=\\sum g[pos-1][s'][pz'][rl']\n$$\n~~\u4f3c\u4e4e\u4ec0\u4e48\u90fd\u6ca1\u5199~~ \u5176\u4e2d\uff0c$s'$ \u6307\u6570\u5b57\u51fa\u73b0\u7684\u72b6\u6001 $s$ \u5728 $x$ \u586b\u5165\u540e\u53d8\u6210\u7684\u65b0\u72b6\u6001\uff0c$pz'$ \u6307 $x$ \u5728\u586b\u5165\u540e\u662f\u5426\u4ecd\u7136\u5b58\u5728\u524d\u5bfc\u96f6\uff0c$rl'$ \u6307 $x$ \u586b\u5165\u540e\u662f\u5426\u4ecd\u7136\u89e6\u53ca\u4e0a\u754c\n\n\u800c $f[pos]$ \u7684\u8f6c\u79fb\u548c\u8fd9\u4e2a\u5dee\u4e0d\u591a\uff0c\u6709\n$$\nf[pos][s][pz][rl]=\\sum f[pos-1][s'][pz'][rl']+x\\times 10^{pos-1}\\times g[pos-1][s'][pz'][rl']\n$$\n\u5bf9\u4e8e\u4e34\u754c\u72b6\u6001 $f[0]$ \u548c $g[0]$\uff0c\u663e\u7136\u6709 $\\forall f[0]=0$\uff0c\u5bf9\u4e8e $g[0]$\uff0c\u8bb0 $\\text{bitcnt}(x)$ \u4e3a $x$ \u4e8c\u8fdb\u5236\u4e0b\u6709\u591a\u5c11\u4e2a $1$\uff0c\u5982\u679c $\\text{bitcnt}(s)\\le k$\uff0c\u6709 $g[0][s][pz][rl]=1$\uff0c\u5426\u5219\u6709 $g[0][s][pz][rl]=0$.\n\n# \u4ee3\u7801\n\n```cpp\nhttps://www.cnblogs.com/Arextre/p/13460461.html\n```\n\n",
        "postTime": 1596893758,
        "uid": 125355,
        "name": "Vladilena",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1073E \u3010Segment Sum\u3011"
    },
    {
        "content": "**\u601d\u8def**\uff1a\n\n- \u6570\u4f4d$dp$\n\n\u8003\u8651\u72b6\u538b\uff0c$dp_{pos,mark}$\u8868\u793a\u8003\u8651\u5230\u7b2c$pos$\u4f4d\uff0c\u5e76\u4e14\u5305\u542b\u4e86$mark$\u7684\u6570\u7801\u7684\u6570\u7684\u603b\u548c\u3002\n\n\u6ce8\u610f\u8003\u8651\u524d\u5bfc0\u7684\u5f71\u54cd\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u6570\u4e2a\u6570\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u3002\n\n``` cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int p = 998244353;\nint k, a[20], pw[20];\nstruct pr {\n\tint tot, sum;\n\tpr() {}\n\tpr(int a, int b) : tot(a), sum(b) {}\n\tvoid clr() { tot = sum = 0; }\n\tbool chk() { return ~tot && ~sum; }\n} dp[2][2][20][1 << 10];\n\nvoid add(pr& a, pr b, int num, int pos) {\n\ta.tot = (a.tot + b.tot) % p;\n\ta.sum = (a.sum + 1ll * num * pw[pos] % p * b.tot % p + b.sum) % p;\n}\n\npr dfs(bool lim, bool zero, int pos, int mark) {\n\tif (!pos) return pr(1, 0);\n\tpr& res = dp[lim][zero][pos][mark];\n\tif (res.chk()) return res;\n\tres.clr();\n\tfor (int i = 0; i <= (lim ? a[pos] : 9); i++) {\n\t\tif (__builtin_popcount(zero && !i ? 0 : mark | 1 << i) <= k) {\n\t\t\tadd(res, dfs(lim && i == a[pos], zero && !i, pos - 1, zero && !i ? 0 : mark | 1 << i), i, pos - 1);\n\t\t}\n\t}\n\treturn res;\n}\n\nint calc(ll x) {\n\tint len = 0;\n\tmemset(dp, -1, sizeof dp);\n\twhile (x) a[++len] = x % 10, x /= 10;\n\treturn dfs(1, 1, len, 0).sum;\n}\n\nint main() {\n\tpw[0] = 1;\n\tfor (int i = 1; i < 19; i++) {\n\t\tpw[i] = 10ll * pw[i - 1] % p;\n\t}\n\tll l, r;\n\tscanf(\"%lld %lld %d\", &l, &r, &k);\n\tprintf(\"%d\", (calc(r) - calc(l - 1) + p) % p);\n\treturn 0;\n}\n```",
        "postTime": 1540793455,
        "uid": 73934,
        "name": "Juanzhang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1073E \u3010Segment Sum\u3011"
    },
    {
        "content": "\u5c45\u7136\u6ca1\u770b\u9898\u89e3\u5e72\u6389\u4e86\u4e00\u9053\u8fd9\u4e48\u96be\u7684**\u6570\u4f4dDP**\uff0c\u597d\u5f00\u68ee\u554a~~\uff08\u5927\u4f6c\u83ab\u9119\u89c6\uff0c\u6bd5\u7adf\u6211\u662f\u849f\u84bb\uff09~~\u3002\n\n# \u72b6\u6001\uff1a\n\ndp[i][j][k][l][o]\u8868\u793a\u5f53\u524d\u53d6\u5230\u7b2ci\u4f4d\uff0c\u53d6\u5230\u7684\u6570\u5b57\u96c6\u5408\u4e3aj\uff08\u5373\u72b6\u538b\uff09\uff0c\u6709k\u4e2a\u4e0d\u540c\u7684\u6570\u5b57\uff08\u5176\u5b9e\u6ca1\u7528\uff0c\u5305\u542b\u5728j\u91cc\u4e86\uff0c\u4f46\u662f\u4e3a\u4e86\u65b9\u4fbf\uff0c\u591a\u5b9a\u4e49\u4e00\u7ef4\uff09\uff0cl\u8868\u793a\u662f\u5426\u6709\u524d\u5bfc0\uff08\u89c1\u6ce8\u2460\uff09\uff0co\u8868\u793a\u5f53\u524d\u6570\u5b57\u662f\u5426\u53ef\u4ee5\u4efb\u610f\u53d6\uff08\u6570\u4f4dDP\u5e38\u89c4\u64cd\u4f5c\uff0c\u8fd9\u91cc\u4e5f\u5b9a\u4e49\u5728\u72b6\u6001\u91cc\u4e86\uff0ctrue\u8868\u793a\u53ef\u4ee5\u4efb\u610f\u53d6\uff09\u7684\u6570\u7684\u548c\u3002\n\nc[i][j][k][l][o]\u72b6\u6001\u4e0edp\u6570\u7ec4\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7\u8868\u793a\u7684\u662f\u65b9\u6848\u6570\u800c\u4e0d\u662f\u6570\u7684\u548c\u3002\n\n\u6ce8\uff1a\n\n\u2460\u8fd9\u9053\u9898\u9700\u8981\u5224\u524d\u5bfc0\uff0c\u524d\u5bfc0\u4e0d\u7b97\u5728\u6570\u5b57\u4e2d\uff0c\u6211\u7528\u4e86\u4e00\u4e2azero\u6765\u8bb0\u5f55\u5f53\u524d\u6570\u5b57\u662f\u5426\u8fd8\u5728\u524d\u5bfc0\u90e8\u5206\uff0c\u5982\u679c\u5728\u524d\u5bfc0\u90e8\u5206\uff0czero\u4e3afalse\u3002\n\n# \u8f6c\u79fb\uff1a\n\n\u4e24\u5927\u79cd\u60c5\u51b5\uff1a\n\n[1]\u5f53\u524d\u8fd8\u5728\u524d\u5bfc0\u90e8\u5206\uff0c\u5373zero=false\n\n[2]\u5f53\u524d\u4e0d\u5728\u524d\u5bfc0\u90e8\u5206\uff0c\u5373zero=true\n\n## [1]\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\uff1a\n\n### \u2460\u5f53\u524d\u6570\u5b57\u4ecd\u4e3a0\uff1a\n\n```cpp\ndfs(w-1,s,id,false,f or (i<>q[w]));\n```\n\nzero\u4ecd\u4e3afalse\n\n### \u2461\u5f53\u524d\u6570\u5b57\u4e0d\u4e3a0\n\n```cpp\ndfs(w-1,1 << i,1,true,f or (i<>q[w]));\n```\n\nzero\u53d8\u6210true\uff0c\u72b6\u6001\u53d8\u4e3a1 << i\uff0c\u540c\u65f6\u51fa\u73b0\u4e86\u4e00\u4e2a\u6570\n\n## [2]\u4e5f\u662f\u4e24\u79cd\u60c5\u51b5\uff1a\n\n### \u2460\u5f53\u524d\u52a0\u5165\u7684\u6570\u5b57\u5df2\u7ecf\u5728\u539f\u6570\u4e2d\u4e86\uff1a\n\n```cpp\ndfs(w-1,s,id,zero,f or (i<>q[w]));\n```\n\ns,id\u90fd\u4e0d\u66f4\u65b0\uff0c\u56e0\u4e3a\u5df2\u7ecf\u5b58\u5728\u4e86\u3002\n\n### \u2461\u5f53\u524d\u52a0\u5165\u7684\u6570\u5b57\u4e0d\u5728\u539f\u6570\u4e2d\uff1a\n\n```cpp\ndfs(w-1,s or (1 << i),id+1,zero,f or (i<>q[w]));\n```\n\n\u540c\u6837\uff0c\u8fd0\u7528\u72b6\u538b\u7684\u601d\u60f3\u3002\n\n\u7edf\u8ba1\u7b54\u6848\u4e0d\u662f\u7b80\u5355\u7684\u52a0\u8d77\u6765\uff0c\u800c\u4e14\u8981\u52a0\u4e0a\u8fd9\u4e00\u4f4d\u7684\u8d21\u732e\uff0c\u5373\u4e0b\u4e00\u79cd\u8f6c\u79fb\u6709\u591a\u5c11\u79cd\u60c5\u51b5\u5f53\u524d\u6570\u4f4d\u6240\u8868\u8fbe\u7684\u503c\uff0c\u4ee5[1]\u2461\u4e3a\u4f8b\uff1a\n\n```cpp\nres:=(res+ten[w]*i mod p*c[w-1][1 << i][1][true][f or (i<>q[w])] mod p+dp[w-1][1 << i][1][true][f or (i<>q[w])]) mod p;\n```\n\nten[w]*i\u5373\u5f53\u524d\u6570\u4f4d\u6240\u8868\u8fbe\u7684\u503c\u3002\n\n\u56e0\u4e3a\u4e0b\u4e00\u79cd\u8f6c\u79fb\u6709c[w-1][1 << i][1][true][f or (i<>q[w])]\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u8981\u4e58\u4ee5c[w-1][1 << i][1][true][f or (i<>q[w])]\u6b21\uff0c\u53ef\u4ee5\u60f3\u8c61\uff0c\u8fd9\u4e9b\u503c\u4e0edp[w-1][1 << i][1][true][f or (i<>q[w])]\u7ed3\u5408\u8d77\u6765\u4fbf\u7ec4\u6210\u4e86\u6240\u6709\u6570\u3002\n\nc\u6570\u7ec4\u4e0d\u65ad\u7d2f\u8ba1\u66f4\u65b0\u3002\n\n\u7ec6\u8282\u4e0d\u518d\u591a\u8bf4,~~\u6211\u6570\u7ec4\u5f00\u5c0f\u4e86\u8c03\u4e861hQAQ~~\u3002\n\nPascal Code\uff1a\n\n```cpp\nconst\n  p:int64=998244353;\nvar\n  c:array[0..20,0..1024,0..10,false..true,false..true]of int64;\n  dp:array[0..20,0..1024,0..10,false..true,false..true]of int64;\n  ten:array[0..55]of int64;\n  q:array[0..55]of longint;\n  top,k,i:longint;\n  ans,l,r:int64;\nprocedure dfs(w,s,id:longint; zero,f:boolean);//\u8bb0\u5fc6\u5316\u641c\u7d22\nvar\n  i,sl:longint;\n  res:int64;\nbegin\n  if id>k then//\u4e0d\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\uff0c\u9000\u51fa\n  begin\n    c[w][s][id][zero][f]:=0;\n    dp[w][s][id][zero][f]:=0;\n    exit;\n  end;\n  if w=0 then//\u5230\u5e95\u4e86\n  begin\n    c[w][s][id][zero][f]:=1;\n    dp[w][s][id][zero][f]:=0;\n    exit;\n  end;\n  if dp[w][s][id][zero][f]<>-1 then//\u5df2\u7ecf\u5904\u7406\u8fc7\u4e86\n    exit;\n  if f then//\u4e0d\u80fd\u8d85\u8fc7\u539f\u6570\n    sl:=9 else\n    sl:=q[w];\n  c[w][s][id][zero][f]:=0;\n  res:=0;\n  for i:=0 to sl do//\u6ce8\u610f\u4e0d\u65ad\u53d6\u6a21\uff0c\u5426\u5219WA\u98de\u3002\u3002\u3002\n  begin\n    if not zero then\n    begin\n      if i=0 then\n      begin\n        dfs(w-1,s,id,false,f or (i<>q[w]));\n        res:=(res+dp[w-1][s][id][false][f or (i<>q[w])]) mod p;\n        c[w][s][id][zero][f]:=(c[w][s][id][zero][f]+c[w-1][s][id][false][f or (i<>q[w])]) mod p;\n      end else\n      begin\n        dfs(w-1,1 << i,1,true,f or (i<>q[w]));\n        res:=(res+ten[w]*i mod p*c[w-1][1 << i][1][true][f or (i<>q[w])]+dp[w-1][1 << i][1][true][f or (i<>q[w])]) mod p;\n        c[w][s][id][zero][f]:=(c[w][s][id][zero][f]+c[w-1][1 << i][1][true][f or (i<>q[w])]) mod p;\n      end;\n    end else\n    begin\n      if s and (1 << i)<>0 then\n      begin\t    \n        dfs(w-1,s,id,zero,f or (i<>q[w]));\n        res:=(res+ten[w]*i mod p*c[w-1][s][id][zero][f or (i<>q[w])]+dp[w-1][s][id][zero][f or (i<>q[w])]) mod p;\n        c[w][s][id][zero][f]:=(c[w][s][id][zero][f]+c[w-1][s][id][zero][f or (i<>q[w])]) mod p;\n      end else\n      begin\n        dfs(w-1,s or (1 << i),id+1,zero,f or (i<>q[w]));\n        res:=(res+ten[w]*i mod p*c[w-1][s or (1 << i)][id+1][zero][f or (i<>q[w])]+dp[w-1][s or (1 << i)][id+1][zero][f or (i<>q[w])]) mod p;\n        c[w][s][id][zero][f]:=(c[w][s][id][zero][f]+c[w-1][s or (1 << i)][id+1][zero][f or (i<>q[w])]) mod p;\n      end;\n    end;\n  end;\n  dp[w][s][id][zero][f]:=res;\nend;\nfunction check(x:int64):int64;\nvar\n  i,j,k:longint;\n  l,o:boolean;\nbegin\n  if x=0 then\n    exit(0);\n  top:=0;\n  while x<>0 do\n  begin\n    inc(top);\n    q[top]:=x mod 10;\n    x:=x div 10;\n  end;\n  for i:=0 to 20 do//\u521d\u59cb\u5316\n    for j:=0 to 1024 do\n      for k:=0 to 10 do\n        for l:=false to true do\n          for o:=false to true do\n          begin\n            dp[i][j][k][l][o]:=-1;\n            c[i][j][k][l][o]:=0;\n          end;\n  dfs(top,0,0,false,false);\n  exit(dp[top][0][0][false][false]);\nend;\nbegin\n  readln(l,r,k);\n  ten[1]:=1;\n  for i:=2 to 20 do\n    ten[i]:=ten[i-1]*10 mod p;//\u9884\u5904\u740610\u7684\u5e42\u6b21\n  ans:=check(r)-check(l-1);\n  ans:=(ans mod p+p) mod p;//\u53ef\u80fd\u51cf\u51fa\u6765\u662f\u8d1f\u7684\n  writeln(ans);\nend.\n```\n\n\u6700\u540e\u518d\u63a8\u8350\u4e24\u9053CF\u7684\u6570\u4f4dDP\uff1a\n\n[CF628D Magic Numbers](https://www.luogu.org/problemnew/show/CF628D)\n\n[CF55D Beautiful numbers](https://www.luogu.org/problemnew/show/CF55D)",
        "postTime": 1541514051,
        "uid": 10341,
        "name": "GK0328",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1073E \u3010Segment Sum\u3011"
    },
    {
        "content": "\u4e00\u4e2a\u5f88\u68d2\u7684\u9898\u76ee\uff0c\u770b\u4e86\u9898\u89e3\u624d\u505a\u51fa\u6765\u3002\n\n\u5bf9\u4e8e\u8fd9\u79cd\u8fde\u7eed\u533a\u95f4\u95ee\u9898\uff0c\u4e00\u822c\u7684\u5957\u8def\u662f\u8bbe $solve(x)$ \u4e3a $[1,x]$ \u4e4b\u95f4\u7b26\u5408\u8981\u6c42\u7684\u6570\u7684\u548c\u3002\n\n\u7136\u540e\u95ee\u9898\u5c31\u8f6c\u6362\u6210\u4e86\u4e00\u4e2a\u6bd4\u8f83\u660e\u663e\u7684\u6570\u4f4ddp\uff0c\u91cd\u70b9\u662f\u5982\u4f55\u8bbe\u8ba1\u72b6\u6001\u3002\n\n\u7531\u4e8e\u8981\u5c0f\u4e8e $x$\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2a $0/1$ \u53d8\u91cf $j$ \u5224\u65ad\u524d\u9762 $i$ \u4e3a\u662f\u5426\u5df2\u7ecf\u5206\u51fa\u80dc\u8d1f\u3002\n\n\u8003\u8651\u5230\u548c\u591a\u5c11\u4e2a\u4e0d\u540c\u7684\u6570\u51fa\u73b0\u6709\u5173\uff0c\u6240\u4ee5\u4f7f\u7528\u72b6\u6001\u538b\u7f29\u8868\u793a\u54ea\u4e9b\u51fa\u73b0\u8fc7\u4e86\u3002\n\n\u8bbe $num_{i,j,l,k}$ \u8868\u793a\u5df2\u7ecf\u5904\u7406\u4e86\u6700\u9ad8 $i$ \u4f4d\uff0c\u662f\u5426\u5206\u51fa\u80dc\u8d1f\uff0c\u662f\u5426\u6709\u524d\u5bfc0\uff0c\u76ee\u524d\u5df2\u7ecf\u6709 $k$ \u51fa\u73b0\u8fc7\u4e86\u65f6\u7684\u603b\u6570\u3002\n\n\u540c\u65f6\u8fd8\u8981\u8bbe\u8ba1 $sum_{i,j,l,k}$ \u8868\u793a\u6b21\u6570\u7684\u548c\u3002\n\n\u7136\u540e\u8003\u8651\u8f6c\u79fb\u3002\n\n\u679a\u4e3e\u7b2c $i$ \u4f4d\u53d6\u54ea\u4e9b\uff0c\u7136\u540e\u6839\u636e $j$ \u5224\u65ad\u662f\u5426\u53ef\u884c\u3002\n\n\u559c\u95fb\u4e50\u89c1\u7684\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int mod=998244353;\nint l,r,K,num[20][2][2][2000],sum[20][2][2][2000];\nint solve(string s)\n{\n\tmemset(num,0,sizeof(num));\n\tmemset(sum,0,sizeof(sum));\n\tnum[0][0][0][0]=1;\n\tfor(int i=0;i<s.size();i++)\n\t\tfor(int j=0;j<2;j++)\n\t\t\tfor(int l=0;l<2;l++)\n\t\t\t\tfor(int k=0;k<(1<<10);k++)\n\t\t\t\t\tif(num[i][j][l][k])\n\t\t\t\t\t{\n\t\t\t\t\t\tint nn=num[i][j][l][k];\n\t\t\t\t\t\tint ss=sum[i][j][l][k];\n\t\t\t\t\t\tint lim=(j?9:s[i]-'0');\n\t\t\t\t\t\tfor(int t=0;t<=lim;t++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint c=k;\n\t\t\t\t\t\t\tif(l||t)\n\t\t\t\t\t\t\t\tc|=(1<<t);\n\t\t\t\t\t\t\t(num[i+1][j||(t<lim)][l||t][c]+=nn)%=mod;\n\t\t\t\t\t\t\t(sum[i+1][j||(t<lim)][l||t][c]+=ss*10%mod+t*nn%mod)%=mod;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\tint ans=0;\n\t\tfor(int j=0;j<2;j++)\n\t\t\tfor(int l=0;l<2;l++)\n\t\t\t\tfor(int k=0;k<(1<<10);k++)\n\t\t\t\t\tif(__builtin_popcount(k)<=K)\n\t\t\t\t\t\t(ans+=sum[s.size()][j][l][k])%=mod;\n\treturn ans;\n}\nsigned main()\n{\n\tscanf(\"%lld %lld %lld\",&l,&r,&K);\n\tcout<<(solve(to_string(r))+mod-solve(to_string(l-1)))%mod;\n\treturn 0; \n}\n```\n",
        "postTime": 1599371146,
        "uid": 334379,
        "name": "45din\u043e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1073E \u3010Segment Sum\u3011"
    }
]
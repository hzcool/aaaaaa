[
    {
        "content": "\u4e00\u9053\u5f88\u6076\u5fc3\u7684 $DP$ \u9898\u3002\n\n## \u3010\u601d\u8def\u3011\n\u9996\u5148\u5224\u65ad\u8fd9\u9053\u9898\u662f\u4e00\u4e2a\u6709\u4e00\u5806\u9650\u5236\u8fd8\u5e26\u8f93\u51fa\u7684 $DP$ \u3002\n\n\u7136\u540e\u4e0d\u96be\u53d1\u73b0\u8981\u628a\u5b66\u79d1\u6309 $c$ \u6392\u5e8f\uff0c\u7531\u4e8e\u6700\u540e\u8f93\u51fa\u7684\u662f\u5b66\u79d1\u7f16\u53f7\uff0c\u8981\u628a $id$ \u4e5f\u8bb0\u5f55\u4e00\u4e0b\u3002\n\n\u7136\u540e\u8bbe\u8ba1\u72b6\u6001\u3002\n\n\u8fd9\u91cc\u8bbe $dp[i][j][p]$ \u8868\u793a\u9009\u4e86\u7b2c $i$ \u95e8\u5b66\u79d1\uff0c\u5230\u4e86\u7b2c $j$ \u5929\uff0c\u6700\u540e\u4e00\u95e8\u5b66\u79d1\u4f5c\u4e1a\u91cf\u662f $p$ \u80fd\u5f97\u5230\u7684\u6700\u5927\u603b\u4f5c\u4e1a\u91cf\u3002\n\n\u53d1\u73b0 $a_i\\leq b_i \\leq 10^{16}$ \u7a7a\u95f4\u5fc5\u70b8\u3002\n\n\u7136\u540e\u53c8\u53d1\u73b0 $b_i-a_i\\leq 100$\u3002\n\n\u597d\u529e\u4e86\uff0c\u76f4\u63a5\u6539\u53d8 $p$ \u7684\u5b9a\u4e49\u4e3a \u6700\u540e\u4e00\u95e8\u5b66\u79d1\u4f5c\u4e1a\u91cf\u662f $p+a_i$ \uff0c\u7531\u4e8e $i$ \u5df2\u7ecf\u786e\u5b9a $p+a_i$ \u4ecd\u7136\u662f\u5b9a\u503c\u3002\n\n\u6700\u540e\u7a7a\u95f4\u590d\u6742\u5ea6 $O(nm(b_i-a_i))$ \u3002\n\n\u8003\u8651\u8f6c\u79fb\u3002\n\n\u9996\u5148\u8981\u6c42 $c$ \u4e25\u683c\u9012\u589e\uff0c\u7531\u4e8e\u5df2\u7ecf\u6392\u8fc7\u5e8f\uff0c\u8fd9\u91cc\u53ea\u8981\u5224\u662f\u5426\u76f8\u7b49\u5373\u53ef\uff0c\u76f8\u7b49\u5373\u9000\u51fa\u3002\n\n\u7136\u540e\u5224 **\u5f53\u524d\u7684** $a_i+p -k$ \u4e0e $(a_i+p)/k$ \u662f\u5426\u5728\u76ee\u6807\u7684 $[a,b]$ \u4e4b\u95f4\u5373\u53ef\uff08\u9664\u6cd5\u8fd8\u8981\u5224\u4e00\u4e2a\u6574\u9664\uff09\u3002\u6700\u540e\u5982\u679c\u8f6c\u79fb\u8fc7\u6765\u7684\u7ed3\u679c\u5927\u4e8e\u5f53\u524d\u7ed3\u679c\uff0c\u76f4\u63a5\u66f4\u65b0\u7b54\u6848\u3002 \n\n\u8f93\u51fa\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u6bcf\u4e00\u6b21\u6210\u529f\u8f6c\u79fb\u8bb0\u5f55\u4e00\u4e0b\u524d\u9a71\u5c31\u884c\uff0c\u6700\u540e\u9012\u5f52\u8f93\u51fa\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(m^2n(b_i-a_i))$\n\n\u7136\u540e\u5c31\u8fd9\u4e48\u505a\u5b8c\u4e86\u3002\n\n## \u3010\u4ee3\u7801\u3011\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntemplate <typename T>\ninline void read(T &x){\n    x = 0;int fu = 1;\n    char c = getchar();\n    while(c > 57 || c < 48){\n        if(c == 45) fu = -1;\n        c = getchar();\n    }\n    while(c <= 57 && c >= 48){\n        x = (x << 3) + (x << 1) + c - 48;\n        c = getchar();\n    }\n    x *= fu;\n}\ntemplate <typename T>\ninline void fprint(T x){\n    if(x < 0) putchar(45), x = -x;\n    if(x > 9) fprint(x / 10);\n    putchar(x % 10 + 48);\n}\ntemplate <typename T>\ninline void fprint(T x, char ch){\n    fprint(x);putchar(ch);\n}\n#define int long long\nint n, m, k;\n\nint dp[55][55][105];\ntypedef pair <int, int> pi;\n\npi pre[55][55][105];\n\nstruct Subject {\n    int l, r, val, id;\n    inline bool operator < (const Subject &tmp) const{\n        return val < tmp.val;\n    }\n}a[55];\n\ninline void output(int x, int y, int z){\n    if(y == 1) {printf(\"%lld %lld\\n\", a[x].id, a[x].l + z);return;}\n    pi cur = pre[x][y][z];\n    output(cur.first, y - 1, cur.second);\n    printf(\"%lld %lld\\n\", a[x].id, a[x].l + z);\n}\n\nsigned main(){\n    read(n);read(m);read(k);\n    for (register int i = 1;i <= m;i ++){read(a[i].l);read(a[i].r);read(a[i].val);a[i].id = i;}\n    sort(a + 1, a + m + 1);\n    for (register int i = 1;i <= m;i ++){\n        for (register int j = 1;j <= n && j <= i;j ++){\n            for (register int p = a[i].l;p <= a[i].r;p ++){\n                int dis = p - a[i].l;\n                if(j == 1) {dp[i][j][dis] = p;continue;}\n                for (register int q = 1;q < i;q ++){\n                    if(a[q].val == a[i].val) continue;\n                    if(p - k >= a[q].l && p - k <= a[q].r && dp[q][j - 1][p - k - a[q].l] && dp[q][j - 1][p - k - a[q].l] + p > dp[i][j][dis]) dp[i][j][dis] = dp[q][j - 1][p - k - a[q].l] + p, pre[i][j][dis] = make_pair(q, p - k - a[q].l);\n                    if(p % k == 0 && (p / k) >= a[q].l && (p / k) <= a[q].r && dp[q][j - 1][(p / k) - a[q].l] && dp[q][j - 1][(p / k) - a[q].l] + p > dp[i][j][dis]) dp[i][j][dis] = dp[q][j - 1][(p / k) - a[q].l] + p, pre[i][j][dis] = make_pair(q, (p / k) - a[q].l);\n                }\n            }\n        }\n    }\n    pi pos;\n    int ans = -0x3f3f3f3f;\n    for (register int i = n;i <= m;i ++){\n        for (register int p = a[i].r;p >= a[i].l;p --){\n            int dis = p - a[i].l;\n            if(dp[i][n][dis] && dp[i][n][dis] > ans) pos = make_pair(i, dis), ans = dp[i][n][dis];\n        }\n    }\n    if(ans == -0x3f3f3f3f) printf(\"NO\\n\");\n    else{\n        printf(\"YES\\n\");\n        output(pos.first, n, pos.second);\n    }\n    return 0;\n}\n```",
        "postTime": 1600758421,
        "uid": 66511,
        "name": "DPair",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF119C \u3010Education Reform\u3011"
    },
    {
        "content": "\u4e2a\u4eba\u611f\u89c9\u6709 pj T3 \u7684\u96be\u5ea6 (\n\n\u9996\u5148\u770b\u5230\u8fd9\u79cd\u9898\u76ee\uff0c\u53d1\u73b0\u5b83\u6709\u5f88\u591a\u9650\u5236\uff0c\u5e76\u4e14\u662f\u6700\u4f18\u95ee\u9898\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u53ef\u4ee5\u8003\u8651 DP\u3002\n\n\u9996\u5148\u9700\u8981\u6ee1\u8db3 $c_i$ \u5355\u8c03\u9012\u589e\uff0c\u4e0d\u59a8\u5bf9 $c_i$ \u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u518d\u8fd9\u4e0a\u9762\u8fdb\u884c DP\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8003\u8651\uff0c\u6bcf\u4e00\u5929\u8981\u5728\u524d\u4e00\u5929\u57fa\u7840\u4e0a $\\times k$ \u6216\u8005 $+k$\uff0c\u518d\u770b\u4e00\u773c\u6570\u636e\u8303\u56f4 $b_i \\le 10^{16}$\uff0c\u90a3\u597d\u50cf\u662f\u65e0\u6cd5\u76f4\u63a5\u8fdb\u884c\u4e00\u4e2a\u80cc\u5305\u7684\uff0c\u7136\u540e\u6211\u4eec\u518d\u770b\u4e00\u773c $b_i-a_i \\le 100$ \uff01\uff01\uff01\u90a3\u4e0d\u662f\u53ef\u4ee5\u5c06\u65e0\u7528\u72b6\u6001\u5168\u90e8\u538b\u7f29\u6389\uff1f\n\n\u90a3\u4e48\u6211\u4eec\u8bbe\u72b6\u6001\uff0c$f_{i,j,k}$ \u5f53\u524d\u662f\u7b2c $i$ \u5929\uff0c\u5df2\u7ecf\u524d\u9762\u6709\u4e86 $j$ \u5929\u9009\u62e9\u4e86\uff0c\u5f53\u5929\u7684\u4f5c\u4e1a\u91cf\u662f $k$\uff0c\u6240\u62e5\u6709\u7684\u4f5c\u4e1a\u91cf\u6700\u5927\u503c\u3002\n\n\u5f53\u7136\u6211\u4eec\u8fd9\u91cc\u8981\u8bb0\u5f55\u524d\u9a71\u3002\n\n\u56e0\u4e3a\u6211\u8003\u8651\u5230\u6709 $\\times k$ \uff0c\u5982\u679c\u662f\u76f4\u63a5\u679a\u4e3e\u5f53\u524d\u8fd9\u4e2a\u72b6\u6001\uff0c\u7136\u540e\u679a\u4e3e\u524d\u9762\u7684\u6765\u66f4\u65b0\u6709\u70b9\u9ebb\u70e6\uff0c\u4e8e\u662f\u6211\u4eec\u76f4\u63a5\u8003\u8651\u7528\u5237\u8868\u6765\u505a\uff0c\u5c31\u662f\u5f53\u524d\u679a\u4e3e\u8fd9\u4e2a\u72b6\u6001\u53bb\u66f4\u65b0\u540e\u9762\u7684\u72b6\u6001\u3002\n\n\u8fd9\u6837\u7684\u8bdd\u590d\u6742\u5ea6\u5927\u6982\u662f $O(n^3 \\times 100)$\uff0c\u662f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u9053\u9898\u76ee\u7684\u3002\n\n\u7ec6\u8282\u8fd9\u8fb9\u8981\u6ce8\u610f\u4e00\u70b9\u8fd9\u4e2a\u6570\u7ec4\u7684\u4e0b\u6807\u4e0d\u80fd\u8d85\u8fc7 $100$\uff0c\u4ee5\u53ca\u4f60\u5f53\u524d\u8ba1\u7b97\u6700\u5927\u4f5c\u4e1a\u8981\u52a0\u4e0a $a_i$\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define int long long\nusing namespace std;\nconst int INF=105;\nconst int INFN=55;\nint kk,f[INFN][INFN][INF],f1[INFN][INFN][INF][2];\nstruct ND {\n        int x,y,z,id;\n} aa[INF];\n//\nint n,m,k;\nbool cmp(ND xx,ND yy) {\n        return xx.z<yy.z;\n}\nvoid print(int x,int y,int z) {\n        if (x==0) return;\n        print(f1[x][z][y][0],f1[x][z][y][1],z-1);\n        // cout<<y<<\"\\n\";\n        cout<<aa[x].id<<\" \"<<y+aa[x].x<<\"\\n\";\n        return;\n}\nsigned main()\n{\n        memset(f,-63,sizeof f);\n        scanf(\"%lld %lld %lld\",&n,&m,&kk);\n        for (int i=1; i<=m; i++)\n                scanf(\"%lld %lld %lld\",&aa[i].x,&aa[i].y,&aa[i].z),aa[i].id=i;\n        sort(aa+1,aa+1+m,cmp);\n        // for (int i=0;i<=100;i++)\n        f[0][0][0]=0; // 50*50*50*100 = 125000*50 = 6250000\n        for (int i=0; i<=m; i++) {\n                for (int l=0; l<=aa[i].y-aa[i].x; l++) f[i][1][l]=aa[i].x+l;\n                for (int j=0; j<=i; j++) {\n                        for (int l=0; l<=aa[i].y-aa[i].x; l++)\n                                for (int k=i+1; k<=m; k++) {\n                                        if (f[i][j][l]<-1e9) continue;\n                                        if (aa[i].z<aa[k].z) {\n                                                if (0<=l+kk+aa[i].x-aa[k].x&&l+kk+aa[i].x-aa[k].x<=100)\n                                                        if (f[k][j+1][l+kk+aa[i].x-aa[k].x]<f[i][j][l]+l+kk+aa[i].x)\n                                                        {\n                                                                f[k][j+1][l+kk+aa[i].x-aa[k].x]=f[i][j][l]+l+kk+aa[i].x;\n                                                                f1[k][j+1][l+kk+aa[i].x-aa[k].x][0]=i;\n                                                                f1[k][j+1][l+kk+aa[i].x-aa[k].x][1]=l;\n                                                        }\n                                                if (0<=(aa[i].x+l)*kk-aa[k].x && (aa[i].x+l)*kk-aa[k].x<=100)\n                                                        if (f[k][j+1][(aa[i].x+l)*kk-aa[k].x]<f[i][j][l]+(aa[i].x+l)*kk)\n                                                        {\n                                                                f[k][j+1][(aa[i].x+l)*kk-aa[k].x]=f[i][j][l]+(aa[i].x+l)*kk;\n                                                                f1[k][j+1][(aa[i].x+l)*kk-aa[k].x][0]=i;\n                                                                f1[k][j+1][(aa[i].x+l)*kk-aa[k].x][1]=l;\n                                                        }\n                                        }\n                                }\n                }\n        }\n        // cout<<f[5][3][2]<<\" \"<<\"\\n\";\n        int ans=-1,ans1=-1,ans2=-1;\n        for (int i=n; i<=m; i++) {\n                for (int j=0; j<=aa[i].y-aa[i].x; j++) {\n                        if (f[i][n][j]>0) {\n                                if (f[i][n][j]>ans) {\n                                        ans=f[i][n][j],ans1=i; ans2=j;\n                                        // cout<<i<<\" \"<<n<<\" \"<<j<<\" \"<<f[i][n][j]<<\"\\n\";\n                                        // cout<<ans<<\"\\n\";\n                                }\n                        }\n                }\n        }\n        if (ans==-1) cout<<\"NO\\n\";\n        else {\n                cout<<\"YES\\n\";\n                print(ans1,ans2,n);\n        }\n        return 0;\n}\n\n```\n\n\u82e5\u6709\u95ee\u9898\u8fd8\u8bf7\u6307\u51fa\u3002",
        "postTime": 1638452229,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF119C"
    }
]
[
    {
        "content": "\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u6734\u7d20\u7684DP\u3002\n\n$f[i]$\u8868\u793a\u4ee5\u7b2c$i$\u4e2a\u70b9\u4e3a\u7ec8\u70b9\uff0c\u6700\u591a\u7ecf\u8fc7\u7684\u70b9\u7684\u4e2a\u6570\u3002\n\n\u5f97\u5230\u65b9\u7a0b$f[i]=\\max\\{f[j]+1\\}$\u3002\u8f6c\u79fb\u6761\u4ef6\u662f$i$\u5230$j$\u6240\u82b1\u65f6\u95f4\u5c0f\u4e8e\u65f6\u95f4\u5dee\u3002\n\n\u4f46\u8fd9\u662f$N^2$\u7684\u3002\n\n\u6211\u4eec\u89c2\u5bdf\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0$2\\times r$\u7684\u65f6\u95f4\u53ef\u4ee5\u4ece\u4e00\u4e2a\u70b9\u8d70\u5230\u4efb\u610f\u53e6\u5916\u4e00\u4e2a\u70b9\u3002\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u53ea\u7528\u679a\u4e3e\u524d\u9762$2\\times r$\u4e2a\u8fdb\u884c\u8f6c\u79fb\u3002\u524d\u9762\u7684\u5f00\u4e00\u4e2a\u53d8\u91cf\u8bb0\u5f55\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 505\n#define M 100005\nusing namespace std;\nint n,m;\nint X[M],Y[M],t[M];\nint f[M];\nint main(){\n\tscanf(\"%d%d\",&n,&m);X[0]=Y[0]=1;\n\trep(i,1,m)scanf(\"%d%d%d\",&t[i],&X[i],&Y[i]);\n\tmemset(f,0xcf,sizeof(f));\n\tf[0]=0;int mx=0xcfcfcfcf,ans=0;\n\trep(i,1,m){\n\t\tf[i]=max(f[i],mx+1);\n\t\trep(j,max(0,i-2*n),i-1)if(t[i]-t[j]>=abs(X[i]-X[j])+abs(Y[i]-Y[j]))f[i]=max(f[i],f[j]+1);\n\t\tif(i>=2*n)mx=max(mx,f[i-2*n]);\n\t\tans=max(ans,f[i]);\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n/*\ng++ C.cpp -o C -Wall -std=c++11\n*/\n```",
        "postTime": 1602833838,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1427C \u3010The Hard Work of Paparazzi\u3011"
    },
    {
        "content": "## Solution\n\n\u8003\u8651\u4e00\u4e2a $\\mathcal O(n^2)$ \u7684\u6734\u7d20 dp\uff1a\u4ee4 $f(i)$ \u8868\u793a\u4ece\u8d77\u70b9\u5230\u70b9 $i$ \u4e14\u521a\u597d\u5728\u70b9 $i$ \u770b\u5230\u660e\u661f\u7684\u6700\u4f18\u7b54\u6848\uff0c\u5219 $f(i)=\\max\\limits_{1\\le j<i\\text{\u4e14}\\operatorname{dis}(i,j)\\le t_i-t_j} \\{f_j+1\\}$\uff0c\u5176\u4e2d $\\operatorname{dis}(i,j)=\\vert x_i-x_j\\vert+\\vert y_i-y_j\\vert$\u3002\n\n\u89c2\u5bdf\u9898\u76ee\u4ee5\u53ca\u4e0d\u7b49\u5f0f $\\operatorname{dis}(i,j)\\le t_i-t_j$\uff0c\u53ef\u4ee5\u770b\u51fa\u5f53 $i-j>2r$ \u65f6\uff0c$j$ \u4e00\u5b9a\u80fd\u591f\u5230\u8fbe $i$\uff08$\\operatorname{dis}(i,j)$ \u6700\u591a\u662f $2r$\uff0c$\\{t_i\\}$ \u5355\u8c03\u9012\u589e\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c$\\max\\limits_{1\\le j< i-2r}\\{f_j\\}$ \u4e00\u5b9a\u80fd\u591f\u8f6c\u79fb\u5230 $f_i$\uff0cdp \u8fc7\u7a0b\u4e2d\u987a\u4fbf\u5b58\u4e00\u4e0b\u5373\u53ef\uff0c\u800c\u6211\u4eec\u9700\u8981\u679a\u4e3e\u7684\u53ea\u6709 $[i-2r+1,i-1]$ \u8fd9\u4e2a\u533a\u95f4\uff0c\u8fd9\u6837\u590d\u6742\u5ea6\u5c31\u53d8\u6210\u4e86 $\\mathcal O(nr)$\u3002\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int N=2e5;\nint dp[N+10],t[N+10],x[N+10],y[N+10];\nint main()\n{\n\tint n,r;\n\tscanf(\"%d %d\",&r,&n);\n\tx[0]=y[0]=1;\n\tfor(int i=1;i<=n;i++) scanf(\"%d %d %d\",&t[i],&x[i],&y[i]);\n\tint mx=0xcfcfcfcf; //\u6781\u5c0f\u503c\n\tmemset(dp,0xcf,sizeof(dp));\n\tdp[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=max(0,i-2*r+1);j<i;j++)\n\t\t{\n\t\t\tif(t[i]-t[j]>=abs(x[i]-x[j])+abs(y[i]-y[j]))\n\t\t\t\tdp[i]=max(dp[i],dp[j]+1);\n\t\t}\n\t\tdp[i]=max(dp[i],mx+1);\n\t\tif(i>=r*2) mx=max(mx,dp[i-r*2]);\n\t}\n\tint ans=0;\n\tfor(int j=1;j<=n;j++) ans=max(ans,dp[j]);\n\tprintf(\"%d\",ans); \n\treturn 0;\n}\n```",
        "postTime": 1608384135,
        "uid": 125913,
        "name": "zztqwq",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1427C \u3010The Hard Work of Paparazzi\u3011"
    },
    {
        "content": "## \u66b4\u529b dp\n\n\u9898\u610f\u5c31\u662f\u7ed9\u5b9a $n$ \u4e2a\u65f6\u95f4\u70b9\uff0c\u8be5\u4e9b\u65f6\u95f4\u70b9\u7684\u4f4d\u7f6e\u4e0a\u53ef\u4ee5\u83b7\u5f97 $photo$ \uff0c\u8bf7\u95ee\u81ea\u5df1\u80fd\u5f97\u5230\u7684\u6700\u591a $photos$\u3002\n\n\u8ddd\u79bb\u662f\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\u6240\u4ee5\u89c2\u5bdf\u5230 $r \\le 500$ ,\u6240\u4ee5\u6709\u4e00\u4e2a\u7279\u6b8a\u6027\u8d28\uff1a\n\n- \u6240\u6709\u70b9\u5bf9\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0d\u8d85\u8fc7 $2 \\times r$\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5728\u65f6\u95f4\u5dee\u4e3a 1000 \u5de6\u53f3\u5185\u7684\u4efb\u52a1\u91cc dp \u5c31\u597d\u4e86\uff0c\u5bf9\u4e8e\u5927\u4e8e\u7b49\u4e8e 1000 \u7684\uff0c\u6211\u4eec\u76f4\u63a5\u7528\u5dee\u5206\u5bf9\u5176\u540e\u6bcf\u4e00\u4e2a\u70b9\u8fdb\u884c update \u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $n \\times r$\u3002\n\ncode $-->$\n\n```\n#include <cstdio>\n#include <cmath>\n#include <algorithm>\n#include <cctype>\n#define ll long long\n#define inf 1023456789\n\nusing namespace std;\n\ninline int read(){\n\tint x=0,w=0;char ch=getchar();\n\twhile (!isdigit(ch))w|=ch=='-',ch=getchar();\n\twhile (isdigit(ch))x=(x<<1)+(x<<3)+ch-'0',ch=getchar();\n\treturn w?-x:x;\n}\n\nstruct node{\n\tint t, x, y;\n}a[1000005];\n\nint r, n, f[1000005], maxn, dif[1000005];\n\nint main(){\n\tr = read(), n = read();\n\tfor(int i = 1; i <= n; i++){\n\t\ta[i].t = read();\n\t\ta[i].x = read();\n\t\ta[i].y = read();\n\t\tf[i] = -inf;\n\t\tdif[i] = -inf;\n\t}\n\tdif[0] = -inf;\n\ta[0].t = 0;\n\ta[0].x = 1;\n\ta[0].y = 1;\n\tfor(int i = 0; i < n; i++){\n\t\tif(i) dif[i] = max(dif[i - 1], dif[i]);\n\t\tf[i] = max(dif[i], f[i]);\n\t\tmaxn = max(maxn, f[i]);\n\t\tfor(int j = i + 1; j <= n; j++){\n\t\t\tif(a[j].t - a[i].t > 1000) {\n\t\t\t\tdif[j] = max(dif[j], f[i] + 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tint dis = abs(a[i].x - a[j].x ) + abs(a[i].y - a[j].y );\n\t\t\tif(dis <= a[j].t - a[i].t ){\n\t\t\t\tf[j] = max(f[j], f[i] + 1);\n//\t\t\t\tprintf(\"%d %d %d %d\\n\",i, j, dis, a[j].t - a[i].t );\n\t\t\t}\n\t\t}\n\t}\n\tdif[n] = max(dif[n - 1], dif[n]);\n\tf[n] = max(dif[n], f[n]);\n\tmaxn = max(maxn, f[n]);\n\tprintf(\"%d\\n\",maxn);\n}\n\n```\n\n\u5b8c\u7ed3\u6492\u82b1",
        "postTime": 1602654932,
        "uid": 209604,
        "name": "pikabi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1427C \u3010The Hard Work of Paparazzi\u3011"
    },
    {
        "content": "\u8bbe $f_{n}$ \u8868\u793a\u53c2\u52a0\u7b2c $n$ \u4e2a\u6700\u591a\u53ef\u4ee5\u53c2\u52a0\u7684\u6d3b\u52a8\u6b21\u6570\uff0c\u663e\u7136\u6709 $f_n=\\max_{dis(i,n)\\le t_n-t_i}\\{f_i+1\\}$\n\n\u8003\u8651 $t$ \u4e24\u4e24\u4e0d\u540c\uff0c\u53ea\u9700\u8981\u8003\u8651\u5bf9\u524d 1000 \u4e2a\u8f6c\u79fb\uff0c\u7136\u540e 1000 \u4e2a\u4ee5\u524d\u7684\u4e00\u5b9a\u80fd\u5230\u8fbe\uff0c\u8bb0\u4e2a max \u5373\u53ef\n\n```\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=5e2+2,M=1e5+2,inf=1e9;\nint f[M],x[M],t[M],y[M],g[M];\nint n,m,c,fh,i;\ninline void read(int &x)\n{\n\tc=getchar();fh=1;\n\twhile ((c<48)||(c>57))\n\t{\n\t\tif (c=='-') {c=getchar();fh=-1;break;}\n\t\tc=getchar();\n\t}\n\tx=c^48;c=getchar();\n\twhile ((c>=48)&&(c<=57))\n\t{\n\t\tx=x*10+(c^48);\n\t\tc=getchar();\n\t}\n\tx*=fh;\n}\ninline int ab(const int x)\n{\n\tif (x>0) return x;return -x;\n}\nint main()\n{\n\tread(m);read(n);\n\tregister int i,j,k;\n\tfor (i=1;i<=n;i++) {read(t[i]);read(x[i]);read(y[i]);f[i]=g[i]=-inf;}\n\tx[0]=y[0]=1;\n\tfor (i=1;i<=n;i++)\n\t{\n\t\tfor (j=i-1;(~j)&&(t[i]-t[j]<=1000);j--) if (t[i]-t[j]>=ab(x[i]-x[j])+ab(y[i]-y[j])) f[i]=max(f[i],f[j]+1);\n\t\tif (j>=0) f[i]=max(f[i],g[j]+1);g[i]=max(g[i-1],f[i]);\n\t\t//printf(\"%d %d\\n\",f[i],g[i]);\n\t}printf(\"%d\",g[n]);\n}\n```",
        "postTime": 1602643102,
        "uid": 29826,
        "name": "SSerxhs",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1427C \u3010The Hard Work of Paparazzi\u3011"
    }
]
[
    {
        "content": "## \u9898\u89e3\n\n\u8bb0 $n=2^k$\u3002\u5bb9\u6613\u53d1\u73b0\uff0c\u7f16\u53f7\u4e3a $(n/2+1)\\sim n$ \u7684\u961f\u4f0d\uff0c\u5fc5\u987b\u8981\u5728\u7b2c\u4e00\u8f6e\u88ab\u6dd8\u6c70\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u5f62\u5982 $2i-1$ \u548c $2i$ \u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u91cc\u5fc5\u987b**\u6070\u597d**\u6709\u4e00\u652f\u961f\u4f0d\u7684\u7f16\u53f7\u5728 $(n/2+1)\\sim n$\u3002\u8fd9\u80fd\u544a\u8bc9\u6211\u4eec\u5b89\u6392\u7f16\u53f7\u4e3a $(n/2+1)\\sim n$ \u7684\u961f\u4f0d\u7684\u65b9\u6848\u6570\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5f62\u5982 $2i-1$ \u548c $2i$ \u7684\u4f4d\u7f6e\u5bf9\uff1a\n\n- \u5982\u679c $a_{2i-1}$ \u548c $a_{2i}$ \u90fd\u4e3a $-1$\uff0c\u90a3\u4e48\u53ef\u4ee5\u653e\u6070\u597d\u4e00\u4e2a\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\uff0c\u6709\u4e24\u79cd\u653e\u6cd5\uff1b\n- \u5982\u679c $a_{2i-1}$ \u548c $a_{2i}$ \u6709\u4e00\u4e2a\u662f $-1$\uff0c\u53e6\u4e00\u4e2a\u5728 $1\\sim (n/2)$\uff0c\u90a3\u4e48\u53ef\u4ee5\u653e\u6070\u597d\u4e00\u4e2a\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\uff0c\u6709\u4e00\u79cd\u653e\u6cd5\uff1b\n- \u5982\u679c $a_{2i-1}$ \u548c $a_{2i}$ \u90fd\u5728 $1\\sim (n/2)$ \u6216\u8005\u90fd\u5728 $(n/2+1)\\sim n$\uff0c\u90a3\u4e00\u5b9a\u662f\u65e0\u89e3\uff1b\n- \u522b\u7684\u60c5\u51b5\u4e0d\u4f1a\u5bf9\u65b9\u6848\u6570\u4ea7\u751f\u5f71\u54cd\u3002\n\n\u516c\u5f0f\u5316\u4e00\u70b9\uff0c\u5047\u8bbe\u4e00\u5171\u6709 $x$ \u4e2a\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\u9700\u8981\u5b89\u6392\u4f4d\u7f6e\uff0c\u5171\u6709 $y$ \u4e2a\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5e76\u4e14\u5728\u5b89\u6392\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\u65f6\u6ca1\u6709\u51fa\u73b0\u5fc5\u5b9a\u65e0\u89e3\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u8fd9\u4e9b\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\u7684\u5b89\u6392\u65b9\u6cd5\u5171\u6709 $x!\\times 2^y$ \u4e2a\u3002\n\n\u5047\u8bbe\u73b0\u5728\u5b89\u6392\u597d\u4e86\u90a3\u4e9b\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\u3002\u7136\u540e\u6211\u4eec\u53d1\u73b0\u5269\u4e0b\u6765\u7684\u961f\u4f0d\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u89c4\u6a21\u6298\u534a\u7684\u5b50\u95ee\u9898\u3002\u56e0\u4e3a\u90a3\u4e9b\u88ab\u6dd8\u6c70\u7684\u961f\u4f0d\u7684\u5b89\u6392\u65b9\u5f0f\u5e76\u4e0d\u4f1a\u5f71\u54cd\u5230\u5269\u4e0b\u6765\u7684\u961f\u4f0d\u7684\u5b89\u6392\u60c5\u51b5\uff0c\u6240\u4ee5\u53ef\u4ee5\u5e94\u7528\u4e58\u6cd5\u539f\u7406\uff0c\u5c06\u6bcf\u4e2a\u5b50\u95ee\u9898\u7684\u65b9\u6848\u6570\u7ed9\u4e58\u8d77\u6765\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define up(l, r, i) for(int i = l, END##i = r;i <= END##i;++ i)\n#define dn(r, l, i) for(int i = r, END##i = l;i >= END##i;-- i)\nusing namespace std;\ntypedef long long i64;\nconst int INF = 2147483647;\nint qread(){\n    int w = 1, c, ret;\n    while((c = getchar()) >  '9' || c <  '0') w = (c == '-' ? -1 : 1); ret = c - '0';\n    while((c = getchar()) >= '0' && c <= '9') ret = ret * 10 + c - '0';\n    return ret * w;\n}\nconst int MAXN = (1 << 19) + 3;\nconst int MOD  = 998244353;\nint F[MAXN], G[MAXN];\nint solve(vector <int> V){\n    if(V.size() == 1) return 1;\n    int ret = 1, n = V.size(), t = n / 2;\n    int c = 0, d = n / 2, e = 0;\n    vector <int> T;\n    up(0, n - 1, i) d -= (V[i] > t);\n    up(0, n / 2 - 1, i){\n        int p = 2 * i;\n        int q = 2 * i + 1;\n        if(V[p] != -1 && V[q] != -1){\n            if((V[p] <= t) == (V[q] <= t))\n                return 0;\n        }\n        {\n            if(V[p] == -1 && V[q] == -1) ++ c;\n            if(V[p] != -1 && V[p] <= t) T.push_back(V[p]); else \n            if(V[q] != -1 && V[q] <= t) T.push_back(V[q]); else \n                T.push_back(-1);\n        }\n    }\n    return 1ll * G[c] * F[d] % MOD * solve(T) % MOD;\n}\nint main(){\n    int k = qread(); vector <int> P;\n    G[0] = F[0] = 1;\n    up(1, 1 << k, i)\n        G[i] = 1ll * G[i - 1] * 2 % MOD,\n        F[i] = 1ll * F[i - 1] * i % MOD;\n    up(1, 1 << k, i) P.push_back(qread());\n    printf(\"%d\\n\", solve(P));\n    return 0;\n}\n```",
        "postTime": 1685106901,
        "uid": 68344,
        "name": "\u79bb\u6563\u5c0f\u6ce2\u53d8\u6362\u00b0",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 \u3010CF1837E Playoff Fixing\u3011"
    }
]
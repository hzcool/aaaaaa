[
    {
        "content": " **\u9898\u76ee\u5927\u610f\uff1a** \u6709 $m$ \u95f4\u6559\u5ba4\uff0c$n$ \u4e2a\u6709\u6807\u53f7\u7684\u4eba\uff0c\u5206\u522b\u5b89\u6392\u6bcf\u4e2a\u4eba\u7b2c\u4e00\u8282\u8bfe\u4e0e\u7b2c\u4e8c\u8282\u8bfe\u6559\u5ba4\uff0c\u8981\u6c42\u6bcf\u4e2a\u4eba\u7b2c\u4e00\u8282\u8bfe\u6559\u5ba4\u7f16\u53f7\u5c0f\u4e8e\u7b49\u4e8e\u7b2c\u4e8c\u8282\u8bfe\u6559\u5ba4\u7f16\u53f7\u3002\u6559\u5ba4 $i$ \u5728\u7b2c\u4e00\u8282\u8bfe\u4eba\u6570\u5f3a\u5236\u8981\u6c42 $x_i$ \u4eba\uff0c\u7b2c\u4e8c\u8282\u8bfe\u6709\u4eba\u6570\u4e0a\u9650 $y_i$ \u4eba\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u5b89\u6392\u65b9\u6848\u3002\n\n### \u601d\u8def\n\u9996\u5148\u5148\u8003\u8651\u7b2c\u4e00\u8282\u8bfe\uff0c\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u653e\u5165 $x_i$ \u4eba\uff0c\u5171\u6709 $\n\\prod_{i=1}^m\\binom{\\sum_{j=i}^mx_j}{x_i}\n$ \u79cd\u65b9\u6848\u3002\n\n\u518d\u8003\u8651\u7b2c\u4e8c\u8282\u8bfe\uff0c\u8bbe $sum_i$ \u8868\u793a $\\sum_{j=1}^ix_j$\uff0c$f_{i,j}$ \u8868\u793a\u524d $i$ \u4e2a\u6559\u5ba4\u6709 $j$ \u4e2a\u4eba\u4e0a\u8bfe\u7684\u65b9\u6848\u6570\uff0c\u5219\u6709\u8f6c\u79fb\u65b9\u7a0b\n$$\nf_{i,j}=\\sum_{k=0}^{\\min(y_i,j)}f_{i-1,j-k}\\times\\binom{sum_i-j+k}{k}$$\n$k$ \u610f\u4e3a\u8be5\u8bfe\u5ba4\u6709 $k$ \u4e2a\u4eba\u4f7f\u7528\u3002  \n\u6700\u540e $f_{m,{sum_m}}$ \u5373\u4e3a\u7b2c\u4e8c\u8282\u8bfe\u7684\u65b9\u6848\u6570\u3002\n\n\u7b2c\u4e00\u7b2c\u4e8c\u8282\u8bfe\u7684\u65b9\u6848\u6570\u76f8\u4e58\u5373\u4e3a\u7b54\u6848\u3002\n\n### AC\u4ee3\u7801\n```cpp\n#include<cstdio>\n#define C(a,b) (jc[a]*inv[b]%mod*inv[a-b]%mod)\n#define mod 1000000007ll\nlong long f[109][1009];\nint m,x[1009],y[1009];\nint sum[1009];\nlong long jc[1009],jjc[1009];\nlong long inv[1009];\ninline long long fpow(long long a,int b)\n{\n\tlong long res(1);\n\twhile(b)\n\t{\n\t\tif(b&1)res=res*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}\n\treturn res;\n}\nlong long ans(1),ss;\nint main()\n{\n\tf[0][0]=1;\n\tjc[0]=jjc[0]=inv[0]=1;\n\tfor(int i(1);i<=1000;++i)jc[i]=jc[i-1]*i%mod,jjc[i]=jjc[i-1]*jc[i]%mod;\n\tfor(int i(1000),j(fpow(jjc[1000],mod-2));i>0;--i)\n\t{\n\t\tinv[i]=jjc[i-1]*j%mod;\n\t\tj=j*jc[i]%mod;\n\t}\n\tscanf(\"%d\",&m);\n\tfor(int i(1);i<=m;++i)scanf(\"%d\",x+i),sum[i]=sum[i-1]+x[i];\n\tss=sum[m];\n\tfor(int i(1);i<=m;++i)ans=ans*C(ss,x[i])%mod,ss-=x[i];//\u6c42\u7b2c\u4e00\u8282\u8bfe\u7684\u65b9\u6848\u6570\n\tfor(int i(1);i<=m;++i)scanf(\"%d\",y+i);\n\t//\u6c42\u7b2c\u4e8c\u8282\u8bfe\u7684\u65b9\u6848\u6570\n\tfor(int i(1);i<=m;++i)\n\t{\n\t\tfor(int j(0);j<=sum[i-1];++j)\n\t\t{\n\t\t\tfor(int k(0);k<=y[i]&&j+k<=sum[i];++k)\n\t\t\t{\n\t\t\t\tf[i][j+k]=(f[i][j+k]+f[i-1][j]*C(sum[i]-j,k))%mod;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans*f[m][sum[m]]%mod);\n}\n```\n",
        "postTime": 1645013975,
        "uid": 145017,
        "name": "2018ty43",
        "ccfLevel": 7,
        "title": "CF37D Lesson Timetable \u9898\u89e3"
    }
]
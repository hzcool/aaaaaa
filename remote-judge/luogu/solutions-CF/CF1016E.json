[
    {
        "content": "\u76f8\u4f3c\n\n![](https://images2018.cnblogs.com/blog/1130834/201808/1130834-20180810102742853-526383341.png)\n\n\u7ea2\u8272\u7684\u957f\u5ea6\u7b49\u4e8e\uff08y - s\uff09 /  y \u500d\u7684 A' \u548c B' \u4e4b\u95f4\u7684 fence\u7684\u957f\u5ea6\n\nA' \u662f p \u548c A \u8fde\u7ebf\u548c x \u8f74\u4ea4\u70b9\uff0c B'\u540c\u7406\n\n\u4ea4\u70b9\u4e5f\u53ef\u4ee5\u7528\u76f8\u4f3c\u6c42\uff0c\u7136\u540elower_bound\u627e\u5230\u4ea4\u70b9\u5728\u54ea\u91cc\uff0c\u7136\u540e\u901a\u8fc7\u9884\u5904\u7406\u7684fence\u957f\u5ea6\u7684\u524d\u7f00\u548c\u5c31\u53ef\u4ee5\u6c42\u4e86\uff0c\u5904\u7406\u597d\u8fb9\u754c\n```cpp\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(4)\n#include<bits/stdc++.h>\nusing namespace std;\n#define fi first\n#define se second\n#define pi acos(-1.0)\n#define LL long long\n//#define mp make_pair\n#define pb push_back\n#define ls rt<<1, l, m\n#define rs rt<<1|1, m+1, r\n#define ULL unsigned LL\n#define pll pair<LL, LL>\n#define pii pair<int, int>\n#define piii pair<pii, int>\n#define pdd pair<double, double>\n#define mem(a, b) memset(a, b, sizeof(a))\n#define fio ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n#define fopen freopen(\"in.txt\", \"r\", stdin);freopen(\"out.txt\", \"w\", stdout);\n//head\n\nconst int N = 2e5 + 5;\npdd f[N];\ndouble sum[N];\nint main() {\n    int n, q, l, r;\n    double s, a, b, x, y;\n    scanf(\"%lf %lf %lf\", &s, &a, &b);\n    scanf(\"%d\", &n);\n    for (int i = 1; i <= n; i++) scanf(\"%lf %lf\", &f[i].fi, &f[i].se);\n    sum[0] = 0;\n    for (int i = 1; i <= n; i++) {\n        sum[i] = sum[i-1] + f[i].se - f[i].fi;\n    }\n    scanf(\"%d\", &q);\n    while(q--) {\n        scanf(\"%lf %lf\", &x, &y);\n        double c1 = (a*y - s*x)/(y - s);\n        double c2 = (b*y - s*x)/(y - s);\n        int t = lower_bound(f+1, f+n+1, pdd(c1, 0)) - f;\n        double ans = 0;\n        if(t == 1) l = 1;\n        else {\n            l = t;\n            if(c1 < f[t-1].se) ans += f[t-1].se - c1;\n        }\n        int tt = lower_bound(f+1, f+n+1, pdd(c2, 0)) - f;\n        if(tt == 1) r = tt-1;\n        else {\n            r = tt-1;\n            if(c2 < f[tt-1].se) ans -= f[tt-1].se - c2;\n        }\n        if(r >= l) ans += sum[r] - sum[l-1];\n        printf(\"%.10f\\n\", ans * (y - s) / y);\n    }\n    return 0;\n}\n```",
        "postTime": 1533868696,
        "uid": 40701,
        "name": "Wisdom",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1016E \u3010Rest In The Shades\u3011"
    },
    {
        "content": "\u6ce8\u610f\u5230\u9020\u6210\u9634\u5f71\u7684\u6805\u680f\u533a\u95f4\u662f\u8fde\u7eed\u7684\uff0c\u4e8c\u5206\u89e3\u51b3\u8fb9\u754c\u3002\u4e4b\u540e\u76f8\u4f3c\u4e09\u89d2\u5f62\u7b97\u8d21\u732e\n\n\u6ce8\u610f\u4e8c\u5206\u7684\u65f6\u5019\u6dfb\u52a0\u54e8\u5175\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int N=2e5+5;\nconst double eps=1e-9,INF=1e9;\ndouble sy,a,b,sum[N],l[N],r[N];\nint n;\ninline void init(){\n\tscanf(\"%lf%lf%lf\",&sy,&a,&b);\n\tscanf(\"%d\",&n); n++;\n\tl[1]=r[1]=0; \n\tfor (int i=2;i<=n;i++){\n\t\tscanf(\"%lf%lf\",&l[i],&r[i]);\n\t\tsum[i]=sum[i-1]+(r[i]-l[i]);\n\t}\n\tl[++n]=r[n]=INF;\n\tsum[n]=sum[n-1];\n} \nint q;\ninline void solve(){\n\tscanf(\"%d\",&q); \n\tfor (int i=1;i<=q;i++){\n\t\tdouble x,y;\n\t\tscanf(\"%lf%lf\",&x,&y);\n\t\tdouble sfb=y/(y-sy);\n\t\tdouble pax=a-x,pbx=b-x;\n\t\tpax*=sfb; pbx*=sfb;\n\t\tpax+=x; pbx+=x;\n\t\tif (pbx<=l[1]){\n\t\t\tprintf(\"0.00000000\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tif (pax>=r[n]){\n\t\t\tprintf(\"0.00000000\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tdouble ans=0;\n\t\tint L=1,R=n; \n\t\twhile (L<R){\n\t\t\tint mid=(L+R+1)>>1;\n\t\t\tif (l[mid]<=pax) L=mid;\n\t\t\t\telse R=mid-1;\n\t\t}\n\t\tans-=sum[L]-max(0.0,r[L]-pax);\n\t\tL=1,R=n;\n\t\twhile (L<R){\n\t\t\tint mid=(L+R)>>1;\n\t\t\tif (r[mid]>=pbx) R=mid;\n\t\t\t\telse L=mid+1;\n\t\t}\n\t\tans+=sum[R];\n\t\tans-=min(r[L]-pbx,r[L]-l[L]);\n\t\tans=ans*(b-a)/(pbx-pax); \n\t\tprintf(\"%.7lf\\n\",ans);\n\t}\n}\nint main(){\n\tinit();\n\tsolve();\n\treturn 0;\n} \n```",
        "postTime": 1533720085,
        "uid": 34444,
        "name": "\u5927\u83dc\u9e21fks",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1016E \u3010Rest In The Shades\u3011"
    }
]
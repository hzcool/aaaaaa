[
    {
        "content": "\u9898\u610f\uff1a\u7ef4\u62a4\u53ef\u91cd\u96c6\uff0c\u652f\u6301\u63d2\u5165\uff0c\u5220\u9664\uff0c\u67e5\u8be2 $x$ \u4e0e\u96c6\u5408\u5185\u67d0\u6570\u5f02\u6216\u7684\u6700\u5927\u503c\u3002\n\n\u505a\u6cd5\uff1a\u4e00\u773c\u5efa Trie \u6811\uff0c\u63d2\u5165\u5c31\u6b63\u5e38\u63d2\u5165\uff0c\u5220\u9664\u65f6\u628a\u8def\u5f84\u4e0a\u7684\u51fa\u73b0\u6b21\u6570\u90fd\u51cf $1$\uff0c\u7136\u540e\u67e5\u8be2\u65f6\u8d70 Trie \u5c31\u884c\u3002\n",
        "postTime": 1662379973,
        "uid": 413777,
        "name": "npqenqpve",
        "ccfLevel": 0,
        "title": "CF706D"
    },
    {
        "content": " 01Trie \u6a21\u677f\u9898\n\n\u9898\u610f\uff1a\u652f\u6301\u63d2\u5165\uff0c\u5220\u9664\uff0c\u6c42\u4efb\u610f\u4e24\u4e2a\u6570\u7684\u6700\u5927\u5f02\u6216\u503c\u3002\n\n\u7b2c\u4e00\u773c\u60f3\u5230\u4e86\u7ebf\u6027\u57fa\uff0c\u4f46\u662f\u53d1\u73b0\u7ebf\u6027\u57fa\u4e0d\u652f\u6301\u6307\u5b9a\u4e24\u4e2a\u6570\u3002\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u5230\u4e86 01Trie \u6765\u7ef4\u62a4\u3002\n\n\u63d2\u5165\u64cd\u4f5c\uff1a\n\n\u83b7\u53d6\u5230\u6bcf\u4e00\u4f4d\u7684\u60c5\u51b5\u540e\uff0c\u4f9d\u6b21\u5f80\u4e0b\u627e\uff0c\u5982\u679c\u90a3\u4e2a\u70b9\u88ab\u9009\u8fc7\u4e86\uff0c\u90a3\u4e48\u5f80\u4e0b\u8d70\uff0c\u5426\u5219\u5c31\u65b0\u5f00\u4e00\u4e2a\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u7528\u8ba1\u6570\u5668\u7edf\u8ba1\u4e00\u4e0b\u8986\u76d6\u7684\u6b21\u6570\uff0c\u65b9\u4fbf\u540e\u9762\u7684\u5220\u9664\u64cd\u4f5c\u3002\n\n\u5982\u679c\u5b8c\u5168\u63d2\u5165\u4e86\uff0c\u90a3\u4e48\u5c31\u5728\u6700\u540e\u7684\u8282\u70b9\u6807\u8bb0\u4e00\u4e0b\u503c\uff0c\u907f\u514d\u53cd\u590d\u67e5\u627e\u3002\n\n```\nvoid insert(int x){\n\tint u=1;\n\tfor(int i=M;i>=0;i--){\n\t\tint v=x>>i&1ll;\n\t\tif(!ch[u][v])ch[u][v]=++cnt;\n\t\tu=ch[u][v];\t\n\t\tnum[u]++;\n\t}\n\tval[u]=x;\n}\n```\n\n\u5220\u9664\u64cd\u4f5c\uff1a\n\n\u6309\u4f4d\u4f9d\u6b21\u5f80\u4e0b\u8d70\uff0c\u7136\u540e\u628a\u70b9\u7ecf\u8fc7\u7684\u6b21\u6570\u51cf\u53bb $1$ \u5373\u53ef\u3002\n```\nvoid del(int x){\n\tint u=1;\n\tfor(int i=M;i>=0;i--){\n\t\tint v=x>>i&1ll;\n\t\tu=ch[u][v];\t\n\t\tnum[u]--;\n\t}\n}\n```\n\n\u67e5\u8be2\u64cd\u4f5c\uff1a\n\n\u6309\u4f4d\u5411\u4e0b\u627e\uff0c\u5982\u679c\u80fd\u53d6\u53cd\u5c31\u53d6\u53cd\uff0c\u5426\u5219\u624d\u53d6\u6b63\u3002\n\n```\nint querymax(int x){\n\tint u=1;\n\tfor(int i=M;i>=0;i--){\n\t\tint v=x>>i&1ll;\n\t\tif(ch[u][v^1]&&num[ch[u][v^1]])u=ch[u][v^1];\n\t\telse u=ch[u][v];\n\t}\n\treturn x^val[u];\n}\n```\n\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define N 114514\n#define M 63\n#define int long long\nusing namespace std;\nint n;\nstruct trie{\n\tint ch[N*M][2],cnt=1,num[N*M],val[N*M];\n\tvoid insert(int x){\n\t\tint u=1;\n\t\tfor(int i=M;i>=0;i--){\n\t\t\tint v=x>>i&1ll;\n\t\t\tif(!ch[u][v])ch[u][v]=++cnt;\n\t\t\tu=ch[u][v];\t\n\t\t\tnum[u]++;\n\t\t}\n\t\tval[u]=x;\n\t}\n\tvoid del(int x){\n\t\tint u=1;\n\t\tfor(int i=M;i>=0;i--){\n\t\t\tint v=x>>i&1ll;\n\t\t\tu=ch[u][v];\t\n\t\t\tnum[u]--;\n\t\t}\n\t}\n\tint querymax(int x){\n\t\tint u=1;\n\t\tfor(int i=M;i>=0;i--){\n\t\t\tint v=x>>i&1ll;\n\t\t\tif(ch[u][v^1]&&num[ch[u][v^1]])u=ch[u][v^1];\n\t\t\telse u=ch[u][v];\n\t\t}\n\t\treturn x^val[u];\n\t}\n}st;\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tst.insert(0);\n\twhile(n--){\n\t\tchar s[12];\n\t\tint a;\n\t\tscanf(\"%s%lld\",s,&a);\n\t\tif(s[0]=='+')st.insert(a);\n\t\telse if(s[0]=='-')st.del(a);\n\t\telse printf(\"%lld\\n\",st.querymax(a));\n\t}\n\treturn 0;\n}\n\n\n\n```\n",
        "postTime": 1663153147,
        "uid": 285617,
        "name": "\u9ed1\u5f71\u6d1e\u4eba",
        "ccfLevel": 5,
        "title": "CF706D Vasiliy's Multiset \u9898\u89e3"
    },
    {
        "content": "# \u5e26\u5220 Trie \u6811\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF706D)\n\n\u9898\u89e3\u7ffb\u4e86\u4e00\u5708\uff0c\u6ca1\u770b\u5230\u9012\u5f52\u5b9e\u73b0 Trie \u7684\uff0c\u662f\u9012\u5f52\u4e0d\u914d\u4e86\u5417 qwq\uff1f\n\n~~\u6211\u624d\u4e0d\u4f1a\u544a\u8bc9\u4f60\u662f\u56e0\u4e3a\u6211\u4e0d\u4f1a\u7528\u8fed\u4ee3\u3002~~\n\n\u5176\u5b9e\u5bf9\u521d\u5b66\u8005\u6765\u8bf4\uff0c\u8fd8\u662f\u9012\u5f52\u6bd4\u8f83\u597d\u7406\u89e3\u3002\n\n\u5173\u4e8e\u63d2\u5165\u548c\u67e5\u8be2\uff0c\u6b64\u5904\u4e0d\u518d\u591a\u63d0\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u770b\u770b\u6211\u7684 [\u8fd9\u7bc7\u9898\u89e3](https://413020.blog.luogu.org/solution-cf282e)\uff0c\u4e00\u4e2a\u6bd4\u8f83\u6807\u65b0\u7acb\u5f02\u7684 01Trie \u5199\u6cd5\u3002\n\n\u867d\u7136\u67e5\u8be2\u64cd\u4f5c\u4e0d\u600e\u4e48\u4e00\u6837\uff0c\u4f46\u662f\u7f51\u4e0a\u7684 01Trie \u5927\u591a\u548c\u8fd9\u4e2a\u9898\u6240\u9700\u8981\u7684\u67e5\u8be2\u76f8\u540c\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\nvoid insert(int &i,int k,int dep)\n{\n\tif(i==0)i=++cnt;\n\tT[i].siz++;\n\tif(dep==31)return;\n\tinsert(T[i].ch[k&1],k>>1,dep+1);\n}\nint ask(int i,int k,int dep,int sum)\n{\n\tif(dep==31)return sum;\n\tif(!T[i].ch[(k&1)^1])return ask(T[i].ch[k&1],k>>1,dep+1,sum<<1);\n\telse return ask(T[i].ch[(k&1)^1],k>>1,dep+1,sum<<1|1);\n}\n```\n\n\u81f3\u4e8e\u5220\u9664\u64cd\u4f5c\uff0c\u901a\u8fc7\u89c2\u5bdf\u4e0a\u8ff0\u4ee3\u7801\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a `siz` \u8868\u793a\u4ee5\u5f53\u524d\u8282\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u4e2d\u5305\u542b\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u63d2\u5165\u4e00\u4e2a\u6570\u7684\u65f6\u5019\uff0c\u8def\u5f84\u4e0a\u7684\u8282\u70b9 `siz++`\u3002\n\n\u800c\u5220\u9664\u7684\u65f6\u5019\uff0c\u5176\u8def\u5f84\u4e0a\u7684\u8282\u70b9 `siz--`\uff0c\u90a3\u4e48\u56de\u6eaf\u65f6\uff0c\u5982\u679c\u5f53\u524d\u8282\u70b9\u7684 `siz` \u4e3a 0\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u6b64\u8282\u70b9\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u5c31\u662f\u8fd9\u6837\uff1a\n\n```cpp\nvoid remove(int &i,int k,int dep)\n{\n\tT[i].siz--;\n\tif(dep==31)\n\t{\n\t\tif(!T[i].siz)i=0;\n\t\treturn;\n\t}\n\tremove(T[i].ch[k&1],k>>1,dep+1);\n\tif(!T[i].siz)i=0;\n}\n```\n\n\u4e0d\u8fc7\uff0c\u52a8\u6001\u5f00\u70b9\u7684\u8bdd\uff0c\u5220\u9664\u8282\u70b9\u4f1a\u5bfc\u81f4\u5f88\u591a\u7528\u4e0d\u5230\u7684\u7a7a\u8282\u70b9\u5360\u7528\u7a7a\u95f4\uff0c\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u5f04\u4e00\u4e2a\u5783\u573e\u573a\u3002\n\n\u5c31\u662f\u7528\u4e00\u4e2a\u6808\u5c06\u5220\u9664\u7684\u8282\u70b9\u50a8\u5b58\u4e0b\u6765\uff0c\u7136\u540e\u52a8\u6001\u5f00\u70b9\u7684\u65f6\u5019\u4ece\u6808\u91cc\u62ff\u70b9\uff0c\u6808\u7a7a\u5219\u65b0\u5efa\u8282\u70b9\u3002\n\n\u5176\u5b9e\uff0c\u5e26\u5220\u9664\u7684\u52a8\u6001\u5f00\u70b9\u6570\u636e\u7ed3\u6784\u90fd\u80fd\u6784\u5efa\u5783\u573e\u573a\uff08\u6bd4\u5982 Fhq_Treap\uff09\u3002\n\n\u53ea\u591a\u52a0\u4e00\u4e2a `push`\uff1a\n\n```cpp\nstack<int>bin;\nvoid remove(int &i,int k,int dep)\n{\n\tT[i].siz--;\n\tif(dep==31)\n\t{\n\t\tif(!T[i].siz)bin.push(i),i=0;\n\t\treturn;\n\t}\n\tremove(T[i].ch[k&1],k>>1,dep+1);\n\tif(!T[i].siz)bin.push(i),i=0;\n}\n```\n\n\u6700\u540e\uff0c\u9898\u5e72\u4e0a\u6709\u8fd9\u4e48\u4e00\u53e5\u8bdd\uff1a\n\n>\u5f00\u59cb\u65f6\u96c6\u5408\u4e2d\u53ea\u6709\u4e00\u4e2a\u6570 0\n\n\u6240\u4ee5\u8fd8\u8981\u5148\u63d2\u5165\u4e00\u4e2a 0\u3002\n\nAC Code:\n\n```cpp\nconst int inf=2e5+7;\nint n;\nchar op[2];\nstruct Tire01{\n\tint ch[2],siz;\n}T[inf*40];\nint cnt,rot;\nint chuli(int k)\n{//\u4ece\u9ad8\u4f4d\u63d2\u5165\uff0c\u6240\u4ee5\u8981\u5148\u5c06\u6574\u4e2a\u6570\u9ad8\u4f4e\u4f4d\u7ffb\u8f6c\n\tint s=0,dep=0;\n\twhile(k)s=s<<1|(k&1),k>>=1,dep++;\n\twhile(dep<31)s<<=1,dep++;\n\treturn s;\n}\nstack<int>bin;//\u5783\u573e\u573a\nvoid insert(int &i,int k,int dep)\n{\n\tif(i==0)\n\t{\n\t\tif(bin.empty())i=++cnt;\n\t\telse i=bin.top(),bin.pop();\n\t}\n\tT[i].siz++;\n\tif(dep==31)return;\n\tinsert(T[i].ch[k&1],k>>1,dep+1);\n}\nvoid remove(int &i,int k,int dep)\n{\n\tT[i].siz--;\n\tif(dep==31)\n\t{\n\t\tif(!T[i].siz)bin.push(i),i=0;\n\t\treturn;\n\t}\n\tremove(T[i].ch[k&1],k>>1,dep+1);\n\tif(!T[i].siz)bin.push(i),i=0;\n}\nint ask(int i,int k,int dep,int sum)\n{\n\tif(dep==31)return sum;\n\tif(!T[i].ch[(k&1)^1])return ask(T[i].ch[k&1],k>>1,dep+1,sum<<1);\n\telse return ask(T[i].ch[(k&1)^1],k>>1,dep+1,sum<<1|1);\n}\nint main()\n{\n\tn=re();insert(rot,0,0);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",op);\n\t\tint k=re();k=chuli(k);\n\t\tif(op[0]=='+')insert(rot,k,0);\n\t\tif(op[0]=='-')remove(rot,k,0);\n\t\tif(op[0]=='?')wr(ask(rot,k,0,0)),putchar('\\n');\n\t}\n\treturn 0;\n}\n```\n\n## \u5e7f\u544a\n\n\u672c\u4eba\u7684 [Trie \u4e00\u8f6e\u590d\u4e60](https://www.cnblogs.com/Zvelig1205/p/16703063.html)\u3002\n\n\u672c\u4eba\u7684 [Blog](https://www.cnblogs.com/Zvelig1205)\u3002",
        "postTime": 1663832758,
        "uid": 413020,
        "name": "Zvelig1205",
        "ccfLevel": 4,
        "title": "CF706D Vasiliy's Multiset \u9898\u89e3\u62a5\u544a"
    },
    {
        "content": "### \u8fd8\u6ca1\u4eba\u53d1\u9898\u89e3\u90a3\u672c\u849f\u84bb\u5c31\u6765\u53d1\u4e00\u6ce2\u5566~\uff08\u4e0d\u8fc7\u8fd9\u9898\u597d\u50cf\u4e5f\u6ca1\u51e0\u4e2a\u4eba\u505aQwQ\uff09\n\u8fd9\u9053\u9898\u5341\u5206~~\u6bd2\u7624~~ emmm\u3002\u3002\u3002\u9002\u5408**dalao\u4eec**\u7ec3\u624b\uff0c\u50cf\u6211\u8fd9\u6837\u7684\u849f\u84bb\u5c31\u662f\u81ea\u5bfb\u6b7b\u8def\u4e86orz\uff0c6\u4e2a\u5c0f\u65f6\u554a\u2026\u2026qwq\n\n\u9996\u5148**dalao\u4eec**\u770b\u5230~~\u8fd9\u79cd\u7ecf\u5178\u7684~~\u9898\u76ee\uff0c\u5c31**\u4e00\u5b9a**\u80fd\u60f3\u5230\u5b57\u5178\u6811\u3002\n\u628a\u8bfb\u5165\u7684\u6570\u4e8c\u8fdb\u5236\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u7528l\u8868\u793a\u5b50\u7ed3\u70b9\u4e3a0\uff0cr\u8868\u793a\u5b50\u7ed3\u70b9\u4e3a1\uff0cul\u548cur\u5206\u522b\u8868\u793a\u8fd9\u4e2a\u7ed3\u70b9\u5305\u542b\u7684\uff08~~\u65e0\u6cd5\u7528\u8bed\u8a00\u63cf\u8ff0~~\uff09\u4e2a\u6570\u3002\n\n\u6700\u540e\u5728\u8ba1\u7b97\u7b54\u6848\u7684\u65f6\u5019\uff0c\u5c3d\u91cf\u8d70\u548c\u5f53\u524d\u7ed3\u70b9\u4e0d\u540c\u7684\u5b50\u7ed3\u70b9\uff0c\u4e5f\u5c31\u662f\u73b0\u5728\u662f1\uff0c\u5219\u5c3d\u91cf\u8d700\uff1b\u73b0\u5728\u662f0\uff0c\u5219\u5c3d\u91cf\u8d701\uff0cans=(ans<<1)+1\u3002\u5982\u679c\u4e0a\u8ff0\u5b50\u7ed3\u70b9\u6240\u542b\u4e2a\u6570==0\uff0c\u5219\u5fc5\u987b\u8d70\u548c\u5f53\u524d\u76f8\u540c\u7684\u5b50\u7ed3\u70b9\uff0c\u8fd9\u65f6ans\u4e0d\u5fc5+1\u3002\n\n\u8be6\u89c1\u4ee3\u7801(\u5185\u542b\u6ce8\u91ca)\uff1a\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<vector>\n#define ll long long\n#define INF 1<<30\nusing namespace std;\nconst int N=200000;\nint q,x,w,ans;\nll d[40]={1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824};//\u624b\u52a8\u62532\u7684\u65b9\u5e42\u8868\nstruct Node{\n    int t,l,r;\n    int ul,ur;\n};//\u7ed3\u6784\u4f53\nchar c;\nvector <Node> l;//\u5947\u602a\u7684vector\u5f0f\u5b58\u50a8\nint main(){\n    l.push_back((Node){0,0,0,0,0});\n    w=0;\n    for (int i=29;i>=0;i--){//\u6700\u6df1\u8fbe29\u5c42\n        l[w].ul=INF;\n        l[w].l=l.size();//\u5f00\u59cb\u65f6\u6ca1\u6709\u4e3a1\u7684\u5b50\u7ed3\u70b9\uff0c\u6240\u4ee5\u53ea\u9700\u5904\u7406\u4e3a0\u7684\u5b50\u7ed3\u70b9\u5373\u53ef\n        w=l[w].l;\n        l.push_back((Node){0,0,0,0,0});\n    }\n    l[w].t=INF;//\u4ee5\u4e0a\u4e3a\u521d\u59cb\u5316\n    scanf (\"%d\",&q);\n    while (q--){\n        scanf (\"\\n\");\n        scanf (\"%c%d\",&c,&x);\n        if (c=='+'){//\u65b0\u52a0\u5165\u4e00\u4e2a\u6570\n            w=0;\n            for (int i=29;i>=0;i--)\n                if (x>=d[i]){//\u8d70\u4e3a1\u7684\u5b50\u7ed3\u70b9\n                    x-=d[i];\n                    if (l[w].ur) l[w].ur++,w=l[w].r;//\u539f\u6765\u8fd9\u4e2a\u5b50\u7ed3\u70b9\u4fbf\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u628a\u4e2a\u6570+1\uff0cw\u7ee7\u7eed\u5f80\u4e0b\n                    else{\n                        l[w].ur=1;\n                        l[w].r=l.size();\n                        w=l[w].r;\n                        l.push_back((Node){0,0,0,0,0});//\u539f\u6765\u8fd9\u4e2a\u5b50\u7ed3\u70b9\u5e76\u4e0d\u5b58\u5728\uff0c\u5219\u65b0\u52a0\u5165\u8fdb\u53bb\n                    }\n                }\n                else{//\u8d70\u4e3a0\u7684\u5b50\u7ed3\u70b9\n                    if (l[w].ul) l[w].ul++,w=l[w].l;\n                    else{\n                        l[w].ul=1;\n                        l[w].l=l.size();\n                        w=l[w].l;\n                        l.push_back((Node){0,0,0,0,0});\n                    }//\u540c\u7406\uff0c\u8bdd\u4e0d\u591a\u8bf4\n                }\n            l[w].t++;//\u8fd9\u4e2a\u597d\u50cf\u4e5f\u6ca1\u4ec0\u4e48\u7528\uff0c\u52a0\u4e0a\u53bb\u4fdd\u6301\u961f\u5f62(huaji)\n        }\n        else if (c=='-'){//\u4ece\u6811\u4e2d\u53bb\u6389\u4e00\u4e2a\u6570\n            w=0;\n            for (int i=29;i>=0;i--){\n                if (x>=d[i]){\n                    x-=d[i];\n                    l[w].ur--;\n                    w=l[w].r;\n                }\n                else{\n                    l[w].ul--;\n                    w=l[w].l;\n                }//\u4e2a\u6570-1\uff0cw\u7ee7\u7eed\u5f80\u4e0b\n            }\n            l[w].t--;//\u4fdd\u6301\u961f\u5f62\u3002\u3002\u3002\n        }\n        else{//\u7ec8\u4e8e\u5230\u4e86\u8ba1\u7b97\u7b54\u6848\u7684\u65f6\u5019\u4e86\uff01\n            w=0;\n            ans=0;\n            for (int i=29;i>=0;i--){\n                if (x>=d[i]){\n                    x-=d[i];\n                    if (l[w].ul) ans=(ans<<1)+1,w=l[w].l;//\u5982\u679c\u73b0\u5728\u7684\u7ed3\u70b9\u4e3a1\uff0c\u5219\u5c3d\u91cf\u8d70\u4e0d\u540c\u7684\u7ed3\u70b9\uff0c\u4e5f\u5c31\u662f0(\u5982\u679c\u8fd9\u4e2a\u7ed3\u70b9\u4e0a\u662f\u7684\u4e2a\u6570>0\u7684\u8bdd)\n                    else if (l[w].ur) ans=(ans<<1),w=l[w].r;//\u8feb\u4e0d\u5f97\u5df2\u5fc5\u987b\u8d70\u76f8\u540c\u7ed3\u70b9\uff0c\u5219ans\u65e0\u987b+1\n                }\n                else{\n                    if (l[w].ur) ans=(ans<<1)+1,w=l[w].r;\n                    else if (l[w].ul) ans=(ans<<1),w=l[w].l;\n                }//\u540c\u7406\uff0c\u8bdd\u4e0d\u591a\u8bf4\n            }\n            printf (\"%d\\n\",ans);\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1533916775,
        "uid": 49841,
        "name": "\u5807\u58a8\u6d6e\u534e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF706D \u3010Vasiliy's Multiset\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF706D)\n\n**\u7b97\u6cd5\u5206\u6790\uff1aTrie \u6811**\n\n\u9898\u76ee\u4e2d\u552f\u4e00\u7684\u8fd0\u7b97\u662f\u6309\u4f4d\u5f02\u6216\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6309\u4f4d\u5f02\u6216\u7684\u672c\u8d28\u3002\u65e2\u7136\u662f\u4e00\u4f4d\u4e00\u4f4d\u5f02\u6216\uff0c\u90a3\u4e48\u6211\u4eec\u76f4\u63a5\u628a $x$ \u8f6c\u5316\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u4e0d\u5c31\u597d\u4e86\u5417\uff1f\n\n\u5728\u63d2\u5165\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5c06 $x$ \u8f6c\u5316\u4e3a\u4e00\u4e2a**32**\u4f4d\u4e8c\u8fdb\u5236\u6570\uff0c\u7136\u540e**\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d**\u63d2\u5165 Trie \u6811\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u6811\u4e0a\u6bcf\u4e2a\u8282\u70b9 $p$ \u8bb0\u5f55\u4e00\u4e2a $rec_p$ \u8868\u793a\u8fd9\u4e2a\u8282\u70b9\u88ab $rec_p$ \u4e2a\u6570\u5b57\u4f7f\u7528\u8fc7\u3002\n\n\u5728\u67e5\u627e\u65f6\uff0c\u4f18\u5148\u6cbf\u7740**\u76f8\u53cd\u7684\u8fb9**\u5411\u4e0b\u79fb\u52a8\u6307\u9488\uff0c\u5e76\u7d2f\u52a0\u7b54\u6848\u5373\u53ef\u3002\n\n\u5728\u5220\u9664\u65f6\uff0c\u5bf9\u6cbf\u9014\u8282\u70b9\u7684 $rec_p$ \u51cf1\u5373\u53ef\u3002\n\n---\n\n**\u6ce8\u610f**\n\n- \u6570\u5b57\u5fc5\u987b\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u63d2\u5165 Trie \u6811\uff0c\u5426\u5219\u4f1a\u5f15\u8d77\u51b2\u7a81\u3002\n\n- \u4e0e\u4e00\u822c Trie \u6811\u4e0d\u540c\u7684\u5730\u65b9\u662f\uff0c\u672c\u9898\u4e2d\u4e0d\u9700\u8981\u6253\u7ed3\u5c3e\u6807\u8bb0\uff08\u663e\u7136\u6bcf\u4e2a\u6570\u90fd\u662f32\u4f4d\uff09\uff0c\u4f46\u662f\u9700\u8981\u989d\u5916\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u8282\u70b9\u88ab\u51e0\u4e2a\u6570\u4f7f\u7528\u3002\n\n- \u6570\u7ec4\u8bb0\u5f97\u5f00\u5927\u4e00\u70b9\uff0c\u5426\u5219\u5bb9\u6613 RE\u3002\n\n---\n\n\u4e0b\u9762\u662f~~\u559c\u95fb\u4e50\u89c1\u7684~~\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define reg register\n#define F(i,a,b) for(reg int i=(a);i<=(b);i++)\nusing namespace std;\ninline char get_char(); \nconst int N=3e6+10;\nint T,n,cnt=1;\nint c[40],trie[N][3];\nint rec[N];\ninline void change(long long x) {\n\tmemset(c,0,sizeof(c));\n\tint ct=0;\n\twhile(x)c[++ct]=x&1,x>>=1;\n}\ninline int reply(){\n\tint p=1,s=0;\n\tfor(reg int i=33;i>=1;i--){\n\t\tint &k=c[i];\n\t\ts<<=1;\n\t\tif(!trie[p][k^1] or !rec[trie[p][k^1]])p=trie[p][k];\n\t\t//\u76f8\u53cd\u7684\u8fb9\u8d70\u4e0d\u901a \n\t\telse p=trie[p][k^1],s|=1;//\u8d70\u76f8\u53cd\u7684\u8fb9 \n\t}\n\treturn s;\n}\ninline void insert(){//\u63d2\u5165 \n\tint p=1;\n\tfor(reg int i=33;i>=1;i--){\n\t\tint &k=c[i];\n\t\tif(!trie[p][k])trie[p][k]=++cnt;\n\t\tp=trie[p][k],rec[p]++;//\u8bb0\u5f55\u8be5\u8282\u70b9\u88ab\u51e0\u4e2a\u6570\u7528\u8fc7 \n\t}\n}\ninline void _delete(){//\u5220\u9664 \n\tint p=1;\n\tfor(reg int i=33;i>=1;i--){\n\t\tint &k=c[i];\n\t\tp=trie[p][k];\n\t\trec[p]--;//\u51cf\u53bb\u8fd9\u4e2a\u6570\u7684\u8d21\u732e \n\t}\n}\nint main() {\n\tscanf(\"%d\",&n);\n\tinsert();//\u63d2\u5165\u5f00\u59cb\u65f6\u76840 \n\twhile(n--){\n\t\tstatic char c;\n\t\tstatic int x;\n\t\tc=get_char();\n\t\tscanf(\"%d\",&x);\n\t\tchange(x);//\u5c06x\u53d8\u6210\u4e8c\u8fdb\u5236\u6570 \n\t\tif(c=='?')printf(\"%d\\n\",reply());\n\t\telse if(c=='+')insert();\n\t\telse _delete();\n\t}\n\treturn 0;\n}\ninline char get_char(){//\u8bfb\u5165\u5b57\u7b26 \n\treg char c=getchar();\n\twhile(c!='+' and c!='-' and c!='?')c=getchar();\n\treturn c;\n} \n```\n\n[AC](https://www.luogu.com.cn/record/48796683)\n\n\u6b22\u8fce\u4ea4\u6d41\u8ba8\u8bba\uff0c\u8bf7\u70b9\u4e2a\u8d5e\u54e6~",
        "postTime": 1617266488,
        "uid": 415473,
        "name": "\u262f\u262f\u67ab\u262f\u262f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF706D \u3010Vasiliy's Multiset\u3011"
    },
    {
        "content": "### \u849f\u84bb\u7b2c\u96f6\u6b21\u53d1\u9898\u89e3\n\u56e0\u4e3a\u8981\u6c42\u6700\u5927\u7684\u5f02\u6216\u503c\uff0c\u6240\u4ee5\u9ad8\u4f4d\u66f4\u91cd\u8981\uff0c\u5c06\u6bcf\u4e2a\u52a0\u8fdb\u6765\u7684\u6570\u7528\u4e8c\u8fdb\u5236\u4ece\u9ad8\u4f4d\u5411\u4f4e\u4f4d\u5efatrie\uff0c\u6bcf\u6b21\u8be2\u95ee\u65f6\u6bcf\u4f4d\u90fd\u5c3d\u91cf\u53d6\u4e0d\u540c\u7684\u4e8c\u8fdb\u5236\u6570\u5c31\u53ef\u4ee5\u5f97\u5230\u6700\u5927\u5f02\u6216\u503c\u3002\u5176\u4ed6\u7ec6\u8282\u4ee3\u7801\u91cc\u6709\u6ce8\u91ca\u3002\n```cpp\n#include <cstdio>\n\nconst int maxi = 200000 * 32 + 7;\n\nint t[maxi][2];\nint sum[maxi], qwq[maxi];\nint sz = 1; //\u5982\u679c\u521d\u59cb\u62100\u4f1awa\u53ef\u4ee5\u81ea\u5df1\u611f\u6027\u7406\u89e3\u4e00\u4e0b\nint n;\n\ninline int read()\n{\n    int s = 0, r = 1;\n    char ch = getchar();\n    while (ch < '0' || ch > '9')\n        ch = getchar();\n    while (ch >= '0' && ch <= '9')\n    {\n        s = (s << 3) + (s << 1) + (ch ^ 48);\n        ch = getchar();\n    }\n    return s * r;\n}\n\nint main()\n{\n    n = read();\n    char op;\n    int num;\n    int tmp, p;\n    for (int i = 0; i <= n; ++i)\n    {\n        tmp = 1;\n        if (i)\n        {\n            scanf(\"\\n%c\", &op);\n            num = read();\n        }\n        else\n        {\n            //\u6839\u636e\u9898\u610f\u5148\u52a0\u4e00\u4e2a0\u8fdb\u53bb\n            op = '+';\n            num = 0;\n        }\n        if (op == '+')\n        {\n            for (int j = 29; j >= 0; --j)\n            {\n                //\u5224\u65ad\u5f53\u524d\u4f4d\u662f0\u8fd8\u662f1\n                p = 0;\n                if ((1 << j) & num)\n                    p = 1;\n                if (! t[tmp][p])\n                    t[tmp][p] = ++sz;\n                tmp = t[tmp][p];\n                ++sum[tmp];\n                //\u56e0\u4e3a\u53ef\u4ee5\u5220\u9664\u6240\u4ee5\u6709\u53ef\u80fd\u53ea\u6709\u8282\u70b9\u6ca1\u6709\u503c\u8bb0\u5f55\u524d\u7f00\n            }\n            qwq[tmp] = num; //\u8bb0\u5f55\u503c\n        }\n        if (op == '-')\n            for (int j = 29; j >= 0; --j)\n            {\n                p = 0;\n                if ((1 << j) & num)\n                    p = 1;\n                tmp = t[tmp][p];\n                --sum[tmp];\n            }\n        if (op == '?')\n        {\n            for (int j = 29; j >= 0; --j)\n            {\n                p = 0;\n                if ((1 << j) & num)\n                    p = 1;\n                if (sum[t[tmp][p ^ 1]]) //\u5f02\u6216\u4e00\u4e0b\u5c31\u53ef\u4ee51\u53d80\uff0c0\u53d81\n                    tmp = t[tmp][p ^ 1];\n                else\n                    tmp = t[tmp][p];\n            }\n            printf(\"%d\\n\", qwq[tmp] ^ num);\n        }\n    }\n    return 0;\n}\n\n```",
        "postTime": 1534754100,
        "uid": 31321,
        "name": "ironmt",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF706D \u3010Vasiliy's Multiset\u3011"
    },
    {
        "content": "# Vasiliy's Multiset \u9898\u89e3\n\u4e00\u9053\u5b57\u5178\u6811\u7684\u6a21\u677f\u9898\u3002\n\n\u8981\u7ef4\u62a4\u4e00\u9897\u5b57\u5178\u6811\uff0c\u4f7f\u5f97\u5b83\u53ef\u4ee5\u63d2\u5165\u3001\u67e5\u8be2\u548c\u5220\u9664\u3002\n\n**\u6ce8\u610f\uff1a\u4e00\u5f00\u59cb\u96c6\u5408\u4e2d\u6709\u4e00\u4e2a\u5143\u7d20 $0$\uff0c\u4e0d\u8981\u5ffd\u89c6\uff01**\n\n\u666e\u901a\u7684\u5b57\u5178\u6811\u7684\u513f\u5b50\u662f\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u800c\u8fd9\u9053\u9898\u662f $0$ \u548c $1$\uff0c\u6709\u4e00\u4e2a\u597d\u5904\u662f\uff1a\u5728\u505a\u5f02\u6216\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5e0c\u671b\u9009\u7684\u6570\u7684\u6bcf\u4e00\u4f4d\u5c3d\u91cf\u548c\u5b83\u7684\u90a3\u4e00\u4f4d\u53d6\u53cd\u3002\u5f53\u7136\uff0c\u4f18\u5148\u6ee1\u8db3\u66f4\u9ad8\u4f4d\u3002\u5982\u679c\u76f8\u53cd\u7684\u6570\u6ca1\u6709\uff0c\u5219\u9009\u62e9\u53e6\u4e00\u6761\u8def\u3002\u63d2\u5165\u5f88\u7b80\u5355\uff0c\u5efa\u8bae\u770b\u6b64\u7c7b\u578b\u7684\u6a21\u677f\u9898\uff0c\u8be2\u95ee\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\ninline int qry(const int x){\n\tu=0,res=0;//\u521d\u59cb\u5316\n\tfor(int i=30;i>=0;i--){//\u679a\u4e3e\u6bcf\u4e00\u4f4d\n\t\tidx=(x&(1<<i))==0?1:0;//\u83b7\u53d6\u5f53\u524d\u7684\u6570\u503c\n\t\tif(!ch[u][idx])idx=!idx;//\u4e0d\u80fd\u6700\u4f18\uff0c\u9009\u53e6\u4e00\u4e2a\n\t\telse res+=(1<<i);//\u53ef\u4ee5\u6700\u4f18\uff0c\u7edf\u8ba1\u7b54\u6848\n\t\tu=ch[u][idx];\n\t}\n\treturn res;\n}\n```\n\n\u4f46\u662f\u96be\u70b9\u5728\u4e8e\u5220\u9664\u3002\u5728\u5b57\u5178\u6811\u4e2d\uff0c\u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\uff0c\u5f53\u5b83\u65e0\u6cd5\u5339\u914d\u63d2\u5165\u7684\u6570\u503c\u65f6\uff0c\u4f1a\u65b0\u5f00\u4e00\u4e2a\u70b9\uff0c\u518d\u63d2\u5165\u540e\u9762\u7684\u3002\u6211\u4eec\u53ea\u9700\u8981\u5c06\u8282\u70b9\u548c\u4e0b\u9762\u7684\u8282\u70b9\u65ad\u5f00\u8fde\u63a5\uff0c\u90a3\u4e48\u90a3\u4e2a\u8282\u70b9\u53ca\u5176\u513f\u5b50\u8282\u70b9\u5c31\u4e0d\u53ef\u80fd\u88ab\u8bbf\u95ee\u5230\uff0c\u5b9e\u73b0\u4e86\u5220\u9664\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\ninline void era(const int x){\n\tu=0;\n\tfor(int i=30;i>=0;i--){\n\t\tidx=(x&(1<<i))==0?0:1,t=u;//\u83b7\u53d6\u8282\u70b9\u7684\u65b9\u5411\n\t\tu=ch[u][idx],tag[u]--;//\u51cf\u5c11\u6570\u91cf\n\t\tif(tag[u]==0){ch[t][idx]=0;return;}//\u8fd9\u4e0b\u9762\u53ea\u6709\u8fd9\u4e00\u4e2a\u5143\u7d20\u7684\u8d21\u732e\u4e86\uff0c\u5168\u90e8\u5220\u4e86\n\t}\n}\n```\n\n\u6700\u540e\uff0c\u63d0\u4f9b\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;const int N=2e5+2;char k;\nint Q,x,ch[N*30][3],t,u,idx,res,cnt,tag[N*30];\ninline void ins(const int x){\n\tu=0;\n\tfor(int i=30;i>=0;i--){\n\t\tidx=(x&(1<<i))==0?0:1;\n\t\tif(!ch[u][idx])ch[u][idx]=++cnt;\n\t\tu=ch[u][idx],tag[u]++;\n\t}\n}\ninline void era(const int x){\n\tu=0;\n\tfor(int i=30;i>=0;i--){\n\t\tidx=(x&(1<<i))==0?0:1,t=u;\n\t\tu=ch[u][idx],tag[u]--;\n\t\tif(tag[u]==0){ch[t][idx]=0;return;}\n\t}\n}\ninline int qry(const int x){\n\tu=0,res=0;\n\tfor(int i=30;i>=0;i--){\n\t\tidx=(x&(1<<i))==0?1:0;\n\t\tif(!ch[u][idx])idx=!idx;\n\t\telse res+=(1<<i);\n\t\tu=ch[u][idx];\n\t}\n\treturn res;\n}\nint main(){\n\tscanf(\"%d\",&Q),ins(0);\n\twhile(Q--){\n\t\tscanf(\" %c%d\",&k,&x);\n\t\tif(k=='+')ins(x);\n\t\telse if(k=='-')era(x);\n\t\telse printf(\"%d\\n\",qry(x));\n\t}\n\treturn 0;\n}\n```\n\n\u611f\u8c22\u60a8\u7684\u89c2\u770b\uff01",
        "postTime": 1669442281,
        "uid": 367359,
        "name": "Neil_Qian",
        "ccfLevel": 6,
        "title": "Vasiliy's Multiset \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u6709 $q$ \u6b21\u64cd\u4f5c\u548c\u4e00\u4e2a\u96c6\u5408 $A$\uff0c\u5f00\u59cb\u65f6\u96c6\u5408\u4e2d\u53ea\u6709\u4e00\u4e2a\u6570 $0$\uff0c\u4e0b\u9762\u6709\u4e09\u79cd\u7c7b\u578b\u7684\u64cd\u4f5c\uff1a\n\n* `+ x`\uff0c\u628a $x$ \u63d2\u5165\u96c6\u5408 $A$\u3002\n* `- x`\uff0c\u628a $x$ \u4ece\u96c6\u5408 $A$ \u4e2d\u5220\u53bb\uff0c\u4fdd\u8bc1 $x$ \u5df2\u5b58\u5728\u4e8e\u96c6\u5408 $A$ \u4e2d\u3002\n* `? x`\uff0c\u7ed9\u4e00\u4e2a\u6570 $x$ \u5728\u96c6\u5408 `A` \u4e2d\u627e\u4e00\u4e2a $y$ \u4f7f\u5f97 $x \\operatorname{xor} y$ \u6700\u5927\uff0c\u5e76\u6c42\u51fa\u8fd9\u4e2a\u503c\u3002\n\n\n\u5bf9\u4e8e $100\\%$ \u7684\u6570\u636e\uff0c$1\\leq q\\leq 200000,1\\leq x_i\\leq10^9$\u3002\n\n### \u89e3\u9898\u601d\u8def\n\n\u770b\u5230\u5f02\u6216\u548c\u4e00\u4e9b\u6dfb\u52a0\u5220\u9664\u64cd\u4f5c\uff0c\u9996\u5148\u53ef\u4ee5\u60f3\u5230\u662f `01 trie`\u3002\n\n\u5bf9\u4e8e\u8be2\u95ee\uff0c\u8981\u4f7f\u5f97\u5f02\u6216\u503c\u6700\u5927\uff0c\u53ef\u4ee5\u4e8c\u8fdb\u5236\u4f4d\u4ece\u5927\u5230\u5c0f\u8d2a\u5fc3\u9009\u4e0d\u540c\u7684\u3002\n\n\u53e6\u5916\uff0c\u7531\u4e8e $x$ \u662f\u5728\u7ebf\u7ed9\u51fa\u7684\uff0c\u4e14\u8981\u8f93\u51fa\u4e00\u4e2a\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u80fd\u7b80\u5355\u5730\u5224\u65ad\u3002\n\n\u8003\u8651\u5bf9\u6bcf\u4e00\u4e2a\u6570\u5728 `trie` \u4e0a\u5f04\u6807\u8bb0\uff0c\u5e76\u5728\u7ed3\u5c3e\u5904\u8bb0\u5f55\u8fd9\u4e2a\u6570\u7684\u4f4d\u7f6e\u3002\n\n\u6bcf\u6b21\u5220\u9664\u53ea\u9700\u8981\u5220\u6807\u8bb0\uff0c\u8df3\u7684\u65f6\u5019\u770b\u4e00\u4e0b\u6709\u6ca1\u6709\u6807\u8bb0\u5373\u53ef\u3002\n\n\u6ce8\u610f\u6570\u7ec4\u5927\u5c0f\u3002\n\n### CODE\n\n```cpp\n#include <bits/stdc++.h> \nusing namespace std;\n\nconst int _ = 200007;\n\n#define int long long\n\ninline int read()\n{\n\tint x = 0, f = 1;\n\tchar c = getchar();\n\twhile(c < '0' || c > '9')\n\t{\n\t\tif(c == '-') f = -1;\n\t\tc = getchar();\n\t}\n\twhile(c >= '0' && c <= '9')\n\t{\n\t\tx = x * 10 + c - '0';\n\t\tc = getchar();\n\t}\n\treturn x * f;\n}\n\nchar opt;\n\nint T, x, num[27 * _], val[27 * _];\n\nint cnt = 1, tr[27 * _][2];\n\nvoid Insert(int x)\n{\n\tint p = 1;\n\tfor(int i = 32; i >= 0; --i)\n\t{\n\t\tint v = x >> i & 1;\n\t\tif(!tr[p][v])\n\t\t\ttr[p][v] = ++cnt;\n\t\tp = tr[p][v];\n\t\tnum[p]++;\n\t}\n\tval[p] = x;\n}\n\nvoid Delete(int x)\n{\n\tint p = 1;\n\tfor(int i = 32; i >= 0; --i)\n\t{\n\t\tint v = x >> i & 1;\n\t\tp = tr[p][v];\n\t\tnum[p]--;\n\t}\n}\n\nint Query(int x)\n{\n\tint p = 1;\n\tfor(int i = 32; i >= 0; --i)\n\t{\n\t\tint v = x >> i & 1;\n\t\tif(tr[p][v ^ 1] && num[tr[p][v ^ 1]])\n\t\t\tp = tr[p][v ^ 1];\n\t\telse \n\t\t\tp = tr[p][v];\n\t}\n\treturn x ^ val[p];\n}\n\nsigned main()\n{\n\tT = read();\n\tInsert(0);\n\twhile(T--)\n\t{\n\t\tcin >> opt;\n\t\tx = read();\n\t\tif(opt == '+')\n\t\t\tInsert(x);\n\t\tif(opt == '-')\n\t\t\tDelete(x);\n\t\tif(opt == '?')\n\t\t\tprintf(\"%lld\\n\", Query(x));\n\t}\n\treturn 0;\n}\n```\n\n\n\n",
        "postTime": 1636111469,
        "uid": 257146,
        "name": "orz_z",
        "ccfLevel": 0,
        "title": "CF706D Vasiliy's Multiset"
    },
    {
        "content": "## Subject\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF706D)\n\n\u6700\u8fd1\u5b66\u4e86\u70b901Trie\u6811\uff0c\u6765\u5199\u4e00\u7bc7\u9898\u89e3\n\n## Analysis\n\u63d2\u5165\u548c\u67e5\u8be2\u64cd\u4f5c\u662f\u5f88\u6a21\u677f\u7684\uff0c\u67e5\u8be2\u7684\u539f\u7406\u5c31\u662f\u8d2a\u5fc3\uff0c\u6bcf\u6b21\u8d70\u4e0d\u4e00\u6837\u7684\uff0c\u8fd9\u6837\u5f02\u6216\u503c\u53ef\u4ee5\u6700\u5927\u3002\u5220\u9664\u4e5f\u53ea\u9700\u8981\u6bcf\u6b21\u628a\u8d21\u732e\u51cf\u6389\u5c31\u597d\u4e86\uff0c\u603b\u7684\u6765\u8bf4\u7b97\u662f\u4e00\u9053\u677f\u5b50\uff0c\u5f88\u9002\u5408\u62ff\u6765\u7ec3\u624b\n\n## Code\n```cpp\n#include<queue>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define M 200010\n#define Maxbit 32\n#define int long long\ninline int Readint(void){\n    int s=0,f=1;char c=getchar();\n    while(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n    while(isdigit(c)){s=s*10+c-48;c=getchar();}\n    return s*f;\n}\nchar opt;\nint T,x,num[M*Maxbit],val[M*Maxbit];\nint tree[M*Maxbit][2],cnt=1;\nvoid Insert(int x){\n\tint root=1;\n\tfor(int i=Maxbit;i>=0;i--){\n\t\tint idx=x>>i&1;\n\t\tif(!tree[root][idx])\n\t\t\ttree[root][idx]=++cnt;\n\t\troot=tree[root][idx];\n\t\tnum[root]++;\n\t}\n\tval[root]=x;\n\treturn;\n}\nvoid Delete(int x){\n\tint root=1;\n\tfor(int i=Maxbit;i>=0;i--){\n\t\tint idx=x>>i&1;\n\t\troot=tree[root][idx];\n\t\tnum[root]--;\n\t}\n\treturn;\n}\nint Query(int x){\n\tint root=1;\n\tfor(int i=Maxbit;i>=0;i--){\n\t\tint idx=x>>i&1;\n\t\tif(tree[root][idx^1]&&num[tree[root][idx^1]])\n\t\t\troot=tree[root][idx^1];\n\t\telse root=tree[root][idx];\n\t}\n\treturn x^val[root];\n}\nsigned main(void){\n\tT=Readint();\n\tInsert(0);\n\twhile(T--){\n\t\tcin>>opt;\n\t\tx=Readint();\n\t\tif(opt=='+')\n\t\t\tInsert(x);\n\t\tif(opt=='-')\n\t\t\tDelete(x);\n\t\tif(opt=='?')\n\t\t\tprintf(\"%lld\\n\",Query(x));\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1620654174,
        "uid": 246005,
        "name": "StupidSeven",
        "ccfLevel": 4,
        "title": "CF706D"
    }
]
[
    {
        "content": "\u9898\u76ee\u7b80\u8ff0\uff1a\u6c42\u4e00\u4e2a\u6709\u5411\u56fe\u6709\u591a\u5c11\u7ec4\u56db\u4e2a\u70b9$a,b,c,d$\uff0c\u5b58\u5728$a \\to b$,$a \\to d$,$b \\to c$\u548c$d \\to c$\u8fd94\u6761\u8fb9\uff0c\u5373\u6784\u6210\u4e0b\u56fe\u7684\u5f62\u72b6\uff1f  \n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF489D/8b5a60981c3e3bd62ad47b07d6098988071c0c74.png)  \n\u6211\u4eec\u53ef\u4ee5\u6362\u4e00\u79cd\u89d2\u5ea6\u8003\u8651\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u83f1\u5f62\uff0c\u6211\u4eec\u628a\u5b83\u60f3\u8c61\u6210$(a,c)$\u4e24\u70b9\u4e4b\u95f4\u6709\u4e24\u6761\u6070\u7ecf\u8fc7\u4e00\u4e2a\u70b9\u7684\u8def\u5f84\u3002\n\n\u90a3\u6211\u4eec\u53ef\u4ee5\u5148\u9884\u5904\u7406\u51fa\u6bcf\u4e24\u70b9\u4e4b\u95f4\u6070\u7ecf\u8fc7\u4e00\u4e2a\u70b9\u7684\u8def\u5f84\u7684\u6761\u6570\uff0c\u8fd9\u5f88\u5bb9\u6613\u529e\u5230\uff0c\u7136\u540e$a,c$\u4e24\u70b9\u95f4\u7684\u83f1\u5f62\u7684\u4e2a\u6570\u5c31\u662f\u4ece\u6240\u6709\u8def\u5f84\u4e2d\u9009\u51fa\u4e24\u6761\u7684\u65b9\u6848\u6570\uff0c\u5373$C_{cnt}^2$($cnt$\u5c31\u662f$a,c$\u4e24\u70b9\u4e4b\u95f4\u6070\u7ecf\u8fc7\u4e00\u4e2a\u70b9\u7684\u8def\u5f84\u7684\u6761\u6570)\uff0c\u4e24\u91cd\u5faa\u73af\u8ba1\u7b97\u5373\u53ef\u3002\n\n$C_a^2$\u53ef\u4ee5\u8868\u793a\u6210$\\dfrac {a(a-1)}2$\uff0c\u4ee3\u7801\u5c31\u662f`(a*(a-1))/2`\u3002\n\n\u4ee3\u7801\u5982\u4e0b  \n```cpp\n\n// Problem : CF489D Unbearable Controversy of Being\n// Contest : Luogu\n// URL : https://www.luogu.com.cn/problem/CF489D\n// Memory Limit : 250 MB\n// Time Limit : 1000 ms\n// Powered by CP Editor (https://github.com/cpeditor/cpeditor)\n\n#include <iostream>\n#include <vector>\nusing namespace std;\nvector< int > edges[ 3010 ]; //vector\u5b58\u56fe\nvoid add_edge( int u, int v )  //\u589e\u52a0\u4e00\u6761\u8fb9\u7684\u51fd\u6570\n{\n    edges[ u ].push_back( v );  //\u6ce8\u610f\u662f\u6709\u5411\u56fe\uff0c\u4e0d\u5efa\u53cd\u5411\u8fb9\n}\nint cnt[ 3010 ][ 3010 ];\nint main()\n{\n    int n, m;\n    cin >> n >> m;\n    for ( int i = 1; i <= m; i++ )\n    {\n        int u, v;\n        cin >> u >> v;\n        add_edge( u, v );\n    } // \u628a\u56fe\u8bfb\u8fdb\u6765\u5b58\u597d\n    for ( int i = 1; i <= n; i++ )\n    {\n        for ( auto j : edges[ i ] ) //\u679a\u4e3e\u6bcf\u4e00\u6761\u8fb9\n        {\n            for ( auto k : edges[ j ] ) //\u679a\u4e3e\u6bcf\u4e2a\u8fb9\u5230\u8fbe\u70b9\u7684\u6240\u6709\u51fa\u8fb9\n            {\n                if ( k != i ) //\u53ef\u80fd\u51fa\u73b0\u6b63\u597d\u6709\u5411\u56fe\u91cc\u4e24\u70b9\u4e4b\u95f4\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\u90fd\u6709\uff0c\u8fc7\u6ee4\u6389\n                {\n                    cnt[ i ][ k ]++;  //\u8fd9\u65f6\u5019i -> j -> k\u5c31\u662f\u4e00\u6761i\u548ck\u4e4b\u95f4\u6070\u7ecf\u8fc7j\u4e00\u4e2a\u8282\u70b9\u7684\u8def\u5f84\n                }\n            }\n        }\n    }\n    int ans = 0; //\u5f00\u59cb\u7edf\u8ba1\u7b54\u6848\n    for ( int i = 1; i <= n; i++ )\n    {\n        for ( int j = 1; j <= n; j++ ) // \u679a\u4e3e\u6bcf\u4e24\u4e2a\u70b9\n        {\n            ans += cnt[ i ][ j ] * ( cnt[ i ][ j ] - 1 ) / 2; //\u8ba1\u7b97\u4e24\u70b9\u95f4\u83f1\u5f62\u4e2a\u6570\n        }\n    }\n    cout << ans << endl;//\u8f93\u51fa\u7b54\u6848\n}\n```",
        "postTime": 1597920398,
        "uid": 122079,
        "name": "songhongyi",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF489D \u3010Unbearable Controversy of Being\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\r\n\r\n\u7ed9\u5b9a\u4e00\u5f20\u6709\u5411\u56fe\uff0c\u6c42\u95ee\u5b58\u5728\u51e0\u7ec4\u56db\u4e2a\u70b9\u6ee1\u8db3 $\\left( a,b\\right)$,$\\left( a,d\\right)$,$\\left( b,c\\right)$,$\\left( d,c\\right)$\uff0c\u8fbe\u5230\u5982\u56fe\u6240\u793a\u7684\u6548\u679c\u3002\r\n\r\n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF489D/8b5a60981c3e3bd62ad47b07d6098988071c0c74.png)\r\n\r\n\r\n\r\n## \u9898\u76ee\u5206\u6790\r\n\r\n\u5206\u6790\u9898\u76ee\uff0c\u53ef\u4ee5\u53d1\u73b0\u83f1\u5f62\u80fd\u5426\u6784\u6210\u548c $a$ \u80fd\u5426\u5230\u8fbe $c$ \u6709\u5173\uff0c\u800c\u83f1\u5f62\u7684\u6570\u76ee\u548c\u6709\u591a\u5c11\u6761\u7c7b\u4f3c $a \\to b \\to c$ \u6216\u8005 $a \\to d \\to c$ \u8fd9\u6837\u7684\u8def\u5f84\u6709\u5173\u3002\r\n\r\n\u6240\u4ee5\u9700\u8981\u5b8c\u6210 2 \u4e2a\u64cd\u4f5c\uff0c\u4e00\u4e2a\u662f\u5224\u65ad\u4e24\u70b9\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u95f4\u9694\u4e00\u4e2a\u70b9\u8fd9\u6837\u7684\u5173\u7cfb\uff0c\u53e6\u4e00\u4e2a\u662f\u8bb0\u5f55\u5b58\u5728\u8fd9\u6837\u5173\u7cfb\u7684\u4e24\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u6570\u76ee\u3002\r\n\r\n\u8bbe x \u4e3a\u4e24\u70b9\u95f4\u6ee1\u8db3\u5173\u7cfb\u7684\u8def\u5f84\u6570\u76ee\uff0c\u56e0\u4e3a\u662f\u4efb\u53d6 2 \u6761\u6784\u6210\u83f1\u5f62\uff0c\u6240\u4ee5\u8fd9 2 \u4e2a\u70b9\u505a\u7684\u8d21\u732e\u662f $C_{x}^{2}$\uff0c\u5373\u4e3a $\\dfrac{x\\left( x-1\\right) }{2}$\u3002\r\n\r\n\u6ce8\u610f\u5230 $n$ \u7279\u522b\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5f00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\u8bb0\u5f55\u4fe1\u606f\u3002\r\n\r\n## AC\u4ee3\u7801\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int N=1e6+6;\r\nconst int M=3e3+7;\r\nconst int IM=2147483647;\r\nconst long long LLM=9223372036854775807;\r\n\r\ninline int read()\r\n{\r\n\tint x=0,y=1;char c=getchar();\r\n\twhile(c<'0'||c>'9'){if(c=='-') y=-y;c=getchar();}\r\n\twhile(c>='0'&&c<='9'){x=x*10+(c^'0');c=getchar();}\r\n\treturn x*y;\r\n}\r\n\r\nint n,m,ans,mp[M][M];\r\nvector<int>vec[N];\r\n\r\nsigned main()\r\n{\r\n\tn=read(),m=read();\r\n\tfor(int i=1;i<=m;i++)\r\n\t{\r\n\t\tint u=read(),v=read();\r\n\t\tvec[u].push_back(v);\r\n\t}\r\n\tfor(int u=1;u<=n;u++)\r\n\t\tfor(int i=0;i<vec[u].size();i++)\r\n\t\t\tfor(int j=0;j<vec[vec[u][i]].size();j++)\r\n\t\t\t\tif(u!=vec[vec[u][i]][j]) mp[u][vec[vec[u][i]][j]]++;\r\n\tfor(int i=1;i<=n;i++)\r\n\t\tfor(int j=1;j<=n;j++)\r\n\t\t\tans+=mp[i][j]*(mp[i][j]-1)/2;\r\n\tprintf(\"%d\\n\",ans);\r\n\treturn 0;\r\n}\r\n\r\n```",
        "postTime": 1683292802,
        "uid": 699852,
        "name": "bzzltl",
        "ccfLevel": 0,
        "title": "Unbearable Controversy of Being\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u786e\u5b9e\u633a\u6c34\uff0c\u7528\u4e86 Floyd \u7684\u601d\u60f3\u3002\u6570\u636e\u8303\u56f4\u6709\u8bef\u3002\n## \u9898\u76ee\u5927\u610f\n\n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF489D/8b5a60981c3e3bd62ad47b07d6098988071c0c74.png)\n\n\u5728\u4e00\u4e2a\u6709\u5411\u56fe\u4e2d\uff0c\u6c42\u7c7b\u4f3c\u4e8e\u4e0a\u56fe\u7684\u83f1\u5f62\uff0c\u5373 $4$ \u4e2a\u70b9 $a,b,c,d$ \u540c\u65f6\u5b58\u5728 $(a,b),(a,d),(b,c),(d,c)$ \u56db\u6761\u8fb9\u7ec4\u6210\u7684\u83f1\u5f62\u7684\u4e2a\u6570\n\n$1 \\le n \\le 3000,1 \\le m \\le 30000$\u3002\n\n## \u5927\u4f53\u601d\u8def\n\u5bf9\u4e8e\u4e00\u4e2a\u6709\u5411\u65e0\u6743\u56fe $G$\uff0c\u6c42\u5982\u4e0a\u56fe\u6240\u793a\u7684\u83f1\u5f62\uff0c\u7b49\u4ef7\u4e8e\u6c42\u51fa $a,c$\uff0c$s.t.\\ a,c\\in[1,n]\\cap \\mathbb Z$ \u4e14 $dist(a\\to c)=dist(a\\to b)+dist(b\\to c)=1+1=2$\u3002\n\n\u5047\u8bbe\u8fd9\u6837\u7684\u8def\u5f84\u6761\u6570\u4e3a $k$ \u6761\uff0c\u5219\u4efb\u9009\u4e24\u6761\u5373\u53ef\u7ec4\u6210\u6ee1\u8db3\u8981\u6c42\u7684\u83f1\u5f62\uff0c\u56e0\u6b64\u7b54\u6848\u4e3a $\\dbinom k 2=\\dfrac{k(k-1)}2$\u3002\n\n\u56e0\u6b64\u95ee\u9898\u8f6c\u6362\u4e3a\u5982\u4f55\u6c42 $dist(a\\to c)=2$\u3002\u8003\u8651\u8fd9\u4e2a\u5f0f\u5b50\u4e2d\u51fa\u73b0 $dist(a\\to b)+dist(b\\to c)$\uff0c\u8054\u60f3\u5230 Floyd \u7b97\u6cd5\u3002\n\n\u56e0\u6b64\uff0c\u4ee4 $deg(u,v)$ \u8868\u793a $dist(u\\to v)=2$ \u7684\u6761\u6570\uff0c\u8ba1\u7b97\u65f6\u679a\u4e3e\u6240\u6709\u8282\u70b9 $x$\uff0c\u518d\u679a\u4e3e\u5176\u6240\u6709\u51fa\u70b9 $y$ \u4f5c\u4e3a\u4e2d\u8f6c\u70b9\uff0c\u5047\u8bbe $y$ \u7684\u51fa\u70b9\u4e3a $z$\uff0c\u5219 $x\\neq z$ \u65f6 $x\\to y\\to z$ \u4fbf\u662f\u4e00\u6761\u6ee1\u8db3\u8981\u6c42\u7684\u8def\u5f84\uff0c$deg(x,z)\\leftarrow deg(x,z)+1$\u3002\n\n```cpp\n\trep(u, 1, n) //\u679a\u4e3e\u8d77\u70b9\n\t\tfor(int i = head[u]; ~i; i = nxt[i]) {//\u904d\u5386\u6240\u6709\u51fa\u8fb9\n\t\t\tint v = ver[i];//\u679a\u4e3e\u4e2d\u8f6c\u70b9\n\t\t\tfor(int j = head[v]; ~j; j = nxt[j]) //\u518d\u904d\u5386\u5176\u51fa\u8fb9\n\t\t\t\tif(ver[j] != u) deg[u][ver[j]] ++;//\u8bb0\u5f55\u8def\u5f84\u6570\n\t\t}\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n^2 + tm)$\uff0c$t$ \u89c6\u56fe\u7684\u7684\u6784\u9020\u65b9\u5f0f\u800c\u5b9a\u3002\n\n## \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n#define rep(ii,aa,bb) for(re int ii = aa; ii <= bb; ii++)\n#define Rep(ii,aa,bb) for(re int ii = aa; ii >= bb; ii--)\ntypedef long long ll;\ntypedef unsigned long long ull;\nconst int maxn = 3e3 + 5, maxm = 1e5 + 5;\nnamespace IO_ReadWrite {\n\t#define re register\n\t#define gg (p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1<<21, stdin), p1 == p2) ? EOF :*p1++)\n\tchar buf[1<<21], *p1 = buf, *p2 = buf;\n\ttemplate <typename T>\n\tinline void read(T &x){\n\t\tx = 0; re T f=1; re char c = gg;\n\t\twhile(c > 57 || c < 48){if(c == '-') f = -1;c = gg;}\n\t\twhile(c >= 48 &&c <= 57){x = (x<<1) + (x<<3) + (c^48);c = gg;}\n\t\tx *= f;return;\n\t}\n\tinline void ReadChar(char &c){\n\t\tc = gg;\n\t\twhile(!isalpha(c)) c = gg;\n\t}\n\ttemplate <typename T>\n\tinline void write(T x){\n\t\tif(x < 0) putchar('-'), x = -x;\n\t\tif(x > 9) write(x/10);\n\t\tputchar('0' + x % 10);\n\t}\n\ttemplate <typename T>\n\tinline void writeln(T x){write(x); putchar('\\n');}\n}\nusing namespace IO_ReadWrite;\nint ver[maxm], nxt[maxm], head[maxn], tot;\ninline void add(int u, int v){\n\tver[++tot] = v; nxt[tot] = head[u]; head[u] = tot;\n}//\u94fe\u5f0f\u524d\u5411\u661f\nint n, m, deg[maxn][maxn];\nint main() {\n\tread(n); read(m);\n\tmemset(head, -1, sizeof head);\n\tmemset(nxt, -1, sizeof nxt);\n\trep(i, 1, m) {\n\t\tint u, v;\n\t\tread(u); read(v);\n\t\tadd(u, v);\n\t}\n\t\n\trep(u, 1, n) //\u679a\u4e3e\u8d77\u70b9\n\t\tfor(int i = head[u]; ~i; i = nxt[i]) {//\u904d\u5386\u6240\u6709\u51fa\u8fb9\n\t\t\tint v = ver[i];//\u679a\u4e3e\u4e2d\u8f6c\u70b9\n\t\t\tfor(int j = head[v]; ~j; j = nxt[j]) //\u518d\u904d\u5386\u5176\u51fa\u8fb9\n\t\t\t\tif(ver[j] != u) deg[u][ver[j]] ++;//\u8bb0\u5f55\u8def\u5f84\u6570\n\t\t}\n\t\n\tll ans = 0;\n\trep(i, 1, n)\n\t\trep(j, 1, n)//\u7edf\u8ba1\u7b54\u6848\n\t\t\tans += (deg[i][j] * (deg[i][j] - 1) >> 1);\n\twriteln(ans);\n\treturn 0;\n}\n```",
        "postTime": 1618563894,
        "uid": 279197,
        "name": "Mars_Dingdang",
        "ccfLevel": 6,
        "title": "CF489D"
    },
    {
        "content": "# \u5f88\u8822\u7684\u4e00\u9053\u9898\n\u66b4\u529b\u679a\u4e3e\u4e24\u4e2a\u7531\u4e24\u6761\u8fb9\u6784\u6210\u7684\u70b9\uff0c\u5269\u4e0b\u7684\u50cf\u5c0f\u5b66\u6570\u7ebf\u6bb5\u4e00\u6837\u7edf\u8ba1\u7b54\u6848\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<iostream>\n#include<cmath>\n#include<queue>\n#include<functional>\nusing namespace std;\nstruct zk\n{\n\tint u,v,next;\n}e[60001];\nint head[3001];\nint cnt=0;\nint n,m;\nvoid add(int  u,int v)\n{\n\te[cnt].u=u;\n\te[cnt].v=v;\n\te[cnt].next=head[u];\n\thead[u]=cnt++;\n}\nint vis[3001][3001];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tint a,b;\n\tmemset(head,-1,sizeof(head));\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d%d\",&a,&b);\n\t\tadd(a,b);\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=head[i];j!=-1;j=e[j].next)\n\t\t{\n\t\t\tint v=e[j].v;\n\t\t\tfor(int k=head[v];k!=-1;k=e[k].next)\n\t\t\t{\n\t\t\t\tif (e[k].v!=i)vis[i][e[k].v]++;\n\t\t\t}\n\t\t}\n\t}\n\tlong long ans=0;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=n;j++)\n\t{\n\t\tans+=vis[i][j]*(vis[i][j]-1)/2;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1523678312,
        "uid": 26801,
        "name": "durex_com",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF489D \u3010Unbearable Controversy of Being\u3011"
    }
]
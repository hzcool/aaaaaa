[
    {
        "content": "\u56fe\u8bba\u601d\u7ef4\u597d\u9898\uff0c\u503c\u5f97\u4e00\u505a\u3002[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/syzf2222/p/14045068.html)\n\n\u8003\u8651\u600e\u6837\u7684\u60c5\u51b5\u662f\u4e00\u5b9a\u4e0d\u5408\u6cd5\u7684\u3002\u7ed3\u8bba\uff1a\u56fe\u4e0d\u5408\u6cd5\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u5947\u73af\u3002\n\n\u5145\u5206\u6027\u8bc1\u660e\uff1a\uff081\uff09\u4e09\u89d2\u5f62\u4e0d\u5408\u6cd5\uff1b\uff082\uff09\u4efb\u610f\u7f29\u5947\u73af\u4e2d\u7684\u4e24\u4e2a\u70b9\u5c06\u4ea7\u751f\u4e00\u4e2a\u66f4\u5c0f\u7684\u5947\u73af\u3002\n\n\u5fc5\u8981\u6027\u8bc1\u660e\uff1a\u6ca1\u6709\u5947\u73af\u7684\u56fe\u4e3a\u4e8c\u5206\u56fe\uff0c\u800c\u4e8c\u5206\u56fe\u4e00\u5b9a\u53ef\u4ee5\u7f29\u6210\u94fe\uff08*\uff09\n\n\u56e0\u4e3a\u8fde\u63a5\u4e24\u6761\u94fe\u4f1a\u4ea7\u751f\u4e00\u6761\u957f\u5ea6\u4e3a\u4e24\u6761\u94fe\u7684\u548c\u7684\u4e00\u6761\u65b0\u94fe\uff0c\u6545\u8003\u8651\u5728\u6bcf\u4e2a\u4e8c\u5206\u8054\u901a\u5b50\u56fe\u4e2d\u627e\u51fa\u6700\u957f\u94fe\u5373\u53ef\u3002\n\n\u8003\u8651\u4ee5\u4e00\u4e2a\u70b9$x$\u4f5c\u4e3a\u94fe\u7684\u8d77\u70b9\uff0c\u5efa\u4e00\u68f5$bfs$\u6811\u3002\n\n\u7531\u4e8e\u662f\u4e8c\u5206\u56fe\uff0c$bfs$\u6811**\u540c\u4e00\u5c42\u8282\u70b9\u4e4b\u95f4\u6ca1\u6709\u8fde\u8fb9**\u3002\n\n\u7531\u4e8e\u662f$bfs$\u6811\uff0c**\u6bcf\u4e2a\u70b9\u7684\u8fde\u8fb9\u53ea\u80fd\u5728\u76f8\u90bb\u4e00\u5c42\u7684\u8303\u56f4\u5185\uff0c\u4e14\u5fc5\u5b9a\u548c\u4e0a\u4e00\u5c42\u8282\u70b9\u6709\u8fde\u8fb9**\u3002\n\n\u90a3\u4e48\u6211\u4eec\u628a\u540c\u4e00\u5c42\u8282\u70b9\u7f29\u5728\u4e00\u8d77\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u6761\u94fe\uff08\u8fd9\u4e5f\u8bc1\u660e\u4e86*\u7ed3\u8bba\uff09\u3002\n\n\u601d\u8003\u4e3a\u4f55\u6b64\u94fe\u4e3a\u6700\u957f\u94fe\u3002\u8003\u8651\u82e5\u7ed3\u8bba\u9519\u8bef\uff0c\u5219\u5fc5\u5b58\u5728\u5982\u4e0b\u56de\u73af\u7684\u7ed3\u6784\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lmufdkso.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5982\u56fe\u4e2d\u7684$1\\rightarrow 2\\rightarrow 4\\rightarrow 6\\rightarrow 8$\n\n\u4e3a\u4e86\u4fdd\u6301\u8fd9\u6761\u94fe\u7684\u7ed3\u6784\uff0c\u5219\u53ea\u80fd\u60f3\u529e\u6cd5\u901a\u8fc7\u7f29$1\\rightarrow 8$\u4e0a\u7684\u70b9\u65ad\u5f00$1\\rightarrow 8$\uff0c\u7136\u800c\u7f29\u70b9\u5e76\u4e0d\u5e72\u6270\u8fde\u901a\u6027\uff0c\u6545\u4e0d\u53ef\u80fd\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\Theta(n^2)$\uff0c\u7531\u4e8e$n\\leq 1000$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n\u53c2\u8003\u4e86[\u8fd9\u7bc7\u535a\u5ba2](https://blog.csdn.net/weixin_30793643/article/details/97027790)\uff0c\u4ed6\u5199\u7684\u5f88\u597d\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff0c\u4ec5\u4f9b\u53c2\u8003\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define inf 1e9\nconst int N=1005;\nconst int maxn=2e5+10;\nint n,m,dis[N],len[N],ans;\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+c-'0';c=getchar();}\n\treturn x*f;\n}\nint beg[N],nex[maxn],to[maxn],w[maxn],e;\ninline void add(int x,int y){\n\te++;nex[e]=beg[x];\n\tbeg[x]=e;to[e]=y;\n}\nint bel[N],col[N],scc,flag;\ninline void dfs(int x){\n\tbel[x]=scc;\n\tfor(int i=beg[x];i;i=nex[i]){\n\t\tint t=to[i];\n\t\tif(!bel[t])col[t]=1^col[x],dfs(t);\n\t\telse if(col[x]==col[t])flag=1;\n\t}\n}\nqueue<int>q;\ninline void bfs(int x){\n\tmemset(dis,-1,sizeof(dis));\n\tq.push(x);dis[x]=0;\n\twhile(!q.empty()){\n\t\tint x=q.front();\n\t\tq.pop();\n\t\tfor(int i=beg[x];i;i=nex[i]){\n\t\t\tint t=to[i];\n\t\t\tif(dis[t]==-1){\n\t\t\t\tdis[t]=dis[x]+1;\n\t\t\t\tq.push(t);\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tn=read(),m=read();\n\tint x,y;\n\tfor(int i=1;i<=m;i++){\n\t\tx=read(),y=read();\n\t\tadd(x,y),add(y,x);\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(!bel[i])scc++,dfs(i);\n\tif(flag)return puts(\"-1\"),0;\n\tfor(int i=1;i<=n;i++){\n\t\tbfs(i);\n\t\tfor(int j=1;j<=n;j++)\n\t\t\tlen[bel[j]]=max(len[bel[j]],dis[j]);\n\t}\n\tfor(int i=1;i<=scc;i++)\n\t\tans+=len[i];\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\u6df1\u6df1\u5730\u611f\u5230\u81ea\u5df1\u7684\u5f31\u5c0f\u3002",
        "postTime": 1606401614,
        "uid": 140876,
        "name": "syzf2222",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF542E \u3010Playing on Graph\u3011"
    },
    {
        "content": "\u5f88\u663e\u7136\u82e5\u539f\u56fe\u5b58\u5728\u5947\u73af\uff0c\u5219\u8f93\u51fa-1\uff0c\u53ef\u4ee5\u7528\u67d3\u8272\u5224\u5947\u73af\u3002\n\n\u6362\u800c\u8a00\u4e4b\uff0c\u53ea\u6709\u4e8c\u5206\u56fe\u6709\u89e3\u3002 \u63a5\u4e0b\u6765\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u6700\u7ec8\u7b54\u6848\u5c31\u662f\u6240\u6709\u8054\u901a\u5757\u76f4\u5f84\u4e4b\u548c\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ninline int read(){int x=0,f=1,ch=getchar(); while(ch<'0'||ch>'9'){if(ch=='-') f=-1; ch=getchar();} while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();} return x*f;}\ninline void write(int x){if (x<0) putchar('-'),x=-x; if (x>=10) write(x/10); putchar(x%10+'0');}\ninline void writeln(int x){write(x); puts(\"\");}\nconst int N=1005,M=100005;\nstruct edge{\n    int link,next;\n}e[M<<1];\nint n,m,tot,head[N];\ninline void add_edge(int u,int v){\n    e[++tot]=(edge){v,head[u]}; head[u]=tot;\n}\ninline void insert(int u,int v){\n    add_edge(u,v); add_edge(v,u);\n}\ninline void init(){\n    n=read(); m=read();\n    for (int i=1;i<=m;i++){\n        insert(read(),read());\n    }\n}\nint belong[N],cnt,col[N],flag;\nvoid dfs(int u){\n    belong[u]=cnt;\n    for (int i=head[u];i;i=e[i].next){\n        int v=e[i].link;\n        if (!belong[v]) col[v]=col[u]^1,dfs(v);\n            else if (col[u]==col[v]) flag=1;\n    }\t\n}\nint h,t,ans[N],sum,dis[N],q[N];\ninline void bfs(int S){\n    memset(dis,-1,sizeof dis);\n    h=t=0; dis[S]=0; q[++t]=S;\n    while (h<t){\n        int u=q[++h];\n        for (int i=head[u];i;i=e[i].next){\n            int v=e[i].link;\n            if (dis[v]==-1){\n                dis[v]=dis[u]+1;\n                q[++t]=v;\n            }\n        }\n    }\n}\ninline void solve(){\n    for (int i=1;i<=n;i++){\n        if (!belong[i]){\n            ++cnt; dfs(i);\n            if (flag) {\n                writeln(-1); return;\n            }\n        }\n    }\n    for (int i=1;i<=n;i++){\n        bfs(i);\n        for (int j=1;j<=n;j++){\n            ans[belong[i]]=max(ans[belong[i]],dis[j]);\n        }\n    }\n    for (int i=1;i<=cnt;i++) sum+=ans[i];\n    writeln(sum);\n}\nint main(){\n    init(); solve();\n    return 0;\n}\n```\n",
        "postTime": 1540295885,
        "uid": 34444,
        "name": "\u5927\u83dc\u9e21fks",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF542E \u3010Playing on Graph\u3011"
    }
]
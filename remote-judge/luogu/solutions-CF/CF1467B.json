[
    {
        "content": "\u6211\u4eec\u8003\u8651\u8d2a\u5fc3\u3002\n\n\u663e\u7136\u6539\u53d8\u67d0\u4e00\u4e2a\u70b9\u7684\u9ad8\u5ea6\u53ea\u4f1a\u5bf9\u5176\u5de6\u53f3\u548c\u81ea\u8eab\u662f\u5426\u662f\u5c71\u8c37\u6216\u5c71\u5cf0\u4ea7\u751f\u5f71\u54cd\u3002\n\n\u53c8\u56e0\u4e3a\u6539\u53d8\u5355\u70b9\u9ad8\u5ea6\u4e0e\u5de6\u8fb9\u6216\u53f3\u8fb9\u540c\u9ad8\uff0c\u4f1a\u4f7f\u8be5\u70b9\u548c\u540c\u9ad8\u70b9\u4e0d\u4e3a\u5c71\u8c37\u5c71\u5cf0\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\u4f7f\u5176\u4e0e\u5de6\u53f3\u540c\u9ad8\uff0c\u5e76\u7edf\u8ba1\u5bf9\u7b54\u6848\u7684\u5f71\u54cd\uff0c\u53d6\u4e2a $max$\u3002\n\n\u6211\u4eec\u8bbe\n\n$$f(i)=0(i\\in{1,n})$$\n\n$$f(i)=1(i\\in(1,n),a_{i}>a_{i-1},a_{i}>a_{i+1})$$\n\n$$f(i)=1(i\\in(1,n),a_{i}<a_{i-1},a_{i}<a_{i+1})$$\n\n$$x=f(i-1)+f(i)+f(i+1)$$\n\n$$y=f(i-1)+f(i)+f(i+1)$$\n\n$y$\u662f\u5728$a_{i}$\u503c\u6539\u53d8\u540e\u3002\n\n\u5219\u5bf9\u7b54\u6848\u7684\u5f71\u54cd\u4e3a $x-y$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint T,n,a[300010],finalans,ans;\ninline bool hill(int i){\n\treturn i>1&&i<n&&a[i]>a[i-1]&&a[i]>a[i+1];\n}\ninline bool valley(int i){\n    return i>1&&i<n&&a[i]<a[i-1]&&a[i]<a[i+1];\n}\ninline int work(int i,int j,int k){\n\tint res=0,cnt=0;\n\tres+=hill(i-1)||valley(i-1);\n\tres+=hill(i)||valley(i);\n\tres+=hill(i+1)||valley(i+1);\n\ta[i]=a[i+j];\n\tcnt+=hill(i-1)||valley(i-1);\n\tcnt+=hill(i)||valley(i);\n\tcnt+=hill(i+1)||valley(i+1);\n\ta[i]=k;\n\treturn res-cnt;\n}\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tfinalans=ans=0;\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n\t\tfor(int i=2;i<n;i++)finalans+=hill(i)||valley(i);\n\t\tfor(int i=2;i<n;i++)ans=max(ans,max(work(i,-1,a[i]),work(i,1,a[i])));\n\t\tprintf(\"%d\\n\",finalans-ans);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1616659704,
        "uid": 120010,
        "name": "CaiXY06",
        "ccfLevel": 6,
        "title": "solution-cf1467b"
    },
    {
        "content": "\u4e00\u4e2a\u975e\u5e38 naive \u7684\u65b9\u6cd5\u3002\n\n\u679a\u4e3e\u4fee\u6539\u7684\u70b9 $i$\uff0c\u90a3\u4e48\u663e\u7136 $a_i$ \u53ef\u80fd\u7684\u4fee\u6539\u7684\u53d6\u503c\u4e3a $a_{i-1},a_{i+1},\\max(a_{i-1},a_{i+1})+1,\\min(a_{i-1},a_{i+1})-1,\\max(a_{i-1},a_{i+1})-1$ \u3002\u663e\u7136\u5f53 $a_i$ \u53d6\u4efb\u610f\u503c\u7684\u65f6\u5019\u90fd\u4f1a\u4e0e\u4e0a\u8ff0\u65b9\u6cd5\u4e2d\u7684\u4e00\u79cd\u7b49\u4ef7\u3002\n\n\u7136\u540e\u66b4\u529b\u67e5\u8be2\u5c31\u597d\u4e86\u3002\n\ncode:\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nconst int M=3e5+10;\nint T,n,a[M],p[M];\n\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n\nbool cmp(int k)\n{\n\tif (k<=1||k>=n)return 0;\n\treturn (a[k]>a[k-1]&&a[k]>a[k+1])||(a[k]<a[k-1]&&a[k]<a[k+1]);\n}\n\nint work(int i)\n{\n\tint cnt1=abs(p[i-1])+abs(p[i])+abs(p[i+1]);\n\tint cnt2=0;\n\tif (cmp(i))cnt2++;\n\tif (cmp(i-1))cnt2++;\n\tif (cmp(i+1))cnt2++;\n\treturn cnt1-cnt2;\n}\n\nsigned main()\n{\n\tT=read();\n\twhile(T--)\n\t{\n\t\tn=read();int cnt=0;\n\t\tfor (int i=1;i<=n;i++)\n\t\t\ta[i]=read();\n\t\tfor (int i=2;i<n;i++)\n\t\t\tif (a[i]>a[i-1]&&a[i]>a[i+1])p[i]=1,cnt++;\n\t\t\telse if (a[i]<a[i-1]&&a[i]<a[i+1])p[i]=-1,cnt++;\n\t\tint maxn=0;\n\t\tfor (int i=1;i<=n;i++)\n\t\t{\n\t\t\tint k=a[i];\n\t\t\ta[i]=a[i-1];maxn=max(work(i),maxn);\n\t\t\ta[i]=a[i+1];maxn=max(work(i),maxn);\n\t\t\ta[i]=max(a[i-1],a[i+1])-1;maxn=max(work(i),maxn);\n\t\t\ta[i]=min(a[i-1],a[i+1])-1;maxn=max(work(i),maxn);\n\t\t\ta[i]=max(a[i-1],a[i+1])+1;maxn=max(work(i),maxn);\n\t\t\ta[i]=k;\n\t\t}\n\t\tcout<<max(0ll,cnt-maxn)<<endl;\n\t\tfor (int i=1;i<=n;i++)p[i]=0;\n\t}\n\treturn 0;\n}\n```\n\u591a\u6d4b\u5343\u4e07\u8981\u6e05\u7a7a\uff01\uff01\uff01",
        "postTime": 1611230289,
        "uid": 141179,
        "name": "pigstd",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1467B \u3010Hills And Valleys\u3011"
    },
    {
        "content": "\u8003\u8651\u4e00\u4e2a\u70b9\u7684\u4fee\u6539\uff0c\u53ea\u53ef\u80fd\u5bf9\u4ed6\u672c\u8eab\uff0c\u4ed6\u5de6\u8fb9\uff0c\u4ed6\u53f3\u8fb9\u8fd9\u4e09\u4e2a\u6570\u7684\u5cf0\u8c37\u60c5\u51b5\u6709\u5f71\u54cd\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u679a\u4e3e\u4fee\u6539\u7684\u6570\uff0c\u7136\u540e\u8003\u8651\u53d8\u5316\u91cf\u3002\n\n\u7ed3\u8bba\uff1a\u4e00\u4e2a\u6570\u53ea\u80fd\u4fee\u6539\u6210\u4ed6\u5de6\u9762\u6216\u53f3\u9762\u7684\u6570\u4e00\u5b9a\u4e0d\u52a3\u4e8e\u5176\u4ed6\u60c5\u51b5\u3002\n\n\u8bc1\u660e\uff1a\u4e00\u4e2a\u6570\u4fee\u6539\u540e\uff0c\u5982\u679c\u6bd4\u5de6\u53f3\u7684\u6570\u90fd\u5927\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4ed6\u672c\u8eab\uff0c\u4f1a\u662f\u5c71\u5cf0\uff0c\u5bf9\u4e8e\u4ed6\u5de6\u53f3\uff0c\u548c\u4ed6\u53d8\u6210\u548c\u5de6\u9762/\u53f3\u9762\u76f8\u7b49\u7684\u6570\uff0c\u6ca1\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u4e2a\u6570\u548c\u4ed6\u65c1\u8fb9\u7684\u4e00\u4e2a\u6570\u76f8\u7b49\uff0c\u90a3\u4e48\u4ed6\u5cf0\u8c37\u90fd\u4e0d\u662f\u3002\u6bd4\u5de6\u53f3\u7684\u6570\u90fd\u5c0f\u7684\u60c5\u51b5\u540c\u7406\u3002\n\n\u4e8e\u662f\u679a\u4e3e\u6bcf\u4e2a\u6570\u4fee\u6539\u6210\u5de6\u9762\u548c\u53f3\u9762\u7684\u6570\u7684\u60c5\u51b5\u5c31\u884c\u4e86\u3002\n\n```cpp\n#include<iostream>\nusing namespace std;\nint a[300005],n;\nbool gu(int i)\n{\n\tif(i==1||i==n) return 0;\n\treturn (a[i-1]>a[i]&&a[i+1]>a[i]);\n}\nbool feng(int i)\n{\n\tif(i==1||i==n) return 0;\n\treturn (a[i-1]<a[i]&&a[i+1]<a[i]);\n}\nint main()\n{\n\tint T;\n\tcin>>T;\n\twhile(T--)\n\t{\n\t\tcin>>n;\n\t\tfor(int i=1;i<=n;i++)\n\t\tcin>>a[i];\n\t\tif(n==1)\n\t\t{\n\t\t\tcout<<0<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tint ans=0,delta=0;\n\t\tfor(int i=2;i<=n-1;i++)\n\t\t{\n\t\t\tif(gu(i)) ans++;\n\t\t\tif(feng(i)) ans++;\n\t\t}\n\t\tint now,now1;\n\t\tfor(int i=2;i<=n-1;i++)\n\t\t{\n\t\t\tnow=now1=0;\n\t\t\tif(gu(i)||feng(i)) now++;\n\t\t\tif(gu(i-1)||feng(i-1)) now++;\n\t\t\tif(gu(i+1)||feng(i+1)) now++;\n\t\t\tint t=a[i];\n\t\t\ta[i]=a[i-1];\n\t\t\tif(gu(i)||feng(i)) now1++;\n\t\t\tif(gu(i-1)||feng(i-1)) now1++;\n\t\t\tif(gu(i+1)||feng(i+1)) now1++;\n\t\t\tdelta=max(delta,now-now1);\n\t\t\tnow1=0;\n\t\t\ta[i]=a[i+1];\n\t\t\tif(gu(i)||feng(i)) now1++;\n\t\t\tif(gu(i-1)||feng(i-1)) now1++;\n\t\t\tif(gu(i+1)||feng(i+1)) now1++;\n\t\t\tdelta=max(delta,now-now1);\n\t\t\ta[i]=t;\n\t\t}\n\t\tcout<<max(ans-delta,0)<<endl;\n\t}\n \treturn 0;\n}\n\n\n```\n",
        "postTime": 1610238131,
        "uid": 196899,
        "name": "lndjy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1467B \u3010Hills And Valleys\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1467B)\n\n\u8fd9 sb \u9898\u6211\u8c03\u4e86\u4e00\u5929\u2026\u2026\n\n\u6ce8\u610f\u5230\u6211\u4eec\u5e76\u4e0d\u5173\u5fc3\u4e00\u4e2a\u70b9\u7a76\u7adf\u662f\u5c71\u5cf0\u8fd8\u662f\u5c71\u8c37\uff0c\u4e8e\u662f\u76f4\u63a5\u5904\u7406\u4e00\u904d\u6253\u6807\u8bb0\u3002\n\n\u8003\u8651\u66b4\u529b\u679a\u4e3e\u4fee\u6539\u70b9\u3002\u5bf9\u4e8e\u8981\u4fee\u6539\u7684\u70b9 $a_i$\uff0c\u663e\u7136\u4fee\u6539\u4e4b\u540e\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\uff1a $a_i=a_{i+1}$ \u6216 $a_i=a_{i-1}$\u3002\n\n\u4e8e\u662f\u76f4\u63a5\u679a\u4e3e\u8981\u4fee\u6539\u7684 $a_i$ \u5373\u53ef\uff0c\u5206\u522b\u4ee4 $a_i=a_{i+1}$ \u548c $a_i=a_{i-1}$\uff0c\u770b\u770b\u7b54\u6848\u603b\u6570\u51cf\u5c0f\u4e86\u591a\u5c11\u3002\n\n\u5de8\u5927\u5751\u70b9\uff1a\u6ce8\u610f\u5224\u65ad\u7684\u65f6\u5019\u6570\u7ec4\u4e0d\u8981\u8d8a\u754c\uff01\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(\\sum n)$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define back return\n#define ri register int\n#define ull unsigned ll\nusing namespace std;\nll read()\n{\n    ll x=0,f=1;\n\tchar ch=getchar();\n    while(ch<'0'||ch>'9')\n    {\n      \tif(ch=='-')\n      \t\tf=-1;\n      \tch=getchar();\n    }\n    while(ch>='0'&&ch<='9')\n    {\n      \tx=x*10+ch-'0';\n      \tch=getchar();\n    }\n    back x*f;\n}\nint t,n,a[300005];\nbool flag[300005];\nint main()\n{\n\tt=read();\n\twhile(t--)\n\t{\n\t\tint sum=0,ans=0;\n\t\tmemset(flag,0,sizeof(flag));\n\t\tn=read();\n\t\tfor(ri i=1;i<=n;i++)\n\t\t\ta[i]=read();\n\t\tfor(ri i=2;i<=n-1;i++)\n\t\t\tif((a[i]>a[i+1]&&a[i]>a[i-1])||(a[i]<a[i+1]&&a[i]<a[i-1]))\n\t\t\t\tflag[i]=1,sum++;\n\t\tans=sum; \n\t\tfor(ri i=2;i<=n-1;i++)\n\t\t{\n\t\t\tint lsbl=a[i];\n\t\t\tint now=0,now1=0;\n\t\t\tint tot=flag[i-1]+flag[i]+flag[i+1];\n\t\t\tif(!tot)\n\t\t\t\tcontinue;\n\t\t\ta[i]=a[i-1];\n\t\t\tif(i<n-1&&((a[i+1]<a[i+2]&&a[i+1]<a[i])||(a[i+1]>a[i+2]&&a[i+1]>a[i])))\n\t\t\t\tnow++;\n\t\t\ta[i]=a[i+1];\n\t\t\tif(i>2&&((a[i-1]>a[i]&&a[i-1]>a[i-2])||(a[i-1]<a[i]&&a[i-1]<a[i-2])))\n\t\t\t\tnow1++;\t\n\t\t\ttot-=min(now,now1);\n\t\t\tans=min(ans,sum-tot);\n\t\t\ta[i]=lsbl;\n\t\t}\n\t\tcout<<ans<<\"\\n\";\n\t}\n\tback 0;\n}\n```\n",
        "postTime": 1634642328,
        "uid": 93266,
        "name": "\u65ad\u6e05\u79cb",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011CF1467B Hills And Valleys"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](http://codeforces.com/problemset/problem/1467/B)  \n\u89e3\u9898\u601d\u8def\uff1a  \n\u9898\u76ee\u4e2d\u8bf4\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a\u6570\u5b57\u7684\u503c\uff0c\u90a3\u4e48\u663e\u7136\u6211\u4eec\u5c31\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e2a $i\\ \\left(2\\le i \\le n\\right)$ \uff0c\u90a3\u4e48\u6211\u4eec\u4fee\u6539\u7b2c $i$ \u4e2a\u6570\u5b57\u7684\u8bdd\uff0c\u663e\u7136\u6211\u4eec\u4fee\u6539\u4e4b\u540e\u53ea\u6709 $i-1,i,i+1$ \u4e09\u4e2a\u4f4d\u7f6e\u7684\u72b6\u6001\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u6211\u4eec\u53ea\u8981\u9884\u5904\u7406\u4e0d\u4fee\u6539\u7684\u7b54\u6848\u603b\u548c\u5c31\u53ef\u4ee5\u4e86\u3002  \n\u4fee\u6539\u7684\u65f6\u5019\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u8981\u60f3\u8ba9\u4fee\u6539\u4e4b\u540e\u7684\u7b54\u6848\u6700\u5c0f\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5c06\u8fd9\u4e2a\u6570\u5b57\u7684\u503c\u4fee\u6539\u6210\u524d\u4e00\u4e2a\u6570\u7684\u503c\u6216\u8005\u540e\u4e00\u4e2a\u6570\u5b57\u7684\u503c\uff0c\u4e5f\u53ef\u80fd\u662f\u4e24\u8005\u7684\u5e73\u5747\u6570\u3002   \n\u6700\u540e\u8bb0\u5f97\u6ce8\u610f\u4fee\u6539\u7b2c $1$ \u4e2a\u548c\u4fee\u6539\u7b2c $n$ \u4e2a\u7684\u60c5\u51b5\uff0c~~\u56e0\u4e3a\u8fd9\u4e2a\u6211WA\u4e863\u53d1~~\u3002  \nTips:\u8bb0\u5f97\u591a\u7ec4\u6570\u636e\u6e05\u7a7a\u6570\u7ec4\u3002  \n\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\n#include<cstring>\n#define maxn 300039\n#define min(a,b) ((a)<(b)?(a):(b))\nusing namespace std;\n//#define debug\ntypedef int Type;\ninline Type read(){\n\tType sum=0;\n\tint flag=0;\n\tchar c=getchar();\n\twhile((c<'0'||c>'9')&&c!='-') c=getchar();\n\tif(c=='-') c=getchar(),flag=1;\n\twhile('0'<=c&&c<='9'){\n\t\tsum=(sum<<1)+(sum<<3)+(c^48);\n\t\tc=getchar();\n\t}\n\tif(flag) return -sum;\n\treturn sum;\n}\nint T;\nint n,a[maxn];\nint cheg(int x){\n\tif(x==1||x==n) return 0;\n\treturn (a[(x)]<a[(x+1)]&&a[(x)]<a[(x-1)]);\n}\nint ches(int x){\n\tif(x==1||x==n) return 0;\n\treturn (a[(x)]>a[(x+1)]&&a[(x)]>a[(x-1)]);\n}\nvoid work(){\n\tmemset(a,0,sizeof(a));\n\tn=read();\n\tfor(int i=1;i<=n;i++)\n\t    a[i]=read();\n\tint sum,ans;\n\tsum=0;\n\tfor(int i=2;i<n;i++){\n\t    if(cheg(i)) sum++;\n\t\tif(ches(i)) sum++;\n\t}\n\tans=sum;\n\tint tmp,pre,end;\n\tfor(int i=2;i<n;i++){\n\t\ttmp=a[i];\n\t\tpre=cheg(i)+cheg(i-1)+cheg(i+1)+ches(i)+ches(i-1)+ches(i+1);\n\t\t\n\t\ta[i]=a[i-1];\n\t\tend=cheg(i)+cheg(i-1)+cheg(i+1)+ches(i)+ches(i-1)+ches(i+1);\n\t\tans=min(ans,sum-pre+end);\n\t\t\n\t\ta[i]=a[i+1];\n\t\tend=cheg(i)+cheg(i-1)+cheg(i+1)+ches(i)+ches(i-1)+ches(i+1);\n\t\tans=min(ans,sum-pre+end);\n\t\t\n\t\ta[i]=(a[i+1]+a[i-1])>>1;\n\t\tend=cheg(i)+cheg(i-1)+cheg(i+1)+ches(i)+ches(i-1)+ches(i+1);\n\t\tans=min(ans,sum-pre+end);\n\t\t\n\t\ta[i]=tmp;\n\t}\n\tpre=cheg(2)+ches(2);\n\ta[1]=a[2];\n\tend=cheg(2)+ches(2);\n\tans=min(ans,sum-pre+end);\n\t\n\tpre=cheg(n-1)+ches(n-1);\n\ta[n]=a[n-1];\n\tend=cheg(n-1)+ches(n-1);\n\tans=min(ans,sum-pre+end);\n\t\n\tprintf(\"%d\\n\",ans);\n\treturn;\n}\nint main(){\n    T=read();\n    while(T--) work();\n\treturn 0;\n}\n```",
        "postTime": 1610327707,
        "uid": 215042,
        "name": "jiangtaizhe001",
        "ccfLevel": 7,
        "title": "CF1467B Hills And Valleys \u9898\u89e3"
    },
    {
        "content": "\u8003\u8651\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u9996\u5148\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u6570\u548c\u6700\u540e\u4e00\u4e2a\u6570\u7684\u4fee\u6539\u65e0\u975e\u5c31\u662f\u5224\u65ad\u5b83\u672c\u8eab\u662f\u4e0d\u662f\u4f5c\u4e3a\u65c1\u8fb9\u4e00\u4e2a\u6570\u4e3a\u5cf0\u6216\u8c37\u7684\u6761\u4ef6\u3002\n\n\u5bf9\u4e8e\u5176\u4ed6\u5728\u4e2d\u95f4\u7684\u6570\uff0c\u4e0b\u9762\u5bf9\u4e8e$a[i]$\u800c\u8a00\uff0c$Mx=\\max(a[i+1],a[i-1]).Min=\\min(a[i+1],a[i-1]).$\n\n\u8003\u8651\u4fee\u6539$a[i]$\u6709\u51e0\u79cd\u53ef\u80fd\uff1a\u8981\u4e0d\u7136\u4e0e\u5de6\u53f3\u4e24\u8fb9\u4e00\u8005\u76f8\u7b49\uff0c\u8981\u4e0d\u7136\u5927\u4e8e\u6700\u5927\u503c\uff0c\u8981\u4e0d\u7136\u5c0f\u4e8e\u6700\u5c0f\u503c\uff0c\u8981\u4e0d\u7136\u5728\u5b83\u4eec\u4e2d\u95f4\u3002\n\n\u800c\u4e14\u5b83\u53ea\u5f71\u54cd\u5b83\u5468\u56f4\u7684\u4e24\u4e2a\u70b9\u3002\n\n\u4e8e\u662f\u4e94\u79cd\u60c5\u51b5\u5206\u7c7b\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint T,n,a[300010];\ninline int low(int i) {\n\tif(i==1||i==n)return 0;\n\tif(a[i]<a[i+1]&&a[i]<a[i-1])return 1;\n\treturn 0;\n}\ninline int high(int i) {\n\tif(i==1||i==n)return 0;\n\tif(a[i]>a[i+1]&&a[i]>a[i-1])return 1;\n\treturn 0;\n}\nint main() {\n\tscanf(\"%d\",&T);\n\twhile(T--) {\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1; i<=n; ++i)scanf(\"%d\",&a[i]);\n\t\tint ans=0;\n\t\tif(n==1||n==2){\n\t\t\tcout<<0<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=1; i<=n; ++i) {\n\t\t\tif(i==1||i==n)continue;\n\t\t\tif(a[i]>a[i-1]&&a[i]>a[i+1])ans++;\n\t\t\tif(a[i]<a[i-1]&&a[i]<a[i+1])ans++;\n\t\t}\n\t\tif(ans==0){\n\t\t\tcout<<0<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tint res=ans,G=ans;\n\t\tfor(int i=1; i<=n; ++i) {\n\t\t\tif(i==1) {\n\t\t\t\tif(a[1]<a[2]&&a[2]>a[3])res--;\n\t\t\t\tif(a[1]>a[2]&&a[2]<a[3])res--;\n\t\t\t\tans=min(ans,res);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i==n) {\n\t\t\t\tif(a[n-1]<a[n]&&a[n-1]<a[n-2])res--;\n\t\t\t\tif(a[n-1]>a[n]&&a[n-1]>a[n-2])res--;\n\t\t\t\tans=min(ans,res);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tint m=min(a[i+1],a[i-1]);\n\t\t\tint f=a[i];\n\t\t\tif(low(i+1)||high(i+1))res--;\n\t\t\tif(low(i-1)||high(i-1))res--;\n\t\t\tif(low(i)||high(i))res--;\n\t\t\ta[i]=m-1;\n\t\t\tres+=low(i)+high(i)+low(i-1)+high(i-1)+low(i+1)+high(i+1);\n\t\t\tans=min(ans,res);\n\n\t\t\tres=G;\n\t\t\ta[i]=f;\n\t\t\tif(low(i+1)||high(i+1))res--;\n\t\t\tif(low(i-1)||high(i-1))res--;\n\t\t\tif(low(i)||high(i))res--;\n\t\t\tm=max(a[i-1],a[i+1]);\n\t\t\ta[i]=m+1;\n\t\t\tres+=low(i)+high(i)+low(i-1)+high(i-1)+low(i+1)+high(i+1);\n\t\t\tans=min(ans,res);\n\t\t\t\n\t\t\tres=G;\n\t\t\ta[i]=f;\n\t\t\tif(low(i+1)||high(i+1))res--;\n\t\t\tif(low(i-1)||high(i-1))res--;\n\t\t\tif(low(i)||high(i))res--;\n\t\t\ta[i]=m-1;\n\t\t\tres+=low(i)+high(i)+low(i-1)+high(i-1)+low(i+1)+high(i+1);\n\t\t\tans=min(ans,res);\n\t\t\t\n\t\t\tres=G;\n\t\t\ta[i]=f;\n\t\t\tif(low(i+1)||high(i+1))res--;\n\t\t\tif(low(i-1)||high(i-1))res--;\n\t\t\tif(low(i)||high(i))res--;\n\t\t\ta[i]=m;\n\t\t\tres+=low(i)+high(i)+low(i-1)+high(i-1)+low(i+1)+high(i+1);\n\t\t\tans=min(ans,res);\n\t\t\t\n\t\t\tres=G;\n\t\t\ta[i]=f;\n\t\t\tif(low(i+1)||high(i+1))res--;\n\t\t\tif(low(i-1)||high(i-1))res--;\n\t\t\tif(low(i)||high(i))res--;\n\t\t\tm=min(a[i-1],a[i+1]);\n\t\t\ta[i]=m;\n\t\t\tres+=low(i)+high(i)+low(i-1)+high(i-1)+low(i+1)+high(i+1);\n\t\t\tans=min(ans,res);\n\t\t\ta[i]=f;\n\t\t\tres=G;\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1610274045,
        "uid": 128591,
        "name": "Refined_heart",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1467B \u3010Hills And Valleys\u3011"
    },
    {
        "content": "\u8fd9\u91cc\u6ce2\u5cf0\u548c\u6ce2\u8c37\u7684\u5b9a\u4e49\u662f\u4e25\u683c\u5927\u4e8e\u5c0f\u4e8e\uff0c\u6240\u4ee5\u7b49\u4e8e\u4e00\u8fb9\u7684\u6570\u662f\u6700\u597d\u7684\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6539\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u6539\u6210\u5de6\u8fb9\u7684\u8fd8\u662f\u53f3\u8fb9\u7684\uff0c\u7136\u540e\u56e0\u4e3a\u53ea\u4f1a\u5f71\u54cd\u65c1\u8fb9\u7684\u5143\u7d20\uff0c\u6240\u4ee5\u53ef\u4ee5\u7b97\u4e00\u4e0b\u591a\u4e86\u6216\u5c11\u4e86\u51e0\u4e2a\u3002\n\n\u7136\u540e\u522b\u5fd8\u4e86\u7b54\u6848\u4e0d\u80fd\u662f\u8d1f\u6570\u3002",
        "postTime": 1610239991,
        "uid": 107484,
        "name": "wmy_goes_to_thu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1467B \u3010Hills And Valleys\u3011"
    }
]
[
    {
        "content": "[$$\\Large\\texttt{My Blog}$$](https://hydingsy.github.io/articles/problem-Codeforces-786A-Berzerk/)\n\n---\n\n## Description\n\n> \u9898\u76ee\u94fe\u63a5\uff1a[Codeforces 786A](https://codeforces.com/contest/786/problem/A)\n\nRick \u548c Morty \u5728\u73a9\u4e00\u4e2a\u7248\u672c\u7684 Berzerk \u6e38\u620f\u3002\u8fd9\u4e2a\u6e38\u620f\u9700\u8981\u5f88\u5927\u7684\u7a7a\u95f4\uff0c\u6240\u4ee5\u4ed6\u4eec\u4f7f\u7528\u7535\u8111\u73a9\u8fd9\u4e2a\u6e38\u620f\u3002\n\n\u6e38\u620f\u4e2d\u6709 $n$ \u4e2a\u6807\u53f7\u4ece $1\\sim n$ \u7684\u7269\u4f53\u56f4\u6210\u4e00\u4e2a\u5706\u5708\uff08\u987a\u65f6\u9488\u6807\u53f7\uff09\uff0c \u7269\u4f53 $1$ \u8868\u793a\u9ed1\u6d1e\uff0c\u5176\u5b83\u7269\u4f53\u8868\u793a\u661f\u7403\uff0c\u4e14\u67d0\u4e00\u4e2a\u661f\u7403\u4e0a\u6709\u4e00\u4e2a\u602a\u7269\uff0cRick \u548c Morty \u4e0d\u77e5\u9053\u8fd9\u4e2a\u602a\u7269\u5728\u54ea\u4e2a\u661f\u7403\u4e0a\uff0c\u53ea\u77e5\u9053\u8fd9\u4e2a\u602a\u7269\u5728\u6e38\u620f\u5f00\u59cb\u65f6\u6ca1\u6709\u8fdb\u5165\u9ed1\u6d1e\u3002\u4f46\u5c31\u76ee\u524d\u800c\u8a00\uff0c\u4ed6\u4eec\u5e0c\u671b\u4e3a\u6bcf\u79cd\u53ef\u80fd\u7684\u60c5\u51b5\u505a\u597d\u51c6\u5907\u3002\n\nRick \u548c Monty \u6bcf\u4eba\u6709\u4e00\u4e2a\u6570\u7684\u96c6\u5408\uff0c\u96c6\u5408\u4e2d\u7684\u6570\u5728 $[1,n-1]$ \u4e4b\u95f4\u3002Rick \u7684\u96c6\u5408\u662f $s_1$\uff0c\u5176\u4e2d\u6709 $k_1$ \u4e2a\u6570\uff0cMorty \u7684\u96c6\u5408\u662f $s_2$\uff0c\u5176\u4e2d\u6709 $k_2$ \u4e2a\u6570\u3002 \u6e38\u620f\u5f00\u59cb\u540e\uff0c\u4e24\u4eba\u8f6e\u6d41\u64cd\u4f5c\u3002\u5728\u64cd\u4f5c\u4e2d\uff0c\u73a9\u5bb6\u5fc5\u987b\u4ece\u4ed6\u7684\u96c6\u5408\u4e2d\u9009\u51fa\u4e00\u4e2a\u6570 $x$\uff0c \u602a\u7269\u5c06\u4ece\u5f53\u524d\u4f4d\u7f6e\u987a\u65f6\u9488\u79fb\u52a8 $x$ \u4e2a\u4f4d\u7f6e\uff0c\u5982\u679c\u602a\u7269\u79fb\u52a8\u540e\u8fdb\u5165\u4e86\u9ed1\u6d1e\uff0c\u5219\u8be5\u73a9\u5bb6\u83b7\u80dc\u3002\n\n\u4f60\u7684\u4efb\u52a1\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u602a\u7269\u7684\u4f4d\u7f6e\u4ee5\u53ca\u73a9\u5bb6\u5148\u540e\u624b\u987a\u5e8f\uff0c\u5224\u65ad\u6e38\u620f\u5148\u624b\u83b7\u80dc\u3001\u540e\u624b\u83b7\u80dc\u3001\u65e0\u9650\u5faa\u73af\u3002\uff08\u6bcf\u4e2a\u73a9\u5bb6\u90fd\u91c7\u53d6\u6700\u4f18\u64cd\u4f5c\uff09\n\n\u6570\u636e\u8303\u56f4\uff1a$2\\le n\\le 7000$\uff0c$1\\le k_1,k_2\\le n-1$\uff0c$1\\le s_{i,j}\\le n-1$\n\n------\n\n## Solution\n\n**\u535a\u5f08\u8bba**\u6709\u4e00\u4e2a\u7ecf\u5178\u7684\u7ed3\u8bba\uff1a\n\n> **\u80fd\u8f6c\u79fb\u5230\u5fc5\u8d25\u6001\u7684\u72b6\u6001\u5c31\u662f\u5fc5\u80dc\u6001\uff0c\u53ea\u80fd\u8f6c\u79fb\u5230\u5fc5\u80dc\u6001\u7684\u72b6\u6001\u5c31\u662f\u5fc5\u8d25\u6001\u3002**\n\n\u73b0\u5728\u6211\u4eec\u77e5\u9053 $1$ \u662f**\u5fc5\u8d25\u6001**\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u8fc7 $\\text{DFS}$ \u53ef\u4ee5\u5224\u65ad\u6bcf\u4e2a\u70b9\u7684\u80dc\u8d1f\u60c5\u51b5\u3001\u662f\u5426\u6709\u89e3\u3002\n\n\u6211\u4eec\u8003\u8651**\u9006\u5411\u601d\u7ef4**\uff0c\u5bf9\u6bcf\u4e2a\u73a9\u5bb6\u5728 $1$ \u65f6\u7684\u5148\u624b\u72b6\u6001\u5411\u524d\u8f6c\u79fb\uff0c\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u5b9a\u4e49 $\\text{DFS}(v,now)$ \u8868\u793a\u73b0\u5728\u662f $now$ \u7684\u4f4d\u7f6e\uff0c\u73a9\u5bb6 $v$ \u5148\u624b\u3002\n2. \u679a\u4e3e\u4e0a\u4e00\u6b21\u73a9\u5bb6 $u$ \u7684\u64cd\u4f5c $x$\uff0c\u90a3\u4e48\u53ef\u4ee5\u4ece $now-x$ \u7684\u4f4d\u7f6e\u8f6c\u79fb\u5230 $now$ \u7684\u4f4d\u7f6e\uff08\u6ce8\u610f\u8fd9\u91cc\u7684 $now-x$ \u4e0d\u80fd\u7b49\u4e8e $1$\uff09\u3002\n3. \u5982\u679c $now$ \u7684\u4f4d\u7f6e\u662f**\u5fc5\u8d25\u6001**\uff0c\u90a3\u4e48\u6839\u636e\u7ed3\u8bba\uff1a**\u80fd\u8f6c\u79fb\u5230\u5fc5\u8d25\u6001\u7684\u72b6\u6001\u5c31\u662f\u5fc5\u80dc\u6001**\uff0c\u53ef\u4ee5\u5f97\u5230 $now-x$ \u7684\u4f4d\u7f6e\u662f\u5fc5\u80dc\u6001\u3002\n4. \u5982\u679c $now$ \u7684\u4f4d\u7f6e\u662f**\u5fc5\u80dc\u6001**\uff0c\u90a3\u4e48\u6839\u636e\u7ed3\u8bba\uff1a**\u53ea\u80fd\u8f6c\u79fb\u5230\u5fc5\u80dc\u6001\u7684\u72b6\u6001\u5c31\u662f\u5fc5\u8d25\u6001**\u3002\u6211\u4eec\u8bb0 $cnt_{u,i}$ \u8868\u793a\u5728 $i$ \u8fd9\u4e2a\u4f4d\u7f6e\u4e14 $u$ \u5148\u624b\u53ef\u4ee5\u8f6c\u79fb\u5230\u7684\u5fc5\u80dc\u6001\u6570\u91cf\u3002\u5f53 $cnt_{u,now-x}+1=k_u$ \u65f6\uff0c\u610f\u5473\u7740\u4ece $(u,now-x)$ \u8f6c\u79fb\u5230\u7684\u6240\u6709\u72b6\u6001\u90fd\u662f\u5fc5\u80dc\u6001\uff0c\u90a3\u4e48\u610f\u5473\u7740\u4ece $(u,now-x)$ \u8fd9\u4e2a\u72b6\u6001\u4e3a\u5fc5\u8d25\u6001\u3002\n5. \u7ee7\u7eed $\\text{DFS}(u,now-x)$ \u8fdb\u884c\u8f6c\u79fb\u5373\u53ef\u3002\n\n**\u65f6\u95f4\u590d\u6742\u5ea6**\uff1a$O(n^2)$\n\n------\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int N=7e3+5;\nint n,k[2],a[2][N],cnt[2][N];\nbool vis[2][N],win[2][N];\n\nvoid dfs(int v,int now) {\n\tif(vis[v][now]) return;\n\tvis[v][now]=1;\n\tint u=v^1;\n\tfor(int i=1;i<=k[u];++i) {\n\t\tint pre=(now-a[u][i]+n-1)%n+1;\n\t\tif(pre==1) continue;\n\t\tif(!win[v][now]) {\n\t\t\twin[u][pre]=1;\n\t\t\tdfs(u,pre);\n\t\t} else if(++cnt[u][pre]==k[u]) {\n\t\t\twin[u][pre]=0;\n\t\t\tdfs(u,pre);\n\t\t}\n\t}\n}\nint main() {\n\tscanf(\"%d\",&n);\n\tfor(int o=0;o<=1;++o) {\n\t\tscanf(\"%d\",&k[o]);\n\t\tfor(int i=1;i<=k[o];++i) scanf(\"%d\",&a[o][i]);\n\t}\n\tdfs(0,1),dfs(1,1);\n\tfor(int o=0;o<=1;++o) {\n\t\tfor(int i=2;i<=n;++i) {\n\t\t\tprintf(\"%s%c\",vis[o][i]?win[o][i]?\"Win\":\"Lose\":\"Loop\",\" \\n\"[i==n]);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1549594008,
        "uid": 49725,
        "name": "Siyuan",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF786A \u3010Berzerk\u3011"
    },
    {
        "content": "\u9996\u5148\u535a\u5f08\u8bba\u6709\u7ed3\u8bba\uff1a\n\n**\u80fd\u8f6c\u79fb\u5230\u5fc5\u8d25\u6001\u7684\u72b6\u6001\u4e3a\u5fc5\u80dc\u6001\uff0c\u53ea\u80fd\u8f6c\u79fb\u5230\u5fc5\u80dc\u6001\u7684\u72b6\u6001\u4e3a\u5fc5\u8d25\u6001**\u3002\n\n#### \u8bc1\u660e\uff1a\n\n\u5047\u8bbe\u73b0\u5728\u6709\u4e00\u4e2a\u5fc5\u8d25\u6001\u4e3a\u73a9\u5bb6 $B$ \u5148\u624b\uff0c\u5219\u4e0a\u4e00\u6b65\u4e3a\u73a9\u5bb6 $A$\u3002\u56e0\u4e3a\u5f53\u524d\u72b6\u6001\u4e3a\u5fc5\u8d25\u6001\uff0c\u73a9\u5bb6 $A$ \u5fc5\u7136\u4f1a\u8d70\u5230\u5f53\u524d\u72b6\u6001\uff0c\u5219\u73a9\u5bb6 $A$ \u5fc5\u80dc\u3002\n\n\u82e5\u5f53\u524d\u72b6\u6001\u4e3a\u73a9\u5bb6 $A$ \u5148\u624b\uff0c\u4e14\u53ea\u80fd\u8f6c\u79fb\u5230\u5fc5\u80dc\u6001\uff0c\u5219\u73a9\u5bb6 $B$ \u5fc5\u80dc\uff0c\u73a9\u5bb6 $A$ \u5fc5\u8d25\u3002\n\n#### \u8bc1\u6bd5\u3002\n\n\u7136\u540e\u56e0\u4e3a $1$ \u662f\u5fc5\u8d25\u6001\uff0c\u4e8e\u662f\u8003\u8651\u5012\u63a8\uff1a\n\n\u4f7f\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c```dfs(x, f)``` \u8868\u793a\u73b0\u5728\u5728 $x$ \u4f4d\u7f6e\uff0c\u73a9\u5bb6 $f$ \u5148\u624b\u3002\n\n\u679a\u4e3e\u4e0a\u4e00\u6b21\u64cd\u4f5c\u9009\u7684\u6570 $k$\uff0c\u53ef\u4ece $x-k$ \u8f6c\u79fb\u81f3 $x\\ (x-k\\neq 1)$\uff0c\u4f9d\u7167\u7ed3\u8bba\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nbool vis[2][7005], win[2][7005];\nint n, b[2], a[2][7005], cnt[2][7005];\nvoid dfs(bool f, int x) {\n    if(vis[f][x])\n        return;\n    vis[f][x] = 1, f = !f;\n    for(int i = 1; i <= b[f]; i++) {\n        int pre = (x - a[f][i] + n - 1) % n + 1;\n        if(pre ^ 1) {\n            if(!win[!f][x])\n                win[f][pre] = 1, dfs(f, pre);\n            else if(++cnt[f][pre] == b[f])\n                win[f][pre]= 0, dfs(f, pre);\n        }\n    }\n    return;\n}\nint main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cout.tie(0);\n    cin >> n;\n    for(int i = 0; i < 2; i++) {\n        cin >> b[i];\n        for(int j = 1; j <= b[i]; j++)\n            cin >> a[i][j];\n    }\n    dfs(0, 1), dfs(1, 1);\n    for(int i = 0; i < 2; i++) {\n        for(int j = 2; j <= n; j++)\n            cout << (vis[i][j] ? win[i][j] ? \"Win \" : \"Lose \" : \"Loop \");\n        cout << '\\n';\n    }\n    return 0;\n}\n```\n",
        "postTime": 1674981045,
        "uid": 374330,
        "name": "ACACACACACACACACACAC",
        "ccfLevel": 6,
        "title": "CF786A"
    },
    {
        "content": "# CF786A Berzerk\n\n[Luogu CF786A](https://www.luogu.com.cn/problem/CF786A)\n\n[Codeforces 786A](http://codeforces.com/problemset/problem/786/A)\n\n## Solution\n\n\u8003\u8651\u4ece\u7ec8\u6b62\u72b6\u6001\u5012\u63a8\u56de\u6765\u3002\u8bbe $f(i, 1/2)$ \u8868\u793a\u67d0\u4e00\u4e2a\u5c40\u9762\u7684\u80dc\u8d1f\u60c5\u51b5\uff0c$i$ \u8868\u793a\u5f53\u524d\u4f4d\u7f6e\uff0c$1/2$ \u8868\u793a\u5f53\u524d\u662f Alice \u8fd8\u662f Bob \u5148\u624b\uff08\u4e0b\u9762 $1$ \u5bf9\u5e94 Alice\uff0c\u7b80\u79f0 A\uff0c$2$ \u5bf9\u5e94 Bob\uff0c\u7b80\u79f0 B\uff09\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a\n\n$$\nf(i,1/2) = \n\\begin{cases}\n-1 &,\\text{\u5148\u624b\u5f53\u524d\u5fc5\u8d25} \\\\\n0 &, \\text{\u4e0d\u786e\u5b9a\uff0c\u5373\u5faa\u73af} \\\\\n1 &, \\text{\u5148\u624b\u5f53\u524d\u5fc5\u80dc}\n\\end{cases}\n$$\n\n\u4f1a\u53d1\u73b0\uff1a\n\n- \u5982\u679c\u5f53\u524d\u5c40\u9762\u662f\u5fc5\u8d25\u5c40\u9762\uff0c\u90a3\u53ef\u4ee5\u8f6c\u79fb\u5230\u5f53\u524d\u5c40\u9762\u7684\u4e0a\u4e00\u4e2a\u5c40\u9762\u4e00\u5b9a\u662f\u5fc5\u80dc\u5c40\u9762\uff08\u65e2\u7136\u53ef\u4ee5\u83b7\u80dc\uff0c\u90a3\u4e48\u5148\u624b\u5c31\u4e00\u5b9a\u4f1a\u9009\u62e9\u8d70\u5230\u8fd9\u4e2a\u5c40\u9762\uff09\u3002\n- \u5982\u679c\u5f53\u524d\u5c40\u9762\u662f\u5fc5\u80dc\u5c40\u9762\uff0c\u90a3\u53ef\u4ee5\u8f6c\u79fb\u5230\u5f53\u524d\u5c40\u9762\u7684\u4e0a\u4e00\u4e2a\u5c40\u9762\u4e0d\u4e00\u5b9a\u662f\u5fc5\u8d25\u5c40\u9762\uff0c\u53ea\u5f53\u4e0a\u4e00\u4e2a\u5c40\u9762\u6240\u6709\u53ef\u4ee5\u8f6c\u79fb\u5230\u7684\u5c40\u9762\u90fd\u662f\u5fc5\u80dc\u5c40\u9762\u65f6\u624d\u662f\u5fc5\u8d25\u5c40\u9762\u3002\n\n\u8fd9\u4e48\u8bf4\u53ef\u80fd\u4e0d\u597d\u7406\u89e3\uff0c\u753b\u4e00\u4e0b\u56fe\u4f1a\u66f4\u597d\u7406\u89e3\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z4d7muan.png)\n\n\u7528\u6837\u4f8b\u6765\u8bf4\uff0c\u4e0a\u9762\u4e00\u884c\u8868\u793a A \u5148\u624b\uff0c\u4e0b\u9762\u4e00\u884c\u8868\u793a B \u5148\u624b\uff0c\u53ef\u4ee5\u53d1\u73b0 $(1,1)$ \u4ee5\u53ca $(2,1)$ \u80af\u5b9a\u662f\u5fc5\u8d25\u5c40\u9762\uff0c\u90a3\u4e48\u53ef\u4ee5\u8f6c\u79fb\u5230\u5f53\u524d\u72b6\u6001\u7684 $(2,3),(2,4),(1,3),(1,4),(1,5)$ \u5c31\u4e00\u5b9a\u662f\u5fc5\u80dc\u5c40\u9762\u3002\u63a5\u7740\u53d1\u73b0 $(2,2)$ \u7684\u6240\u6709\u53ef\u80fd\u7684\u4e0b\u4e00\u79cd\u5c40\u9762\uff08$(1,4),(1,5)$\uff09\u90fd\u662f\u5fc5\u80dc\u5c40\u9762\uff0c\u6240\u4ee5 $(2,2)$ \u5c31\u662f\u5fc5\u8d25\u5c40\u9762\u3002\u8fd9\u65f6\u5019\u53d1\u73b0 $(1,2),(2,5)$ \u6ca1\u6cd5\u8ba1\u7b97\uff0c\u56e0\u6b64 $(1,2),(2,5)$ \u5bf9\u5e94\u7684\u5c31\u662f Loop\u3002\n\n\u5177\u4f53\u5230\u4ee3\u7801\u5b9e\u73b0\u4e0a\u53ef\u4ee5\u4f7f\u7528\u62d3\u6251\u6392\u5e8f\u3002\u5982\u679c\u5f53\u524d\u662f\u5fc5\u8d25\u5c40\u9762\u5219\u628a\u6240\u6709\u53ef\u80fd\u7684\u4e0a\u4e00\u4e2a\u5c40\u9762\u8bb0\u5f55\u4e3a\u5fc5\u80dc\u5e76\u52a0\u5165\u961f\u5217\uff0c\u5982\u679c\u662f\u5fc5\u80dc\u5219\u51cf\u5c11\u5165\u5ea6\uff0c\u5982\u679c\u5165\u5ea6\u4e3a $0$ \u5219\u8bf4\u660e\u6240\u6709\u53ef\u80fd\u5c40\u9762\u90fd\u662f\u5fc5\u80dc\u7684\uff0c\u6807\u8bb0\u4e3a\u5fc5\u8d25\u5e76\u52a0\u5165\u961f\u5217\u3002\n\n\u53e6\u5916\u6b64\u9898\u4e0d\u53ef\u4ee5\u66b4\u529b\u8fde\u8fb9\uff0c\u4e00\u662f\u52a0\u8fb9\u91cf\u5927\uff0c\u7ea6\u4e3a $2n^2$\uff0c\u7528 `vector` \u4f1a\u76f4\u63a5\u8d85\u65f6\uff0c\u5e76\u4e14\u8bbf\u95ee\u91cf\u4e5f\u5927\uff0c\u6240\u4ee5\u7528\u94fe\u5f0f\u524d\u5411\u661f\u7684\u5185\u5b58\u8bbf\u95ee\u4e0d\u8fde\u7eed\u4e5f\u4f1a\u8d85\u65f6\u3002\u800c\u4e14 $2n^2$ \u7684\u6570\u7ec4\u4f1a\u76f4\u63a5 MLE\u3002\u6240\u4ee5\u53ef\u4ee5\u4e0d\u66b4\u529b\u8fde\u8fb9\uff0c\u6bcf\u6b21\u8bbf\u95ee\u5230\u7684\u65f6\u5019\u518d\u8ba1\u7b97\u5373\u53ef\uff0c\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u3002\n\n### Code\n\n```cpp\n#include<bits/stdc++.h>\n\nusing namespace std;\n\nnamespace Hanx16qwq {\nconstexpr int _SIZE = 7e3;\nint n, k1, k2;\nint m1[_SIZE + 5], m2[_SIZE + 5];\nint deg[(_SIZE << 1) + 5];\n\nint Num(int x, int type) {return (type - 1) * n + x;} \n\nint GetPre(int x, int step) {return (x - step + n - 1) % n + 1;} \n\nint flag[(_SIZE << 1) + 5]; \n\nvoid Topo() {\n    queue<pair<int, int>> q;\n    q.emplace(Num(1, 1), -1);\n    q.emplace(Num(1, 2), -1);\n    flag[Num(1, 1)] = flag[Num(1, 2)] = -1;\n\n    while (!q.empty()) {\n        int cur = q.front().first, wol = q.front().second; q.pop();\n\n        if (cur <= n) { // \u7b2c\u4e00\u884c\n            for (int i = 1; i <= k2; i++) {\n                int twd = Num(GetPre(cur, m2[i]), 2);\n                --deg[twd];\n\n                if (flag[twd] != 0) continue;\n\n                if (wol == -1) flag[twd] = 1, q.emplace(twd, 1);\n                else if (!deg[twd]) flag[twd] = -1, q.emplace(twd, -1);\n            }\n        } else { // \u7b2c\u4e8c\u884c\n            for (int i = 1; i <= k1; i++) {\n                int twd = Num(GetPre(cur, m1[i]), 1);\n                --deg[twd];\n                \n                if (flag[twd] != 0) continue;\n\n                if (wol == -1) flag[twd] = 1, q.emplace(twd, 1);\n                else if (!deg[twd]) flag[twd] = -1, q.emplace(twd, -1);\n            }\n        }\n    }\n}\nvoid main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0); cout.tie(0);\n    cin >> n;\n    cin >> k1;\n\n    for (int i = 1; i <= k1; i++) cin >> m1[i];\n\n    cin >> k2;\n\n    for (int i = 1; i <= k2; i++) cin >> m2[i];\n\n    fill(deg + 1, deg + n + 1, k1); // \u7b2c\u4e00\u884c\u5165\u5ea6\u5168\u4e3a k1\n    fill(deg + n + 1, deg + (n << 1) + 1, k2); // \u7b2c\u4e8c\u884c\u5165\u5ea6\u5168\u4e3a k2\n    Topo();\n    \n    for (int i = 1; i <= 2; i++, cout << '\\n')\n        for (int j = 2; j <= n; j++)\n            switch (flag[Num(j, i)]) {\n                case -1 : cout << \"Lose\" << ' '; break;\n                case 0  : cout << \"Loop\" << ' '; break;\n                default : cout << \"Win\" << ' ';\n            }\n}\n\n}\nsigned main() {\n    Hanx16qwq::main();\n    return 0;\n}\n```",
        "postTime": 1668518706,
        "uid": 345225,
        "name": "Hanx16QwQ",
        "ccfLevel": 0,
        "title": "CF786A Berzerk"
    },
    {
        "content": "\u8fd9\u9898\u5176\u5b9e\u6709\u70b9\u50cf[\u8054\u5408\u7701\u9009 2023D2T1 \u8fc7\u6cb3\u5352](https://www.luogu.com.cn/problem/P9169)\uff0c\u90fd\u662f\u7ed9\u53ef\u4ee5\u63a5\u53d7\u7684\u6570\u91cf\u4e2a\u72b6\u6001\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u8f6c\u79fb\uff0c\u7136\u540e\u6709\u4e00\u4e9b\u5df2\u77e5\u7684\u5fc5\u8d25\u5fc5\u80dc\u6001\uff0c\u6c42\u6bcf\u4e2a\u72b6\u6001\u662f\u5fc5\u8d25\u6001\uff0c\u5fc5\u80dc\u6001\uff0c\u8fd8\u662f\u5faa\u73af\u6001\u3002\n\n\u6211\u4eec\u77e5\u9053\u5982\u679c\u4e00\u4e2a\u72b6\u6001\u662f\u53ef\u4ee5\u8f6c\u79fb\u5230\u5fc5\u80dc\u6001\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u5fc5\u80dc\u6001\uff0c\u53ea\u80fd\u8f6c\u79fb\u5230\u5fc5\u8d25\u6001\u5c31\u662f\u5fc5\u8d25\u6001\uff0c\u5426\u5219\u662f\u5faa\u73af\u6001\uff0c\u6240\u4ee5\u7167\u7740\u8fd9\u4e2a $\\text{bfs}$ \u5373\u53ef\uff0c\u542c\u8c37\u7fa4\u7684\u8bf4\u8fd9\u4e2a\u53eb $\\text{min-max}$ \u5bf9\u6297\u641c\u7d22\u3002\n\n\u5177\u4f53\u7684\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u72b6\u6001\u88ab\u5fc5\u80dc\u6001\u8bbf\u95ee\u5230\u90a3\u4e48\u76f4\u63a5\u8bbe\u4e3a\u5fc5\u80dc\u6001\u52a0\u5165\u961f\u5217\uff0c\u5982\u679c\u88ab\u5fc5\u8d25\u6001\u8bbf\u95ee\u5230\u90a3\u4e48\u8ba1\u6570\u5668\u81ea\u589e\uff0c\u5982\u679c\u8ba1\u6570\u5668\u7b49\u4e8e\u51fa\u5ea6\uff08\u53cd\u56fe\u4e0a\u7684\u5165\u5ea6\uff09\uff0c\u5c31\u8bbe\u4e3a\u5fc5\u8d25\u6001\u52a0\u5165\u961f\u5217\u3002\u64cd\u4f5c\u7ed3\u675f\u540e\u6ca1\u8bbe\u7f6e\u7684\u5c31\u662f\u5faa\u73af\u6001\u3002\n\nps\uff1a\u5fc5\u8d25\u5fc5\u80dc\u6001\u53d6\u51b3\u4e0e\u5f53\u524d\u7684\u5148\u624b\u662f\u8c01\u3002\n\n\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u4ee3\u7801\u4e0d\u653e\u4e86\u3002",
        "postTime": 1682043718,
        "uid": 239433,
        "name": "WZKQWQ",
        "ccfLevel": 7,
        "title": "CF786A\u3010Berzerk\u3011\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u9700\u8981\u660e\u786e\u7684\u662f\uff0c\u4e0e\u7ecf\u5178\u7684\u535a\u5f08\u8bba\u6a21\u578b $\\text{Nim}$ \u6e38\u620f\u3001$\\text{Wythoff}$ \u6e38\u620f\u4e0d\u540c\uff0c\u8fd9\u662f\u4e00\u9053 **\u975e\u516c\u5e73\u7ec4\u5408\u6e38\u620f\uff08$\\text{Partizan Game}$\uff09**\u3002\u4f46\u6839\u636e\u535a\u5f08\u8bba\u7684\u57fa\u672c\u77e5\u8bc6\uff0c\u4ee5\u4e0b\u51e0\u70b9\u4ecd\u7136\u6210\u7acb\uff1a\n\n- \u6bcf\u4e2a\u5c40\u52bf\u8981\u4e48\u662f\u5fc5\u80dc\u6001\uff08\u5bf9\u5e94\u9898\u76ee\u4e2d\u7684 $\\text{Win}$\uff09\uff0c\u8981\u4e48\u662f\u5fc5\u8d25\u6001\uff08\u5bf9\u5e94\u9898\u76ee\u4e2d\u7684 $\\text{Lose}$\uff09\uff0c\u8981\u4e48\u662f\u201c\u5faa\u73af\u6001\u201d\uff08\u5bf9\u5e94\u9898\u76ee\u4e2d\u7684 $\\text{Loop}$\uff0c\u6307\u65e2\u4e0d\u662f\u5fc5\u80dc\u6001\u4e5f\u4e0d\u662f\u5fc5\u8d25\u6001\u7684\u72b6\u6001\uff0c\u6e38\u620f\u4f1a\u4e00\u76f4\u8fdb\u884c\uff09\u3002\n- \u6ca1\u6709\u540e\u7ee7\u72b6\u6001\u7684\u72b6\u6001\u662f\u5fc5\u8d25\u6001\u3002\n- \u5982\u679c\u540e\u7ee7\u72b6\u6001\u5b58\u5728\u5fc5\u8d25\u6001\uff0c\u90a3\u4e48\u6b64\u72b6\u6001\u662f\u5fc5\u80dc\u6001\u3002\n- \u5982\u679c\u540e\u7ee7\u72b6\u6001\u4e0d\u5b58\u5728\u5fc5\u8d25\u6001\u4f46\u5b58\u5728\u5faa\u73af\u6001\uff0c\u90a3\u4e48\u6b64\u72b6\u6001\u662f\u5faa\u73af\u6001\u3002\n- \u5982\u679c\u540e\u7ee7\u72b6\u6001\u4e0d\u5b58\u5728\u5fc5\u8d25\u6001\u4e5f\u4e0d\u5b58\u5728\u5faa\u73af\u6001\uff08\u5168\u90fd\u662f\u5fc5\u80dc\u6001\uff09\uff0c\u90a3\u4e48\u6b64\u72b6\u6001\u662f\u5fc5\u8d25\u6001\u3002\n\n\u5177\u4f53\u5730\uff0c\u8bbe $f(i,j)$ \u8868\u793a\u7b2c $j$ \u4e2a\u4eba\u5728\u7b2c $i$ \u4e2a\u4f4d\u7f6e\u7684\u72b6\u6001\uff1a\n$$\nf(i,j)=\\begin{cases}0&\\text{\u5faa\u73af\u6001}\\\\1&\\text{\u5fc5\u80dc\u6001}\\\\2&\\text{\u5fc5\u8d25\u6001}\\end{cases}\n$$\n\u521d\u59cb\u6761\u4ef6\uff1a\n$$\nf(i,j)=\\begin{cases}2&i=1\\\\0&\\text{otherwise.}\\end{cases}\n$$\n\u8003\u8651\u600e\u4e48\u8f6c\u79fb\u3002\u628a\u6574\u4e2a\u6e38\u620f\u770b\u4f5c\u4e00\u5f20\u6709\u5411\u56fe\uff0c\u6ce8\u610f\u5230\u8fd9\u5f20\u56fe\u662f\u6709\u73af\u5b58\u5728\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u6b63\u7740\u641c\u7d22\uff08\u56e0\u4e3a\u8fd9\u6837\u4f1a\u51fa\u73b0\u201c\u81ea\u5df1\u4f9d\u8d56\u81ea\u5df1\u201d\u7684\u60c5\u51b5\uff09\u3002\u56e0\u6b64\u6211\u4eec\u91c7\u53d6\u7c7b\u4f3c\u62d3\u6251\u6392\u5e8f\u7684\u65b9\u6cd5\u3002\u5177\u4f53\u5730\uff0c\u82e5 $f(u,i)=2$\uff0c\u90a3\u4e48 $u$ \u7684\u6240\u6709\u524d\u9a71\u72b6\u6001 $v$ \u90fd\u6709 $f(v,\\neg i)=1$\uff1b\u82e5 $f(u,i)=1$\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5047\u8bbe $v$ \u4e0d\u4f1a\u8d70\u5230 $u$\uff08\u5728\u4ee3\u7801\u4e2d\u5c31\u662f $v$ \u7684\u51fa\u5ea6 $-1$\uff09\uff0c\u4f46\u662f\u6839\u636e\u201c**\u6ca1\u6709\u540e\u7ee7\u72b6\u6001\u7684\u72b6\u6001\u662f\u5fc5\u8d25\u6001**\u201d\uff0c\u5982\u679c\u4e00\u4e2a\u72b6\u6001\u201c\u65e0\u8def\u53ef\u8d70\u201d\u4e86\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u5fc5\u8d25\u6001\u4e86\uff0c\u6b64\u65f6\u6211\u4eec\u5c31\u8981\u5c06\u5b83\u52a0\u5165\u5e7f\u641c\u961f\u5217\u91cc\u3002\u6700\u540e\u6ca1\u6709\u5165\u8fc7\u961f\u7684\u5c31\u662f\u5faa\u73af\u6001\u3002\u770b\u4ee3\u7801\u5f88\u597d\u7406\u89e3\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconstexpr int N = 7e3, MAX_N = N + 3;\nint n, a [MAX_N] [2], m [2];\nint f [MAX_N] [2];\nint deg [MAX_N] [2];\ninline int pre (int x, int y)\n\t{return (x - y + n - 1) % n + 1;}\nvoid solve () {\n\tstatic queue <pair <int, bool>> Q;\n\tf [1] [0] = f [1] [1] = 2;\n\tQ.push ({1, 0});\n\tQ.push ({1, 1});\n\twhile (!Q.empty ()) {\n\t\tauto it = Q.front (); Q.pop ();\n\t\tint u = it.first; bool d = it.second;\n\t\tfor (int i = 1; i <= m [!d]; ++i) {\n\t\t\tint v = pre (u, a [i] [!d]);\n\t\t\tif (f [v] [!d]) continue;\n\t\t\tif (f [u] [d] == 1) {\n\t\t\t\tif (--deg [v] [!d] == 0) {\n\t\t\t\t\tf [v] [!d] = 2;\n\t\t\t\t\tQ.push ({v, !d});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tf [v] [!d] = 1;\n\t\t\t\tQ.push ({v, !d});\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main () {\n\tios::sync_with_stdio (false);\n\tcin.tie (nullptr);\n\tcout.tie (nullptr);\n\tcin >> n;\n\tfor (int d = 0; d < 2; ++d) {\n\t\tcin >> m [d];\n\t\tfor (int i = 1; i <= m [d]; ++i)\n\t\t\tcin >> a [i] [d];\n\t}\n\tfor (int d = 0; d < 2; ++d)\n\t\tfor (int i = 2; i <= n; ++i)\n\t\t\tdeg [i] [d] = m [d];\n\tsolve ();\n\tfor (int d = 0; d < 2; ++d, cout << '\\n')\n\t\tfor (int i = 2; i <= n; ++i) {\n\t\t\tif (f [i] [d] == 0) cout << \"Loop \";\n\t\t\tif (f [i] [d] == 1) cout << \"Win \";\n\t\t\tif (f [i] [d] == 2) cout << \"Lose \";\n\t\t}\n}\n```",
        "postTime": 1668496440,
        "uid": 500194,
        "name": "George_Je",
        "ccfLevel": 0,
        "title": "CF786A Berzerk \u9898\u89e3"
    },
    {
        "content": "[$\\tt Link$](/problem/CF786A)\uff0c$\\tt^{\\ast}2000$\u3002\n\n\u535a\u5f08\u8bba\u57fa\u672c\u5e38\u8bc6\uff1a\n\n+ \u72b6\u6001\u80fd\u4e14\u4ec5\u80fd\u5206\u4e3a\uff08\u5148\u624b\uff09\u5fc5\u80dc\u548c\u5fc5\u8d25\u4e24\u7c7b\u3002\n+ \u7ecf\u8fc7\u72b6\u6001\u53d8\u5316\uff0c\u5fc5\u8d25 $\\iff$ \u4e00\u5b9a\u53ea\u80fd\u53d8\u6210\u5fc5\u80dc\uff0c\u5fc5\u80dc $\\iff$ \u5b58\u5728\u65b9\u6848\u53d8\u6210\u5fc5\u8d25\u3002\n\n\u8fd9\u4e2a\u535a\u5f08\u5bf9\u4e24\u4e2a\u4eba\u800c\u8a00\u5e76\u4e0d\u5bf9\u79f0\uff0c\u6240\u4ee5\u5fc5\u80dc\u548c\u5fc5\u8d25\u662f\u9488\u5bf9\u4e00\u4e2a\u4eba\u800c\u8a00\u7684\u3002\n\n$n$ \u5c0f\uff0c\u8003\u8651\u66b4\u529b\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u70b9\u5bf9\u4e8e\u4e24\u4e2a\u4eba\u5206\u522b\u662f\u5fc5\u80dc\u8fd8\u662f\u5fc5\u8d25\uff0c\u8bb0\u4e3a $f_i,g_i\\in\\{0,1\\}$\u3002\n\n\u8003\u8651\u8f6c\u79fb\uff0c\u8bb0\u5f53\u524d\u7684\u72b6\u6001\u4e3a $cur$ \u4ee3\u8868\u5f53\u524d\u4f4d\u7f6e\u3002\n\n+ \u6211\u4eec\u53ea\u4f1a\u4ece\u4e0b\u4e00\u6b65\u8d70\u7684\u4eba\u7684\u96c6\u5408 $S$ \u91cc\u53d6\u51fa $x\\in S$\uff0c\u7136\u540e $cur\\to cur-x$\uff0c\u5f53\u7136\u8fd9\u4e2a $cur-x$ \u9700\u8981\u5bf9 $n$ \u53d6\u6a21\u3002\n+ \u5982\u679c $cur$ \u662f\u5fc5\u8d25\uff0c\u56e0\u4e3a\u80fd\u5230\u5fc5\u8d25\u7684\u5c31\u662f\u5fc5\u80dc\uff0c\u6240\u4ee5 $cur-x$ \u4e00\u5b9a\u5fc5\u80dc\u3002\n+ \u5982\u679c $cur$ \u662f\u5fc5\u80dc\uff0c\u9700\u8981\u8bb0 $cnt$ \u4ee3\u8868\u6709\u51e0\u4e2a\u5fc5\u80dc\u80fd\u5230\u8fd9\u4e2a\u72b6\u6001\uff0c\u5982\u679c\u8fd9\u4e2a $cnt$ \u5df2\u7ecf\u7b49\u4e8e\u53ef\u80fd\u7684\u72b6\u6001\u603b\u6570\uff0c\u90a3\u4e48 $cur-x$ \u5fc5\u8d25\u3002\n\n[$\\tt code$](https://codeforces.com/problemset/submission/786/168971556)\u3002",
        "postTime": 1660915979,
        "uid": 368107,
        "name": "xfrvq",
        "ccfLevel": 7,
        "title": "CF786A \u535a\u5f08\u8bba+\u8bb0\u5fc6\u5316\u641c\u7d22"
    },
    {
        "content": "\u535a\u5f08\u597d\u9898\u3002\n\n\u9996\u5148\u8fd9\u9053\u9898\u4e0d\u662f\u7ec4\u5408\u6e38\u620f\uff0cSG \u51fd\u6570\u65e0\u6cd5\u4f7f\u7528\u3002\n\n\u4f46\u662f\u6839\u636e\u535a\u5f08\u5e38\u8bc6\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u3002\n\n\u5982\u679c\u5f53\u524d\u72b6\u6001\u80fd\u5230\u8fbe\u4e00\u4e2a\u5fc5\u8d25\u72b6\u6001\uff0c\u5219\u5f53\u524d\u4e3a\u5fc5\u80dc\u6001\u3002\n\n\u5982\u679c\u5f53\u524d\u72b6\u6001\u80fd\u591f\u5230\u8fbe\u7684\u72b6\u6001\u90fd\u662f\u5fc5\u80dc\u6001\uff0c\u5219\u5f53\u524d\u72b6\u6001\u4e3a\u5fc5\u8d25\u6001\u3002\n\n\u5426\u5219\u8fd9\u4e2a\u6e38\u620f\u65e0\u6cd5\u7ed3\u675f\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8bbe\u8ba1\u72b6\u6001 $f[i][0/1]$ \uff0c\u8868\u793a\u7b2c $i$ \u4e2a\u4f4d\u7f6e\uff0cRick \u6216 Morty \u5148\u624b\uff0c\u5fc5\u80dc\u8fd8\u662f\u5fc5\u8d25\u3002\n\n\u521d\u59cb\u4e3a $f[1][0/1]=-1$\uff0c\u8f6c\u79fb\u4e3a$f[i][op]\\to f[k][op\\ \\rm xor\\ 1]$\u3002\n\n\u4f46\u662f\u8f6c\u79fb\u987a\u5e8f\u6211\u4eec\u4e0d\u77e5\u9053\uff0c\u76f4\u63a5\u987a\u5e8f\u9012\u63a8\uff0c\u8bb0\u5fc6\u5316\u641c\u7d22\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 7005\nusing namespace std;\nint n,p,a[N],q,b[N],f[N][2];\ninline int ck(int x){if(x<1)x+=n;return x;}\nbool v[N][2];int c[N][2];\nvoid dfs(int x,int op){\n\tif(v[x][op])return;\n\tv[x][op]=1;\n\t//cout<<x<<\" \"<<op<<\" \"<<f[x][op]<<endl;\n\tif(op==0){\n\t\trep(i,1,q){\n\t\t\tint cur=ck(x-b[i]);\n\t\t\t//cout<<\"ss \"<<x<<\" \"<<cur<<endl;\n\t\t\tif(v[cur][op^1]||cur==1)continue; \n\t\t\tif(f[x][op]==-1)f[cur][op^1]=1,dfs(cur,op^1);\n\t\t\telse if(f[x][op]==1){\n\t\t\t\tc[cur][op^1]++;\n\t\t\t\tif(c[cur][op^1]==q)f[cur][op^1]=-1,dfs(cur,op^1);\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\trep(i,1,p){\n\t\t\tint cur=ck(x-a[i]);\n\t\t\t//cout<<\"tt \"<<x<<\" \"<<cur<<endl;\n\t\t\tif(v[cur][op^1])continue;\n\t\t\tif(f[x][op]==-1)f[cur][op^1]=1,dfs(cur,op^1);\n\t\t\telse if(f[x][op]==1){\n\t\t\t\tc[cur][op^1]++;\n\t\t\t\tif(c[cur][op^1]==p)f[cur][op^1]=-1,dfs(cur,op^1);\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&p);rep(i,1,p)scanf(\"%d\",&a[i]);\n\tscanf(\"%d\",&q);rep(i,1,q)scanf(\"%d\",&b[i]);\n\tf[1][0]=f[1][1]=-1;dfs(1,0);dfs(1,1);\n\trep(i,2,n){\n\t\tint cur=f[i][0];\n\t\tif(cur==1)printf(\"Win \");\n\t\telse if(cur==0)printf(\"Loop \");\n\t\telse printf(\"Lose \");\n\t}\n\tputchar('\\n');\n\trep(i,2,n){\n\t\tint cur=f[i][1];\n\t\tif(cur==1)printf(\"Win \");\n\t\telse if(cur==0)printf(\"Loop \");\n\t\telse printf(\"Lose \");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1617447623,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "CF786A Berzerk\u9898\u89e3"
    }
]
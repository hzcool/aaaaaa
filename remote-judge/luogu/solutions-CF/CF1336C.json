[
    {
        "content": "\u8fd9\u9898\u5176\u5b9e\u548c[\u5408\u5531\u961f](https://www.luogu.com.cn/problem/P3205)\u6709\u70b9\u50cf\u3002\n\n\u8fd9\u9898\u4e3b\u8981\u7684\u96be\u70b9\u662f\u72b6\u6001\u7684\u8bbe\u8ba1\u548c\u8f6c\u79fb\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u4f5c\u6bcf\u6b21\u90fd\u662f\u4e00\u4e2a\u533a\u95f4\u589e\u52a0\u4e00\u4e2a\u5143\u7d20\u53d8\u6210\u53e6\u5916\u4e00\u4e2a\u533a\u95f4\uff0c\u4e8e\u662f\u60f3\u5230\u533a\u95f4 dp\u3002\n\n\u8bb0\u4e32 $s,t$ \u957f\u5ea6\u5206\u522b\u4e3a $slen,tlen$\u3002\u8bbe $f_{i,j}$ \u8868\u793a\u6709\u591a\u5c11\u79cd\u65b9\u6848\u4f7f\u5f97 $s_1$ \u5230 $s_{j-i+1}$ \u80fd\u901a\u8fc7\u63d2\u5165\u6700\u524d\u7aef\u548c\u63d2\u5165\u6700\u540e\u7aef\u6784\u6210 $t_i$ \u5230 $t_j$ \u7684\u5b57\u7b26\u7ec4\u6210\u3002\n\n\u90a3\u4e48\u72b6\u6001\u521d\u59cb\u5316\u5c31\u662f\n\n$$f_{i,i}=2(t_i=s_1)$$\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f\n\n$$f_{j,i+j-1}+=f_{j+1,i+j-1}(t_j=s_i)$$\n\n$$f_{j,i+j-1}+=f_{j,i+j-2}(t_{i+j-1}=s_i)$$\n\n\u7136\u800c\u5f53\u4f60\u8fd9\u6837\u8ba1\u7b97\u5e76\u628a $f_{1,tlen}$ \u4f5c\u4e3a\u6700\u7ec8\u7b54\u6848\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u6709\u4ebf\u70b9\u70b9\u4e0d\u5bf9\u3002\u56e0\u4e3a\u8fd9\u6837\u53ea\u7b97\u4e86\u6700\u7ec8\u7b54\u6848\u662f $t$ \u7684\u65b9\u6848\u6570\uff0c\u800c\u7b54\u6848\u53eb\u6211\u4eec\u6c42\u524d\u7f00\u662f $t$ \u7684\u65b9\u6848\u6570\u3002\n\n\u6211\u4eec\u53ea\u9700\u8981\u4fee\u6539\u4e00\u4e0b\u5b9a\u4e49\uff1a\u8bbe $f_{i,j}$ \u8868\u793a\u6709\u591a\u5c11\u79cd\u65b9\u6848\u4f7f\u5f97 $s_1$ \u5230 $s_{j-i+1}$ \u80fd\u901a\u8fc7\u63d2\u5165\u6700\u524d\u7aef\u548c\u63d2\u5165\u6700\u540e\u7aef\u4f7f\u5f97\u524d $min(tlen,j-i+1)$ \u4e2a\u5b57\u7b26\u6784\u6210 $t_i$ \u5230 $t_{min(tlen,j)}$ \u7684\u5b57\u7b26\u7ec4\u6210\u3002\n\n\u90a3\u4e48\u521d\u59cb\u5316\u5c31\u8981\u52a0\u4e0a\u4e00\u4e2a\u4e1c\u897f\uff1a\n\n$$f_{i,i}=2(i\\in(tlen,slen])$$\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u53d8\u4e3a\n\n$$f_{j,i+j-1}+=f_{j+1,i+j-1}(t_j=s_i||j>tlen)$$\n\n$$f_{j,i+j-1}+=f_{j,i+j-2}(t_{i+j-1}=s_i||i+j-1>tlen)$$\n\n\u7b54\u6848\u5c31\u662f $\\sum\\limits_{i=tlen}^{slen}f_{1,i}$\n\n\u4ee3\u7801\u5f88\u77ed\uff0c\u4f46\u662f\u5e72\u8d27\u5f88\u591a\u3002\n\n```cpp\n#define ri register int\n#define mod 998244353\n#define N 3010\nchar s[N],t[N];\nint slen,tlen;\nll f[N][N];\nint main()\n{\n\tscanf(\"%s%s\",s+1,t+1);\n\tslen=strlen(s+1),tlen=strlen(t+1);\n\tfor(ri i=1;i<=tlen;++i) if(t[i]==s[1]) f[i][i]=2;\n\tfor(ri i=tlen+1;i<=slen;++i) f[i][i]=2;\n\tfor(ri i=2;i<=slen;++i){\n\t\tfor(ri j=1;i+j-1<=slen;++j){\n\t\t\tif(j>tlen||t[j]==s[i]) f[j][i+j-1]=(f[j][i+j-1]+f[j+1][i+j-1])%mod;\n\t\t\tif(i+j-1>tlen||t[i+j-1]==s[i]) f[j][i+j-1]=(f[j][i+j-1]+f[j][i+j-2])%mod;\n\t\t}\n\t}\n\tll ans=0;\n\tfor(ri i=tlen;i<=slen;++i) ans=(ans+f[1][i])%mod;\n\tcout<<ans;\n    return 0;\n}\n```\n",
        "postTime": 1587008714,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1336C \u3010Kaavi and Magic Spell\u3011"
    },
    {
        "content": "\u6d1b\u8c37\u7684$L^AT_EX$\u53ef\u80fd\u6302\uff0c\u5efa\u8bae\u53bb[My blog](https://oierwanhong.cc/2020/04/16/CF1336C/)\u67e5\u770b\n\n## CF1336C\n\n\u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u521d\u59cb\u4e32$s$\u548c\u76ee\u6807\u4e32$t$\uff0c\u6bcf\u6b21\u53ef\u4ee5\u53d6\u51fa\uff08\u5e76\u5220\u9664\uff09$s$\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u52a0\u5165\u53e6\u4e00\u4e2a\u4e32$A$\u7684\u5f00\u5934\u6216\u672b\u5c3e\uff08\u521d\u59cb\u4e3a\u7a7a\uff09\uff0c\u6c42$t$\u662f$A$\u7684\u524d\u7f00\u7684\u65b9\u6848\u6570\uff08\u4efb\u610f\u4e00\u6b65\u64cd\u4f5c\u4e0d\u540c\u5373\u4e0d\u540c\uff0c$s$\u4e0d\u5fc5\u5220\u5b8c\uff09\n\n$|t|\\le |s|\\le 3000$\n\n<!--more--> \n\n\u533a\u95f4dp\u3002\u4ee4$f(l,r)$\u8868\u793a\u7528$s$\u7684\u524d$r-l+1$\u4e2a\u5b57\u7b26\u62fc\u51fa$t_{l...r}$\u7684\u65b9\u6848\u6570\u3002\uff08\u5bf9\u4e8e$i>|t|,t_i$\u53ef\u4e3a\u4efb\u610f\u5b57\u7b26\uff09\n\n\u8fb9\u754c\uff1a$t_i=s_1,f(i,i)=2$\n\n\u8f6c\u79fb\uff1a\u679a\u4e3e\u957f\u5ea6$len$,\u548c\u5de6\u7aef\u70b9$l$,\u5219$r=l+len-1$\u3002  \n\n- \u5f53$s_{len}=t_l,f(l,r)$\u53ef\u7531$f(l+1,r)$\u8f6c\u79fb\u800c\u6765\n- \u5f53$s_{len}=t_r,f(l,r)$\u53ef\u7531$f(l,r-1)$\u8f6c\u79fb\u800c\u6765\n\n\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f$\\sum _{i=|t|}^{|s|} f(1,i)$\n\n\u6ce8\u610f\u53d6\u6a21\u3002\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal O(n^2)$.\n\n```cpp\n#include<bits/stdc++.h>\nchar s[3011],t[3011];\nint f[3011][3011],yg=998244353;//yg txdy!!!\nint main()\n{\n    scanf(\"%s%s\",s+1,t+1);\n    int n=strlen(s+1),m=strlen(t+1),res=0,i,j;\n    for(i=1;i<=n;++i)f[i][i]=(i>m||s[1]==t[i])*2;\n    for(int len=2;len<=n;++len)\n        for(i=1;i+len-1<=n;++i)\n        {\n            j=i+len-1;\n            if(i>m||s[len]==t[i])(f[i][j]+=f[i+1][j])%=yg;\n            if(j>m||s[len]==t[j])(f[i][j]+=f[i][j-1])%=yg;\n        }\n    for(i=m;i<=n;++i)(res+=f[1][i])%=yg;\n    printf(\"%d\",res);\n    return 0;\n}\n```\n\n\u8fd8\u6709\u4e00\u4efd\u66f4\u77ed\u7684\u4ee3\u7801\uff0c\u73b0\u5728\u662fsize\u6392\u5e8frk2\uff1a[link](https://codeforces.ml/contest/1336/submission/76952794)",
        "postTime": 1587032706,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1336C \u3010Kaavi and Magic Spell\u3011"
    },
    {
        "content": "# \u9898\u76ee\n\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1336C)\n\n# \u9898\u89e3\n\n\u8003\u8651\u6784\u60f3\u4e00\u4e0b\u6700\u7ec8\u60c5\u51b5\uff1a\u5728 $S$ \u7684\u524d $i$ \u4f4d\u5df2\u7ecf\u4ee5\u67d0\u79cd\u653e\u5165\u65b9\u5f0f\u653e\u8fdb $A$ \u4e4b\u540e\uff0c$T$ \u6210\u4e3a\u4e86 $A$ \u7684\u524d\u7f00\uff0c\u7136\u540e $T$ \u7684 $i+1$ \u5230 $lenS$ \u4f4d\u76f4\u63a5\u653e\u5165 $A$ \u7684\u540e\u9762\uff08\u663e\u7136 $i$ \u6709\u53ef\u80fd\u4e3a $lenS$\uff09\uff0c\u5982\u679c\u6211\u4eec\u76f4\u63a5\u679a\u4e3e\u8fd9\u4e2a $i$\uff0c\u663e\u7136\u5f88\u96be\u505a\uff0c\u8003\u8651\u5f80\u524d\u9000\u4e00\u6b65\u7684\u60c5\u51b5\uff0c\u4e00\u5171\u5c31\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. $S$ \u7684\u7b2c $i$ \u4f4d\u76f4\u63a5\u653e\u5165 $A$ \u7684\u540e\u9762\uff1b\n2. $S$ \u7684\u7b2c $i$ \u4f4d\u653e\u5230\u4e86 $A$ \u7684\u524d\u9762\uff1b\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u8bf4\u660e $A$ \u5728 $S[i]$ \u653e\u5165\u4e4b\u524d\uff0c\u5176\u524d\u7f00\u5c31\u5df2\u7ecf\u662f $T$ \u4e86\uff0c\u5373 $S[1...i-1]$ \u6784\u6210\u4e86 $T$\n\n\u5bf9\u4e8e\u60c5\u51b5\u4e8c\uff0c\u8bf4\u660e$S[i]$ \u8fd8\u672a\u653e\u5165\u65f6 $A$ \u7684\u524d\u7f00\u662f $T[2...lenT]$\uff0c\u5373 $S[1...i-1]$ \u6784\u6210\u4e86 $T[2...lenT]$\n\n\u8003\u8651\u518d\u5f80\u524d\u9000\u4e00\u6b65\uff1f\u56db\u79cd\u60c5\u51b5\n\n1. 1. $S$ \u7684\u7b2c $i-1$ \u4f4d\u76f4\u63a5\u653e\u5165 $A$ \u7684\u540e\u9762\uff1b\n   2. $S$ \u7684\u7b2c $i-1$ \u4f4d\u653e\u5230\u4e86 $A$ \u7684\u524d\u9762\uff1b\n2. 1. $S$ \u7684\u7b2c $i-1$ \u4f4d\u76f4\u63a5\u653e\u5165 $A$ \u7684\u540e\u9762\uff1b\n   2. $S$ \u7684\u7b2c $i-1$ \u4f4d\u653e\u5230\u4e86 $A$ \u7684\u524d\u9762\uff1b\n\n\u5bf9\u4e8e $1.1$\uff0c\u8bf4\u660e $A$ \u5728 $S[i],S[i-1]$ \u653e\u5165\u4e4b\u524d\uff0c\u5176\u524d\u7f00\u5df2\u7ecf\u662f $T$\uff0c\u5373 $S[1...i-2]$ \u6784\u6210\u4e86 $T$\n\n\u5bf9\u4e8e $1.2$\uff0c\u8bf4\u660e $A$ \u5728 $S[i],S[i-1]$ \u653e\u5165\u4e4b\u524d\uff0c\u5176\u524d\u7f00\u662f $T[2...lenT]$\uff0c\u4e14 $T[1]=S[i-1]$\uff0c\u5373 $S[1...i-2]$ \u6784\u6210\u4e86 $T[2...lenT]$\n\n\u5bf9\u4e8e $1.3$\uff0c\u8bf4\u660e $A$ \u5728 $S[i],S[i-1]$ \u653e\u5165\u4e4b\u524d\uff0c\u5176\u524d\u7f00\u662f $T[2...lenT]$\uff0c\u4e14 $T[1]=S[i]$\uff0c\u5373 $S[1...i-2]$ \u6784\u6210\u4e86 $T[2...lenT]$\n\n\u5bf9\u4e8e $1.4$\uff0c\u8bf4\u660e $A$ \u5728 $S[i],S[i-1]$ \u653e\u5165\u4e4b\u524d\uff0c\u5176\u524d\u7f00\u662f $T[3...len]$\uff0c\u4e14 $T[2]=S[i-1],T[1]=S[i]$\uff0c\u5373 $S[1...i-2]$ \u6784\u6210\u4e86 $T[3...len]$\n\n\u518d\u5f80\u524d\u9762\u9000...\u901a\u8fc7\u770b\u4e0a\u9762\u7684\u5206\u6790\u4e2d\u201c\u5373...\u201d\u90e8\u5206\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c**\u603b\u662f $S[1...x]$ \u6784\u6210\u4e86 $T[l...r]$\uff0c\u7136\u540e\u8003\u8651\u52a0\u5165 $S[x+1]$ \u4f1a\u53d1\u751f\u4ec0\u4e48**\n\n**\u8fd9\u5c31\u662f\u8fd9\u9053\u9898\u7684\u5b50\u72b6\u6001\uff0c\u53ea\u9700\u5c06\u5176\u5199\u4f5c\u72b6\u6001**\uff0c\u5373\u5b9a\u4e49\u72b6\u6001 $f[l][r]$ \u4e3a $S[1...r-l+1]$ \u6784\u6210 $T[l...r]$ \u7684\u90e8\u5206\u7684\u65b9\u6848\u6570\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u72b6\u6001\uff0c\u9996\u5148\u6709\u521d\u59cb\u5316 $f[i][i]=2,S[1]=T[i]$\uff0c\u7136\u540e\u8003\u8651\u8f6c\u79fb\uff1a\n\n1. \u5982\u679c $S[r-l+1]=T[r]$\uff0c\u5219 $f[l][r]+=f[l][r-1]$\uff1b\n2. \u5982\u679c $S[r-l+1]=T[l]$\uff0c\u5219 $f[l][r]+=f[l+1][r]$\uff1b\n\n\u4f46\u662f\u76f4\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u6c42\u7684\u90fd\u662f\u7528 $S$ \u6784\u6210 $T$ \u7684\u65b9\u6848\u6570\uff0c\u4f46\u662f\u9898\u76ee\u53ea\u8981\u6c42 $T$ \u6210\u4e3a $A$ \u7684\u524d\u7f00\uff0c\u800c\u6211\u4eec\u7684\u72b6\u6001\u5b9a\u4e49\u663e\u7136\u6709 $i>lenT$ \u7684\u90e8\u5206\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u90e8\u5206\uff0c\u6211\u4eec\u8fdb\u884c\u7279\u6b8a\u5b9a\u4e49\uff1a\n\n> \u5f53 $i>lenT$ \u65f6\uff0c$T[i]$ \u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u3002\n\n\u8fd9\u6837\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u5b8c\u6574\u4e86\uff0c\u6700\u540e\u7684\u7b54\u6848\u663e\u7136\u4e3a\n$$\n\\sum_{i=lenT}^{lenS}f[1][i]\n$$\n\n# \u4ee3\u7801\n\n```cpp\nhttps://www.cnblogs.com/Arextre/p/13394160.html\n```\n\n",
        "postTime": 1595945108,
        "uid": 125355,
        "name": "Vladilena",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1336C \u3010Kaavi and Magic Spell\u3011"
    },
    {
        "content": "\u6211\u592a\u84bb\u4e86\u521a\u53d1\u51fa\u6765\u5c31\u88ab\u6307\u51fa\u4e00\u4e2a\u5c0f\u9519\uff0c\u6240\u4ee5\u91cd\u65b0\u63d0\u4ea4\u4e00\u904d  \n\n[CF1336C Kaavi and Magic Spell](http://codeforces.com/contest/1336/problem/C)  \n**\u533a\u95f4dp**  \n\n## \u9898\u610f  \n\n\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $S$ \u548c\u4e00\u4e2a\u957f\u5ea6\u4e3a $m$ \u7684\u5b57\u7b26\u4e32$T$ \uff0c$1\\le m\\le n$\uff0c\u7136\u540e\u5f00\u59cb\u6709\u4e00\u4e2a\u7a7a\u4e32 $A$\uff0c\u63a5\u4e0b\u6765\u53ef\u5bf9 $S$ \u4e32\u8fdb\u884c $n4 \u6b21\u64cd\u4f5c:  \n\n- \u628aS\u7684\u9996\u4e2a\u5b57\u7b26\u6dfb\u52a0\u5230A\u7684\u5f00\u5934\u7136\u540e\u5220\u6389  \n\n- \u628aS\u7684\u9996\u4e2a\u5b57\u7b26\u6dfb\u52a0\u5230A\u7684\u5c3e\u7aef\u7136\u540e\u5220\u6389  \n\n\u95ee\u5728\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u4f7f\u5f97 $A$ \u7684\u524d $m$ \u4e2a\u5b57\u7b26\u4e3a $T$\uff08\u4e5f\u5c31\u662f\u524d\u7f00\u4e3a $T$\uff09\u7684\u60c5\u51b5\u5171\u6709\u591a\u5c11\uff1f  \n\u957f\u5ea6\u4e0d\u540c\u6216\u8005\u662f\u64cd\u4f5c\u5e8f\u5217\u4e2d\u6709\u67d0\u4e2a\u5730\u65b9\u4e0d\u540c\u53ef\u89c6\u4e3a\u662f\u4e0d\u540c\u60c5\u51b5\u3002  \n\n--------------  \n\n\u6211\u4eec\u5148\u8ba9 $T$ \u7684\u957f\u5ea6\u548c $S$ \u76f8\u540c\uff0c\u5728\u591a\u5904\u6765\u7684\u90a3 $m+1,m+2,\\cdots,n$ \u90a3\u51e0\u4f4d\u4e0a\uff0c\u94a6\u5b9a\u5b83\u548c $S$ \u4e2d\u6240\u6709\u5143\u7d20\u90fd\u201c\u76f8\u7b49\u201d\uff0c\u56e0\u4e3a\u5728\u8fd9\u4e9b\u4f4d\u7f6e\u4e0a\u6211\u4eec\u53ef\u4ee5\u53d6\u4efb\u610f\u503c  \n\u8bbe\u8ba1\u72b6\u6001\uff1a$f(l,r)$ \u8868\u793a\u7684\u662f\u6ee1\u8db3 $\\forall l\\le i\\le r,S_i=T_i$ \u80fd\u6784\u9020\u51fa\u591a\u5c11\u64cd\u4f5c\u5e8f\u5217  \n\n\u90a3\u4e48\u5047\u8bbe\u6211\u4eec\u5728\u5220\u9664 $S_i$ \u5e76\u628a\u5b83\u5f80 $A$ \u91cc\u6dfb\u52a0\uff0c\u6b64\u65f6 $A$ \u4e2d\u4e00\u5b9a\u6709\u4e86 $i-1$ \u4e2a\u5143\u7d20  \n\u8003\u8651 $f(l,r),r-l+1=i$ \u53ef\u4ee5\u7531\u4ec0\u4e48\u72b6\u6001\u8f6c\u79fb\u800c\u6765  \n\n- $S_i=T_l$\uff0c\u5219\u53ef\u4ee5\u628a $S_i$ \u6dfb\u52a0\u5230\u8fd9\u4e2a $[l+1,r]$ \u533a\u95f4\u7684\u524d\u9762\uff0c\u6784\u6210 $[l,r]$\uff0c\u5c31\u662f $f(l,r)+=f(l+1,r)$  \n- $S_i=T_r$\uff0c\u8fd9\u548c\u4e0a\u9762\u5c31\u4e00\u6837\u4e86\uff0c$f(l,r)+=f(l,r+1)$  \n\n-----------  \n\n\u57fa\u672c\u5df2\u7ecf\u5b8c\u6210\u4e86\uff0c\u73b0\u5728\u8003\u8651\u521d\u59cb\u72b6\u6001\u548c\u7b54\u6848  \n$f(i,i)=2[S_i=T_i]$\uff0c\u5c31\u662f\u8bf4\u4e00\u79cd\u65b9\u6cd5\u662f\u628a $S_1$ \u4ece\u524d\u9762\u6dfb\u52a0\u5230 $A$ \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u4e00\u79cd\u662f\u4ece\u540e\u9762\u6dfb\u52a0\uff0c\u867d\u7136\u7ed3\u679c\u4e00\u6837\uff0c\u4f46\u662f\u9898\u76ee\u8981\u6c42\u8fd9\u662f\u4e24\u79cd\u4e0d\u540c\u65b9\u5f0f  \n\n\u957f\u5ea6\u4e0d\u540c\u7b97\u4e0d\u540c\u60c5\u51b5\uff0c\u8fd9\u4e5f\u8bf4\u660e\u4e86\u4e0d\u4e00\u5b9a\u8981\u64cd\u4f5c $n$ \u6b21\uff0c\u53ea\u8981\u64cd\u4f5c $i,m\\le i\\le n$ \u6b21\u5c31\u884c\u4e86  \n\u6240\u4ee5\u7b54\u6848\u662f $\\sum_{i=m}^{n}f(1,i)$  \n\n```cpp  \n#include<cstdio>\n#include<algorithm>\n#include<iostream>\n#include<cmath>\n#include<map>\n#include<iomanip>\n#include<cstring>\n#define reg register\n#define EN std::puts(\"\")\n#define LL long long\ninline int read(){\n\tregister int x=0;register int y=1;\n\tregister char c=std::getchar();\n\twhile(c<'0'||c>'9'){if(c=='-') y=0;c=std::getchar();}\n\twhile(c>='0'&&c<='9'){x=x*10+(c^48);c=std::getchar();}\n\treturn y?x:-x;\n}\n#define mod 998244353\nchar s[3006],t[3006];\nint f[3006][3006];\nint main(){\n\tstd::scanf(\"%s\",s+1);std::scanf(\"%s\",t+1);\n\tint n=std::strlen(s+1),m=std::strlen(t+1);\n\tfor(reg int i=1;i<=m;i++) f[i][i]=(s[1]==t[i])<<1;\n\tfor(reg int i=m+1;i<=n;i++) f[i][i]=2;\n\tfor(reg int i=2,len=2;i<=n;i++,len++){\n\t\tfor(reg int l=1,r=len;r<=n;l++,r++){\n\t\t\tif(l>m||s[i]==t[l]) f[l][r]+=f[l+1][r],f[l][r]%=mod;\n\t\t\tif(r>m||s[i]==t[r]) f[l][r]+=f[l][r-1],f[l][r]%=mod;\n\t\t}\n\t}\n\tint ans=0;\n\tfor(reg int i=m;i<=n;i++) ans=(ans+f[1][i])%mod;\n\tstd::printf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1587020441,
        "uid": 164432,
        "name": "suxxsfe",
        "ccfLevel": 9,
        "title": "CF1336C Kaavi and Magic Spell"
    },
    {
        "content": "$t$ \u672b\u5c3e\u6dfb\u52a0\u901a\u914d\u7b26\uff0c\u8fdb\u884c\u7b80\u5355\u533a\u95f4 dp\u3002  \n\u672c\u9898\u5751\u70b9\uff1a\u53ef\u4ee5\u53ea\u64cd\u4f5c $\\le n$ \u6b21\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=3005,mod=998244353;\ninline void add(int &x,int y){(x+=y)>=mod&&(x-=mod);}\nint n,m,f[N][N];\nchar s[N],t[N];\nint main(){\n\tscanf(\"%s%s\",s+1,t+1),n=strlen(s+1),m=strlen(t+1);\n\tfor(int i=m+1;i<=n;i++)t[i]='#';\n\tfor(int i=1;i<=n+1;i++)f[i][i-1]=1;\n\tfor(int len=1;len<=n;len++)for(int l=1,r=len;r<=n;l++,r++){\n\t\tif(s[r-l+1]==t[r]||t[r]=='#')add(f[l][r],f[l][r-1]);\n\t\tif(s[r-l+1]==t[l]||t[l]=='#')add(f[l][r],f[l+1][r]);\n\t}\n\tint ans=0;\n\tfor(int i=m;i<=n;i++)add(ans,f[1][i]);\n\tcout<<ans<<'\\n';\n}\n```",
        "postTime": 1666172493,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "CF1336C Kaavi and Magic Spell"
    },
    {
        "content": "### $\\text{Difficulty : 2200}$\n---\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u4e3b\u8981\u662f\u8fd9\u4e2a\u524d\u7f00\u7684\u8981\u6c42\u4e0d\u597d\u5904\u7406\uff0c\u8003\u8651\u5c06\u5b57\u7b26\u4e32 $T$ \u8865\u4e0a\u82e5\u5e72\u4e2a\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u5b57\u7b26\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u7531\u4e8e\u539f\u6765\u4e32\u4e2d\u4fdd\u8bc1\u6ca1\u6709\u6570\u5b57\uff0c\u53ef\u4ee5\u8bbe\u5b9a\u4e3a\u4efb\u610f\u6570\u5b57\uff0c\u4f8b\u5982\u4e00\u4e2a\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32 $\\text{1145141919810}$ \u7684\u5faa\u73af\u3002\n\n\u7136\u540e\u5177\u4f53\u8003\u8651\u52a8\u6001\u89c4\u5212\uff0c$f_{i,j}$ \u8868\u793a\u7528 $S$ \u4e2d\u524d $j-i+1$ \u4e2a\u8868\u793a\u51fa\u5b57\u7b26\u4e32 $T$ \u4e2d\u4f4d\u7f6e $i$ \u5230 $j$ \u7684\u65b9\u6848\u6570\u3002\n\n\u5177\u4f53\u8f6c\u79fb\u7684\u65f6\u5019\u8003\u8651\u5de6\u53f3\u4e24\u4e2a\u7aef\u70b9\uff0c\u82e5\u5f53\u524d\u5de6\u7aef\u70b9\u6070\u597d\u548c $S$ \u4e2d\u5bf9\u5e94\u7684\u4f4d\u7f6e\u76f8\u540c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8fdb\u884c\u8f6c\u79fb\uff0c\u53f3\u7aef\u4f4d\u7f6e\u540c\u7406\u3002\n\n\u7531\u4e8e\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u505c\u4e0b\u6765\uff0c\u6700\u540e\u7684\u7b54\u6848\u662f $\\sum_{i=m}^nf_{1,i}$\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\nusing namespace std;\n#define int long long\nconst int MAXN=3005,MOD=998244353;\nint n,m,f[MAXN][MAXN],ans;\nchar S[MAXN],T[MAXN],c,X[50]={'1','1','4','5','1','4','1','9','1','9','8','1','0'};\nbool check(char a,char b){\n\tif(a>='0'&&a<='9')return 1;\n\treturn a==b;\n}\nsigned main(){\n\tfor(c=getchar();c<='z'&&c>='a';c=getchar())S[++n]=c;\n\tfor(;c>'z'||c<'a';c=getchar());\n\tfor(;c<='z'&&c>='a';c=getchar())T[++m]=c;\n\tfor(int i=m+1;i<=n;i++)T[i]=X[i%13];\n\tfor(int i=1;i<=n;i++)if(check(T[i],S[1]))f[i][i]=2;\n\t\n\tfor(int len=2;len<=n;len++){\n\t\tfor(int i=1;i<=n-len+1;i++){\n\t\t\tint j=i+len-1;\n\t\t\t\n\t\t\tif(check(T[i],S[len]))f[i][j]=(f[i][j]+f[i+1][j])%MOD;\n\t\t\tif(check(T[j],S[len]))f[i][j]=(f[i][j]+f[i][j-1])%MOD;\n\t\t}\n\t}\n\tfor(int i=m;i<=n;i++)ans=(ans+f[1][i])%MOD;\n\tprintf(\"%I64d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1648449566,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "CF1336C Kaavi and Magic Spell \u9898\u89e3"
    },
    {
        "content": "## Description\n\n\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32 $S$ \u548c\u4e00\u4e2a\u5b57\u7b26\u4e32 $T$\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5220\u6389 $S$ \u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u7136\u540e\u653e\u5230\u4e00\u4e2a\u521d\u59cb\u4e3a\u7a7a\u7684\u5b57\u7b26\u4e32 $A$ \u7684\u9996\u90e8\u6216\u5c3e\u90e8\uff0c\u4f60\u53ef\u4ee5\u8fdb\u884c\u4efb\u610f\u6b21\u64cd\u4f5c\uff0c\u6c42\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u4f7f\u5f97 $T$ \u662f $A$ \u7684\u524d\u7f00\u3002\n\n$|T|\\le|S|\\le3000$\n\n## Solution\n\n\u5148\u8003\u8651 $|S|=|T|$ \u7684\u60c5\u51b5\u3002\n\n\u8bbe $f_{i,j}$ \u8868\u793a\u7528 $S$ \u7684\u524d $j-i+1$ \u4f4d\u6784\u9020\u51fa $T_{i\\dots j}$ \u7684\u65b9\u6848\u6570\u3002\n\n\u4e0d\u96be\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$\nf_{i,j}=[S_{j-i+1}=T_i]f_{i+1,j}+[S_{j-i+1}=T_j]f_{i,j-1}\n$$\n\u521d\u59cb\u5316\uff1a\n$$\nf_{i,i}=[S_1=T_i]2\n$$\n\u533a\u95f4 dp \u5373\u53ef\u3002\n\n\u5982\u679c $|S|>|T|$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6700\u540e\u6784\u9020\u51fa\u6765\u7684 $A$\uff0c$(|T|,|A|]$ \u8fd9\u4e9b\u4f4d\u662f\u4ec0\u4e48\u6211\u4eec\u5e76\u4e0d\u5173\u5fc3\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5c06 $T$ \u7684\u957f\u5ea6\u8865\u81f3\u4e0e $S$ \u7b49\u957f\uff0c\u8865\u5145\u7684\u8fd9\u4e9b\u4f4d\u80fd\u591f\u4e0e\u4efb\u610f\u5b57\u7b26\u5339\u914d\u3002\n\n\u7b54\u6848\u5373\u4e3a $\\sum_{i=|T|}^{|S|}f_{1,i}$\u3002\n\n## Code\n\n```cpp\nnamespace Main{\n    const int MOD = 998244353;\n    const int L = 3005;\n    int ls, lt, ans, f[L][L];\n    char s[L], t[L];\n    void Main(){\n        scanf(\"%s%s\", s + 1, t + 1);\n        ls = strlen(s + 1), lt = strlen(t + 1);\n        for(ri i = 1; i <= lt; i++) if(s[1] == t[i]) f[i][i] = 2;\n        for(ri i = lt + 1; i <= ls; i++) f[i][i] = 2;\n        for(ri len = 2; len <= ls; len++){\n            for(ri i = 1; i + len - 1 <= ls; i++){\n                ri j = i + len - 1;\n                if(i > lt || s[len] == t[i]) f[i][j] += f[i+1][j];\n                if(j > lt || s[len] == t[j]) f[i][j] += f[i][j-1];\n                f[i][j] %= MOD;\n            }\n        }\n        for(ri i = lt; i <= ls; i++) ans = (ans + f[1][i]) % MOD;\n        write(ans);\n        return;\n    }\n} // namespace\n```",
        "postTime": 1636729097,
        "uid": 371439,
        "name": "Liuxizai",
        "ccfLevel": 6,
        "title": "\u300cSolution\u300dCF1336C Kaavi and Magic Spell"
    },
    {
        "content": "## \u66f4\u65b0\u65e5\u5fd7\n\n2020.11.1 \u611f\u8c22 @syzf2222 \u63d0\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u7684\u9519\u8bef\n\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u4e00\u4e2a\u4e32 $S$\uff0c\u4e32 $T$ \u4e0e\u7a7a\u4e32 $A$\uff0c\u957f\u5ea6\u5206\u522b\u4e3a $n$ \u548c $m$\uff0c\u4f60\u53ef\u4ee5\u64cd\u4f5c\u82e5\u5e72\u6b21\uff0c\u6bcf\u4e00\u6b21\u64cd\u4f5c\u4f60\u53ef\u4ee5\u5c06 $S$ \u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u5220\u9664\u5e76\u52a0\u5165 $A$ \u7684\u524d\u9762\u6216\u540e\u9762\uff0c\u6c42\u6709\u591a\u5c11\u79cd\u65b9\u6cd5\u4f7f\u5f97 $T$ \u662f $A$ \u7684\u524d\u7f00\u3002\n\n## \u601d\u8def\u5206\u4eab\n\n\u7531\u4e8e\u4f60\u53ef\u4ee5\u5f80\u4e24\u8fb9\u52a0\u5165\u5b57\u6bcd\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u533a\u95f4$DP$\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8bbe $dp_{i,j}$\uff0c$l=j-i+1$\uff0c$dp_{i,j}$ \u8868\u793a\u5c06 $S_{1 \\cdots l}$ \u64cd\u4f5c\u4e3a $A_{i \\cdots j}$ \u7684\u65b9\u6cd5\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u5f0f\u5b50\uff1a\n$$\ndp_{i,j}=dp_{i+1,j}*(i>m|s_{j-i+1}=t_i)+dp_{i,j-1}*(j>m|s_{j-i+1}=t_j)\n$$\n\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5 $\\Theta(n^2)$ \u6c42\u51fa $dp$\u3002\n\n## \u4ee3\u7801\u5c55\u793a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=3010,Mod=998244353;\nstring s,t;\nint n,m,dp[3010][3010];\nint main(){\n\tcin>>s>>t;\n\tn=s.size();m=t.size();\n\tfor(int i=1;i<=m;i++){//\u8d4b\u521d\u59cb\u503c\n\t\tif(s[0]==t[i-1]){\n\t\t\tdp[i][i]=2;\n\t\t}\n\t}\n\tfor(int i=m+1;i<=n;i++){\n\t\tdp[i][i]=2;\n\t}\n\tfor(int l=2;l<=n;l++){//\u6c42dp\n\t\tfor(int i=1;i+l-1<=n;i++){\n\t\t\tint j=i+l-1;\n\t\t\tif(j>m||s[l-1]==t[j-1]){\n\t\t\t\tdp[i][j]+=dp[i][j-1];\n\t\t\t\tdp[i][j]%=Mod;\n\t\t\t}\n\t\t\tif(i>m||s[l-1]==t[i-1]){\n\t\t\t\tdp[i][j]+=dp[i+1][j];\n\t\t\t\tdp[i][j]%=Mod;\n\t\t\t}\n\t\t}\n\t}\n\tint sum=0;\n\tfor(int i=m;i<=n;i++){//\u7edf\u8ba1\u7b54\u6848\n\t\tsum+=dp[1][i];\n\t\tsum%=Mod;\n\t}\n\tprintf(\"%d\",sum);\n\treturn 0;\n}\n```\n",
        "postTime": 1603434451,
        "uid": 90176,
        "name": "xixiup",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1336C \u3010Kaavi and Magic Spell\u3011"
    },
    {
        "content": "\u9996\u5148\u8fd9\u9053\u9898\u4e4d\u4e00\u770b\u6ca1\u6709\u4efb\u4f55\u601d\u8def\uff0c\u672c\u4eba\u60f3\u5230\u7684\u662f\u201c\u540e\u7f00\u81ea\u52a8\u673a\uff0c\u540e\u7f00\u6570\u7ec4\uff0c\u540e\u7f00\u6811\u201d\u80fd\u4e0d\u80fd\u505a\uff0c\u7b54\u6848\u662f\uff1a\u6211\u4e5f\u4e0d\u77e5\u9053\uff08\u56e0\u4e3a\u6211\u4e5f\u4e0d\u662f\u5bf9\u7740\u4e09\u4e2a\u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\u548c\u719f\u6089\uff0c\u5982\u679c\u6709\u4eba\u7528\u8fd9\u4e09\u79cd\u65b9\u6cd5\u505a\u51fa\u6765\u4e86\uff0c\u79c1\u4fe1\u6211\u8c22\u8c22\uff09\u3002\u4f46\u662f\u6211\u53ef\u4ee5\u544a\u8bc9\u4f60\uff0c\u8fd9\u9053\u9898\u53ef\u4ee5\u7528 DP \u6765\u89e3\u51b3\u3002\n\n### \u5b9a\u72b6\u6001\n\n\u6211\u4eec\u5b9a\u4e49 $f_{i,j}$ \u4e3a\u7528 $s_1$ \u5230 $s_{j-i+1}$ \u6839\u636e\u9898\u76ee\u4e2d\u7684\u89c4\u5219\uff0c\u586b\u5145 $t_i$ \u5230 $t_j$ \u7684\u65b9\u6848\u6570\u3002\n\n\u6211\u4eec\u5728\u5b9a\u4e49 $S,T$ \u7684\u957f\u5ea6\u4e3a $n,m$\u3002\n\n### \u8f6c\u79fb\u65b9\u7a0b\n\n\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u4e2a**\u533a\u95f4DP**\u7684\u5b9a\u4e49\u65b9\u5f0f\uff0c\u6240\u4ee5\u8f6c\u79fb\u65b9\u7a0b\u5f88\u597d\u60f3\uff0c\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a\n\n$$f_{i,j}=\\max \\begin{cases} f_{i+1,j}+f_{i,j-1}&(i>m|t_i=s_{j-i})\\&(j>m|t_j=s_{j-i})\\\\f_{i+1,j}&i>m|t_i=s_{j-i}\\\\f_{i,j-1}&j>m|t_j=s_{j-i}\\\\0 \\end{cases}$$\n\nQ1\uff1a\u4e3a\u4ec0\u4e48 $i$ \u4f1a\u5927\u4e8e $m$\uff1f\nA1\uff1a\u56e0\u4e3a\u6211\u4eec\u62fc\u51fa\u7684\u5b57\u7b26\u4e32 $A$ \u7684\u957f\u5ea6\u4e0d\u4e00\u5b9a\u5c0f\u4e8e $T$ \u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u5728\u62fc\u5b8c\u524d $m$ \u4e2a\u5b57\u7b26\uff0c\u540e\u9762\u53ef\u4ee5\u968f\u4fbf\u62fc\uff0c\u6545 $i>m$ \u65f6\uff0c\u53ef\u4ee5\u968f\u4fbf\u62fc\u5b57\u7b26\u3002\n\n### \u8fb9\u754c\n\n\u6211\u4eec\u5728\u4e0a\u9762\u8bf4\u8fc7\uff1a$i,j\\geqslant m$ \u662f\u53ef\u4ee5\u7684\uff0c\u6240\u4ee5 $i$ \u8981\u5faa\u73af\u5230 $n$\u3002\u4f46\u662f\u6ce8\u610f\u533a\u95f4DP\u7684\u5e38\u89c1\u9519\u8bef\uff01\u5148\u679a\u4e3e\u957f\u5ea6\uff0c\u518d\u679a\u4e3e\u8d77\u70b9\uff01\n\n### \u521d\u59cb\u5316\n\n\u5f88\u660e\u663e\u6211\u4eec\u8981\u521d\u59cb\u5316 $f_{i,i}$\u3002\n\n$$f_{i,i}=\\max \\begin{cases}2&i>m|t_i=s_1\\\\0\\end{cases}$$\n\n\u548c\u4e0a\u9762\u7684\u8f6c\u79fb\u65b9\u7a0b\u5f88\u7c7b\u4f3c\u3002\u539f\u56e0\u4e0d\u518d\u8d58\u8ff0\u3002\n\n### \u5199\u4ee3\u7801\n\n**\u6ce8\u610f\u6211\u7528\u7684\u662f string\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u4e0b\u8868\u4ece $0$ \u5f00\u59cb\u3002\u6240\u4ee5\u53ef\u80fd\u4f1a\u548c\u4e0a\u9762\u7684\u8f6c\u79fb\u65b9\u7a0b\u6709\u4e00\u4e9b\u4e0d\u540c\u4e4b\u5904\uff08\u4e3b\u8981\u662f\u8fb9\u754c\uff09\u3002**\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nint read() {\n\tchar ch=getchar();\n\tint f=1,x=0;\n\twhile(ch<'0'||ch>'9') {\n\t\tif(ch=='-')\n\t\t\tf=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9') {\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f*x;\n}\n\nconst int maxn=3000+10,mod=998244353; \n\nint n,m,f[maxn][maxn];\nstring s,t;\n\nsigned main() {\n\t\n\tcin>>s>>t;\n\tn=s.size();\n\tm=t.size();\n\t\n\tfor(int i=0;i<n;i++) {\n\t\tif(i>=m||t[i]==s[0]) {\n\t\t\tf[i][i]=2;\n\t\t}\n\t}\n\tfor(int len=2;len<=n;len++) {\n\t\tfor(int i=0;i<n;i++) {\n\t\t\tif(len+i-1>=n) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tint j=len+i-1;\n\t\t\tif(i>=m||t[i]==s[len-1]) {\n\t\t\t\tf[i][j]+=f[i+1][j];\n\t\t\t}\n\t\t\tif(j>=m||t[j]==s[len-1]) {\n\t\t\t\tf[i][j]+=f[i][j-1];\n\t\t\t}\n\t\t\tf[i][j]%=mod;\n\t\t}\n\t}\n\t\n\tint ans=0;\n\tfor(int i=m-1;i<n;i++){\n\t\tans+=f[0][i];\n\t\tans%=mod;\n\t}\n\t\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1587100354,
        "uid": 132976,
        "name": "huayucaiji",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1336C \u3010Kaavi and Magic Spell\u3011"
    }
]
[
    {
        "content": "\u6ca1\u597d\u597d\u8bfb\u9898\u88ab\u5751\u4e86QAQ\n\n\u9898\u4e2d\u8bf4\u201cA part of them is painted black according to the fractal pattern.\u201d\uff0c\u4e5f\u5c31\u662f\u4e00\u90e8\u5206\u4f1a\u88ab\u6d82\u6210\u9ed1\u8272\uff08\u55ef\u5c31\u662f\u6211\u987a\u53e3\u7ffb\u7684\u201c\u4efb\u610f\u7684\u6d82\u8272\u201d\uff09\n\n\u6240\u4ee5\u4e0d\u6b62\u56fe\u4e2d\u90a3\u4e00\u79cd\u60c5\u51b5\uff0c\u5168\u767d\u5230\u5168\u9ed1\u90fd\u662f\u53ef\u4ee5\u7684\n\n\u505a\u9898\u7684\u65f6\u5019\u770b\u6837\u4f8b\u4e00\u4ee5\u4e3a\u53ef\u4ee5\u65cb\u8f6cemmm...\uff0c\u4f46\u9898\u4e2d\u6ca1\u6709\u4efb\u4f55\u6709\u5173\u65cb\u8f6c\u7684\u8bf4\u6cd5\uff0c\u56e0\u4e3a\u672c\u8eab\u4e0d\u662f\u65cb\u8f6c\u800c\u662f\u672c\u8eab\u5c31\u53ef\u4ee5\u5f97\u5230\uff0c\u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/55631.png)\n\n\u90a3\u4e2a4$\\times$4\u5c31\u662f\u56fe\u4e2d\u84dd\u8272\u7684\n\n\u597d\u561b\uff0c\u6ca1\u88ab\u5751\u5230\u7684\u4eba\u80af\u5b9a\u8bf4\u6211\u5728\u5e9f\u8bdd\u4e86\n\n\u90a3\u8c08\u8c08\u63a5\u4e0b\u6765\u600e\u4e48\u505a\n\n\u5047\u8bbe\u6211\u4eec\u75284\u4e2a\u5e03\u5c14\u53d8\u91cf\u6765\u8bb0\u5f55\u6700\u521d\u7684\u5206\u5f62 b[2][2]\n\n\u518d\u5047\u8bbe\u6211\u4eec\u7528\u4e00\u4e2a\u4e8c\u7ef4\u5b57\u7b26\u6570\u7ec4\u6765\u8bb0\u5f55\u4e86\u7b2ci\u6b21\u7684\u5206\u5f62\u56fe\u5f62\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u8003\u8651\u628a\u7b2ci+1\u6b21\u7684\u56fe\u5f62\u5206\u4e3a\u5de6\u4e0a\u3001\u5de6\u4e0b\u3001\u53f3\u4e0a\u3001\u53f3\u4e0b\uff0c4\u5757\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\n\n>\u8fd9\u4e2a\u4f4d\u7f6e\u6700\u521d\u4e3a\u9ed1\n\n>\u8fd9\u4e2a\u4f4d\u7f6e\u6700\u521d\u4e3a\u767d\n\n\u90a3\u4e48\uff0c\u5047\u5982\u8fd9\u4e2a\u4f4d\u7f6e\u6700\u521d\u4e3a\u9ed1\uff0c\u5b83\u4f9d\u65e7\u4e3a\u9ed1\uff0c\u5047\u5982\u4e3a\u767d\uff0c\u5b83\u5e94\u8be5\u586b\u5145\u7b2ci\u6b21\u7684\u5206\u5f62\u56fe\u5f62\n\n\u8fd8\u662f\u770b\u56fe\u5427QAQ\n\n![](https://cdn.luogu.com.cn/upload/pic/55638.png)\n\n\u90a3\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u6784\u601d\uff0c\u6211\u4eec\u9996\u5148\u679a\u4e3e\u521d\u59cb\u7684\u72b6\u6001\uff0c\u7136\u540e\u6211\u4eec\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u64cd\u4f5c\u6b21\u6570\u4e0b\u54ea\u4e9b\u7b26\u5408\u5206\u5f62\u56fe\u5f62\uff0c\u9012\u63a8\u5c31\u597d\u4e86\n\n\u4ee3\u7801\u590d\u6742\u5ea6O($2^4\\times log_2{min(n,m)} \\times n \\times m \\times 4$)\n\n//CF\u795e\u673a\u53c8\u662f4s\u9898\u80fd\u8fc7\u7684\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n\nchar mp[512][512];\nint s[512][512];\nbool dp[12][512][512];\nint n, m;\nint sum(int l2, int r2, int l1, int r1){\n    return s[l2][r2] - s[l1-1][r2] - s[l2][r1-1] + s[l1-1][r1-1];\n}//\u524d\u7f00\u548c\nint dx[4]={0, 0, 1, 1}, dy[4] = {0, 1, 0, 1};\nint CountOne(int T){\n    memset(dp, 0, sizeof(dp));\n    memset(s, 0, sizeof(s));\n    for(int i(1); i <= n; ++i){\n        for(int j(1); j <= m; ++j){\n            s[i][j] = s[i-1][j] + s[i][j-1] - s[i-1][j-1] + mp[i][j];\n            dp[0][i][j] = !mp[i][j];\t\n        }\n    }//\u6bcf\u6b21\u64cd\u4f5c\u521d\u59cb\u5316\n    for(int i(1); i <= 10; ++i){\n        for(int j(1); j <= n - (1<<(i-1)); ++j){\n            for(int k(1); k <= m - (1<<i-1); ++k){\n                bool OK = true;\n                for(int t(0); t < 4 && OK; ++t){\n                    if(T&(1<<t)){\n                        OK &= sum(j+(1<<i-1)-1+dx[t]*(1<<i-1), k+(1<<i-1)*dy[t], j+dx[t]*(1<<i-1), k+1+(dy[t]-1)*(1<<i-1)) == (1 << 2*(i-1));\n                    }// Sum = Black\n                    else{\n                        OK &= dp[i-1][j+(1<<i-1)*dx[t]][k+(1<<i-1)*dy[t]];\n                    }// dp Ok\n                }//\u679a\u4e3e\u72b6\u6001\u6bcf\u4e00\u4f4d\n                if(OK) dp[i][j][k+(1<<i-1)] = true;//\u5f80\u4e0b\u9012\u63a8\n            }\n        }\n    }\n    int ans(0);\n    for(int i(2); i <= 10; ++i){\n        for(int j(1); j <= n; ++j){\n            for(int k(1); k <= m; ++k) ans += dp[i][j][k];\n        }\n    }\t\n    return ans;\n}\nint main(){\n    scanf(\"%d%d\", &n, &m);\n    for(int i(1); i <= n; ++i) scanf(\"%s\", mp[i] + 1);\n    for(int i(1); i <= n; ++i){\n        for(int j(1); j <= m; ++j){\n            mp[i][j] = (mp[i][j] == '*');\n        }\n    }\n    long long ans(0);\n    for(int i(0); i <= 15; ++i)\n        ans += CountOne(i);//\u72b6\u538b\u679a\u4e3e\u72b6\u6001\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n```\ndp[i][j][k]\u8868\u793a\u7b2ci(i-1?)\u6b21\u64cd\u4f5c\u4ee5(j,k)\u4e3a\u53f3\u4e0a\u89d2\u662f\u4e0d\u662f\u5206\u5f62\u56fe\u5f62\n\n\u6211\u7684\u4ee3\u7801\u662f\u4ee5\u53f3\u4e0a\u89d2\u4e3a\u8bb0\u5f55\u7684\u70b9\uff08\u56e0\u4e3a\u76f4\u63a5\u4ece\u521a\u5f00\u59cb\u9519\u7684\u6539\u8fc7\u6765\uff09\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u5f15\u8d77\u4e0d\u9002\uff0c\u5efa\u8bae\u4ee5\u8bb0\u5f55\u5de6\u4e0a\u89d2\u6240\u5728\u5408\u4e0d\u5408\u6cd5QwQ",
        "postTime": 1554106963,
        "uid": 32576,
        "name": "ygsldr",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF228C \u3010Fractal Detector\u3011"
    }
]
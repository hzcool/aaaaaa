[
    {
        "content": "### [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF36D)\n\uff08\u5982\u679c $\\LaTeX$ \u70b8\u4e86\uff0c\u8bf7\u5230\u535a\u5ba2[\u89c2\u770b](https://www.luogu.com.cn/blog/thats-me/ti-jie-cf36d-new-game-with-a-chess-piece)\uff09\n\n$\\Large\\mathscr{Part\\,\\,1\\;\\;}\\text{\u57fa\u672c\u601d\u8def}$\n\n\u8fd9\u91cc\u662f\u4eba\u8bdd\u7406\u89e3\u9898\u76ee\uff1a\u5728\u4e00\u4e2a $n \\times m$ \u7684\u68cb\u76d8\u4e0a\uff0c$(1,1)$ \u7684\u4f4d\u7f6e\u6709\u4e00\u4e2a\u68cb\u5b50\uff0c\u8fd9\u4e2a\u68cb\u5b50\u6bcf\u6b21\u80fd\u5f80\u4e0b\u8d70\u4e00\u683c\u6216\u5f80\u53f3\u8d70\u4e00\u683c\u6216\u5f80\u53f3\u4e0b\u79fb\u52a8 $k$ \u683c\uff0c\u6bcf\u6b21\u79fb\u52a8\u4e0d\u80fd\u8d85\u51fa\u68cb\u76d8\uff0c\u5982\u679c\u68cb\u5b50\u6070\u597d\u79fb\u52a8\u5230 $(n,m)$ \u5219\u79fb\u52a8\u7684\u4eba\u8d62\uff0c\u95ee\u4f60\u5982\u679c\u4f60\u5148\u624b\uff08\u5148\u79fb\u52a8\uff09\uff0c\u4f60\u662f\u5426\u6709\u5fc5\u80dc\u7b56\u7565\u3002\n\n\u4e0d\u96be\u60f3\uff0c\u5f53 $n,m$ \u6bd4\u8f83\u5c0f\u65f6\uff0c\u6211\u4eec\u80fd\u591f\u7528\u7b80\u5355\u7684\u6709\u5411\u65e0\u73af\u56fe\u89e3\u51b3\uff0c\u4f46\u8fd9\u91cc $1 \\leq n,m \\leq 10^{9}$\uff0c\u6240\u4ee5\u8fd9\u9898\u5c31\u53d8\u6210\u4e86\u4e00\u9053\u535a\u5f08\u8bba\u7684\u9898\u76ee\u3002\n\n\u73b0\u5728\u5df2\u77e5 $n,m,k$\uff0c\u6211\u4eec\u4e0d\u59a8\u8bbe $f\\ (\\ i\\ ,\\ j\\ )$ \u8868\u793a\u5f53\u68cb\u5b50\u5728 $(\\ i\\ ,\\ j\\ )$ \u65f6\uff0c\u5148\u624b\u662f\u5426\u80fd\u83b7\u80dc\uff0c\u7279\u522b\u5730\uff0c$f\\ (\\ 1\\ ,\\ 1\\ )=0$\u3002\u90a3\u4e48\u6839\u636e\u6211\u4eec\u7684\u5b9a\u4e49\uff0c$f\\ (\\ i\\ ,\\ j\\ )=\\neg\\ \\Big(\\ f\\ (\\ i-1\\ ,\\ j\\ )\\ \\land\\ f\\ (\\ i\\ ,\\ j-1\\ )\\ \\land\\ f\\ (\\ i-k\\ ,\\ j-k\\ )\\ \\Big)$\uff0c\u800c\u4e14\u8d85\u51fa\u68cb\u76d8\u5916\u7684\u5730\u65b9\u4e0d\u4f1a\u53c2\u4e0e\u8fd0\u7b97\u3002\n\n\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u5c31\u6765\u5206\u6790 $f\\ (\\ n\\ ,\\ m\\ )$ \u7684\u89c4\u5f8b\u3002\u5f88\u5bb9\u6613\u53d1\u73b0\uff0c\u5728\u7b2c\u4e00\u884c\u6216\u7b2c\u4e00\u5217\u65f6\uff0c\u80fd\u591f\u5f71\u54cd\u8fd9\u4e2a\u70b9\u7684\u503c\u53ea\u6709\u7b2c\u4e00\u884c\u7684\u4e0a\u4e00\u5217\u6216\u7b2c\u4e00\u5217\u7684\u4e0a\u4e00\u884c\uff0c\u53c8\u5df2\u77e5 $f\\ (\\ 1\\ ,\\ 1\\ )=0$ \uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u548c\u7b2c\u4e00\u5217\u7684 $f$ \u503c\u5747\u662f $0,1$ \u4ea4\u66ff\u51fa\u73b0\u7684\u3002\u63a5\u4e0b\u6765 $k-1$ \u884c\u548c $k-1$ \u5217\uff0c\u7531\u4e8e $f\\ (\\ i\\ ,\\ j\\ )$ \u4e0d\u53d7 $f\\ (\\ i-k\\ ,\\ j-k\\ )$ \u7684\u5f71\u54cd\uff0c\u6240\u4ee5$f\\ (\\ i\\ ,\\ j\\ )=\\neg\\ \\Big(\\ f\\ (\\ i-1\\ ,\\ j\\ )\\ \\land\\ f\\ (\\ i\\ ,\\ j-1\\ )\\ \\Big)$\uff0c\u53c8\u7531\u4e8e\u7b2c\u4e00\u884c\u548c\u7b2c\u4e00\u5217\u7684\u503c\u662f $0,1$ \u4ea4\u66ff\u51fa\u73b0\u7684\uff0c\u6240\u4ee5\u524d $k$ \u884c\u548c\u524d $k$ \u5217\u5747\u662f $0,1$ \u4ea4\u66ff\u7684\u3002\u5982\u4e0b\u662f $k=3$ \u65f6\u7684 $f$ \u503c\uff1a\n\n$\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1$\n\n$\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0$\n\n$\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1$\n\n$\\ 1\\ 0\\ 1\\ \\ddots\\ \\ddots\\ \\ddots$\n\n$\\ 0\\ 1\\ 0\\ \\ddots\\ \\ddots\\ \\ddots$\n\n$\\ 1\\ 0\\ 1\\ \\ddots\\ \\ddots\\ \\ddots$\n\n\u901a\u8fc7\u4e0a\u8868\u53ef\u77e5\uff0c\u5728\u7b2c $k+1$ \u884c\u7684\u7b2c $k$ \u5217\u53ca $k+1$ \u5217\u7684\u7b2c $k$ \u884c\u540e\u7684\u6bcf\u4e2a\u6570\u5747\u4e3a $1$\uff0c\u5373\u5747\u80fd\u83b7\u80dc\u3002\u56e0\u4e3a\u5728\u7b2c $k+1$ \u884c\u7b2c $i$ \u5217\u6216\u5728\u7b2c $k+1$ \u5217\u7b2c $i$ \u884c\u65f6\uff0c\u82e5 $(i-k)\\equiv 1\\pmod 2$ \u5219\u7b2c $1$ \u884c\u7b2c $i-k$ \u5217\u6216\u7b2c $i-k$ \u884c\u7b2c $1$ \u5217\u4e00\u5b9a\u4e3a $0$\uff0c\u53cd\u4e4b\uff0c\u7b2c $k-1$ \u884c\u7b2c $i$ \u5217\u6216\u7b2c $i$ \u884c\u7b2c $k-1$ \u5217\u4e00\u5b9a\u4e3a $0$\u3002\u4e8e\u662f\uff0c\u5c31\u586b\u51fa\u4e86\u4e0b\u8868\uff1a\n\n$\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1$\n\n$\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0$\n\n$\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1\\ 0\\ 1$\n\n$\\ 1\\ 0\\ 1\\ 1\\ 1\\ 1\\ 1\\ 1\\ 1\\ 1$\n\n$\\ 0\\ 1\\ 0\\ 1\\ \\ddots\\ \\ddots\\ \\ddots$\n\n$\\ 1\\ 0\\ 1\\ 1\\ \\ddots\\ \\ddots\\ \\ddots$\n\n\u518d\u5f80\u4e0b\u586b $k$ \u884c\u548c $k$ \u5217\u65f6\uff0c\u53d1\u73b0 $\\ f\\ (\\ i\\ ,\\ j\\ )=\\neg \\ f\\ (\\ i-k-1\\ ,\\ j-k-1\\ )$\uff0c ~~\uff08\u5177\u4f53\u8bc1\u660e\u7565\uff0c\uff09~~ \u81ea\u7136\uff0c\u518d\u5f80\u4e0b\u586b $1$ \u884c $1$ \u5217\u65f6\uff0c\u8fd9 $1$ \u884c $1$ \u5217\u5747\u4e3a $1$\u3002\u9700\u8981\u6ce8\u610f\u7684\u60c5\u51b5\u662f\u5728\u7b2c $n \\times (k+1)$ \u884c\u7b2c $m$ \u5217\u65f6\uff0c\u82e5 $m < n \\times (k+1)$\uff0c\u5219\u5176\u6ee1\u8db3\u7684\u60c5\u51b5\u4e3a $0,1$ \u4ea4\u66ff\u3002\n\n\u800c\u4e14\u4e0d\u96be\u53d1\u73b0\uff0c$f$ \u7684\u503c\u5177\u6709\u5bf9\u79f0\u578b\uff0c\u6240\u4ee5 $f\\ (\\ n\\ ,\\ m\\ )=f\\ (\\ m\\ ,\\ n\\ )$\uff0c\u8fd9\u5bf9\u4e8e\u9700\u8981\u7279\u522b\u5224\u65ad\u5927\u5c0f\u7684\u60c5\u51b5\u6bd4\u8f83\u65b9\u4fbf\u3002\n\n\u7136\u540e\u8981\u6ce8\u610f\u7684\u662f\u5f53 $k=1$ \u65f6\uff0c\u9700\u8981\u7279\u5224\uff08\u56e0\u4e3a\u8fd9\u65f6\u4e0d\u6ee1\u8db3 $\\ f\\ (\\ i\\ ,\\ j\\ )=\\neg \\ f\\ (\\ i-k-1\\ ,\\ j-k-1\\ )$ \u7684\u6027\u8d28\uff09\u3002\n\n$\\Large\\mathscr{Part\\,\\,2\\;\\;}\\text{Code}$\n\n\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\uff0c\u552f\u4e00\u8981\u6ce8\u610f\u7684\u662f\u8981\u6ce8\u610f\u6587\u4ef6\u8f93\u5165\u8f93\u51fa\uff08\u867d\u7136\u4f60\u8c37\u4e0a\u6ca1\u6709\u4f46CF\u4e0a\u6709\uff09\u3002\n\n```cpp\n#include <cstdio>\nint t,k,n,m,div;\nvoid swap(int &a,int &b){a^=b^=a^=b;}\nint main(){\n\tfreopen(\"input.txt\",\"r\",stdin);\n\tfreopen(\"output.txt\",\"w\",stdout);\n\tscanf(\"%d%d\",&t,&k);\n\twhile(t--){\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tif(k==1){ //\u7279\u5224 k=1 \u65f6\u7684\u60c5\u51b5\n\t\t\tprintf(\"%c\\n\",((n&1)&(m&1)?'-':'+'));\n\t\t\tcontinue;\n\t\t}\n\t\tif(n<m) swap(n,m); //n \u4e00\u5b9a\u5927\u4e8e\u7b49\u4e8e m\n\t\tdiv=m/(k+1); //\u9009\u62e9\u5c0f\u7684\u6570\u4f5c\u5546\n\t\tn-=(k+1)*div; m-=(k+1)*div; //\u628a\u5f0f\u5b50\u5316\u7b80\n\t\tif(m==0) printf(\"+\\n\"); //\u552f\u4e00\u60c5\u51b5\u5373\u540c\u884c\u6216\u540c\u5217\u6709\u5fc5\u80dc\u7b56\u7565\n\t\telse printf(\"%c\\n\",((n&1)^(m&1))^(div&1)?'+':'-'); //\u5224\u65ad\u662f\u5426\u6709\u5fc5\u80dc\u7b56\u7565 \n\t}\n\treturn 0;\n}\n```\n\n\u798f\u5229\uff1a[$\\color{green}{AC}$](https://www.luogu.com.cn/record/33056287)\u540e\u522b\u5fd8\u4e86\u53bb\u9886[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/SP7602)\uff01",
        "postTime": 1587618041,
        "uid": 238421,
        "name": "A_Pikachu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF36D \u3010New Game with a Chess Piece\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u633a\u6709\u8da3\u7684\u3002\n\n\u591a\u5217\u51e0\u4e2a\u8868\uff08\u624b\u7b97\uff09\uff0c\u53d1\u73b0\u89c4\u5f8b\uff1a\u5f53$N,M$\u5927\u4e8e$2K+2$\u65f6\u4e0e$N \\bmod 2K+2,M \\bmod 2K+2$\u80dc\u8d1f\u60c5\u51b5\u662f\u4e00\u6837\u7684\u3002\n\n\u663e\u7136$M,N$\u4e92\u6362\u662f\u4e00\u6837\u7684\u3002\u8003\u8651$M \\ge N,N \\le 2K+2$\u7684\u60c5\u51b5\u3002\n\n\u6b64\u65f6\u5982\u679c$N=K+1$\u6216$2K+2$\uff0c\u5bb9\u6613\u53d1\u73b0\u5168\u662f\u5fc5\u80dc\u60c5\u51b5\u3002\n\n\u5982\u679c$N<K+1$\uff0c\u90a3\u4e48$M-N$\u4e3a\u5076\u6570\u65f6\u5fc5\u8d25\uff0c\u5426\u5219\u5fc5\u80dc\u3002\n\n\u5176\u4ed6\u60c5\u51b5$M-N$\u4e3a\u5947\u6570\u65f6\u5fc5\u8d25\uff0c\u5426\u5219\u5fc5\u80dc\u3002\n\n\u7136\u540e\u5c31\u51fa\u4ee3\u7801\u4e86\uff08\u8fd9\u9898\u8981\u6587\u4ef6\u8f93\u5165\u8f93\u51fa\uff0c\u6211\u5f53\u65f6\u6ca1\u6709\u770b\u5230CF\u4e0a\u4e00\u884c\u5c0f\u5b57\u5361\u4e86\u597d\u4e45\uff09\n\nCode:\n\n```cpp\n#include<cstdio>\nint T,N,M,K,L;\nint main()\n{\n    freopen(\"input.txt\",\"r\",stdin);\n    freopen(\"output.txt\",\"w\",stdout);\n    scanf(\" %d %d\",&T,&K);\n    while(T--)\n    {\n        scanf(\" %d %d\",&N,&M);\n        if(K==1)\n        {\n            printf(\"%c\\n\",((N&1)&(M&1))?'-':'+');\n            continue;\n        }\n        (N>M)&&(L=N,N=M,M=L);\n        L=N-((N-1)%(2*K+2)+1);\n        N-=L,M-=L;\n        L=M-N;\n        if(N<=K)printf(\"%c\\n\",(L&1)?'+':'-');\n        else if(N==K+1||N==2*K+2)printf(\"+\\n\");\n        else printf(\"%c\\n\",(L&1)?'-':'+');\n    }\n    fclose(stdin);\n    fclose(stdout);\n    return 0;\n}\n```",
        "postTime": 1567518813,
        "uid": 59388,
        "name": "VinstaG173",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF36D \u3010New Game with a Chess Piece\u3011"
    },
    {
        "content": "### \u89e3\u9898\u601d\u8def\uff1a\n\n~~\u8fd9\u79cd\u9898\u4e00\u770b\u5c31\u662f[\u6253\u8868](https://www.luogu.com.cn/paste/x5khu360)\u627e\u89c4\u5f8b\u554a\uff08\u6253\u8868\u7a0b\u5e8f\u89c1\u526a\u5207\u677f\uff09\u3002~~\n\n\u672c\u9898\u5982\u679c\u60f3\u6b63\u7ecf\u627e\u89c4\u5f8b\u7684\u8bdd\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $n$ \u548c $m$ \u90fd\u505a\u4e00\u904d\u662f\u5f88\u9ebb\u70e6\u7684\uff0c\u8003\u8651\u7528 $f_{n,m}$ \u8868\u793a\u8be5\u5927\u5c0f\u7684\u68cb\u76d8\u662f\u5148\u624b\u5fc5\u80dc\u8fd8\u662f\u540e\u624b\u5fc5\u80dc\u3002\n\n\u663e\u7136\uff0c$f_{1,1}$ \u662f\u5fc5\u8d25\u7684\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $f_{n,m}$ \u5982\u679c $f_{n-1,m}$\uff0c$f_{n,m-1}$ \u6216\u8005 $f_{n-k,m-k}$ \u4e2d\u6709\u4efb\u610f\u4e00\u4e2a\u662f\u5fc5\u8d25\u7684\uff0c\u90a3\u4e48\u505a\u51fa\u76f8\u5e94\u7684\u51b3\u7b56\u5c31\u662f\u5fc5\u80dc\u7684\u4e86\u3002\u5f62\u5f0f\u5316\u5730\uff0c\u6709\uff1a$f_{n,m}=(\\lnot f_{n-1,m})\\lor (\\lnot f_{n,m-1})\\lor (\\lnot f_{n-k,m-k})$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff08\u5efa\u8bae\u914d\u5408\u8868\u7406\u89e3\uff09\uff0c\u5f53 $n$ \u548c $m$ \u4e4b\u4e2d\u6709\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684\u65f6\u5019\uff0c$f_{n,m}=[\\text{n,m \u5947\u5076\u6027\u4e0d\u540c}]$\uff0c\u8fd9\u4e2a\u5c0f\u7684\u754c\u9650\u5728 $[1,k]$\u3002\u7136\u540e\u518d\u5927\u4e00\u70b9\uff0c\u5c31\u51fa\u73b0\u4e86\u5168\u662f $1$ \u7684\u533a\u57df\uff0c\u518d\u5927\u53c8\u662f $0$ \u548c $1$ \u76f8\u95f4\u6392\u5e03\uff0c\u4f46\u6b64\u65f6 $f_{n,m}=[\\text{n,m \u5947\u5076\u6027\u76f8\u540c}]$ \u4e5f\u5c31\u662f $\\lnot f_{n-k-1,m-k-1}$\uff0c\u7136\u540e\u518d\u51fa\u73b0\u4e00\u4e2a\u5168\u662f $1$ \u7684\u533a\u57df\u3002\u8fd9\u56db\u8005\u6784\u6210\u4e00\u4e2a\u5faa\u73af\u8282\uff0c\u957f\u5ea6\u4e3a $2k+2$\u3002\n\n\u8fd9\u6837\u5206\u5e03\u7684\u539f\u56e0\u662f\u6bd4\u8f83\u663e\u7136\u7684\uff0c\u4e00\u5f00\u59cb\u53ea\u80fd\u5411\u4e00\u4e2a\u65b9\u5411\u79fb\u52a8\u4e00\u6b65\uff0c\u540e\u6765\u51fa\u73b0\u4e86\u4e00\u4e2a\u989d\u5916\u7684\u51b3\u7b56\u70b9\uff0c\u672c\u7740\u80fd\u8d70\u5230 $0$ \u5c31\u8d70 $0$ \u7684\u65b9\u9488\uff0c\u8fd9\u4e00\u884c\u6216\u5217\u90fd\u662f $1$\uff0c\u7136\u540e\u4e0b\u4e00\u884c\u548c\u5217\u5931\u53bb\u4e86\u4e00\u4e2a\u5355\u5411\u79fb\u52a8\u7684\u51b3\u7b56\u65b9\u6848\uff0c\u4e8e\u662f\u6070\u597d\u548c\u4e4b\u524d\u7684\u90a3\u4e00\u90e8\u5206\u76f8\u53cd\u3002\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u8bb2\u4e00\u4e2a\u68cb\u76d8\u8f6c\u4e00\u4e0b\u4e0d\u4f1a\u6709\u4efb\u4f55\u53d8\u5316\uff0c\u6240\u4ee5\u4ea4\u6362 $n$ \u548c $m$ \u4e0d\u4f1a\u6709\u4efb\u4f55\u5f71\u54cd\u3002\n\n----\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint T,k,n,m;\nint main(){\n\tfreopen(\"input.txt\",\"r\",stdin);\n\tfreopen(\"output.txt\",\"w\",stdout);\n\tscanf(\"%d%d\",&T,&k);\n\twhile(T--){\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tif(k==1){\n\t\t\tif((n&1)&(m&1)==1)printf(\"-\\n\");\n\t\t\telse printf(\"+\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tif(n>m)swap(n,m);\n\t\tint del=n-(n-1)%(2*k+2)-1;\n\t\tn-=del;m-=del;\n\t\tif(n<=k){\n\t\t\tif((n&1)!=(m&1))printf(\"+\\n\");\n\t\t\telse printf(\"-\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tif(n==k+1||n==2*k+2){\n\t\t\tprintf(\"+\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tif((n&1)==(m&1))printf(\"+\\n\");\n\t\telse printf(\"-\\n\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1636531011,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF36D New Game with a Chess Piece"
    }
]
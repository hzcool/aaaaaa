[
    {
        "content": "\u6216\u8bb8\u7b97\u662f\u6027\u8d28\u9898\u3002\n\n\u6027\u8d28\uff1a\u82e5 $x$ \u7684\u51fa\u5ea6\u5927\u4e8e $y$ \u7684\u51fa\u5ea6\uff0c\u5219 $x$ \u53ef\u4ee5\u5230\u8fbe $y$\u3002\uff08\u672c\u9898\u7ed9\u7684\u662f\u5165\u5ea6\uff0c\u4f46\u7ade\u8d5b\u56fe\u4efb\u4f55\u70b9\u90fd\u548c\u5176\u5b83\u6240\u6709\u70b9\u6709\u4e14\u53ea\u6709\u4e00\u6761\u8fb9\uff0c\u6240\u4ee5\u51fa\u5ea6\u5c31\u662f  $(n-1)-\u5165\u5ea6$\uff09\u3002\n\n\u524d\u7f6e\u6027\u8d28\uff1a\u7ade\u8d5b\u56fe\u7f29\u70b9\u540e\u4e00\u5b9a\u662f\u4e00\u6761\u94fe\u3002\uff08~~\u8bfb\u8005\u4e0d\u96be\u81ea\u8bc1~~ \u82e5\u7f29\u5b8c\u70b9\u540e\u82e5 SCC \u4e2a\u6570\u4e0d\u8d85\u8fc7 $2$\uff0c\u663e\u7136\u6210\u7acb\u3002\u5426\u5219\u5bf9\u4e8e\u7f29\u5b8c\u70b9\u540e\u7684\u4efb\u610f $3$ \u4e2a SCC  $x$\uff0c$y$\uff0c$z$\uff0c\u6309\u7167\u7ade\u8d5b\u56fe\u7684\u5b9a\u4e49\u5b83\u4eec\u4e4b\u95f4\u4e24\u4e24\u6709\u8fb9\uff0c\u800c\u5176\u4e0d\u5c5e\u4e8e\u540c\u4e00\u4e2a SCC \u5373\u8fd9\u4e09\u6761\u8fb9\u4e0d\u6784\u6210\u73af\uff0c\u5219\u53ea\u80fd\u662f $x \\rightarrow y$\uff0c$x\\rightarrow z$\uff0c$y\\rightarrow z$\uff08$y\\rightarrow z$\uff0c$y\\rightarrow z$\uff0c$x\\rightarrow z$ \u8fd9\u7c7b\u662f\u4e00\u6837\u7684\uff09\u7684\u94fe\u7684\u5f62\u5f0f\uff09\n\n\u82e5 $x$ \u548c $y$ \u5728\u540c\u4e00\u4e2a SCC \u4e2d\u663e\u7136\u6210\u7acb\u3002\u5426\u5219\u7f29\u70b9\u540e\u62d3\u6251\u6392\u5e8f\uff0c\uff08\u5047\u8bbe\u5165\u5ea6\u4e3a $0$ \u7684 SCC \u4e3a\u94fe\u9876\uff0c\u6df1\u5ea6\u4e3a $0$\uff09\uff0c\u7531\u4e8e\u5b83\u4eec\u4e0d\u662f\u540c\u4e00\u4e2a SCC \uff0c\u6df1\u5ea6\u5c0f\u7684 SCC \u53ef\u4ee5\u901a\u8fc7\u94fe\u4e0a\u8fb9\u5230\u8fbe\u6df1\u5ea6\u5927\u7684 SCC \uff0c\u5219\u6df1\u5ea6\u66f4\u5927\u7684 SCC \u4e00\u5b9a\u6ca1\u6709\u8fb9\u6307\u5411\u6df1\u5ea6\u5c0f\u7684 SCC \u3002\u800c\u4efb\u610f\u4e24\u4e2a\u70b9\u4e4b\u95f4\u90fd\u6709\u6709\u5411\u8fb9\uff0c\u5219\u4efb\u610f\u4e00\u4e2a\u70b9 $x$ \u6709\u6307\u5411\u4efb\u610f\u6df1\u5ea6\u5927\u4e8e $x$ \u6240\u5728 SCC \u7684 SCC \u4e2d\u7684\u70b9\u7684\u8fb9\u3002\u5219\u5bf9\u4e8e\u4e0d\u5728\u540c\u4e00\u4e2a SCC \u91cc\u7684\u70b9\uff0c\u51fa\u5ea6\u66f4\u5927\u7684\u70b9\u6240\u5728 SCC \u6df1\u5ea6\u66f4\u5c0f\uff0c\u5fc5\u5b9a\u80fd\u5230\u8fbe\u6df1\u5ea6\u66f4\u5927\u7684 SCC \u91cc\u7684\u70b9\u3002\n\n\u7531\u6027\u8d28\u53ef\u77e5\uff0c\u51fa\u5ea6\u5927\uff0c\u5373\u672c\u9898\u4e2d\u5165\u5ea6 $k$ \u5c0f\u7684\u70b9\uff0c\u5fc5\u5b9a\u80fd\u5230\u8fbe\u51fa\u5ea6\u5c0f\uff08\u5165\u5ea6\u5927\uff09\u7684\u70b9\uff0c\u6240\u4ee5\u4e24\u4e2a\u70b9\u80fd\u5426\u53cc\u5411\u5230\u8fbe\u53ea\u9700\u8981\u77e5\u9053\u51fa\u5ea6\u8f83\u5c0f\uff08\u5165\u5ea6\u8f83\u5927\uff09\u7684\u70b9\u80fd\u5426\u5230\u8fbe\u53e6\u4e00\u4e2a\u70b9\u5373\u53ef\u3002\u628a\u6240\u6709\u70b9\u5bf9\u6309\u7167 $k$ \u503c\u7684\u5dee\u503c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u6309\u987a\u5e8f\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u8fd9\u5bf9\u70b9\u4e2d\u51fa\u5ea6\u8f83\u5c0f\uff08\u5165\u5ea6\u8f83\u5927\uff09\u7684\u70b9\u80fd\u5426\u5230\u8fbe\u53e6\u4e00\u4e2a\u70b9\uff0c\u53ea\u8981\u83b7\u5f97 `Yes` \u56de\u7b54\u5c31\u8f93\u51fa\u5f53\u524d\u8be2\u95ee\u7684\u70b9\u5bf9\u5373\u53ef\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=550;\nint n,tot,k[N];//k\u662f\u5165\u5ea6\nstruct node\n{\n    int x,y;\n    bool operator<(const node &t)const\n    {\n        return abs(k[x]-k[y])>abs(k[t.x]-k[t.y]);\n    }\n}p[N*N];\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++) cin>>k[i];\n    for(int i=1;i<=n;i++)\n        for(int j=i+1;j<=n;j++)\n            p[++tot]={i,j};\n    sort(p+1,p+tot+1);\n    for(int i=1;i<=tot;i++)\n    {\n        int x=p[i].x,y=p[i].y;\n        if(k[x]<k[y]) swap(x,y);\n        cout<<\"? \"<<x<<' '<<y<<endl;\n        string ch; cin>>ch;\n        if(ch==\"Yes\") \n        {\n            cout<<\"! \"<<x<<' '<<y<<endl;\n            return 0;\n        }\n    }\n    cout<<\"! 0 0\"<<endl;\n    return 0;\n}\n```\n",
        "postTime": 1670458209,
        "uid": 546246,
        "name": "E_huan",
        "ccfLevel": 8,
        "title": "CF1498E Two Houses \u9898\u89e3"
    },
    {
        "content": "### \u6b64\u9898\u65e0\u9700\u8be2\u95ee\uff0c\u53ef\u4ee5\u7ebf\u6027\u6c42\u51fa\u6240\u6709\u5f3a\u8fde\u901a\u5206\u91cf\u3002\n> [\u9898\u76ee\u94fe\u63a5](https://codeforces.com/contest/1498/problem/E) [\u53ef\u80fd\u66f4\u597d\u7684\u4f53\u9a8c](http://coding-pages-bucket-3532178-8430896-13917-522304-1305159063.cos-website.ap-hongkong.myqcloud.com/CF1498E/)\n>\n> \u6709\u4e00\u5f20 $n$ \u4e2a\u70b9\u7684\u7ade\u8d5b\u56fe\u3002\n>\n> \u4e0d\u4f1a\u7ed9\u8fd9\u5f20\u7ade\u8d5b\u56fe\uff0c\u4f46\u4f1a\u7ed9\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6 $k_i$\u3002\n>\n> \u8fd8\u53ef\u4ee5**\u901a\u8fc7\u4ea4\u4e92**\u8be2\u95ee\u4ece $u$ \u80fd\u5426\u5230\u8fbe $v$\uff0c\u4f46\u4e00\u65e6\u56de\u7b54\u4e86\u201d\u662f\u201c\uff0c\u5c31\u4e0d\u80fd\u518d\u8be2\u95ee\u4e86\u3002\n>\n> \u5b9a\u4e49\u4e00\u4e2a\u70b9\u5bf9 $(u,v)$ \u7684\u4ef7\u503c\u662f $|k_u-k_v|$\u3002\n>\n> \u6c42\u6240\u6709\u53cc\u5411\u53ef\u8fbe\u7684\u70b9\u5bf9\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u4e00\u5bf9\uff0c\u6216\u8005\u8f93\u51fa\u65e0\u89e3\u3002\u5982\u679c\u6709\u591a\u5bf9\uff0c\u8f93\u51fa\u4efb\u610f\u4e00\u5bf9\u3002\n>\n> $n \\le 500$\n\n\u8003\u8651\u62d3\u6251\u5e8f\u6700\u5c0f\u7684\u51e0\u4e2a**\u5f3a\u8fde\u901a\u5206\u91cf**\u7684\u5e76\u96c6 $S$\uff0c$S$ \u5185\u7684\u70b9\u5168\u90e8\u5411 $S$ \u5916\u7684\u70b9\u8fde\u8fb9\uff0c\u6240\u4ee5 $S$ \u5185\u6240\u6709\u70b9\u7684\u5165\u5ea6\u548c\u7b49\u4e8e $\\binom {|S|}2$\uff0c**\u53cd\u4e4b\u4ea6\u7136**\u3002\n\n> \u5f15\u7406\uff1a\u5728\u7ade\u8d5b\u56fe\u4e2d\uff0c\u5982\u679c $u$ \u80fd\u5230\u8fbe $v$ \u800c $v$ \u4e0d\u80fd\u5230\u8fbe $u$\uff0c\u5373 $u$ \u7684\u62d3\u6251\u5e8f\u4e25\u683c\u5c0f\u4e8e $v$\uff0c\u90a3\u4e48 $k_u < k_v$\n> \n> \u8bc1\u660e\uff1a\u5982\u679c $v$ \u4e0d\u80fd\u5230\u8fbe $u$\uff0c$\\exists S,u \\in S \\land \\forall x \\in S, y \\not \\in S,x \\rightarrow y$\uff0c\u5373\u96c6\u5408 $S$ \u5185\u7684\u70b9\u5168\u90e8\u5411 $S$ \u5916\u7684\u70b9\u8fde\u8fb9\u3002\n> \n> $\\therefore k_v \\ge |S|,k_u < |S| \\Rightarrow k_u < k_v$\n\n\u628a\u6240\u6709\u70b9\u6309\u5165\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5982\u679c\u524d $m$ \u4e2a\u8282\u70b9\u7684\u5165\u5ea6\u548c\u7b49\u4e8e $\\binom m2$\uff0c\u90a3\u4e48\u524d $m$ \u4e2a\u70b9\u4e00\u5b9a\u662f\u62d3\u6251\u5e8f\u6700\u5c0f\u7684\u51e0\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u7684\u5e76\u96c6\uff0c**\u5e76\u4e14\u4e0d\u4f1a\u6f0f\u6389**\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5206\u79bb\u51fa\u6240\u6709\u7684\u5f3a\u8fde\u901a\u5206\u91cf\uff0c\u76f4\u63a5\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O(n)$\uff0c\u56e0\u4e3a\u6392\u5e8f\u53ef\u4ee5\u6876\u6392\uff0c**\u65e0\u9700\u8be2\u95ee**\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define rep(i, l, r) for(int i = (l); i <= (r); i++)\n#define per(i, r, l) for(int i = (r); i >= (l); i--)\n#define mem(a, b) memset(a, b, sizeof a)\n#define For(i, l, r) for(int i = (l), i##e = (r); i < i##e; i++)\n#define fi first\n#define se second\n#define mp make_pair\n\nusing namespace std;\nconst int N = 505;\ntypedef pair <int, int> P;\nint n; P a[N];\nint main() {\n\tcin >> n;\n\trep(i, 1, n) scanf(\"%d\", &a[i].fi), a[i].se = i;\n\tsort(a + 1, a + n + 1);\n\tint su = 0; P mi(n, 0), ma(-1, 0);\n\tpair <int, P> as;\n\trep(i, 1, n) {\n\t\tsu += a[i].fi;\n\t\tmi = min(mi, a[i]), ma = max(ma, a[i]);\n\t\tif(su == i * (i - 1) / 2) {\n\t\t\tif(mi.se ^ ma.se) as = max(as, mp(ma.fi - mi.fi, mp(mi.se, ma.se)));\n\t\t\tmi.fi = n, ma.fi = -1;\n\t\t}\n\t}\n\tif(as.se.fi) printf(\"! %d %d\\n\", as.se.fi, as.se.se);\n\telse puts(\"! 0 0\");\n\tfflush(stdout);\n\treturn 0;\n}\n```",
        "postTime": 1617152224,
        "uid": 177524,
        "name": "plate_let",
        "ccfLevel": 9,
        "title": "Two Houses | Codeforces 1498E"
    },
    {
        "content": "# $\\mathcal{Translate}$\n\n\u6709\u4e00\u4e2a $n$ \u4e2a\u70b9\u7684\u7ade\u8d5b\u56fe\uff0c\u5176\u4e2d $i$ \u7684\u5165\u5ea6\u4e3a $k_i$\uff0c\u4f60\u53ef\u4ee5\u8fdb\u884c\u4ea4\u4e92\uff0c\u6bcf\u6b21\u8be2\u95ee\u70b9\u5bf9 $(A,B)$\uff0c\u56de\u7b54\u662f\u5426\u5b58\u5728 $A$ \u5230 $B$ \u7684\u8def\u5f84\uff0c\u5982\u679c\u56de\u7b54\u4e3a \"Yes\" \u5219\u4e0d\u80fd\u518d\u8be2\u95ee\uff0c\u5426\u5219\u53ef\u4ee5\u7ee7\u7eed\u8be2\u95ee\u3002\n\n\u6c42\u51fa\u4e00\u4e2a\u70b9\u5bf9 $(A,B)$ \uff0c\u5176\u4e2d $A,B$ \u53ef\u4ee5\u4e92\u76f8\u5230\u8fbe\uff0c\u5e76\u4e14 $|k_A-k_B|$  \u6700\u5927\u3002\n\n$3\\leq n\\leq 500$\u3002\n\n# $\\mathcal{Solution}$\n\n\u63d0\u4f9b\u4e00\u4e2a $\\mathcal{O}(n)$ \u4e14\u4e0d\u9700\u8981\u8be2\u95ee\u7684[\u505a\u6cd5](https://codeforces.com/blog/entry/89137?#comment-775682)\u3002\n\n\u7b80\u5355\u6765\u8bf4\u662f\uff1a\u6309\u7167\u5165\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5982\u679c\u5230\u524d $i$ \u4e2a\u7684\u5165\u5ea6\u548c\u6070\u597d\u4e3a $i\\times(i-1)/2$\uff0c\u5219\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684\u5f3a\u8fde\u901a\u5206\u91cf\uff0c\u5047\u8bbe\u4e0a\u4e00\u6b21\u7b26\u5408\u6761\u4ef6\u7684\u662f $lst$\uff0c\u5219 $[lst+1,i]$ \u6784\u6210\u4e86\u4e00\u4e2a\u65b0\u7684\u5f3a\u8fde\u901a\u5206\u91cf\u3002\n\n\u8fd9\u6837\u904d\u5386\u4e00\u904d\u5c31\u53ef\u4ee5\u6c42\u51fa\u6bcf\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u91cc\u6709\u54ea\u4e9b\u70b9\uff0c\u5c31\u80fd\u7edf\u8ba1\u51fa\u7b54\u6848\u4e86\u3002\n\n\u6392\u5e8f\u9009\u62e9\u8ba1\u6570\u6392\u5e8f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n)$\u3002\n\n# $\\mathcal{Code}$\n\n```cpp\n//Code by do_while_true\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<vector>\n#define pp std::pair<int,int>\n#define mp std::make_pair\n#define fir first\n#define sec second\ntemplate <typename T>\nT& read(T& r) {\n\tr = 0; bool w = 0; char ch = getchar();\n\twhile(ch < '0' || ch > '9') w = ch == '-' ? 1 : 0, ch = getchar();\n\twhile(ch >= '0' && ch <= '9') r = r * 10 + (ch ^ 48), ch = getchar();\n\treturn r = w ? -r : r;\n}\nconst int N = 510;\nint n, mx = -1, lst, sum, ansu, ansv, ct;\nstd::vector<int>vec[N];\npp a[N];\nsigned main() {\n\tread(n);\n\tfor(int i = 1, x; i <= n; ++i) {\n\t\tread(x);\n\t\tvec[x].push_back(i);\n\t}\n\tfor(int i = 0; i <= n; ++i)\n\t\tfor(auto j : vec[i])\n\t\t\ta[++ct] = mp(i, j);\n\tfor(int i = 1; i <= n; ++i) {\n\t\tsum += a[i].fir;\n\t\tif(sum == i * (i-1) / 2) {\n\t\t\tif(lst != i-1) {\n\t\t\t\tint now = a[i].fir - a[lst+1].fir;\n\t\t\t\tif(now > mx)\n\t\t\t\t\tmx = now,\n\t\t\t\t\tansu = a[lst+1].sec,\n\t\t\t\t\tansv = a[i].sec;\n\t\t\t}\n\t\t\tlst = i;\n\t\t}\n\t}\n\tprintf(\"! %d %d\\n\", ansu, ansv);\n\treturn 0;\n}\n```\n\n# $\\mathcal{Proof}$\n\n\u7ade\u8d5b\u56fe\u6709\u4e2a\u7ecf\u5178\u7ed3\u8bba\uff0c\u5176\u5f3a\u8fde\u901a\u7f29\u70b9\u540e\u7684DAG\u5448\u7c7b\u4f3c\u4e8e\u94fe\u72b6, \u524d\u9762\u7684\u6240\u6709\u70b9\u5411\u540e\u9762\u7684\u6240\u6709\u70b9\u8fde\u8fb9\u3002\u7f51\u4e0a\u80fd\u641c\u5230\u5f88\u591a\u8bc1\u660e\uff0c\u8fd9\u91cc\u5c31\u4e0d\u91cd\u590d\u8bba\u8ff0\u4e86\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c**\u62d3\u6251\u5e8f\u5728\u524d\u7684SCC\u7684\u4efb\u610f\u4e00\u8282\u70b9\u7684\u5165\u5ea6**\u4e25\u683c\u5c0f\u4e8e**\u62d3\u6251\u5e8f\u5728\u540e\u7684SCC\u7684\u4efb\u610f\u4e00\u8282\u70b9\u5165\u5ea6**\u3002\u56e0\u4e3a\u524d\u9762\u7684SCC\u7684\u70b9\u5fc5\u5b9a\u5411\u540e\u9762\u7684SCC\u7684\u70b9\u8fde\u8fb9\u3002\n\n\u6240\u4ee5\u6240\u6709\u8282\u70b9\u6309\u7167\u5165\u5ea6\u548c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u540e\uff0c\u540c\u4e00\u4e2aSCC\u7684\u8282\u70b9\u4e00\u5b9a\u662f\u8fde\u7eed\u7684\u3002\n\n---\n\n\u5f15\u7406\u4e00\uff1a\u82e5\u4e00\u4e2a\u7ade\u8d5b\u56fe\u6309\u7167\u5165\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u4ec5\u6709 $i=n$ \u6ee1\u8db3\u524d $i$ \u7684\u5165\u5ea6\u548c\u4e3a $i\\times (i-1)/2$\uff0c\u5219\u8fd9\u4e2a\u7ade\u8d5b\u56fe\u7f29\u70b9\u540e\u53ea\u6709\u4e00\u4e2aSCC\u3002\n\n\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5982\u679c\u6709\u591a\u4e2aSCC\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2aSCC\u82e5\u4ee5 $j$ \u7ed3\u5c3e\uff0c\u4e00\u5b9a\u6ee1\u8db3\u5165\u5ea6\u548c\u4e3a $j\\times(j-1)/2$\uff0c\u4e0e\u4ec5\u6709 $i=n$ \u65f6\u6ee1\u8db3\u4e0d\u7b26\u3002\n\n---\n\n$\\mathcal{Solution}$ \u4e2d\u7684\u7ed3\u8bba\u7684\u5fc5\u8981\u6027\u6bd4\u8f83\u663e\u7136\uff0c\u5728\u6b64\u4e0d\u591a\u8d58\u8ff0\u3002\n\n\u8003\u8651 $Solution$ \u4e2d\u63d0\u5230\u7684\u6b65\u9aa4\uff0c\u7531\u5f15\u7406\u4e00\u5f97\uff0c\u82e5\u7b2c\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u4e3a $i$ \uff0c\u5219\u524d $i$ \u4e2a\u8282\u70b9\u5728\u540c\u4e00\u4e2aSCC\uff0c\u56e0\u4e3a\u524d $i$ \u4e2a\u8282\u70b9\u4e4b\u95f4\u4e92\u76f8\u53ea\u6709 $i\\times(i-1)/2$ \u6761\u8fb9\uff0c\u800c\u5165\u5ea6\u4e5f\u6b63\u597d\u7edf\u8ba1\u5230\u4e86\u8fd9\u4e48\u591a\u8fb9\uff0c\u6240\u4ee5\u53ef\u4ee5\u770b\u6210\u5f15\u7406\u4e00\u7684\u60c5\u51b5\u3002\n\n\u73b0\u5728\u5df2\u7ecf\u6c42\u51fa\u7b2c\u4e00\u4e2aSCC\u4e86\uff0c\u5982\u679c\u6211\u4eec\u627e\u5230\u7684\u7b2c\u4e8c\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u70b9\u5728 $j$ \u3002\n\n\u7531\u4e8e\u6ee1\u8db3\u5fc5\u8981\u6027\uff0c\u6240\u4ee5\u6b64\u65f6\u8003\u8651\u524d $j$ \u4e2a\u8282\u70b9\u65f6\uff0c\u8981\u4e0d\u7136\u662f\u4e24\u4e2a SCC\uff0c\u8981\u4e0d\u7136\u540e\u9762\u7684\u7ec4\u6210\u4e0d\u4e86SCC\u3002\n\n\u8bbe\u7b2c\u4e00\u4e2aSCC\u4e3a\u96c6\u5408 $L$\uff0c\u5176\u5927\u5c0f\u4e3a $l$\u3002\u540e\u9762\u7684\u70b9\u7ec4\u6210\u7684\u96c6\u5408\u4e3a $R$\uff0c\u5176\u5927\u5c0f\u4e3a $r$\u3002\n\n\u53ea\u8003\u8651 $L$\uff0c\u5219\u4ed6\u4eec\u7684\u5165\u5ea6\u548c\u4e3a $\\sum\\limits_{k=0}^{l-1}k=l\\times(l-1)/2$\uff0c\u7531\u4e8e\u56fe\u4e3a\u7ade\u8d5b\u56fe\uff0c\u6240\u4ee5 $L$ \u4e2d\u7684\u6bcf\u4e2a\u70b9\u4e00\u5b9a\u90fd\u4e0e $R$ \u4e2d\u6bcf\u4e2a\u70b9\u76f8\u8fde\uff0c\u4e14\u8fd9\u4e9b\u6709\u5411\u8fb9\u4e00\u5b9a\u662f\u671d\u5411 $R$ \u4e2d\u7684\u70b9\uff0c\u8fd9\u4e00\u90e8\u5206\u7684\u5165\u5ea6\u548c\u4e3a $l\\times r=\\sum\\limits_{k=l}^{j-1}l$\u3002\n\n\u603b\u7684\u5165\u5ea6\u548c\u4e3a $j\\times(j-1)/2=\\sum\\limits_{k=0}^{j-1}k$\uff0c\u53d1\u73b0\u8fd9\u4e2a\u6c42\u548c\u4e0e\u524d\u9762\u4e24\u4e2a\u6c42\u548c\u7684\u5dee\u503c\u6070\u597d\u4e3a $\\sum\\limits_{k=l}^{j-1}k-l=\\sum\\limits_{k=0}^{r-1}k$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c$R$ \u5185\u90e8\u7684\u70b9\u7684\u5165\u5ea6\u548c\u4e3a $\\sum\\limits_{k=0}^{r-1}k=r\\times(r-1)/2$\uff0c\u7531\u5f15\u7406\u4e00\u53ef\u5f97 $R$ \u53ef\u7ec4\u6210\u4e00\u4e2aSCC\u3002\n\n\u8fd9\u662f\u4e24\u4e2a\u7684\u60c5\u51b5\uff0c\u6ce8\u610f\u5230\u5bf9\u4e8e $L$ \u6765\u8bf4\uff0c\u4ec5\u4f7f\u7528\u5230\u4e86 $L$ \u5185\u90e8\u7684\u5165\u5ea6\u548c\u4e3a $l\\times(l-1)/2$ \uff0c\u4ee5\u53ca $L$ \u4e2d\u7684\u6bcf\u4e2a\u70b9\u4e00\u5b9a\u90fd\u4e0e $R$ \u4e2d\u6bcf\u4e2a\u70b9\u76f8\u8fde\uff0c\u5c06  $L$ \u6269\u5c55\u4e3a\u524d $k$ \u4e2aSCC\u7684\u70b9\u7ec4\u6210\u7684\u96c6\u5408\u540c\u6837\u6ee1\u8db3\u8fd9\u4e24\u6761\u6027\u8d28\u3002\n\n\u7ed3\u8bba\u7684\u5145\u5206\u6027\u5f97\u8bc1\u3002\n\n---\n\n\u672c\u6587\u5373\u4f7f\u7565\u53bb\u4e00\u4e9b\u7e41\u7410\u7684\uff0c\u4e0d\u5fc5\u8981\u7684\u63a8\u5bfc\uff0c\u4ecd\u663e\u5f97\u7bc7\u5e45\u7565\u957f\u3002\u5982\u6709\u8d28\u7591\u6216\u5efa\u8bae\u6b22\u8fce\u63d0\u51fa\u3002",
        "postTime": 1617115168,
        "uid": 223298,
        "name": "do_while_true",
        "ccfLevel": 8,
        "title": "CF1498E Two Houses \u9898\u89e3 \u2014\u2014 \u5982\u4f55\u7528\u7ed3\u8bba\u540a\u6253\u6807\u7b97"
    },
    {
        "content": "\u9996\u5148\u8fd9\u9053\u9898\u7ed9\u5b9a\u7684\u56fe\u662f\u7ade\u8d5b\u56fe\u3002\n\n\u7ade\u8d5b\u56fe\u662f\u4e00\u5f20\u5b8c\u5168\u56fe\uff0c\u5bf9\u6bcf\u6761\u8fb9\u6307\u5b9a\u4e00\u4e2a\u65b9\u5411\u5f97\u5230\u7684\u6709\u5411\u56fe\u3002\n\n\u7ade\u8d5b\u56fe\u62e5\u6709\u4e00\u4e9b\u6bd4\u8f83\u795e\u5947\u7684\u6027\u8d28\uff0c\u6bd4\u5982\u5bf9\u4e8e\u4efb\u610f\u4e00\u5f20\u7ade\u8d5b\u56fe\uff0c\u4e00\u5b9a\u5305\u542b\u4e00\u6761\u54c8\u5bc6\u987f\u8def\u5f84\u3002\n\n\u7136\u800c\u8fd9\u4e2a\u6027\u8d28\u5728\u8fd9\u9053\u9898\u4e2d\u7528\u4e0d\u5230\uff0c\u6211\u4eec\u9700\u8981\u53d1\u6398\u5176\u4ed6\u6027\u8d28\u3002\n\n\u6bd4\u5982\u8fd9\u9053\u9898\u7684\u4ea4\u4e92\u65b9\u5f0f\u5df2\u7ecf\u544a\u8bc9\u4e86\u6211\u4eec\u89e3\u6cd5\u3002\n\n\u5728\u6211\u4eec\u5f97\u5230\u7b2c\u4e00\u4e2a$\\texttt{Yes}$\u540e\u9700\u8981\u7ed3\u675f\u8be2\u95ee\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6211\u4eec\u9700\u8981\u6784\u9020\u8be2\u95ee\u4f7f\u5f97\u5f97\u5230\u7684$\\texttt{Yes}$\u80fd\u544a\u8bc9\u6211\u4eec\u4e24\u70b9\u662f\u5f3a\u8fde\u901a\u7684\u3002\n\n\u9898\u76ee\u8fd8\u7ed9\u5b9a\u4e86\u5165\u5ea6$k_i$\uff0c\u6211\u4eec\u53ef\u4ee5\u731c\u6d4b\uff0c\u5982\u679c\u5165\u5ea6\u5927\u7684\u70b9\u80fd\u591f\u5230\u8fbe\u5165\u5ea6\u5c0f\u7684\u70b9\uff0c\u5219\u4e24\u4e2a\u70b9\u5f3a\u8fde\u901a\u3002\n\n\u8bc1\u660e\uff1a\n\n\u6211\u4eec\u5bf9\u7ade\u8d5b\u56fe\u4f7f\u7528\u5f3a\u8fde\u901a\u5206\u91cf\u7f29\u70b9\uff0c\u7136\u540e\u8dd1\u62d3\u6251\u6392\u5e8f\u3002\u5219\u5728\u62d3\u6251\u5e8f\u4e2d\u76f8\u90bb\u7684\u4e24\u4e2a\u5206\u91cf\uff0c\u7b2c\u4e00\u4e2a\u5206\u91cf\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u70b9\u5fc5\u5b9a\u5411\u7b2c\u4e8c\u4e2a\u5206\u91cf\u4e2d\u6240\u6709\u70b9\u8fde\u8fb9\uff0c\u5219\u51fa\u5ea6$\\ge sz_r$\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5206\u91cf\u4e0d\u80fd\u5411\u7b2c\u4e00\u4e2a\u5206\u91cf\u8fde\u8fb9\uff0c\u56e0\u4e3a\u5982\u679c\u53f3\u8fb9\u5219\u53ef\u4ee5\u7ee7\u7eed\u7f29\u70b9\uff0c\u6240\u4ee5\u51fa\u5ea6$<sz_r$\u3002\u5bf9\u4e8e\u5176\u4f59\u7684\u8054\u901a\u5206\u91cf\uff0c\u7531\u4e8e\u662f\u5b8c\u5168\u56fe\uff0c\u5219\u4e0e\u4e24\u4e2a\u8054\u901a\u5206\u91cf\u4e2d\u8fde\u6709\u76f8\u540c\u65b9\u5411\u7684\u8fb9\u3002\n\n\u6240\u4ee5\u5982\u679c\u4e24\u4e2a\u70b9$k_i<k_j$\uff0c\u5219 $i$ \u7684\u51fa\u5ea6\u5927\u4e8e $j$ \u7684\u51fa\u5ea6\u3002\u5982\u679c $i,j$ \u5728\u4e00\u4e2a\u8054\u901a\u5206\u91cf\uff0c\u5219\u663e\u7136\u5f3a\u8fde\u901a\u3002\u5426\u5219 $i$ \u4e00\u5b9a\u80fd\u5230\u8fbe $j$\uff0c\u5982\u679c $j$ \u53c8\u80fd\u5230\u8fbe $i$\uff0c\u5219\u4e24\u4e2a\u70b9\u5f3a\u8fde\u901a\u3002\n\n\u4e00\u4e2a\u6ca1\u6709\u592a\u5927\u7528\u7684\u6027\u8d28\uff0c\u5c31\u662f\u5bf9\u4e8e $k=0$ \u7684\u70b9 \uff0c\u53ea\u6709\u51fa\u8fb9\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u70b9\u5220\u6389\uff0c\u5e76\u5c06\u5176\u4ed6 $k$ \u51cf $1$\u3002\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u4ea4\u4e92\u6b21\u6570\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define N 505\nusing namespace std;\nint n,T;\ntypedef pair<int,int> Pr;\nPr k[N];\nstruct node{\n\tint l,r,val;\n\tbool operator<(const node o)const{\n\t\treturn val>o.val;\n\t}\n}a[N*N];\nint main(){\n\tcin>>n;\n\trep(i,1,n)cin>>k[i].first,k[i].second=i;\n\tsort(k+1,k+n+1);\n\tint j=1;\n\twhile(j<=n&&k[j].first==0){\n\t\trep(u,j+1,n)k[u].first--;\n\t\tj++;\n\t}\n\trep(x,j,n)rep(y,x+1,n)a[++T].l=k[x].second,a[T].r=k[y].second,a[T].val=k[y].first-k[x].first;\n\tsort(a+1,a+T+1);\n\trep(i,1,T){\n\t\tcout<<\"? \"<<a[i].r<<\" \"<<a[i].l<<endl;\n\t\tstring op;cin>>op;\n\t\tif(op==\"Yes\"){cout<<\"! \"<<a[i].l<<\" \"<<a[i].r<<endl;return 0;}\n\t}\n\tcout<<\"! 0 0\"<<endl;\n\treturn 0;\n} \n```",
        "postTime": 1617065988,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "CF1498E Two Houses\u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\n\n\u6709\u4e00\u4e2a $n$ \u4e2a\u8282\u70b9\u7684\u7ade\u8d5b\u56fe\uff0c\u7ed9\u5b9a\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6 $k_i$\uff0c\u4f46\u4e0d\u77e5\u9053\u5177\u4f53\u7684\u8fde\u8fb9\u65b9\u6848\u3002\n\n\u73b0\u5728\u4f60\u53ef\u4ee5\u8be2\u95ee ```? x y``` \u6765\u67e5\u8be2\u662f\u5426\u53ef\u4ee5\u4ece $x$ \u51fa\u53d1\u5230\u8fbe $y$\u3002\u5982\u679c\u53ef\u4ee5\uff0c\u8fd4\u56de $\\texttt{Yes}$\uff0c\u5426\u5219\u8fd4\u56de $\\texttt{No}$\u3002\u5728\u5f97\u5230\u4e00\u6b21 $\\texttt{Yes}$ \u7684\u7ed3\u679c\u540e\u5fc5\u987b\u505c\u6b62\u8be2\u95ee\u3002\n\n\u8981\u6c42\u4e24\u4e2a\u70b9 $x,y$ \u6ee1\u8db3\uff1a\u8fd9\u4e24\u4e2a\u70b9\u53ef\u4ee5\u76f8\u4e92\u8fbe\u5230\u3002\u8f93\u51fa $|k_x-k_y|$ \u7684\u4e00\u4e2a\u70b9\u5bf9\u3002\u5982\u679c\u6709\u591a\u7ec4\uff0c\u8f93\u51fa\u4efb\u610f\u5373\u53ef\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8f93\u51fa ```! 0 0```\u3002\n\n---\n\n### Solution\n\n\u7ade\u8d5b\u56fe\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u6027\u8d28\uff1a\u7f29\u5b8c\u70b9\u7684\u56fe\u662f\u4e00\u4e2a DAG\uff0c\u5e76\u4e14\u62d3\u6251\u5e8f\u5c0f\u7684\u70b9\u5411\u540e\u9762\u6240\u6709\u7684\u70b9\u90fd\u6709\u8fde\u8fb9\u3002\n\n\u524d\u9762\u76f8\u4e92\u5230\u8fbe\u7684\u9650\u5236\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u8981\u6c42\u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u5185\u3002\n\n\u6613\u8bc1\uff1a\u6309\u7167 DAG \u7684\u62d3\u6251\u5e8f\u6392\u5217\u7684\u5f3a\u8fde\u901a\u5206\u91cf\uff0c\u5185\u90e8\u7684\u6bcf\u4e00\u4e2a\u70b9\u7684\u5165\u5ea6\u90fd\u6bd4\u4e4b\u524d\u7684\u5f3a\u8fde\u901a\u5206\u91cf\u5185\u90e8\u7684\u70b9\u4e25\u683c\u8981\u5927\u3002\n\n\u56e0\u4e3a\u6bcf\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u5185\u90e8\uff0c\u5047\u8bbe\u6709 $x$ \u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u4ece\u5185\u90e8\u83b7\u5f97\u7684\u5165\u5ea6\u8d21\u732e\u6700\u591a\u4e3a $x-2$\uff08\u4e00\u4e2a\u70b9\u7684\u8bdd\u4e3a $0$\uff09\uff0c\u800c\u5bf9\u62d3\u6251\u5e8f\u9760\u540e\u7684\u5f3a\u8fde\u901a\u5206\u91cf\u5185\u90e8\u7684\u6240\u6709\u70b9\u90fd\u6709 $x$ \u7684\u8d21\u732e\u3002\n\n\n\u90a3\u4e48\u53ea\u8981\u628a\u6240\u6709\u4e8c\u5143\u7ec4 $(x,y),k_x\\le k_y$ \u585e\u5165\u4e00\u4e2a\u5806\u4e2d\uff0c\u4ee5 $|k_x-k_y|$ \u4e3a\u5173\u952e\u5b57\u7ef4\u62a4\u4e00\u4e2a\u5927\u6839\u5806\uff0c\u62ff\u51fa\u6765\u7684\u65f6\u5019\uff0c\u8be2\u95ee ```? y x``` \u5373\u53ef\u3002\u5982\u679c\u8fd4\u56de $\\texttt{Yes}$\uff0c\u8bf4\u660e\u5b83\u4eec\u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u5757\u5185\uff08\u82e5\u4e0d\u5728\uff0c\u540e\u9762\u7684\u5f3a\u8fde\u901a\u5206\u91cf\u65e0\u6cd5\u5230\u8fbe\u524d\u9762\u7684\uff0c\u4f1a\u8fd4\u56de $\\texttt{No}$\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u5f53\u524d\u6700\u4f18\u79c0\u7684\u4e8c\u5143\u7ec4\u3002\n\n---\n\n\n### Code\n\n```cpp\n#include <stdio.h>\n#include <algorithm>\n#define LL long long\nusing namespace std;\ninline LL rin()\n{\n    LL x=0;\n    char c;\n    bool tag=false;\n    for(c=getchar();c>'9'||c<'0';c=getchar())if(c=='-'){c=getchar();tag=true;break;}\n    for(;c>='0'&&c<='9';c=getchar())x=(x<<1)+(x<<3)+(c^'0');\n    if(tag)x=-x;\n    return x;\n}\ninline bool get_typ(){char c=getchar(),x;for(;c!='Y'&&c!='N';c=getchar());if(c=='Y')return true;return false;}\ninline void jh(int &x,int &y){if(x^y)x^=y^=x^=y;return;}\ninline int min(int x,int y){return x<y?x:y;}\ninline int max(int x,int y){return x>y?x:y;}\nconst int N=5e2+3;\nint n;\nint k[N];\ninline int que(int x,int y){printf(\"? %d %d\\n\",x,y);fflush(stdout);return get_typ();}\n\nint cutt;\npair<int,int>a[N*N];\nint val[N*N];\nint d[N*N];\nint num[N*N];\nint tail;\ninline void jh_(int &x,int &y){jh(d[x],d[y]);jh(x,y);return;}\ninline void up(int x){if(x==1)return;if(val[d[x]]>val[d[x>>1]])jh_(num[d[x]],num[d[x>>1]]),up(x>>1);return;}\ninline void down(int x)\n{\n    if((x<<1)>tail)return;\n    int nxt=x;if(val[d[x<<1]]>val[d[nxt]])nxt=x<<1;if(((x<<1)|1)<=tail&&val[d[(x<<1)|1]]>val[d[nxt]])nxt=(x<<1)|1;\n    if(nxt!=x)jh_(num[d[x]],num[d[nxt]]),down(nxt);return;\n}\ninline int top(){return d[1];}\ninline void pop_top(){jh_(num[d[1]],num[d[tail]]);tail--;down(1);return;}\ninline void push(int x){d[++tail]=x;num[x]=tail;up(tail);return;}\ninline void work()\n{\n    n=rin();\n    if(n==2){puts(\"! 0 0\\n\");fflush(stdout);}\n    for(int i=1;i<=n;i++)k[i]=rin();\n    for(int i=1;i<=n;i++)for(int j=i+1;j<=n;j++)a[++cutt]=make_pair(i,j),val[cutt]=abs(k[i]-k[j]);\n    for(int i=1;i<=cutt;i++)push(i);\n    for(;tail;)\n    {\n        int now=top();pop_top();\n        int x=a[now].first,y=a[now].second;if(k[x]>k[y])jh(x,y);\n        if(k[x]==k[y]){printf(\"! %d %d\\n\",x,y);fflush(stdout);return;}\n        if(que(y,x)){printf(\"! %d %d\\n\",x,y);fflush(stdout);return;}\n    }\n    puts(\"! 0 0\\n\");fflush(stdout);\n    return;\n}\nint main()\n{\n    work();\n    return 0;\n}\n\n```",
        "postTime": 1617036886,
        "uid": 73551,
        "name": "zjjws",
        "ccfLevel": 7,
        "title": "CF1498E. Two Houses"
    }
]
[
    {
        "content": "[Hard version link](https://www.luogu.com.cn/blog/Rhodoks/solution-cf1286c2)\n\n\u9898\u610f\uff1a\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32$s$\uff0c\u53ef\u4ee5\u8be2\u95ee3\u6b21\u5b83\u7684\u5b50\u4e32$s[l..r]$\uff0c\u8fd4\u56de\u8fd9\u4e00\u5b50\u4e32\u7684\u6240\u6709\u5b50\u4e32\uff0c\u5e76\u4e14\u5b50\u4e32\u95f4\u7684\u987a\u5e8f\u4e0e\u5b50\u4e32\u5185\u90e8\u5b57\u7b26\u7684\u987a\u5e8f\u5168\u90e8\u6253\u4e71\u3002\u81f3\u591a\u8be2\u95ee\u4e09\u6b21\uff0c\u5e76\u4e14\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u6570\u4e0d\u80fd\u8d85\u8fc7$(n+1)^2$\u4e2a\u3002\u8f93\u51fa$s$\u3002\n\n\u8003\u8651\u8be2\u95ee$s[1..n]$\u548c$s[2..n]$\uff0c\u5171\u8ba1\u8fd4\u56de\u5b57\u7b26\u4e32\u6570\u4e3a$\\frac{n*(n+1)}{2}+\\frac{n*(n-1)}{2}=n^2$\uff0c\u8be2\u95ee\u6b21\u6570\u4e3a2\uff0c\u6ee1\u8db3\u8981\u6c42\u3002\n\n\u76f8\u5bf9\u4e8e$s[2..n]$\uff0c\u8be2\u95ee$s[1..n]$\u5f97\u5230\u7684\u5b50\u4e32\u989d\u5916\u589e\u52a0\u4e86$s[1..i](1 \\leq i \\leq n)$,\u5982\u679c\u6211\u4eec\u80fd\u591f\u5f97\u5230\u8fd9$n$\u4e2a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u957f\u5ea6\u533a\u5206\u51fa\u4ed6\u4eec\u3002$s[1..i]$\u6bd4$s[1..i-1]$\u591a\u51fa\u6765\u7684\u90a3\u4e00\u4e2a\u5b57\u7b26\uff0c\u4fbf\u662f\u5b57\u7b26\u4e32\u7b2c$i$\u4f4d\u4e0a\u7684\u5b57\u7b26\u3002\n\n\u4f7f\u7528$\\text{sort}$\u548c$\\text{multiset}$\u5b9e\u73b0\u53bb\u91cd\uff0c\u9996\u5148\u5c06\u8bfb\u5165\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e32\u90fd\u8fdb\u884c\u4e00\u904d\u6392\u5e8f\uff0c\u8fd9\u6837\u4e24\u4e2a\u7531\u540c\u6837\u5b57\u7b26\u7ec4\u6210\uff08\u987a\u5e8f\u53ef\u4ee5\u4e0d\u540c\uff09\u7684\u5b57\u7b26\u4e32\u4f1a\u5f97\u5230\u540c\u4e00\u4e2a\u7ed3\u679c\u3002\u672c\u9898\u4e2d\u56e0\u4e3a\u5b50\u4e32\u88ab\u6253\u4e71\uff0c\u987a\u5e8f\u5e76\u4e0d\u91cd\u8981\u3002\n\n\u5c06$s[1..n]$\u8be2\u95ee\u7684\u7ed3\u679c\u63d2\u5165$\\text{multiset}$\uff0c\u518d\u628a$s[2..n]$\u8be2\u95ee\u7684\u7ed3\u679c\u4ece$\\text{multiset}$\u4e2d\u5220\u6389\uff0c\u90a3\u4e48\u6700\u540e\u5269\u4e0b\u6765\u7684$n$\u4e2a\u5b57\u7b26\u4e32\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u7ed3\u679c\u3002\u4f9d\u6b64\u53ef\u4ee5\u590d\u539f\u51fa\u539f\u4e32\u3002\n\ncode:\n```cpp\n#include <bits/stdc++.h>\n#define _ 0\nusing namespace std;\n \nstring s;\nmultiset<string> st;\nstring ss[110];\n \nchar ans[1000];\nbool cmp(string s1,string s2)\n{\n\treturn s1.size()<s2.size();\n}\nint buc[1100];\nint main()\n{\n\tint n;\n\tcin>>n;\n\tif (n==1)\n\t{\n\t\tcout<<\"? \"<<1<<' '<<1<<'\\n';\n\t\tfflush(stdout);\n\t\tchar c;\n\t\tcin>>c;\n\t\tcout<<\"! \"<<c;\n\t\tfflush(stdout);\n\t\treturn 0;\n\t}\n\tcout<<\"? \"<<1<<' '<<n<<'\\n';\n\tfflush(stdout);\n\tfor (int i=0;i<n*(n+1)/2;i++)\n\t{\n\t\tcin>>s;\n\t\tsort(s.begin(),s.end());\n\t\tst.insert(s);\t\n\t} \n\tcout<<\"? \"<<2<<' '<<n<<'\\n';\n\tfflush(stdout);\n\tfor (int i=0;i<n*(n-1)/2;i++)\n\t{\n\t\tcin>>s;\n\t\tsort(s.begin(),s.end());\n\t\tst.erase(st.find(s));\t\n\t} \n\tint cnt=0;\n\tfor (auto p:st)\n\t{\n\t\tss[cnt++]=p;\n\t}\n\tsort(ss,ss+cnt,cmp);\n\tans[0]=ss[0][0];\n\t\n\tfor (int i=1;i<cnt;i++)\n\t{\n\t\tfor (auto p:ss[i-1])\n\t\t\tbuc[p]--;\n\t\tfor (auto p:ss[i])\n\t\t\tbuc[p]++;\n\t\tfor (int j=0;j<255;j++)\n\t\t\tif (buc[j]>0)\n\t\t\t{\n\t\t\t\tbuc[j]=0;\n\t\t\t\tans[i]=j;\n\t\t\t}\n\t}\n\tcout<<\"! \"<<ans;\n\tfflush(stdout);\n\treturn ~~(0^_^0);\n}\n```\n",
        "postTime": 1578288429,
        "uid": 56267,
        "name": "Rhodoks",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1286C1 \u3010Madhouse (Easy version)\u3011"
    }
]
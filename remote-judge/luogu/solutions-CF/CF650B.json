[
    {
        "content": "\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u5c3a\u53d6\u6cd5\u6765\u505a\uff0c\u56e0\u4e3a\u7ffb\u5f00\u7684\u7167\u7247\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e24\u4e2a\u53d8\u91cf\u8868\u793a\u5de6\u53f3\u4e24\u4e2a\u7aef\u70b9\u3002\u56e0\u4e3a\u7b2c $1$ \u5f20\u5de6\u8fb9\u662f\u7b2c $n$ \u5f20\uff0c\u7b2c $n$ \u5f20\u53f3\u8fb9\u662f\u7b2c $1$ \u5f20\uff0c $n$ \u5f20\u7167\u7247\u56f4\u6210\u4e86\u4e00\u5708\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a $n$ \u5f20\u590d\u5236\u4e00\u4efd\uff0c\u63a5\u5728\u539f\u6765\u7684 $n$ \u5f20\u540e\u9762\uff0c\u8fd9\u6837\u957f\u5ea6\u5c31\u53d8\u6210\u4e86 $2n$ \u3002\n\n\u4e0b\u9762\u6765\u8bf4\u5de6\u53f3\u4e24\u4e2a\u7aef\u70b9\u7684\u8c03\u6574\uff0c\u8bbe\u5de6\u7aef\u70b9\u4e3a $l$ \uff0c\u53f3\u7aef\u70b9\u4e3a $r$ \u3002\n\n$l$\u4e00\u5f00\u59cb\u662f $1$ \uff0c $r$ \u4e00\u5f00\u59cb\u662f $n$ \u3002\u6bcf\u6b21\u8c03\u6574\u9996\u5148\u5c06 $r$ \u589e\u52a0 $1$ \uff0c\u7136\u540e\u589e\u52a0 $l$ \uff0c\u76f4\u5230 $l-r$ \u533a\u95f4\u7684\u548c $\\le$ $t$ \uff0c\u8fd8\u6709\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5c31\u662f $t$ $\\lt$ \u7ffb\u5f00 $n$ \u5f20\u7167\u7247\u7684\u603b\u65f6\u95f4\uff0c\u8fd9\u65f6 $r$ $-$ $l$ $>$ $n$\uff0c\u663e\u7136\u662f\u4e0d\u6210\u7acb\u7684\uff0c\u4e5f\u8981\u7ee7\u7eed\u589e\u52a0 $l$ \uff0c\u6bcf\u6b21\u8c03\u6574\u540e\u653e\u5165\u957f\u5ea6\u5c31\u662f $r-l$ \uff0c\u53d6\u4e00\u4e2a\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint q[1000005];\nchar c[500005];\nint main(){\n    int n, a, b, t, ans = 0, s = 0; //ans\u8868\u793a\u6700\u591a\u53ef\u4ee5\u770b\u7684\u7167\u7247\u5f20\u6570\uff0cs\u8868\u793a\u7ffb\u5f00l-r\u533a\u95f4\u7684\u65f6\u95f4\n    cin >> n >> a >> b >> t >> c; //\u8f93\u5165\n    for(int i = 0; i < n; i++){ //q[i]\u8868\u793a\u770b\u7b2ci\u5f20\u7684\u65f6\u95f4\n        if(c[i] == 'w') q[i] = q[i+n] = b + 1;\n        else q[i] = q[i+n] = 1;\n        if(i != 0) //\u7b2c\u4e00\u5f20\u672c\u6765\u5c31\u662f\u7ffb\u5f00\u7684\n        \ts += q[i]; //\u52a0\u4e0a\u7b2ci\u5f20\u7684\u65f6\u95f4\n    }\n    int l = 1, r = n; //l\u8868\u793a\u5de6\u7aef\u70b9\uff0cr\u8868\u793a\u53f3\u7aef\u70b9\n    while(l <= n && r < 2 * n){ //\u8fb9\u754c\u6761\u4ef6\n        s += q[r]; //\u52a0\u4e0a\u7b2cr\u5f20\u7684\u65f6\u95f4\n        r++; //\u8c03\u6574r\n        while(r - l > n || s + (r - l - 1 + min(r - n - 1, n - l)) * a > t){ //\u4e0d\u6210\u7acb\u65f6\u6216l-r\u533a\u95f4\u7684\u548c>t\u65f6\u8c03\u6574l\n            s -= q[l]; //\u51cf\u53bb\u7b2ci\u5f20\u7684\u65f6\u95f4\n            l++; //\u8c03\u6574l\n        }\n        ans = max(ans, r - l); //\u53d6\u6700\u5927\u503c\n    }\n    cout << ans << endl; //\u8f93\u51fa\n    return 0;\n}\n```\n\u3002\n\n",
        "postTime": 1597541154,
        "uid": 200429,
        "name": "chufuzhe",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF650B \u3010Image Preview\u3011"
    },
    {
        "content": "\u9898\u76ee\u610f\u601d\uff1a\u4ece\u7b2c\u4e00\u5f20\u7167\u7247\u5f00\u59cb\u770b\uff0c\u53ef\u4ee5\u5411\u5de6\u7ffb\u6216\u8005\u5411\u53f3\uff0c\u7b2c1\u5f20\u5de6\u8fb9\u662f\u7b2cn\u5f20\uff0c\u7b2cn\u5f20\u53f3\u8fb9\u662f\u7b2c\u4e00\u5f20\uff0c\u7ffb\u4e00\u6b21\u8981a\u65f6\u95f4\uff0c\u7167\u7247\u6709'w'\u548c'h'\u4e24\u79cd\u6446\u653e\uff0c\u2018w\u2019\u7684\u7167\u7247\u8981\u8017\u8d39b\u65f6\u95f4\u7ffb\u8f6c\uff0c\u770b\u4e00\u5f20\u7167\u7247\u89811\u4e2a\u5355\u4f4d\u65f6\u95f4\uff0c\u4e00\u5171\u6709T\u4e2a\u5355\u4f4d\u65f6\u95f4\uff0c\u95ee\u6700\u591a\u53ef\u4ee5\u770b\u591a\u5c11\u5f20\u7167\u7247\uff1f\n\n\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u770b\u7167\u7247\u6700\u591a\uff1a\u4e00\u5b9a\u662f\u5f80\u5de6\u7ffba\u4e2a\uff0c\u518d\u5f80\u53f3\u7ffbb\u4e2a\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u6765\u4e86\n\n\u600e\u6837\u6c42\u51faa\u3001b\uff0c\u8981\u679a\u4e3ea\u3001b\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(n^2)\u4f1a\u8d85\u65f6\n\n\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\n\n\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u4e8c\u5206\u53f3\u7aef\u70b9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(nlogn)\n\ncheck\u51fd\u6570\u5982\u4e0b\uff1a\n```\nbool check(int m)\n{\n    for(int i=1;i<=m;i++){//\u679a\u4e3e\u5de6\u7aef\u70b9\n        lint sum1=w[i]/*\u8fd9\u91ccw\u8868\u793a\u524d\u7f00\u548c*/+(w[n]-w[n-(m-i)]);//\u5411\u5de6\u7ffb\u770b\u9700\u8981\u7684\u65f6\u95f4\n        lint sum2=min((i-1)*a*2+(m-i)*a,(i-1)*a+(m-i)*a*2);//\u5411\u53f3\u7ffb\u770b\u9700\u8981\u7684\u65f6\u95f4\n        if(sum1+sum2<=t)return 1;//\u548c\u5c0f\u4e8et\u5219\u8fd4\u56de\u771f\n    }\n    return 0;\n}\n```\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long lint;//\u6700\u597d\u5f00long long\nconst int N=5e5+5;\nint n,a,b,t;\nlint w[N];\nchar s[N];\nbool check(int m)\n{\n    for(int i=1;i<=m;i++){\n        lint sum1=w[i]+(w[n]-w[n-(m-i)]);\n        lint sum2=min((i-1)*a*2+(m-i)*a,(i-1)*a+(m-i)*a*2);\n        if(sum1+sum2<=t)return 1;\n    }\n    return 0;\n}\nint main()\n{\n    scanf(\"%d%d%d%d%s\",&n,&a,&b,&t,s+1);\n    for(int i=1;i<=n;i++)w[i]=w[i-1]+1+(s[i]=='w'?b:0);//\u66f4\u65b0\u524d\u7f00\u548c\n    int l=0,r=n;\n    while(l<r){//\u4e8c\u5206\uff0c\u4e0d\u7528\u8bf4\n        int m=(l+r+1)/2;\n        if(check(m))l=m;\n        else r=m-1;\n    }\n    printf(\"%d\\n\",l);//\u8f93\u51fa\u7b54\u6848\n}\n```",
        "postTime": 1538889964,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF650B \u3010Image Preview\u3011"
    },
    {
        "content": "\u53cc\u6307\u9488\uff0c $O(n)$ \u3002\n\n\u5206 4 \u79cd\u60c5\u51b5\u8ba8\u8bba\u3002\u5411\u5de6\u5212\u3001\u5411\u53f3\u5212\u3001\u5148\u5411\u5de6\u518d\u5411\u53f3\u3001\u5148\u5411\u53f3\u518d\u5411\u5de6\u3002\u5c06\u7b2c 1 \u79cd\u548c\u7b2c 3 \u79cd\u5408\u5e76\uff0c\u5c31\u53ea\u7528\u8ba8\u8bba 3 \u79cd\u3002\n\n\u7b2c 2 \u79cd\u76f4\u63a5\u7b97\u5c31\u884c\uff0c\u540e\u4e24\u79cd\u5206\u522b\u7528\u53cc\u6307\u9488\u626b\u4e00\u904d\u3002\u6ce8\u610f\u7ec6\u8282\u3002\n\n\u8be6\u7ec6\u6ce8\u91ca\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=5e5+5;\nchar s[N];\nint d[N];\nint main(){\n\tint n,a,b,t,i,j,k,w=0;\n\tscanf(\"%d%d%d%d%s\",&n,&a,&b,&t,s+1),++b;\n\tfor(i=1;i<=n;++i)d[i]=s[i]=='w'?b:1;//\u770b\u6bcf\u4e2a\u7167\u7247\u6240\u7528\u65f6\u95f4\n\tif(d[1]>t)return puts(\"0\"),0;//\u7b2c\u4e00\u5f20\u90fd\u770b\u4e0d\u5b8c\uff0c\u76f4\u63a5\u9000\u51fa\n\tfor(i=1,j=d[1];j<=t&&i<=n;j+=d[++i]+a);//\u5411\u53f3\u5212\n\tw=i-1;\n\tif(w==n)return printf(\"%d\",w),0;//\u7167\u7247\u90fd\u80fd\u770b\u5b8c\uff0c\u76f4\u63a5\u9000\u51fa\n\tfor(i=1,j=d[1]+a+d[n];j<=t;j+=d[++i]+a+a);//\u5148\u5411\u53f3\u518d\u5411\u5de6\n\tfor(k=n;j-=d[i--]+a+a,i;){\n\t\twhile(j<=t)j+=d[--k]+a;\n\t\tj-=d[k++]+a,w=max(w,i+n-k+1);\n\t}\n\tfor(i=n,j=d[1]+a+d[n]+a;j<=t;j+=d[--i]+a+a);//\u5148\u5411\u5de6\u518d\u5411\u53f3\n\tfor(k=1;j-=d[i++]+a+a,i<=n;){\n\t\twhile(j<=t)j+=d[++k]+a;\n\t\tj-=d[k--]+a,w=max(w,k+n-i+1);\n\t}\n\tprintf(\"%d\",w);\n\treturn 0;\n}\n```\n",
        "postTime": 1583831089,
        "uid": 221955,
        "name": "panyf",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF650B \u3010Image Preview\u3011"
    },
    {
        "content": "~~\u597d\u5bb6\u4f19\uff0c\u9605\u8bfb\u7406\u89e3\u9898\u3002\u3002\u3002~~\n\n\u9898\u76ee\u7ffb\u8bd1\u6709\u4e00\u70b9\u6ca1\u8bf4\uff0c\u5c31\u662f\u5f53\u524d\u4f60\u770b\u8fc7\u4fee\u590d\u7684\u7167\u7247\u4f60\u53ea\u9700\u8981\u7528 $a$ \u4e2a\u65f6\u95f4\u5c31\u53ef\u4ee5\u8df3\u8fc7\u5b83\u3002\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u73af\u6bd4\u8f83\u96be\u5904\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u5b83\u53d8\u6210\u4e00\u6761\u94fe\u3002\n\n\u5c31\u662f\u628a\u5f53\u524d\u8fd9\u4e2a\u7ed9\u590d\u5236\u4e00\u4efd\u5230\u540e\u9762\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\u5c31\u662f\uff1a\n\n`wbw` \u53d8\u6210 `wbwwbw`\u3002\n\n\u7136\u540e\u6211\u4eec\u62ff\u53f3\u8fb9\u90a3\u4e2a\u5f00\u5934\u4f5c\u4e3a\u5f00\u5934\uff0c\u56e0\u4e3a\u80fd\u591f\u5f80\u53f3\u6216\u8005\u5f80\u5de6\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u7b54\u6848\u5176\u5b9e\u662f\u5177\u6709\u5355\u8c03\u6027\u7684\uff0c\u5c31\u662f\u4f60\u5f53\u524d\u53ef\u4ee5\u505a\u5230\u6bd4\u5982\u662f $6$ \u9875\uff0c\u90a3\u4e48\u4f60\u5fc5\u5b9a\u80fd\u627e\u5230\u4e00\u4e2a $5$ \u9875\uff0c\u4e5f\u662f\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\u7684\u3002\n\n\u6240\u4ee5\u6709\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u60f3\u6cd5\u5c31\u662f\u4e8c\u5206\u8fd9\u4e2a\u7b54\u6848\uff0c\u7136\u540e\u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u3002\n\n\u4e8c\u5206\u5b8c\u4e86\u4e4b\u540e\u60f3\u4e00\u60f3 `check` \u600e\u4e48\u5199\uff0c\u6211\u4eec\u8003\u8651\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u7136\u540e\u53ef\u4ee5\u786e\u5b9a\u53f3\u7aef\u70b9\uff0c\u4f46\u662f\u5fc5\u987b\u8ba9\u5f00\u5934\u5305\u542b\u5728\u4ed6\u4eec\u4e4b\u4e2d\u3002\n\n\u4f46\u662f\u5f88\u660e\u663e\u4f1a\u51fa\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u4f60\u5f53\u524d\u5982\u679c\u8bf4\u4e00\u76f4\u5f80\u5de6\u8d70\uff0c\u90a3\u4e48\u663e\u7136\u662f\u8981\u56de\u5934\u7684\uff0c\u5f80\u53f3\u4e5f\u540c\u7406\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5148\u770b\u9875\u6570\u5c11\u7684\uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u5f88\u6109\u5feb\u7684\u9a8c\u8bc1\u5b8c\u6210\u4e86\u3002\n\n\u8fd9\u8fb9\u6ce8\u610f\u8981\u7528\u524d\u7f00\u548c\u4f18\u5316\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\u3002\n\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5176\u5b9e\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u4f18\u5316\u6389\u3002\n\n\u5176\u5b9e\u679a\u4e3e\u5de6\u7aef\u70b9\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5bfb\u627e\u5230\u6700\u5927\u7684\u53f3\u7aef\u70b9\uff0c\u7136\u540e\u5de6\u7aef\u70b9 $+1$ \u7684\u65f6\u5019\uff0c\u53f3\u7aef\u70b9\u663e\u7136\u53ea\u4f1a\u53d8\u5927\u3002\n\n\u8fd9\u4e2a\u53ef\u4ee5\u7528\u53cc\u6307\u9488\u6765\u5b9e\u73b0\uff0c\u4e8e\u662f\u5c31\u53d8\u6210\u4e86 $O(n)$\u3002\n\n\u4ee3\u7801\u6211\u53ea\u7528\u4e86\u4e8c\u5206\u5c31\u8fc7\u6389\u4e86\uff0c~~\u53cc\u6307\u9488\u7ec6\u8282\u7a0d\u5fae\u591a\u4e86\u4ebf\u70b9\uff0c\u80fd\u7528\u4e8c\u5206\u8fd8\u662f\u7528\u4e8c\u5206\u5427\u3002\u3002\u3002~~\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long\nusing namespace std;\nconst int INF=1e6+5;\nint n,a,b,t,sum[INF];\nstring s1;\nbool check(int xx) {\n        int sum1=(xx-1)*a+xx;\n        for (int i=0; i<=n+n; i++) {\n                int l=i,r=i+xx-1;\n                if (l<=n+1 && n+1<=r) {\n                        int ll=sum[r]-sum[l-1]; ll*=b;\n                        int kk=min(r-(n+1),n+1-l)*a;\n                        // cout<<l<<\" \"<<r<<\" \"<<sum1<<\" \"<<ll<<\" \"<<kk<<\"\\n\";\n                        if (sum1+ll+kk<=t) return 1;\n                }\n        }\n        return 0;\n}\nsigned main()\n{\n        ios::sync_with_stdio(false);\n        cin>>n>>a>>b>>t;\n        cin>>s1; s1=\" \"+s1+s1;\n        for (int i=1; i<=n+n; i++)\n                sum[i]=sum[i-1]+(s1[i]=='w');\n        int l=0,r=n,ans=0;\n        // cout<<check(8)<<\"\\n\";\n        while (l<=r) {\n                int Mid=(l+r)>>1;\n                if (check(Mid)) l=(ans=Mid)+1;\n                else r=Mid-1;\n        }\n        cout<<ans<<\"\\n\";\n        return 0;\n}\n\n```\n",
        "postTime": 1639473565,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF650B"
    }
]
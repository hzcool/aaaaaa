[
    {
        "content": "## \u601d\u8def\uff1a\n\u65e2\u8981\u6c42\u4ece $1$ \u70b9\u5230 $n$ \u70b9\u7684\u6700\u77ed\u8def\u6761\u6570\uff0c\u53c8\u8981\u627e\u8fd9\u4e9b\u6700\u77ed\u8def\u7ecf\u8fc7\u6b21\u6570\u6700\u591a\u7684\u70b9\u4ee5\u53ca\u6700\u77ed\u8def\u5f84\u4e0a\u548c\u8fd9\u4e2a\u70b9\u76f8\u90bb\u7684\u8fb9\u6570\uff08\u5b89\u5168\u8fb9\uff09\u3002\n\n\u4e4d\u4e00\u770b\u975e\u5e38\u590d\u6742\uff0c\u4f46\u4ed4\u7ec6\u4e00\u60f3\u5e76\u4e0d\u590d\u6742\u3002\n\n\u663e\u7136\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u6700\u77ed\u8def\uff0c\u81f3\u591a\u7ecf\u8fc7\u4e24\u6761\u5b89\u5168\u8fb9\uff0c\u8003\u8651\u679a\u4e3e\u6240\u6709\u8b66\u5bdf\u5c40\u7684\u4f4d\u7f6e\u3002\n\n\u9996\u5148\uff0c\u5f53\u8b66\u5bdf\u5c40\u8bbe\u7f6e\u5728 $1$ \u70b9\u6216 $n$ \u70b9\u65f6\u6613\u5f97\u6bcf\u6761\u6700\u77ed\u8def\u90fd\u4f1a\u4e14\u53ea\u4f1a\u7ecf\u8fc7\u4e00\u6761\u5b89\u5168\u8fb9\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u76f8\u5f53\u4e8e\u6700\u77ed\u8def\u8ba1\u6570\u3002\n\n\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5c06\u539f\u56fe\u5206\u6210 $1$ \u70b9\u5230\u8b66\u5bdf\u5c40\uff0c\u8b66\u5bdf\u5c40\u5230 $n$ \u70b9\u4e24\u90e8\u5206\u6765\u770b\u3002\n\n\u53ea\u6709\u5f53\uff1a $1$ \u70b9\u5230\u8b66\u5bdf\u5c40\u7684\u6700\u77ed\u8def $+$ \u8b66\u5bdf\u5c40\u5230 $n$ \u70b9\u7684\u6700\u77ed\u8def $=$ $1$ \u70b9\u5230 $n$ \u70b9\u7684\u6700\u77ed\u8def\uff0c\u624d\u80fd\u4fdd\u8bc1\u6700\u77ed\u8def\u7ecf\u8fc7\u5b89\u5168\u8fb9\u3002\n\n\u540c\u65f6\u53ef\u4ee5\u6839\u636e\u6392\u5217\u7ec4\u5408\u4e58\u6cd5\u539f\u7406\u76f8\u5173\u77e5\u8bc6\u5f97\u51fa\uff0c\u7ecf\u8fc7\u7684\u5b89\u5168\u8fb9\u6761\u6570\u5e94\u4e3a\uff1a $1$ \u70b9\u5230\u8b66\u5bdf\u5c40\u7684\u6700\u77ed\u8def\u6761\u6570 $\\times$ \u8b66\u5bdf\u5c40\u5230 $n$ \u70b9\u7684\u6700\u77ed\u8def\u6761\u6570\u3002\n\n\u9644\uff1a\u4e00\u9053\u6700\u77ed\u8def\u8ba1\u6570\u95ee\u9898[P1144 \u6700\u77ed\u8def\u8ba1\u6570](https://www.luogu.com.cn/problem/P1144)\n\n```cpp\n// Problem: CF208C Police Station\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/CF208C\n// Memory Limit: 250 MB\n// Time Limit: 2000 ms\n// \n// Powered by CP Editor (https://cpeditor.org)\n\n//By:Komorebi_03\n#include<bits/stdc++.h>\nusing namespace std;\n#define clear(a) memset(a,0,sizeof a)\n#define int long long\nconst int N = 1e6+5;\nconst int M = 210;\nint n,m,e_cnt,cnt[N],sum[M][M],dis[M][M],head[N];\nbool vis[N];\nstruct edge{\n\tint v;\n\tint w;\n\tint nxt;\n}e[N];\ninline int read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile (ch<'0'||ch>'9'){if (ch=='-') f=-1;ch=getchar();}\n\twhile (ch>='0'&&ch<='9'){x=x*10+ch-48;ch=getchar();}\n\treturn x*f;\n}\n\nvoid add(int u,int v)\n{\n\te[++e_cnt].v=v;\n\te[e_cnt].nxt=head[u];\n\thead[u]=e_cnt;\n}\n\nvoid BFS(int s)\n{\n\tclear(vis);\n\tqueue<int> q;\n\tvis[s]=true;\n\tq.push(s);\n\tsum[s][s]=1;\n\twhile (!q.empty())\n\t{\n\t\tint u=q.front();\n\t\tq.pop();\n\t\tfor (int i=head[u];i;i=e[i].nxt)\n\t\t{\n\t\t\tint v=e[i].v;\n\t\t\tif(!vis[v])\n\t\t\t{\n\t\t\t\tvis[v]=true;\n\t\t\t\tdis[s][v]=dis[s][u]+1;\n\t\t\t\tq.push(v);\n\t\t\t}\n\t\t\tif(dis[s][v]==dis[s][u]+1)\n\t\t\t\tsum[s][v]+=sum[s][u];\n\t\t}\n\t}\n}\n\nsigned main()\n{\n\tn=read();\n\tm=read();\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tint u=read();\n\t\tint v=read();\n\t\tadd(u,v);\n\t\tadd(v,u);\n\t}\n\tBFS(1);\n\tBFS(n);\n\tint k=sum[1][n];\n\tfor (int i=2;i<n;i++)\n\t\tif(dis[1][i]+dis[n][i]==dis[1][n])\n\t\t\tk=max(k,sum[1][i]*sum[n][i]*2);\n\tprintf(\"%.12lf\",k*1.0/sum[1][n]);\n\treturn 0;\n\t//Amireux_35\n}\n```\n",
        "postTime": 1683290947,
        "uid": 748679,
        "name": "Komorebi_03",
        "ccfLevel": 0,
        "title": "CF 208C\u9898\u89e3"
    },
    {
        "content": "\u770b\u9898\u89e3\u91cc\u90fd\u662f Floyd\uff0c\u867d\u7136 $O(n^3)$ \u53ef\u4ee5\u8dd1\u8fc7\uff0c\u4f46\u6211\u8fd8\u662f\u6253\u7b97\u4ea4\u4e00\u53d1~~\u5df2\u6b7b\u7684~~\u4f18\u79c0\u7684 SPFA\uff0c\u5e76\u4e14\u4f4d\u4e8e\u6700\u4f18\u89e3               rank1\u3002\n\n## Solution\n\u6700\u6bb5\u8def\u6761\u6570\u5f88\u597d\u5904\u7406\uff0c\u6700\u77ed\u8def\u7ecf\u8fc7\u5b89\u5168\u8fb9\u7684\u4e2a\u6570\u662f\u4ec0\u4e48\uff1f\n\n\u5bf9\u4e8e\u8b66\u5c40\u5728 $1$ \u6216 $n$\uff0c\u6bcf\u6761\u6700\u77ed\u8def\u90fd\u4f1a\u7ecf\u8fc7\u4e00\u6761\u5b89\u5168\u8fb9\uff0c\u6240\u4ee5\u7b49\u540c\u4e8e\u6700\u77ed\u8def\u6761\u6570\u3002\n \n\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u5f53 $1$ \u5230\u8b66\u5c40\u7684\u6700\u77ed\u8def\u548c\u8b66\u5c40\u5230 $n$ \u7684\u6700\u77ed\u8def\u4e4b\u548c\u7b49\u4e8e $1$ \u5230 $n$ \u7684\u6700\u77ed\u8def\uff0c\u624d\u80fd\u4f7f\u6700\u77ed\u8def\u7ecf\u8fc7\u5b89\u5168\u8fb9\uff0c\u7ecf\u8fc7\u7684\u6761\u6570\u4e3a $2$ \u500d\u7684 $1$ \u5230\u8b66\u5c40\u7684\u6700\u77ed\u8def\u6761\u6570\u4e58\u4e0a \u8b66\u5c40\u5230 $n$ \u7684\u6700\u77ed\u8def\u6761\u6570\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u662f\u8fd9\u6837\uff1f\u8ba9\u6211\u4eec\u6765\u770b\u4e0b\u9762\u8fd9\u5f20\u56fe\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/obs5fp6b.png)\n\n\u53ef\u4ee5\u770b\u51fa\u5f53 $3$ \u53f7\u70b9\u4f5c\u4e3a\u8b66\u5c40\u65f6\u6700\u4f18\uff0c\u4ece\u8d77\u70b9\u5230\u8b66\u5c40\u7684\u6700\u77ed\u8def\u6761\u6570\u4e3a $2$\uff0c\u4ece\u8b66\u5c40\u5230\u7ec8\u70b9\u7684\u6700\u77ed\u8def\u6761\u6570\u4e3a $3$\uff0c\u56e0\u4e3a\u53ef\u4ee5\u4efb\u9009\u4e00\u6761\u6700\u77ed\u8def\u4ece\u8b66\u5c40\u4e0a\u65b9\u4e0b\u6765\uff0c\u6240\u4ee5\u4e0b\u65b9\u88ab\u7ecf\u5386\u7684\u603b\u6570\u4e3a $2\u00d73=6$\uff0c\u4e0a\u65b9\u7ecf\u5386\u7684\u603b\u6570\u4e5f\u4e3a $6$\uff0c\u8bc1\u6bd5\u3002\n\n\u6700\u540e\u8d34\u4e0a\u4ee3\u7801\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=110,M=1e4+100;\nlong long cnt[N][N],max_,n,m,c,head[N],dis[N][N];\nstruct xzh{\n    int next,to;\n}edge[2*M];\nbool vis[N];\nvoid add(int u,int v){\n    c++;\n    edge[c].next=head[u];\n    edge[c].to=v;\n    head[u]=c;\n}\nvoid bfs(int s){\n    queue<int>q;\n    for(int i=1;i<=n;i++)vis[i]=false;\n    vis[s]=true;\n    q.push(s);\n    cnt[s][s]=1;\n    while(!q.empty()){\n        int now=q.front();\n        q.pop();\n        for(int i=head[now];i;i=edge[i].next){\n            int v=edge[i].to;\n            if(!vis[v]){\n                vis[v]=true;\n                dis[s][v]=dis[s][now]+1;\n                q.push(v);\n            }\n            if(dis[s][v]==dis[s][now]+1){\n                cnt[s][v]+=cnt[s][now];\n            }\n        }\n    }\n}\nint f[N];\nint main(){\n    scanf(\"%lld%lld\",&n,&m);\n    for(int i=1;i<=m;i++){\n        int u,v;\n        scanf(\"%d%d\",&u,&v);\n        add(u,v);\n        add(v,u);\n    }\n    bfs(1);\n    bfs(n);\n    max_=cnt[1][n];\n    for(int i=2;i<n;i++){\n        if(dis[1][i]+dis[n][i]==dis[1][n]){\n            max_=max(max_,cnt[1][i]*cnt[n][i]*2);\n        }\n    }\n    printf(\"%.12lf\",max_*1.0/cnt[1][n]);\n}\n```\n",
        "postTime": 1666415274,
        "uid": 327295,
        "name": "GalwayGirl",
        "ccfLevel": 6,
        "title": "CF208C"
    },
    {
        "content": "\u8003\u8651\u4ece $1$ \u548c $n$ \u51fa\u53d1\u5e7f\u641c\u4e24\u6b21\uff0c\u8bb0\u5f55\u4ed6\u4eec\u5230\u6bcf\u4e00\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u957f\u5ea6\u548c\u6761\u6570\u3002\n\n\u5177\u4f53\u5730\uff0c\u5f00\u4e00\u4e2a\u961f\u5217\uff0c\u521d\u59cb\u53ea\u6709\u8d77\u70b9\uff0c\u6bcf\u6b21\u51fa\u961f\u5934\uff0c\u626b\u4ece\u961f\u5934\u51fa\u8fb9\u8fde\u5230\u7684\u70b9\uff0c\u5982\u679c\u8be5\u70b9\u8ddd\u79bb\u5927\u4e8e\u5f53\u524d\u8ddd\u79bb\u52a0\u4e00\uff0c\u5219\u8d4b\u503c\u4e3a\u5f53\u524d\u8ddd\u79bb\u52a0\u4e00\uff0c\u5e76\u4e14\u82e5\u73b0\u5728\u7684\u8ddd\u79bb\u7b49\u4e8e\u5f53\u524d\u8ddd\u79bb\uff0c\u5219\u66f4\u65b0\u65b9\u6848\u6570\u3002\n\n\u5982\u679c\u9009\u5b9a\u7684\u70b9\u4e3a $1$ \u6216 $n$\uff0c\u90a3\u4e48\u6bcf\u4e00\u6761\u6700\u77ed\u8def\u90fd\u4f1a\u6070\u597d\u7ecf\u8fc7\u4e00\u6761\u5b89\u5168\u8fb9\uff0c\u7ecf\u8fc7\u6761\u6570\u7b49\u540c\u6700\u77ed\u8def\u6761\u6570\u3002\n\n\u5426\u5219\uff0c\u6700\u77ed\u8def\u5fc5\u5b9a\u662f\u6709 $1$ \u5230 $x$ \u7684\u6700\u77ed\u8def\u4e0e $x$ \u5230 $n$ \u7684\u6700\u77ed\u8def\u62fc\u63a5\u800c\u6210\uff0c\u5e76\u4e14\u4fdd\u8bc1\u6ca1\u6709\u91cd\u590d\u7ecf\u8fc7\uff08\u5982\u679c\u90a3\u6837\u5c31\u4e0d\u662f\u6700\u77ed\u4e86\uff09\u3002\n\n\u6700\u540e\u7684\u7b54\u6848\u7167\u9898\u610f\u9700\u9664\u4ee5 $n$\uff0c\u6ce8\u610f\u5f00 `long long` \u548c `double`\uff0c\u8f93\u51fa\u683c\u5f0f\u7528 `printf(\"%.12lf\",ans);`\n\n\u597d\uff0c\u4ee3\u7801\u592a\u77ed\u4e86\uff0c\u4e0d\u5230 700B\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=105;\nusing ll=long long;\nll g[N][N],ans;\nll d[N][2],ct[N][2];\nint q[N],l,r,n,m;\ninline void bfs(int s,int k){\n\tq[l=r=1]=s;int x,y;\n\td[s][k]=ct[s][k]=1;\n\twhile(l<=r){\n\t\tx=q[l++];\n\t\tfor(y=1;y<=n;++y)\n\t\t\tif(g[x][y]){\n\t\t\t\tif(!d[y][k])d[q[++r]=y][k]=d[x][k]+1,ct[y][k]=ct[x][k];\n\t\t\t\telse if(d[y][k]==d[x][k]+1)ct[y][k]+=ct[x][k];\n\t\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tint i,x,y;\n\tfor(i=1;i<=m;++i){\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tg[x][y]=g[y][x]=1;\n\t}bfs(1,0),bfs(n,1);//\u4e24\u6b21\u5e7f\u641c\n\tans=ct[n][0];\n\tfor(x=2;x<n;++x)\n\t\tif(d[x][0]+d[x][1]==d[n][0]+1)\n\t\t\tans=max(ans,ct[x][0]*ct[x][1]*2);\n\tdouble res=ans;res/=ct[n][0];\n\tprintf(\"%.12lf\\n\",res);\n\treturn 0;\n}\n```",
        "postTime": 1666350153,
        "uid": 755286,
        "name": "EnofTeiPeople",
        "ccfLevel": 0,
        "title": "\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u7b97\u6cd5\uff08BFS\uff09\u5165\u95e8"
    },
    {
        "content": "\u9898\u76ee\u8bf4\u7684\u5f88\u660e\u767d\u4e86\uff0c\u9700\u8981\u6211\u4eec\u5728\u4e00\u4e2a\u65e0\u5411\u56fe\u4e2d\u9009\u53d6\u4e00\u4e2a\u70b9\uff0c\u6700\u5927\u5316\u4ece $1$ \u5230 $n$ \u7684\u6700\u77ed\u8def\u4e2d\u7ecf\u8fc7\u8be5\u70b9\u6240\u8fde\u8fb9\u7684\u6570\u91cf\u3002\n\n\u770b\u5230\u6570\u636e\u8303\u56f4 $n \\le 100$\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u901a\u8fc7 Floyd \u7b97\u6cd5\u5728 $O(n^3)$ \u7684\u590d\u6742\u5ea6\u6c42\u89e3\u3002\u800c\u8ba1\u7b97 \u201c\u5b89\u5168\u8fb9\u201d \u7684\u6761\u6570\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a\u70b9 $1,n$ \u5206\u522b\u5230\u8be5\u70b9\u7684\u8def\u5f84\u6761\u6570\uff0c\u5c06\u5b83\u4eec\u76f8\u4e58\u5373\u4e3a\u201c\u5b89\u5168\u8fb9\u201d\u7684\u6761\u6570\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff0c\u770b\u5230\u4e0b\u9762\u8fd9\u5f20\u56fe\uff1a\n\n![](https://urlshare.img.ink/2022/23f9bf050117c.png)\n\n\u5728\u8fd9\u5f20\u56fe\u4e2d\uff0c$p1 \\sim p5$ \u4e3a\u4e2d\u8f6c\u70b9\uff0c$k$ \u4e3a\u8b66\u5c40\u6240\u5728\u7684\u70b9\u3002\n\n\u5219 $1\\sim k$ \u6709 $3$ \u6761\u8def\u5f84\uff0c$k \\sim n$ \u6709 $2$ \u6761\u8def\u5f84\u3002\n\n\u6839\u636e\u4e58\u6cd5\u539f\u7406\u53ef\u5f97\uff0c$1 \\sim n$ \u5171\u6709 $2 \\times 3 $ \u5171 $6$ \u6761\u8def\u5f84\uff0c\u800c\u4e3a\u4e86\u4f7f\u201c\u5b89\u5168\u8fb9\u201d\u6700\u5927\u5316\uff0c\u8981\u8ba9 $k$ \u7684\u6240\u6709\u51fa\u8fb9\u5c3d\u91cf\u90fd\u5728\u6700\u77ed\u8def\u4e0a\u3002\n\n\u56e0\u6b64\uff0c\u201c\u5b89\u5168\u8fb9\u201d\u7684\u6761\u6570\u5373\u4e3a $1 \\sim k$ \u7684\u8def\u5f84\u6570\u4e0e $k \\sim n$ \u7684\u8def\u5f84\u6570\u4e4b\u79ef\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c06\u4e24\u4e2a\u95ee\u9898\u90fd\u653e\u5728 Floyd \u4e2d\u4e00\u8d77\u5904\u7406\u5373\u53ef\u5728 $O(n^3)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u901a\u8fc7\u6b64\u9898\u3002\n\nFloyd \u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nvoid Floyd(){\n\tfor(int k=1;k<=n;k++){\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tif(G[i][j]>G[i][k]+G[k][j]){\n\t\t\t\t\tG[i][j]=G[i][k]+G[k][j];\n\t\t\t\t\tM[i][j]=0;\n\t\t\t\t}\n\t\t\t\tif(G[i][j]==G[i][k]+G[k][j]){\n\t\t\t\t\tM[i][j]+=(M[i][k]*M[k][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define rd read()\n#define int long long\nusing namespace std;\ninline int read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-'){\n\t\t\tf=-1;\n\t\t}\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nint n,m;\nint G[310][310],M[310][310];\nvoid Floyd(){\n\tfor(int k=1;k<=n;k++){\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tif(G[i][j]>G[i][k]+G[k][j]){\n\t\t\t\t\tG[i][j]=G[i][k]+G[k][j];\n\t\t\t\t\tM[i][j]=0;\n\t\t\t\t}\n\t\t\t\tif(G[i][j]==G[i][k]+G[k][j]){\n\t\t\t\t\tM[i][j]+=(M[i][k]*M[k][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\ndouble ans=1.0;\nvoid add(int x,int y){\n\tG[x][y]=M[x][y]=1;\n}\nsigned main(){\n\tn=rd,m=rd;\n\tmemset(G,0x3f,sizeof(G));\n\tfor(int i=1;i<=m;i++){\n\t\tint x=rd,y=rd;\n     \t\tadd(x,y);\n                add(y,x);\n\t}\n\tFloyd();\n\tfor(int i=2;i<n;i++){\n    \tif(G[1][i]+G[i][n]==G[1][n]){\n    \t\tans=max(ans,2.0*M[1][i]*M[i][n]/M[1][n]);\n\t\t}\n  \t}\n\tprintf(\"%.12lf\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1666171454,
        "uid": 548209,
        "name": "Purple_Circle",
        "ccfLevel": 0,
        "title": "CF208C-\u8b66\u5bdf\u4fdd\u8bc1\u5b89\u5168!"
    },
    {
        "content": "## \u9898\u76ee\n\u6709 $n$ \u4e2a\u70b9\uff0c\u8ba9\u4f60\u9009\u62e9\u4e00\u4e2a\u70b9\u4e3a\u8b66\u5c40\uff0c\u4f7f\u5f97\u70b9 $1$ \u5230\u70b9 $n$ \u7684\u548c\u8c10\u8def\u6570\u4e0e\u6700\u77ed\u8def\u5f84\u6570\u6700\u5927\u3002\n\n## \u9898\u89e3\n\n\u5148\u5410\u69fd\u5783\u573e\u7ffb\u8bd1\u3002\n\n\u6211\u4eec\u53d1\u73b0 $n$ \u7684\u8303\u56f4\u5e76\u4e0d\u662f\u5f88\u5927\uff0c\u4e00\u4e2a\u7acb\u65b9\u7684\u7b97\u6cd5\u4ed6\u662f\u80fd\u591f\u63a5\u53d7\u7684\u3002\n\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u4f7f\u7528 floyd \u7b97\u6cd5\u6c42\u89e3\u51fa\u56fe\u4e0a\u6bcf\u4e2a\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u662f\u8ba1\u7b97\u7684\u548c\u8c10\u9053\u8def\u6570\u76ee\u3002\n\n\u6211\u4eec\u53d1\u73b0\u5176\u5b9e\u6211\u4eec\u4e0d\u9700\u8981\u53ef\u4ee5\u7684\u53bb\u7b97\u8fd9\u4e2a\u4e1c\u897f\u3002\n\n\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u7684\u662f\u70b9 $1$ \u5230\u8b66\u5c40\u548c\u70b9 $n$ \u5230\u8b66\u5c40\u7684\u8def\u5f84\u6761\u6570\u3002\n\n\u7136\u540e\u8fd9\u4e24\u4e2a\u4e58\u8d77\u6765\u5c31\u662f\u6211\u4eec\u7684\u548c\u8c10\u8def\u5f84\u6570\u91cf\u3002\n\n\u90a3\u4e48\u5f88\u663e\u7136\uff0c\u8fd9\u4e2a\u4e1c\u897f\u662f\u53ef\u4ee5\u5728 floyd \u7684\u8fc7\u7a0b\u4e2d\u4e00\u8d77\u5904\u7406\u7684\uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u5728 $n^3$ \u7684\u590d\u6742\u5ea6\u91cc\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline char nc() {\n  static char buf[100000], *p1 = buf, *p2 = buf;\n  return p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 100000, stdin), p1 == p2)\n             ? EOF\n             : *p1++;\n}\ninline int read() {\n  char ch = nc();\n  int sum = 0;\n  while (!isdigit(ch))\n    ch = nc();\n  while (isdigit(ch))\n    sum = sum * 10 + ch - 48, ch = nc();\n  return sum;\n}\nconst int N = 300;\nint n, m, a[N][N], b[N][N];\nsigned main() {\n  n = read(), m = read();\n  memset(a, 63, sizeof(a));\n  for (int i = 0; i < m; i++) {\n    int x = read(), y = read();\n    a[x][y] = a[y][x] = 1;\n    b[x][y] = b[y][x] = 1;\n  }\n  for (int k = 1; k <= n; k++) {\n    for (int i = 1; i <= n; i++) {\n      for (int j = 1; j <= n; j++) {\n        if (a[i][j] > a[i][k] + a[k][j]) {\n          a[i][j] = a[i][k] + a[k][j];\n          b[i][j] = 0;\n        }\n        if (a[i][j] == a[i][k] + a[k][j]) {\n          b[i][j] += b[i][k] * b[k][j];\n        }\n      }\n    }\n  }\n  double ans = 1.0;\n  for (int i = 2; i < n; i++) {\n    if (a[1][i] + a[i][n] == a[1][n])\n      ans = max(ans, 2.0 * b[1][i] * b[i][n] / b[1][n]);\n  }\n  printf(\"%.10lf\\n\", ans);\n  return 0;\n}\n\n\n```\n\n",
        "postTime": 1628759985,
        "uid": 206021,
        "name": "Pitiless0514",
        "ccfLevel": 7,
        "title": "CF208C"
    },
    {
        "content": "\u7ec8\u4e8e\u662f\u7b2c 10 \u7bc7\u9898\u89e3\u4e86\uff0c\u4e0d\u5bb9\u6613\u3002\n\n\u8fd9\u9898\u53ef\u4ee5\u7528\u4e24\u4e2a BFS \u6c42\u51fa\u6bcf\u4e2a\u70b9\u5206\u522b\u5230 1 \u548c $n$ \u53f7\u70b9\u7684\u6700\u77ed\u8def\u957f\u5ea6\u548c\u6761\u6570\uff0c\u5206\u522b\u5b58\u5165\u6570\u7ec4 $dis1,disn,cnt1,cntn$\u3002\u7136\u540e\u679a\u4e3e\u8b66\u5bdf\u5c40\u70b9\u7f16\u53f7 $i \\in [2,n)$\uff0c\u90a3\u4e48\u6240\u6709\u7ecf\u8fc7\u70b9 $i$ \u7684\u8def\u5f84\u90fd\u4f1a\u7ecf\u8fc7 2 \u6761\u5b89\u5168\u8fb9\uff0c\u5176\u4ed6\u7684\u90fd\u662f 0 \u6761\uff0c\u6240\u4ee5\u6b64\u65f6\u7684\u7b54\u6848\u662f\n\n$$\n\\dfrac{cnt1_i \\times cntn_i}{cnt1_n} \\times 2\n$$\n\n\u5e76\u4e14\u8981\u6ce8\u610f\u8fd9\u65f6\u7684\u8def\u5f84\u8981\u662f\u6700\u77ed\u8def\uff0c\u4e5f\u5c31\u662f $dis1_i+disn_i=dis1_n$\u3002\u6211\u5c31\u56e0\u4e3a\u8fd9\u4e2a WA \u4e86\u4e00\u6b21\u3002\n\n\u6c42\u51fa\u6765\u4e4b\u540e\u8fd8\u8981\u7279\u5224\u4e00\u4e0b\uff0c\u5982\u679c\u6700\u5927\u503c\u6bd4 $cnt1_n$ \u8fd8\u5c0f\u7684\u8bdd\u5c31\u8981\u9009 1 \u6216 $n$ \u53f7\u4e3a\u8b66\u5bdf\u5c40\uff0c\u8f93\u51fa 1\u3002\n\n\u4f46\u5f88\u5bb9\u6613\u5c31\u4f1a\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a$cnt1$ \u4e0e $cntn$ \u4e24\u4e2a\u6570\u7ec4\u7684\u503c\u7684\u4e0a\u9650\u3002\n\n\u8fd9\u4e2a\u6211\u4e5f\u6ca1\u6709\u4e25\u8c28\u8bc1\u660e\u51fa\u6765\uff0c\u8fd8\u9700\u8981\u66f4\u5389\u5bb3\u7684\u5927\u4f6c\u6765\u8bc1\u3002\n\n\u6211\u662f\u4e3b\u89c2\u5730\u6784\u9020\u4e86\u4e00\u79cd\u6211\u8ba4\u4e3a\u8def\u5f84\u6570\u6700\u591a\u7684\u60c5\u51b5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/21bwqout.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n\u5c31\u662f\u8d77\u70b9\u4e0e $r$ \u4e2a\u70b9\u76f8\u8fde\uff0c\u8fd9 $r$ \u4e2a\u70b9\u518d\u4e0e\u53e6\u4e00\u4e2a\u70b9 $p$ \u76f8\u8fde\uff0c$p$ \u518d\u4e0e\u53e6\u5916\u7684 $r$ \u4e2a\u70b9\u76f8\u8fde\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u8fd9\u6837\u6bcf\u4e00\u7ec4\u91cc\u9762\u90fd\u6709 $r$ \u79cd\u9009\u62e9\uff0c\u6709 $\\lfloor \\dfrac{100}{r+1} \\rfloor$ \u7ec4\uff0c\u6240\u4ee5\u6709 $r^{\\lfloor {100 \\over r+1} \\rfloor}$ \u6761\u8def\u5f84\u3002\n\n\u4e8e\u662f\u6211\u5199\u4e86\u4e00\u4e2a\u7a0b\u5e8f\u6765\u679a\u4e3e $r$\uff0c\u53d1\u73b0 $r=4$ \u65f6\u6700\u5927\uff0c\u6709 $2^{40}$\uff0c\u8fd9\u5f00 long long \u5b8c\u5168\u591f\uff0c\u5c31\u7b97\u771f\u6b63\u7684\u4e0a\u9650\u6bd4\u8fd9\u5927\u51e0\u5341\u500d long long \u4e5f\u7ef0\u7ef0\u6709\u4f59\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<queue>\n#define Ty int\n#define MAXN 102\n#define FOR(i,a,b) for(Ty i=a;i<=b;i++)\n#define fOR(i,a,b) for(Ty i=a;i<b;i++)\n#define ROF(i,a,b) for(Ty i=a;i>=b;i--)\n#define rOF(i,a,b) for(Ty i=a;i>b;i--)\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nTy _abs(Ty a){return a<0?-a:a;}\nll maxn(ll a,ll b){return a>b?a:b;}\nTy qr(){\n\tchar ch=getchar();Ty s=0,x=1;\n\tfor(;ch<'0'||ch>'9';ch=getchar())if(ch=='-')x=-1;\n\tfor(;ch>='0'&&ch<='9';ch=getchar())s=s*10+ch-'0';\n\treturn x*s;\n}Ty n,m,u,v,head[MAXN],nxt[MAXN*MAXN],to[MAXN*MAXN],dis1[MAXN],disn[MAXN],nw;\nll cnt1[MAXN],cntn[MAXN],ans;queue<Ty>q;\nvoid addedge(Ty u,Ty v,Ty id){nxt[id]=head[u];to[head[u]=id]=v;}\nint main(){\n\tfOR(i,0,MAXN)dis1[i]=disn[i]=-1;\n\tn=qr();m=qr();\n\tcnt1[1]=cntn[n]=1;dis1[1]=disn[n]=0;\n\tFOR(i,1,m){\n\t\tu=qr();v=qr();\n\t\taddedge(u,v,i<<1);\n\t\taddedge(v,u,i<<1|1);\n\t}q.push(1);\n\twhile(q.size()){\n\t\tnw=q.front();q.pop();\n\t\tfor(Ty i=head[nw];i;i=nxt[i]){\n\t\t\tif(dis1[to[i]]==-1){\n\t\t\t\tdis1[to[i]]=dis1[nw]+1;cnt1[to[i]]=cnt1[nw];q.push(to[i]);\n\t\t\t}else if(dis1[to[i]]==dis1[nw]+1)cnt1[to[i]]+=cnt1[nw];\n\t\t}\n\t}q.push(n);\n\twhile(q.size()){\n\t\tnw=q.front();q.pop();\n\t\tfor(Ty i=head[nw];i;i=nxt[i]){\n\t\t\tif(disn[to[i]]==-1){\n\t\t\t\tdisn[to[i]]=disn[nw]+1;cntn[to[i]]=cntn[nw];q.push(to[i]);\n\t\t\t}else if(disn[to[i]]==disn[nw]+1)cntn[to[i]]+=cntn[nw];\n\t\t}\n\t}fOR(i,2,n)if(dis1[i]+disn[i]==dis1[n])ans=maxn(ans,cnt1[i]*cntn[i]);\n\tans<<=1;if(ans<cnt1[n])printf(\"1\");//\u7279\u5224\n\telse printf(\"%.8lf\",(double)ans/cnt1[n]);\n\treturn 0;\n}\n```",
        "postTime": 1639062375,
        "uid": 184168,
        "name": "xuanxuan001",
        "ccfLevel": 8,
        "title": "\u9898\u89e3CF208C\u3010Police Station\u3011"
    }
]
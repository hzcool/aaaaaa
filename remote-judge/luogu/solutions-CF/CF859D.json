[
    {
        "content": "emm\u8fd9\u4e2a\u9898\u8c8c\u4f3c\u6ca1\u4eba\u505a\uff1f\n\n\u5bb9\u6613\u53d1\u73b0\u8fd9\u4e2a\u6bd4\u8d5b\u7684\u60c5\u5f62\u53ef\u4ee5\u7528\u4e00\u68f5\u4e8c\u53c9\u6811\u6765\u8868\u793a\u3002\n\n\u8bbe$g_{i,j}$\u8868\u793a\u4e8c\u53c9\u6811\u8282\u70b9$i$(\u4ee3\u8868\u4e86\u4e00\u4e2a\u533a\u95f4)\u4e0a$j$\u6210\u4e3a\u6700\u7ec8\u80dc\u5229\u8005\u7684\u6982\u7387\uff0c$f_{i,j}$\u8868\u793a\u4e0a\u8ff0\u72b6\u6001\u4e0b\u7684\u6700\u4f18\u6536\u76ca\u671f\u671b\u503c\u3002\n\n\u5bf9\u4e8e$g$\uff0c\u8f6c\u79fb\u5373\u679a\u4e3e$j$\u6700\u540e\u548c\u54ea\u4e9b\u4eba\u5bf9\u51b3\u5e76\u80dc\u51fa\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u8282\u70b9$u$\uff0c\u5f53\u524d\u5904\u7406\u7684\u5b50\u6811\u533a\u95f4\u4e3a$[l,r]$\uff0c\u6709:\n\n$$ {g_{u,i}} \\leftarrow \\sum_{i = l}^{\\text{mid}} \\sum _ {j = \\text{mid}+1}^rg_{u \\times 2 ,i} \\times g_{u \\times 2+1,j} \\times p_{i,j} + \\sum_{i=\\text{mid}+1}^r \\sum _{j=l}^{\\text{mid}}g_{u \\times 2+1,i} \\times g_{u \\times 2,j} \\times p_{i,j} $$\n\n\u5bf9\u4e8e$f$\uff0c\u8f6c\u79fb\u5373\u679a\u4e3e$j$\u80dc\u51fa\u7684\u6982\u7387\u4e58\u4e0a\u6536\u76ca\u5e76\u52a0\u4e0a\u6240\u6709\u548c$j$\u6bd4\u8d5b\u7684\u4eba\u4e2d\u4e4b\u524d\u7684\u6700\u4f18\u671f\u671b\u6536\u76ca\u503c\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u8282\u70b9$u$\uff0c\u5f53\u524d\u5904\u7406\u7684\u5b50\u6811\u533a\u95f4\u4e3a$[l,r]$\uff0c\u6709\uff1a\n\n$$ {f_{u,i}} \\leftarrow \\max \\left (f_{u,i},\\max_{i = l}^{\\text{mid}} \\max _ {j = \\text{mid}+1}^r \\left \\{\\frac 12 g_{u,i} \\times (r - l + 1)  + f_{2u,i} + f_{2u+1,j} \\right \\}, \\max_{i=\\text{mid}+1}^r \\max _{j=l}^{\\text{mid}} \\left \\{\\frac 12 g_{u,i} \\times (r - l + 1)  + f_{2u+1,i} + f_{2u,j} \\right\\}\\right) $$\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal O\\left (n 4^n\\right )$\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 1e3 + 10;\ndouble p[MAXN][MAXN], f[MAXN][MAXN], g[MAXN][MAXN], ans;\nint k, n;\ntemplate <class T>\ninline void _read(T &x)\n{\n\tx = 0;\n\tchar t = getchar();\n\twhile(!isdigit(t)) t = getchar();\n\twhile(isdigit(t))\n\t{\n\t\tx = x * 10 + t - '0';\n\t\tt = getchar();\n\t}\n}\nvoid dfs(int u, int l, int r)\n{\n\tif(l == r)\n\t{\n\t\tf[u][l] = 0;\n\t\tg[u][l] = 1;\n\t\treturn;\n\t}\n\tint mid = l + r >> 1;\n\tdfs(u << 1, l, mid);\n\tdfs(u << 1 | 1, mid + 1, r);\n\tfor(int i = 1; i <= mid; ++i)\n\t\tfor(int j = mid + 1; j <= n; ++j)\n\t\t\tg[u][i] += g[u << 1][i] * g[u << 1 | 1][j] * p[i][j];\n\tfor(int i = mid + 1; i <= n; ++i)\n\t\tfor(int j = 1; j <= mid; ++j)\n\t\t\tg[u][i] += g[u << 1 | 1][i] * g[u << 1][j] * p[i][j];\n\tfor(int i = 1; i <= mid; ++i)\n\t\tfor(int j = mid + 1; j <= n; ++j)\n\t\t\tf[u][i] = max(f[u][i], g[u][i] * (r - l + 1) / 2 + f[u << 1][i] + f[u << 1 | 1][j]);\n\tfor (int i = mid + 1; i <= n; ++i)\n\t\tfor (int j = 1; j <= mid; ++j)f[u][i] = max(f[u][i], g[u][i] * (r - l + 1) / 2 + f[u << 1 | 1][i] + f[u << 1][j]);\n}\nint main()\n{\n\t_read(k);\n\tn = 1 << k;\n\tfor (int i = 1; i <= n; ++i)\n\t\tfor (int j = 1; j <= n; ++j)\n\t\t\t_read(p[i][j]), p[i][j] /= 100;\n\tdfs(1, 1, n);\n\tfor(int i = 1; i <= n; ++i) ans = max(ans, f[1][i]);\n\tprintf(\"%.10lf\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1555041898,
        "uid": 13290,
        "name": "sky_of_war",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF859D \u3010Third Month Insanity\u3011"
    }
]
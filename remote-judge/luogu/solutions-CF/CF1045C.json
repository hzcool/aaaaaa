[
    {
        "content": "\u7531\u4e8e\u9898\u76ee\u4fdd\u8bc1\u5b58\u5728\u73af\u5219\u4e00\u5b9a\u662f\u4e00\u4e2a\u5b8c\u5168\u5b50\u56fe\uff0c\u6240\u4ee5\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u4e2d\u7684\u4efb\u610f\u4e24\u4e2a\u70b9\u7684\u8ddd\u79bb\u4e3a$1$\u3002\n\n\u7f29\u70b9\u53cc\uff0c\u5efa\u5706\u65b9\u6811\uff0c\u53ef\u77e5\u4e24\u4e2a\u8ddd\u79bb\u4e3a$1$\u7684\u70b9\uff0c\u91cd\u5efa\u540e\u5fc5\u7136\u9694\u4e86\u4e00\u4e2a\u65b9\u70b9\u3002\u6240\u4ee5\u76f4\u63a5\u6c42\u4e24\u70b9\u5728\u5706\u65b9\u6811\u4e0a\u8ddd\u79bb\uff0c\u7136\u540e\u9664\u4ee5$2$\u5373\u53ef\u3002\n\n## Code\uff1a\n```cpp\n#include<algorithm>\n#include<iostream>\n#include<vector>\n#include<stack>\n#define N 250005\nusing namespace std;\nint n,m,q,low[N],dfn[N],idx=0;\nvector<int>G[N];\nnamespace tree{\n\tvector<int>G[N];\n\tint n,F[17][N],dep[N];\n\tinline void addedge(int u,int v){G[u].push_back(v),G[v].push_back(u);}\n\tvoid dfs(int now){\n\t\tfor(int i:G[now])\n\t\tif(i!=F[0][now])F[0][i]=now,dep[i]=dep[now]+1,dfs(i);\n\t}\n\tvoid init(){\n\t\tfor(int j=1;j<17;++j)\n\t\tfor(int i=1;i<=n;++i)F[j][i]=F[j-1][F[j-1][i]];\n\t}\n\tinline int LCA(int x,int y){\n\t\tif(dep[x]<dep[y])swap(x,y);\n\t\tfor(int i=16;~i;--i)if(dep[F[i][x]]>=dep[y])x=F[i][x];\n\t\tif(x==y)return x;\n\t\tfor(int i=16;~i;--i)if(F[i][x]!=F[i][y])x=F[i][x],y=F[i][y];\n\t\treturn F[0][x];\n\t}\n\tinline int dis(int a,int b){return dep[a]+dep[b]-(dep[LCA(a,b)]<<1)>>1;}\n}\nstack<int>sta;\nvoid tar(int now){\n\tsta.push(now);\n\tdfn[now]=low[now]=++idx;\n\tfor(int i:G[now])if(!dfn[i]){\n\t\ttar(i);\n\t\tlow[now]=min(low[now],low[i]);\n\t\tif(low[i]>=dfn[now]){\n\t\t\tconst int id=++tree::n;\n\t\t\ttree::addedge(now,id);\n\t\t\tint v;\n\t\t\tdo{\n\t\t\t\tv=sta.top();\n\t\t\t\tsta.pop();\n\t\t\t\ttree::addedge(id,v);\n\t\t\t}while(v!=i);\n\t\t}\n\t}else low[now]=min(low[now],dfn[i]);\n}\nint main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n>>m>>q;\n\ttree::n=n;\n\twhile(m--){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tG[u].push_back(v),G[v].push_back(u);\n\t}\n\tfor(int i=1;i<=n;++i)if(!dfn[i])tar(i),tree::dfs(i);\n\ttree::init();\n\twhile(q--){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tcout<<tree::dis(u,v)<<'\\n'; \n\t}\n\treturn 0;\n}\n```",
        "postTime": 1546059956,
        "uid": 6813,
        "name": "mrsrz",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1045C \u3010Hyperspace Highways\u3011"
    },
    {
        "content": "[CF1045C Hyperspace Highways](https://www.luogu.com.cn/problem/CF1045C)\n\n**\u9898\u76ee\u5927\u610f**  \n\u7ed9\u4e00\u5f20 $n$\u4e2a\u70b9 $m$\u6761\u8fb9\u7684\u56fe,\u4fdd\u8bc1\u82e5\u6709\u4e00\u4e2a\u73af\uff0c\u4e00\u5b9a\u662f\u5b8c\u5168\u5b50\u56fe,\u591a\u6b21\u8be2\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u3002  \n\n**\u9898\u89e3**  \n\u5982\u679c\u4f1a**\u5706\u65b9\u6811**\u7684\u53ef\u4ee5\u4e00\u773c\u770b\u51fa\u6765\u7b54\u6848\u5c31\u662f\u5706\u65b9\u6811\u4e0a\u8ddd\u79bb $/2$  \n\u56e0\u4e3a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u4e00\u5b9a\u9694\u4e86\u4e00\u4e2a\u65b9\u70b9\n\n\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u8fd9\u4e48\u8f6c\u6362\uff1f  \n\u633a\u663e\u7136\u7684\u5427\uff0c\u56e0\u4e3a\u5982\u679c\u662f\u4ece\u5b8c\u5168\u5b50\u56fe\u4e00\u7aef\u5230\u53e6\u4e00\u7aef\uff0c\u5fc5\u7136\u8981\u7ecf\u8fc7\u4e00\u6761\u8fb9\uff0c\u7136\u800c\u8fd9\u521a\u597d\u5bf9\u5e94\u5706\u65b9\u6811\u4e0a\u65b9\u70b9\u7684\u4e24\u6761\u8fb9\uff0c\u4e00\u4e2a\u70b9\u4e5f\u662f\u5b8c\u5168\u5b50\u56fe\uff0c\u7136\u540e\u5c31\u6ca1\u4e86\u3002\n\n\u4ec0\u4e48\u4f60\u4e0d\u4f1a\u5efa\u5706\u65b9\u6811\uff1f\uff1f\uff1f  \n\u8981\u5efa\u5706\u65b9\u6811\u9996\u5148\u8981\u4f1a**\u70b9\u53cc\u8fde\u901a\u5206\u91cf**  \n**\u70b9\u53cc\u8fde\u901a\u5206\u91cf\uff1a** \u56fe\u4e2d\u4efb\u610f\u4e24\u4e0d\u540c\u70b9\u4e4b\u95f4\u90fd\u6709\u81f3\u5c11\u4e24\u6761\u70b9\u4e0d\u91cd\u590d\u7684\u8def\u5f84\u3002  \n\u8fd8\u6709\u4e00\u4e2a\u597d\u7406\u89e3\u5f88\u591a\u7684\u5b9a\u4e49\uff1a**\u4e0d\u5b58\u5728\u5272\u70b9\u7684\u56fe**  \n\u4e24\u4e2a\u70b9\u4e00\u6761\u8fb9\u7684\u60c5\u51b5\u662f\u7279\u6b8a\u60c5\u51b5\uff0c\u8fd9\u91cc\u4e0d\u8fc7\u591a\u8ba8\u8bba\u70b9\u53cc  \n\u7136\u540e\u5bf9\u4e8e\u539f\u56fe\u7684\u6bcf\u4e00\u4e2a\u70b9\u5bf9\u5e94\u4e00\u4e2a\u5706\u70b9\uff0c\u6bcf\u4e2a\u70b9\u53cc\u5bf9\u5e94\u4e00\u4e2a\u65b9\u70b9  \n\u4e00\u4e2a\u70b9\u53cc\u91cc\u7684\u5706\u70b9\u5168\u90e8\u8fde\u5411\u90a3\u4e2a\u65b9\u70b9  \n\u5f62\u6210\u4e00\u4e2a\u83ca\u82b1\u5b50\u56fe  \n\uff08\u56fe\u9009\u81eaWC\u8bfe\u4ef6\uff09  \n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/2020112718363877.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4OTQ0MTYz,size_16,color_FFFFFF,t_70)\n\n\u663e\u7136\u6bcf\u6761\u8fb9\u90fd\u4f1a\u8fde\u5411\u4e00\u4e2a\u5706\u70b9\u548c\u4e00\u4e2a\u65b9\u70b9  \n\u90a3\u4e48\u5982\u4f55\u5efa\u5706\u65b9\u6811\u5462\uff1f\uff1f\uff1f  \n\n\u50cftarjan\u4e00\u6837\u641e\u5c31\u884c\u4e86   \n\u5177\u4f53\u770b\u4ee3\u7801\u5427  \ncode\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define N 1000005\nusing namespace std;\nstruct edge {\n\tint v, nxt;\n} e[N << 1];\nint p[N], eid;\nvoid init() {\n\tmemset(p, -1, sizeof p);\n\teid = 0;\n}\nvoid insert(int u, int v) {\n\te[eid].v = v;\n\te[eid].nxt = p[u];\n\tp[u] = eid ++;\n}\nint n, m, low[N], dfn[N], tot, sta[N], sz, bel[N], insta[N], top, dep[N];\nvector<int> g[N];\nvoid add(int u, int v) {\n\tg[u].push_back(v), g[v].push_back(u);\n}\nvoid dfs(int u) {\n\tlow[u] = dfn[u] = ++ tot;\n\tsta[++ top] = u; insta[u] = 1;\n\tfor(int i = p[u]; i + 1; i = e[i].nxt) {\n\t\tint v = e[i].v;\n\t\tif(!dfn[v]) {\n\t\t\tdfs(v), low[u] = min(low[u], low[v]);\n\t\t\tif(low[v] >= dfn[u]) { //\u5982\u679clow[v]\u5927\u4e8edfn[u]\uff0c\u8bf4\u660e\u65ad\u6389u\u8fd9\u4e2a\u70b9\u540e\u4e0b\u9762\u7684\u70b9\u548c\u4e0a\u9762\u4e0d\u8fde\u901a\uff0c\u8fd9\u662f\u5272\u70b9\uff0c\u6240\u4ee5\u4e0b\u9762\u662f\u4e2a\u70b9\u53cc \n\t\t\t\t\t++ sz;\n\t\t\t\t\tadd(u, sz);//\u6ce8\u610f\u8981\u628a u \u4e5f\u548c \u65b9\u70b9\u8fde\u8fb9 \n\t\t\t\t\twhile(sta[top] != v) add(sta[top], sz), bel[sta[top]] = sz, insta[sta[top --]] = 0;\n\t\t\t\t\tadd(sta[top], sz), bel[sta[top]] = sz, insta[sta[top --]] = 0;//\u628a\u70b9\u53cc\u91cc\u4e00\u76f4\u5230 v \u7684\u70b9\u5168\u90e8\u8fde\u5411\u65b9\u70b9 \uff0c\u56e0\u4e3a u \u53ef\u80fd\u5c5e\u4e8e\u591a\u4e2a\u70b9\u53cc\uff0c\u6240\u4ee5\u4e0d\u5f39\u51fa u \n\t\t\t}\n\t\t}\n\t\telse low[u] = min(low[u], dfn[v]);//\u50cftarjan\u4e00\u6837\u6c42low \n\t}\n}\nint fa[N][22], q;\nvoid dfss(int u) {\n\tfor(int i = 0; i < g[u].size(); i ++) {\n\t\tint v = g[u][i];\n\t\tif(v == fa[u][0]) continue;\n\t\tdep[v] = dep[u] + 1;\n\t\tfa[v][0] = u;\n\t\tdfss(v); \n\t}\n}\nint LCA(int x, int y) {\n\tif(dep[x] < dep[y]) swap(x, y);\n\tfor(int i = 19; i >= 0; i --) if(dep[fa[x][i]] >= dep[y]) x = fa[x][i];\n\tif(x == y) return x;\n\tfor(int i = 19; i >= 0; i --) if(fa[x][i] != fa[y][i]) x = fa[x][i], y = fa[y][i];\n\treturn fa[x][0];\t\n}//\u6c42\u4e24\u70b9\u8ddd\u79bb\u7528\u7684 \nint main() {\n\tinit();\n\tscanf(\"%d%d%d\", &n, &m, &q);\n\tsz = n;\n\tfor(int i = 1; i <= m; i ++) {\n\t\tint u, v;\n\t\tscanf(\"%d%d\", &u, &v);\n\t\tinsert(u, v);\n\t\tinsert(v, u);\n\t}\n\tfor(int i = 1; i <= n; i ++) if(!dfn[i]) dfs(i), dfss(i);\n\tfor(int j = 1; j <= 19; j ++)\n\t\tfor(int i = 1; i <= sz; i ++)\n\t\t\tfa[i][j] = fa[fa[i][j - 1]][j - 1];\n\twhile(q --) {\n\t\tint x, y;\n\t\tscanf(\"%d%d\", &x, &y);\n\t\tint lca = LCA(x, y);\n\t\tprintf(\"%d\\n\", (dep[x] + dep[y] - 2 * dep[lca]) >> 1);//\u7b54\u6848\u5c31\u662f\u4e24\u70b9\u8ddd\u79bb / 2 \n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1606474283,
        "uid": 31656,
        "name": "lomit",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1045C \u3010Hyperspace Highways\u3011"
    }
]
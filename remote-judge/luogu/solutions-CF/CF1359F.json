[
    {
        "content": "\u9996\u5148\uff0c\u5982\u679c\u6211\u4eec\u8003\u8651\u4e8c\u5206\u4e00\u4e2a\u7b54\u6848$t$\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u4f1a\u53d8\u6210\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u79cd\u65b9\u6848\u4f7f\u5f97\u80fd\u8ba9\u4e24\u4e2a\u8f66\u5728\u65f6\u95f4$t$\u4e4b\u524d\u76f8\u649e\u3002\n\n\u5982\u679c\u60f3\u5230\u8fd9\u91cc\uff0c\u7a0d\u5fae\u52a8\u52a8\u8111\u7b4b\u5c31\u4f1a\u53d1\u73b0\uff0c\u5047\u5982\u6211\u4eec\u628a\u6bcf\u8f86\u8f66\u5728$t$\u65f6\u95f4\u5185\u80fd\u591f\u5230\u8fbe\u7684\u4f4d\u7f6e\u753b\u51fa\u6765\uff0c\u90a3\u4e48\u56fe\u50cf\u4f1a\u662f$n$\u6761\u7ebf\u6bb5\uff0c\u6b64\u65f6\u5982\u679c\u5b58\u5728\u4e24\u4e2a\u7ebf\u6bb5\u6709\u516c\u5171\u70b9\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u65b9\u6848\u3002\n\n\u73b0\u5728\u95ee\u9898\u5c31\u53d8\u6210\u5982\u4f55\u5224\u65ad\u7ebf\u6bb5\u4e4b\u95f4\u662f\u5426\u6709\u4ea4\u70b9\u4e86\u3002\n\n\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u7c7b\u4f3c\u626b\u63cf\u7ebf\u7684\u4e1c\u897f\uff1a\u6309\u7167$x$\u4ece\u5c0f\u5230\u5927\u626b\u63cf\uff0c\u5c06\u6bcf\u4e2a\u7ebf\u6bb5\u62c6\u6210\u63d2\u5165\u548c\u5220\u9664\u4e24\u4e2a\u4e8b\u4ef6\uff08\u9898\u76ee\u4e2d\u6ca1\u6709\u7ebf\u6bb5\u4e0e\u5750\u6807\u8f74\u5e73\u884c\uff0c\u8fd9\u6837\u5c31\u51cf\u5c11\u4e86\u5f88\u591a\u9ebb\u70e6\uff09\uff0c\u6b64\u65f6\u8003\u8651\u5982\u4f55\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e24\u6761\u7ebf\u6bb5\u6709\u4ea4\u3002\n\n\u6211\u4eec\u7528\u4e00\u4e2aset\u53bb\u7ef4\u62a4\u7ebf\u6bb5\uff0cset\u5185\u90e8\u6309\u7167\u7ebf\u6bb5\u4e0e\u76f4\u7ebf$x=x_0$\uff08$x_0$\u662f\u5f53\u524d\u626b\u63cf\u5230\u7684$x$\uff09\u4ea4\u70b9\u7684\u7eb5\u5750\u6807\u6392\u5e8f\uff0c\u8fd9\u4e2a\u4e1c\u897f\u7528\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u8fd0\u7b97\u7b26\u5c31\u53ef\u4ee5\u641e\u5b9a\u3002\n\n\u6bcf\u6b21\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u627e\u5230\u5b83\u4e0a\u9762\u548c\u4e0b\u9762\u4e0e\u5b83\u76f8\u90bb\u7684\u4e24\u6761\u7ebf\u6bb5\uff0c\u5224\u65ad\u4e00\u4e0b\u52a0\u5165\u7684\u7ebf\u6bb5\u4e0e\u8fd9\u4e24\u6761\u7ebf\u6bb5\u6709\u6ca1\u6709\u4ea4\uff1b\u5220\u9664\u4e00\u6761\u7ebf\u6bb5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8fd8\u662f\u627e\u5230\u5b83\u4e0a\u9762\u548c\u4e0b\u9762\u7684\u4e24\u6761\u7ebf\u6bb5\uff0c\u5224\u65ad\u8fd9\u4e24\u6761\u7ebf\u6bb5\u4e4b\u95f4\u662f\u5426\u76f8\u4ea4\u3002\u4e00\u65e6\u6211\u4eec\u53d1\u73b0\u6709\u4e24\u6761\u7ebf\u6bb5\u76f8\u4ea4\uff0c\u5c31\u7acb\u523b\u8fd4\u56de\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5982\u679c\u6709\u4e24\u6761\u7ebf\u6bb5\u76f8\u4ea4\uff0c\u90a3\u4e48\u4e00\u5b9a\u80fd\u591f\u5224\u65ad\u51fa\u6765\uff08\u53ef\u4ee5\u5bf9\u8fd9\u4e24\u79cd\u60c5\u51b5\u90fd\u753b\u753b\u56fe\u7406\u89e3\u4e00\u4e0b\uff09\u3002\n\n\u7136\u540e\u7531\u4e8e\u4ee4\u4eba\u5934\u5927\u7684\u7cbe\u5ea6\u8bef\u5dee\uff0c\u8fdb\u884c\u5b9e\u6570\u5224\u65ad\u7684\u65f6\u5019\u8981\u4ed4\u7ec6\u4e00\u4e9b\u3002\u6700\u4e3b\u8981\u7684\u662f\u4e24\u4e2a\u5730\u65b9\uff1a\u7b2c\u4e00\u4e2a\u662f\u8fdb\u884c\u5927\u5c0f\u6bd4\u8f83\u7684\u65f6\u5019\u6700\u597d\u8bbe\u4e2a\u7cbe\u5ea6\u8bef\u5dee\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5220\u9664\u7ebf\u6bb5\u7684\u65f6\u5019\u4e0d\u4e00\u5b9a\u8981\u73b0\u4eceset\u4e2dfind\uff0c\u53ef\u4ee5\u5728\u63d2\u5165\u7684\u65f6\u5019\u5c06\u5bf9\u5e94\u7684iterator\u5b58\u4e0b\u6765\uff0c\u5220\u9664\u7684\u65f6\u5019\u76f4\u63a5erase\u6389iterator\u5c31\u53ef\u4ee5\u4e86\n\n\u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<set>\nusing namespace std;\nconst double eps=1e-8;\nstruct Line{\n\tdouble k,b;\n\tdouble l,r;\n\tint id;\n};\ndouble X;//for comparing\nbool operator <(const Line& a,const Line& b)\n{\n\tdouble vala=a.k*X+a.b;\n\tdouble valb=b.k*X+b.b;\n\tif(fabs(vala-valb)>eps)\n\t\treturn vala<valb;\n\treturn a.id<b.id;\n}\nbool check_inter(Line a,Line b)\n{\n\tdouble dk=a.k-b.k;\n\tdouble db=b.b-a.b;\n\tif(fabs(dk)<eps)\n\t\treturn fabs(a.b-b.b)<eps&&a.r+eps>b.l-eps&&a.l-eps<b.r+eps;\n\tdouble x=db/dk;\n\treturn a.l-eps<x&&x<a.r+eps&&b.l-eps<x&&x<b.r+eps;\n}\nstruct Vec{\n\tdouble x,y;\n\tVec(double xx=0,double yy=0)\n\t{\n\t\tx=xx;\n\t\ty=yy;\n\t}\n\tdouble len()\n\t{\n\t\treturn sqrt(x*x+y*y);\n\t}\n}p[25010],dir[25010];\nVec operator +(const Vec& a,const Vec& b){return Vec(a.x+b.x,a.y+b.y);}\nVec operator -(const Vec& a,const Vec& b){return Vec(a.x-b.x,a.y-b.y);}\nVec operator *(const Vec& a,const double& b){return Vec(a.x*b,a.y*b);}\nVec operator /(const Vec& a,const double& b){return Vec(a.x/b,a.y/b);}\nLine GetLine(Vec a,Vec b)\n{\n\tif(a.x>b.x)swap(a,b);\n\tLine res;\n\tres.l=a.x;res.r=b.x;\n\tres.k=(b.y-a.y)/(b.x-a.x);\n\tres.b=a.y-res.k*a.x;\n\treturn res;\n}\nLine l[25010];\nstruct Event{\n\tdouble x;\n\tint id,op;\n\tEvent(){}\n\tEvent(double a,int b,int c)\n\t{\n\t\tx=a;\n\t\tid=b;\n\t\top=c;\n\t}\n}e[50010];\nbool cmp(Event a,Event b)\n{\n\treturn a.x<b.x;\n}\nint n;\ntypedef multiset<Line>::iterator iter;\niter It[25010];\nbool check(double t)\n{\n\tmultiset<Line>S;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tl[i]=GetLine(p[i],p[i]+dir[i]*t);\n\t\tl[i].id=i;\n\t\tVec to=p[i]+dir[i]*t;\n//\t\tprintf(\"%d:(%.3lf,%.3lf),(%.3lf,%.3lf)\\n\",i,p[i].x,p[i].y,to.x,to.y);\n\t\te[i*2-1]=Event(l[i].l,i,0);\n\t\te[i*2]=Event(l[i].r-eps,i,1);\n\t}\n\tsort(e+1,e+n*2+1,cmp);\n\tfor(int i=1;i<=n*2;i++)\n\t{\n\t\tint id=e[i].id;\n\t\tX=e[i].x;\n//\t\tprintf(\"x:%lf,id=%d\\n\",X,id);\n\t\tif(e[i].op==0)\n\t\t{\n\t\t\titer it=S.insert(l[id]);\n\t\t\titer it1;It[id]=it;\n\t\t\tif(it!=S.begin())\n\t\t\t{\n\t\t\t\tit1=it;it1--;\n//\t\t\t\tprintf(\")\n\t\t\t\tif(check_inter(*it1,*it))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\tit1=it;it1++;\n\t\t\tif(it1!=S.end())\n\t\t\t{\n\t\t\t\tif(check_inter(*it1,*it))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\titer it=It[id],it1,it2;\n\t\t\tit1=it;it1++;it2=it;\n\t\t\tif(it1!=S.end()&&it2!=S.begin())\n\t\t\t{\n\t\t\t\tit2--;\n\t\t\t\tif(check_inter(*it1,*it2))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\tS.erase(it);\n\t\t}\n\t}\n\treturn false;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tdouble s;\n\t\tscanf(\"%lf %lf %lf %lf %lf\",&p[i].x,&p[i].y,&dir[i].x,&dir[i].y,&s);\n\t\tdir[i]=dir[i]/dir[i].len()*s;\n\t}\n//\tcheck(5);\n//\treturn 0;\n\tdouble l=0,r=1e12;\n\tint tim=100;\n\twhile(tim--)\n\t{\n\t\tdouble mid=(l+r)/2;\n\t\tif(check(mid))r=mid;\n\t\telse l=mid;\n\t}\n\tif(r>1e11)printf(\"No show :(\\n\");\n\telse printf(\"%.10lf\\n\",r);\n\treturn 0;\n}\n```\n",
        "postTime": 1591777037,
        "uid": 54475,
        "name": "\u732a\u8111\u5b50",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1359F \u3010RC Kaboom Show\u3011"
    }
]
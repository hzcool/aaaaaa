[
    {
        "content": "## \u9898\u610f\u5206\u6790\n\u5c31\u662f\u8ba9\u4f60\u627e\u51fa\u5728\u533a\u95f4 $[l,r]$ \u8303\u56f4\u5185\u6709\u591a\u5c11\u4e2a\u6570\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u662f\u5468\u671f\u6027\u7684\u3002\n\n## \u505a\u6cd5\u5206\u6790\n\u770b\u5230\u8fd9\u6837\u7684\u9898\u7acb\u9a6c\u5c31\u53ef\u4ee5\u60f3\u5230\u7b54\u6848\u662f $calc(r)-calc(l-1)$\uff0c\u5df2\u7ecf\u6210\u5957\u8def\u4e86\u3002\u90a3\u4e48\u5982\u4f55\u8ba1\u7b97 calc \u5462\uff1f\n\n\u9996\u5148\u6211\u4eec\u60f3\u5230\uff0c\u6574\u4e2a\u4e8c\u8fdb\u5236\u4e32\u7684\u957f\u5ea6\u4e0d\u4f1a\u592a\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u628a calc \u51fd\u6570\u4f20\u8fdb\u53bb\u7684\u53c2\u6570\u505a\u4e8c\u8fdb\u5236\u62c6\u5206\uff0c\u7136\u540e\u6839\u636e\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4e32\u7684\u957f\u5ea6 len \u6211\u4eec\u679a\u4e3e\u4e00\u4e0b\u5faa\u73af\u8282\u7684\u957f\u5ea6 $j$\u3002\n\n\u6211\u4eec\u60f3\u5230\uff0c\u5982\u679c\u5f53\u524d\u679a\u4e3e\u7684\u4f4d\u7f6e i \u8fd8\u4e0d\u5230 len\uff0c\u90a3\u4e48\u8fd9\u4e2a\u957f\u5ea6\u4e3a j \u7684\u5faa\u73af\u8282\u5b9a\u7136\u53ef\u4ee5\u968f\u4fbf\u53d6\uff0c\u53d6\u591a\u5927\u90fd\u4e0d\u4f1a\u8d85\u8fc7\u6211\u4eec\u4f20\u8fdb\u53bb\u7684\u53c2\u6570\uff0c\u56e0\u4e3a\u957f\u5ea6\u662f\u786c\u4f24\u3002\u6240\u4ee5\u5728\u8fd9\u4e2a\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u7b54\u6848\u5c31\u8981\u52a0\u4e0a $2^{j-1}$\u3002\n\n\u90a3\u5982\u679c $i=len$ \u5462\uff1f\u6211\u4eec\u60f3\u5230\u4e86\u6570\u4f4d $dp$\uff0c\u5728\u679a\u4e3e\u5faa\u73af\u8282\u957f\u5ea6\u4e4b\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u4e00\u4e2a\u4e8c\u8fdb\u5236\u5468\u671f\u4e32\u662f\u5982\u4e0b\u6240\u793a\u7684\uff1a\n\n$1\\ \\ 0\\ \\ 1\\ \\ 1\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 1\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 1\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 1\\ \\ $\n\n\u90a3\u4e48\uff0c\u4ed6\u7684\u5341\u8fdb\u5236\u8868\u793a\u662f\u591a\u5c11\u5462\uff1f\u663e\u7136\uff0c\u662f\u6700\u4f4e\u4f4d\u7684\u5faa\u73af\u8282\u7684\u5927\u5c0f\u518d\u4e58\u4e0a\u5f88\u591a\u7684\u5f88\u591a\u4e2a 2.\u6240\u4ee5\u6211\u4eec\u8ba1\u7b97\u5728\u5f53\u524d\u5faa\u73af\u8282\u957f\u5ea6\u4e0b\uff0c\u8fd9\u4e2a\u6570\u662f\u591a\u5c11\uff0c\u4e5f\u5c31\u662f\uff1a\n\n`for(int i=1;i<=j;i++) c+=(a[len-i+1]<<(j-i));`\n\n\u8fd9\u662f\u4e00\u4e2a\u6700\u4f4e\u4f4d\u5faa\u73af\u8282\u7684\u548c\uff0c\u603b\u5171\u7684\u5219\u662f\uff1a\n\n`b=c,for(int i=1;i<=len/j-1;i++) b<<=j,b+=c;`\n\n\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u5224\u65ad\u4e00\u4e0b\u8fd9\u4e2a\u6570\u5b57\u662f\u5426\u5927\u4e8e limit \u5373\u53ef\u3002\n\n\u6700\u540e\u4e00\u4e2a\u91cd\u70b9\uff1a\u6211\u4eec\u518d\u89c2\u5bdf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4e32\uff1a\n\n$1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0\\ \\ 1\\ \\ 0$\n\n\u53d1\u73b0\u6ca1\u6709\uff1f\u95ee\u9898\u51fa\u5728\u54ea\u91cc\uff1f\u8fd9\u4e2a\u6570\u5b57\u88ab\u957f\u5ea6\u4e3a 2\uff0c4\uff0c8\u7684\u5faa\u73af\u8282\u90fd\u8ba1\u7b97\u4e86\u4e00\u904d\uff01\u6240\u4ee5\u6211\u4eec\u5728\u7edf\u8ba1\u7684\u65f6\u5019\u8fd8\u8981\u628a\u5f53\u524d\u5faa\u73af\u8282\u957f\u5ea6 j \u7684\u6240\u6709\u56e0\u5b50\u7684\u7b54\u6848\u90fd\u51cf\u6389\uff0c\u7ec6\u8282\u8be6\u89c1\u4ee3\u7801\uff1a\n\n```c++\n#include<stdio.h>\n#include<string.h>\n#include<iostream> \nusing namespace std;\n#define ll long long\nint a[100];\nll dp[100];\nll cal(int len,int j,ll o)\n{\n\tll c=0,b=1;\n\tfor(int i=1;i<=j;i++) c+=(a[len-i+1]<<(j-i));\n\tb=c;\n\tfor(int i=1;i<=len/j-1;i++) b<<=j,b+=c;\n\tll sum=1<<(j-1);\n\treturn c-sum+(b<=o);\n\t\n}\nll solve(ll w)\n{\n\tint len=0;\n\tll ww=w;\n\tll ans=0;\n\twhile(w)\n\t{\n\t\ta[++len]=w%2;\n\t\tw/=2;\t\t\n\t}\n\tfor(int i=2;i<=len;i++)\n\t{\n\t\tmemset(dp,0,sizeof(dp));\n\t\tfor(int j=1;j<=i/2;j++)\n\t\t{\n\t\t\tif(i%j!=0) continue;\n\t\t\tif(i<len) dp[j]+=(1<<(j-1));\n\t\t\telse dp[j]+=cal(len,j,ww);\n\t\t\tfor(int k=1;k<j;k++)\n\t\t\t{\n\t\t\t\tif(j%k==0)\n\t\t\t\tdp[j]-=dp[k];\n\t\t\t}\n\t\t\tans+=dp[j];\n\t\t}\n\t}\n\treturn ans;\n}\nint main()\n{\n\tll n,m;\n\tcin>>n>>m;\n\tprintf(\"%lld\\n\",solve(m)-solve(n-1));\n\treturn 0;\n}\n```",
        "postTime": 1621392585,
        "uid": 517444,
        "name": "AladV",
        "ccfLevel": 0,
        "title": "CF215E\u9898\u89e3"
    },
    {
        "content": "\u6211\u4e0d\u4f1a\u6570\u4f4d DP\uff01\n\n\u53cd\u6b63\u6211\u7528\u7ec4\u5408\u6570\u5b66\u7684\u65b9\u6cd5\u4e5f A \u6389\u4e86\u3002\n\n\u5206\u6790\u8be5\u9898\uff0c\u7ecf\u5178\u5957\u8def\u662f\u628a $[l,r]$ \u62c6\u6210 $[1,r]-[1,l-1]$ \u7136\u540e\u4e24\u4e2a\u533a\u95f4\u8ba1\u7b97\u524d\u7f00\u548c\u3002\n\n\u7136\u540e\u6211\u4eec\u9700\u8981\u505a\u7684\u5373\u4e3a\uff0c\u6c42\u51fa\u6240\u6709 $\\le x$ \u5408\u6cd5\u7684\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u957f\u5ea6\uff0c\u5faa\u73af\u8282\u90fd\u7279\u522b\u5c0f\uff0c\u90a3\u6211\u4eec\u4e0d\u59a8\u53bb\u679a\u4e3e\u5b83\u3002\n\n\u679a\u4e3e\u7684\u957f\u5ea6\u548c\u5faa\u73af\u8282\u4e4b\u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5173\u5fc3\u5faa\u73af\u8282\u5185\u90e8\u586b\u4e86\u4ec0\u4e48\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u957f\u5ea6\u5c0f\u4e8e $x$ \u7684\u957f\u5ea6\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u968f\u4fbf\u4e71\u586b\u3002\n\n\u5bf9\u4e8e\u957f\u5ea6\u7b49\u4e8e $x$ \u7684\u957f\u5ea6\u7684\uff0c\u7c7b\u4f3c\u4e8e\u6570\u4f4d DP \u7684\u5957\u8def\u4e00\u6837\uff0c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u90fd\u6309\u4f4d\u8003\u8651\uff0c\u5982\u679c\u8fd9\u4e00\u4f4d\u662f $1$\uff0c\u90a3\u4e48\u6211\u4eec\u586b $0$ \u4e4b\u540e\u540e\u9762\u7684\u53ef\u4ee5\u968f\u4fbf\u4e71\u586b\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e00\u4f4d\u662f $0$\uff0c\u90a3\u6ca1\u529e\u6cd5\u53ea\u80fd\u8dd1\u8def\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u6700\u540e\u4e00\u6b21\u6211\u4eec\u586b\u8fdb\u53bb\u4e5f\u6709\u53ef\u80fd\u5408\u6cd5\uff0c\u9700\u8981\u5355\u72ec\u8ba1\u7b97\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u6709\u70b9\u5c0f\u95ee\u9898\u8981\u5904\u7406\u3002\n\n\u9996\u5148\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5bb9\u6613\u7b97\u91cd\uff0c\u6bd4\u5982\u8bf4 `1111` \u4f1a\u88ab\u5faa\u73af\u8282 $1$ \u7b97\u4e00\u6b21\uff0c\u88ab\u5faa\u73af\u8282 $2$ \u7b97\u4e00\u6b21\u3002\n\n\u5904\u7406\u7b97\u91cd\u7684\u95ee\u9898\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u628a\u5b83\u7684\u56e0\u6570\u4ee5\u53ca\u957f\u5ea6\u5168\u90fd\u679a\u4e3e\u4e00\u904d\u5c31\u53ef\u4ee5\u4e86\uff0c\u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u5224\u65ad\u6761\u4ef6\u3002\n\n\u6761\u4ef6\u5c31\u662f\u957f\u5ea6\u9700\u8981\u88ab\u4e24\u4e2a\u90fd\u6574\u9664\uff0c\u4e14\u4e0d\u80fd\u7b49\u4e8e\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u3002\n\n\u6ce8\u610f\u8fd9\u91cc\u5f00 long long\uff0c\u540c\u65f6\u6309\u7167\u6570\u4f4d DP \u7684\u601d\u60f3\uff0c\u6bcf\u6b21\u5e94\u8be5\u90fd\u5361\u7740\u4e0a\u9650\uff0c\u56e0\u6b64\u5982\u679c\u586b $1$ \u7684\u8bdd\uff0c\u9700\u8981\u628a\u5faa\u73af\u8282\u540e\u9762\u7684\u4e5f\u7ed9\u641e\u6210 $1$\uff0c\u5224\u4e00\u4e0b\u662f\u5426\u8d85\u51fa\u4e0a\u9650\u5373\u53ef\u3002\n\n\u7ec6\u8282\u8bfb\u8005\u53ef\u4ee5\u81ea\u884c\u63e3\u6469\uff0c\u8fd9\u91cc\u4e0d\u518d\u505a\u8fc7\u591a\u8d58\u8ff0\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#define int long long \nusing namespace std;\nconst int INF=129;\nint l,r,g[INF],f[INF][INF];\nint calc1(int x,int y,int z) {\n\tint xx=0;\n\tfor (int i=z;i<=y;i+=x) \n\t\txx|=(1ll<<(i-1));\n\treturn xx;\n}\nint calc(int x){\n\tmemset(f,0,sizeof f);\n\tint xx=x;g[0]=0;\n\twhile (xx) {\n\t\tg[++g[0]]=xx%2;\n\t\txx/=2;\n\t}\n\tfor (int k=1;k<=g[0];k++) {\n\t\tf[k][0]=0;// k \u4e3a\u5faa\u73af\u8282\u957f\u5ea6 \n\t\tfor (int i=k+k;i<=g[0];i+=k) {\n\t\t\tif (i<g[0]) f[k][i]+=(1ll<<(k-1));\n\t\t\telse {\n\t\t\t\tint p=0;\n\t\t\t\tfor (int l=g[0];l>=1;l--) {\n\t\t\t\t\tif (l==g[0]) {p+=calc1(k,i,k);continue;}\n\t\t\t\t\tif (g[0]-l+1>k) continue;\n\t\t\t\t\tif (p>x) break;\n\t\t\t\t\tif (g[l]==1) {\n\t\t\t\t\t\tf[k][i]+=1ll<<(k-(g[0]-l+1));\n\t\t\t\t\t\tp+=calc1(k,i,k-(g[0]-l));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (p<=x) f[k][i]++;\n\t\t\t}\n\t\t}\n\t}\n\tint res=0;\n\tfor (int i=0;i<=g[0];i++)\n\t\tfor (int j=1;j<=g[0];j++)\n\t\t\tfor (int k=j+j;k<=g[0];k+=j)\n\t\t\t\tif (i%k==0 && i%j==0 && i!=k) f[k][i]-=f[j][i];\n\t\n\tfor (int i=0;i<=g[0];i++)\n\t\tfor (int j=1;j<=g[0];j++)\n\t\t\tres+=f[j][i];\n\treturn res;\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>l>>r;\n\tcout<<calc(r)-calc(l-1)<<\"\\n\";\n\treturn 0;\n}\n```\n",
        "postTime": 1664617921,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF215E"
    },
    {
        "content": "\u6211\u4eec\u679a\u4e3e\u6570\u7684\u957f\u5ea6 $len$\uff0c\u5faa\u73af\u8282\u957f\u5ea6 $k$ \uff0c\u7b97\u51fa\u8303\u56f4\u5185\u6709\u591a\u5c11\u4e2a\u6570\u7684\u4e8c\u8fdb\u5236\u662f\u957f\u5ea6\u4e3a $len$ \u5e76\u4e14\u5faa\u73af\u8282\u957f\u5ea6\u4e3a $k$ \u7684\uff0c\u8bb0\u4e3a $Ans_{len,k}$ \uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u6570\u4f4ddp\u5feb\u901f\u6c42\uff0c\u505a\u6cd5\u548c [SP10649 Mirror Number](https://www.luogu.com.cn/problem/SP10649) \u7c7b\u4f3c\uff0c\u5c31\u662f\u5728\u6570\u4f4ddp\u7684\u8fc7\u7a0b\u4e2d\u5f00\u4e00\u4e2a\u8f85\u52a9\u6570\u7ec4\u6765\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\u5bf9\u5e94\u7684\u5faa\u73af\u8282\u662f\u4ec0\u4e48\u3002\n\n\u6c42\u51fa\u4e86 Ans \u6570\u7ec4\u540e\uff0c\u53d1\u73b0\u76f4\u63a5\u628a Ans \u6570\u7ec4\u91cc\u6240\u6709\u7684\u6570\u7684\u548c\u52a0\u8d77\u6765\u4f1a\u51fa\u73b0\u7b97\u91cd\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u957f\u5ea6\u4e3a 8\uff0c\u5faa\u73af\u8282\u957f\u5ea6\u4e3a 4 \u7684\u60c5\u51b5\u4e2d\u4e00\u5b9a\u5305\u542b\u4e86\u957f\u5ea6\u4e3a 8\uff0c\u5faa\u73af\u8282\u957f\u5ea6\u4e3a 2 \u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u628a\u4ed6\u4eec\u51cf\u53bb\u5c31\u884c\u4e86\u3002\u4e5f\u5c31\u662f\n$$\nAns_{len,k} \\leftarrow Ans_{len,k}-\\sum _{g<k,g|k} Ans_{len,g}\n$$\n\u6ce8\u610f\u5220\u7684\u987a\u5e8f\uff0c\u8981\u4ece\u5c0f\u5230\u5927\u5220\uff0c\u4e5f\u5c31\u662f\u4fdd\u8bc1\u5220 k \u7684\u65f6\u5019 k \u7684\u56e0\u5b50\u5df2\u7ecf\u4e0d\u5b58\u5728\u7b97\u91cd\u4e86\u3002\n\n$\\texttt{Code:}$\n\n```cpp\n// This code wrote by chtholly_micromaker(MicroMaker)\n#include <bits/stdc++.h>\n#define reg register\n#define int long long\n#define mem(x,y) memset(x,y,sizeof x)\n#define ln puts(\"\")\nusing namespace std;\ntemplate <class t> inline void read(t &s){\ns=0;reg int f=1;reg char c=getchar();while(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\nwhile(isdigit(c))s=(s<<3)+(s<<1)+(c^48),c=getchar();s*=f;return;}\ntemplate<class t,class ...A> inline void read(t &x,A &...a){read(x);read(a...);return;}\ntemplate <class t> inline void write(t x){if(x<0)putchar('-'),x=-x;int buf[21],top=0;\nwhile(x)buf[++top]=x%10,x/=10;if(!top)buf[++top]=0;while(top)putchar(buf[top--]^'0');\nreturn;}\nint a[70],t[70],f[70][70],Len,D;// Len\uff1a\u679a\u4e3e\u7684\u6570\u5728\u4e8c\u8fdb\u5236\u4e0b\u7684\u957f\u5ea6\uff0c D\uff1a\u679a\u4e3e\u7684\u5faa\u73af\u8282\u957f\u5ea6\uff0ct\u8f85\u52a9\u6570\u7ec4\nint Ans[70][70];\ninline int dfs(int dep,int zero,bool lim)\n    //dep\uff1a\u5f53\u524d\u679a\u4e3e\u5230\u7684\u4f4d\u6570\uff0czero\u8868\u793a\u4ece\u54ea\u4e00\u4f4d\u5f00\u59cb\u7684\u7b97\u7684\uff0c\u7528\u6765\u5f04\u524d\u5bfc0\u4e4b\u7c7b\u7684\n{\n\tif(!dep)\n\t\treturn zero==Len;\t// \u957f\u5ea6\u662f\u5426\u8ddf\u679a\u4e3e\u7684\u957f\u5ea6\u4e00\u6837\n\tif(!lim&&~f[dep][zero])\n\t\treturn f[dep][zero];\n\treg int maxi=lim?a[dep]:1,res=0;\n\tfor(int i=0;i<=maxi;++i)\n\t{\n\t\treg int nzero=zero;\n\t\tif(i&&!nzero)\n\t\t\tnzero=dep;\t\t// \u5f53\u524d\u4f4d\u7f6e\u5f00\u59cb\u7b97\uff0c\u4e4b\u524d\u90fd\u662f\u524d\u5bfc\u96f6\n\t\tif(nzero-dep<D)\t\t// \u8fd8\u6ca1\u6709\u586b\u6ee1 D \u4e2a\u6570\n\t\t{\n\t\t\tt[nzero-dep]=i;\n\t\t\tres+=dfs(dep-1,nzero,lim&&(i==maxi));\n\t\t}\n\t\telse if(t[(nzero-dep)%D]==i)\t// \u770b\u662f\u5426\u80fd\u8ddf\u5faa\u73af\u8282\u4e00\u6837\n\t\t\tres+=dfs(dep-1,nzero,lim&&(i==maxi));\n\t}\n\tif(!lim)\n\t\tf[dep][zero]=res;\n\treturn res;\n}\ninline int calc(int x,int l,int d)\n{\n\treg int cnt=0;\n\twhile(x)\n\t\ta[++cnt]=(x&1),x>>=1;\n\tmem(f,-1);\n\tLen=l;\n\tD=d;\n\treturn dfs(cnt,0,true);\n}\nsigned main(void)\n{\n\treg int l,r;read(l,r);\n\tfor(int i=1;i<=64;++i)\n\t\tfor(int j=1;j<i;++j)\n\t\t\tif(!(i%j))\n\t\t\t\tAns[i][j]=calc(r,i,j)-calc(l-1,i,j);\n\tfor(int i=1;i<=64;++i)\t\t// \u53bb\u91cd\n\t\tfor(int j=1;j<i;++j)\n\t\t\tif(!(i%j))\n\t\t\t\tfor(int k=1;k<j;++k)\n\t\t\t\t\tif(!(j%k))\n\t\t\t\t\t\tAns[i][j]-=Ans[i][k];\n\treg int ans=0;\n\tfor(int i=1;i<=64;++i)\n\t\tfor(int j=1;j<i;++j)\n\t\t\tans+=Ans[i][j];\n\twrite(ans),ln;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1599114950,
        "uid": 51376,
        "name": "MyukiyoMekya",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF215E \u3010Periodical Numbers\u3011"
    }
]
[
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/werner-yin/p/-solution-CF-1436E.html)\n# Problem\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n(n \\leq 10^5)$ \u7684\u6570\u7ec4\uff0c\u6c42\u51fa\u5b83\u6240\u6709\u5b50\u6570\u7ec4 $MEX$  \u7684 $MEX$ \u3002\n\n\u8fd9\u91cc\u7684$MEX$ \u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u6ca1\u6709\u51fa\u73b0\u7684 **\u6b63\u6574\u6570**\u3002\n\n# Solution\n\n\u8003\u573a\u6ca1\u6709\u60f3\u51fa\u6765\uff0c\u81ea\u95ed\u4e86\u3002\n\n\u6211\u4eec\u8003\u8651\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u5b50\u6570\u7ec4\uff0c\u6ee1\u8db3\u5176$MEX=a$ \uff0c\u9996\u5148\uff0c\u8fd9\u4e2a\u5b50\u6570\u7ec4\u91cc\u9762\u5fc5\u987b\u8981\u6ca1\u6709 $a$ \uff0c\n\n\u4e8e\u662f\u6211\u4eec\u9996\u5148\u628a\u6570\u7ec4\u4e2d\u6240\u6709\u7684 $a$ \u627e\u51fa\u6765\uff0c\u8fd9\u4e9b $a$ \u628a\u6570\u7ec4\u5206\u6210\u4e86\u82e5\u5e72\u6bb5\uff0c\u6211\u4eec\u8981\u7684\u5b50\u6570\u7ec4\u5fc5\u987b\u4e0d\u80fd\u8de8\u8d8a\u8fd9\u4e9b\u6bb5\u3002\n\n\u5176\u6b21\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u6bb5\u4e2d\uff0c\u5982\u679c\u6240\u6709\u5c0f\u4e8e$a-1$\u7684\u6570\u90fd\u5728\u91cc\u9762\uff0c\u90a3\u4e48\u8fd9\u4e00\u6bb5\u4e00\u5b9a\u6ee1\u8db3$MEX=a$ \uff08\u56e0\u4e3a\u91cc\u9762\u6ca1\u6709$a$\uff09\u3002\n\n\u53ef\u4ee5\u7ed3\u5408\u4e00\u4e0b\u56fe\u7406\u89e3\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ymw3lx2g.png)\n\n\n\u6211\u4eec\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\uff0c\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n# Code\n\n```cpp\nconst int MAXN = 1e5+10;\n\nint val[MAXN<<2],lst[MAXN],a[MAXN],n;\nbool able[MAXN];\n\n//\u8fd9\u4e2a\u7ebf\u6bb5\u6811\u7ef4\u62a4\u7684\u662f\u6bcf\u4e2a\u6570\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\n\nvoid update(int o,int l,int r,int pos,int v){\n\tif(l == r) return (void)(val[o] = v);\n\tint mid = l+r>>1;\n\tif(pos <= mid) update(o<<1,l,mid,pos,v);\n\telse update(o<<1|1,mid+1,r,pos,v);\n\tval[o] = min(val[o<<1],val[o<<1|1]);\n}//\u66f4\u65b0\u533a\u95f4\u6700\u5c0f\u503c\n\nint query(int o,int l,int r,int xl,int xr){\n\tif(l == xl && r == xr) return val[o];\n\tint mid = l+r>>1;\n\tif(xr <= mid) return query(o<<1,l,mid,xl,xr);\n\telse if(xl > mid) return query(o<<1|1,mid+1,r,xl,xr);\n\telse return min(query(o<<1,l,mid,xl,mid),query(o<<1|1,mid+1,r,mid+1,xr));\n}//\u67e5\u8be2\u533a\u95f4\u6700\u5c0f\u503c\n\nint main (){//lst[i] i \u4e0a\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\n\tscanf(\"%d\",&n);\n\tfor(int i = 1;i <= n;i++) scanf(\"%d\",&a[i]);\n\tfor(int i = 1;i <= n;i++){\n\t\tif(a[i] != 1) able[1] = 1;//\u6ce8\u610f\u5bf91\u7684\u7279\u5224\n\t\tif(a[i] > 1  && query(1,1,n,1,a[i]-1) > lst[a[i]]) able[a[i]] = 1;\n      //\u5bf9\u6bb5\u8fdb\u884c\u5206\u5272\u5904\u7406\uff08lst[a[i]] ~ i) \uff0c\u5982\u679c 1~a[i]-1 \u7684\u6570\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\u90fd > lst[a[i]] \u4e14 < i(\u56e0\u4e3a\u540e\u9762\u7684\u8fd8\u6ca1\u66f4\u65b0\uff0c\u6240\u4ee5\u5fc5\u5b9a < i) ,\u90a3\u4e48\u8fd9\u4e00\u6bb5\u6ee1\u8db3MEX = a[i]\n\t\tlst[a[i]] = i;\n\t\tupdate(1,1,n,a[i],i);\n\t}\n\tfor(int i = 2;i <= n+1;i++) if(query(1,1,n,1,i-1) > lst[i]) able[i] = 1;\n  //\u56e0\u4e3alst[i] \u521d\u59cb\u4e3a0\uff0c\u6240\u4ee5\u4e4b\u524d\u6211\u4eec\u5904\u7406\u4e86 1\uff5ei \u6700\u5148\u51fa\u73b0\u7684\u4f4d\u7f6e\u7684\u6bb5\uff0c\u4f46\u662f\u6ca1\u6709\u5904\u7406 lst[i] ~ \u7ed3\u5c3e \u7684\u6bb5\uff0c\u8fd9\u91cc\u5728\u5904\u7406\u4e00\u904d\n\tint ans = 1;\n\tfor(;able[ans] && ans <= n+1;ans++);\n  //\u67e5\u627e\u7b54\u6848\uff0c\u6ce8\u610fans \u4e0a\u754c\u5b9e\u9645\u4e0a\u4e3a n+2\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1603612209,
        "uid": 167354,
        "name": "Werner_Yin",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "\u8003\u8651\u4f9d\u6b21\u5224\u65ad $i$ \u662f\u5426\u51fa\u73b0\u5728\u5b50\u5e8f\u5217 mex \u4e2d\uff0c\u663e\u7136 $i$ \u80fd\u51fa\u73b0\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u4e24\u4e2a\u76f8\u90bb\u7684 $i$ \u4f7f\u5f97\u4ed6\u4eec\u4e4b\u95f4\u7684\u533a\u95f4 mex \u4e3a $i$\n\n\u7531\u4e8e\u76f8\u90bb\u7684 $i$ \u603b\u8ba1\u53ea\u6709 $O(n)$ \u7ec4\uff0c\u9898\u76ee\u53ef\u4ee5\u8f6c\u5316\u4e3a $n$ \u7ec4\u8be2\u95ee\u533a\u95f4 mex\n\n\u8fd9\u662f\u4e2a\u7ecf\u5178\u95ee\u9898\uff0c\u53ef\u4ee5\u79bb\u7ebf\u83ab\u961f\u5904\u7406\u3002\u6ce8\u610f\u8981\u4f7f\u7528\u503c\u57df\u5206\u5757",
        "postTime": 1603608437,
        "uid": 29826,
        "name": "SSerxhs",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "\u6c42\u89e3 mex \u662f\u83ab\u961f\u5e38\u89c1\u5957\u8def\u5427\u3002\n\n\u8003\u8651\u5230\u8fd9\u9898\u6ca1\u6709\u8be2\u95ee\uff0c\u6211\u4eec\u5c31\u5c1d\u8bd5\u6784\u9020\u4e00\u4e9b\u8be2\u95ee\u7ed9\u4ed6\u3002\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u6309\u7167\u76f8\u90bb\u7684 i \u5206\u6bb5\uff0c\u5047\u8bbe i \u8fd9\u4e2a\u6570\u7684\u51fa\u73b0\u4f4d\u7f6e\u662f $p_1,p_2,...,p_k$\uff0c\u4e8e\u662f\u8be2\u95ee\u5c31\u662f\u8fd9\u6837\u7684:$1\\to p_1-1,p_1+1\\to p_2-1,...,p_k+1\\to n$\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u6570 i \u90fd\u8fd9\u4e48\u5206\u6bb5\uff0c\u5982\u679c\u533a\u95f4\u4e0d\u591f\u957f\u5c31\u76f4\u63a5\u820d\u5f03\u4e86\uff0c\u4e0d\u8981\u653e\u8fdb\u8be2\u95ee\u4e2d\uff0c\u6240\u6709\u533a\u95f4\u6700\u591a $O(n)$ \u4e2a\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u83ab\u961f\u7ef4\u62a4\u4e86\uff0c\u6bcf\u6b21\u79fb\u52a8\u5b8c\u7edf\u8ba1 $1\\to i-1$ \u662f\u5426\u90fd\u51fa\u73b0\u8fc7\u3002\u5077\u61d2\u5199\u4e86\u4e2a\u6811\u72b6\u6570\u7ec4\u591a\u4e00\u4e2a log\uff0c\u4f46\u662f\u5e38\u6570\u633a\u5c0f\u53ef\u4ee5\u8fc7\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define ull unsigned long long\n#define clr(f, n) memset(f, 0, sizeof(int) * (n))\n#define cpy(f, g, n) memcpy(f, g, sizeof(int) * (n))\n#define rev(f, n) reverse(f, f + n)\n#define pir pair<int, int>\n#define mkp make_pair\n#define fst it->first\n#define sec it->second\n#define int long long\n#define up(i,x,y) for(int i=x,i##end=y;i<=i##end;++i)\n#define down(i,x,y) for(int i=x,i##end=y;i>=i##end;--i)\nusing namespace std;\nint n, m, k;\nint read()\n{\n    int s = 0, f = 1;\n    char ch = getchar();\n    while (ch < '0' || ch > '9')\n    {\n        if (ch == '-')\n            f = -1;\n        ch = getchar();\n    }\n    while (ch >= '0' && ch <= '9')\n    {\n        s = s * 10 + ch - '0';\n        ch = getchar();\n    }\n    return s * f;\n}\ninline void print(int *f, int len)\n{\n    for (int i = 0; i < len; i++)\n        printf(\"%lld \", f[i]);\n    puts(\"\");\n}\nconst int maxn=2e5+10;\nint a[maxn];\nvector<int>v[maxn];\nint bl[maxn],f[maxn],blo,tot=0;\nint w[maxn];\nint lowbit(int x){return x&(-x);}\nvoid upt(int x,int y)\n{\n\tfor(int i=x;i<=n;i+=lowbit(i))w[i]+=y;\n}\nint qry(int x)\n{\n\tint ans=0;\n\tfor(int i=x;i>=1;i-=lowbit(i))ans+=w[i];\n\treturn ans;\n}\nstruct node\n{\n\tint l,r,id;\n\tnode(int ll=0,int rr=0,int idid=0){l=ll,r=rr,id=idid;}\n}q[maxn];\nbool cmp(node x,node y)\n{\n    if(bl[x.l]!=bl[y.l])\n        return bl[x.l]<bl[y.l];\n    else\n        return x.r<y.r;\n}int tim[maxn];\nvoid add(int x)\n{\n\t++tim[x];\n\tif(tim[x]==1)upt(x,1);\n}\nvoid del(int x)\n{\n\t--tim[x];\n\tif(tim[x]==0)upt(x,-1);\n}\nint query(int x)\n{\n\tint a=qry(x);\n\tif(a==x-1)return 1;\n\treturn 0;\n}\nsigned main()\n{\n\tn=read();\n\tblo=sqrt(n);\n\tup(i,1,n){a[i]=read();v[a[i]].push_back(i);if(a[i]>1)f[1]=1;}\n\tup(i,1,maxn-10)bl[i]=(i-1)/blo+1;\n\tup(i,2,n+1)\n\t{\n\t\tint ql=1,qr;\n\t\tfor(auto x:v[i])\n\t\t{\n\t\t\tqr=x-1;\n\t\t//\tcout<<qr<<endl;\n\t\t\t\n\t\t\tif(qr-ql+1>=i-1)q[++tot]=node(ql,qr,i);\n\t\t\tql=x+1;\n\t\t}\n\t\tqr=n;\n\t\tif(qr-ql+1>=i-1)q[++tot]=node(ql,qr,i);\n\t}\n\tsort(q+1,q+tot+1,cmp);\n\treverse(q+1,q+tot+1);\n\tint l=1,r=0;\n\tup(i,1,tot)\n\t{\n\t\tif(f[q[i].id])continue;\n\t\twhile(l>q[i].l)\n\t\t{\n\t\t\tadd(a[--l]);\n\t\t}\n\t\twhile(l<q[i].l)\n\t\t{\n\t\t\tdel(a[l++]);\n\t\t}\n\t\twhile(r>q[i].r)\n\t\t{\n\t\t\tdel(a[r--]);\n\t\t}\n\t\twhile(r<q[i].r)\n\t\t{\n\t\t\tadd(a[++r]);\n\t\t}\n\t\tf[q[i].id]=query(q[i].id);\n\t}\n\tup(i,1,n+1)\n\t{\n\t\tif(!f[i])\n\t\t{\n\t\t\tcout<<i;\n\t\t\treturn 0;\n\t\t}\n\t}\n\tcout<<n+2;\n}\n\n```\n",
        "postTime": 1611627210,
        "uid": 154101,
        "name": "fily",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "[\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1436E)\n\n\u9996\u5148\u8003\u8651\u4e00\u4e2a\u7ed3\u8bba:\u5c06\u4e00\u4e2a\u533a\u95f4\u4e2d\u7684\u6570\u53bb\u91cd\u540e\u8fd9\u4e2a\u533a\u95f4$mex$\u6ca1\u6709\u5f71\u54cd\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u6c42\u51fa\u90a3\u4e9b$mex$\u4e2d\u6709\u51e0\u4e2a\u6570\u3002\n\n\u4e00\u4e2a\u533a\u95f4$mex=k$\u7684\u6761\u4ef6\u662f\u533a\u95f4\u6ca1\u6709$k$\u4e14\u533a\u95f4\u6709$1$\u5230$k-1$\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u540c\u6837\u7684\u6570\u5206\u6bb5\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a\u6bb5\u8fd9\u6837\u67e5\u8be2\u5373\u53ef\u3002\n\n\u5373\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6:$[l\\leq i \\leq r]$\u548c\u6240\u6709\u4e0d\u540c\u7684$1\\sim k-1$\u79cd\u7c7b\u7b49\u4e8e$k-1$\u3002\n\n\u5982\u679c\u76f4\u63a5\u50cf$HH\u7684\u9879\u94fe$\u90a3\u6837\u90a3\u5c31\u8981\u4e8c\u7ef4\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u8981\u4e24\u4e2a$log$\u3002\n\n\u8f6c\u5316\u4e00\u4e0b\uff0c\u5219\u5c31\u662f\u5224\u65ad$1 \\sim k-1$\u4e2d\u6700\u5c0f\u7684\u51fa\u73b0\u7684\u4f4d\u7f6e\u662f\u5426\u5c0f\u4e8e$l$\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u590d\u6742\u5ea6$O(nlogn)$\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n```cpp\n#include<cstdio>\n#include<vector>\n#include<cstring>\n#define max(a,b) ((a)>(b)?(a):(b))\n#define min(a,b) ((a)<(b)?(a):(b))\nusing namespace std;\nint n,m,k,x,y,z,ans[100039],a[100039],pus,maxn;\nint last[100039],f[400039],g[100039];\ninline void get(int x,int z,int l,int r,int now){\n\tif(l==r){f[now]=z;return;}\n\tint m=(l+r)>>1;\n\tif(x<=m) get(x,z,l,m,now<<1);\n\telse get(x,z,m+1,r,now<<1|1);\n\tf[now]=min(f[now<<1],f[now<<1|1]);\n}\ninline int find(int x,int y,int l,int r,int now){\n\tif(x<=l&&r<=y) return f[now];\n\tint m=(l+r)>>1,fs1=1e9,fs2=1e9;\n\tif(x<=m) fs1=find(x,y,l,m,now<<1);\n\tif(y>m)fs2=find(x,y,m+1,r,now<<1|1);\n\treturn min(fs1,fs2);\n}\nint main(){\n//\tfreopen(\"1.in\",\"r\",stdin);\n\tregister int i;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++) scanf(\"%d\",&a[i]),maxn=max(maxn,a[i]),ans[1]|=(a[i]!=1?1:0),ans[2]|=(a[i]==1?1:0);\n\tfor(i=1;i<=n;i++){\n\t\tg[i]=last[a[i]];\n\t\tlast[a[i]]=i;\n\t}\n\tfor(i=1;i<=n;i++){\n\t\tget(a[i],i,1,n+1,1);\n\t\tif(a[i]!=1){\n\t\t\tpus=find(1,a[i]-1,1,n+1,1);\n\t\t\t//printf(\"%d %d\\n\",a[i],pus);\n\t\t\tif(pus>g[i]) ans[a[i]]=1; \n\t\t}\n\t}\n\tfor(i=2;i<=maxn+1;i++){\n\t//\tprintf(\"%d %d\\n\",i,find(1,i-1,1,n+1,1));\n\t\tif(find(1,i-1,1,n+1,1)>last[i]) ans[i]=1;\n\t}\n\tfor(i=1;i<=n+2;i++) if(!ans[i]){printf(\"%d\\n\",i);return 0;}\n}\n```",
        "postTime": 1603612744,
        "uid": 181766,
        "name": "275307894a",
        "ccfLevel": 0,
        "title": "CF1436E Complicated Computations"
    },
    {
        "content": "\u9898\u610f\uff1a\n\nn\u4e2a\u6570\uff0c\u5bf9\u6240\u6709\u5b50\u533a\u95f4\u6c42mex\uff0c\n\n\u628a\u7b54\u6848\u7ec4\u6210\u65b0\u7684\u4e00\u5217\u6570\uff0c\u518d\u6c42mex\u3002\n\n\u5206\u6790\uff1a\n\n\u5148\u52a0\u5165\u6570\u503c $\u2208[1,i]$ \u7684\u6570\uff0c\n\n\u7136\u540e\u67e5\u8be2\u662f\u5426\u5b58\u5728\u7b26\u5408\u6761\u4ef6\u7684\u533a\u95f4\u6709i-1\u4e2a\u79cd\u6570\u3002\n\n\n\u6761\u4ef6\uff1a\u201c\u4e24\u4e2a\u4e3ai\u7684\u6570\u4e4b\u95f4\u201d\u6216\u201c\u5230a[i]\u7684\u524d\u7f00\u201d\n\u6216\u201c\u4ecea[i]\u5230\u7ed3\u5c3e\u201d\n\n\uff08\u6709i-1\u79cd\uff0c\u8bf4\u660e\u6709\u8fde\u7eed[1,i-1]\uff0cmex\u53ef\u80fd\u662fi\uff0c\u4e0d\u53ef\u80fd\u662f\u7b54\u6848\uff09\u3002\n\n---\n\n\u7528\u7ebf\u6bb5\u6811\u89e3\u51b3\u3002\n\nt[x]\u4fdd\u5b58\u7684\u662fx\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u5730\u65b9\uff0c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u6700\u5c0f\u503c\u3002\n\n\u626b\u5230a[i]\u7684\u65f6\u5019\uff0c\u8bbem\u4e3a[1,a[i]-1]\u4e2d\uff0c\u51fa\u73b0\u6700\u65e9\u7684\u6570\u6240\u5728\u7684\u4f4d\u7f6e\u3002\n\n\n\u5982\u679cm>\u4e0a\u4e00\u4e2aa[i]\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\n\n\u5c31\u8bf4\u660e\u5b58\u5728\u4e24\u4e2a\u4e3aa[i]\u7684\u6570\u4e4b\u95f4\u6709a[i]-1\u4e2a\u6570\uff0cmex\u53ef\u4ee5\u4e3aa[i]\u3002\n\n\u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,x,y) for(int i=x;i<=y;i++)\n#define per(i,x,y) for(int i=x;i>=y;i--)\n#define rd(x) scanf(\"%d\",&x);\ntypedef long long LL;\nconst int N=1e5+10;\nint n,a[N],t[N<<2],las[N],f[N]; \nvoid pushup(int rt){ t[rt]=min(t[rt<<1],t[rt<<1|1]); }\nint query(int rt,int l,int r,int L,int R){\n//\tcout<<rt<<\" \"<<l<<\" \"<<r<<\" \"<<L<<\" \"<<R<<endl;\n\tif(l>R||r<L) return 1e9;\n\tif(L<=l&&r<=R){\n\t//\tcout<<rt<<\"*\"<<t[rt]<<endl;\n\t\treturn t[rt];\n\t}\n\tint mid=l+r>>1;\n\treturn min(query(rt<<1,l,mid,L,R),query(rt<<1|1,mid+1,r,L,R));\n}\nvoid update(int rt,int l,int r,int x,int val){\n//\tcout<<rt<<\"*\"<<l<<\" \"<<r<<\" \"<<x<<\" \"<<val<<endl;\n\tif(x<l||x>r) return;\n\tif(l==r) { t[rt]=val; return; }\n\tint mid=l+r>>1;\n\tupdate(rt<<1,l,mid,x,val);\n\tupdate(rt<<1|1,mid+1,r,x,val);\n\tpushup(rt);\n\treturn;\n}\nint main(){\n\trd(n);\n\trep(i,1,n){\n\t\trd(a[i]);\n\t\tint x=0; if(a[i]!=1) x=query(1,1,n,1,a[i]-1);\n\t//\tcout<<a[i]<<\" \"<<x<<endl;\n        //[1,a[i]-1]\u4e2d\u6700\u65e9\u51fa\u73b0\u7684\u6570(\u6bcf\u6b21\u7ef4\u62a4\u7684\u90fd\u662f\u6bcf\u4e2a\u6570\u6700\u665a\u51fa\u73b0\u7684\u5730\u70b9)\u665a\u4e8e\u4e8elst[a[i]]\n\t\t//\u4e24\u4e2aa[i]\u4e4b\u95f4\u6709\u96c6\u9f50i-1\u4e2a\n\t\t// \u5b58\u5728mex\u4e3aa[i]\u7684\u5b50\u533a\u95f4\n\t\tif(x>las[a[i]]) f[a[i]]=1;\n\t\tupdate(1,1,n,a[i],i);las[a[i]]=i;\n\t}\n\trep(i,2,n+1){\n\t\tint x=query(1,1,n,1,i-1);\n\t\tif(x>las[i]) f[i]=1;\n\t}//\u7ed3\u5c3e\u518d\u7edf\u8ba1\u4e00\u6b21 \n\trep(i,1,n) if(a[i]!=1) f[1]=1;\n\tint i=1;\n\twhile(1){\n\t\tif(f[i]==0){\n\t\t\tprintf(\"%d\\n\",i);\n\t\t\treturn 0;\n\t\t}\n\t\ti++;\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1603608874,
        "uid": 106738,
        "name": "_Felix",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "# \u9898\u89e3 CF1436E Complicated Computations\n\n[\u9898\u76ee\u94fe\u63a5](https://codeforces.com/contest/1436/problem/E)\n\n\u4ece\u5c0f\u5230\u5927\u4f9d\u6b21\u679a\u4e3e\u6bcf\u4e2a\u6b63\u6574\u6570\uff0c\u770b\u80fd\u5426\u4f5c\u4e3a\u7b54\u6848\u3002\u4e00\u4e2a\u6570 $x$ \u80fd\u4f5c\u4e3a\u7b54\u6848\u7684\u6761\u4ef6\u662f\uff1a\n\n1. \u6bd4\u5b83\u5c0f\u7684\u503c\u90fd\u4e0d\u662f\u7b54\u6848\u3002\n2. \u4e0d\u5b58\u5728\u4e00\u4e2a\u533a\u95f4 $[l,r]$\uff0c\u4f7f\u5f97 $\\text{mex}(a_l,a_{l+1},\\dots,a_r) = x$\u3002\n\n\u56e0\u4e3a\u662f\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u6211\u4eec\u4e00\u627e\u5230\u7b54\u6848\u5c31\u9000\u51fa\uff0c\u90a3\u6761\u4ef6 1 \u5c31\u5df2\u7ecf\u89e3\u51b3\u4e86\u3002\n\n\u8003\u8651\u6761\u4ef6 2\u3002\u5982\u4f55\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u533a\u95f4\uff0c\u4f7f\u5f97 $\\text{mex}(a_l,a_{l+1},\\dots,a_r) = x$ \u5462\uff1f\n\n- \u9996\u5148\uff0c$x$ \u4e0d\u80fd\u5728\u8fd9\u4e2a\u533a\u95f4\u91cc\u51fa\u73b0\u8fc7\u3002\u8bb0 $x$ \u5728\u6574\u4e2a\u5e8f\u5217\u91cc\u51fa\u73b0\u7684\u4f4d\u7f6e\u5206\u522b\u4e3a $p_1,p_2,\\dots,p_k$\uff0c\u8fd9\u4e9b\u70b9\u628a\u6574\u4e2a\u5e8f\u5217\u5212\u5206\u4e3a\u4e86\u4e0d\u8d85\u8fc7 $k+1$ \u4e2a\u7ebf\u6bb5\u3002\u90a3 $[l,r]$ \u4e00\u5b9a\u88ab\u5b8c\u5168\u5305\u542b\u5728\u67d0\u4e2a\u7ebf\u6bb5\u4e2d\u3002\n- \u5176\u6b21\uff0c\u6240\u6709\u5c0f\u4e8e $x$ \u7684\u6b63\u6574\u6570\u90fd\u5fc5\u987b\u5728\u533a\u95f4 $[l,r]$ \u91cc\u51fa\u73b0\u8fc7\u3002\u90a3\u4e48\u6211\u4eec\u80af\u5b9a\u5e0c\u671b\u5728\u6ee1\u8db3\u4e0a\u4e00\u6761\u7684\u540c\u65f6\uff0c\u8ba9\u533a\u95f4 $[l,r]$ \u5c3d\u91cf\u957f\uff08\u8fd9\u6837\u66f4\u6709\u53ef\u80fd\u5305\u542b\u5230\u6240\u6709\u503c\uff09\u3002\u6240\u4ee5\u5982\u679c\u5b58\u5728\u5408\u6cd5\u7684 $[l,r]$\uff0c\u90a3\u4e5f\u4e00\u5b9a\u5b58\u5728\u67d0\u4e2a\u5b8c\u6574\u7684\u7ebf\u6bb5\u662f\u5408\u6cd5\u7684\u3002\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u8fd9 $k+1$ \u4e2a\u7ebf\u6bb5\u8fdb\u884c\u5224\u65ad\u5373\u53ef\u3002\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\uff0c\u5bf9\u8fd9 $k+1$ \u4e2a\u7ebf\u6bb5\uff0c\u5206\u522b\u5224\u65ad\u201c\u6240\u6709\u5c0f\u4e8e $x$ \u7684\u6b63\u6574\u6570\u662f\u5426\u90fd\u5728\u91cc\u9762\u51fa\u73b0\u8fc7\u201d\u3002\u4e5f\u5c31\u662f\u5bf9\u5b83\u4eec\u6c42 $\\text{mex}$\u3002\n\n\u6ce8\u610f\u5230\uff0c\u5bf9\u4e8e\u6240\u6709 $x$\uff0c\u7ebf\u6bb5\u7684\u603b\u6570\uff08\u4e5f\u5c31\u662f $\\sum(k+1)$\uff09\u53ea\u6709 $O(n)$ \u4e2a\u3002\n\n---\n\n\u6c42\u533a\u95f4 $\\text{mex}$ \u6709\u4e00\u4e2a\u7ecf\u5178\u7684\u83ab\u961f\u505a\u6cd5\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u5148\u5c06\u8fd9 $O(n)$ \u4e2a\u8981\u67e5\u8be2\u7684\u533a\u95f4\u79bb\u7ebf\u4e0b\u6765\u3002\u7136\u540e\u505a\u83ab\u961f\u3002\u9700\u8981\u652f\u6301\u6bcf\u6b21\u63d2\u5165 / \u5220\u9664\u4e00\u4e2a\u6570\uff0c\u6c42\u5f53\u524d\u96c6\u5408\u7684 $\\text{mex}$\u3002\n\n\u7b2c\u4e00\u53cd\u5e94\u662f\u5728\u503c\u57df\u4e0a\u5efa\u4e00\u68f5\u7ebf\u6bb5\u6811\u3002\u4f46\u662f\u8fd9\u6837\u63d2\u5165 / \u5220\u9664\u64cd\u4f5c\u5c31\u662f $O(\\log n)$ \u7684\u4e86\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt{n}\\log n)$\u3002\u4e8b\u5b9e\u4e0a\uff0c\u53d1\u73b0\u6211\u4eec\u9700\u8981\u7684\u4fee\u6539\u6b21\u6570\u5f88\u591a\uff08$O(n\\sqrt{n})$ \u6b21\uff09\uff0c\u4f46\u67e5\u8be2\u6b21\u6570\u8f83\u5c11\uff08$O(n)$ \u6b21\uff09\u3002\u800c\u7ebf\u6bb5\u6811\u6070\u6070\u662f\u4fee\u6539\u8f83\u6162\uff08$O(\\log n)$\uff09\uff0c\u67e5\u8be2\u8f83\u5feb\uff08\u56e0\u4e3a\u662f\u5168\u5c40\u67e5\u8be2\uff0c\u76f4\u63a5\u56de\u7b54\u6839\u8282\u70b9\u4fe1\u606f\uff0c\u662f $O(1)$ \u7684\uff09\u3002\u6240\u4ee5\u6211\u4eec\u5728\u8fd9\u91cc\u7528\u4e00\u4e2a\u201c\u6839\u53f7\u5e73\u8861\u201d\uff0c\u5373\u7528\u5206\u5757\uff0c\u727a\u7272\u67e5\u8be2\u7684\u590d\u6742\u5ea6\uff0c\u5b9e\u73b0\u8f83\u5feb\u7684\u4fee\u6539\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u5bf9\u503c\u57df\u5206\u5757\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u5757\u5185\u6709\u51e0\u4e2a\u51fa\u73b0\u6b21\u6570\u975e\u96f6\u7684\u503c\u3002\u4fee\u6539\u662f\u5355\u70b9\u4fee\u6539\uff0c\u53ef\u4ee5 $O(1)$ \u5b8c\u6210\u3002\u67e5\u8be2\u65f6\uff0c\u4ece\u5c0f\u5230\u5927\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u5757\uff0c\u9047\u5230\u7b2c\u4e00\u4e2a\u6ca1\u6709\u6ee1\u7684\u5757\uff0c\u5c31\u5728\u8fd9\u4e2a\u5757\u91cc\u66b4\u529b\u627e\u5230\u7b54\u6848\u3002\u8fd9\u6837\u67e5\u8be2\u662f $O(\\sqrt{n})$ \u7684\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt{n})$\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n// problem: CF1436E\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define pb push_back\n#define mk make_pair\n#define lob lower_bound\n#define upb upper_bound\n#define fi first\n#define se second\n#define SZ(x) ((int)(x).size())\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\n\ntemplate<typename T> inline void ckmax(T& x, T y) { x = (y > x ? y : x); }\ntemplate<typename T> inline void ckmin(T& x, T y) { x = (y < x ? y : x); }\n\nconst int MAXN = 1e5;\nconst int MAXM = MAXN * 2; // \u8003\u8651\u5999\u5999\u7684\u5e38\u6570\nconst int BLOCK_SIZE = 300, BLOCK_NUM = MAXN / BLOCK_SIZE + 10;\n\nint n, a[MAXN + 5];\nint st[BLOCK_NUM + 5], ed[BLOCK_NUM + 5], bel[MAXN + 5], cnt_block;\nvector<int> vec[MAXN + 5];\nvector<int> qid[MAXN + 5];\nint ans[MAXM + 5], cntq;\nstruct Query_t {\n\tint l, r, id;\n\tQuery_t(int _l, int _r, int _id) { l = _l; r = _r; id = _id; }\n\tQuery_t() {}\n}q[MAXM + 5];\nbool cmp(Query_t lhs, Query_t rhs) {\n\treturn (bel[lhs.l] == bel[rhs.l]) ? (lhs.r < rhs.r) : (lhs.l < rhs.l);\n}\n\nint buc[MAXN + 5], nemp[BLOCK_NUM + 5]; // nemp: not empty \u5757\u91cc\u975e\u7a7a\u7684\u6876\u6709\u51e0\u4e2a\nvoid modify(int p, int v) {\n\tif (buc[p]) nemp[bel[p]]--;\n\tbuc[p] += v;\n\tif (buc[p]) nemp[bel[p]]++;\n}\nint get_mex() {\n\tfor (int i = 1; i <= cnt_block; ++i) {\n\t\tif (nemp[i] == ed[i] - st[i] + 1)\n\t\t\tcontinue; // \u5168\u6ee1\u4e86\n\t\tfor (int j = st[i]; j <= ed[i]; ++j) {\n\t\t\tif (!buc[j])\n\t\t\t\treturn j;\n\t\t}\n\t\tassert(0);\n\t}\n\treturn n + 1;\n}\n\nint curl, curr;\nvoid movel(int t) {\n\tif (t == 1) {\n\t\t// l \u53f3\u79fb, \u5220\u6570\n\t\tmodify(a[curl], -1);\n\t\t++curl;\n\t} else {\n\t\t// l \u5de6\u79fb, \u52a0\u6570\n\t\t--curl;\n\t\tmodify(a[curl], 1);\n\t}\n}\nvoid mover(int t) {\n\tif (t == 1) {\n\t\t// r \u53f3\u79fb, \u52a0\u6570\n\t\t++curr;\n\t\tmodify(a[curr], 1);\n\t} else {\n\t\t// r \u5de6\u79fb, \u5220\u6570\n\t\tmodify(a[curr], -1);\n\t\tcurr--;\n\t}\n}\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tcin >> a[i];\n\t\tvec[a[i]].pb(i);\n\t}\n\tfor (int i = 1; i <= n; i += BLOCK_SIZE) {\n\t\tint j = min(n, i + BLOCK_SIZE - 1);\n\t\t++cnt_block;\n\t\tst[cnt_block] = i;\n\t\ted[cnt_block] = j;\n\t\tfor (int k = i; k <= j; ++k) {\n\t\t\tbel[k] = cnt_block;\n\t\t}\n\t}\n\tfor (int i = 1; i <= n + 1; ++i) {\n\t\tif (!SZ(vec[i])) {\n\t\t\t++cntq;\n\t\t\tq[cntq] = Query_t(1, n, cntq);\n\t\t\tqid[i].pb(cntq);\n\t\t} else {\n\t\t\tif (vec[i][0] != 1) {\n\t\t\t\t++cntq;\n\t\t\t\tq[cntq] = Query_t(1, vec[i][0] - 1, cntq);\n\t\t\t\tqid[i].pb(cntq);\n\t\t\t}\n\t\t\tfor (int j = 1; j < SZ(vec[i]); ++j) {\n\t\t\t\tif (vec[i][j] != vec[i][j - 1] + 1) {\n\t\t\t\t\t++cntq;\n\t\t\t\t\tq[cntq] = Query_t(vec[i][j - 1] + 1, vec[i][j] - 1, cntq);\n\t\t\t\t\tqid[i].pb(cntq);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (vec[i].back() != n) {\n\t\t\t\t++cntq;\n\t\t\t\tq[cntq] = Query_t(vec[i].back() + 1, n, cntq);\n\t\t\t\tqid[i].pb(cntq);\n\t\t\t}\n\t\t}\n\t}\n\tsort(q + 1, q + cntq + 1, cmp);\n\tcurl = 1, curr = 0;\n\tfor (int i = 1; i <= cntq; ++i) {\n\t\twhile (curl > q[i].l) movel(-1);\n\t\twhile (curr < q[i].r) mover(1);\n\t\twhile (curl < q[i].l) movel(1);\n\t\twhile (curr > q[i].r) mover(-1);\n\t\tans[q[i].id] = get_mex();\n\t}\n\tfor (int i = 1; i <= n + 2; ++i) {\n\t\tbool fail = 0;\n\t\tfor (int j = 0; j < SZ(qid[i]); ++j) {\n\t\t\tif (ans[qid[i][j]] == i) {\n\t\t\t\tfail = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!fail) {\n\t\t\tcout << i << endl;\n\t\t\treturn 0;\n\t\t}\n\t}\n\tassert(0);\n}\n```\n\n",
        "postTime": 1603900192,
        "uid": 100674,
        "name": "duyi",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "\u6ca1\u770b\u5230\u6709\u4eba\u5199\u6811\u5957\u6811\u505a\u6cd5\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e2a\u505a\u6cd5\u8fd8\u662f\u6bd4\u8f83\u81ea\u7136\u7684\u3002\n\n\u8003\u8651\u5230\u4e00\u4e2a\u5e8f\u5217\u7684 $\\text{mex}$ \u4e3a $i$\uff0c\u5f53\u4e14\u4ec5\u5f53\u51fa\u73b0\u4e86 $1\\to i-1$ \u5e76\u4e14\u6ca1\u6709 $i$\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u7b54\u6848 $i$\uff0c\u90a3\u4e48\u5fc5\u987b\u4e0d\u5305\u542b $\\text{mex}$ \u4e3a $i$ \u7684\u5b50\u6bb5\u3002\n\n\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u627e\u51fa\u6bcf\u4e2a $i$ \u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e9b\u4f4d\u7f6e\u628a\u6574\u4e2a\u6570\u5217\u5206\u6210\u4e86\u82e5\u5e72\u6bb5\u3002\u8bb0 $p_i$ \u8868\u793a $a_i$ \u4e0a\u6b21\u51fa\u73b0\u4f4d\u7f6e\uff08\u5982\u679c\u6ca1\u6709\u5219\u4e3a $0$\uff09\u3002\u5bf9\u4e8e\u4e00\u6bb5 $[l,r]$\uff08\u4e0d\u5305\u542b $a_j$ \u4e3a $i$ \u7684\u7aef\u70b9 $j$\uff09\uff0c\u5982\u679c\u5176 $\\text{mex}$ \u4e3a $i$\uff0c\u8bf4\u660e\uff1a$\\sum\\limits_{l\\le j\\le r}[p_j<l\\ \\text{and}\\ a_j\\le i-1]$ \u7684\u503c\u4e3a $i-1$\u3002\n\n\u4e4d\u4e00\u770b\u597d\u50cf\u662f\u4e09\u7ef4\u6570\u70b9\u3002\u4f46\u662f\u65e2\u7136\u6211\u4eec\u662f\u4ece\u5c0f\u5230\u5927\u679a\u4e3e $i$\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u4ece\u5c0f\u5230\u5927\u628a $a_j=i$ \u7684\u503c\u52a0\u5165\u6570\u7ec4\uff0c\u4e8e\u662f\u6211\u4eec\u53bb\u6389\u4e86\u7b2c\u4e8c\u4e2a\u9650\u5236\uff0c\u4e8e\u662f\u53d8\u6210\u4e00\u4e2a\u4e8c\u7ef4\u6570\u70b9\uff0c\u65e2\u7136\u662f\u52a8\u6001\u52a0\u70b9\uff0c\u6811\u5957\u6811\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u597d\u50cf\u5206\u5757\u5957\u6811\u72b6\u6570\u7ec4\u5f88\u5feb\uff0c\u4f46\u662f\u8fd9\u9898\u5e76\u4e0d\u5361\u5e38\uff0c\u6240\u4ee5\u5199\u4e86\u6811\u72b6\u6570\u7ec4\u5957\u7ebf\u6bb5\u6811\u3002\u590d\u6742\u5ea6 $O(n\\log^2 n)$\uff0c\u9700\u8981\u7279\u5224\u5168\u662f $1$ \u7684\u60c5\u51b5\u3002\n\n```cpp\nconst int maxn = 1e5 + 100;\nstruct seg { int lc, rc, vl; } tr[maxn * 100];\nint n, tot, a[maxn], lst[maxn], pos[maxn], rt[maxn];\n\n#define ls tr[x].lc\n#define rs tr[x].rc\n#define mid ((l + r) >> 1)\nvoid update(int l, int r, int p, int &x) {\n\tif (!x) x = ++tot;\n\ttr[x].vl++;\n\tif (l == r) return;\n\tif (p <= mid) update(l, mid, p, ls);\n\telse update(mid + 1, r, p, rs);\n} \n\nint query(int l, int r, int s, int t, int x) {\n\tif (!x) return 0;\n\tif (s <= l && r <= t) return tr[x].vl;\n\tint res = 0;\n\tif (s <= mid) res += query(l, mid, s, t, ls);\n\tif (t > mid) res += query(mid + 1, r, s, t, rs);\n\treturn res;\n}\n\nint lb(int x) { return x & (-x); }\nvoid upd(int x, int y) { x++; for (int i = x; i <= n + 1; i += lb(i)) update(1, n, y, rt[i]); }\nint qry(int x, int l, int r) { if (r < l) return 0; x++; int res = 0; for (int i = x; i; i -= lb(i)) res += query(1, n, l, r, rt[i]); return res; } \n\nint main() {\n\tn = read();\n\tint flg = 0;\n\tfor (int i = 1; i <= n; i++) {\n\t\ta[i] = read();\n\t\tif (a[i] != 1) flg = 1;\n\t}\n\tif (!flg) return puts(\"1\"), 0;\n\tfor (int i = 1; i <= n; i++) \n\t\tlst[i] = pos[a[i]], pos[a[i]] = i;\n\tfor (int i = 1; i <= n + 1; i++) {\n\t\tif (!pos[i]) {\n\t\t\tif (qry(0, 1, n) == i - 1) continue;\n\t\t\treturn write(i), 0;\n\t\t}\n\t\tint fl = 0;\n\t\tif (pos[i] < n) \n\t\t\tif (qry(pos[i], pos[i] + 1, n) == i - 1) fl = 1;\n\t\tfor (int j = pos[i]; j; j = lst[j]) {\n\t\t\tif (qry(lst[j], lst[j] + 1, j - 1) == i - 1) fl = 1;\n\t\t\tupd(lst[j], j);\n\t\t}\n\t\tif (!fl) return write(i), 0;\n\t}\n\twrite(n + 2);\n\treturn 0;\n}\n\n```",
        "postTime": 1678188471,
        "uid": 306573,
        "name": "Ender32k",
        "ccfLevel": 0,
        "title": "CF1436E Complicated Computations"
    },
    {
        "content": "> [**CF1436E Complicated Computations**](https://www.luogu.com.cn/problem/CF1436E)\n\n> \u89e3\u9898\u62a5\u544a\u3002\n\n> [**\u4e0d\u4e00\u5b9a\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c**](https://www.cnblogs.com/UperFicial/p/16733491.html)\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6570 $x$\uff0c\u8003\u8651\u4ec0\u4e48\u6761\u4ef6 $x$ \u53ef\u4ee5\u4f5c\u4e3a\u7b54\u6848\u3002\n\n\u9996\u5148\u8981\u6ee1\u8db3 $\\forall y\\in [1,x)$\uff0c$y$ \u90fd\u4e0d\u80fd\u4f5c\u4e3a\u7b54\u6848\uff0c\u56e0\u4e3a\u6700\u7ec8\u6211\u4eec\u662f\u53d6\u7684 mex\u3002\n\n\u5176\u6b21\uff0c\u539f\u5e8f\u5217\u4efb\u4f55\u4e00\u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\u7684 mex \u90fd\u4e0d\u53ef\u80fd\u4e3a $x$\u3002\n\n\u7b2c\u4e00\u4e2a\u6761\u4ef6\u6211\u4eec\u53ea\u9700\u8981\u987a\u7740\u679a\u4e3e $x$ \u5373\u53ef\uff0c\u8003\u8651\u5982\u4f55\u89e3\u51b3\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u9650\u5236\u3002\n\n\u6211\u4eec\u628a $x$ \u5728\u539f\u5e8f\u5217\u51fa\u73b0\u7684\u4f4d\u7f6e\u90fd\u63d0\u51fa\u6765\uff0c\u8fd9\u6837\u4f1a\u628a\u539f\u5e8f\u5217\u5206\u5272\u6210\u82e5\u5e72\u4e0d\u5305\u542b $x$ \u7684\u6781\u957f\u5b50\u533a\u95f4\u3002\n\n\u4efb\u4f55\u4e00\u4e2a\u5305\u542b $x$ \u7684\u5b50\u533a\u95f4\u7684 mex \u90fd\u4e0d\u53ef\u80fd\u4e3a $x$\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u68c0\u67e5\u5206\u5272\u51fa\u6765\u7684\u6240\u6709\u5b50\u533a\u95f4\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u533a\u95f4\u7684 mex \u662f $x$\uff0c\u53ea\u8981\u6709\u5c31\u4e0d\u5408\u6cd5\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $x$ \u8fd9\u4e9b\u5b50\u533a\u95f4\u663e\u7136\u662f\u53ef\u4ee5\u66b4\u529b\u5904\u7406\u7684\u51fa\u6765\u7684\uff0c\u56e0\u4e3a\u533a\u95f4\u603b\u6570\u662f\u4e0d\u8d85\u8fc7 $O(n)$ \u4e2a\u7684\u3002\n\n\u4e8e\u662f\u73b0\u5728\u5c31\u53d8\u6210\u533a\u95f4\u6c42 mex \u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u8003\u8651\u53ef\u6301\u4e45\u5316\u6743\u503c\u7ebf\u6bb5\u6811\uff0c\n\n\u5177\u4f53\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u8be2\u95ee\u533a\u95f4 $[l,r]$\uff0c\u6211\u4eec\u63d0\u51fa\u4ee5 $[1,r]$ \u8fd9\u4e2a\u5e8f\u5217\u5efa\u51fa\u7684\u7684\u6743\u503c\u7ebf\u6bb5\u6811\uff0c\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u6570\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u82e5\u4e00\u4e2a\u6570\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\u5c0f\u4e8e $l$\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6570\u53ef\u80fd\u4f5c\u4e3a mex\uff0c\u800c\u771f\u6b63\u7684 mex \u662f\u8fd9\u4e9b\u6570\u7684 $\\min$\u3002\n\n\u8fd9\u5c31\u5178\u4e86\u554a\uff0c\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u4e71\u6740\u5373\u53ef\u3002\u4f18\u5148\u8d70\u5de6\u5b50\u6811\uff0c\u7136\u540e\u8d70\u53f3\u5b50\u6811\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n\\log n)$\uff0c\u6bd4\u83ab\u961f\u5957\u503c\u57df\u5206\u5757\u5feb\u591a\u4e86\u3002\n\n\u4ee3\u7801\uff08\u81ea\u8ba4\u4e3a\u5199\u5f97\u6bd4\u8f83\u597d\u770b\uff09\uff1a\n\n```cpp\nconst int MAXN(1e5+10);\n\nint n,m,a[MAXN];\nbool flag[MAXN];\n\nvector<int>G[MAXN];\nstruct node{int l,r,v;};\nnode q[MAXN<<1];\n\n\ninline void newquery(int l,int r,int v){if(l>r)return;q[++m].l=l;q[m].r=r,q[m].v=v;return;}\ninline bool cmp(node x,node y){return x.r<y.r;}\n\nint rt[MAXN];\n\nstruct Segment_Tree\n{\n\tstruct T{int ls,rs,val;};\n\tT tree[MAXN*30];\n\tint tot;\n\n\tinline int lc(int u){return tree[u].ls;}\n\tinline int rc(int u){return tree[u].rs;}\n\n\tinline void push_up(int u)\n\t{\n\t\ttree[u].val=Min(tree[tree[u].ls].val,tree[tree[u].rs].val);\n\t\treturn;\n\t}\n\n\tinline void update(int&u,int pre,int l,int r,int p,int k)\n\t{\n\t\tu=++tot;\n\t\ttree[u]=tree[pre];\n\t\tif(l==r)\n\t\t{\n\t\t\ttree[u].val=k;\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif(p<=mid) update(tree[u].ls,tree[pre].ls,l,mid,p,k);\n\t\telse update(tree[u].rs,tree[pre].rs,mid+1,r,p,k);\n\t\tpush_up(u);\n\t\treturn;\n\t}\n\n\tinline int query(int u,int l,int r,int L)\n\t{\n\t\tif(l==r) return l;\n\t\tint mid=(l+r)>>1;\n\t\tif(tree[lc(u)].val<L) return query(lc(u),l,mid,L);\n\t\telse return query(rc(u),mid+1,r,L);\n\t}\n};\nSegment_Tree seg;\n\nint main()\n{\n\tn=read();\n\trep(i,1,n) a[i]=read(),G[a[i]].push_back(i);\n\trep(i,1,n)\n\t{\n\t\trep(j,0,(int)G[i].size()-1)\n\t\t{\n\t\t\tif(j==0) newquery(1,G[i][j]-1,i);\n\t\t\telse newquery(G[i][j-1]+1,G[i][j]-1,i);\n\t\t}\n\t\tif(G[i].size()) newquery(G[i][G[i].size()-1]+1,n,i);\n\t}\n\trep(i,1,n)\n\t\tseg.update(rt[i],rt[i-1],1,n+1,a[i],i);\n\trt[n+1]=rt[n];\n\trep(i,1,m)\n\t{\n\t\tint l=q[i].l,r=q[i].r,v=q[i].v;\n\t\tif(seg.query(rt[r],1,n+1,l)==v) flag[v]=true; \n\t}\n\trep(i,1,n+2) if(seg.query(rt[n+1],1,n+1,1)==i) flag[i]=true;\n\trep(i,1,n+2) if(!flag[i])\n\t{\n\t\tprintf(\"%d\\n\",i);\n\t\treturn 0;\n\t}\n    return 0;\n}\n/*\nDate : 2022/9/27\nAuthor : UperFicial\nStart coding at : 7:05\nfinish debugging at : 9:34\n*/\n```",
        "postTime": 1664243388,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010CF1436E Complicated Computations\u3011"
    },
    {
        "content": "### [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1436E)\n\n## \u9898\u610f\n\n- \u6c42\u4e00\u4e2a\u6570\u5217\u7684\u6240\u6709\u8fde\u7eed\u5b50\u6570\u5217\u7684 $\\text{mex}$ \u503c\u7684 $\\text{mex}$\n\n\u7ffb\u8bd1\u597d\u8bc4\u3002\n\n## Sol\n\n### \u503c\u57df\u548c $n$ \u8303\u56f4\u4e00\u6837\u8bf6qaq\u3002\n\n\u6211\u4eec\u8003\u8651\u5982\u4f55\u533a\u95f4 $\\text{mex}$ \u4f1a\u662f $i$\u3002\n\n\u9996\u5148\u533a\u95f4\u4e2d\u4e0d\u5305\u62ec $i$\u3002\n\n\u5176\u6b21\u533a\u95f4\u4e2d $[1,i-1]$ \u90fd**\u5b58\u5728**\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u53d1\u73b0\uff0c\u4ee5\u4e24\u4e2a\u76f8\u90bb $i$ \u5305\u62ec\u7684\u533a\u95f4\uff08\u4e0d\u5305\u62ec $i$\uff09\uff0c\u4e00\u5b9a\u6bd4\u5176\u5b50\u533a\u95f4\u4f18\u79c0\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u533a\u95f4\u6c42\u4e00\u4e0b $\\text{mex}$\uff0c\u5224\u65ad\u4e00\u4e0b\u662f\u5426\u4e3a $i$ \u5373\u53ef\u3002\n\n\u90a3\u8fd9\u6837\u6211\u4eec\u8003\u8651\u6709\u591a\u5c11\u4e2a\u8fd9\u6837\u7684\u533a\u95f4\u3002\n\n\u7531\u4e8e\u52a0\u4e0a\u4e0e\u5934\u5c3e\u6210\u6bb5\uff0c\u90a3\u4e48\u6700\u591a\u4f1a\u5b58\u5728 $2n-1$ \u4e2a\u8fd9\u6837\u7684\u533a\u95f4\u3002\n\n\u6837\u4f8b\u4e8c\u8fd9\u4e2a\u6837\u4f8b\u597d\u8bf6\uff0c\u5b83\u63d0\u9192\u4f60**\u5168\u5c40**\u7684 $\\text{mex}$ \u4e0d\u8981\u843d\u4e0b\u3002\n\n\u79bb\u7ebf\u533a\u95f4 $\\text{mex}$ \u8fd9\u95ee\u9898\u662f\u8001\u9898\u4e86\uff0c\u83ab\u961f+\u503c\u57df\u5206\u5757\u5c31\u884c\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt n)$\u3002\n\n### $\\text{Code}$\n\n```cpp\n// wish to get better qwq\n\n#include<bits/stdc++.h>\n#define re register int\n#define pb push_back\n#define lb lower_bound\n#define ub upper_bound\n#define mp make_pair\n\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef long double ld;\n\ntemplate<class T> inline void rd(T &x){\n\tint fl=1;x=0;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') fl=-fl;\n\tfor(;isdigit(c);c=getchar()) x=(x<<3)+(x<<1)+c-'0';\n\tx*=fl;\n}\ntemplate<class T> inline void wr(T x){\n\tif(x<0) x=-x,putchar('-');\n\tif(x<10){putchar(x+'0');return ;}\n\tint tmp[30]={0},cnt=0;\n\twhile(x) tmp[cnt++]=x%10,x/=10;\n\tfor(re i=cnt-1;i>=0;--i) putchar(tmp[i]+'0');\n}\n\n// ---------- IO ---------- //\n\nconst int N=1e5+5;\nint n,a[N],len=350,lst[N],cnt,ans[N];\n\ninline int block(int x){return (x-1)/len+1;}\ninline int L(int x){return (x-1)*len+1;}\ninline int R(int x){return x*len;}\n\nstruct question{int id,l,r,pos;}q[N<<2];\n\ninline bool cmp(question x,question y){\n\tif(x.pos!=y.pos) return x.pos<y.pos;\n\tif(x.pos&1) return x.r<y.r;\n\treturn x.r>y.r;\n}\n\nstruct block_on_range{\n\tint a[N],b[N],c[N],d[N];\n\tinline void insert(int x){\n\t\tif(a[x]==0) c[x]=1,d[block(x)]++;\n\t\ta[x]++;b[block(x)]++;\n\t}\n\tinline void erase(int x){\n\t\ta[x]--;b[block(x)]--;\n\t\tif(a[x]==0) c[x]=0,d[block(x)]--;\n\t}\n\tinline int mex(){\n\t\tint tmp=block(n);\n\t\tfor(re i=1;i<tmp;++i){\n\t\t\tif(len==d[i]) continue;\n\t\t\tfor(re j=L(i);j<=R(i);++j) if(!c[j]) return j;\n\t\t}\n\t\tfor(re i=L(tmp);i<=n;++i) if(!c[i]) return i;\n\t\treturn n+1;\n\t}\n}qaq;\n\n// ----------  ---------- //\n\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\trd(n);\n\tfor(re i=1;i<=n;++i){\n\t\trd(a[i]);\n\t\tif(i-lst[a[i]]>1) q[++cnt]=(question){a[i],lst[a[i]]+1,i-1,block(lst[a[i]]+1)};\n\t\tlst[a[i]]=i;\n\t}\n\tfor(re i=1;i<N;++i)\n\t\tif(lst[i]&&lst[i]!=n) q[++cnt]=(question){i,lst[i]+1,n,block(lst[i]+1)};\n\tsort(q+1,q+cnt+1,cmp);\n\tint l=q[1].l+1,r=q[1].l;\n\tfor(re i=1;i<=cnt;++i){\n\t\twhile(l>q[i].l) --l,qaq.insert(a[l]);\n\t\twhile(r<q[i].r) ++r,qaq.insert(a[r]);\n\t\twhile(l<q[i].l) qaq.erase(a[l]),l++;\n\t\twhile(r>q[i].r) qaq.erase(a[r]),r--;\n\t\t//cout<<q[i].l<<' '<<q[i].r<<' '<<q[i].id<<' '<<qaq.mex()<<endl;\n\t\tif(qaq.mex()==q[i].id) ans[q[i].id]=1;\n\t}\n\twhile(l>1) --l,qaq.insert(a[l]);\n\twhile(r<n) ++r,qaq.insert(a[r]);\n\tans[qaq.mex()]=1;\n\tfor(re i=1;i<N;++i)\n\t\tif(!ans[i]){\n\t\t\twr(i);puts(\"\");break;\n\t\t}\n\treturn 0;\n}\n\n// ---------- Main ---------- //\n\n\n```\n\n\u8fd9\u573a\u53ea\u6709 F \u4e0d\u4f1a\uff0c\u53ef\u60dc\u6ca1\u65f6\u95f4\u6253/kk",
        "postTime": 1611552495,
        "uid": 83999,
        "name": "Demoe",
        "ccfLevel": 7,
        "title": "CF1436E Complicated Computations \u9898\u89e3 \u83ab\u961f+\u503c\u57df\u5206\u5757"
    },
    {
        "content": "\u6c42\u89e3 $\\mathrm{mex}$ \u7684 $\\mathrm{mex}$\uff0c\u80af\u5b9a\u5148\u60f3\u5230\u679a\u4e3e\u6700\u7ec8\u7684\u7b54\u6848\uff0c\u518d\u6765\u5224\u5b9a\u8fd9\u4e2a\u7b54\u6848\u662f\u5426\u5408\u6cd5\u3002\n\n\u6839\u636e $\\mathrm{mex}$ \u7684\u5b9a\u4e49\uff0c\u5982\u679c\u6700\u7ec8\u7b54\u6848\u4e3a\u503c $x$\uff0c\u5219\u5fc5\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n- $\\forall y<x,\\exists 1\\leq l\\leq r\\leq n,\\mathrm{mex}(a_l,a_{l+1},...,a_r)=y$\n- $\\forall 1\\leq l\\leq r\\leq n,\\mathrm{mex}(a_l,a_{l+1},...,a_r)\\neq x$\n\n\u7b2c\u4e00\u4e2a\u6761\u4ef6\u663e\u7136\u53ef\u4ee5\u901a\u8fc7\u4ece\u5c0f\u5230\u5927\u679a\u4e3e $x$ \u6765\u89e3\u51b3\uff0c\u90a3\u4e48\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u5462\uff1f\u6211\u4eec\u4e0d\u53ef\u80fd\u901a\u8fc7 $O(n^2)$ \u679a\u4e3e\u6765\u5224\u65ad\u6bcf\u4e00\u4e2a\u533a\u95f4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u8fc7\u9ad8\u3002\n\n\u8fd9\u91cc\u9700\u8981\u7528\u5230 $\\mathrm{mex}$ \u8fd0\u7b97\u7684\u4e00\u4e2a\u6027\u8d28\uff0c\u5bf9\u4e8e\uff08\u53ef\u91cd/\u4e0d\u53ef\u91cd\uff09\u96c6\u5408 $S$ \u7684 $\\mathrm{mex}$\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u662f $S$ \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u503c\u3002\u5f62\u5f0f\u5316\u7684\u8bf4\uff0c$\\mathrm{mex}_{i\\in S}(i)\\notin S$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u533a\u95f4\u4e2d\u5305\u542b\u503c $x$\uff0c\u5219\u8fd9\u6837\u7684\u533a\u95f4\u7684 $\\mathrm{mex}$ \u503c\u4e00\u5b9a\u4e0d\u4e3a $\\mathrm{mex}$\u3002\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u90a3\u4e9b\u4e0d\u5305\u542b\u503c $x$ \u7684\u533a\u95f4\uff0c\u5bf9\u4ed6\u4eec\u6c42 $\\mathrm{mex}$ \u5e76\u5224\u65ad\u5373\u53ef\u3002\u5bf9\u4e8e\u6240\u6709\u7684 $x$\uff0c\u8fd9\u6837\u7684\u533a\u95f4\u6570\u91cf\u4e4b\u548c\u662f $O(n)$ \u7ea7\u522b\u7684\u3002\n\n\u6211\u4eec\u4f7f\u7528\u4e3b\u5e2d\u6811\u6c42\u533a\u95f4 $\\mathrm{mex}$\u3002\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u5efa $n$ \u68f5\u7ebf\u6bb5\u6811\uff0c\u7b2c $i$ \u68f5\u7ebf\u6bb5\u6811\u4e0a\u5b58\u50a8\u6743\u503c $y$ \u5728 $a_1,a_2,a_3...a_i$ \u4e2d\u6700\u665a\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u533a\u95f4\u67e5\u8be2 $[L,R]$ \u7684\u65f6\u5019\u5728\u7b2c $R$ \u68f5\u7ebf\u6bb5\u6811\u4e0a\u67e5\u8be2\u5c0f\u4e8e $L$ \u7684\u6700\u5de6\u8282\u70b9\u5373\u53ef\u3002\u90fd\u662f\u5e38\u89c1\u5957\u8def\u5e94\u8be5\u5f88\u597d\u7406\u89e3\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n```cpp\n#include<cstdio>\n#include<vector>\nint num=0;\nstd::vector<int> p[100005];\nint rt[100005],sonL[2000005],sonR[2000005],val[2000005];\ninline int read() {\n    register int x=0,f=1;register char s=getchar();\n    while(s>'9'||s<'0') {if(s=='-') f=-1;s=getchar();}\n    while(s>='0'&&s<='9') {x=x*10+s-'0';s=getchar();}\n    return x*f;\n}\ninline int min(const int &x,const int &y) {return x<y? x:y;}\ninline void assign(int x,int y) {sonL[x]=sonL[y]; sonR[x]=sonR[y]; val[x]=val[y];}\ninline void change(int &p,int lst,int l,int r,int x,int pos) {\n    assign(p=++num,lst);\n    if(l==r) {val[p]=pos;return;}\n    int mid=l+r>>1;\n    if(x<=mid) change(sonL[p],sonL[lst],l,mid,x,pos);\n    else change(sonR[p],sonR[lst],mid+1,r,x,pos);\n    val[p]=min(val[sonL[p]],val[sonR[p]]);\n}\ninline int ask(int p,int l,int r,int L) {\n    if(l==r) return l;\n    int mid=l+r>>1;\n    if(val[sonL[p]]<L) return ask(sonL[p],l,mid,L);\n    return ask(sonR[p],mid+1,r,L);\n}\nint main() {\n    int n=read();\n    for(register int i=1;i<=n;++i) {\n        int x=read();\n        p[x].push_back(i);\n        change(rt[i],rt[i-1],1,n+1,x,i);\n    }\n    for(register int i=1;i<=n+1;++i) p[i].push_back(n+1);\n    for(register int i=1;i<=n+1;++i) {\n        int pre=1,flag=0;\n        for(register int j=0;j<p[i].size();++j) {\n            if(p[i][j]==1) {pre=2;continue;}\n            if(pre>p[i][j]-1) continue;\n            if(ask(rt[p[i][j]-1],1,n+1,pre)==i) {flag=1;break;}\n            pre=p[i][j]+1;\n        }\n        if(flag==0) {printf(\"%d\\n\",i);return 0;}\n    }\n    printf(\"%d\\n\",n+2);\n    return 0;\n}\n\n```",
        "postTime": 1604308614,
        "uid": 95244,
        "name": "tommymio",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "# CF1436E Complicated Computations\n\n## \u9898\u610f\u7b80\u5316\n\n> \u7ed9\u5b9a\u4e00\u4e2a $n$ \u4e2a\u5143\u7d20\u7684\u6570\u5217 $a$\uff0c\u6c42 $a$ \u6240\u6709\u975e\u7a7a\u5b50\u5e8f\u5217\u7684 $MEX$ \u6240\u6784\u6210\u7684\u6570\u5217\u7684 $MEX$\u3002\n\n## \u9898\u76ee\u5206\u6790\n\n\u9996\u5148\uff0c\u8003\u8651\u679a\u4e3e $MEX$ \u7684 $MEX$\u3002\u5047\u8bbe\u5f53\u524d\u679a\u4e3e\u5230\u4e86 $x$\u3002\n\n\u5728\u6b64\u4e4b\u540e\uff0c\u53d6\u51fa\u6240\u6709\u4e0d\u542b $x$ \u7684\u533a\u95f4\uff0c\u5982\u4e0b\u56fe\u3002\n\n![break.png](https://s1.ax1x.com/2020/10/26/BuM0dx.png)\n\n\u9ed1\u8272\u7ebf\u6bb5\u8868\u793a\u7684\u662f\u9700\u8981\u53d6\u51fa\u7684\u533a\u95f4\u3002\n\n\u73b0\u5728\uff0c\u95ee\u9898\u8f6c\u6362\u4e3a\u5feb\u901f\uff08$log$\uff09\u6c42\u533a\u95f4 $MEX$\u3002\n\n\u4ee5\u6743\u503c\u4e3a\u4e0b\u6807\uff0c\u6570\u7ec4\u4f4d\u7f6e\u4e3a\u65f6\u95f4\u8f74\uff08$rt$\uff09\u5efa\u4e00\u9897\u4e3b\u5e2d\u6811\u3002\n\n\u6bcf\u6b21\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\uff0c\u7ef4\u62a4\u5f53\u524d\u533a\u95f4\u4e2d\u6bcf\u4e2a\u6743\u503c\u6700\u540e\u4e00\u4e2a\u51fa\u73b0\u4f4d\u7f6e\u7684\u6700\u5c0f\u503c\u3002\n\n\u67e5\u8be2\u533a\u95f4 $[l,r]$ \u7684 $MEX$ \u65f6\uff0c\u5728\u4e3b\u5e2d\u6811\u4e0a `ask(rt[r],1,n+1,l)`\uff0c\u5176\u4e2d\uff0c\u5982\u679c\u5de6\u533a\u95f4\u7684\u6700\u5c0f\u503c\u5c0f\u4e8e $l$ \u5c31\u5411\u5de6\u8d70\uff0c\u4e0d\u7136\u5c31\u5411\u53f3\u8d70\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f $O(n\\times log\\space n)$\u3002",
        "postTime": 1603697441,
        "uid": 106182,
        "name": "KaisuoShutong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1436E \u3010Complicated Computations\u3011"
    },
    {
        "content": "\u76f4\u63a5\u6c42\u51fa\u6240\u6709\u8fde\u7eed\u5b50\u6570\u5217\u7684 $\\operatorname{mex}$ \u503c\u662f $O(n^2)$ \u7684\uff0c\u65e0\u6cd5\u901a\u8fc7\u6b64\u9898\uff0c\u8003\u8651\u6362\u4e00\u4e2a\u65b9\u5f0f\u8ba1\u7b97\u3002\u660e\u663e\u7684\uff0c\u4e00\u4e2a\u8fde\u7eed\u5b50\u6570\u5217 $[l,r]$ \u7684 $\\operatorname{mex}$ \u503c\u4e3a $x$ \u5f53\u4e14\u4ec5\u5f53 $[1,x-1]$ \u7684\u503c\u5747\u51fa\u73b0\u4e14 $x$ \u672a\u51fa\u73b0\uff0c\u4ece\u5c0f\u5230\u5927\u8003\u8651 $x$ \u662f\u5426\u662f\u4e00\u4e2a\u8fde\u7eed\u5b50\u6570\u5217\u7684 $\\operatorname{mex}$ \u503c\uff0c\u5c06\u6570\u5bf9 $(val, pos)$\uff08$pos$ \u4e3a\u4f4d\u7f6e\uff0c$val=a_{pos}$\uff09\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff08$val$ \u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c$pos$ \u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\uff09\uff0c\u7136\u540e\u4f9d\u6b21\u52a0\u5165\u6743\u503c\u7ebf\u6bb5\u6811\u4e2d\uff08\u68c0\u67e5\u540e\u518d\u63d2\u5165\uff09\uff0c\u6743\u503c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6bcf\u4e2a\u503c\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u82e5 $val$ \u53ef\u4ee5\u4e3a\u8fde\u7eed\u5b50\u6570\u5217\u7684 $\\operatorname{mex}$ \u503c\uff0c\u5f53\u4e14\u4ec5\u5f53 $[1,val-1]$ \u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\u5927\u4e8e\u4e0a\u4e00\u4e2a\u503c\u4e3a $val$ \u7684\u4f4d\u7f6e $pos'$\uff0c\u6700\u540e\u4e00\u4e2a\u503c\u4e3a $val$ \u7684\u4f4d\u7f6e\u7528\u4e00\u4e2a\u6570\u7ec4\u7ef4\u62a4\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9 $1$ \u7684\u7279\u5224\u3002\n\n[\u4ee3\u7801](https://codeforces.com/contest/1436/submission/205316977)\u3002\n",
        "postTime": 1683890565,
        "uid": 740607,
        "name": "__ODT__",
        "ccfLevel": 0,
        "title": "CF1436E"
    },
    {
        "content": "~~\u4e3a\u4ec0\u4e48\u8fd9\u9898\u4f1a\u88ab OI-Wiki \u8bc4\u4e3a\u5206\u5757\u5957\u6811\u72b6\u6570\u7ec4\u7684\u677f\u9898\u2026\u2026~~\n\n- \u9898\u610f\n\n\u5b9a\u4e49 $\\operatorname{MEX}(a)$ \u4e3a\u5e8f\u5217 $a$ \u4e2d\u7b2c\u4e00\u4e2a\u6ca1\u6709\u51fa\u73b0\u7684\u6b63\u6574\u6570\uff0c\u5f62\u5f0f\u5316\u7684\u5373\u6700\u4e0b\u7684 $x$ \u6ee1\u8db3 $x \\notin a,\\forall y \\in [1,x-1],y\\in a$\u3002\n\n\u6c42\u7ed9\u5b9a\u5e8f\u5217 $a$ \u7684\u5b50\u6bb5\u7684 $\\operatorname{MEX}$ \u7ec4\u6210\u7684\u5e8f\u5217\u7684 $\\operatorname{MEX}$\u3002\n\n- \u5206\u6790\n\n\u8fd9\u9898\u7684\u601d\u8def\u975e\u5e38\u7684\u5de7\u5999\uff0c\u4f60\u8003\u8651\u4e00\u4e0b\u4e00\u4e2a\u6570\u80fd\u5426\u6210\u4e3a\u7b54\u6848\uff0c\u6bd4\u5982\u8bf4\u8003\u8651 $x$ \u80fd\u5426\u6210\u4e3a\u7b54\u6848\u3002\n\n\u90a3\u5c31\u662f\u8bf4\u627e\u4e0d\u5230\u5b50\u6bb5\u7684 $\\operatorname{MEX}$ \u4e3a $x$\uff0c\u600e\u4e48\u5224\u65ad\u4e00\u4e2a\u5b50\u6bb5\u7684 $\\operatorname{MEX}$ \u5462\uff1f\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ecf\u5178\u5957\u8def\uff0c\u7528\u4e3b\u5e2d\u6811\u7ef4\u62a4\uff0c\u8868\u793a\u503c\u4e3a $x$ \u7684\u6570\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u7b54\u6848\u5c31\u662f\u7b2c\u4e00\u4e2a\u51fa\u73b0\u4f4d\u7f6e\u5728\u5de6\u7aef\u70b9\u4e4b\u524d\u7684\u6570\uff0c\u5177\u4f53\u53c2\u89c1 [P4137 Rmq Problem / mex](https://www.luogu.com.cn/problem/P4137)/\u3002\n\n\u90a3\u6211\u4eec\u53ef\u4ee5\u7528\u6bcf\u4e2a\u6570 $x$ \u5c06\u6570\u7ec4\u5206\u9694\u6210\u82e5\u5e72\u6bb5\uff0c\u5224\u65ad\u5176\u4e2d\u662f\u5426\u6709\u4e00\u6bb5\u7684 $\\operatorname{MEX}$ \u4e3a $x$\u3002\n\n\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n- code\n\n```cpp\n#include <bits/stdc++.h>\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,avx2\")\nusing namespace std;\n\nnamespace IO{\n\tchar ibuf[(1 << 20) + 1], *iS, *iT;\n\t#if ONLINE_JUDGE\n\t#define gh() (iS == iT ? iT = (iS = ibuf) + fread(ibuf, 1, (1 << 20) + 1, stdin), (iS == iT ? EOF : *iS++) : *iS++)\n\t#else\n\t#define gh() getchar()\n\t#endif\n\t#define reg register\n\tinline long long read () {\n\t\treg char ch = gh();\n\t\treg long long x = 0;\n\t\treg char t = 0;\n\t\twhile (ch < '0' || ch > '9') t |= ch == '-', ch = gh();\n\t\twhile (ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48), ch = gh();\n\t\treturn t ? -x : x;\n\t}\n\tinline void write(long long x) {\n\t\tif (x < 0) {\n\t\t\tx = ~(x - 1);\n\t\t\tputchar('-');\n\t\t}\n\t\tif (x > 9)\n\t\t\twrite(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\n\nusing IO::read;\nusing IO::write;\n\nconst int maxn(1e5 + 50);\nint n, a[maxn], cnt, rt[maxn];\nvector <int> G[maxn];\n\nstruct SGTNode {\n\tint mn, ls, rs;\n} tr[maxn * 24];\n\ninline void mdy (int s, int l, int r, int &p, int q, int v) {\n\tp = ++cnt;\n\ttr[p] = tr[q];\n\tif (l == r) {\n\t\ttr[p].mn = v;\n\t\treturn;\n\t}\n\tconst int mid = (l + r) >> 1;\n\tif (s <= mid) mdy(s, l, mid, tr[p].ls, tr[q].ls, v);\n\telse mdy(s, mid + 1, r, tr[p].rs, tr[q].rs, v);\n\ttr[p].mn = min(tr[tr[p].ls].mn, tr[tr[p].rs].mn);\n}\n\ninline int qry (int s, int l, int r, int p) {\n\tif (l == r) return l;\n\tconst int mid = (l + r) >> 1;\n\tif (s >= tr[tr[p].ls].mn) return qry(s, l, mid, tr[p].ls);\n\telse return qry(s, mid + 1, r, tr[p].rs);\n}\n\ninline bool check (int mex) {\n\tint lst = 0;\n\tfor (int &pos : G[mex]) {\n\t\tif (pos - 1 != lst && qry(lst, 1, n + 1, rt[pos - 1]) == mex) return 1;\n\t\tlst = pos;\n\t}\n\treturn 0;\n}\n\nint main () {\n\tn = read();\n\tfor (int i = 1; i <= n; i++) a[i] = read();\n\tfor (int i = 1; i <= n; i++) G[a[i]].push_back(i);\n\tfor (int i = 1; i <= n; i++) mdy(a[i], 1, n + 1, rt[i], rt[i - 1], i);\n\tfor (int i = 1; i <= n + 1; i++) G[i].push_back(n + 1);\n\tint MEX = 1;\n\twhile (check(MEX)) MEX++;\n\twrite(MEX);\n}\n```",
        "postTime": 1667307489,
        "uid": 317495,
        "name": "JWRuixi",
        "ccfLevel": 7,
        "title": "Solution CF1436E"
    }
]
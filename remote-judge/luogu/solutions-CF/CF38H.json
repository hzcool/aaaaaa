[
    {
        "content": "\u9898\u76ee\u633a\u6709\u8da3\u7684\n\n\u9996\u5148\u6211\u4eec\u8dd1\u4e00\u904d Floyd\uff0c\u6c42\u51fa\u4efb\u610f\u4e24\u70b9\u95f4\u6700\u77ed\u8def\uff0c\u7136\u540e\u6211\u4eec\u8bb0 $l_i=\\min\\limits_{j\\ne i} dis_{i,j}$,$r_i=\\max\\limits_{j\\ne i}dis_{i,j}$\n\n\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u4e00\u4e2a\u4eba\u5982\u679c\u62ff\u4e86 Au\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f3a\u5236\u8ba9\u4ed6\u7684\u8017\u65f6\u53d8\u6210 $l_i$\uff0c\u5982\u679c\u4ed6\u62ff\u4e86 Cu\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f3a\u5236\u8ba9\u4ed6\u7684\u8017\u65f6\u53d8\u6210 $r_i$\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5 $O(n^2)$ \u679a\u4e3e Au \u7ebf\u7684\u4e0b\u754c\u548c Cu \u7ebf\u7684\u4e0a\u754c\u4e86\n\n\u63a5\u7740\u6211\u4eec\u8dd1\u4e00\u904d DP\uff0c\u8bb0 $f_{i,j,k}$ \u4e3a\u524d $i$ \u4e2a\u4eba\u4e2d\u5df2\u7ecf\u6709 $j$ \u4e2a\u4eba\u62ff Au\uff0c $k$ \u4e2a\u4eba\u62ff Ag \u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u65f6\u770b\u770b\u8fd9\u4e2a\u4eba\u80fd\u5426\u62ff Au,Ag,Cu\uff0c\u8fdb\u884c\u8f6c\u79fb\u5373\u53ef\n\n\u4f46\u8fd9\u6837\u8fd8\u4e0d\u591f\uff0c\u8fd9\u6837\u8ba1\u7b97\u7684\u65f6\u5019\u4f1a\u51fa\u73b0\u6ca1\u4eba\u521a\u597d\u662f Au \u7ebf\u6216\u8005 Cu \u7ebf\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u5bb9\u65a5\u4e00\u4e0b\uff0c\u5f62\u5f0f\u4e0a\u5c31\u50cf\u4e8c\u7ef4\u524d\u7f00\u548c\u8f6c\u79fb\u90a3\u6837\uff0c\u7ed3\u679c\u4e3a $calc(a,c)-calc(a-1,c)-calc(a,c+1)+calc(a-1,c+1)$\n\n\u53e6\u5916\uff0c\u9898\u76ee\u4e2d\u8bf4\u5982\u679c\u65f6\u95f4\u76f8\u540c\u6309\u7f16\u53f7\u6392\uff0c\u6211\u4eec\u628a $dis_{i,j}$ \u8d4b\u6210 $dis_{i,j}\\times n+i$ \u5373\u53ef\n\n```cpp\ninline ll C(ll G,ll B,ll L,ll R) {\n\tmemset(f,0,sizeof(f));\n\tf[0][0][0]=1;\n\tfor(int i=1;i<=n;++i) {\n\t\tbool g=0,s=0,b=0;\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tif(i!=j&&dis[i][j]!=INF) {\n\t\t\t\tif(dis[i][j]<=G) g=1;\n\t\t\t\tif(dis[i][j]>=B) b=1;\n\t\t\t\tif(dis[i][j]>L&&dis[i][j]<R) s=1;\n\t\t\t}\n\t\tfor(int j=0;j<=n;++j)\n\t\t\tfor(int k=0;j+k<=n;++k)\n\t\t\t\tif(f[i-1][j][k]) {\n\t\t\t\t\tif(g) f[i][j+1][k]+=f[i-1][j][k];\n\t\t\t\t\tif(s) f[i][j][k+1]+=f[i-1][j][k];\n\t\t\t\t\tif(b) f[i][j][k]+=f[i-1][j][k];\n\t\t\t\t}\n\t}\n\tll ans=0;\n\tfor(int i=g1;i<=g2;++i)\n\t\tfor(int j=s1;j<=s2;++j)\n\t\t\tans+=f[n][i][j];\n\treturn ans;\n}\n\ninline ll calc(ll G,ll B) {\n\treturn C(G,B,G,B)-C(G-1,B,G,B)-C(G,B+1,G,B)+C(G-1,B+1,G,B);\n}\n```",
        "postTime": 1635242629,
        "uid": 79075,
        "name": "mzgwty",
        "ccfLevel": 7,
        "title": "CF38H The Great Marathon \u9898\u89e3"
    }
]
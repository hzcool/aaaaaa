[
    {
        "content": "## \u9898\u610f\n\nCF1031E. Triple Flips\n\n[\u4f20\u9001\u95e8](https://codeforces.com/contest/1031/problem/E)\n\n\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a$n$\u768401\u5e8f\u5217\uff0c\u6bcf\u6b21\u53ef\u4ee5\u9009\u4e09\u4e2a\u8ddd\u79bb\u76f8\u540c\u7684\u6570\u53cd\u8f6c\uff080\u53d8\u62101,1\u53d8\u62100\uff09\uff0c\u6784\u9020\u4e00\u79cd\u65b9\u6848\u4f7f\u64cd\u4f5c\u6b21\u6570$\\le \\frac{n}{3}+12$\u3002\n\n$n\\le 10^5$\n\n## \u505a\u6cd5\n\n\u624b\u73a9\u597d\u9898\u3002\n\n\u624b\u73a9\u4e86\u4e0b\u7136\u540e\u770b\u4e86\u4e0b\u9898\u89e3\uff0c\n\n\u6253\u66b4\u529b\u53d1\u73b0\uff0c\u5f53$n \\ge 8$\u7684\u65f6\u5019\u90fd\u53ef\u4ee5\u6784\u6210\u3002\n\n\u7136\u540e\u60f3\u516b\u4f4d\u516b\u4f4d\u7684\u6784\u9020\uff0c\u53d1\u73b0\u6b21\u6570\u8fbe\u5230\u4e86$\\frac{5n}{8}$\uff0c\n\n\u56e0\u4e3a\u64cd\u4f5c\u6b21\u6570\u662f$\\frac{n}{3}$\u7ea7\u522b\u7684\uff0c\u6240\u4ee5\u611f\u89c9\u524d\u9762\u4e00\u90e8\u5206\u7684\u6bcf\u4e2a\u4e09\u4f4d\u53ef\u4ee5\u4e00\u6b21\u5f97\u5230\u7b54\u6848\u3002\n\n\u7ee7\u7eed\u6253\u8868\u53d1\u73b0\u5f53$n \\ge 11$\u7684\u65f6\u5019\uff0c\u524d6\u4f4d\u53ef\u4ee5\u57282\u6b65\u5185\u6784\u6210\u3002\n\n\u5982\u679c\u518d\u64cd\u4f5c\u4e00\u6b21\u4f1a\u5728$8$\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u5c31\u4e0d\u4e00\u5b9a\u80fd\u6784\u9020\u51fa\u89e3\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u5f3a\u884c\u4fdd\u7559\u516b\u4f4d\uff08\u5305\u62ec\u5df2\u7ecf\u53d8\u62100\u7684\uff09\n\n\u6700\u540e\u5269\u4e0b\u7684$10$\u6b65\u66b4\u529b\u3002\n\n## \u4ee3\u7801\n\u66b4\u529b+\u6253\u8868\n```cpp\n/*\n * Author: ylx\n * Lang: c++\n * Prog: 1031E\n */\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nvoid qmax(int &x,int y) {if (x<y) x=y;}\nvoid qmin(int &x,int y) {if (x>y) x=y;}\ninline int read()\n{\n\tchar s;\n\tint k=0,base=1;\n\twhile ((s=getchar())!='-'&&s!=EOF&&!(isdigit(s)));\n\tif (s==EOF) exit(0);\n\tif (s=='-') base=-1,s=getchar();\n\twhile (isdigit(s)) k=k*10+(s^'0'),s=getchar();\n\treturn k*base;\n}\ninline void write(ll x)\n{\n\tstatic char cnt,num[20];cnt=0;\n\tif (!x)\n\t{\n\t\tputchar('0');\n\t\treturn;\n\t}\n\tfor (;x;x/=10) num[++cnt]=x%10;\n\tfor (;cnt;putchar(num[cnt--]+48));\n}\nconst int maxm=1<<12;\nint dis[maxm];\nint Dis[maxm];\nint g[maxm][2];\nint a[50],n,m;\nint c[maxm];\nvoid dfs(int x,int cnt,int now)\n{\n\tif (x==m+1)\n\t{\n\t\tqmin(dis[now],cnt);\n\t\tif (dis[now]<Dis[now>>5])\n\t\t{\n\t\t\tDis[now>>5]=dis[now];\n\t\t\tg[now>>5][0]=c[1];\n\t\t\tg[now>>5][1]=c[2];\n\t\t\tif (now==1904) \n\t\t\t{\n\t\t\t\tcerr<<(now>>5)<<\" \"<<cnt<<\" \"<<c[1]<<\" \"<<c[2]<<\" \"<<(c[1]^c[2])<<endl;\n\t\t\t\tcerr<<g[59][0]<<\" \"<<g[59][1]<<endl;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tc[cnt+1]=a[x];\n\tdfs(x+1,cnt+1,now^a[x]);\n\tc[cnt+1]=0;\n\tdfs(x+1,cnt,now);\n}\nvoid work()\n{\n\twhile (a[m]*2<=n)\n\t{\n\t\ta[m+1]=a[m]*2;\n\t\tm++;\n\t}\n}\nvoid Wr(int x)\n{\n\tint len=0;\n\twhile (x)\n\t{\n\t\ta[++len]=x%2;\n\t\tx/=2;\n\t}\n\tint cnt=0;\n\tfor (int i=len;i>=1;i--)\n\t{\n\t\tif (a[i]==1)\n\t\t{\n\t\t\tcnt++;\n\t\t\tprintf(\"%d\",i);\n\t\t\tif (cnt!=3) putchar(',');\n\t\t}\n\t}\n}\nint main()\n{\n#ifdef ylx\n\tfreopen(\"1031E.in\",\"r\",stdin);\n\tfreopen(\"1031E.out\",\"w\",stdout);\n#endif\n\tn=(1<<11);\n\tm++;a[m]=7;work();\n\tm++;a[m]=21;work();\n\tm++;a[m]=73;work();\n\tm++;a[m]=273;work();\n\tm++;a[m]=1057;work();\n\tmemset(dis,0x3f3f3f3f,sizeof(dis));\n\tmemset(Dis,0x3f3f3f3f,sizeof(Dis));\n\tdfs(1,0,0);\n\tn=1<<6;\n\tprintf(\"{{0,0,0},{0,0,0}},\\n\");\n\tfor (int i=1;i<n;i++)\n\t{\n\t\tif (Dis[i]==1)\n\t\t{\n\t\t\tputchar('{');\n\t\t\tputchar('{');\n\t\t\tWr(g[i][0]);\n\t\t\tputchar('}');\n\t\t\tputchar(',');\n\t\t\tputchar('{');\n\t\t\tprintf(\"0,0,0\");\n\t\t\tputchar('}');\n\t\t\tputchar('}');\n\t\t\tputchar(',');\n\t\t\tputchar('\\n');\n\t\t} else\n\t\tif (Dis[i]==2) \n\t\t{\n\t\t\tputchar('{');\n\t\t\tputchar('{');\n\t\t\tWr(g[i][0]);\n\t\t\tputchar('}');\n\t\t\tputchar(',');\n\t\t\tputchar('{');\n\t\t\tWr(g[i][1]);\n\t\t\tputchar('}');\n\t\t\tputchar('}');\n\t\t\tputchar(',');\n\t\t\tputchar('\\n');\n\t\t}\n\t}\n\treturn 0;\n}\n//2018\u5e74 10\u6708 23\u65e5 \u661f\u671f\u4e8c 10:51:39 CST\n```\n\n\u4ee3\u7801\n```cpp\n/*\n * Author: ylx\n * Lang: c++\n * Prog: 1031E\n */\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nvoid qmax(int &x,int y) {if (x<y) x=y;}\nvoid qmin(int &x,int y) {if (x>y) x=y;}\ninline int read()\n{\n\tchar s;\n\tint k=0,base=1;\n\twhile ((s=getchar())!='-'&&s!=EOF&&!(isdigit(s)));\n\tif (s==EOF) exit(0);\n\tif (s=='-') base=-1,s=getchar();\n\twhile (isdigit(s)) k=k*10+(s^'0'),s=getchar();\n\treturn k*base;\n}\ninline void write(ll x)\n{\n\tstatic char cnt,num[20];cnt=0;\n\tif (!x)\n\t{\n\t\tputchar('0');\n\t\treturn;\n\t}\n\tfor (;x;x/=10) num[++cnt]=x%10;\n\tfor (;cnt;putchar(num[cnt--]+48));\n}\nconst int g[64][2][3]=\n{{{0,0,0},{0,0,0}},\n{{6,5,4},{0,0,0}},\n{{7,5,3},{0,0,0}},\n{{7,6,5},{0,0,0}},\n{{8,5,2},{0,0,0}},\n{{8,6,4},{0,0,0}},\n{{6,5,4},{8,7,6}},\n{{8,7,6},{0,0,0}},\n{{9,5,1},{0,0,0}},\n{{9,6,3},{0,0,0}},\n{{9,7,5},{0,0,0}},\n{{6,5,4},{9,7,5}},\n{{9,8,7},{7,5,3}},\n{{7,6,5},{9,8,7}},\n{{9,8,7},{0,0,0}},\n{{6,5,4},{9,8,7}},\n{{6,5,4},{10,6,2}},\n{{10,6,2},{0,0,0}},\n{{10,7,4},{0,0,0}},\n{{6,5,4},{10,7,4}},\n{{6,5,4},{10,8,6}},\n{{10,8,6},{0,0,0}},\n{{7,6,5},{10,8,6}},\n{{7,5,3},{10,8,6}},\n{{10,9,8},{8,5,2}},\n{{10,9,8},{8,6,4}},\n{{11,10,9},{11,7,3}},\n{{8,7,6},{10,9,8}},\n{{10,9,8},{0,0,0}},\n{{6,5,4},{10,9,8}},\n{{10,9,8},{7,5,3}},\n{{7,6,5},{10,9,8}},\n{{6,5,4},{11,6,1}},\n{{11,6,1},{0,0,0}},\n{{11,7,3},{0,0,0}},\n{{6,5,4},{11,7,3}},\n{{11,8,5},{0,0,0}},\n{{6,5,4},{11,8,5}},\n{{8,7,6},{11,6,1}},\n{{7,6,5},{11,8,5}},\n{{7,5,3},{11,9,7}},\n{{7,6,5},{11,9,7}},\n{{11,9,7},{0,0,0}},\n{{6,5,4},{11,9,7}},\n{{9,8,7},{11,7,3}},\n{{8,7,6},{11,9,7}},\n{{9,7,5},{11,8,5}},\n{{9,8,7},{11,6,1}},\n{{11,10,9},{9,5,1}},\n{{11,10,9},{9,6,3}},\n{{11,10,9},{9,7,5}},\n{{10,7,4},{11,6,1}},\n{{10,8,6},{11,6,1}},\n{{11,8,5},{10,6,2}},\n{{9,8,7},{11,10,9}},\n{{10,8,6},{11,7,3}},\n{{11,10,9},{0,0,0}},\n{{6,5,4},{11,10,9}},\n{{11,10,9},{7,5,3}},\n{{7,6,5},{11,10,9}},\n{{11,10,9},{8,5,2}},\n{{10,9,8},{11,6,1}},\n{{10,9,8},{11,7,3}},\n{{8,7,6},{11,10,9}}};\nconst int maxm=1<<11;\nconst int maxn=1e5+100;\nint a[25],n,m,cnt,z[40],u[40];\nint b[maxn],S,sum;\nvector<int> G;\nvoid insert(int x,int y,int z)\n{\n\tb[x]^=1,b[y]^=1,b[z]^=1;\n\tG.push_back(x);\n\tG.push_back(y);\n\tG.push_back(z);\n}\nvoid add(int x)\n{\n\tint len=0;\n\twhile (x)\n\t{\n\t\tz[++len]=x%2;\n\t\tx/=2;\n\t}\n\tfor (int i=1;i<=len;i++) if (z[i]) G.push_back(i);\n}\nbool flag;\nvoid dfs(int x,int cnt,int now)\n{\n\tif (x==m+1)\n\t{\n\t\tif (now==S)\n\t\t{\n\t\t\tint s=0;\n\t\t\tfor (int i=1;i<=m;i++) if (u[i]) s++;\n\t\t\tif (s+sum>n/3+12)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (int i=1;i<=m;i++) if (u[i]) add(a[i]);\n\t\t\tflag=true;\n\t\t\treturn;\n\t\t}\n\t\treturn;\n\t}\n\tu[x]=1;\n\tdfs(x+1,cnt+1,now^a[x]);\n\tu[x]=0;\n\tif (flag) return;\n\tdfs(x+1,cnt,now);\n}\nvoid work()\n{\n\twhile (a[m]*2<=(1<<cnt))\n\t{\n\t\ta[m+1]=a[m]*2;\n\t\tm++;\n\t}\n}\nint merge(int x,int y)\n{\n\tint sum=0;\n\tfor (int i=y;i>=x;i--) \n\t{\n\t\tsum=(sum<<1)|b[i];\n\t}\n\treturn sum;\n}\nvoid work1()\n{\n\tm++;a[m]=7;work();\n\tif (21<(1<<cnt)) {m++;a[m]=21;work();}\n\tif (73<(1<<cnt)) {m++;a[m]=73;work();}\n\tif (273<(1<<cnt)) {m++;a[m]=273;work();}\n\tflag=false;\n\tS=merge(1,cnt);\n\tsum=G.size()/3;\n\tif (S) dfs(1,0,0); else flag=true;\n\tif (flag)\n\t{\n\t\tputchar('Y'),putchar('E'),putchar('S'),putchar('\\n');\n\t\tS=G.size()/3;\n\t\tprintf(\"%d\\n\",S);\n\t\tfor (int i=0;i<S;i++)\n\t\t{\n\t\t\tprintf(\"%d %d %d\\n\",G[i*3],G[i*3+1],G[i*3+2]);\n\t\t}\n\t} else\n\t{\n\t\tputchar('N'),putchar('O'),putchar('\\n');\n\t}\n}\nint main()\n{\n#ifdef ylx\n\tfreopen(\"1031E.in\",\"r\",stdin);\n\tfreopen(\"1031E.out\",\"w\",stdout);\n#endif\n\tn=read();\n\tfor (int i=1;i<=n;i++) b[i]=read();\n\tcnt=n;\n\tint x;\n\tif (n<8)\n\t{\n\t\twork1();\n\t\treturn 0;\n\t}\n\twhile (cnt>10)\n\t{\n\t\tif (cnt-6<8)\n\t\t{\n\t\t\tx=merge(cnt-6+1,cnt);\n\t\t\tif (g[x][0][0]!=0) insert(cnt-11+g[x][0][0],cnt-11+g[x][0][1],cnt-11+g[x][0][2]);\n\t\t\tif (g[x][1][0]!=0) insert(cnt-11+g[x][1][0],cnt-11+g[x][1][1],cnt-11+g[x][1][2]);\n\t\t\tcnt=8;\n\t\t} else\n\t\t{\n\t\t\tx=merge(cnt-6+1,cnt);\n\t\t\tif (g[x][0][0]!=0) insert(cnt-11+g[x][0][0],cnt-11+g[x][0][1],cnt-11+g[x][0][2]);\n\t\t\tif (g[x][1][0]!=0) insert(cnt-11+g[x][1][0],cnt-11+g[x][1][1],cnt-11+g[x][1][2]);\n\t\t\tcnt-=6;\n\t\t}\n\t}\n\twork1();\n\treturn 0;\n}\n//2018\u5e74 10\u6708 23\u65e5 \u661f\u671f\u4e8c 10:51:39 CST\n```\n",
        "postTime": 1554114036,
        "uid": 2674,
        "name": "\u300cQQ\u7ea2\u5305\u300d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1031E \u3010Triple Flips\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a 01 \u4e32\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u9009\u4e09\u4e2a\u4e0b\u6807 $i,j,k$ \u6ee1\u8db3 $i<j<k,j-i=k-j$\uff0c\u7136\u540e\u5c06 $i,j,k$ \u8fd9\u4e09\u4e2a\u4f4d\u7f6e 01 \u7ffb\u8f6c\u3002\u6784\u9020\u4e00\u4e2a\u64cd\u4f5c\u6570\u4e0d\u8d85\u8fc7 $\\left\\lfloor\\frac{n}{3}\\right\\rfloor+12$ \u7684\u65b9\u6848\uff0c\u4f7f\u539f\u5e8f\u5217\u90fd\u662f 0\uff0c\u6216\u5224\u5b9a\u65e0\u89e3\u3002\n\n$n\\leq 10^5$\u3002\n\n## \u9898\u89e3\n\n\u8003\u8651\u64cd\u4f5c\u6570 $\\left\\lfloor\\frac{n}{3}\\right\\rfloor$ \u7684\u610f\u4e49\uff0c\u5373\u5e73\u5747\u6bcf\u6b21\u64cd\u4f5c\u90fd\u8981\u505a\u5230\u628a\u4e09\u4e2a\u6570\u53d8\u6210 0\u3002\u6700\u540e\u7559\u6709 $12$ \u4e2a\u8c03\u6574\u7528\u7684\u64cd\u4f5c\u6570\u3002\u800c\u89c2\u5bdf\u6253\u8868\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e $n\\leq 10$ \u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u7528\u4e0d\u8d85\u8fc7 $12$ \u6b65\u64cd\u4f5c\u8fd8\u539f\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e $n>10$ \u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u53ea\u7ba1\u600e\u4e48\u7528 $\\left\\lfloor\\frac{n}{3}\\right\\rfloor$ \u7684\u64cd\u4f5c\u6570\u628a\u524d\u9762\u7684\u90e8\u5206\u8fd8\u539f\u4e86\uff0c\u4e0d\u9700\u8981\u7ba1\u6700\u540e\u5269\u4e0b\u7684\u8fd9 $10$ \u4e2a\u6570\u3002\n\n\u6700\u7b80\u5355\u7684\u80af\u5b9a\u662f\u4e09\u4e2a\u4e00\u7ec4\u5730\u8003\u8651\uff08\u4e0d\u59a8\u8bbe\u6bcf\u7ec4\u7684\u5f00\u5934\u4e00\u5b9a\u662f\u4e2a 1\uff0c\u5426\u5219\u5982\u679c\u662f 0\uff0c\u8bf4\u660e\u8fd9\u4e2a\u4f4d\u7f6e\u5df2\u7ecf\u8fd8\u539f\u4e86\uff0c\u4e0d\u9700\u8981\u7ba1\uff09\uff1a\u5bf9\u4e8e `111` \u7684\u60c5\u51b5\uff0c\u5c06\u4e09\u4e2a 1 \u4e00\u8d77\u53cd\u8f6c\u5373\u53ef\u3002\u4f46\u662f\u4e0d\u662f\u8fd9\u79cd\u60c5\u51b5\u7684\u7ec4\u5408\uff0c\u5c31\u65e0\u6cd5\u7528\u4e00\u6b21\u64cd\u4f5c\u5b8c\u6210\u4e86\u3002\n\n\u4e09\u4e2a\u4e00\u7ec4\u65e0\u6cd5\u5b8c\u6210\u7684\u60c5\u51b5\uff0c\u8003\u8651\u516d\u4e2a\u4e00\u7ec4\uff0c\u80fd\u5426\u7528\u4e24\u6b21\u64cd\u4f5c\u5b8c\u6210\u3002\u7b54\u6848\u662f\u80af\u5b9a\u7684\u3002\n\n\u8bfb\u5230\u8fd9\u91cc\u7684\u8bdd\u4f60\u5e94\u8be5\u5c31\u80fd\u53bb\u8bd5\u8bd5\u7136\u540e\u624b\u73a9\u516d\u4e2a\u4e00\u7ec4\u7684\u6240\u6709\u60c5\u51b5\u4e86 qwq\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u516d\u4e2a\u6216\u4e09\u4e2a\u4e00\u7ec4\u7684\u6240\u6709\u60c5\u51b5\u6211\u4eec\u90fd\u6709\u529e\u6cd5\u5e94\u5bf9\uff0c\u800c\u6700\u540e $10$ \u4e2a\u6570\u5b57\u6211\u4eec\u53ef\u4ee5\u7206\u641c\u89e3\u51b3\uff0c\u56e0\u6b64\u5728\u5904\u7406\u5f53\u524d\u516d\u4e2a\u4e00\u7ec4\u7684\u65f6\u5019\uff0c\u662f\u53ef\u4ee5\u64cd\u4f5c\u4fee\u6539\u540e\u9762\u7684\u683c\u5b50\u7684\uff0c\u65e0\u9700\u8003\u8651\u5f71\u54cd\uff0c\u53ea\u8981\u6bcf\u4e2a\u516d\u4e2a\u4e00\u7ec4\u4f7f\u7528\u7684\u64cd\u4f5c\u6b21\u6570\u4e0d\u8d85\u8fc7\u4e24\u6b21\u5373\u53ef\u3002\n\n\u4e0b\u9762\u662f\u516d\u4e2a\u4e00\u7ec4\u7684\u6240\u6709\u60c5\u51b5\u7684\u4e00\u79cd\u53ef\u884c\u65b9\u6848\uff08\u84dd\u8272\u65b9\u6846\u8868\u793a\u4e00\u6b21\u64cd\u4f5c\uff0c\u7ea2\u8272\u659c\u6b63\u65b9\u5f62\u8868\u793a\u4e00\u6b21\u64cd\u4f5c\uff0c\u7d2b\u8272\u7684\u8868\u793a\u4e24\u6b64\u64cd\u4f5c\u90fd\u7528\u5230\u4e86\u8fd9\u4e2a\u4f4d\u7f6e\uff09\uff1a\n\n![\u4e00\u79cd\u65b9\u6848](https://pic1.imgdb.cn/item/636b08f516f2c2beb17b7f28.png)\n\n\u5f53\u7136\u4f60\u53ef\u4ee5\u6574\u5408\u5176\u4e2d\u7c7b\u4f3c\u7684\u64cd\u4f5c\u65b9\u6848\uff0c\u4e0d\u7136\u5206\u8ba8 24 \u79cd\u60c5\u51b5\u8fd8\u662f\u6709\u70b9\u8ba9\u4eba\u81ea\u95ed\u7684\u3002\n\n\u987a\u5e26\u63d0\u4e00\u53e5\u6700\u540e\u90a3\u4e9b\u6570\u5b57\u600e\u4e48\u529e\uff0c\u4f60\u628a\u72b6\u6001\u5168\u90e8\u8bb0\u4e0b\u6765\uff0c\u628a\u80fd\u901a\u8fc7\u4e00\u6b21\u64cd\u4f5c\u8f6c\u5316\u7684\u72b6\u6001\u8fde\u8fb9\uff0c\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nbool Begin;\nconst int max_n=100005,max_m=1000006,max_s=1052,inf=1000000000000015LL;\ninline int read(){\n    int x=0;bool w=0;char c=getchar();\n    while(c<'0' || c>'9') w|=c=='-',c=getchar();\n    while(c>='0' && c<='9') x=(x<<1)+(x<<3)+(c^48),c=getchar();\n    return w?-x:x;\n}\ninline void write(int x){\n    if(x<0) putchar('-'),x=-x;\n    if(x>9) write(x/10);\n    putchar(x%10^48);\n}\nstruct graph{\n    int ct,hd[max_s],to[max_m<<1],nx[max_m<<1],ln[max_m<<1];\n    graph(){ct=1;}\n    inline void add(int u,int v,int w=0){\n        nx[++ct]=hd[u],hd[u]=ct,to[ct]=v,ln[ct]=w;\n    }\n}e;\n\nint n,a[max_n];\n\nvector< tuple<int,int,int> > ans;\n\ninline void Flip(int x,int y,int z){\n    ans.emplace_back(x,y,z);\n    a[x]^=1,a[y]^=1,a[z]^=1;\n}\n\nbool vis[max_s];\nint dis[max_s],fr[max_s];\npriority_queue< pair<int,int> > q;\n\ninline void dijs(int st){\n    memset(dis,0x3f,sizeof(dis));\n    dis[st]=0;\n    q.emplace(0,st);\n    while(!q.empty()){\n        int u=q.top().second;q.pop();\n        if(vis[u]) continue;\n        vis[u]=1;\n        for(int i=e.hd[u];i;i=e.nx[i]){\n            int v=e.to[i];\n            if(dis[v]>dis[u]+1){\n                dis[v]=dis[u]+1,fr[v]=u;\n                q.emplace(-dis[v],v);\n            }\n        }\n    }\n}\n\ninline void dfs(int S){\n    if(S==0) return;\n    int T=fr[S],x[3]={0,0,0};\n    for(int i=0,j=0;i<10 && j<3;++i) if(((S>>i)&1)!=((T>>i)&1))\n        x[j++]=i;\n    ans.emplace_back(x[0]+n-9,x[1]+n-9,x[2]+n-9);\n    dfs(T);\n}\n\nnamespace SmallN{\n    inline void dfs(int S){\n        if(S==0) return;\n        int T=fr[S],x[3]={0,0,0};\n        for(int i=0,j=0;i<n && j<3;++i) if(((S>>i)&1)!=((T>>i)&1))\n            x[j++]=i+1;\n        ans.emplace_back(x[0],x[1],x[2]);\n        dfs(T);\n    }\n    inline void main(){\n        int N=(1<<n);\n        for(int s=0;s<N;++s)\n            for(int i=0;i<n;++i)\n                for(int j=i+1;2*j-i<n;++j){\n                    int x=i,y=j,z=2*j-i;\n                    e.add(s,s^(1<<x)^(1<<y)^(1<<z));\n                }\n        dijs(0);\n        int s=0;\n        for(int i=1,j=0;i<=n;++i,++j)\n            s|=(a[i]<<j);\n        if(dis[s]>inf) return void(puts(\"NO\"));\n        dfs(s);\n        puts(\"YES\");\n        write(ans.size()),putchar('\\n');\n        for(auto p:ans){\n            write(get<0>(p)),putchar(' ');\n            write(get<1>(p)),putchar(' ');\n            write(get<2>(p)),putchar('\\n');\n        }\n    }\n}\n\nbool End;\n#define File \"\"\nsigned main(){\n    // #ifndef ONLINE_JUDGE\n    // freopen(File \".in\",\"r\",stdin);\n    // freopen(File \".out\",\"w\",stdout);\n    // #endif\n    // cerr<<\"Memory : \"<<(&Begin-&End)/1024.0/1024<<\"\\n\";\n    n=read();\n    for(int i=1;i<=n;++i)\n        a[i]=read();\n    if(n<=10) return SmallN::main(),0;\n    for(int s=0;s<1024;++s)\n        for(int i=0;i<10;++i)\n            for(int j=i+1;2*j-i<10;++j){\n                int x=i,y=j,z=2*j-i;\n                e.add(s,s^(1<<x)^(1<<y)^(1<<z));\n            }\n    dijs(0);\n    for(int i=1;i<=n-10;++i) if(a[i]){\n        if(a[i+1] && a[i+2]){\n            Flip(i,i+1,i+2);\n            continue;\n        }\n        if(!a[i+1] && !a[i+2]){\n            if(!a[i+3] && !a[i+4] && !a[i+5]){\n                Flip(i,i+2,i+4),\n                Flip(i+2,i+4,i+6);\n                continue;\n            }\n            for(int j=3;j<=5;++j) if(a[i+j]){\n                Flip(i,i+j,i+j+j);\n                break;\n            }\n            continue;\n        }\n        if(!a[i+1]){\n            Flip(i,i+2,i+4);\n            continue;\n        }\n        else{\n            if(!a[i+3] && !a[i+4] && !a[i+5]){\n                Flip(i+1,i+4,i+7),\n                Flip(i,i+4,i+8);\n                continue;\n            }\n            if(a[i+3] && a[i+4] && a[i+5]){\n                Flip(i+1,i+3,i+5),\n                Flip(i,i+4,i+8);\n                continue;\n            }\n            if(a[i+3] && a[i+4]){\n                Flip(i+1,i+2,i+3),\n                Flip(i,i+2,i+4);\n                continue;\n            }\n            if(a[i+3] && a[i+5]){\n                Flip(i,i+3,i+6),\n                Flip(i+1,i+5,i+9);\n                continue;\n            }\n            if(a[i+4] && a[i+5]){\n                Flip(i,i+4,i+8),\n                Flip(i+1,i+5,i+9);\n                continue;\n            }\n            Flip(i,i+1,i+2);\n            for(int j=3;j<=5;++j) if(a[i+j]){\n                Flip(i+2,i+j,i+2*j-2);\n                break;\n            }\n            continue;\n        }\n    }\n    int s=0;\n    for(int i=n-9,j=0;i<=n;++i,++j)\n        s|=(a[i]<<j);\n    if(dis[s]>inf) return puts(\"NO\"),0;\n    dfs(s);\n    puts(\"YES\");\n    write(ans.size()),putchar('\\n');\n    for(auto p:ans){\n        write(get<0>(p)),putchar(' ');\n        write(get<1>(p)),putchar(' ');\n        write(get<2>(p)),putchar('\\n');\n    }\n    return 0;\n}\n```\n\n",
        "postTime": 1667959387,
        "uid": 181776,
        "name": "_Arahc_",
        "ccfLevel": 7,
        "title": "CF1031E"
    }
]
[
    {
        "content": "\u9898\u76ee\u7ffb\u8bd1\uff1a\u7ed9\u4f60\u4e00\u6bb5\u6587\u672c\uff0c\u4f60\u53ef\u4ee5\u5c06\u4e24\u6bb5\u4ee5\u4e0a\u7684\u76f8\u540c\u7684\u5b50\u6bb5\u5206\u522b\u7f29\u6210\u53ea\u7531\u5b50\u6bb5\u5185\u5355\u8bcd\u9996\u5b57\u6bcd\u6784\u6210\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u6c42\u6700\u540e\u5b57\u7b26\u4e32\u603b\u957f\u5ea6\u7684\u5927\u5c0f\n\n\uff08\u6bd4\u5982 **to be or not to be** \u80fd\u7f29\u4e3a **TB or not TB**\uff09\n\n\uff08**jjj a jjj b jjj** \u80fd\u7f29\u4e3a **J a J b J** \uff09\n\n\u7531\u4e8e\u5355\u8bcd\u603b\u957f\u5ea6\u5f88\u957f\uff0c\u4f46\u5355\u8bcd\u6570\u5f88\u5c11\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528map\u628a\u4e0d\u540c\u7684\u5355\u8bcd\u7528\u4e0d\u540c\u7684\u6570\u5b57\u8868\u793a\uff0c\u7136\u540e\u7528KMP\uff08 $n^2$ \u679a\u4e3e\u6a21\u5f0f\u4e32\uff0c $n$ \u7684KMP\uff0c\u603b\u590d\u6742\u5ea6 $O(n^3)$ \uff09\n\n\u6700\u540e\u8ba1\u7b97\u5c31\u5f88\u76f4\u63a5\u4e86\n\n## $Code$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define gc getchar\ninline ll read(){\n\tll x = 0; char ch = gc(); bool positive = 1;\n\tfor (; !isdigit(ch); ch = gc())\tif (ch == '-')\tpositive = 0;\n\tfor (; isdigit(ch); ch = gc())\tx = x * 10 + ch - '0';\n\treturn positive ? x : -x;\n}\ninline void write(ll a){\n    if(a<0){\n    \ta=-a; putchar('-');\n\t}\n    if(a>=10)write(a/10);\n    putchar('0'+a%10);\n}\ninline void writeln(ll a){write(a); puts(\"\");}\ninline void wri(ll a){write(a); putchar(' ');}\nint n;\nint s[1010];\nint val[1010];\nint kmp[1010];\nint km[1010];\nint cnt;\nmap<string,int> mp;\nstring nl;\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>nl;\n\t\tval[i]=nl.size();\n\t\tval[i]+=val[i-1];\n\t\tif(mp[nl]==0) mp[nl]=(++cnt);\n\t\ts[i]=mp[nl];\n\t}\n\tint Ans=val[n]+n-1;\n\tfor(int k=1;k<=n;k++){\n\t\tfor(int l=k;l<=n;l++){\n\t\t\tint n1=0;\n\t\t\tint j=k-1;\n\t\t\tkmp[k]=k-1;\n\t\t\tfor(int i=k+1;i<=l;i++){\n\t\t\t\twhile(j!=k-1 && s[i]!=s[j+1]) j=kmp[j];\n\t\t\t\tif(s[i]==s[j+1]) j++;\n\t\t\t\tkmp[i]=j;\n\t\t\t}\n\t\t\tj=k-1;\n\t\t\tfor(int i=1;i<=n;i++){\n\t\t\t\twhile(j!=k-1 && s[i]!=s[j+1]) j=kmp[j];\n\t\t\t\tif(s[i]==s[j+1]) j++;\n\t\t\t\tif(j==l){\n\t\t\t\t\tn1++;\n\t\t\t\t\tj=k-1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(n1>=2) Ans=min(Ans,val[n]+n-1-n1*(val[l]-val[k-1]-(l-k+1)+l-k));\n\t\t}\n\t}\n\tcout<<Ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1602646014,
        "uid": 81662,
        "name": "zjwwjhy",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1003F \u3010Abbreviation\u3011"
    },
    {
        "content": "\u7531\u4e8e\u64cd\u4f5c\u7684\u5bf9\u8c61\u662f\u5355\u8bcd\uff0c\u901a\u8fc7\u4e00\u4e2a map \u628a\u6bcf\u4e2a\u5355\u8bcd\u8f6c\u6362\u6210\u6570\u5b57 ID\uff0c\u8fd9\u6837\u9898\u76ee\u5c31\u53d8\u6210\u7edf\u8ba1\u5b50\u533a\u95f4\u51fa\u73b0\u6b21\u6570\u4e86\u3002\u7531\u4e8e $n$ \u5f88\u5c0f\uff0c\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e\u5b50\u533a\u95f4\uff0c\u67e5\u8be2\u5176\u5728\u5e8f\u5217\u4e2d\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u8fd9\u4e00\u64cd\u4f5c\u53ef\u4ee5\u7528 KMP \u6216 Rabin-Karp \u6765\u5b9e\u73b0\u3002\n\nAC \u4ee3\u7801\uff08Golang\uff09:\n\n```go\npackage main\n\nimport (\n\t\"bufio\"\n\t. \"fmt\"\n\t\"os\"\n)\n\nfunc main() {\n\tin := bufio.NewReader(os.Stdin)\n\tvar n int\n\tFscan(in, &n)\n\ttext := make([]int, n)  // \u5355\u8bcd\u7f16\u53f7\u6570\u7ec4\n\tsum := make([]int, n+1) // \u5355\u8bcd\u957f\u5ea6\u524d\u7f00\u548c\n\tallSum := n - 1         // \u603b\u957f\u5ea6\n\tid := map[string]int{}\n\tfor i := range text {\n\t\tvar s string\n\t\tFscan(in, &s)\n\t\tif _, has := id[s]; !has {\n\t\t\tid[s] = len(id)\n\t\t}\n\t\ttext[i] = id[s]\n\t\tsum[i+1] = sum[i] + len(s)\n\t\tallSum += len(s)\n\t}\n\n\t// KMP: s \u5728 text \u4e2d\u7684\u4e0d\u76f8\u4ea4\u51fa\u73b0\u6b21\u6570\n\tcount := func(s []int) (cnt int) {\n\t\tn := len(s)\n\t\tf := make([]int, n)\n\t\tc := 0\n\t\tfor i := 1; i < n; i++ {\n\t\t\tb := s[i]\n\t\t\tfor c > 0 && s[c] != b {\n\t\t\t\tc = f[c-1]\n\t\t\t}\n\t\t\tif s[c] == b {\n\t\t\t\tc++\n\t\t\t}\n\t\t\tf[i] = c\n\t\t}\n\t\tc = 0\n\t\tfor _, b := range text {\n\t\t\tfor c > 0 && s[c] != b {\n\t\t\t\tc = f[c-1]\n\t\t\t}\n\t\t\tif s[c] == b {\n\t\t\t\tc++\n\t\t\t}\n\t\t\tif c == n {\n\t\t\t\tcnt++\n\t\t\t\tc = 0\n\t\t\t}\n\t\t}\n\t\treturn\n\t}\n\n\tans := allSum\n\tfor r := 1; r <= n; r++ {\n\t\tfor l := 0; l < r; l++ {\n\t\t\tif c := count(text[l:r]); c > 1 {\n\t\t\t\tif v := allSum - c*(sum[r]-sum[l]-1); v < ans {\n\t\t\t\t\tans = v\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tPrint(ans)\n}\n```\n\n\u7531\u4e8e Golang \u7684 `strings.Count` \u5185\u7f6e Rabin-Karp\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a\n\n\n```go\npackage main\n\nimport (\n\t\"bufio\"\n\t. \"fmt\"\n\t\"os\"\n\t\"strings\"\n)\n\nfunc main() {\n\tin := bufio.NewReader(os.Stdin)\n\tvar n int\n\tFscan(in, &n)\n\ta := make([]rune, n)\n\tsum := make([]int, n+1)\n\tallSum := n - 1\n\tid := map[string]int{}\n\tfor i := range a {\n\t\tvar s string\n\t\tFscan(in, &s)\n\t\tif _, ok := id[s]; !ok {\n\t\t\tid[s] = len(id)\n\t\t}\n\t\ta[i] = rune(id[s])\n\t\tsum[i+1] = sum[i] + len(s)\n\t\tallSum += len(s)\n\t}\n\n\tans := allSum\n\ttext := string(a)\n\tfor r := 1; r <= n; r++ {\n\t\tfor l := 0; l < r; l++ {\n\t\t\tif c := strings.Count(text, string(a[l:r])); c > 1 {\n\t\t\t\tif v := allSum - c*(sum[r]-sum[l]-1); v < ans {\n\t\t\t\t\tans = v\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tPrint(ans)\n}\n```\n\n",
        "postTime": 1595490217,
        "uid": 266651,
        "name": "\u7075\u8336\u5c71\u827e\u5e9c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1003F \u3010Abbreviation\u3011"
    }
]
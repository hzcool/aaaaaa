[
    {
        "content": "\u4e2d\u6587\u7ffb\u8bd1\u4e0d\u5168\uff0c\u53ef\u4ee5\u8865\u4e0a\uff0c\u5982\u679c\u7ffb\u8bd1\u5b8c\u6574\u4e86\u6307\u5411\u6027\u5c31\u7279\u522b\u660e\u786e\u4e86\uff0c\u6ce8\u610f\u9898\u76ee\u4e2d\u6709\u8fd9\u53e5\u8bdd\uff1a\n\n> \u5b57\u6bcd `t`, `r`, `y`, `g`, `u`, `b` \u4e0d\u4f1a\u51fa\u73b0\u5728\u7ed9\u51fa\u7684\u5b57\u7b26\u4e32\u4e2d\u3002\n\n\u663e\u7136\u5c31\u662f\u544a\u8bc9\u6211\u4eec\u53ea\u6709 20 \u79cd\u5b57\u7b26\uff0c\u90a3\u4e48\u8003\u8651\u72b6\u538b\u3002\n\n\u8bbe $F_S$ \u8868\u793a $S$ \u4ee3\u8868\u7684\u5b57\u7b26\u7ec4\u6210\u7684 **\u5b50\u96c6** \u662f\u5426\u53ef\u4ee5\u5230\u8fbe\u5e76\u4e14\u53ef\u4ee5\u7ee7\u7eed\u8f6c\u79fb\uff0c\u5373\u53ef\u4ee5\u901a\u8fc7\u82e5\u5e72\u64cd\u4f5c\u5168\u90e8\u53d8\u6210\u53e6\u5916\u67d0\u79cd **\u5176\u4ed6** \u5b57\u7b26\u3002\n\n\u5982\u6837\u4f8b\u4e2d $F_{\\text{'i'}}=1,F_{\\text{'i','o'}}=1,F_{\\text{'i','o','m'}}=1$ \u7b49\u3002\n\n\u8fd9\u91cc\u6709\u4e2a\u524d\u63d0\u662f\u88ab\u64cd\u4f5c\u8fc7\u540e\u7684\u5b57\u7b26\u4e0d\u4f1a\u88ab\u64cd\u4f5c\u56de\u53bb\uff0c\u56e0\u4e3a\u53ea\u80fd\u8f6c\u5316\u4e3a\u5c40\u9762\u4e0a\u6709\u7684\u5b57\u7b26\u3002\n\n\u6240\u4ee5\u5c31\u4fdd\u8bc1\u4e86\u4e00\u4e9b\u6027\u8d28\u5982\u6bcf\u4e2a\u5b57\u7b26\u53ea\u8f6c\u5316\u4e86\u4e00\u6b21\uff0c\u8f6c\u5316\u8fc7\u7a0b\u5bf9\u5e94\u4e86\u4e00\u68f5\u6811\uff0c\u5f53\u7136\u8fd9\u90fd\u662f\u5e2e\u52a9\u7406\u89e3\u3002\n\n\u66f4\u91cd\u8981\u7684\u6709 $F_{U\\setminus \\text{'x'}}=1$ \u4ee3\u8868\u6700\u540e\u80fd\u8f6c\u5316\u4e3a `x` \u5b57\u7b26\uff0c\u4e8e\u662f\u6211\u4eec\u53ea\u8981\u5f97\u5230\u4e86 $F$ \u7684\u503c\u5c31\u53ef\u4ee5\u7b80\u5355\u5f97\u5230\u7b54\u6848\u3002\n\n\u8fd9\u91cc $U$ \u6307\u51fa\u73b0\u7684\u5b57\u7b26\u5168\u96c6\uff0c$\\setminus$ \u662f\u9664\u53bb\u67d0\u4e2a\u5143\u7d20\u3002(\u672c\u4eba\u7b26\u53f7\u8868\u8fbe\u80fd\u529b\u8f83\u5f31\uff0c\u4e0b\u9762\u4e0d\u61c2\u7684\u610f\u4f1a\u4e00\u4e0b)\n\n\u8bbe $G_S$ \u8868\u793a $S$ \u4ee3\u8868\u7684\u5b57\u7b26\u7ec4\u6210\u7684 **\u5b50\u96c6** \u662f\u5426\u53ef\u4ee5\u7ee7\u7eed\u8f6c\u79fb\uff0c\u8f85\u52a9 $F$ \u7684\u8f6c\u79fb\uff0c\u9884\u5904\u7406\u4e00\u4e0b\u53ef\u4ee5\u7531\u9898\u76ee\u7ed9\u7684\u6761\u4ef6\u76f4\u63a5\u63a8\u51fa\u3002\n\n\u7136\u540e\u8003\u8651\u8f6c\u79fb\uff0c\u6c42 $F_S$\uff0c\u4e00\u79cd naive \u7684\u60f3\u6cd5\u5c31\u662f\u679a\u4e3e\u5b50\u96c6 $T$ \u8f6c\u79fb\uff0c\u663e\u7136\u5730\u6709 $F_S|=F_T\\&F_{S\\setminus T}$\u3002\n\n\u6709\u7279\u6b8a\u60c5\u51b5\uff0c\u867d\u7136\u8fd9\u624d\u662f\u8f6c\u79fb\u57fa\u7840\uff0c\u662f\u7edf\u4e00\u5230\u4e00\u4e2a\u5b57\u7b26\u4e0a\u8f6c\u79fb\uff0c\u6b64\u65f6 $T$ \u4ec5\u4ee3\u8868\u67d0\u79cd\u5b57\u7b26\uff0c\u6709 $F_S=G_S\\&F_{S\\setminus T}$\u3002\n\n\u74f6\u9888\u5728\u679a\u4e3e\u5b50\u96c6\uff0c\u4fe1\u4ef0 $O(3^{20})$ \u662f\u4e0d\u53ef\u80fd\u8fc7\u5f97\u53bb\u7684\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u6211\u4eec\u4e00\u6b65\u6b65\u8f6c\u79fb\u662f\u4e0d\u597d\u770b\u51fa\u6765\u7684\uff0c\u8003\u8651 $F_S|=F_A\\&F_B\\&F_C\\&...\\&F_T$ \uff0c\u8fd9\u91cc $A,B,C,...$ \u7684\u6700\u5de6\u51fa\u73b0\u4f4d\u7f6e\u9012\u589e\u6392\u5217\u3002\n\n\u4e3a\u4e86\u8868\u8fbe\u6e05\u695a\u6211\u4eec\u8bbe\u5b57\u7b26 $x$ \u6700\u5de6\u51fa\u73b0\u4f4d\u7f6e\u4e3a $l_x$\uff0c\u6700\u53f3\u4e3a $r_x$\uff0c\u4e00\u4e2a\u5b50\u96c6\u7684\u8303\u56f4\u4e3a $R(S)=\\left[\\operatorname{min}_ {x \\in S}l_x,\\operatorname{max}_ {x\\in S}r_x\\right]$\u3002\n\n\u6211\u4eec\u5e0c\u671b\u8bc1\u660e\u5982\u679c $R(A)\\cap R(B)\\not= \\varnothing$\uff0c$F_A,F_B$ \u4e00\u5b9a\u53ef\u4ee5\u8f6c\u79fb\u5f97\u5230 $F_{A|B}$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5e0c\u671b\u53ef\u4ee5\u53ea\u679a\u4e3e\u8303\u56f4\u4e0d\u4ea4\u7684\u5b50\u96c6\u6765\u8f6c\u79fb\uff0c\u5de6\u53f3\u4e00\u5212\u5206\u5c31\u53ef\u4ee5\u53ea\u679a\u4e3e\u4e00\u4e2a\u533a\u95f4\u800c\u4e0d\u662f\u5b50\u96c6\u4e86\u3002\n\n~~\u7136\u540e\u6211\u5c31\u968f\u4fbf\u8bc1\u8bc1~~\uff0c\u8bbe\u5b50\u96c6\u5bf9\u5e94\u7684\u5b57\u7b26\u4e2a\u6570\u4e3a $T(x)$ \uff0c\u4ee5\u4e0b\u6ca1\u8003\u8651\u8f6c\u4ee5\u540e\u7edf\u4e00\u4e3a\u67d0\u4e2a\u5b57\u7b26\uff1a\n\n\u56e0\u4e3a\u6bcf\u4e2a\u5b57\u7b26\u53ea\u8f6c\u5316\u4e00\u6b21\uff0c\u90a3\u4e48 $A\\cap B=\\varnothing$\uff0c\u6709 $T(A|B)=T(A)+T(B)$.\n\n\u7531\u6761\u4ef6\u77e5 $T(A)+T(B)\\ge k\\cdot|R(A)|+k\\cdot|R(B)|$\u3002\n\n\u53c8\u7531\u4e8e $R(A)\\cap R(B)\\not= \\varnothing$\uff0c\u90a3\u4e48 $k\\cdot|R(A)|+k\\cdot|R(B)|\\ge k\\cdot|R(A|B)|$\n\n\u5373 $T(A|B)\\ge k\\cdot|R(A|B)|$ \uff0c\u6545\u5f97\u8bc1\u3002\n\n\u7136\u540e\u6211\u4eec\u5c31\u6839\u636e \u5b57\u7b26\u6700\u5de6\u51fa\u73b0\u4f4d\u7f6e\u9012\u589e\u6392\u5217 \u679a\u4e3e\u4e00\u4e2a\u5de6\u533a\u95f4\uff0c\u548c\u53f3\u533a\u95f4\u4e0e\u4e00\u4e0b\u5373\u53ef\u3002\n\n\u6ce8\u610f\u8fd8\u8981\u7279\u6b8a\u8003\u8651\u4e00\u4e0b\u7edf\u4e00\u5230\u4e00\u4e2a\u5b57\u7b26\u4e0a\u7684\u60c5\u51b5\uff0c\u8fd9\u6837\u4f1a\u51fa\u73b0\u4fe9\u533a\u95f4\u6709\u4ea4\uff0c\u53ef\u80fd\u4e0d\u88ab\u8003\u8651\u5230\u3002\n\n\u72b6\u6001 $O(2^{20})$ \u4e58\u4e0a\u679a\u4e3e\u6bcf\u79cd\u5b57\u7b26/\u533a\u95f4\u4f4d\u7f6e\u8f6c\u79fb $O(20)$\uff0c\u590d\u6742\u5ea6\u8db3\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u6838\u5fc3(\u8f6c\u79fb\u90e8\u5206)\u4ee3\u7801\uff1a\n\n```cpp\n\tfor(F[0]=i=1;i<(1<<top);i++)\n\t{\n\t\tfor(j=k=0;j<top;j++)\n\t\t{\n\t\t\tif((i>>j)&1)\n\t\t\t{\n\t\t\t\tif(!lft[j]){F[i]=0;goto nxt;}\n\t\t\t\tk|=(st=1<<j);\n\t\t\t\tif(!L[i])L[i]=Min(L[st],L[i^st]);R[i]=Max(R[st],R[i^st]);T[i]=T[st]+T[i^st];\n//\u6211\u6bd4\u8f83\u6bd2\u7624\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\uff0c\u4e5f\u5c31\u662f\u5728\u8f6c\u79fb\u4e2d\u95f4\u5904\u7406\u7684\u5b50\u96c6\u4fe1\u606f\u3002\n\t\t\t\tif((F[k]&&F[i^k])||(F[i^st]&&a*(R[i]-L[i]+1)<=b*T[i])){F[i]=1;goto nxt;}\n//\u6838\u5fc3\u8f6c\u79fb\u90e8\u5206\uff1a\u7531 \u5de6\u53f3\u4e24\u533a\u95f4\u5e76\u6210 \u6216 \u7edf\u4e00\u5230\u4e00\u4e2a\u5b57\u7b26\u4e0a\u7684\u60c5\u51b5\u3002\n\t\t\t}\n\t\t}\n\tnxt:;}\n```",
        "postTime": 1626359639,
        "uid": 158948,
        "name": "\u7ea6\u745f\u592b\u7528\u8111\u73a9",
        "ccfLevel": 0,
        "title": "CF1450G Communism"
    },
    {
        "content": "I am a convinced communist!\n\n# Description\n\n\u6709 $n$ \u540d\u5de5\u4eba\u7ad9\u6210\u4e00\u6392\u3002\u7528\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s$ \u8868\u793a\u4ed6\u4eec\u7684\u5de5\u4f5c\uff0c\u5176\u4e2d\u7b2c $i$ \u4e2a\u4eba\u7684\u5de5\u4f5c\u4e3a $s_i$\u3002\u5b9a\u4e49\u4e00\u4e2a\u6709\u7406\u6570 $k=\\frac{a}{b}$ \u4f5c\u4e3a\u53c2\u6570\u3002\n\n\u6bcf\u6b21\u64cd\u4f5c\u4e2d\uff0c\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u81f3\u5c11\u5b58\u5728\u4e00\u540d\u5de5\u4eba\u7684\u5de5\u4f5c $x$\u3002\u8bbe\u6240\u6709\u5de5\u4f5c\u4e3a $x$ \u7684\u5de5\u4eba\u7684\u4f4d\u7f6e\u4e3a $i_1,\\dots,i_m(i_1<\\dots<i_m)$\uff0c\u82e5 $k\\cdot(i_m-i_1+1)\\le m$\uff0c\u5219\u53ef\u4ee5\u518d\u9009\u62e9\u53e6\u4e00\u4e2a\u81f3\u5c11\u5b58\u5728\u4e00\u540d\u5de5\u4eba\u7684\u5de5\u4f5c $y$\uff0c\u5e76\u5c06\u6240\u6709\u5de5\u4f5c\u4e3a $x$ \u7684\u4eba\u7684\u5de5\u4f5c\u66ff\u6362\u6210 $y$\u3002\n\n\u82e5\u53ef\u4ee5\u901a\u8fc7\u82e5\u5e72\u6b21\uff08\u542b $0$ \u6b21\uff09\u64cd\u4f5c\u5c06\u6240\u6709\u4eba\u7684\u5de5\u4f5c\u66ff\u6362\u6210 $x$\uff0c\u5219\u79f0\u5de5\u4f5c $x$ \u662f\u53ef\u8fbe\u5230\u7684\u3002\u8f93\u51fa\u53ef\u8fbe\u5230\u7684\u5de5\u4f5c\u7684\u4e2a\u6570\uff0c\u5e76\u5c06\u5b83\u4eec\u6309\u7167\u5b57\u5178\u5e8f\u8f93\u51fa\u3002\n\n$n \\le 5 \\times 10^3,a,b \\le 10^5, |\\Sigma| \\le 20$\uff0c\u65f6\u9650 1.5s\u3002\n\n# Solution\n\n\u663e\u7136\u6bcf\u79cd\u5b57\u7b26\u6700\u591a\u5b8c\u6210\u4e00\u6b21\u66ff\u6362\u3002\n\n\u53ef\u4ee5\u8003\u8651\u4ee5\u56fe\u8bba\u6a21\u578b\u8003\u5bdf\u6027\u8d28\uff0c\u82e5 $u$ \u66ff\u6362\u4e3a $v$\uff0c\u5219\u8fde\u8fb9 $u \\rightarrow v$\u3002\u82e5\u6700\u7ec8\u80fd\u5f52\u4e3a $x$\uff0c\u5219\u5fc5\u7136\u5f97\u5230\u4e00\u68f5\u4ee5 $x$ \u4e3a\u6839\u7684\u6709\u5411\u6811\u3002\n\n\n\u6ce8\u610f $|\\Sigma | \\le 20$\uff0c\u53ef\u4ee5\u8003\u8651\u5bf9\u5b50\u6811\u96c6\u5408\u8bbe\u8ba1\u72b6\u538b DP\u3002\u8bbe $f_S$ \u8868\u793a\u5b57\u7b26\u96c6 $S$ \u662f\u5426\u80fd\u53d8\u6362\u4e3a $s$ \u5916\u7684\u5b57\u7b26\u3002\u6700\u7ec8\u7b54\u6848\u5373\u95ee\u662f\u5426 $f_{S \\oplus x}=1$\u3002\n\n\u5bb9\u6613\u5f97\u5230\u8f6c\u79fb\uff1a\n\n- \u679a\u4e3e $S$ \u7684\u5b50\u96c6 $s$\uff08\u5373\u5408\u5e76\u4e24\u4e2a\u5b50\u6811\u96c6\u5408\uff09\uff0c\u82e5 $f_s = f_{S \\oplus s}=1$\uff0c\u5219 $f_{S}=1$\u3002\n- \u679a\u4e3e $S$ \u4e2d\u7684\u5b57\u7b26 $x$\uff08\u5373\u6307\u5b9a\u4e00\u4e2a\u5b50\u6811\u6839\uff09\uff0c\u82e5 $f_{S \\oplus x}=1$ \u4e14 $k (r_S-l_S+1)\\le p_S$\uff08\u8fd9\u91cc\u7684 $l_S,r_S$ \u4e3a\u5b57\u7b26\u96c6 $S$ \u7684\u5de6/\u53f3\u7aef\u70b9\uff0c$p_S$ \u4e3a $S$ \u7684\u5b57\u7b26\u4e2a\u6570\uff09\uff0c\u5219 $f_S=1$\u3002\n\n\u8fd9\u6837\u590d\u6742\u5ea6\u662f $\\mathcal O(3^{|\\Sigma|})$ \u7684\uff0c\u74f6\u9888\u5728\u679a\u4e3e\u5b50\u96c6\u7684\u8f6c\u79fb\u3002\n\n\u8003\u8651\u53bb\u9664\u65e0\u6548\u8f6c\u79fb\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u5f53 $p_S=p_s+p_{S\\oplus s}\\ge k(r_s-l_s+1) +k(r_{S \\oplus s}-l_{S \\oplus s}+1) \\ge k(r_S-l_S+1)$ \u65f6\uff0c\u8f6c\u79fb 1 \u4e0d\u5982\u8f6c\u79fb 2\u3002\n\n\u8fd9\u79cd\u60c5\u51b5\u5bf9\u5e94 $s,S \\oplus s$ \u5728\u5e8f\u5217\u4e0a\u7684\u5bf9\u5e94\u533a\u95f4\u3002\n\n\u53ef\u4ee5\u8003\u8651\u5c06\u521d\u59cb\u533a\u95f4\u6309\u5de6\u7aef\u70b9\u6392\u5e8f\uff0c\u7136\u540e\u6bcf\u6b21\u53d6\u4e00\u4e2a\u524d\u7f00\u8f6c\u79fb\u3002\u53ef\u4ee5\u8bc1\u660e\u8fd9\u6837\u4e00\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u80fd\u5c3d\u91cf\u627e\u5230\u4e24\u4e2a\u4e0d\u4ea4\u7684\u533a\u95f4\u96c6\u5408\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u4e3a $\\mathcal O(|\\Sigma| 2^{|\\Sigma|})$\u3002\n\n# Code\n\n```cpp\nconst int N=(1<<20)+5,M=30,L=5e3+5;\nint n,m,a,b,nm[M],f[N],p[N],l[N],r[N];\nchar s[L],rv[M];\nvector<char> ans;\nint main() {\n\tmes(nm,-1),mes(l,0x7f);\n\tscanf(\"%d%d%d%s\",&n,&a,&b,s+1);\n\tfor (int i=1;i<=n;i++) {\n\t\tint c=s[i]-'a';\n\t\tif (nm[c]==-1) rv[m]=s[i],nm[c]=m++;\n\t\tp[1<<nm[c]]++;\n\t\tcmn(l[1<<nm[c]],i);\n\t\tcmx(r[1<<nm[c]],i);\n\t}\n\tf[0]=1;\n\tfor (int s=1;s<(1<<m);s++) {\n\t\tfor (int i=0,_s=0;i<m;i++) {\n\t\t\tif (!(s>>i&1)) continue;\n\t\t\t_s|=(1<<i);\n\t\t\tf[s]|=(f[s^_s]&f[_s]);\n\t\t\tcmn(l[s],l[_s]);\n\t\t\tcmx(r[s],max(r[_s],r[s^_s]));\n\t\t\tp[s]=p[s^_s]+p[_s];\n\t\t}\n\t\tfor (int j=0;j<m;j++)\n\t\t\tif ((s>>j&1) && f[s^(1<<j)] && a*(r[s]-l[s]+1)<=b*p[s])\n\t\t\t\tf[s]=1;\n\t}\n\tint s=(1<<m)-1;\n\tfor (int i=0;i<m;i++)\n\t\tif (f[s^(1<<i)]) ans.pb(rv[i]);\n\tsort(ans.bg,ans.ed);\n\tprintf(\"%d\",ans.sze);\n\tfor (char c:ans) printf(\" %c\",c);\n\treturn 0;\n}\n```\n",
        "postTime": 1666749165,
        "uid": 283913,
        "name": "ZillionX",
        "ccfLevel": 6,
        "title": "\u3010\u6709\u6548\u8f6c\u79fb\uff0c\u72b6\u538b DP\uff0c\u7ed3\u8bba\u4f18\u5316\uff0c\u89c2\u5bdf\u3011CF1450G Communism"
    }
]
[
    {
        "content": "\n# CF197D Infinite Maze \u89e3\u9898\u62a5\u544a\n\n### 1 \u9898\u76ee\u94fe\u63a5\n\n[\u539f\u9898](https://codeforces.com/problemset/problem/197/D)\n\n### 2 \u9898\u76ee\u5927\u610f\n\n\u6709\u4e00\u4e2a\u7531\u5df2\u7ed9\u51fa\u7684\u5730\u56fe\u5468\u671f\u6027\u94fa\u6210\u7684\u65e0\u9650\u7684\u8ff7\u5bab\uff0c\u95ee\u4ece\u51fa\u53d1\u70b9 `S` \u51fa\u53d1\u80fd\u5426\u8d70\u5230\u65e0\u7a77\u8fdc\u7684\u5730\u65b9\u3002\n\n### 3 \u89e3\u6cd5\u5206\u6790\n\n\u9898\u76ee\u5341\u5206\u6e05\u6670\uff0c\u4f46\u4f3c\u4e4e\u6709\u4e00\u5b9a\u7684\u7406\u89e3\u96be\u5ea6\u3002\n\n\u9996\u5148\u8003\u8651\u4ec0\u4e48\u60c5\u51b5\u624d\u662f\u7b26\u5408\u9898\u610f\u7684\u3002\n\n\u7ecf\u8fc7\u601d\u8003\uff0c\u53ef\u4ee5\u77e5\u9053\u5982\u679c\u53ef\u4ee5\u8d70\u5230\u76f8\u90bb\u77e9\u9635\u7684\u540c\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u4e00\u5b9a\u662f\u53ef\u4ee5\u6c38\u8fdc\u8d70\u4e0b\u53bb\u7684\u3002\u53cd\u4e4b\uff0c\u82e5\u4e0d\u80fd\uff0c\u5219\u4e00\u5b9a\u4e0d\u80fd\u8d70\u4e0b\u53bb\u3002\n\n\u4e8e\u662f\u4f60\u4f1a\u53d1\u73b0\u8fd9\u9053\u9898\u5c31\u975e\u5e38\u7b80\u5355\u4e86\u3002\n\n### 4 AC Code\n```cpp\n#include <bits/stdc++.h>\n#define rep(i, a, b) for (int (i) = (a); (i) <= (b); ++(i))\n#define N 1507\nusing namespace std;\n\nint n, m;\nint sx, sy;\nint mp[N][N];\nint vis[N][N];\nint wx[N][N], wy[N][N];\nint dx[4] = {0, 1, 0, -1};\nint dy[4] = {1, 0, -1, 0};\n\nbool dfs(int x, int y) {\n\tint nx = ((x - 1) % n + n) % n + 1;\n\tint ny = ((y - 1) % m + m) % m + 1;\n\tif (mp[nx][ny])\n\t\treturn 0;\n\tif (vis[nx][ny])\n\t\treturn wx[nx][ny] != x || wy[nx][ny] != y;\n\twx[nx][ny] = x;\n\twy[nx][ny] = y;\n\tvis[nx][ny] = 1;\n\trep(i, 0, 3)\n\t\tif (dfs(x + dx[i], y + dy[i]))\n\t\t\treturn 1;\n\treturn 0;\n}\n\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\trep(i, 1, n) {\n\t\tstring s;\n\t\tcin >> s;\n\t\ts = ' ' + s;\n\t\trep(j, 1, m) {\n\t\t\tif (s[j] == 'S') {\n\t\t\t\tsx = i;\n\t\t\t\tsy = j;\n\t\t\t}\n\t\t\tmp[i][j] = (s[j] == '#');\n\t\t\twx[i][j] = wy[i][j] = vis[i][j] = 0;\n\t\t}\n\t}\n\tputs(dfs(sx, sy) ? \"Yes\" : \"No\");\n\treturn 0;\n}\n```",
        "postTime": 1666316452,
        "uid": 624064,
        "name": "syxmz",
        "ccfLevel": 5,
        "title": "CF197D Infinite Maze \u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\n~~\u4e00\u5f00\u59cb\u4ee5\u4e3a\u662f\u4e2a\u5c0f\u6e05\u65b0\uff0c\u7ed3\u679c\u662f\u4e2a\u5927\u6bd2\u7624\u3002~~\n\n---\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u9898\u76ee\u4e2d\u7684\u8db3\u591f\u8fdc\u610f\u601d\u662f\u53ef\u4ee5\u65e0\u9650\u8d70\u4e0b\u53bb\u3002\n\n\u5982\u679c\u4e00\u4e2a\u70b9\u80fd\u4ece\u4e24\u4e2a\u4e0d\u7ecf\u8fc7\u76f8\u540c\u70b9\u7684\u8def\u5f84\u5230\u8fbe\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u53ef\u4ee5\u65e0\u9650\u5730\u8d70\u4e0b\u53bb\u3002\n\n\u8003\u8651\u7528\u641c\u7d22\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bb0\u5f55\u4e0b\u5f53\u524d\u641c\u7d22\u5230\u7684\u70b9\u5728\u6574\u4e2a\u8ff7\u5bab\u4e2d\u7684\u5750\u6807\uff0c\u7136\u540e\u53ef\u4ee5\u7b97\u51fa\u8fd9\u4e2a\u70b9\u5728\u9898\u76ee\u7ed9\u51fa\u7684\u8ff7\u5bab\u6837\u677f\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u5982\u679c\u4e00\u4e2a\u76f8\u5bf9\u4f4d\u7f6e\u88ab\u4e24\u4e2a\u4e0d\u540c\u7684\u6574\u4f53\u5750\u6807\u5230\u8fbe\uff0c\u90a3\u4e48\u5c31\u662f\u6ee1\u8db3\u6761\u4ef6\u7684\u3002\n\n---\n\n\u6ce8\u610f\u53d6\u6a21\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint n,m,v[1505][1505][2],sx,sy,ans;\nbool mp[1505][1505];\nint dx[5]={-1,1,0,0,},dy[5]={0,0,1,-1};\nchar c;\nchar get(){\n\tchar c=getchar();\n\twhile(c=='\\n'||c==' '||c=='\\r')\n\tc=getchar();\n\treturn c;\n}\nvoid dfs(int x,int y){\n\tif(v[(x%n+n)%n][(y%m+m)%m][0]==x&&v[(x%n+n)%n][(y%m+m)%m][1]==y)return;\n\t\n\tif(v[(x%n+n)%n][(y%m+m)%m][0]==-1&&v[(x%n+n)%n][(y%m+m)%m][1]==-1)\n\tv[(x%n+n)%n][(y%m+m)%m][0]=x,v[(x%n+n)%n][(y%m+m)%m][1]=y;\n\t\n\tif(v[(x%n+n)%n][(y%m+m)%m][0]!=x||v[(x%n+n)%n][(y%m+m)%m][1]!=y)ans=1;\n\t\n\tif(ans)return;\n\t\n\tfor(int i=0;i<=3;i++)\n\tif(mp[(x%n+n+dx[i])%n][(y%m+m+dy[i])%m]==0)\n\tdfs(x+dx[i],y+dy[i]);\n}\nint main(){\n\tmemset(v,-1,sizeof(v));\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=0;i<n;i++)\n\tfor(int j=0;j<m;j++){\n\t\tc=get();\n\t\tif(c=='#')mp[i][j]=1;\n\t\tif(c=='S')sx=i,sy=j;\n\t}\n\tdfs(sx,sy);\n\tif(ans==1)printf(\"Yes\\n\");\n\telse printf(\"No\\n\");\n\treturn 0;\n}\n```\n",
        "postTime": 1636251064,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF196B Infinite Maze"
    },
    {
        "content": "# CF196B \u9898\u89e3\n\n\u770b\u5230\u5404\u4f4d\u5927\u4f6c\u90fd\u662f\u7528 dfs \u5199\u7684\uff0c\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a bfs \u7684\u601d\u8def\u3002\n\n## \u9898\u610f\n\n\u7ed9\u51fa\u4e00\u4e2a\u8ff7\u5bab\u548c\u8d77\u70b9\uff0c\u4e0a\u4e0b\u5de6\u53f3\u79fb\u52a8\uff0c\u8ff7\u5bab\u5468\u56f4\u7528\u76f8\u540c\u7684\u5730\u56fe\u65e0\u9650\u62fc\u63a5\uff0c\u95ee\u80fd\u5426\u8d70\u5230\u65e0\u7a77\uff1f\n\n\u9996\u5148\u60f3\u5230\u4e86\u590d\u5236 $9$ \u4efd\u539f\u56fe\u8fdb\u884c\u6c42\u89e3\uff0c\u4f46\u662f\u5f88\u660e\u663e\u8fd9\u6837\u505a\u884c\u4e0d\u901a\u3002\n\n\u6240\u4ee5\u8f6c\u53d8\u601d\u8def\uff1a\u53ef\u4ee5\u5b58\u4e00\u4e0b\u539f\u56fe\u91cc\u6bcf\u4e2a\u4f4d\u7f6e\u5728\u522b\u7684\u5c0f\u62fc\u56fe\u91cc\u4e00\u6837\u7684\u76f8\u5bf9\u4f4d\u7f6e\u91cc\u51fa\u73b0\u7684\uff0c\u90a3\u4e2a\u5c0f\u5730\u56fe\u91cc\u8fd9\u4e2a\u70b9\u7684\u5750\u6807\uff0c\u5982\u679c\u4e0b\u4e00\u6b21\u53d1\u73b0\u8981\u5b58\u7684\u5750\u6807\u548c\u4e4b\u524d\u8d70\u8fc7\u7684\u4e0d\u4e00\u6837\uff0c\u90a3\u8bf4\u660e\u53ef\u4ee5\u8fd9\u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u5728\u4e24\u4e2a\u5c0f\u62fc\u56fe\u91cc\u8d70\uff0c\u53ef\u4ee5\u65e0\u9650\u884c\u8d70\u3002\n\n## \u4ee3\u7801\n\n\u5e38\u89c4\u7684\u5e7f\u641c\uff0c\u6ce8\u610f\u4e00\u4e0b\u53d6\u6a21\u548c `vis`  \u6570\u7ec4\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int N = 1555;\nconst int INF = 0x3f3f3f3f;\nchar Map[N][N];\nint n, m;\nint sx, sy;\nint dir[4][2] = {0, 1, 1, 0, 0, -1, -1, 0};\nstruct node\n{\n    int x, y;\n} vis[N][N];\nbool bfs(int x, int y)\n{\n    node now, next;\n    now.x = x;\n    now.y = y;\n    queue<node> q;\n    q.push(now);\n    while (!q.empty())\n    {\n        now = q.front();\n        q.pop();\n        for (int i = 0; i < 4; i++)\n        {\n            next.x = now.x + dir[i][0];\n            next.y = now.y + dir[i][1];\n            int xx = (next.x % n + n) % n;\n            int yy = (next.y % m + m) % m;\n            if (Map[xx][yy] != '#')\n            {\n                if (vis[xx][yy].x == INF)\n                {\n                    vis[xx][yy].x = next.x;\n                    vis[xx][yy].y = next.y;\n                    q.push(next);\n                }\n                else if (next.x != vis[xx][yy].x || next.y != vis[xx][yy].y)\n                {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nint main()\n{\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    memset(vis, INF, sizeof(vis));\n    cin >> n >> m;\n    for (int i = 0; i < n; i++)\n    {\n        for (int j = 0; j < m; j++)\n        {\n            cin >> Map[i][j];\n            if (Map[i][j] == 'S')\n                sx = i, sy = j;\n        }\n    }\n    if (bfs(sx, sy))\n        cout << \"Yes\" << endl;\n    else\n        cout << \"No\" << endl;\n    return 0;\n}\n\n```\n",
        "postTime": 1643426014,
        "uid": 355276,
        "name": "\u6e05\u5c0f\u79cbovo",
        "ccfLevel": 0,
        "title": "CF196B \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u7684\u7ffb\u8bd1\u5b8c\u5168\u6ca1\u6709\u548c\u539f\u9898\u9898\u610f\u5bf9\u4e0a\uff0c\u53ef\u4ee5\u770b\u4e00\u4e0b\u6211\u7684\u7ffb\u8bd1\uff1a[https://www.luogu.org/blog/xukuan/translation-cf196b](https://www.luogu.org/blog/xukuan/translation-cf196b)\n\n\u4e00\u9053bfs\uff0c\u4e0d\u8fc7\u5751\u6781\u591a\n\n### \u5927\u5168\uff1a\n\nQ1\uff1a\u4ee5\u4e3a\u662f\u8d70\u51fa\u8ff7\u5bab\u5c31\u53ef\u4ee5A\u4e86\uff08\u548c\u7ffb\u8bd1\u7684\u539f\u8bd1\u8005\u4e00\u6837\uff09\n\nA1\uff1a\u4f60\u6837\u4f8b\u4e8c\u770b\u8fc7\u6ca1\u6709\uff1f\n\nQ2\uff1a\u4ee5\u4e3a\u628a\u56fe\u590d\u5236\u62103\\*3\u500d\uff0c\u518d\u4ece\u8d77\u70b9\u5f00\u59cb\u80fdbfs\u5230\u4efb\u610f\u4e00\u4e2a\u70b9\u5c31\u53ef\u4ee5\u4e86\n\nA2\uff1a\u7b2c25\u7ec4\u6570\u636e\n\n```pascal\n12 12\n##.#######.#\n#..#......S#\n#.#..#######\n..#.###.....\n##..##..####\n#..##..#####\n..##..#.....\n###..##.####\n##..#...####\n#..##.######\n..##..####..\n##...#####.#\n```\n\n\u4f60\u8981\u590d\u5236n\\*m\u500d\uff0c\u5185\u5b58\u76f4\u63a5\u70b8\u4e86\n\nQ3\uff1a\u590d\u5236\u540e\u8d70\u5230\u53e6\u4e00\u5e45\u56fe\u7684S\u5373\u53ef\n\nA3\uff1a\u9001\u4e00\u7ec4\u6570\u636e4\n\n```pascal\n3 3\n.#.\n###\n.#S\n```\n\n\u6b63\u89e3\uff1adfs\n\ndfs\u8d70\u5230\u4e00\u4e2a\u70b9\u3002\u5982\u679c\u901a\u8fc7\u53e6\u4e00\u79cd\u65b9\u5f0f\u80fd\u5728\u51fa\u53bb\u8fd9\u4e2a\u56fe\u4e4b\u540e\u5230\u8fd9\u4e2a\u70b9\u5bf9\u5e94\u7684\u70b9\uff08\u4e24\u4e2a\u70b9\u6a2a\u5750\u6807\u5bf9n\u540c\u4f59\u4e14\u7eb5\u5750\u6807\u5bf9m\u540c\u4f59\uff09\uff0c\u5c31\u662f\u80fd\u8d70\u65e0\u9650\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(nm)$\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u70b9\u81f3\u591a\u88abdfs1\u6b21\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#include<iostream>\n#include<cstdio> \n#define ll long long\n#define N 1510\nusing namespace std;\n\nconst ll dx[4]={-1,0,1,0},dy[4]={0,-1,0,1};\nll n,m,x,y,d[N][N][2];\nstring s[N];\n\nvoid dfs(ll x,ll y){\n    if(d[x%n][y%m][0]==-1&&d[x%n][y%m][1]==-1){//\u8fd9\u4e2a\u70b9\u4e4b\u524d\u6ca1\u6709\u5230\u8fc7\n        d[x%n][y%m][0]=x;\n\t\td[x%n][y%m][1]=y;\n    }\n    else if(d[x%n][y%m][0]!=x||d[x%n][y%m][1]!=y) exit(printf(\"Yes\\n\")&0);//\u8fd9\u4e2a\u70b9\u4e4b\u524d\u5230\u8fc7\u5e76\u4e14\u4e0d\u662f\u76f4\u63a5\u5230\u7684\n    else return;//\u76f4\u63a5\u5230\u8fc7\u8fd9\u4e2a\u70b9\n    for(ll i=0; i<4; i++){\n    \tll X=x+dx[i],Y=y+dy[i];\n\t\tif(s[X%n][Y%m]=='.') dfs(X,Y);\n    }\n}\n \nint main(){\n    cin>>n>>m;\n    for(ll i=0; i<n; i++){\n    \tcin>>s[i];\n        for(ll j=0; j<m; j++){\n            if(s[i][j]=='S'){\n                s[i][j]='.';\n                x=i+n*m;\n                y=j+n*m;\n                //\u9632\u6b62\u51cf\u6cd5\u6ea2\u51fa\n            }\n        }\n    }\n    memset(d,-1,sizeof(d));\n\tdfs(x,y);\n    printf(\"No\\n\");\n    return 0;\n}\n```",
        "postTime": 1565334472,
        "uid": 27924,
        "name": "xukuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF196B \u3010Infinite Maze\u3011"
    },
    {
        "content": "\u9898\u610f\u7ffb\u8bd1\u597d\u50cf\u6ca1\u95ee\u9898\u5427QwQ\u3002\n\n\u601d\u8def\u5c31\u662f\u6807\u8bb0\u8d70\u8fc7\u7684\u70b9\uff0c\u5224\u65ad\u662f\u5426\u80fd\u4ece\u67d0\u4e2a\u70b9\u8d70\u5230\u53e6\u4e00\u5e45\u56fe\u7684\u8fd9\u4e2a\u70b9\u3002\n\n\u53e6\u4e00\u7bc7\u9898\u89e3\u7684dalao\u7ed9\u51fa\u4e86\u5f88\u591a\u9519\u8bef\u7684\u601d\u8def\u548chack\u6570\u636e\uff0c\u6211\u6765\u6c34\u4e00\u7bc7\u66f4\u6e05\u6670\u7684\u9898\u89e3\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u7528x,y\u4f5c\u4e3a\u5b83\u5728\u5355\u4e2a\u8ff7\u5bab\u4e2d\u7684\u5750\u6807\uff0cnx,ny\u4f5c\u4e3a\u5b83\u5728\u6574\u4e2a\u8ff7\u5bab\u4e2d\u7684\u5b9e\u9645\u5750\u6807\u3002\n\n\u666e\u901adfs\u4e2d\u7684vis\u6570\u7ec4\u4e00\u822c\u8bb0\u5f55\u4e86\u67d0\u4e2a\u70b9\u662f\u5426\u8d70\u8fc7\uff0c\u4f46\u5728\u8fd9\u9898\u4e2d\uff0c\u7531\u4e8e\u6211\u4eec\u4e0d\u597d\u63a7\u5236dfs\u8d70\u7684\u65b9\u5411\uff0c\u6709\u53ef\u80fd\u8d70\u56de\u4e00\u4e2a\u6807\u8bb0\u7684\u70b9\uff0c\u800c\u8ff7\u5bab\u53c8\u662f\u65e0\u9650\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u628avis\u52a0\u4e0a\u4e24\u4e2a\u7ef4\u5ea6\u6807\u8bb0\u4e0a\u6b21\u662f\u5728\u6574\u4e2a\u8ff7\u5bab\u7684\u54ea\u4e2a\u70b9\u8d70\u5230\u7684\uff0c\u5982\u679c\u518d\u6b21\u8d70\u5230\u8be5\u70b9\u4e14\u5f53\u524d\u5728\u6574\u4e2a\u8ff7\u5bab\u7684\u5750\u6807\u4e0d\u7b49\u4e8e\u4e0a\u6b21\u6765\u5230\u8be5\u70b9\u7684\u5750\u6807\uff0c\u5c31\u5224\u65ad\u80fd\u8d70\u51fa\u8ff7\u5bab\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int gox[4]={1,-1,0,0},goy[4]={0,0,1,-1};\nint n,m,vis[1505][1505][3];\nbool flag,a[1505][1505];\nvoid dfs(int x,int y,int nx,int ny){\n\tif(flag)return;\n\tif(vis[x][y][0]&&(vis[x][y][1]!=nx||vis[x][y][2]!=ny)){//\u5728\u5c0f\u8ff7\u5bab\u4e2d\u8d70\u8fc7\u8be5\u70b9\u4e14\u4e0a\u6b21\u8d70\u5230\u8be5\u70b9\u5750\u6807\u4e0d\u540c\uff0c\u5219\u4ee5\u8d70\u51fa\u8ff7\u5bab\n\t\tflag=1;\n\t\treturn;\n\t}\n\tvis[x][y][0]=1;vis[x][y][1]=nx;vis[x][y][2]=ny;//\u6807\u8bb0nx\u548cny\n\tfor(int i=0;i<4;i++){\n\t\tint p=(x+gox[i]+n)%n,q=(y+goy[i]+m)%m;//+n\u548c+m\u4fdd\u8bc1p,q\u4e0d\u4e3a\u8d1f\u6570\n\t\tint np=nx+gox[i],nq=ny+goy[i];\n\t\tif(!a[p][q]){\n\t\t\tif(!vis[p][q][0]||vis[p][q][1]!=np||vis[p][q][2]!=nq)//\u53ea\u8981\u6ca1\u53bb\u8fc7\u6216\u8005\u4e0a\u6b21\u5750\u6807\u4e0e\u8fd9\u6b21\u4e0d\u76f8\u7b49\u5c31\u8d70\n\t\t\tdfs(p,q,np,nq);\n\t\t}\n\t}\n}\nsigned main(){\n\tios::sync_with_stdio(false);//cincout\u4f18\u5316\n\tcin>>n>>m\n\tflag=0;\n\tmemset(a,0,sizeof(a));\n\tmemset(vis,0,sizeof(vis));\n\tint stx,sty;char ch;\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<m;j++){\n\t\t\tcin>>ch;\n\t\t\tif(ch=='#')a[i][j]=1;\n\t\t\tif(ch=='S')stx=i,sty=j;\n\t\t}\n\t}\n\tdfs(stx,sty,stx,sty);\n\tif(!flag)puts(\"No\");\n\telse puts(\"Yes\");\n\treturn 0;\n}\n```",
        "postTime": 1582515154,
        "uid": 191538,
        "name": "pidan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF196B \u3010Infinite Maze\u3011"
    }
]
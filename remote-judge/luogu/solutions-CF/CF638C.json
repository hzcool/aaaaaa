[
    {
        "content": "[**\u9898\u76ee\u4f20\u9001\u95e8**](https://www.luogu.com.cn/problem/CF638C)    \n\n\n------------\n\u8fd9\u662f\u4e00\u9053**\u8d2a\u5fc3**\u9898\u3002       \n- \u6c42\u51fa $k$ \u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8282\u70b9\u7684\u8fb9\u6bcf\u5929\u6700\u591a\u53ea\u80fd\u4fee\u4e00\u6761\uff0c\u6240\u4ee5\u7b54\u6848\u5c31\u662f\u5ea6\u6570\u6700\u5927\u7684\u8282\u70b9\u7684\u5ea6\u6570\uff08\u4e5f\u5c31\u662f\u8fb9\u6700\u591a\u7684\u8282\u70b9\u7684\u8fb9\u6570\uff09\u3002\n- \u91cd\u70b9\u5728\u4e8e\u600e\u4e48\u6c42\u65b9\u6848\u3002\n\t1. \u56e0\u4e3a\u9898\u76ee\u4e2d\u7684\u6811\u662f\u4e00\u9897\u65e0\u6839\u6811\uff0c\u6240\u4ee5\u6211\u4eec\u9ed8\u8ba4 $1$ \u53f7\u8282\u70b9\u4e3a\u4ed6\u7684\u6839\u8282\u70b9\u3002\n\t1. \u63a5\u4e0b\u6765\u6211\u4eec\u5f00 $k$ \u4e2a\u96c6\u5408\uff0c\u8868\u793a\u7b2c $i$ \u5929\u8981\u4fee\u7684\u8def\u7684\u7f16\u53f7\uff08\u8fd9\u91cc\u53ef\u4ee5\u7528 vector \u5b9e\u73b0\uff09\u3002      \n    1. ~~**\u5212\u91cd\u70b9**~~   \u7136\u540e\u5f00\u59cb\u4ece $1$ \u53f7\u8282\u70b9 dfs \uff0c\u6bcf\u8d70\u5230\u4e00\u4e2a\u8282\u70b9\uff0c\u5c31\u628a **\u5b83\u4e0e\u5b83\u7236\u4eb2\u4e4b\u95f4\u7684\u8def** \u4e0e **\u5b83\u4e0e\u6240\u6709\u513f\u5b50\u95f4\u7684\u8def** \u653e\u5728\u4e0d\u540c\u7684\u96c6\u5408\u4e2d\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u8fb9\u7684\u4fee\u7b51 **\u5fc5\u987b\u90fd\u6709\u8be5\u8282\u70b9\u53c2\u4e0e** \uff0c\u4f46\u662f\u7531\u4e8e\u8be5\u8282\u70b9 **\u4e00\u5929\u53ea\u80fd\u4fee\u4e00\u6761\u8def** \uff0c\u6240\u4ee5\u8981\u653e\u5728\u4e0d\u540c\u5929\u4fee\u3002\n    1. \u5c31\u8fd9\u6837\u904d\u5386\u5b8c\u6574\u68f5\u6811\uff0c\u7136\u540e\u6309\u8981\u6c42\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002      \n    \n###  Code:     \n```\n#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<bitset>\n#include<cmath>\n#include<queue>\n#include<map>\n#include<set>\n\nusing namespace std;\n\nint read()\n{\n\tint ans=0,f=1;\n\tchar c=getchar();\n\twhile(c>'9'||c<'0'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){ans=ans*10+c-'0';c=getchar();}\n\treturn ans*f;\n}\n\nconst int N=2e5+5;\nint n,du[N],head[N],tot,ans;\n//du \u7528\u6765\u7edf\u8ba1\u8282\u70b9\u5ea6\u6570 \n\nvector<int> agg[N];\n//\u7528 vector \u6a21\u62df\u96c6\u5408 \n\nstruct Edge\n{\n\tint v,ne;\n}e[N*2];\n//\u8fd9\u91cc\u8981\u5f00\u53cc\u500d\u7a7a\u95f4\uff0c\u56e0\u4e3a\u662f\u53cc\u5411\u8fb9 \n\ninline void add(int u,int v);\n//\u52a0\u8fb9\u51fd\u6570 \ninline void dfs(int u,int fa,int last);\n//dfs \u6c42\u65b9\u6848 \n\nint main()\n{\n\tn=read();\n\tfor(int i=1;i<n;++i)\n\t{\n\t\tint u=read(),v=read();\n\t\tdu[u]++,du[v]++;//\u7edf\u8ba1\u5ea6\u6570 \n\t\tadd(u,v);\n\t\tadd(v,u);\n\t\tans=max(ans,max(du[u],du[v]));\n\t\t//\u53d6\u5ea6\u6570\u6700\u5927\u503c\u4e3a\u7b54\u6848 \n\t}\n\tprintf(\"%d\\n\",ans);\n\t//\u5148\u8f93\u51fa\u7b54\u6848 \n\tdfs(1,-1,0);\n\t//\u7136\u540e dfs \u6c42\u65b9\u6848 \n\tfor(int i=1;i<=ans;++i)\n\t{\n\t\tprintf(\"%d \",agg[i].size());\n\t\t//\u5148\u8f93\u51fa\u8fd9\u4e00\u5929\u4fee\u7684\u8def\u7684\u6570\u91cf \n\t\tfor(int j=0;j<agg[i].size();++j)\n\t\t\tprintf(\"%d \",agg[i][j]);   //\u7136\u540e\u8f93\u51fa\u5177\u4f53\u7684\u8def\u7684\u7f16\u53f7 \n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n\ninline void add(int u,int v)\n{\n\te[++tot]=(Edge){v,head[u]};\n\thead[u]=tot;\n}\n\n//u \u8868\u793a\u5f53\u524d\u8282\u70b9\uff0cfa \u8868\u793a u \u8282\u70b9\u7684\u7236\u4eb2\uff0clast \u8868\u793a u \u4e0e fa \u95f4\u7684\u8def\u6240\u5728\u7684\u96c6\u5408\u7f16\u53f7 \ninline void dfs(int u,int fa,int last)\n{\n\tint j=1; // j \u8868\u793a\u5f53\u524d\u679a\u4e3e\u5230\u7684\u96c6\u5408\u6570 \n\tfor(int i=head[u];i;i=e[i].ne)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==fa) //\u5224\u65ad\u4e00\u4e0b\uff0c\u522b\u8d70\u56de\u5934\u8def \n\t\t\tcontinue;\n\t\tif(j==last)  //\u5982\u679c\u5f53\u524d\u96c6\u5408\u7f16\u53f7\u662f u \u4e0e\u5b83\u7236\u4eb2\u95f4\u7684\u8def\u6240\u5728\u96c6\u5408\u7684\u7f16\u53f7 \n\t\t\t++j;  //\u90a3\u4e48\u8fd9\u4e2a\u96c6\u5408\u4e0d\u80fd\u653e\u8fd9\u6761\u8fb9\uff0c\u53ca ++j; \n\t\tagg[j].push_back((i+1)/2);\n\t\t//\u7136\u540e\u8bb0\u5f55\u7b54\u6848\n\t\t//\u56e0\u4e3a\u4e0a\u9762\u5b58\u7684\u662f\u53cc\u5411\u8fb9\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u5b58 i\n\t\t//\u8003\u8651\u5230\u540c\u4e00\u6761\u8fb9\u5728\u6570\u7ec4\u4e2d\u7684\u4e0b\u8868\u662f x,x+1\n\t\t//\u6240\u4ee5\u901a\u8fc7 (x+1)/2 \u53ef\u4ee5\u8ba1\u7b97\u51fa\u8be5\u8fb9\u5728\u8bfb\u5165\u65f6\u7684\u7f16\u53f7\u3002 \n\t\tdfs(v,u,j);\n\t\t//\u7ee7\u7eed\u9012\u5f52\u8be5\u8282\u70b9 \n\t\t++j;\n\t\t//\u56e0\u4e3a\u8be5\u96c6\u5408\u5df2\u7ecf\u653e\u4e86\u8fb9\uff0c\u6240\u4ee5 j \u8981 +1 \n\t}\n\treturn;\n}\n```\n",
        "postTime": 1580474797,
        "uid": 157462,
        "name": "H6_6Q",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF638C \u3010Road Improvement\u3011"
    },
    {
        "content": "\u7b80\u5355\u9898\uff0c\u76f4\u63a5\u5927\u529b\u8d2a\u5fc3\u3002\n## \u601d\u8def\n\u6211\u4eec\u4ece\u70b9 $\\verb!1!$ \u5f00\u59cb $\\verb!dfs!$\uff0c\u6bcf\u6b21\u8bb0\u5f55\u4e0a\u6b21\u6765\u7684\u8fb9\u662f\u5728\u7b2c\u51e0\u6b21\u88ab\u4fee\u7406\u7684\u3002\u5047\u8bbe\u5f53\u524d\u70b9\u662f\u70b9 $\\verb!u!$\uff0c\u4e0a\u6b21\u6765\u7684\u8fb9\u662f\u5728\u7b2c $\\verb!x!$ \u6b21\u88ab\u4fee\u7406\u7684\u3002\u663e\u7136\u5bf9\u4e8e\u4e0e\u5b83\u8fde\u63a5\u7684\u70b9 $\\verb!v!$\uff0c\u80af\u5b9a\u4e0d\u80fd\u5728\u7b2c $\\verb!x!$ \u6b21\u88ab\u4fee\u7406\u3002\u90a3\u4e48\u95ee\u9898\u5c31\u5341\u5206\u7b80\u5355\u4e86\u3002\u6211\u4eec\u4ece\u7b2c $\\verb!1!$ \u6b21\u5f00\u59cb\u679a\u4e3e\uff0c\u9047\u5230 $\\verb!x!$ \u5c31\u8df3\u6389\u3002\u6700\u540e\u5f00\u4e00\u4e2a $\\verb!vector!$ \u8bb0\u5f55\u7b54\u6848\u5373\u53ef\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define rint register int\nint const N=2e5+10;\nint vis[N],num;\nvector<int>a[N],b[N],ans[N];\ninline void dfs(int x,int cnt){\n\tvis[x]=1;int cnti=0,la=cnt;\n\tif (cnt>1) cnt=0;\n\tfor (rint i=0;i<a[x].size();++i){\n\t\tif (vis[a[x][i]]) continue;\n\t\t++cnti;\n\t\tif (cnt+cnti==la) ++cnti;\n\t\tans[max(1LL,cnt+cnti)].push_back(b[x][i]);\n\t\tnum=max(num,cnt+cnti);\n\t\tdfs(a[x][i],cnt+cnti);\n\t}\n}\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0);\n\tint n;cin>>n;\n\tfor (rint i=1;i<n;++i){\n\t\tint u,v;cin>>u>>v;\n\t\ta[u].push_back(v),a[v].push_back(u);\n\t\tb[u].push_back(i),b[v].push_back(i);\n\t}\n    dfs(1,0);\n    cout<<num<<'\\n';\n    for (rint i=1;i<=num;++i){\n    \tcout<<ans[i].size()<<' ';\n    \tfor (auto j:ans[i]) cout<<j<<' ';\n    \tcout<<'\\n';\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1658987379,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "CF638C Road Improvement"
    }
]
[
    {
        "content": "## \u9898\u89e3-CF327D Block Tower\n\n### **\u9898\u76ee\u610f\u601d**\n\n\u5c31\u662f\u8ba9\u4f60\u60f3\u5c3d\u6240\u6709\u7684\u65b9\u6cd5\u8ba9\u5bb9\u91cf\u6700\u5927\uff0c\u6709$spj$\u7684\n\n### $Solution$\n\n* **\u8d2a\u5fc3+\u5e7f\u641c**\n\n\u6211\u4eec\u5148\u628a\u6240\u6709\u7684\u70b9\u90fd\u5efa\u6210\u7eff\u5854\uff0c\u7136\u540e\u5f00\u59cb$bfs$\u4e00\u904d,\u7136\u540e\u5462\u628a\u4e00\u4e2a\u4e00\u4e2a\u7eff\u5854\u9664\u6389\u53d8\u6210\u7ea2\u5854\u77e5\u9053\u6808\u5c3e\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u4e3a\u6b62\u3002\n\n### $Code$\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int maxstep=1000005+5;\nchar ch[505][505];\nint n,m,s,ans,vis[505][505],step[maxstep][3];\n\nconst int dx[]={0,0,-1,1};\nconst int dy[]={-1,1,0,0};\n\nstruct nood {\n\tint x,y;\n} q[260005];\n\ninline void bfs(int x,int y) {\n\tint head=1,tail=1;\n\tq[1].x=x,q[1].y=y;\n\tvis[q[1].x][q[1].y]=1;\n\twhile(head<=tail) {\n\t\tfor ( int i=0;i<=3;i++ ) {\n\t\t\tint tx=dx[i]+q[head].x;\n\t\t\tint ty=dy[i]+q[head].y;\n\t\t\tif(ch[tx][ty]=='.'&&vis[tx][ty]==0) {\n\t\t\t\tvis[tx][ty]=1;\n\t\t\t\ttail++;\n\t\t\t\tq[tail].x=tx;\n\t\t\t\tq[tail].y=ty;\n\t\t\t}\n\t\t}\n\t\thead++;\n\t}\n\tfor ( int i=tail;i>1;i-- ) {\n\t\tint ux=q[i].x,uy=q[i].y;\n\t\tch[ux][uy]='#';\n\t\tstep[++s][1]=2;\n\t\tstep[s][2]=ux;\n\t\tstep[s][3]=uy;\n\t\tstep[++s][1]=3;\n\t\tstep[s][2]=ux;\n\t\tstep[s][3]=uy;\n\t}\n}\n\nint main() {\n\tscanf(\"%d%d\",&n,&m);\n\tfor ( int i=1;i<=n;i++ ) scanf(\"%s\",ch[i]+1);\n\tfor ( int i=1;i<=n;i++ ) \n\t\tfor ( int j=1;j<=m;j++ ) \n\t\t\tif(ch[i][j]=='.') {\n\t\t\t\tstep[++s][1]=1;\n\t\t\t\tstep[s][2]=i;\n\t\t\t\tstep[s][3]=j;\n\t\t\t}\n\tfor ( int i=1;i<=n;i++ ) \n\t\tfor ( int j=1;j<=m;j++ ) \n\t\t\tif(ch[i][j]=='.') bfs(i,j);\n\tprintf(\"%d\\n\",s);\n\tfor ( int i=1;i<=s;i++ ) {\n\t\tif(step[i][1]==1) putchar('B');\n\t\telse \n\t\t\tif(step[i][1]==2) putchar('D');\n\t\t\telse putchar('R');\n\t\tprintf(\" %d %d\\n\",step[i][2],step[i][3]);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1564498927,
        "uid": 172612,
        "name": "\u7c73\u5947\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF327D \u3010Block Tower\u3011"
    },
    {
        "content": "\u7531\u4e8e\u7ea2\u623f\u5b50\u80fd\u5bb9\u7eb3\u7684\u4eba\u6bd4\u84dd\u623f\u5b50\u591a\uff0c\u6240\u4ee5\u663e\u7136\u8981\u5efa\u9020\u5c3d\u53ef\u80fd\u591a\u7684\u7ea2\u623f\u5b50\u3002\u4f46\u8fd9\u6837\u6700\u591a\u4e5f\u53ea\u80fd\u505a\u5230\u7ea2\u84dd\u623f\u5b50\u4ea4\u9519\u5206\u5e03\uff0c\u90a3\u8be5\u600e\u4e48\u529e\u5462\uff1f\n\n\u6ce8\u610f\u9898\u76ee\u4e2d\u7684\u4e00\u53e5\u8bdd\u3002\n\n>\u62c6\u9664\u84dd\u623f\u5b50\u4e0d\u5f71\u54cd\u5df2\u7ecf\u5efa\u9020\u7684\u7ea2\u623f\u5b50\u3002\n\n\u518d\u52a0\u4e0a\u9898\u76ee\u6ca1\u6709\u9650\u5236\u64cd\u4f5c\u6b21\u6570\uff0c\u90a3\u6211\u4eec\u5c31\u6709\u4e2a\u5927\u80c6\u7684\u60f3\u6cd5\uff1a\u5148\u628a\u6bcf\u4e2a\u8fde\u901a\u5757\u5185\u5168\u90e8\u5efa\u4e0a\u84dd\u623f\u5b50\uff0c\u7136\u540e\u4ece\u6700\u5916\u8fb9\u4f9d\u6b21\u628a\u84dd\u623f\u5b50\u62c6\u6389\uff0c\u6539\u6210\u7ea2\u623f\u5b50\uff0c\u76f4\u5230\u8fde\u901a\u5757\u4e2d\u53ea\u5b58\u5728\u4e00\u4e2a\u84dd\u623f\u5b50\u3002\n\n\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u4ece\u5916\u5f80\u5185\u62c6\uff0c\u662f\u56e0\u4e3a\u5982\u679c\u5148\u62c6\u4e86\u91cc\u9762\u7684\uff0c\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e2a\u4f4d\u7f6e\u56db\u5468\u4e0d\u5b58\u5728\u84dd\u623f\u5b50\uff0c\u4ece\u800c\u65e0\u6cd5\u5efa\u9020\u7ea2\u623f\u5b50\u3002\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\n#define endl '\\n'\n#define fir first\n#define sec second\n#define ri register\n#define mp make_pair\n#define pb push_back\n#define int long long\nconst int N=521,dx[4]={0,0,-1,1},dy[4]={-1,1,0,0};\nint n,m;\nchar a[N][N];\nbool vis[N][N];\nvector<pair<char,pair<int,int> > > v;//\u8bb0\u5f55\u7b54\u6848\ninline void Dfs(int x,int y)\n{\n\tvis[x][y]=1;v.pb(mp('B',mp(x,y)));\n\tfor(ri int i=0;i<4;++i)\n\t{\n\t\tri int tx=x+dx[i],ty=y+dy[i];\n\t\tif(tx>0&&ty>0&&tx<=n&&ty<=n&&!vis[tx][ty]&&a[tx][ty]=='.')\n\t\t\tDfs(tx,ty);\n\t}\n}\ninline void Dfs2(int x,int y)\n{\n\tfor(ri int i=0;i<4;++i)\n\t{\n\t\tri int tx=x+dx[i],ty=y+dy[i];\n\t\tif(tx>0&&ty>0&&tx<=n&&ty<=m&&!vis[tx][ty]&&a[tx][ty]=='.')\n\t\t\tvis[tx][ty]=1,Dfs2(tx,ty),v.pb(mp('D',mp(tx,ty))),v.pb(mp('R',mp(tx,ty)));\n\t}\n}\nsigned main()\n{\n\tfastcin;cin>>n>>m;\n\tfor(ri int i=1;i<=n;++i)\n\t\tfor(ri int j=1;j<=m;++j)\n\t\t\tcin>>a[i][j];\n\tfor(ri int i=1;i<=n;++i)\n\t\tfor(ri int j=1;j<=m;++j)\n\t\t\tif(!vis[i][j]&&a[i][j]=='.') Dfs(i,j);//\u5148\u5168\u90e8\u5efa\u6210\u84dd\u623f\u5b50\n\treset(vis,0);\n\tfor(ri int i=1;i<=n;++i)\n\t\tfor(ri int j=1;j<=m;++j)\n\t\t\tif(!vis[i][j]&&a[i][j]=='.') vis[i][j]=1,Dfs2(i,j);//\u628a\u84dd\u623f\u5b50\u62c6\u4e86\u6539\u6210\u7ea2\u623f\u5b50\n\tcout<<v.size()<<endl;\n\tfor(ri int i=0;i<v.size();++i)\n\t\tcout<<v[i].fir<<\" \"<<v[i].sec.fir<<\" \"<<v[i].sec.sec<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1631944960,
        "uid": 329672,
        "name": "Ninelife_Cat",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF327D \u3010Block Tower\u3011"
    },
    {
        "content": "### \u89e3\u9898\u601d\u8def\uff1a\n\n\u8fd9\u9053\u9898\u4e0d\u8981\u6c42\u64cd\u4f5c\u6570\u6700\u5c0f\uff0c\u90a3\u4e48\u5c31\u8003\u8651\u5982\u4f55\u8ba9\u64cd\u4f5c\u6700\u65e0\u8111\u3002\n\n\u9996\u5148\u5c06\u6240\u6709\u7684\u7a7a\u5730\u5168\u90fd\u53d8\u6210\u84dd\u8272\u5efa\u7b51\uff0c\u7136\u540e\u5c1d\u8bd5\u5c06\u4e00\u5b9a\u91cf\u7684\u84dd\u8272\u5efa\u7b51\u53d8\u6210\u7ea2\u8272\u5efa\u7b51\uff0c\u8fd9\u91cc\u8003\u8651\u4ece BFS \u4e4b\u540e\u53cd\u5411\u64cd\u4f5c\uff0c\u5c06\u84dd\u8272\u62c6\u6389\u6539\u5efa\u7ea2\u8272\u3002\n\n\u8fd9\u6837\u7684\u4e00\u4e2a\u505a\u6cd5\u663e\u7136\u662f\u53ef\u884c\u7684\uff0c\u56e0\u4e3a\u5728 BFS \u4e2d\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u7531\u4e4b\u524d\u7684\u67d0\u4e00\u4e2a\u8282\u70b9\u62d3\u5c55\u800c\u6765\uff0c\u800c\u8fd9\u6837\u7684\u4e00\u4e2a\u8282\u70b9\u4e5f\u4e00\u5b9a\u4e0d\u4f1a\u5728\u5176\u540e\u7ee7\u8282\u70b9\u5b8c\u6210\u64cd\u4f5c\u4e4b\u524d\u88ab\u66f4\u6539\u3002\n\n\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u6837\u7684\u64cd\u4f5c\u4e5f\u4e00\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u56e0\u4e3a\u5728\u8fd9\u6837\u7684\u64cd\u4f5c\u7ed3\u675f\u4e4b\u540e\uff0c\u6bcf\u4e00\u4e2a\u8054\u901a\u5757\u90fd\u5269\u4e0b\u4e14\u4ec5\u5269\u4e0b\u4e86\u4e00\u4e2a\u84dd\u8272\u5efa\u7b51\uff0c\u800c\u8fd9\u6837\u7684\u4e00\u4e2a\u84dd\u8272\u5efa\u7b51\u662f\u4e0d\u53ef\u907f\u514d\u7684\uff0c\u6240\u4ee5\u4e00\u5b9a\u6700\u4f18\u3002\n\n---\n### \u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\nusing namespace std;\nstruct node{\n\tint x,y;\n\tchar c;\n}ans[10000005];;\nint n,m,a[505][505],cnt;\nint dx[10]={0,0,1,-1};\nint dy[10]={1,-1,0,0};\nchar get(){\n\tchar c=getchar();\n\twhile(c=='\\n'||c==' '||c=='\\r')c=getchar();\n\treturn c;\n}\nvoid work(char c,int x,int y){\n\tans[++cnt].c=c;\n\tans[cnt].x=x;\n\tans[cnt].y=y;\n}\nvoid dfs(int x,int y,int fi){\n//\tprintf(\"B %d %d\\n\",x,y);\n\twork('B',x,y);\n\ta[x][y]=0;\n\tfor(int i=0;i<=3;i++)\n\tif(a[x+dx[i]][y+dy[i]]==1)\n\tdfs(x+dx[i],y+dy[i],0);\n\tif(fi==0){\n\t\twork('D',x,y);\n\t\twork('R',x,y);\n//\t\tprintf(\"D %d %d\\n\",x,y);\n//\t\tprintf(\"R %d %d\\n\",x,y);\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tif(get()=='.')a[i][j]=1;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tif(a[i][j]==1)dfs(i,j,1);\n\tprintf(\"%d\\n\",cnt);\n\tfor(int i=1;i<=cnt;i++)\n\tprintf(\"%c %d %d\\n\",ans[i].c,ans[i].x,ans[i].y);\n\treturn 0;\n}\n```\n",
        "postTime": 1629815003,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF327D Block Tower"
    }
]
[
    {
        "content": "\n## C1(easy version)\n\n#### \u9898\u610f\n\n\u5b9a\u4e49 $sum(l,r) = \\sum\\limits_{i=l}^r a_i$\uff0c$xor(l,r) = \\bigoplus_{i=l}^r a_i$\uff0c$f(l,r) = sum(l,r) - xor(l,r)$\u3002\n\nq \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u7ed9\u51fa\u4e00\u7ec4 $L,R$\uff0c\u6c42\u51fa\u4e00\u7ec4 $ L \\leq l \\leq r\\leq R $\uff0c\u4f7f\u5f97 $f(l,r)$ \u6700\u5927\u4e14 $r-l+1$ \u6700\u5c0f\u3002\n\n\u4fdd\u8bc1 $q=1,L_1=1,R_1=n$\u3002 \n\n$t$ \u7ec4\u6570\u636e\u3002\n\n#### \u601d\u8def\n\n\u66b4\u529b\u5f88\u597d\u60f3\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u8be2\u95ee\uff0c\u66b4\u529b\u679a\u4e3e $l$ \u548c $r$ \u5373\u53ef\u3002\n\n\u8003\u8651\u6b63\u89e3\u3002\n\n\u8003\u8651 $f$ \u7684\u503c\u662f\u600e\u4e48\u53d8\u5316\u7684\u3002\n\n\u663e\u7136 $\\forall x,y$\uff0c\u6709 $x+y \\geq x \\oplus y$ \uff0c\u90a3\u4e48\u6709 $xor(l-1,r) - xor(l,r) \\leq a_{l-1} ,sum(l-1,r) - sum(l,r) = a_{l-1} $\uff0c\u6240\u4ee5 $ f(l-1,r) = sum(l-1,r) - xor(l-1,r) \\geq sum(l,r) + a_{l-1} - xor(l,r) -a_{l-1} $\uff0c\u6240\u4ee5 $ f(l-1,r) \\geq f(l,r) $\uff0c\u90a3\u4e48\u5f53 $ r $ \u786e\u5b9a\u65f6\uff0c$ f $ \u7684\u503c\u5b58\u5728\u5355\u8c03\u6027\uff0c\u5176\u56fe\u50cf\u753b\u51fa\u6765\u5c31\u957f\u6210\u4e0b\u9762\u8fd9\u6837\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ege1cee4.png)\n\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $r$ \u7684\u7b54\u6848\u5c31\u662f\u56fe\u4e2d $A$ \u70b9\u3002\u56e0\u4e3a\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u53ef\u4ee5\u4e8c\u5206\u6c42\u5f97\u3002\u90a3\u5c31\u53ea\u9700\u679a\u4e3e $r$ \u5728\u6bd4\u8f83\u5c31\u884c\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\u3002\n\n\u4ee3\u7801\u653e\u6700\u540e\u4e86\u3002\n\n## C2(hard version)\n\n#### \u9898\u610f \n\n\u5c06 C1 \u7684\u4fdd\u8bc1 $q=1$ \u6539\u4e3a\u4e86\u4fdd\u8bc1 $q=n$\u3002\n\n#### \u601d\u8def\n\n\u90a3\u4e48\u539f\u672c\u7684\u4e8c\u5206\u5c31\u4e0d\u884c\u4e86\uff0c\u7531\u4e8e\u5355\u8c03\u6027\u4f9d\u65e7\u5b58\u5728\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6362\u4e00\u79cd\u601d\u8def\uff0c\u8003\u8651\u4ec0\u4e48\u65f6\u5019 $f$ \u7684\u503c\u4f1a\u53d8\u5c0f\u3002\n\n\u82e5\u5f53\u524d\u5f02\u6216\u548c\u4e2d $x$ \u7684\u6240\u67091\u4f4d\u90fd\u4e3a\u96f6\uff0c\u5219 $x$ \u7684\u503c\u4e00\u5b9a\u4f1a\u589e\u5927\u5f02\u6216\u548c\uff0c\u90a3\u4e48 $f$ \u7684\u503c\u5c31\u53d8\u5c0f\u4e86\u3002\n\n\u5229\u7528\u8fd9\u4e2a\u6027\u8d28\u53ef\u4ee5\u5c06\u539f\u672c\u7684\u66b4\u529b\u4f18\u5316\u5f88\u591a\uff0c\u8003\u8651\u4e00\u4e0b\u4f18\u5316\u540e\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n\u81f3\u591a\u679a\u4e3e $\\log V$ \u4e2a\u6570 $f$ \u7684\u503c\u5c31\u4f1a\u51cf\u5c0f\uff08$V$ \u662f\u503c\u57df\uff09\uff0c\u56e0\u4e3a\u628a $V$ \u7684\u4e8c\u8fdb\u5236\u4e3a\u5168\u6bcf\u679a\u4e00\u904d\u4e00\u5b9a\u4f1a\u9047\u5230\u4e00\u4e2a\u6570\u4f7f\u5f97 $f$ \u51cf\u5c0f\u3002\n\n\u90a3\u4e48 $l$ \u81f3\u591a $\\log V$ \u4e2a\uff0c$r$ \u81f3\u591a $\\log V$ \u4e2a\uff0c\u52a0\u4e0a $q$ \u6b21\u8be2\u95ee\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f $O(n \\log^2 V)$\uff0c\u53ef\u4ee5\u8fc7\u6389\u8fd9\u9898\u3002\n\n\u4f46\u5176\u5b9e\u8fd8\u6709\u4e00\u4e2a\u5751\uff0c\u5c31\u662f\u5f53 $a$ \u6570\u7ec4\u4e2d\u6709 $0$ \u65f6\uff0c\u4f1a\u53d8\u6210\u6050\u6016\u7684 $O(n^3)$\uff0c\u4f46 $0$ \u663e\u7136\u4e0d\u4f1a\u5f71\u54cd\u7b54\u6848\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0d\u7406\u5b83\uff0c\u90a3\u518d\u641e\u4e2a\u94fe\u8868\u5c31\u884c\u4e86\u3002\n\n## \u4ee3\u7801\n\ntalking is cheap,show me your code.\n\n### C1\n\n```cpp\n#include <bits/stdc++.h>\n#define il inline\n#define int long long\nusing namespace std;\nconst int N=1e5+5,inf=1e15+7;\nint n,a[N],sum[N],xr[N],ans,ansl,ansr,l,r;\nil int calc(int l,int r) {return sum[r]-sum[l-1]-(xr[r]^xr[l-1]);}\nil void work(){\n\tscanf(\"%lld%*lld\",&n);\n\tfor(int i=1;i<=n;++i) scanf(\"%lld\",a+i),sum[i]=sum[i-1]+a[i],xr[i]=(xr[i-1]^a[i]);\n\tscanf(\"%*lld%*lld\"),ans=calc(1,n),ansl=l=1,ansr=r=n;\n    int mn=inf;\n    for (int i=l;i<=r;++i){\n        int ll=i,rr=r,pos=r;\n        while(ll<=rr){\n            int mid=(ll+rr)>>1;\n            if(calc(i,mid)<ans) ll=mid+1;\n            else rr=mid-1,pos=mid;\n        }\n        if(calc(i,pos)<ans) ++pos;\n        if(pos==r+1) continue;\n        if(mn>pos-i+1) mn=pos-i+1,ansl=i,ansr=pos;\n    }\n    printf(\"%lld %lld\\n\",ansl,ansr);\n}\nsigned main(){\n\tint T;\n\tscanf(\"%lld\",&T);\n\twhile(T--) work();\n\treturn 0;\n}\n```\n\n### C2\n\n```cpp\n#include <bits/stdc++.h>\n#define il inline\nusing namespace std;\nconst int N=1e5+5;\nil int read(){\n\tint x(0);\n\tchar ch(getchar());\n\twhile(!isdigit(ch)) ch=getchar();\n\twhile(isdigit(ch)) x=(x<<3)+(x<<1)+(ch&15),ch=getchar();\n\treturn x;\n}\nint a[N],sum[N],xr[N],nxt[N],lst[N],ans,ansl,ansr;\nil void work(){\n\tint L,R,ln0=0;\n\tint n=read(),Q=read();\n\tfor(int i=1;i<=n;++i){\n\t\ta[i]=read(),sum[i]=sum[i-1]+a[i],xr[i]=(xr[i-1]^a[i]);\n\t\tif(a[i]) lst[i]=ln0,nxt[ln0]=i,ln0=i;\n\t\telse lst[i]=ln0;\n\t}\n\tnxt[n]=ln0=n+1;\n\tfor(int i=n;i;--i){\n\t\tif(a[i]) ln0=i;\n\t\telse nxt[i]=ln0;\n\t}\n\twhile(Q--){\n\t\tint L=read(),R=read(),ans=(xr[R]^xr[L-1]),ansl=L,ansr=R;\n\t\tif(L==R){\n\t\t\tprintf(\"%d %d\\n\",L,L);\n\t\t\tcontinue;\n\t\t}\n\t\tif(nxt[L]>R&&!a[L]){\n\t\t\tprintf(\"%d %d\\n\",L,L);\n\t\t\tcontinue;\n\t\t}\n\t\tif(!a[L]) L=nxt[L]; if(!a[R]) R=lst[R];\n\t\tfor(int l=L;l<=R;l=nxt[l]){\n\t\t\tint r=R,now=ans;\n\t\t\twhile(l<=lst[r]&&(now|a[r])==now) now^=a[r],r=lst[r];\n\t\t\tif(r-l<ansr-ansl) ansl=l,ansr=r;\n\t\t\tif((ans|a[l])>ans) break;\n\t\t\tans^=a[l];\n\t\t}\n\t\tprintf(\"%d %d\\n\",ansl,ansr);\n\t}\n}\nint main(){\n\tint T;\n\tscanf(\"%d\",&T);\n\twhile(T--) work();\n\treturn 0;\n}\n```\n\n\u4e0d\u4f1a\u6709\u4eba\u4e0d\u77e5\u9053 C2 \u7684\u4ee3\u7801\u53ef\u4ee5\u628a C1 \u8fc7\u4e86\u5427\u3002\n\n\u5199\u5b8c\u529bqwq\u3002\n\n",
        "postTime": 1666609783,
        "uid": 429403,
        "name": "c202201",
        "ccfLevel": 5,
        "title": "CF1732C"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u4f60\u4e00\u4e2a $N (1 \\le N \\le 10^5)$ \u7684\u975e\u8d1f\u6570\u7ec4 $a$\u3002\u5b9a\u4e49 $sum_{i,j}= a_i + a_{i+1}+\\cdots +a_j,xor_{i,j}=a_i \\oplus a_{i+1} \\oplus \\cdots \\oplus a_j$\u3002 \u5b9a\u4e49 $f(i,j)= sum_{i,j}-xor_{i,j}$\u3002\u8fdb\u884c $1$ \u6b21\u8be2\u95ee\uff0c\u7ed9\u5b9a $l=1,r=N$\uff0c\u6c42\u533a\u95f4 $[l,r]$ \u7684\u6240\u6709\u5b50\u533a\u95f4 $[l_1,r_1]$ \u4e2d\uff0c$f(l_1,r_1)$ \u6700\u5927\u7684\u524d\u63d0\u4e0b\u957f\u5ea6\u6700\u77ed\u7684\u90a3\u4e00\u4e2a\u3002\n\n## \u5206\u6790\n\n\u53d1\u73b0\u5bf9\u4e8e\u533a\u95f4 $[l,r]$\uff0c$f(l,r+1) \\ge f(l,r)$\u3002\n\n**\u8bc1\u660e**\n\n$f(l,r+1)-f(l,r)$\n\n$=sum_{l,r+1}-xor{l,r+1}-sum_{l,r}+xor_{l,r}$\n\n$=a_{r+1}- xor_{l,r+1}+ xor_{l,r}$\u3002\n\n\u56e0\u4e3a $ xor_{l,r+1}- xor_{l,r} \\le a_{r+1}$ (\u56e0\u4e3a\u5f02\u6216\u662f\u4e0d\u8fdb\u4f4d\u52a0\u6cd5)\n\n\u6240\u4ee5\u5f97\u5230 $f(l,r+1)-f(l,r) \\ge 0$\u3002\u540c\u7406\u53ef\u8bc1 $f(l-1,r) \\ge  f(l,r)$\u3002\n\n\u8fd9\u8bf4\u660e\uff1a**\u7b54\u6848\u533a\u95f4\u7684 $f$ \u503c\u4e00\u5b9a\u4e0e\u8be2\u95ee\u533a\u95f4\u7684 $f$ \u503c\u76f8\u7b49\uff1b\u5f53\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u56fa\u5b9a\uff0c\u5f53\u5b83\u7684\u53f3\u7aef\u70b9\u5411\u53f3\u79fb\u52a8\u65f6\uff0c$f$ \u503c\u662f\u5355\u8c03\u4e0d\u51cf\u7684**\u3002\n\n\u8fd9\u542f\u793a\u6211\u4eec\u8fdb\u884c\u4e8c\u5206\u3002\n\n## \u5177\u4f53\u505a\u6cd5\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee $(l,r)$\uff0c\n\n\u9996\u5148\u6211\u4eec\u6c42\u51fa $goal=f(l,r)$\u3002\u8fd0\u7528\u524d\u7f00\u548c\u548c\u524d\u7f00\u5f02\u6216\u53ef\u4ee5 $O(1)$ \u6c42 $f$ \u503c\u3002\n\n\u5b9a\u4e49 $ansl=l,ansr=r$\uff0c\u56e0\u4e3a $[l,r]$ \u4e00\u5b9a\u662f\u4e00\u4e2a\u6ee1\u8db3\u8981\u6c42\u7684\u5b50\u533a\u95f4\u3002\n\n\u679a\u4e3e\u7b54\u6848\u533a\u95f4\u7684\u5de6\u7aef\u70b9 $l_1$ (\u4ee3\u7801\u4e2d\u547d\u540d\u4e3a $i$)\u3002\u5bf9\u4e8e\u6bcf\u4e2a $i$\uff0c\u4e8c\u5206\u7b54\u6848\u533a\u95f4\u7684\u53f3\u7aef\u70b9 $j( i \\le j \\le r)$\u3002\u5982\u679c $j$ \u6ee1\u8db3 $f(i,j)=goal$\uff0c\u5219\u8be5\u533a\u95f4\u7b26\u5408\u8981\u6c42\uff0c\u7f29\u5c0f $j$\uff1b \u53cd\u4e4b\u589e\u52a0 $j$\u3002\u5982\u679c\u5b58\u5728\u7b26\u5408\u8981\u6c42\u7684 $j$,\u5219\u5bf9 $ansl$ \u548c $ansr$ \u8fdb\u884c\u66f4\u65b0\u3002\n\n## \u8003\u573a\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int MAXN=1e5+5;\nint Read()\n{\n\t//\u5feb\u8bfb\u7701\u7565\n}\nint T,N,Q;\nlong long psum[MAXN],pxor[MAXN];\nint a[MAXN];\nlong long Func(int l,int r)\n{\n\treturn psum[r]-psum[l-1]-(pxor[r]^pxor[l-1]);\n}//\u7ed9\u533a\u95f4\u6c42f\nsigned main()\n{\n\tT=Read();\n\twhile(T--)\n\t{\n\t\tN=Read(),Q=Read();\n\t\tfor(int i=1;i<=N;i++) a[i]=Read();\n\t\tfor(int i=1;i<=N;i++)\n\t\t{\n\t\t\tpsum[i]=psum[i-1]+a[i];\n\t\t\tpxor[i]=pxor[i-1]^a[i];\n\t\t}\n\t\tint l=Read(),r=Read();\n\t\tlong long goal=Func(l,r);\n\t\tint ansl=l,ansr=r;\n\t\tfor(int i=l;i<=r;i++)\n\t\t{\n\t\t\tint lb=i,rb=r;\n\t\t\tint pos=0;//\u8bb0\u5f55\u6700\u4f18\u7684 mid\n\t\t\twhile(lb<=rb)\n\t\t\t{\n\t\t\t\tint mid=(lb+rb)/2;\n\t\t\t\tif(Func(lb,mid)!=goal) lb=mid+1;\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\trb=mid-1;\n\t\t\t\t\tpos=mid;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(pos==0) continue;//\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u53f3\u7aef\u70b9\n\t\t\tif(ansr-ansl+1>pos-i+1) ansr=pos,ansl=i;\n\t\t}\n\t\tprintf(\"%lld %lld\\n\",ansl,ansr);\n\t}\n\treturn 0;\n}\n```\n\n\u8003\u573a\u4ee3\u7801**\u65e0\u6cd5\u901a\u8fc7**\u8fd9\u9053\u9898\u3002\u4f46\u5982\u679c\u4f60\u8ba4\u771f\u9605\u8bfb\u4e86\u8fd9\u7bc7\u9898\u89e3\uff0c\u4f60\u53ef\u4ee5\u627e\u5230\u8be5\u4ee3\u7801\u7684**\u4e00\u5904\u9519\u8bef**\u3002\uff08\u4f46\u6bd4\u8d5b\u671f\u95f4\u6211\u5e76\u6ca1\u6709\u627e\u5230qwq\uff09\n\n**\u9519\u8bef\uff1a** \u4e8c\u5206\u65f6\uff0c\u5019\u9009\u7684\u7b54\u6848\u533a\u95f4\u662f $[i,mid]$\u3002 \u4ee3\u7801\u4e2d\u5199\u6210\u4e86 $[lb,mid]$\u3002~~\u975e\u5e38\u667a\u969c\u554a~~ \u5c06 `Func(lb,mid)` \u6539\u4e3a `Func(i,mid)` \u5373\u53ef\u901a\u8fc7\u672c\u9898\u3002\n\n\n\n",
        "postTime": 1671193708,
        "uid": 378706,
        "name": "MoyunAllgorithm",
        "ccfLevel": 0,
        "title": "CF1732C1-Sheikh(Easy) \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\u7ed9\u4f60 $1$ \u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $\\{a_i\\}$\uff0c\u6211\u4eec\u5b9a\u4e49 $1$ \u4e2a\u533a\u95f4 $a_{l\\cdots r}$ \u7684\u4ef7\u503c\u4e3a $\\sum_{i=l}^{r}a_i-\\bigoplus_{i=l}^{r}a_i$\u3002\n\n\u4f60\u9700\u8981\u9009\u62e9 $1$ \u4e2a\u533a\u95f4 $a_{l\\cdots r}$\uff0c\u6700\u5927\u5316\u4ef7\u503c\u7684\u540c\u65f6\uff0c\u6700\u5c0f\u5316\u533a\u95f4\u957f\u5ea6\u3002\n\n\u5176\u4e2d $\\oplus$ \u4ee3\u8868\u6309\u4f4d\u5f02\u6216\u8fd0\u7b97\u3002\n\n## \u601d\u8def\n\u7531\u4e8e\u5f02\u6216\u53ef\u4ee5\u770b\u4f5c $2$ \u8fdb\u5236\u4e0d\u8fdb\u4f4d\u52a0\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5f53\u533a\u95f4\u957f\u5ea6\u589e\u52a0 $1$ \u65f6\uff0c\u5176\u4ef7\u503c\u5fc5\u7136\u5355\u8c03\u4e0d\u51cf\u3002\n\n\u90a3\u4e48\u6700\u540e\u7684\u6700\u5927\u4ef7\u503c\u5fc5\u7136\u662f $a_{1\\cdots n}$ \u7684\u4ef7\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6700\u5c0f\u5316\u533a\u95f4\u957f\u5ea6\u3002\n\n\u53ea\u6709 $1$ \u7ec4\u8be2\u95ee\uff0c\u53ef\u4ee5\u60f3\u5230\u679a\u4e3e\u6700\u7ec8\u7684\u533a\u95f4\u3002\u800c\u7b54\u6848\u5177\u6709\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u533a\u95f4\u5de6\u7aef\u70b9\uff0c\u4e8c\u5206\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u6bcf\u6b21 `check` \u68c0\u67e5\u5f53\u524d\u533a\u95f4\u7684\u4ef7\u503c\u662f\u5426\u4ecd\u7136\u7b49\u4e8e $a_{1\\cdots n}$ \u7684\u4ef7\u503c\u5373\u53ef\u3002\n\n\u9884\u5904\u7406\u524d\u7f00\u548c\u5373\u53ef $O(1)$ \u8fdb\u884c\u6bcf\u6b21\u7684 `check`\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n## \u4ee3\u7801\n```cpp\n#include <cstdint>\n#include <iostream>\n\nusing i64 = int64_t;\nconstexpr size_t N = 1 << 20;\n\nint T, n, q, L, R;\ni64 ss[N], sx[N], a[N];\n\nbool check(int l, int r, i64 ans) { return (ss[r] - ss[l - 1]) - (sx[r] ^ sx[l - 1]) == ans; }\n\nint main() {\n    std::ios::sync_with_stdio(false);\n    std::cin >> T;\n    while (T--) {\n        std::cin >> n >> q;\n        for (int i = 1; i <= n; i++) std::cin >> a[i];\n        for (int i = 1; i <= n; i++) ss[i] = ss[i - 1] + a[i], sx[i] = sx[i - 1] ^ a[i];\n        std::cin >> L >> R;\n        i64 ans = (ss[R] - ss[L - 1]) - (sx[R] ^ sx[L - 1]);\n        int cl = L, cr = R;\n        for (int i = L; i <= R; i++) {\n            int l = i, r = R, res = 0;\n            while (l <= r) {\n                int mid = (l + r) / 2;\n                if (check(i, mid, ans)) r = mid - 1, res = mid;\n                else l = mid + 1;\n            }\n            if (res == 0) continue;\n            if (cr - cl + 1 > res - i + 1) cl = i, cr = res;\n        }\n        std::cout << cl << \" \" << cr << \"\\n\";\n    }\n    return 0;\n}\n```",
        "postTime": 1666779950,
        "uid": 329316,
        "name": "kernel_panic",
        "ccfLevel": 0,
        "title": "CF1732C1 \u9898\u89e3"
    },
    {
        "content": "## Preface\n\n\u8fd9\u4e2a\u611f\u89c9\u662f\u6ca1\u6709 $1800$ \u7684\u554a\u3002\n\n\u9898\u89e3\u533a\u5168\u662f $\\mathcal O(n\\log n)$\uff0c\u4f46\u662f\u663e\u800c\u6613\u89c1\u7684\u53ef\u4ee5 $\\mathcal O(n)$\u3002\n\n## Solution\n\n\u9996\u5148\u8003\u8651\u8fd9\u4e2a\u5b9a\u4e49\u662f\u4e2a\u5565\u3002\n\n\u5047\u5982\u4f60\u5df2\u7ecf\u8ba1\u7b97\u51fa\u4e86 $f(l,r)$\uff0c\u7136\u540e\u5f80\u91cc\u9762\u52a0\u4e86\u4e00\u4e2a\u6570 $2^k$\u3002\u8fd9\u4e2a\u65f6\u5019 $\\Delta \\text{sum}(l,r)=2^k$\uff0c$\\Delta\\text{xor}(l,r)$ \u5219\u8981\u6839\u636e\u589e\u52a0\u7684\u65f6\u5019\u8fd9\u4e00\u4f4d\u4e0a\u51fa\u73b0\u7684\u6b21\u6570\u662f\u5947\u6570\u8fd8\u662f\u5076\u6570\u5224\u65ad\u3002\u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c$\\Delta\\text{xor}(l,r)=\\pm 2^k\\leq 2^k$\uff0c\u6240\u4ee5\u4e0d\u96be\u8bc1\u660e $\\Delta f(l,r)\\ge 0$\uff0c\u5373\u5355\u8c03\u6027\u3002\n\n\u73b0\u5728\u52a0\u5165\u7684\u6570\u4e0d\u4e00\u5b9a\u662f $2^k$\uff0c\u4f46\u662f\u52a0\u5165 $x=\\sum\\limits_{i\\in a}2^i$ \u53ef\u4ee5\u770b\u6210\u628a $2^{a_0},2^{a_1}\\dots$ \u4f9d\u6b21\u52a0\u5165\u6570\u5217\uff0c\u5355\u8c03\u6027\u81ea\u7136\u4e0d\u53d8\u3002\n\n\u6839\u636e\u8fd9\u4e2a\u6027\u8d28\u4e0d\u96be\u60f3\u5230\u4e8c\u5206\u3002\u4f46\u662f\u4e8c\u5206\u672c\u8d28\u4e0a\u4e5f\u662f\u6307\u9488\u7684\u79fb\u52a8\uff0c\u6240\u4ee5\u4e8b\u5b9e\u4e0a\u8fdb\u884c\u4e00\u4e2a\u53cc\u6307\u9488\u53ef\u4ee5\u628a\u590d\u6742\u5ea6\u964d\u4f4e\u5230 $\\mathcal O(n)$\u3002\n\n## Code\n\n\u8bc1\u660e\u5df2\u6709\u7684\u9898\u89e3\u5df2\u7ecf\u8bb2\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u4e3b\u8981\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u8fd9\u4e2a\u4e11\u964b\u7684\u53cc\u6307\u9488\u3002\n\n```cpp\n#define sum(l,r) (s[r] - s[l - 1])\n#define xrm(l,r) (x[r] ^ x[l - 1])\n#define f(l,r) (sum(l,r) - xrm(l,r))\nsigned solve() {\n    int n, q;\n    cin >> n >> q;\n    vector<int> a(n + 1);\n    for(int i = 1; i <= n; i++) cin >> a[i];\n    cin >> q >> q;\n    vector<int> s(n + 1), x(n + 1);\n    for(int i = 1; i <= n; i++) s[i] = s[i - 1] + a[i], x[i] = x[i - 1] ^ a[i];\n    int j = 1, res = f(1, n);\n    int maxl = 1, maxr = n;\n    for(int i = 1; i <= n; i++) {\n        if(j < i) j = i;\n        while(j <= n && f(i, j) < res) j++;\n        if(j > n) break;\n        if(j - i < maxr - maxl) maxl = i, maxr = j;\n    }\n    cout << maxl << \" \" << maxr << endl;\n    return 0;\n}\n```",
        "postTime": 1685174764,
        "uid": 482112,
        "name": "Black_destiny",
        "ccfLevel": 5,
        "title": "CF1732C1 Sheikh (Easy version)"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u51fa\u4e00\u4e2a\u6570\u5217 $A$\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u533a\u95f4 $[l,r]$ \u7684\u4ef7\u503c\u4e3a ${\\sum_{i=l}^rA_i}-{\\bigoplus_{i=l}^{r}A_i}$\uff0c\u73b0\u5728\u7ed9\u51fa $Q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u533a\u95f4 $[L,R]$\uff0c\u4f60\u8981\u6c42\u51fa\u8be5\u533a\u95f4\u7684\u6240\u6709\u5b50\u533a\u95f4\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u90a3\u4e2a\u533a\u95f4\u5e76\u8f93\u51fa\uff0c\u82e5\u6709\u591a\u4e2a\u4ef7\u503c\u76f8\u540c\u4e14\u6700\u5c0f\u7684\u533a\u95f4\uff0c\u6211\u4eec\u5e94\u8f93\u51fa\u5176\u4e2d\u533a\u95f4\u957f\u5ea6\uff08\u5373 $l-r+1$\uff09\u6700\u77ed\u7684\u90a3\u4e2a\u3002\n\n## \u601d\u8def\n~~\u6ca1\u6709\u53bb\u60f3\u80fd\u8fc7C1\u5374\u4e0d\u80fd\u8fc7C2\u7684\u505a\u6cd5~~\n\n\u5148\u601d\u8003\u4ef7\u503c\u7684\u5b9e\u9645\u542b\u4e49\uff0c\u770b\u5230\u5f02\u6216\uff0c\u6211\u4eec\u4f1a\u60f3\u5230\u4e0d\u8fdb\u4f4d\u52a0\u6cd5\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4e0e\u771f\u6b63\u7684\u52a0\u6cd5\u7684\u5dee\u522b\u5728\u4e8e\u4e0d\u8fdb\u4f4d\uff0c\u51b3\u5b9a\u533a\u95f4\u4ef7\u503c\u7684\u5b9e\u9645\u4e0a\u662f\u533a\u95f4\u5f02\u6216\u65f6\u88ab\u4e0d\u8fdb\u4f4d\u5361\u6389\u7684\u503c\u7684\u548c\u3002\u663e\u7136\u5730\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u53ef\u4ee5\u5de6\u53f3\u6269\u5c55\u7684\u533a\u95f4 $[l,r]$\uff0c\u5b83\u7684\u8d21\u732e\u4e00\u5b9a\u5c0f\u4e8e\u7b49\u4e8e $[l-1,r]$ \u548c $[l,r+1]$\uff08\u56e0\u4e3a\u53ef\u4ee5\u5bfc\u81f4\u66f4\u591a\u53ef\u80fd\u7684\u8fdb\u4f4d\u88ab\u5361\u6389\uff09\u3002\u4e8e\u662f\u6211\u4eec\u77e5\u9053\u533a\u95f4 $[L,R]$ \u5b83\u672c\u8eab\u5c31\u4e00\u5b9a\u662f\u4ef7\u503c\u6700\u5927\u7684\u5b50\u533a\u95f4\u4e4b\u4e00\u3002\u8fd9\u65f6\u6211\u4eec\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u5220\u53bb\u533a\u95f4\u4e2d\u6ca1\u6709\u8d21\u732e\u7684\u6570\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u80fd\u6c42\u5230\u66f4\u77ed\u7684\u90a3\u4e2a\u533a\u95f4\u3002\n\n\u90a3\u4e48\u90a3\u4e9b\u6570\u6ca1\u6709\u8d21\u732e\uff0c\u5047\u8bbe\u5f53\u524d\u533a\u95f4\u7684\u5f02\u6216\u548c\u4e3a $now$\uff0c\u800c\u6211\u4eec\u5224\u65ad\u80fd\u4e0d\u80fd\u5220\u7684\u7aef\u70b9\u7684\u503c\u4e3a $x$\uff0c\u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u53ea\u8981 $x$ \u5f53\u524d\u80fd\u8ba9\u533a\u95f4\u7684\u5f02\u6216\u548c\u8fdb\u4f4d\uff0c\u90a3\u4e48\u5b83\u5c31\u5bf9\u4ef7\u503c\u6709\u8d21\u732e\uff0c\u5c31\u4e0d\u80fd\u5220\uff0c\u5426\u5219\u5c31\u53ef\u4ee5\u5220\u3002\u5f02\u6216\u91cc\u9762\u8fdb\u4e86\u4f4d\u7684\u4f4d\u6570\u4e3a $0$\uff0c\u53ea\u8981 $now$ \u548c\u4e0e $x$ \u5728\u4e8c\u8fdb\u5236\u4e0b\u7684\u67d0\u4e00\u4f4d\u4f7f\u5f97 $x$ \u4e0a\u662f $1$\uff0c\u800c $now$ \u4e0a\u4e0d\u662f\uff0c\u5219\u8bf4\u660e\u6709\u8d21\u732e\uff0c\u4e0d\u80fd\u5220\u3002\u90a3\u4e0d\u5c31\u8981\u4fdd\u8bc1 $x$ \u4e0a\u5bf9\u5e94\u7684\u4f4d\u6570\u662f $1$ \u561b\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u628a\u5224\u65ad\u662f\u5426\u80fd\u5220\u5199\u6210\u8fd9\u6837\u7684\u5f0f\u5b50 $[now|x>=now]$\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u5f53\u6211\u4eec\u5220\u6389\u4e00\u4e2a\u6570\uff08$0$ \u9664\u5916\uff09\u65f6\uff0c\u4e00\u5b9a\u4f1a\u51cf\u5c11\u5f02\u6216\u548c\u5728\u4e8c\u8fdb\u5236\u4e0b\u4e3a $1$ \u7684\u4f4d\u6570\uff0c\u4e8e\u662f\u5f88\u5bb9\u6613\u53d1\u73b0\u6700\u591a\u4f1a\u5220\u6389 $\\log_2now$\uff08\u5373\u6bcf\u4e00\u4f4d $1$ \u90fd\u8981\u82b1\u8d39\u4e00\u4e2a\u6570\u53bb\u5220\uff09\u6b21\u3002\n\n\u73b0\u5728\u7ef4\u62a4\u5220\u6570\uff0c\u53d1\u73b0\u533a\u95f4\u5de6\u53f3\u4e24\u8fb9\u90fd\u80fd\u5220\uff0c\u800c\u4e14\u53ef\u80fd\u4e0d\u80fd\u8d2a\u5fc3\u5730\u9009\uff0c\u90a3\u5c31\u8003\u8651\u56fa\u5b9a\u533a\u95f4\u5de6\u7aef\u70b9\u4e0d\u53d8\uff0c\u4ece\u6700\u53f3\u7aef\u5f00\u59cb\u5220\u53f3\u7aef\u70b9\uff0c\u66b4\u529b\u5224\u65ad\u662f\u5426\u80fd\u5220\uff0c\u5220\u5b8c\u540e\u5224\u65ad\u662f\u5426\u4e3a\u66f4\u4f18\u7684\u7b54\u6848\uff0c\u8fd9\u6837\u505a\u5c31\u53ef\u4ee5\u505a\u5230 $\\Theta(n+q\\log_2^2V)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5176\u4e2d $V={\\bigoplus _2{\\max_{i=L}^{i=R}{A_i}}})$\n\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\uff0c\u5df2\u7ecf\u53ef\u4ee5\u8fc7\u4e86~~\u6ca1\u60f3\u5230CF\u7adf\u7136\u6ca1\u903c\u6211\u4f18\u5316~~\u3002\n\n\u7279\u6b8a\u5730\uff0c\u56e0\u4e3a $0$ \u4e0d\u4f1a\u53bb\u9664\u4efb\u4f55\u4e00\u4f4d\u7684 $1$\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u5220\u6570\u65f6\u53ef\u4ee5\u76f4\u63a5\u7701\u7565\u6389\uff0c\u53ef\u4ee5\u76f4\u63a5\u7ef4\u62a4\u4e00\u4e2a\u94fe\u8868\uff0c\u4fdd\u8bc1\u94fe\u8868\u4e0a\u6ca1\u6709 $0$\uff0c\u7136\u540e\u5728\u94fe\u8868\u4e0a\u6761\u5c31\u884c\u4e86\u3002\n## Code\n```cpp\n//\u79c1\u4eba\u6240\u6709\uff0c\u7981\u6b62\u6284\u88ad\n//PS:log\u65b9\u7684\u5199\u6cd5\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint num=0;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))ch=getchar();\n\twhile(isdigit(ch))num=(num<<1)+(num<<3)+(ch&15),ch=getchar();\n\treturn num;\n}\nint a[100010],las[100010],nxt[100010],xorsum[100010];\nint main(){\n\tint T=read()+1;\n\twhile(--T){\n\t\tint n=read(),Q=read()+1,syc=0;\n\t\t//syc\u4e3a\u4e0a\u4e00\u4e2a\u975e0\u7684\u6570\n\t\tfor(int i=1;i<=n;++i){\n\t\t\ta[i]=read();\n\t\t\txorsum[i]=xorsum[i-1]^a[i];\n\t\t\tif(a[i])las[i]=syc,nxt[syc]=i,syc=i;\n\t\t\telse las[i]=syc;\n\t\t\t//\u4e3a\u4e86\u65b9\u4fbf\u8df3\uff0c\u8ba90\u5355\u5411\u5730\u52a0\u5165\u94fe\u8868\n\t\t}\n\t\tsyc=n+1;\n\t\tfor(int i=n;i>0;--i){\n\t\t\tif(a[i])syc=i;\n\t\t\telse nxt[i]=syc;\n\t\t}\n\t\twhile(--Q){\n\t\t\tint l=read(),r=read();\n\t\t\tif(l==r){\n\t\t\t\tprintf(\"%d %d\\n\",l,r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t//\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u7279\u5224\u533a\u95f4\u5168\u4e3a0\u7684\u60c5\u51b5\n\t\t\tif(nxt[l]>r&&!a[l]){\n\t\t\t\tprintf(\"%d %d\\n\",l,l);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!a[l])l=nxt[l];if(!a[r])r=las[r];\n\t\t\tint maxn=xorsum[r]^xorsum[l-1],prel=l,prer=r,ansl=l,ansr=r;\n\t\t\t//\u7ef4\u62a4\u5de6\u7aef\u70b9\uff0c\u5220\u53f3\u7aef\u70b9\n\t\t\twhile(prel<=r){\n\t\t\t\tint now=maxn;\n\t\t\t\tprer=r;\n\t\t\t\twhile(las[prer]>=prel&&(now|a[prer])<=now)now^=a[prer],prer=las[prer];\n\t\t\t\tif(ansr-ansl>prer-prel)ansl=prel,ansr=prer;//\u5224\u65ad\u7b54\u6848\u662f\u5426\u66f4\u4f18\n\t\t\t\tif(nxt[prel]<=r&&(maxn|a[prel])<=maxn)maxn^=a[prel],prel=nxt[prel];\n\t\t\t\telse break;\n\t\t\t}\n\t\t\tprintf(\"%d %d\\n\",ansl,ansr);\n\t\t}\n\t}\n\treturn 0;\n}\n//(\u3002\u30fb\u2200\u30fb)\u30ce\n```\n## Another Solution\n\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u662f\u5426\u80fd\u5c1d\u8bd5\u4f18\u5316\u8fd9\u6837\u7684\u505a\u6cd5\uff0c\u6211\u4eec\u53d1\u73b0\u5f53\u5de6\u7aef\u70b9\u53f3\u79fb\u65f6\uff0c\u80fd\u5230\u8fbe\u7684\u6700\u5de6\u7684\u53f3\u7aef\u70b9\u4e5f\u4f1a\u53f3\u79fb\uff0c\uff08\u5de6\u8fb9\u5220\u5f97\u5c11\u65f6\uff0c\u53f3\u8fb9\u4f1a\u5220\u5f97\u53ef\u80fd\u66f4\u591a\uff09\uff0c\u90a3\u76f4\u63a5\u5199\u4e2a\u53cc\u6307\u9488\uff0c\u5de6\u6307\u9488\u6307\u5411\u5de6\u7aef\u70b9\uff0c\u53f3\u6307\u9488\u6307\u5411\u53f3\u7aef\u70b9\uff0c\u7136\u540e\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u53d8\u4e3a\u4e86 $\\Theta(n+q\\log_2V)$\u3002\u8fd9\u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u89e3\u6cd5~~\u4f46\u6211\u6ca1\u53bb\u5199~~\uff01\n\n~~\u8fd9\u90e8\u5206\u662f\u540e\u9762\u540e\u5934\u8865\u7684\uff0c\u56e0\u4e3a\u6709\u4e00\u4e2a\u6211\u6559\u7684\u4eba\u4ea4\u4e86\u53d1\u8ddf\u6211\u4ee3\u7801\u5f88\u50cf\u7684\u9898\u89e3\uff0c\u5fc3\u91cc\u4e0d\u592a\u8e0f\u5b9e\u3002~~\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u4e86\u8fd9\u4e2a\u89e3\u6cd5\u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u6211\u4eec\u5f97\u5148\u5728\u4e0d\u5220\u5de6\u7aef\u70b9\u65f6\uff0c\u8dd1\u4e00\u904d\u53f3\u7aef\u70b9\u6700\u8fdc\u8dd1\u54ea\uff0c\u7136\u540e\u8fd8\u53d1\u73b0\u5728\u7ef4\u62a4\u53f3\u6307\u9488\u53f3\u79fb\u65f6\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u4e3a\u53f3\u79fb\u5de6\u6307\u9488\u65f6\u8981\u5c06\u6240\u6709\u53ef\u80fd\u66f4\u6539\u7684\u53f3\u6307\u9488\u7684\u4f4d\u7f6e\u90fd\u7b97\u4e0a\u4e00\u904d\uff0c\u663e\u7136\u6240\u6709\u5220\u9664\u7684\u5de6\u7aef\u70b9\u6700\u591a\u4f1a\u5e26\u6765 $\\log_2 V$ \u4e2a\u8fd9\u6837\u7684\u4f4d\u7f6e\uff08\u56e0\u4e3a\u53f3\u7aef\u70b9\u73b0\u5728\u662f\u52a0\u56de\u6765\uff0c\u5982\u679c\u5728\u5de6\u53f3\u4e24\u8fb9\u540c\u65f6\u5220\u9664\u4e86\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u7684 $1$\uff0c\u663e\u7136\u53f3\u8fb9\u7684\u4f4d\u7f6e\u5c31\u4e0d\u5408\u6cd5\u4e86\uff0c\u90a3\u5fc5\u987b\u4fdd\u8bc1\u8fd9\u4e2a\u4f4d\u7f6e\u5728\u533a\u95f4\u4e2d\uff09\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4f4d\u7684 $1$ \u5728\u7b2c\u4e00\u6b21\u53ea\u5220\u53f3\u7aef\u70b9\u7684\u8fc7\u7a0b\u4e2d\u53ea\u4f1a\u88ab\u4e00\u4e2a $A_i$ \u5220\u6389\uff0c\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u4e0b\u6765\uff0c\u7136\u540e\u56de\u5934\u770b\u81ea\u5df1\u4f1a\u52a0\u56de\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u5c31\u628a\u5b83\u4eec\u52a0\u56de\u6765\uff0c\u53ef\u4ee5\u4e8b\u5148\u8bb0\u5f55\u6bcf\u4e00\u4e2a $A_i$ \u4e8c\u8fdb\u5236\u4e0b\u4f1a\u6539\u53d8\u54ea\u4e2a\u4f4d\u7f6e\u3002\n\n\u4f46\u662f\u8fd9\u4e2a\u505a\u6cd5\u5e38\u6570\u6bd4\u524d\u9762\u7684\u5927\u5f88\u591a\uff0cCF\u4e0a\u5b9e\u6d4b\u8f83\u6162\uff0c\u4e8b\u5b9e\u4e0a\u524d\u9762\u7684\u505a\u6cd5\u5f88\u96be\u8dd1\u904d\u5168\u90e8\u7684 $A_i$ \u7684\u4e8c\u8fdb\u5236\u4e0a\u6709\u5565\uff0c~~\u4e3b\u8981\u662f\u51fa\u9898\u4eba\u6bcf\u7ec4\u6570\u636e\u90fd\u8fd9\u4e48\u5361\u6ca1\u610f\u601d~~\uff0c\u5728\u9884\u5904\u7406\u65f6\u4f1a\u6162\u5f88\u591a\uff0c\u4f46\u662f\u5728\u8be2\u95ee\u5f88\u5927\u65f6\u53ef\u80fd\u4f1a\u66f4\u5feb\u3002\n## Another Code\n```cpp\n//\u79c1\u4eba\u6240\u6709\uff0c\u7981\u6b62\u6284\u88ad\n//PS:log\u7684\u5199\u6cd5\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint num=0;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))ch=getchar();\n\twhile(isdigit(ch))num=(num<<1)+(num<<3)+(ch&15),ch=getchar();\n\treturn num;\n}\ninline int Max(const int& x,const int& y){return x<y?y:x;}\nint a[100010],las[100010],nxt[100010],xorsum[100010],bit[40];\nvector<int>A[100010];\nint main(){\n\tint T=read()+1;\n\twhile(--T){\n\t\tint n=read(),Q=read()+1,syc=0;\n\t\t//syc\u4e3a\u4e0a\u4e00\u4e2a\u975e0\u7684\u6570\n\t\tfor(int i=1;i<=n;++i){\n\t\t\ta[i]=read();\n\t\t\txorsum[i]=xorsum[i-1]^a[i];\n\t\t\tif(a[i])las[i] = syc,nxt[syc] = i,syc = i;\n\t\t\telse las[i] = syc;\n\t\t\tA[i].clear();\n\t\t\t//\u4e3a\u4e86\u65b9\u4fbf\u8df3\uff0c\u8ba90\u5355\u5411\u5730\u52a0\u5165\u94fe\u8868\n\t\t}\n\t\tnxt[syc]=n+1;\n\t\tsyc=n+1;\n\t\tfor(int i=n;i>0;--i){\n\t\t\tif(a[i])syc=i;\n\t\t\telse nxt[i]=syc;\n\t\t}\n\t\t\n\t\t//\u9884\u5904\u7406\u6bcf\u4e2aA_i\u4e8c\u8fdb\u5236\u4e0a\u6709\u5565\n\t\tfor(int k=1,ch=1;k<=30;++k,ch<<=1){\n\t\t\tfor(int i=1;i<=n;++i){\n\t\t\t\tif(a[i]&ch) A[i].push_back(k);\n\t\t\t}\n\t\t}\n\t\twhile(--Q){\n\t\t\tint l=read(),r=read();\n\t\t\tif(l==r){\n\t\t\t\tprintf(\"%d %d\\n\",l,r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t//\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u7279\u5224\u533a\u95f4\u5168\u4e3a0\u7684\u60c5\u51b5\n\t\t\tif(nxt[l]>r&&!a[l]){\n\t\t\t\tprintf(\"%d %d\\n\",l,l);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!a[l])l=nxt[l];if(!a[r])r=las[r];\n\t\t\tint maxn=xorsum[r]^xorsum[l-1],prel=l,prer=r,ansl,ansr,now=maxn;\n\t\t\tfor(int i=1;i<=30;++i)bit[i]=l;\n\t\t\t//\u5148\u8dd1\u4e00\u904d\u6700\u8fdc\u8dd1\u591a\u8fdc\n\t\t\twhile(las[prer]>=l&&(now|a[prer])<=now){\n\t\t\t\tfor(int i=0;i<A[prer].size();++i){\n\t\t\t\t\tbit[A[prer][i]]=prer;\n\t\t\t\t}\n\t\t\t\tnow^=a[prer],prer=las[prer];\n\t\t\t}\n\t\t\tansl=l,ansr=prer;\n\t\t\tnow=maxn;\n\t\t\t//\u7ef4\u62a4\u5de6\u7aef\u70b9\uff0c\u5220\u53f3\u7aef\u70b9\n\t\t\tif(nxt[l]<=r&&(now|a[prel])==now){\n\t\t\t\tnow^=a[prel];\n\t\t\t\tfor(int i=0;i<A[prel].size();++i){\n\t\t\t\t\tprer=Max(prer,bit[A[prel][i]]);\n\t\t\t\t\t//\u53d6\u6700\u53f3\u8fb9\u7684\u8be5\u52a0\u5165\u533a\u95f4\u7684\u4f4d\u7f6e\n\t\t\t\t}\n\t\t\t\tprel=nxt[prel];\n\t\t\t\twhile(prel<=r){\n\t\t\t\t\tif(prer<=prel){\n\t\t\t\t\t\tansl=l,ansr=l;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif(ansr-ansl>prer-prel)ansl=prel,ansr=prer;//\u5224\u65ad\u7b54\u6848\u662f\u5426\u66f4\u4f18\n\t\t\t\t\tif(nxt[prel]<=r&&(now|a[prel])==now){\n\t\t\t\t\t\tfor(int i=0;i<A[prel].size();++i){\n\t\t\t\t\t\t\tprer=Max(prer,bit[A[prel][i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnow^=a[prel],prel=nxt[prel];\n\t\t\t\t\t}\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d %d\\n\",ansl,ansr);\n\t\t}\n\t}\n\treturn 0;\n}\n//(\u3002\u30fb\u2200\u30fb)\u30ce\n```\n",
        "postTime": 1666609498,
        "uid": 310439,
        "name": "\u661f\u661f\u4e0e\u8fb0",
        "ccfLevel": 0,
        "title": "CF1732C1\u9898\u89e3"
    }
]
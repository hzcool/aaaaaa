[
    {
        "content": "\u672c\u4eba\u592a\u83dc\uff0c\u53ea\u4f1a2log\u7684\u505a\u6cd5\u3002\n\n\u9996\u5148\u8fd9\u9898\u7684\u5355\u8c03\u6027\u662f\u663e\u7136\u7684\uff1a\u5bf9\u4e8e\u4e00\u79cd\u9009\u6cd5\uff0c\u82e5$x$\u5929\u5185\u80fd\u5b8c\u6210\uff0c\u90a3\u4e48$x+1$\u5929\u5185\u4e5f\u80fd\u5b8c\u6210\u3002\n\n\u4e8e\u662f\u8003\u8651\u4e8c\u5206\u7b54\u6848\u3002\u5047\u8bbe\u73b0\u5728\u5728\u5224\u65ad$k$\u5929\u5185\u80fd\u5426\u5b8c\u6210\u3002   \n\n$k$\u5929\u5185\u80fd\u5b8c\u6210$\\rightarrow$\u6bcf\u4e2a\u88ab\u9009\u7684\u5b66\u751f\u81f3\u591a\u4fee$k$\u4e2abug\u3002    \n\uff08\u5728\u4e8c\u5206\u524d\uff09\u5c06bug\u6309$a$\uff08\u590d\u6742\u5ea6\uff09\u6392\u5e8f\uff0c\u5b66\u751f\u6309$b$\uff08\u5b9e\u529b\uff09\u6392\u5e8f\u3002  \n\u6309\u590d\u6742\u5ea6\u4ece\u5927\u5230\u5c0f\u8003\u8651bug $i$\uff1a\u80fd\u4fee\u590d\u8fd9\u4e2abug\u7684\u5b66\u751f\u96c6\u5408\uff0c\u5c31\u662f$b_j\\ge a_i$\u7684$j$\uff08\u4e14$j$\u4fee\u590d\u7684bug\u4e0d\u8db3$k$\u4e2a\uff09.\u6392\u5e8f\u4e4b\u540e\u8fd9\u662f\u5f88\u597d\u7ef4\u62a4\u7684\u3002  \n\u5982\u679c\u67d0\u4e2abug\u7684\u53ef\u9009\u96c6\u5408\u4e3a\u7a7a\uff0c\u90a3\u4e48\u663e\u7136\u4e0d\u884c\u3002  \n\u8003\u8651\u8d2a\u5fc3\uff0c\u4ece\u53ef\u9009\u96c6\u5408\u4e2d\u9009$c_j$\u6700\u5c0f\uff08\u6216\u8005\u5df2\u7ecf\u9009\u4e86\u4f46\u7528\u4e86\u4e0d\u8db3$k$\u6b21\uff09\u7684\u6765\u4fee\u590d\u4ed6\u3002\u8fd9\u53ef\u4ee5\u7528\u4e00\u4e2a\u4ee5$c_j$\u4e3a\u5173\u952e\u5b57\u7684\u5c0f\u6839\u5806\u7ef4\u62a4\u3002\u540c\u65f6\u6211\u4eec\u4e0d\u9700\u8981\u8bb0\u5f55\u6b21\u6570\uff0c\u518d\u8d2a\u5fc3\u4e00\u4e0b\uff0c\u8ba9$c_j$\u6700\u5c0f\u7684$j$\u628a$[i-k+1,i]$\u90fd\u4fee\u6389\u3002\u8fd9\u6837check\u7684\u65f6\u95f4\u662f$\\mathcal O(m\\log n)$\u7684\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u662f$\\mathcal O(m\\log m\\log n)$\u7684\u3002\u5982\u679c\u5927\u4f6c\u6709\u4f4e\u4e8e2log\u7684\u505a\u6cd5\uff0c\u6b22\u8fce\u524d\u6765\u540a\u6253\u6211\u3002\n```cpp\n/**********/\n#define MAXN 100011\nstruct one\n{\n\tll b,c,dex;\n\tbool operator <(const one& t)\n\tconst\n\t{\n\t\treturn c>t.c;\n\t}\n}p[MAXN];\npll a[MAXN];\nll f[MAXN],n,m,s;\nbool check(ll k)\n{\n    std::priority_queue<one>q,emp;\n    ll sum=0,it=n;\n    for(ll i=m;i>0;--i)\n    {\n\t\twhile(it&&p[it].b>=a[i].first)q.push(p[it--]);\n\t\tif(q.empty())return 0;\n\t\tsum+=q.top().c;\n\t\tfor(ll j=i;j>max(i-k,0);--j)f[a[j].second]=q.top().dex;\n\t\tq.pop();\n\t\ti-=k-1;\n    }\n\treturn sum<=s;\n}\nbool cmp(one a,one b)\n{\n\treturn a.b<b.b;\n}\nint main()\n{\n    n=read(),m=read(),s=read();\n    for(ll i=1;i<=m;++i)a[i]=pll(read(),i);\n    for(ll i=1;i<=n;++i)p[i].b=read();\n    for(ll i=1;i<=n;++i)p[i].c=read(),p[i].dex=i;\n    std::sort(a+1,a+m+1),std::sort(p+1,p+n+1,cmp);\n    un l=0,r=m+1,mid;\n    while(l<r)\n    {\n        mid=(l+r)>>1;\n        if(check(mid))r=mid;\n\t\telse l=mid+1;\n    }\n\tif(r==m+1)puts(\"NO\");\n\telse\n\t{\n\t\tputs(\"YES\");\n\t\tcheck(l);\n\t\tfor(ll i=1;i<=m;++i)printf(\"%lld \",f[i]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1586334464,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF377B \u3010Preparing for the Contest\u3011"
    },
    {
        "content": "### \u9898\u610f\r\n\r\n\u6709 $n$ \u4e2a\u4eba\uff0c$m$ \u4e2a\u95ee\u9898\uff0c\u7b2c $i$ \u4e2a\u95ee\u9898\u6709\u4e00\u4e2a\u96be\u5ea6\u503c $a_i$ \uff0c\u7b2c $i$ \u4e2a\u4eba\u6709\u4e00\u4e2a\u80fd\u529b\u503c $b_i$ \u548c\u8058\u8bf7\u8d39\u7528 $c_i$\uff0c\u4e00\u4e2a\u4eba\u53ea\u80fd\u89e3\u51b3\u96be\u5ea6\u503c\u4e0d\u8d85\u8fc7\u81ea\u5df1\u80fd\u529b\u503c\u7684\u95ee\u9898\uff0c\u4e00\u4e2a\u4eba\u4e00\u5929\u53ea\u80fd\u89e3\u51b3\u4e00\u9898\uff0c\u4f46\u662f\u540c\u4e00\u5929\u53ef\u4ee5\u6709\u591a\u4e2a\u4eba\u89e3\u9898\uff0c\u95ee\u6ee1\u8db3\u8058\u8bf7\u8d39\u7528\u548c\u4e0d\u8d85\u8fc7\u7ed9\u5b9a\u7684 $s$ \u7684\u60c5\u51b5\u4e0b\u6700\u5c0f\u9700\u8981\u65f6\u95f4\u3002\r\n\r\n### \u601d\u8def\r\n\r\n\u7531\u9898\u610f\u53ef\u77e5\uff0c\u6211\u4eec\u76f8\u5f53\u4e8e\u8981\u628a\u95ee\u9898\u5212\u5206\u4e3a\u82e5\u5e72\u96c6\u5408\uff0c\u5728\u6ee1\u8db3\u6761\u4ef6\u4e0b\u4f7f\u5f97\u96c6\u5408\u5927\u5c0f\u7684\u6700\u5927\u503c\u5c3d\u91cf\u5c0f\uff0c\u540c\u65f6\u6613\u5f97\u5f53\u96c6\u5408\u5927\u5c0f\u6700\u5927\u503c\u53d8\u5927\u65f6\uff0c\u4e00\u4e2a\u4eba\u53ef\u80fd\u53ef\u4ee5\u5206\u914d\u5230\u66f4\u591a\u7684\u4efb\u52a1\uff0c\u5373\u6240\u9700\u8981\u7684\u4ef7\u94b1\u4f1a\u53d8\u5c0f\uff0c\u800c\u76f8\u53cd\u6700\u5927\u503c\u53d8\u5c0f\u65f6\u6240\u9700\u8981\u7684\u4ef7\u94b1\u4f1a\u589e\u52a0\uff0c\u5373\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u6545\u8003\u8651\u4f7f\u7528\u4e8c\u5206\u7b54\u6848\u3002\r\n\r\n\u5df2\u7ecf\u6211\u4eec\u53ef\u4ee5\u5148\u5c06\u95ee\u9898\u6309\u96be\u5ea6\u5347\u5e8f\u6392\u5e8f\uff0c\u4eba\u6309\u80fd\u529b\u503c\u5347\u5e8f\u6392\u5e8f\uff0c\u7136\u540e\u4e8c\u5206\u96c6\u5408\u7684\u6700\u5927\u503c\uff0c\u4e8c\u5206\u4e2d\u4f9d\u6b21\u904d\u5386\u6240\u6709\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u95ee\u9898\u5982\u679c\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u4eba\u90fd\u6ca1\u88ab\u5206\u914d\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u90a3\u4e48\u6211\u4eec\u80af\u5b9a\u8981\u628a\u5f53\u524d\u95ee\u9898\u5206\u914d\u7ed9\u6700\u4fbf\u5b9c\u7684\u4eba\uff0c\u800c\u5f53\u6211\u4eec\u7ed9\u4e00\u4e2a\u4eba\u5206\u914d\u5230\u95ee\u9898\u540e\uff0c\u56e0\u4e3a\u94b1\u5df2\u7ecf\u82b1\u51fa\u53bb\u4e86\uff0c\u6211\u4eec\u4e4b\u540e\u80af\u5b9a\u4f18\u5148\u8ba9\u4ed6\u7ee7\u7eed\u505a\u9898\uff0c\u76f4\u5230\u4ed6\u80fd\u88ab\u5206\u914d\u7684\u9898\u6570\u91cf\u6ee1\u4e86\u6216\u8005\u96be\u5ea6\u8d85\u8fc7\u4ed6\u80fd\u529b\u503c\u4e86\u3002\r\n\r\n\u56e0\u4e3a\u8981\u627e\u6700\u4fbf\u5b9c\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e2a\u5806\u6765\u7ef4\u62a4\uff0c\u6bcf\u6b21\u4ece\u540e\u5f80\u524d\u904d\u5386\u6570\u7ec4\uff0c\u628a\u80fd\u529b\u503c\u5927\u4e8e\u5f53\u524d\u96be\u5ea6\u7684\u4eba\u90fd\u4e22\u5165\u5806\u4e2d\uff0c\u7136\u540e\u628a\u5f53\u524d\u95ee\u9898\u5206\u914d\u7ed9\u5806\u9876\u7684\u4eba\uff0c\u6700\u540e\u5224\u65ad\u5f53\u524d\u82b1\u8d39\u548c $s$ \u7684\u5927\u5c0f\u6765\u8c03\u6574\u4e8c\u5206\u8fb9\u754c\u5373\u53ef\u3002\r\n\r\n\u4e8c\u5206\u7684 ``check`` \u51fd\u6570\u590d\u6742\u5ea6\u662f $\\mathcal{O}(m\\log{n})$\uff0c\u6545\u603b\u7684\u590d\u6742\u5ea6\u662f $\\mathcal{O}(m\\log{m}\\log{n})$\u3002\r\n### \u4ee3\u7801\r\n\r\n```cpp\r\n#include <bits/stdc++.h>\r\nusing namespace std;\r\nconst int N=1e5+9;\r\nint n,m;\r\nlong long s;\r\nint Ans[N],tmp[N],num[N];\r\nstruct Quest {\r\n    int id;\r\n    long long val;\r\n    bool operator <( const Quest &x) const {\r\n        return val<x.val;\r\n    }\r\n}a[N];\r\nstruct Student {\r\n    int id;\r\n    int num;\r\n    long long val;\r\n    long long cost;\r\n    bool operator <( const Student &x) const {\r\n        if (x.num==num) return cost>x.cost;\r\n        else return num<x.num;\r\n    }\r\n}b[N];\r\nbool cmp (Student x,Student y) {\r\n    return x.val==y.val?x.cost<y.cost:x.val<y.val;\r\n}\r\nbool check (int x) {\r\n    priority_queue<Student> q;\r\n    for (int i=1;i<=n;++i) {\r\n        b[i].num=0;\r\n    }\r\n    long long res=0;\r\n    for (int i=m,j=n;i;i-=1) {\r\n        while (b[j].val>=a[i].val&&j) {\r\n            q.push (b[j]);\r\n            j-=1;\r\n        }\r\n        while ((!q.empty ())&&q.top ().num>=x) {\r\n            q.pop ();\r\n        }\r\n        if (q.empty ()) return false;\r\n        Student t=q.top ();\r\n        q.pop ();\r\n        if (t.num==0) res+=t.cost;\r\n        t.num++;\r\n        tmp[a[i].id]=t.id;\r\n        q.push (t);\r\n    }\r\n    if (res>s) return false;\r\n    for (int i=1;i<=m;++i) Ans[i]=tmp[i];\r\n    return true;\r\n}\r\nint main () {\r\n    ios::sync_with_stdio (false); cin.tie (0); cout.tie (0);\r\n    cin>>n>>m>>s;\r\n    for (int i=1;i<=m;++i) {\r\n        cin>>a[i].val;\r\n        a[i].id=i;\r\n    }\r\n    sort (a+1,a+m+1);\r\n    for (int i=1;i<=n;++i) {\r\n        cin>>b[i].val;\r\n        b[i].id=i;\r\n    }\r\n    for (int i=1;i<=n;++i) \r\n        cin>>b[i].cost;\r\n    sort (b+1,b+n+1,cmp);\r\n    int l=1,r=m+1,ans=-1;\r\n    while (l<=r) {\r\n        int mid=(l+r)>>1;\r\n        if (check (mid)) {\r\n            ans=mid;\r\n            r=mid-1;\r\n        }\r\n        else {\r\n            l=mid+1;\r\n        }\r\n    }\r\n    if (ans==-1) {\r\n        cout<<\"NO\"<<endl;\r\n        return 0;\r\n    }\r\n    cout<<\"YES\"<<endl;\r\n    for (int i=1;i<=m;++i) cout<<Ans[i]<<\" \";\r\n}\r\n```\r\n",
        "postTime": 1663898892,
        "uid": 138440,
        "name": "Bbaka",
        "ccfLevel": 0,
        "title": "CF377B\u9898\u89e3"
    }
]
[
    {
        "content": "\u8fd9\u9053\u9898\u662f\u542cwqy\u5927\u4f6c\u8bb2\u8bfe\u7684\u65f6\u5019\u8bb2\u7684\uff0c\u6700\u5f00\u59cb\u4e00\u773c\u7f29\u70b9\u5c31\u8fc7\u4e86\uff0c\u7136\u540e\u53c8\u542cwqy\u5927\u4f6c\u8bb2\u4e86\u6392\u5e8f\u7684\u65b9\u6cd5\uff0c\u6ca1\u600e\u4e48\u6ce8\u610f\uff08~~\u9003~~\uff09\uff0c\u540e\u6765\u53c8\u770b\u624d\u53d1\u73b0\u81ea\u5df1yy\u7684\u7f29\u70b9\u597d\u50cf\u6709\u95ee\u9898\uff08~~\u6211\u592a\u83dc\u4e86~~\uff09\uff0c\u7136\u540e\u6309\u7167\u5927\u4f6c\u8bb2\u7684\u6392\u5e8f\u8c03\u4e86\u4e00\u4f1a\u513f\u53d1\u73b0\u597d\u50cf\u601d\u8def\u4e5f\u4e0d\u5bf9\uff08\u4e0a\u8bfe\u4e00\u5b9a\u8981\u542c\u8bb2\uff09\uff0c\u7136\u540e\u53ea\u80fd\u4e00\u4e2a\u4eba\u57cb\u7740\u5934yy\u5176\u4ed6\u601d\u8def\u3002\n\n\u529f\u592b\u4e0d\u8d1f\u6709\u5fc3\u4eba\uff0c\u6700\u7ec8\u5728\u5927\u4f6c@[\u10e6\u89ca\u89ce\u5fae\u51c9\u6708](https://www.luogu.org/space/show?uid=164319)\u7684\u6307\u5f15\u4e0byy\u51fa\u4e86\u4e00\u79cd\u6781\u5176\u5947\u602a\u7684\u5e76\u67e5\u96c6\u505a\u6cd5\uff0c\u7279\u6765\u5206\u4eab\u3002\n\n\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u7ed9\u51fa\u7684\u4e24\u4e2a\u5e8f\u5217a\u548cb\uff0c\u5bf9\u4e8ea\u4e2d\u5f53\u524d\u51fa\u73b0\u7684\u8fd9\u4e2a\u6570\uff0c\u90a3\u4e48\u5728b\u4e2d\u6309\u7167\u987a\u5e8f\u81f3\u5c11\u8981\u5230b\u4e2d\u8fd9\u4e2a\u6570\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u624d\u662f\u76f8\u540c\u7684\u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u96c6\u5408\u3002\uff08\u597d\u50cf\u6709\u70b9\u62bd\u8c61\uff0c\u56e0\u4e3a\u6211\u8bed\u6587\u4e0d\u597d\uff0c\u7ed9\u51fa\u4e00\u5f20\u56fe\u65b9\u4fbf\u7406\u89e3\uff09\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ahtdcspu.png)\n\n\u4f8b\u5982\u7ed9\u5b9a\u7684\u8fd9\u4e2a\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u663e\u7136\u770b\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u91cc2 1 4\u662f\u4e00\u4e2a\u96c6\u5408\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6570\uff0c\u800c3\u662f\u5355\u72ec\u7684\u4e00\u4e2a\u96c6\u5408\u3002\n\n\u90a3\u4e48\u6211\u4eec\u662f\u5982\u4f55\u5f97\u5230\u8fd9\u4e2a\u7ed3\u679c\u7684\u5462\uff1f\u9996\u5148\uff0c\u5728a\u6570\u7ec4\u4e2d\u6307\u9488\u6307\u54111\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f2\uff0cb\u6570\u7ec4\u4e2d\u6307\u9488\u6307\u54111\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f4.\u6211\u4eec\u53d1\u73b0\u76ee\u524d2\u548c4\u4e0d\u5728\u540c\u4e00\u4e2a\u96c6\u5408\u5185\uff0c\u90a3\u4e48\u8bf4\u660e\u5f53\u524d\u5355\u72ec\u4e00\u4e2a\u4f4d\u7f6e\u4e0d\u80fd\u6784\u6210\u4e0a\u4e0b\u4e24\u4e2a\u96c6\u5408\u76f8\u540c\u7684\u60c5\u51b5\u3002\u90a3\u4e48\u6211\u4eec\u5728a\u6570\u7ec4\u4e2d\u5c06\u96c6\u5408\u5411\u540e\u6269\u5c55\uff0c\u4e5f\u5c31\u662f2\u548c1\u5408\u5e76\uff0c\u63a5\u7740\u6b64\u65f6\u5224\u65ad4\u662f\u5426\u5728\u4e0a\u4e00\u4e2a\u96c6\u5408\u5185\uff0c\u8fd8\u662f\u4e0d\u5728\uff0c\u90a3\u4e48\u5c31\u63a5\u7740\u5411\u540e\u5408\u5e76\u4e5f\u5c31\u662f2 1 4\u6240\u5728\u4e00\u4e2a\u96c6\u5408\uff0c\u8fd9\u65f6\u5224\u65ad4\u5728\u4e0a\u9762\u7684\u96c6\u5408\u4e2d\uff0cb\u6570\u7ec4\u6307\u9488\u540e\u79fb\uff0c\u5224\u65ad2\u4e5f\u5728\u96c6\u5408\u4e2d\uff0c\u6307\u9488\u540e\u79fb\uff0c\u63a5\u7740\u5224\u65ad1\u5728\u96c6\u5408\u4e2d\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u4e24\u4e2a\u6307\u9488\u5728\u4e24\u4e2a\u6570\u7ec4\u91cc\u6240\u6307\u4f4d\u7f6e\u76f8\u540c\u65f6\uff0c\u5728\u8fd9\u4e2a\u6570\u636e\u4e2d\u4e5f\u5c31\u662f\u90fd\u662f3\u65f6\uff0c\u5728a\u6570\u7ec4\u4e2d\u76842 1 4\u8fd9\u4e00\u5757\u4e5f\u5c31\u548cb\u6570\u7ec4\u4e2d\u76844 2 1\u8fd9\u4e00\u5757\u6b63\u597d\u5b8c\u5168\u76f8\u540c\uff0c\u6240\u4ee5\u4ed6\u4eec\u81f3\u5c11\u90fd\u8981\u662f\u540c\u4e00\u4e2a\u5143\u7d20\u3002\n\n\u6700\u540e\u53ea\u8981\u8003\u8651\u5bf9\u4e8e\u7b54\u6848\u7684\u6784\u9020\u5c31\u597d\u4e86\uff0c\u9898\u76ee\u4e2d\u7ed9\u5b9a\u4e86k\u4e2a\u4e0d\u540c\u5b57\u6bcd\uff0c\u90a3\u4e48\u53ea\u8981\u96c6\u5408\u4e2a\u6570\u5927\u4e8e\u7b49\u4e8ek\u5c31\u662f\u6ee1\u8db3\u7684\uff0c\u5c0f\u4e8ek\u5c31\u662f\u4e0d\u6ee1\u8db3\u7684\u3002\u5f53\u96c6\u5408\u4e2a\u6570\u5927\u4e8ek\u7684\u65f6\u5019\uff0c\u5bf9\u4e8e\u540e\u9762\u7684\u96c6\u5408\u53ea\u8981\u5168\u90e8\u548c\u524d\u9762\u7684\u5143\u7d20\u6784\u9020\u6210\u4e00\u6837\u7684\u5c31\u597d\u4e86\uff0c\u6bd4\u5982\u8fd8\u662f2 1 4 3\u8fd9\u4e2a\u6570\u636e\uff0c\u53ef\u4ee5\u6784\u9020\u6210aaab\uff0c\u5f53k==1\u65f6\u4e5f\u5b8c\u5168\u53ef\u4ee5\u6784\u9020\u4e3aaaaa\u3002\n\n\uff08~~\u7a81\u7136\u53d1\u73b0\u4ee5\u4e0a\u6b65\u9aa4\u5168\u90e8\u53ef\u4ee5\u7528\u4e00\u4e2a\u6807\u8bb0\u6570\u7ec4book\u5b8c\u6210\uff0c\u4f46\u662f\u5e76\u67e5\u96c6\u65b9\u4fbf\u7406\u89e3\u540c\u5728\u4e00\u4e2a\u96c6\u5408\uff0c\u5c31\u4e0d\u6539\u4e86~~\uff09\n\nCode\n```\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define ll long long\n#define N 200010\nusing namespace std;\ninline ll read(){\n\tll x=0,f=1;char ch=getchar();\n\twhile(ch<'0' || ch>'9'){if(ch=='-') f=-1;ch=getchar();}\n\twhile(ch>='0' && ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\n\nint n,k,a[N],b[N],fa[N],pos[N],cnt=0;\nchar ch[N];\n\nint find(int x){\n\treturn fa[x]==x?x:fa[x]=find(fa[x]);\n}\n\nint main(){\n\tn=read(),k=read();\n\tfor(int i=1;i<=n;i++) fa[i]=i;\n\tfor(int i=1;i<=n;i++) a[i]=read();\n\tfor(int i=1;i<=n;i++) b[i]=read();\n\tint top1=1,top2=1;\n\twhile(1){\n\t\tif(top1>n || top2>n) break;\n\t\tint fx=find(a[top1]),fy=find(b[top2]);\n\t\tif(fx==fy){\n\t\t\tif(top1==top2){\n\t\t\t\tpos[++cnt]=top1;\n\t\t\t\ttop1++,top2++;\n\t\t\t}\n\t\t\telse top2++;\n\t\t}\n\t\telse fa[find(a[top1])]=find(a[top1+1]),top1++;\n\t}\n\tif(cnt<k) return printf(\"NO\\n\"),0;\n\tint last=1,tot=1,tmp=0;\n\twhile(1){\n\t\tif(tot>cnt) break;\n\t\tfor(int i=last;i<=pos[tot];i++){\n\t\t\tch[a[i]]=tmp+'a';\n\t\t}\n\t\tlast=pos[tot]+1;\n\t\ttot++;\n\t\tif(tot<=k) tmp++;\n\t}\n\tprintf(\"YES\\n\");\n\tfor(int i=1;i<=n;i++){\n\t\tprintf(\"%c\",ch[i]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1571793020,
        "uid": 111850,
        "name": "L______",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1213F \u3010Unstable String Sort\u3011"
    },
    {
        "content": "$\\large \\textbf{\u601d\u8def}$\n\n\u4e0e\u5b98\u65b9\u9898\u89e3\u76f8\u540c\u3002  \n\u53ef\u4ee5\u8003\u8651\u627e\u51fa\u4e0d\u540c\u5b57\u6bcd\u6700\u591a\u7684\u65b9\u6848\u6570\uff0c\u5b57\u6bcd\u6570\u5927\u4e8e $26$ \u65f6\u7528 `z` \u66ff\u6362\u4e00\u4e9b\u5b57\u7b26\u5373\u53ef\u53d8\u4e3a\u5408\u6cd5\u65b9\u6848\u3002\n\n\u6211\u4eec\u77e5\u9053\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4 $[l,r]$ \uff0c\u5982\u679c $\\{p_l,p_{l+1},\\dots,p_r\\}$ \u548c $\\{q_l,q_{l+1},\\dots,q_r\\}$ \u8fd9\u4e24\u4e2a\u96c6\u5408\u76f8\u7b49\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a\u5b57\u6bcd\u6765\u586b\u5145\u8fd9\u4e9b\u4f4d\u7f6e\u3002  \n\u4e3a\u4e86\u4f7f\u4e0d\u540c\u5b57\u6bcd\u6570\u6700\u5927\u5316\uff0c\u5bf9\u4e8e\u786e\u5b9a\u7684 $l$ \uff0c\u53ef\u4ee5\u7528\u6700\u5c0f\u7684 $r$ \u8fdb\u884c\u64cd\u4f5c\u3002\u53ef\u4ee5\u5229\u7528\u8d2a\u5fc3\u6765\u8bc1\u660e\uff0c\u7528\u6700\u5c0f\u7684 $r$ \u64cd\u4f5c\u4e0d\u4f1a\u5bfc\u81f4\u540e\u9762\u533a\u95f4\u7684 $r$ \u88ab\u8feb\u540e\u79fb\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u51cf\u5c11\u4e0d\u540c\u5b57\u6bcd\u6570\u3002\n\n\u4e8e\u662f\u6211\u4eec\u7684\u601d\u8def\u5c31\u662f\u4ece\u524d\u5230\u540e\u626b\u63cf $p$ \u548c $q$ \uff0c\u5e76\u7ef4\u62a4\u5b83\u4eec\u7684\u5143\u7d20\u6240\u6784\u6210\u7684\u96c6\u5408\uff0c\u4e24\u96c6\u5408\u76f8\u7b49\u65f6\u5b58\u50a8\u5f53\u524d\u4f4d\u7f6e\uff0c\u5e76\u6e05\u9664\u96c6\u5408\u3002\u626b\u63cf\u7ed3\u675f\u540e\uff0c\u5b58\u50a8\u7684\u6240\u6709\u4f4d\u7f6e\u4f1a\u5c06\u6570\u5217\u5206\u6bb5\uff0c\u6700\u540e\u6309\u6bb5\u5904\u7406\u5373\u53ef\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u65f6\u9700\u8981\u6ce8\u610f\u4e00\u4e9b\u95ee\u9898\uff0c\u4e0b\u9762\u4f1a\u8bb2\n\n-----\n\n$\\large \\textbf{\u5b9e\u73b0}$\n\n\u6211\u4eec\u663e\u7136\u4e0d\u80fd\u66b4\u529b\u5730\u5224\u65ad\u96c6\u5408\u76f8\u7b49\u3001\u6e05\u9664\u96c6\u5408\u3002\u5229\u7528\u4e24\u4e2a\u6876\u53ef\u4ee5\u5f88\u597d\u5730\u4f18\u5316\u65f6\u95f4\u6548\u7387\u3002  \n\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u8981\u6bd4\u8f83 $\\{p_l,p_{l+1},\\dots,p_r\\}$ \u548c $\\{q_l,q_{l+1},\\dots,q_r\\}$ \u8fd9\u4e24\u4e2a\u96c6\u5408\u3002  \n\u5148\u5f00\u4e24\u4e2a\u6876 $vp,vq$ \uff0c\u8bb0\u5f55\u4e24\u96c6\u5408\u5185\u88ab\u626b\u63cf\u5230\u7684\u5143\u7d20\u3002  \n\u7136\u540e\u4ece $l$ \u5230 $r$ \u8fdb\u884c\u626b\u63cf\uff0c\u82e5\u5f53\u524d\u7684 $p_i$ \u5728\u5f53\u524d $vq$ \u5185\uff0c\u5219\u4ece $vq$ \u4e2d\u53bb\u6389 $p_i$ \uff0c\u5426\u5219\u5728 $vp$ \u4e2d\u52a0\u5165 $p_i$ \uff1b\u5bf9 $q_i$ \u7684\u5904\u7406\u540c\u7406\u3002  \n\u82e5\u4e24\u96c6\u5408\u76f8\u7b49\uff0c\u5219\u6240\u6709\u7684\u5143\u7d20\u90fd\u4f1a\u5728\u626b\u63cf\u8fc7\u7a0b\u4e2d\u4e24\u4e24\u5bf9\u5e94\u5730\u62b5\u6d88\u6389\uff0c\u6700\u540e $vp,vq$ \u4f9d\u7136\u4e3a\u7a7a\u3002  \n\u8003\u8651\u7ef4\u62a4 $vp,vq$ \u5185\u7684\u5143\u7d20\u4e2a\u6570\uff08\u8bb0\u4e3a $sa,sb$ \uff09\uff0c\u82e5\u6700\u540e $sa=sb=0$ \uff0c\u5373\u53ef\u8bf4\u660e\u4e24\u96c6\u5408\u76f8\u7b49\u3002  \n\u6ce8\u610f\u5230\u8fd9\u65f6 $vp,vq$ \u4e3a\u7a7a\uff0c$sa=sb=0$ \uff0c\u6062\u590d\u81f3\u521d\u59cb\u72b6\u6001\uff0c\u6240\u4ee5\u6e05\u9664\u64cd\u4f5c\u4e5f\u5df2\u7ecf\u5b8c\u6210\u5566~\n\n\u4ece $1$ \u5230 $n$ \u626b\u4e00\u904d\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e0a\u8ff0\u6d41\u7a0b\u4e86\u3002\u5177\u4f53\u5b9e\u73b0\u8bf7\u770b\u4ee3\u7801\u3002\n\n-----\n\n$\\large\\textbf{\u4ee3\u7801}$\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5e94\u8be5\u662f $\\Theta(n)$ \uff1f\u4e0d\u77e5\u9053\u5b98\u65b9\u9898\u89e3\u4e3a\u4ec0\u4e48\u8bf4\u662f $\\Theta(n\\log n)$ \uff08\u731c\u6d4b\u662f\u56e0\u4e3a\u5979\u4eec\u4f7f\u7528\u4e86 `vector`\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\u4e5f\u662f $\\Theta(n)$\n\n```cpp\n#include<cstdio>\nconst int N=200010;\nint n,k,sa,sb,cnt; char c[N];\nint a[N],b[N],va[N],vb[N],blk[N];\n\ninline int min(int x,int y) { return (x<y?x:y); }\nint main() {\n\tscanf(\"%d%d\",&n,&k);\n\tfor (int i=1; i<=n; ++i) scanf(\"%d\",a+i);\n\tfor (int i=1; i<=n; ++i) scanf(\"%d\",b+i);\n\tfor (int i=1; i<=n; ++i) {\n\t\tvb[a[i]]?(vb[a[i]]=0,--sb):(va[a[i]]=1,++sa);\n\t\tva[b[i]]?(va[b[i]]=0,--sa):(vb[b[i]]=1,++sb);\n        \t//\u7ef4\u62a4va,vb,sa,sb\n\t\tsa||sb||(blk[++cnt]=i); //sa=sb=0\u65f6\u5b58\u50a8\u5f53\u524di\n\t}\n\tif (cnt<k) return puts(\"NO\"),0; //\u4e0d\u540c\u5b57\u6bcd\u6570\u65e0\u6cd5\u8fbe\u5230k\n\tint l=1,r=0; char ch;\n\tfor (int i=1; i<=cnt; ++i,l=r+1) { //\u6309\u533a\u95f4\u586b\u5145\n\t\tr=blk[i]; ch='a'+min(i,26)-1; //\u5b57\u6bcd\u4e0d\u591f\u7528\u65f6\u4e00\u5f8b\u7528z\n\t\tfor (int j=l; j<=r; ++j) c[a[j]]=ch; //\u586b\u5145\n\t}\n\tprintf(\"YES\\n%s\",c+1);\n\treturn 0;\n}\n```\n\n----",
        "postTime": 1569074349,
        "uid": 93465,
        "name": "XCEsupremacy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1213F \u3010Unstable String Sort\u3011"
    },
    {
        "content": "[\u66f4\u5783\u573e\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/tx-lcy/p/16872666.html)\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1213F)\n\n## \u601d\u8def\n\n\u6211\u4eec\u53ef\u4ee5\u6839\u636e $p_i$ \u548c $q_i$ \u5efa\u6709\u5411\u8fb9\uff0c\u8fb9 $u,v$ \u8868\u793a $u$ \u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e $v$\u3002\n\n\u7136\u540e\u8dd1\u4e00\u904d\u7f29\u70b9\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5728\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u91cc\u7684\u70b9\u5fc5\u987b\u8981\u76f8\u7b49\uff0c\u4e8e\u662f\u6700\u591a\u7684\u4e0d\u540c\u5b57\u6bcd\u4e2a\u6570\u5373\u4e3a $\\min(26,tot)$\uff0c\u5176\u4e2d $tot$ \u8868\u793a\u5f3a\u8fde\u901a\u5206\u91cf\u7684\u4e2a\u6570\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u5df2\u7ecf\u628a\u56fe\u7f29\u6210\u4e86\u4e00\u4e2a DAG\uff0c\u4e8e\u662f\u76f4\u63a5\u8dd1\u62d3\u6251\u6392\u5e8f\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint const N=2e5+10;\nchar color[N];int rd[N],n,k,p[N],q[N];\nvector<int>a[N],b[N];\nint dfn[N],co[N],low[N],s[N],ind[N],top,cnt,tot;\ninline void tarjan(int x){\n    dfn[x]=low[x]=++cnt;s[++top]=x;ind[x]=1;\n    for (auto v:a[x])\n        if (!dfn[v]) tarjan(v),low[x]=min(low[x],low[v]);\n        else if (ind[v]) low[x]=min(low[x],low[v]);\n    if (low[x]==dfn[x]){\n        ++tot;\n        while (1){\n            int X=s[top--];\n            co[X]=tot;ind[X]=0;\n            if (!(x^X)) break;\n        }\n    }\n}\ninline void topo_sort(){\n    queue<int>q;\n    for (int i=1;i<=n;++i) if (!rd[i]) q.push(i),color[i]='a';\n    while (!q.empty()){\n        int x=q.front();q.pop();\n        for (auto v:b[x]){--rd[v];color[v]=max(color[v],min('z',char(color[x]+1)));if (!rd[v]) q.push(v);}\n    }\n}\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0),cout.tie(0);\n    cin>>n>>k;\n    for (int i=1;i<=n;++i) cin>>p[i];\n    for (int i=2;i<=n;++i) a[p[i-1]].push_back(p[i]);\n    for (int i=1;i<=n;++i) cin>>q[i];\n    for (int i=2;i<=n;++i) a[q[i-1]].push_back(q[i]);\n    for (int i=1;i<=n;++i) if (!dfn[i]) tarjan(i);\n    if (tot<k) return cout<<\"NO\\n\",0;\n    for (int i=1;i<=n;++i)\n        for (auto v:a[i])\n            if (co[i]^co[v]) b[co[i]].push_back(co[v]),++rd[co[v]];\n    topo_sort();\n    cout<<\"YES\\n\";\n    for (int i=1;i<=n;++i) cout<<color[co[i]];cout<<'\\n';\n    return 0;\n}\n```\n",
        "postTime": 1667959696,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "CF1213F Unstable String Sort"
    },
    {
        "content": "\u5728\u6bd5\u514b\u8001\u5e08\u7ed9\u7684\u8d2a\u5fc3\u9898\u5355\u4e2d\u53d1\u73b0\u8fd9\u9053\u6c34\u7d2b\uff0c\u7136\u540e\u5728AC\u540e\u53d1\u73b0\u9898\u89e3\u505a\u6cd5\u7f24\u7eb7\u591a\u5f69\uff0c\u9042\u51b3\u5b9a\u5206\u4eab\u81ea\u5df1\u7684\u505a\u6cd5\u3002\r\n\r\n\uff08\u4ee5\u53ca\u5410\u69fd\u4e00\u53e5\u6bd5\u514b\u8001\u5e08\u4e0a\u8bfe\u5b8c\u5168\u4e0d\u6309\u7167\u63d0\u524d\u7ed9\u7684\u201c\u4e0a\u8bfe\u7684\u9898\u5355\u201d\u8bb2\uff09\r\n\r\n---\r\n## \u601d\u8def\r\n\r\n\u6211\u4eec\u8bb0 $T$ \u4e3a $S$ \u6392\u5e8f\u540e\u6ee1\u8db3 $\\forall i\\in[1,n-1],T[i]\\le T[i+1]$ \u7684\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u7ed9\u51fa\u7684\u6392\u5e8f $a$ , $b$ \u7b49\u4ef7\u4e8e\u7ed9\u51fa\u4e86 $T$ \u4e2d\u5b57\u7b26\u76f8\u540c\u7684\u4f4d\u7f6e\u3002\r\n\r\n\u5373\u6211\u4eec\u5bf9\u4e8e\u6240\u6709\u7684 $a_i=b_j=k$ \u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c$T_{\\min\\{i,j\\}\\cdots\\max\\{i,j\\}}$ \u4e2d\u7684\u6bcf\u4e2a\u5b57\u7b26\u90fd\u662f\u540c\u4e00\u4e2a \u3002\r\n\r\n\u4e8b\u5b9e\u4e0a\u6211\u4eec\u53ef\u4ee5\u5f97\u5230 $n$ \u4e2a\u7c7b\u4f3c\u4e8e $[\\min\\{i,j\\},\\max\\{i,j\\}]$ \u7684\u533a\u95f4\uff0c\u8868\u793a\u533a\u95f4\u5185\u7684\u5b57\u7b26\u90fd\u662f\u540c\u4e00\u4e2a\u3002\r\n\r\n\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u603b\u7684\u5b57\u7b26\u96c6\u5408\u5927\u5c0f\u5c3d\u91cf\u5927\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u8ba9\u6709\u4ea4\u7684\u533a\u95f4\u7528\u540c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5373\u5408\u5e76\u6709\u4ea4\u7684\u533a\u95f4\u3002\u8fd9\u4e00\u6b65\u53ef\u4ee5\u6309\u7167\u5de6\u7aef\u70b9\u6392\u5e8f\u540e\u8d2a\u5fc3\u5730\u7ef4\u62a4\u3002\r\n\r\n\u7ef4\u62a4\u540e\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e9b\u4e24\u4e24\u4e0d\u4ea4\u7684\u533a\u95f4\uff0c\u540c\u65f6\u7531\u4e8e $i$ \u548c $j$ \u90fd\u904d\u5386 $1\\cdots n$\uff0c\u56e0\u6b64\u8fd9\u4e9b\u533a\u95f4\u7684\u5e76\u662f $[1,n]$\uff0c\u6240\u4ee5\u76f4\u63a5\u6839\u636e\u8fd9\u4e9b\u533a\u95f4\u6765\u6784\u9020\u65b9\u6848\u662f\u53ef\u884c\u7684\uff0c\u540c\u65f6\u6211\u4eec\u4e5f\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u533a\u95f4\u7684\u6570\u91cf\u662f\u5426\u5c0f\u4e8e $k$ \u6765\u5224\u65ad\u662f\u5426\u4e0d\u80fd\u505a\u5230\u81f3\u5c11\u7528 $k$ \u4e2a\u5b57\u7b26\u3002\r\n\r\n\u53ea\u8981\u6309\u7167\u533a\u95f4\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u4f9d\u6b21\u8d4b\u503c\u4e3a $a,b,c,\\cdots$\uff0c\u5982\u8fc7\u8d85\u51fa $26$ \u4e2a\u5168\u90fd\u8d4b\u503c\u4e3a $z$\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u6784\u9020\u51fa $T$\uff0c\u6b64\u65f6\u518d\u6839\u636e\u7ed9\u51fa\u7684\u6392\u5217 $a$ \u6216\u8005 $b$ \u5c31\u53ef\u4ee5\u5f97\u5230 $S$\u3002\r\n\r\n\u8fd9\u6837\u505a\u663e\u7136\u662f $\\mathcal O(n\\log n)$ \u6216\u8005 $\\mathcal O(n)$ \u7684\uff0c\u8fd9\u53d6\u51b3\u4e8e\u6309\u7167\u5de6\u7aef\u70b9\u6392\u5e8f\u65f6\u662f\u7528\u8ba1\u6570\u6392\u5e8f\u8fd8\u662f\u6bd4\u8f83\u6392\u5e8f\u3002\r\n\r\n## \u4ee3\u7801\r\n\r\n```cpp\r\n#include<cstdio>\r\n#include<iostream>\r\n#include<algorithm>\r\n#define MAXN 200000\r\n#define max(a,b) ((a)>(b)?(a):(b))\r\n#define min(a,b) ((a)<(b)?(a):(b))\r\n#define rep(i,j,k) for (int i=(j);i<=(k);++i) \r\nusing namespace std;\r\n\r\nstruct seg{int l,r;}num[MAXN+5],ans[MAXN+5];\r\n//seg\u8868\u793a\u533a\u95f4\r\n//ans\u662f\u6700\u7ec8\u5408\u5e76\u540e\u7684\u533a\u95f4\uff0cnum\u662f\u4e00\u5f00\u59cb\u5f97\u5230\u7684\u533a\u95f4\r\ninline bool cmp(seg x,seg y) {return x.l<y.l;}\r\nint a[MAXN+5],b[MAXN+5],ina[MAXN+5],inb[MAXN+5];\r\n//a,b\u5982\u9898\u610f\uff0cina\u548cinb\u5206\u522b\u8868\u793a\u503c\u4e3ai\u5728a\u4e0eb\u4e2d\u7684\u4e0b\u6807\r\nint val[MAXN+5],cnt=-1;\r\n//val\u662fT\u4e2d\u6bcf\u4e2a\u4f4d\u7f6e\u8d4b\u7684\u503c\uff0ccnt\u662f\u5408\u5e76\u540e\u533a\u95f4\u7684\u4e2a\u6570\r\nchar ch[MAXN+5];\r\n//ch\u662fS\r\n\r\nint main() {\r\n    ios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\r\n    int n,k,l=0,r=0;\r\n    cin>>n>>k;\r\n    rep(i,1,n) cin>>a[i];\r\n    rep(i,1,n) cin>>b[i];\r\n    rep(i,1,n) ina[a[i]]=i;\r\n    rep(i,1,n) inb[b[i]]=i;\r\n    rep(i,1,n)\r\n        num[i]=(seg){min(ina[i],inb[i]),max(ina[i],inb[i])};\r\n    sort(num+1,num+n+1,cmp);\r\n    rep(i,1,n) {\r\n        if (num[i].l<=r) r=max(r,num[i].r);\r\n        else {\r\n            ans[++cnt]=(seg){l,r};\r\n            l=num[i].l;r=num[i].r;\r\n        }\r\n    } \r\n    ans[++cnt]=(seg){l,r};\r\n    if (cnt<k) {\r\n        cout<<\"NO\\n\";\r\n        return 0;\r\n    }\r\n    cout<<\"YES\\n\";\r\n    rep(i,1,cnt)\r\n        rep(j,ans[i].l,ans[i].r)\r\n            val[j]=i;\r\n    rep(i,1,n)\r\n        ch[a[i]]='a'-1+min(26,val[i]);\r\n    rep(i,1,n) cout<<ch[i];\r\n    cout<<\"\\n\";\r\n    return 0;\r\n} \r\n\r\n```",
        "postTime": 1663944164,
        "uid": 525429,
        "name": "\u601d\u8003\u4eba\u751f\u4e2d",
        "ccfLevel": 6,
        "title": "CF1213F Unstable String Sort \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u5b9a\u4e24\u4e2a $1\\sim n$ \u7684\u6392\u5217 $p,q$ \uff0c\u548c\u4e00\u4e2a\u6b63\u6574\u6570 $k$\uff0c\u6c42\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u5408\u6cd5\u7684\u5c0f\u5199\u5b57\u6bcd\u5b57\u7b26\u4e32 $s$ \uff0c\u6ee1\u8db3\uff1a\n\n1. \u5305\u542b\u6070\u597d $k$ \u79cd\u4e0d\u540c\u7684\u5c0f\u5199\u5b57\u6bcd   \n2. \u5bf9\u4e8e $\\forall i\\in [1,n)$\uff0c\u6ee1\u8db3 $s[p_i]\\le s[p_{i+1}],s[q_i]\\le s[q_{i+1}]$\uff0c\u5176\u4e2d $s[m]$ \u4ee3\u8868 \u5b57\u7b26\u4e32 $s$ \u7684\u7b2c $m$ \u4e2a\u5b57\u7b26\u3002\n\n\n$1\\le n\\le 2\\times 10^5,1\\le k\\le 26$\u3002\n\n\n## Solution\n~~\u4e00\u53d1\u5165\u9b42\u62a2\u5230\u5386\u53f2\u6700\u4f18\u89e3rk1\uff0c\u53ea\u6709\u51e0\u5e74\u524d\u67d0\u4e2a\u8d81CF\u8bc4\u6d4b\u673a\u4e0d\u6ce8\u610f\u53ea\u6d4b\u4e8620\u591a\u4e2a\u70b9\u7684\u4eba\u6bd4\u6211\u5feb\u3002~~   \n\u524d\u7f6e\u77e5\u8bc6\uff1a\u5f3a\u8fde\u901a\u5206\u91cf\uff08[B3609\u3010\u6a21\u677f\u3011\u5f3a\u8fde\u901a\u5206\u91cf](https://www.luogu.com.cn/problem/B3609)\uff09\u7f29\u70b9\uff08[P3387\u3010\u6a21\u677f\u3011\u7f29\u70b9](https://www.luogu.com.cn/problem/P3387)\uff09\u3002\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u5173\u7cfb\u662f\u5355\u5411\u3001\u53ef\u4f20\u9012\u7684\uff0c\u5373\u5982\u679c $s[a]\\le s[b],s[b]\\le s[c]$\uff0c\u90a3\u4e48 $s[a]\\le s[c]$\uff0c\u5e76\u4e14 $s[b]\\ge s[a],s[c]\\ge s[b]$\u3002\u8fd9\u63d0\u793a\u6211\u4eec\u628a\u8fd9\u4e9b\u5173\u7cfb\u653e\u5230\u4e00\u5f20 $n$ \u4e2a\u70b9\u7684\u6709\u5411\u56fe\u4e2d\u6765\u5904\u7406\uff0c\u5bf9\u5173\u7cfb $s[a]\\le s[b]$\uff0c\u6211\u4eec\u5c31\u8fde\u4e00\u6761\u6709\u5411\u8fb9 $(a,b)$\uff0c\u5171 $2(n-1)$ \u6761\u8fb9\uff0c\u53ef\u80fd\u5b58\u5728\u73af\u3002\u8fd9\u4e2a\u6709\u5411\u56fe\u4e00\u5b9a\u662f\u8054\u901a\u7684\uff0c\u56e0\u4e3a\u663e\u7136\u4e00\u4e2a $1\\sim n$ \u7684\u6392\u5217\u6240\u63d0\u4f9b\u7684 $n-1$ \u6761\u6709\u5411\u8fb9\u6070\u597d\u4f1a\u5f62\u6210\u4e00\u6761\u5f88\u957f\u7684\u94fe\uff0c\u7b2c\u4e8c\u4e2a\u6392\u5217\u5c31\u662f\u5728\u8fd9\u4e2a\u94fe\u4e0a\u518d\u52a0\u4e00\u4e9b\u8fb9\uff0c\u4e0d\u5f71\u54cd\u8054\u901a\u6027\u3002    \n\u7136\u540e\u8003\u8651\u73af\uff0c\u6bd4\u5982 $s[a]\\le s[b]$ \u4e14 $s[b]\\le s[a]$\uff0c\u90a3\u4e48\u6b64\u65f6\u552f\u4e00\u7684\u5408\u6cd5\u89e3\u5c31\u662f $s[a]=s[b]$ \uff0c\u7531\u6b64\u4e0d\u96be\u63a8\u51fa\u540c\u4e00\u5f3a\u8fde\u901a\u5206\u91cf\u5185\u6240\u6709\u70b9\u7684\u503c\u5fc5\u5b9a\u76f8\u7b49\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u5bf9\u539f\u56fe\u8fdb\u884c\u7f29\u70b9\u5373\u53ef\u3002\n\u518d\u8003\u8651\u65e0\u89e3\u7684\u60c5\u51b5\u3002\u53ea\u8981 $k$ \u5927\u4e8e\u7f29\u70b9\u540e\u56fe\u7684\u603b\u70b9\u6570 $sum$ \u5c31\u662f\u65e0\u89e3\u7684\uff0c\u56e0\u4e3a\u7f29\u70b9\u4e4b\u540e\u6bcf\u4e2a\u70b9\u663e\u7136\u4e0d\u53ef\u80fd\u540c\u65f6\u53d6\u4e24\u79cd\u503c\u3002    \n\u6700\u540e\u8003\u8651\u600e\u4e48\u6784\u9020\u3002\u8fd9\u4e2a\u5f88\u7b80\u5355\uff0c\u7f29\u70b9\u540e\u7684\u56fe\u4e00\u5b9a\u662f\u4e00\u4e2a\u6709\u5411\u65e0\u73af\u7684\u8054\u901a\u56fe\uff0c\u4e14\u53ea\u6709\u4e00\u4e2a\u70b9\u7684\u5165\u5ea6\u4e3a 0\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u8fd9\u4e2a\u70b9\uff0c\u7136\u540e\u904d\u5386\u6574\u4e2a\u56fe\u53bb\u7ed9\u6bcf\u4e2a\u70b9\u8d4b\u503c\uff0c\u8fd9\u4e2a\u8d4b\u503c\u65b9\u6cd5\u6709\u5f88\u591a\u79cd\uff0c\u6211\u662f\u628a\u524d $k$ \u4e2a\u70b9\u7684\u503c\u5206\u522b\u8d4b\u4e3a $1\\sim k$ \uff0c\u7136\u540e\u540e\u9762\u7684\u5168\u90e8\u8d4b\u6210 $k$\u3002\u6ce8\u610f\u4e00\u4e0b\u8981\u6807\u8bb0\u9014\u4e2d\u8bbf\u95ee\u8fc7\u7684\u70b9\uff0c\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u5c31\u76f4\u63a5\u8df3\u8fc7\u5373\u53ef\uff0c\u4e0d\u6807\u8bb0\u4f1a\u559c\u63d0 ```TLE on #10```\u3002\n## Code\n```c\n#include <bits/stdc++.h>\nusing namespace std;\nint head[200001],to[400001],ne[400001],dfn[200001],l[200001],top,cnt,tot,s[200001],fa[200001],ecnt,eecnt;//fa\u4e3a\u6bcf\u4e2a\u70b9\u5bf9\u5e94\u7684\u7f29\u70b9\u4e4b\u540e\u7684\u70b9\u7684\u7f16\u53f7\uff0c\u5176\u4ed6\u6570\u7ec4\u76f8\u4fe1\u5b66\u8fc7tarjan\u7f29\u70b9\u7684\u90fd\u80fd\u770b\u61c2\nint t[400001],hd[200001],nxt[400001],in[200001],col[200001],n,k,la;\nbool vis[200001],vv[200001];//vv\u662f\u4e0a\u9762\u8bf4\u7684\u7528\u6765\u6807\u8bb0\u7684\u6570\u7ec4\uff0cvis\u662f\u6c42\u5f3a\u8fde\u901a\u5206\u91cf\u7684\u65f6\u5019\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u70b9\u5728\u4e0d\u5728\u6808\u5185\u7684\u6570\u7ec4\nconst int LEN=1<<21;\nchar BUF[LEN],*Pin,*Pin_last,PUF[LEN],*Pout=PUF,*Pout_last=PUF+LEN-1;\ninline char gc(){\n\treturn Pin==Pin_last&&(Pin_last=(Pin=BUF)+fread(BUF,1,LEN,stdin),Pin==Pin_last)?EOF:*Pin++;\n}\ninline void pc(char x){\n\tif(Pout==Pout_last) fwrite(PUF,1,Pout-PUF,stdout),Pout=PUF;\n\t*Pout++=x;\n}\ninline int read(){\n\tint x=0;\n\tchar ch=gc();\n\twhile(ch<48||ch>57) ch=gc();\n\twhile(ch>47&&ch<58) x=x*10+ch-48,ch=gc();\n\treturn x;\n}\nvoid write(int x){\n    if(x>9) write(x/10);\n    pc(x%10+48);\n}\nvoid tarjan(int x){//tarjan\u627e\u51fa\u539f\u56fe\u4e2d\u6240\u6709\u7684\u5f3a\u8fde\u901a\u5206\u91cf\n\tdfn[x]=l[x]=++cnt,s[++top]=x,vis[x]=1;\n\tfor(int i=head[x];i;i=ne[i]){\n\t\tint y=to[i];\n\t\tif(!dfn[y]) tarjan(y),l[x]=min(l[x],l[y]);\n\t\telse if(vis[y]) l[x]=min(l[x],dfn[y]);\n\t}if(l[x]==dfn[x]){\n\t\tfa[x]=++tot,vis[x]=0;\n\t\tint tp=s[top];\n\t\twhile(tp!=x) fa[tp]=tot,vis[tp]=0,tp=s[--top];\n\t\ttop--;\n\t}\n}\nvoid work(int x,int now){//\u904d\u5386\u4e00\u904d\u56fe\uff0c\u5bf9\u6bcf\u4e2a\u70b9\u8d4b\u503c\n\tcol[x]=now,vv[x]=1;\n\tfor(int i=hd[x];i;i=nxt[i]){\n\t\tint y=t[i];\n\t\tif(!vv[y]){\n\t\t    if(now<k) now++;\n\t\t    work(y,now);\n\t\t}\n\t}\n}\nsigned main(){\n\tn=read(),k=read(),la=read();\n\tfor(int i=1;i<n;i++){//\u5c06\u7ed9\u5b9a\u7684\u5173\u7cfb\u8f6c\u5316\u6210\u6709\u5411\u56fe\u7684\u8fb9\n\t\tint x=read();\n\t\tto[++ecnt]=x,ne[ecnt]=head[la],head[la]=ecnt,la=x;\n\t}la=read();\n\tfor(int i=1;i<n;i++){\n\t\tint x=read();\n\t\tto[++ecnt]=x,ne[ecnt]=head[la],head[la]=ecnt,la=x;\n\t}for(int i=1;i<=n;i++) if(!dfn[i]) tarjan(i);\n\tif(tot<k) pc('N'),pc('O');//\u5982\u679c\u603b\u70b9\u6570\uff08\u5f3a\u8fde\u901a\u5206\u91cf\u6570\uff09\u5c0f\u4e8ek\uff0c\u5219\u65e0\u89e3\n\telse{\n\t    for(int i=1;i<=n;i++){//\u91cd\u6784\u51fa\u7f29\u70b9\u540e\u7684\u56fe\n    \t\tint u=fa[i];\n    \t\tfor(int j=head[i];j;j=ne[j]){\n    \t\t\tint v=fa[to[j]];\n    \t\t\tif(u!=v) t[++eecnt]=v,nxt[eecnt]=hd[u],hd[u]=eecnt,in[v]++;\n    \t\t}\n    \t}for(int i=1;i<=tot;i++) if(!in[i]) work(i,1),i=tot;//\u627e\u5230\u90a3\u4e2a\u5165\u5ea6\u4e3a0\u7684\u70b9\u4f5c\u4e3a\u8d77\u70b9\u53bb\u904d\u5386\u6574\u4e2a\u56fe\uff0c\u7136\u540e\u76f4\u63a5\u63a8\u51fa\u5faa\u73af\uff0c\u8fd9\u91cc\u7684i=tot\u8d77\u7684\u662f\u548cbreak\u4e00\u6837\u7684\u4f5c\u7528\n    \tpc('Y'),pc('E'),pc('S'),pc('\\n');\n    \tfor(int i=1;i<=n;i++) pc(col[fa[i]]+96);//\u627e\u5230\u6bcf\u4e2a\u70b9\u6240\u5728\u7684\u7f29\u70b9\u540e\u7684\u70b9v\uff0c\u7136\u540e\u8f93\u51fav\u7684\u503c\n\t}fwrite(PUF,1,Pout-PUF,stdout);\n\treturn 0;\n}\n```\n",
        "postTime": 1644931106,
        "uid": 438168,
        "name": "OldVagrant",
        "ccfLevel": 6,
        "title": "CF1213F \u9898\u89e3"
    }
]
[
    {
        "content": "\u5e7f\u544a\uff1a[\u8fd9\u573a\u6bd4\u8d5b\u9898\u89e3\u7684\u539f\u5730\u5740](https://www.cnblogs.com/nblyz2003/p/9868480.html)\n\n \u8fd9\u9898\u662f\u771f\u7684\u5751\uff0c\u4e00\u5f00\u59cb\u538b\u6839\u6ca1\u601d\u8def\uff0c\u8f9b\u4e8f\u540e\u6765\u5f00\u7a8d\u4e86\u3002\n\n\u8fd9\u9898\u662f\u8bf4\u7ed9\u4f60\u4e00\u4e2am*n(1\u2264n\u2264100000, 1\u2264m\u226410)\u7684\u77e9\u9635\uff0c\u6bcf\u884c\u90fd\u662f\u4e00\u4e2a[1,n]\u7684\u6392\u5217\u3002\u8ba9\u4f60\u6bcf\u884c\u5220\u6389\u4efb\u610f\u957f\u5ea6\u7684\u524d\u7f00\u548c\u540e\u7f00\uff08\u4e5f\u53ef\u4ee5\u4e0d\u5220\uff09\uff0c\u4f7f\u5f97\u6bcf\u884c\u5269\u4e0b\u7684\u5e8f\u5217\u76f8\u7b49\u3002\u95ee\u4f60\u65b9\u6848\u603b\u6570\u3002\u5176\u5b9e\u5c31\u662f\u6709\u591a\u5c11\u4e2a\u5e8f\u5217\u662f\u6bcf\u884c\u90fd\u62e5\u6709\u7684\u3002\uff08\u7136\u800c\u6211\u4e00\u5f00\u59cb\u8fd8\u8bfb\u4e86\u534a\u5929\u9898\uff09\n\n\u7136\u800c\u6211\u4e00\u5f00\u59cb\u8bfb\u9519\u6570\u636e\uff0c\u628an\u548cm\u7684\u5927\u5c0f\u8bfb\u53cd\u4e86\uff0cmain\u5305\u4f3c\u4e4e\u4e5f\u662f\u3002\u7136\u6211\u6211\u4e00\u5f00\u59cb\u60f3\u5230\u4e86\u66b4\u529b+kmp\uff0cmain\u60f3\u5230\u4e86\u641c\u7d22\u3002\u7136\u540e\u6211\u5c31wa\u4e86\u4e00\u6b21\uff0c\u5c45\u7136\u7ed9\u8fc7\u6837\u4f8b\u4e86\uff0c\u4e0d\u53ef\u601d\u8bae\u3002\n\n\u542cdalao\u8bf4\u597d\u50cf\u662f\u4ec0\u4e48\u540e\u7f00\u6570\u7ec4\uff08\u542c\u90fd\u6ca1\u542c\u8bf4\u8fc7\uff09\uff0c\u7136\u540e\u5c31\u60f3\u5230\u4e86\u4e00\u4e2a\u5f88\u2026\u2026\u7684\u4ee3\u7801\u3002\u4f3c\u4e4e\u6ca1\u51e0\u4e2a\u4eba\u548c\u6211\u4ee3\u7801\u601d\u8def\u4e00\u6837\uff0c\u9664\u4e86tourist\uff08\u7136\u540e\u4ed6T\u4e86\uff0c\u6389\u4e0b\u4e86rating\u699c\u7b2c\u4e00\u540d\uff09\n\n\u56e0\u4e3a\u6bcf\u884cn\u4e2a\u6570\u5404\u81ea\u53ea\u51fa\u73b0\u4e00\u6b21\uff0c\u6240\u4ee5\u8bf4\u53ea\u8981\u7528s[a[1][j]].nxt\u8bb0\u5f55\u7b2c\u4e00\u884c\u6bcf\u4e2a\u6570\u5b57a[1][j]\u7684\u4e0b\u4e00\u4e2a\u6570\u5b57a[1][j + 1]\uff0c\u4e00\u4e2a\u957f\u4e3al\u5e8f\u5217s\u662f\u6bcf\u884c\u90fd\u62e5\u6709\u4ec5\u5f53\u6bcf\u884c\u7684s[i]\u90fd\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u4e3as[i + 1]\uff081 <= i < l)\u3002\u6240\u4ee5\u7528s[a[1][j]].cnt\u8bb0\u5f55\u4e0b\u6709\u591a\u5c11\u884c\u4e2da[1][j]\u7684\u4e0b\u4e00\u4e2a\u4e3aa[1][j + 1]\u5373s[a[1][j]].nxt\u3002\n\n\u7136\u540e\u6211\u4eec\u627e\u5230\u6240\u6709cnt\u4e3am - 1\u5373\u6240\u6709\u884c\u90fd\u51fa\u73b0\u8fc7\u7684\u76f8\u90bb\u7684\u6570\uff0c\u4f46\u662f\u5982\u679cA->B\u548cB->C\u5728\u540em-1\u884c\u90fd\u51fa\u73b0\uff0c\u90a3\u4e48A\uff0cB\uff0cC\u4e5f\u662f\u4e00\u4e2a\u6ee1\u8db3\u6bcf\u884c\u62e5\u6709\u7684\u5e8f\u5217\u3002\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u8bb0\u5f55\u6240\u6709\u8fde\u7eed\u7684\u4e32\u7684\u957f\u5ea6\uff08\u5982A->B->C\u90fd\u6ee1\u8db3\u5c31\u4e3a3\uff09\uff0c\u7b54\u6848\u4e3a\u6240\u6709\u957f\u5ea6*\uff08\u957f\u5ea6 + 1\uff09/ 2\u7684\u603b\u548c\uff08\u4e3a\u4ec0\u4e48\uff1f\u8fd9\u4e0d\u662f\u5c0f\u5b66\u6570\u5b66\u5417\u3002\uff09\n\n\u8fd8\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u70b9\u957f\u5ea6\u7b971\uff0c\u56e0\u4e3a\u5355\u72ec\u4e00\u4e2a\u6570\u4e5f\u7b97\u662f\u4e00\u4e2a\u5e8f\u5217\uff0c\u4e14\u6bcf\u884c\u90fd\u6709\u3002\n\n\u4e0d\u8fc7\u56de\u8fc7\u5934\u6765\u4e00\u770b\uff0c\u4e0a\u9762\u8fd9\u6bb5\u8bdd\u8bf4\u4e86\u4ec0\u4e48\u81ea\u5df1\u4e5f\u770b\u4e0d\u61c2\uff0c\u7b97\u4e86\u51d1\u5408\u51d1\u5408\uff0c\u770b\u4e0b\u4ee3\u7801\u5427\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#define rep(x, l, r) for(int x = (int)l; x <= (int)r; x++)\n#define repd(x, r, l) for(int x = (int)r; x >= (int)l; x--)\n#define clr(x,y) memset(x, y, sizeof(x))\n#define mp(x, y) make_pair(x, y)\n#define INF 1 << 30\n#define MAXN 15\n#define MAXM 100005\nusing namespace std;\ntypedef long long LL;\ntypedef pair<int,int> par;\n\nstruct node{\n    int nxt;\n    LL cnt;\n}s[MAXM];\nint a[MAXN][MAXM];\n\nint main(){\n    int n, m;\n    scanf(\"%d%d\", &n, &m);\n    rep(i, 1, m)\n        rep(j, 1, n) scanf(\"%d\", &a[i][j]);\n    rep(i, 1, n - 1){\n        s[a[1][i]].nxt = a[1][i + 1];\n        s[a[1][i]].cnt = 1;\n    }\n    rep(i, 2, m)\n        rep(j, 1, n - 1)\n            if(s[a[i][j]].nxt == a[i][j + 1]) s[a[i][j]].cnt++;\n    LL sum = 1, ans = 0;\n    rep(i, 1, n - 1){\n        if(s[a[1][i]].cnt != m) ans += sum * (sum + 1) / 2, sum = 1;\n        else sum++;\n    }\n    if(sum > 0) ans += sum * (sum + 1) / 2;\n    cout << ans << endl;\n    return 0;\n}\n```",
        "postTime": 1540971994,
        "uid": 149312,
        "name": "wze\u63cd\u6241\u4e86nm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1043D \u3010Mysterious Crime\u3011"
    }
]
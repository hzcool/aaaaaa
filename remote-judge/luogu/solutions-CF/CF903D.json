[
    {
        "content": "\u5bf9\u4e8e $d$ \u51fd\u6570\u7684\u7b2c\u4e8c\u7c7b\uff0c\u6211\u4eec\u53d1\u73b0 $a_i$ \u53ea\u80fd\u662f\u6574\u6570\uff0c\u6240\u4ee5 $y$ \u53ea\u80fd\u662f $x+1$ \u6216 $x-1$\uff08$y=x$ \u7684\u65f6\u5019\u548c\u7b2c\u4e00\u7c7b\u4e00\u6837\uff09\u3002\u6240\u4ee5\u6211\u4eec\u5148\u5168\u90e8\u6309\u7167\u7b2c\u4e00\u7c7b\u7b97\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e00\u7c7b\uff0c\u6211\u4eec\u5148\u5bf9 $a$ \u6c42\u540e\u7f00\u548c $s$ \uff0c\u663e\u7136 $a_i$ \u7b2c\u4e00\u7c7b\u7684\u8d21\u732e\u662f $s_{i+1}-a_i \\times(n-i)$ \u3002\n\n\u7136\u540e\u8003\u8651\u7b2c\u4e8c\u7c7b\uff0c\u4ece $n \\rightarrow 1$ \u679a\u4e3e $i$\uff0c\u7528 map \u8bb0\u5f55\u6bcf\u4e2a\u6570\u503c\u5bf9\u5e94 $a_i$ \u7684\u4e2a\u6570\uff0c\u5bf9 $a_i+1$ \u548c $a_i-1$ \u4fee\u6539\u7b54\u6848\u3002\n\n\u6ce8\u610f\u7528 long double\uff08\u8bdd\u8bf4CF\u662f\u4e0d\u662f\u4e0d\u80fd\u7528__int128\uff1f\uff09\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long double lb;\nconst int N=200005;\nint n;\nlb ans,a[N],s[N];\nmap<lb,lb> mp;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%Lf\",&a[i]);\n\tfor(int i=n;i>=1;i--)s[i]=s[i+1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t\tans+=(s[i+1]-a[i]*(lb)(n-i));\n\tfor(int i=n;i>=1;i--){\n\t\tmp[a[i]]++;\n\t\tif(mp[a[i]+1]>0)ans-=mp[a[i]+1];\n\t\tif(mp[a[i]-1]>0)ans+=mp[a[i]-1];\n\t}\n\tprintf(\"%.0Lf\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1616594552,
        "uid": 188389,
        "name": "QQH08",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF903D Almost Difference"
    },
    {
        "content": "\u6ce8\u610f\u5230\u76f4\u63a5\u6c42\u662f\u4e0d\u597d\u6c42\u7684\uff0c\u56e0\u6b64\u4e0d\u76f4\u63a5\u6c42\u3002\n\n\u663e\u7136\uff0c\u6211\u4eec\u5148\u6309\u7167\u4e00\u822c\u7684 $|x-y| >1$ \u7684\u60c5\u51b5\u53bb\u6c42\u5f97\u7b54\u6848\uff0c\u7136\u540e\u518d\u7279\u6b8a\u5904\u7406\u4e00\u4e0b $|x-y| \\leq 1$ \u7684\u60c5\u51b5\u5373\u53ef\u3002\n\n\u5148\u8003\u8651 $|x-y| > 1$ \u8fd9\u79cd\u60c5\u51b5\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a_i$\uff0c\u4ed6\u8981\u7b97\u7684\u5c31\u662f $a_i-a_{i-1}+a_i-a_{i-2}+\\cdots+a_i-a_1$ \u8fd9\u6837\u4e00\u4e2a\u5f0f\u5b50\uff0c\u663e\u7136\u6709 $i$ \u4e2a $a_i$ \u76f8\u4e58\uff0c\u7136\u540e\u518d\u51cf\u53bb $a_1\\sim a_{i-1}$ \u8fd9\u4e00\u6bb5\u7684\u548c\uff0c\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u548c\u6765\u505a\u3002\n\n\u7136\u540e\u8003\u8651 $|x-y| = 1$ \u8fd9\u79cd\u60c5\u51b5\u3002\n\n\u5982\u679c\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u5bf9 $|x-y| \\leq 1$ \u505a\u7279\u6b8a\u7684\u9650\u5236\uff0c\u90a3\u4e48\u8fd9\u7ec4 $d(x,y)$ \u7684\u503c\u662f $\\pm 1$\uff0c\u5982\u679c\u662f $1$ \u90a3\u5c31\u662f $x$ \u6bd4 $y$ \u6070\u597d\u5c0f $1$\uff0c\u5982\u679c\u662f $-1$ \u90a3\u5c31\u662f $x$ \u6bd4 $y$ \u6070\u597d\u5927 $1$\u3002\n\n\u8003\u8651\u4f7f\u7528\u4e00\u4e2a `std::map` \u6765\u8bb0\u5f55\u7b2c $1\\sim i-1$ \u4e2a\u6570\u4e2d $x$ \u7684\u6570\u91cf\uff0c\u5bf9\u4e8e\u6bcf\u4e2a $i$\uff1a\n\n- \u5047\u8bbe\u7b2c $1\\sim i - 1$ \u5b58\u5728 $p$ \u4e2a $a_i + 1$\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u52a0\u4e0a $q$\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u524d\u9762\u7684\u8ba1\u7b97\u4e2d\u5c06\u8fd9\u51e0\u7ec4\u6570\u7684\u51fd\u6570\u503c\u770b\u505a\u4e86 $-1$\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a\u3002\n- \u5047\u8bbe\u7b2c $1\\sim i - 1$ \u5b58\u5728 $q$ \u4e2a $a_i -1$\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u51cf\u53bb $q$\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u524d\u9762\u7684\u8ba1\u7b97\u4e2d\u5c06\u8fd9\u51e0\u7ec4\u6570\u7684\u51fd\u6570\u503c\u770b\u505a\u4e86 $1$\uff0c\u6240\u4ee5\u8981\u51cf\u53bb\u3002\n\n\u4ee3\u7801\u5f88\u597d\u5199\uff08\u56e0\u4e3a\u7ffb\u8bd1\u91cc\u8bf4\u5361 `long long` \u6240\u4ee5\u5077\u61d2\u7528\u4e86 Python\uff0c\u4f46\u662f\u4f60 C++ \u7528 `std::map` \u4e5f\u884c\uff09\uff1a\n\n```python\nn = int(input())\na = list(map(int, input().split()))\nmp = {}\nfor i in range(n): mp[a[i]] = mp[a[i] + 1] = mp[a[i] - 1] = 0\nans = 0\ntot = 0\nfor i in range(n):\n  ans += i * a[i] - tot\n  tot += a[i]\n  ans += mp[a[i] + 1]\n  ans -= mp[a[i] - 1]\n  mp[a[i]] += 1\nprint(ans)\n```",
        "postTime": 1674635901,
        "uid": 219791,
        "name": "tZERO\u3061\u3083\u3093",
        "ccfLevel": 0,
        "title": "CF903D"
    },
    {
        "content": "\u8fd9\u662f\u4ec0\u4e48\u9898\u76ee\u554a\uff0c\u7adf\u7136\u56de\u7206long long.....\n\n\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e2a\u4e0d\u7528\u538b\u4f4d\u7684\u65b9\u6cd5\n\n---\n\n\u601d\u8def\uff1a\n\n\u5206\u7c7b\u8ba8\u8bba\u5373\u53ef\n\n1.\u76f4\u63a5\u52a0\u4e0a\u6240\u6709\u7684y-x\n\n2.\u5355\u72ec\u5904\u7406\u6240\u6709\u7684|x-y|$\\le$1\u7684\u60c5\u51b5\n\n\u590d\u6742\u5ea6:O(n)\n\nmap\u662fO(n log n)\n\n\u6ce8\u610f:\u5bf9\u4e8e\u7206long long \u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u7528long double\n\n\u53ea\u4e0d\u8fc7\u4f1a\u6162\u4e00\u70b9\uff0c\u800c\u4e14\u7cbe\u5ea6\u53ea\u6bd4long long \u5927\u4e00\u70b9\n\n---\n\n```cpp\n#include<bits/stdc++.h>\n#define ld long double\n#define ll long long\nusing namespace std;\nconst int mxn=200005;\nmap<ld,ld>cnt_m;\nld l_cnt[mxn],h_cnt[mxn],sum[mxn],ans,n,a[mxn];\nint main(){\n\tcin>>n;\n\tfor(ll i=1;i<=n;++i)cin>>a[i];\n\tfor(ll i=n;i;--i){            //\u4ece\u540e\u5f80\u524d\u7edf\u8ba1\uff0c\u5c31\u4e0d\u7528\u4e8c\u5206\u4e86\n\t\t++cnt_m[a[i]];\n\t\tl_cnt[i]=cnt_m[a[i]-1];\n\t\th_cnt[i]=cnt_m[a[i]+1];\n\t\tsum[i]=sum[i+1]+a[i];\n\t}\n\tfor(ll i=1;i<=n;++i)ans+=sum[i]-a[i]*(n-i+1)+l_cnt[i]-h_cnt[i];\n\tcout<<fixed<<setprecision(0)<<ans<<endl;  //\u4e00\u5b9a\u8981\u63a7\u5236\u8f93\u51fa\u7684\u5c0f\u6570\u4f4d\u4e3a0\uff01\u5426\u5219\u4f1a\u8f93\u51fa\u7c7b\u4f3c\u4e8e1e9+09\u4e4b\u7c7b\u7684\u4e1c\u897f\n}\n```",
        "postTime": 1573028856,
        "uid": 226760,
        "name": "RedLycoris",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF903D \u3010Almost Difference\u3011"
    },
    {
        "content": "\u6bd4\u8f83\u7b80\u5355\u7684\u4e00\u9053\u9898\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u662f\u84dd\u9898\u3002\n\n\u601d\u7ef4\u4e0d\u591f\uff0c\u6570\u636e\u7ed3\u6784\u6765\u51d1\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6570 $x$\uff0c\u6211\u4eec\u5c06 $x+1,x,x-1$ \u90fd\u79bb\u6563\u5316\u3002\u7136\u540e\u7528\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u79bb\u6563\u5316\u540e\u67d0\u4e2a\u533a\u95f4\u7684\u6570\u7684**\u4e2a\u6570**\u548c\u539f\u6570\u4e4b\u548c\u3002\n\n\u5012\u7740\u8ba1\u7b97\uff0c\u6bcf\u6b21\u8ba1\u7b97\u4e00\u4e0b\u53ef\u4ee5\u505a\u51fa\u8d21\u732e\u7684\u6240\u6709\u6570\u7684\u4e2a\u6570\u4ee5\u53ca\u548c\u3002\u7136\u540e\u8ba1\u7b97\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\u8ba1\u7b97\u540e\u66f4\u65b0\u6811\u72b6\u6570\u7ec4\u3002\n\n\u6ce8\u610f\u5230\u8fd9\u9053\u9898\u4f1a\u7206 long long\uff0c\u6240\u4ee5\u8981\u7528 long double\u3002\n\n```cpp\n#include<bits/stdc++.h> \nusing namespace std;\n#define int long double\nbool isdigit(char ch)\n{\n\treturn (ch>='0' && ch<='9');\n}\ninline int read()\n{\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))\n\t{\n\t\tif(ch=='-') w=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch))\n\t{\n\t\ts=s*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn w*s;\n}\nconst signed  Maxn=6e5+10;\nint n;\nint Ar[Maxn];\n#define lowbit(x) (x&(-x))\nint siz;\nint C[Maxn];\nint D[Maxn];\nvoid update(signed pos,signed val)\n{\n\twhile(pos<=siz)\n\t{\n\t\tC[pos]+=val;\n\t\tpos+=lowbit(pos);\n\t}\n}\nint query(signed pos)\n{\n\tint ans=0;\n\twhile(pos)\n\t{\n\t\tans+=C[pos];\n\t\tpos-=lowbit(pos);\n\t}\n\treturn ans;\n}\n\nvoid update2(signed pos,signed val)\n{\n\twhile(pos<=siz)\n\t{\n\t\tD[pos]+=val;\n\t\tpos+=lowbit(pos);\n\t}\n}\nint query2(signed pos)\n{\n\tint ans=0;\n\twhile(pos)\n\t{\n\t\tans+=D[pos];\n\t\tpos-=lowbit(pos);\n\t}\n\treturn ans;\n}\n\nint Gen[Maxn];\nmap<int,int> pp;\nsigned main()\n{\n\tn=read();\n\tmap<int,int> mp;\n\tfor(signed i=1;i<=n;i++)\n\t{\n\t\tAr[i]=read();\n\t\tmp[Ar[i]]=1;\n\t\tmp[Ar[i]-1]=1;\n\t\tmp[Ar[i]+1]=1;\n\t}\n\tsigned cnt=0;\n\tfor(auto i:mp)\n\t{\n\t\tint gen=i.first;\n\t\tcnt++;\n\t\tGen[cnt]=gen;\n\t\tpp[gen]=cnt;\n\t}\n\tsiz=mp.size();\n\tint ans=0;\n\tfor(signed i=n;i>=1;i--)\n\t{\n\t\tsigned id=pp[Ar[i]];\n\t\tint val=Gen[id];\n\t\tint ans1,ans2,cnt1,cnt2;\n\t\tif(id-2<=0)\n\t\t{\n\t\t\tans1=0,cnt1=0;\n\t\t}else{\n\t\t\tans1=query(id-2),cnt1=query2(id-2);\n\t\t}\n\t\t\n\t\tif(id+2>siz)\n\t\t{\n\t\t\tans2=0,cnt2=0;\n\t\t}else{\n\t\t\tans2=query(siz)-query(id+2-1),cnt2=query2(siz)-query2(id+2-1);\n\t\t}\t\t\n\t\tint res=(ans2+ans1)-(cnt2+cnt1)*Ar[i];\n\t\tans+=res;\n\t\tupdate(id,val);\n\t\tupdate2(id,1);\n\t}\n\t\n\tprintf(\"%.0Lf\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1680914877,
        "uid": 358739,
        "name": "BFSDFS123",
        "ccfLevel": 0,
        "title": "CF903D \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u4e2d\u7684\u5f0f\u5b50\u53ef\u4ee5\u8f6c\u5316\uff1a\n\n$$\n\\sum_{1\\le i\\le n} \\sum_{i<j\\le n} d(a_i, a_j)\n$$\n\n$$\n=\\sum_{1\\le i\\le n} \\sum_{1\\le j<i} d(a_j, a_i) \n$$\n\n$$\n=\\sum_{1\\le i\\le n} \\sum_{1\\le j<i} ((a_i- a_j)-[a_j = a_i-1]\\times 1+[a_j = a_i+1]\\times 1)\n$$\n\n$$\n=\\sum_{1\\le i\\le n} c_{a_i+1, i-1} - c_{a_i-1, i-1} +\\sum_{1\\le j<i} (a_i- a_j)\n$$\n\n\uff08$c_{x, i}$ \u662f $x$ \u5728 $a_1\\cdots a_i$ \u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff09\n\n\u56e0\u4e3a\u62c6\u4e86 $d$ \u51fd\u6570\u540e\u8981\u628a\u591a\u52a0\u7684\u53bb\u6389\uff0c\u591a\u51cf\u7684\u52a0\u56de\u6765\uff0c\u7136\u540e\u628a\u62ec\u53f7\u63d0\u51fa\u6765\u53d8\u6210\u51fa\u73b0\u6b21\u6570\u5c31\u884c\u4e86\u3002\u6ce8\u610f\u8fd9\u9898\u6709\u4e00\u4e2a $\\color{red}\\text{Hack}$ \u6570\u636e\u662f\u4f1a\u70b8 `long long` \u7684\uff0c\u53c8\u56e0\u4e3a $\\text{CF}$ \u4e0d\u7ed9\u7528 `__int128`\uff0c\u6240\u4ee5\u8981\u81ea\u5df1\u5199\u7b80\u6613\u9ad8\u7cbe\u5ea6\u3002\u6211\u5c31\u5199\u4e86\u4e2a\u5dee\u4e0d\u591a\u80fd\u5b58 $10^{27}$ \u7684\u8303\u56f4\u7684\u3002\n\n\u4ee3\u7801\uff1a[178671017](https://codeforces.com/contest/903/submission/178671017)",
        "postTime": 1667263822,
        "uid": 380730,
        "name": "LKX_Wata",
        "ccfLevel": 7,
        "title": "CF903D \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\n\u5b9a\u4e49\u51fd\u6570\uff1a$d(a_i,a_j)= \\begin{cases}\na_j-a_i,\\quad &if\\left| a_i-a_j \\right| > 1 \\\\\n0,\\quad &if\\left| a_i-a_j \\right| \\leq 1\n\\end{cases} $\u3002\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u6c42 $\\sum_{i=1}^n\\sum_{j=i+1}^nd(a_i,a_j)$\u3002\n\n\u6ce8\u610f\uff1a\u7b54\u6848\u53ef\u80fd\u4f1a\u7206\n```cpp\nlong long\n```\n!\n\n## \u601d\u8def\n\n\u8fb9\u8f93\u5165\u8fb9\u8ba1\u7b97\uff0c\u7ef4\u62a4 $cnt$ \u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u503c\u4e3a $x$ \u7684\u6570\u7684\u4e2a\u6570\uff0c\u540c\u65f6\u8ba1\u7b97 $sum$\uff0c\u8bb0\u5f55\u5f53\u524d\u6570\u503c\u4e4b\u548c\u3002\n\n\u5f53\u6211\u4eec\u5904\u7406\u5230\u7b2c $j$ \u4e2a\u6570\u65f6\uff0c\u5bf9\u4e8e\u51fd\u6570 $f(a_i,a_j)=a_j-a_i$\uff0c\u6240\u6c42\u7ed3\u679c $ans$ \u9700\u8981\u52a0\u4e0a $a_j \\times j-sum$\uff0c\u5c06\u51fd\u6570 $f(a_i,a_j)$ \u4e0e\u51fd\u6570 $d(a_i,a_j)$ \u8fdb\u884c\u5bf9\u6bd4\uff0c\u53ef\u4ee5\u53d1\u73b0 $d(a_i,a_j)$ \u6240\u6c42\u7ed3\u679c $ans$ \u5373\u4e3a $f(a_i,a_j)$ \u7684\u6240\u6c42\u7ed3\u679c\u518d\u51cf\u53bb\u591a\u52a0\u7684\u90e8\u5206\uff0c\u5373 $\\left| a_i-a_j \\right| \\leq 1$ \u7684\u90e8\u5206\u3002\u4e8e\u662f\u4fbf\u5f97\u77e5 $ans$ \u9700\u8981\u52a0\u4e0a $a_j \\times j-sum-(a_j \\times(cnt_{a_j}+cnt_{a_{j+1}}+cnt_{a_{j-1}})-a_j \\times cnt_{a_j}-a_{j+1} \\times cnt_{a_{j+1}}-a_{j-1} \\times cnt_{a_{j-1}})$\u3002\u5316\u7b80\u540e\u5f97 $ans$ \u9700\u8981\u52a0\u4e0a $a_j \\times j-sum+cnt_{a_{j+1}}-cnt_{a_{j-1}}$\u3002\n\n\u6ce8\u610f\u6240\u6709\u53d8\u91cf\u9700\u7528 \n```cpp\nlong double\n```\n\u6765\u5b58\u50a8\uff0c\u5426\u5219\u4f1a\u7206\uff01\n\n## \u4ee3\u7801\n\n\u63a5\u4e0b\u6765\u653e\u4e0a\u6211\u7684\u7b80\u77ed\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nmap<int,int>cnt;\nlong double n,a,sum,ans;\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cin>>n;\n    for(int i=0;i<n;i++){\n\tcin>>a;\n\tans+=i*a-sum+cnt[a+1]-cnt[a-1];\n\tsum+=a;\n\tcnt[a]++;\n    }\n    printf(\"%.0Lf\",ans);\n    return 0;\n}\n```",
        "postTime": 1653135545,
        "uid": 305424,
        "name": "yuheng_wang080904",
        "ccfLevel": 0,
        "title": "CF903D"
    },
    {
        "content": "\u4e0d\u8fc7\u591a\u8d58\u8ff0\u9898\u610f\u4e0e\u89e3\u9898\u65b9\u6cd5\uff0c\u5176\u4ed6\u9898\u89e3\u90fd\u5df2\u7ecf\u8bb2\u7684\u5f88\u597d\u4e86\u3002\n\n\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u4e0d\u4f9d\u8d56 `map` \u7684 $O(n)$ \u505a\u6cd5\u3002\n\n\u5982\u679c\u503c\u57df\u5f88\u5c0f\uff0c\u90a3\u4e48\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u5012\u7740\u8dd1\uff0c\u8bb0\u5f55\u5f53\u524d\u6bcf\u4e2a\u6570\u51fa\u73b0\u4e86\u51e0\u6b21\uff0c\u7136\u540e\u8fdb\u884c\u8ba1\u7b97\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e2a\u79bb\u6563\u5316\uff0c\u628a\u503c\u57df\u7f29\u5c0f\u3002\n\n\u4f46\u662f\u5982\u679c\u76f4\u63a5\u79bb\u6563\u5316\uff0c\u4f1a\u5bfc\u81f4\u539f\u672c\u4e24\u4e2a\u6570\u76f8\u5dee\u4e0d\u4e3a 1 \u4f46\u662f\u79bb\u6563\u5b8c\u4ee5\u540e\u76f8\u5dee\u7b49\u4e8e 1\u3002\n\n\u4e3a\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u628a\u79bb\u6563\u5316\u4fee\u6539\u4e00\u4e0b\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```\n#define ll __int128\n#define f(i,a,b) for(ll i=a;i<=b;i++)\n\nll a[200010],cnt;//\u539f\u6570\u7ec4,\u8ba1\u6570\u5668\nstruct node{ll x,id;}b[200010];\nbool cmp(node a,node b){return a.x<b.x;}\n\n//\u4e3b\u51fd\u6570\u5185\nf(i,1,n)b[i]={a[i],i};\nsort(b+1,b+n+1,cmp);\nf(i,1,n){\n\tif(b[i].x!=b[i-1].x){\n\t\tif(b[i].x-b[i-1].x==1)cnt++;\n\t\telse cnt+=2;\n\t}a[b[i].id]=cnt;\n}\n```\n\n\u82e5\u6392\u5b8c\u5e8f\u540e\u76f8\u90bb\u4e24\u4e2a\u6570\u76f8\u7b49\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u5c31\u7b49\u4e8e\u5f53\u524d\u7684 $cnt$\u3002\n\n\u8981\u4e0d\u7136\u5982\u679c\u5dee\u7b49\u4e8e 1\uff0c\u5c31\u5c06 $cnt$ \u52a0\u4e00\u3002\n\n\u5426\u5219 $cnt$ \u52a0 2\u3002\n\n\u8fd9\u6837\u5c31\u4e0d\u4ec5\u4fdd\u8bc1\u4e86\u503c\u57df\u964d\u4e0b\u6765\uff0c\u800c\u4e14\u4f7f\u5f97\u5dee\u4e0d\u4e3a 1 \u7684\u5143\u7d20\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd\u3002\n\n\u5b8c\u6574\u4ee3\u7801\uff08\u4f7f\u7528 `__int128`\uff09\uff1a\n\n```\n// Problem: D. Almost Difference\n// Contest: Codeforces - Educational Codeforces Round 34 (Rated for Div. 2)\n// URL: https://codeforces.com/contest/903/problem/D\n// Memory Limit: 256 MB\n// Time Limit: 2000 ms\n// Author: jimmyywang\n\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll __int128\n#define f(i,a,b) for(ll i=a;i<=b;i++)\n#define wt int tt=d;while(tt--)\n#define py puts(\"Yes\")\n#define pn puts(\"No\")\n#define fe(i,e) for(int i=0;i<e.size();i++)\n#define vi vector<ll>\ninline ll rd() {\n\tll x=0,f=1;\n\tchar c=getchar();\n\twhile(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n\twhile(isdigit(c))x=x*10+c-'0',c=getchar();\n\treturn x*f;\n}\n#define d rd()\n#define pb push_back\nll qp(ll a,ll b,ll p){\n\tll ans=1;while(b){\n\t\tif(b&1)ans=ans*a%p;\n\t\ta=a*a%p;b>>=1;\n\t}return ans;\n}ll t,n,m,ans,cnt;\nll a[200010];\nll c[200010];\nstruct node{ll x,id;}b[200010];\nbool cmp(node a,node b){return a.x<b.x;}\nll s[400010];\nvoid out(ll x){\n\tif(x==0){putchar('0');return;}\n\tif(x<0)putchar('-'),x=-x;\n\tint p[100010],now=0;\n\twhile(x)p[++now]=x%10,x/=10;\n\tfor(int i=now;i>=1;i--)printf(\"%d\",p[i]);\n}\nint main(){\n\tn=d;f(i,1,n)a[i]=d,b[i]={a[i],i},c[i]=c[i-1]+a[i];\n\tf(i,1,n)ans+=i*a[i]-c[i];\n\tsort(b+1,b+n+1,cmp);\n\tf(i,1,n){\n\t\tif(b[i].x!=b[i-1].x){\n\t\t\tif(b[i].x-b[i-1].x==1)cnt++;\n\t\t\telse cnt+=2;\n\t\t}a[b[i].id]=cnt;\n\t}for(int i=n;i>=1;i--){\n\t\ts[a[i]]++;\n\t\tans+=s[a[i]-1];\n\t\tans-=s[a[i]+1];\n\t}out(ans);\n\treturn 0;\n}\n```",
        "postTime": 1642233606,
        "uid": 90706,
        "name": "_jimmywang_",
        "ccfLevel": 0,
        "title": "CF903D Almost Difference"
    },
    {
        "content": "\u8c03\u6b7b\u6211\u4e86\u3002\u3002\u3002\u3002\u3002\u3002\n\n\u9898\u76ee\u5927\u610f\u5f88\u7b80\u5355\uff0c\u4e0d\u4f5c\u8d58\u8ff0\u3002\u53ef\u4ee5\u8f7b\u677e\u60f3\u5230\u76f4\u63a5\u8ba1\u7b97\u5168\u7b54\u6848\uff0c\u5728\u5c06\u76f8\u5dee1\u7684\u6570\u5bf9\u51cf\u53bb\uff08\u6216\u52a0\u56de\uff09\u5373\u53ef\u3002\u5168\u7b54\u6848\u63a8\u4e00\u4e0b\u5f0f\u5b50\u5c31\u53ef\u4ee5\u4e86\uff0c\u81f3\u4e8e\u76f8\u5dee1\u7684\u6570\u5bf9\uff0c\u53ef\u4ee5\u7528map\u7ef4\u62a4\u4e00\u4e0b\u3002\n\n\u7136\u540e\u5c31\u662f\u91cd\u70b9\u3002\u4f60\u4f1a\u53d1\u73b0\uff0ccodeforces\u7684\u6570\u636e\u975e\u5e38\u5f3a\uff0c\u8fd8\u6709\u7684\u7b54\u6848\u4f1a\u7206long long\u3002\u76f4\u63a5\u538b\u4f4d\u5373\u53ef\u3002\u6ce8\u610fcodeforces\u9700\u8981\u6253%I64d\u800c\u4e0d\u662f%lld\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define For(i,a,b) for(i=(a);i<=(b);++i)\n#define Forward(i,a,b) for(i=(a);i>=(b);--i)\n#define Rep(i,a,b) for(register int i=(a),i##end=(b);i<=i##end;++i)\n#define Repe(i,a,b) for(register int i=(a),i##end=(b);i>=i##end;--i)\nusing namespace std;\ntemplate<typename T>inline void read(T &x)\n{\n\tT s=0,f=1;char k=getchar();\n\twhile(!isdigit(k)&&(k^'-'))k=getchar();\n\tif(!isdigit(k)){f=-1;k=getchar();}\n\twhile(isdigit(k)){s=s*10+(k^48);k=getchar();}\n\tx=s*f;\n}\nvoid file()\n{\n\t#ifndef ONLINE_JUDGE\n\t\tfreopen(\"test.in\",\"r\",stdin);\n\t\tfreopen(\"test.out\",\"w\",stdout);\n\t#endif\n}\nconst int MAXN=2e5+7;\nstatic long long n,a[MAXN];\nstatic map<long long,long long>G;\nvoid init()\n{\n\tread(n);\n\tRep(i,1,n)read(a[i]);\n}\nstatic long long plu,upper;\nconst long long bas=1e9;\nvoid solve()\n{\n\tstatic long long u;\n\tRep(i,1,n)\n\t{\n\t\tu=a[i];\n\t\tif(!G.count(u))G[u]=1ll;\n\t\telse ++G[u];\n\t\tif(G.count(u-1))plu-=G[u-1];\n\t\tif(G.count(u+1))plu+=G[u+1];\n\t}\n\tupper+=plu/bas,plu%=bas;\n\tRep(i,n/2+1,n)\n\t{\n\t\tplu+=(a[i]-a[n-i+1])*(2ll*i-n-1ll);\n\t\tupper+=plu/bas,plu%=bas;\n\t}\n\tif(upper<0&&plu>0)++upper,plu-=bas;\n\tif(upper>0&&plu<0)--upper,plu+=bas;\n\tif(upper)printf(\"%I64d%09I64d\\n\",upper,abs(plu));\n\telse printf(\"%I64d\\n\",plu);\n}\nint main()\n{\n\tfile();\n\tinit();\n\tsolve();\n\treturn 0;\n}\n\n\n\n```",
        "postTime": 1517727580,
        "uid": 7035,
        "name": "Great_Influence",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF903D \u3010Almost Difference\u3011"
    }
]
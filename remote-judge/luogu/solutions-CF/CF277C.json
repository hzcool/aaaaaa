[
    {
        "content": "> \u9898\u610f\uff1a\u7ed9\u4e00\u4e2an*m\u7684\u7f51\u683c\uff0c\u4e24\u4eba\u8f6e\u6d41\u5728\u4e0a\u9762\u6cbf\u7740\u7f51\u7edc\u7eb8\u6a2a\u5207\u6216\u8005\u7ad6\u5207\uff0c\u76f4\u63a5\u4e0d\u80fd\u5207\u8005\u4e3a\u8f93\u3002\u521d\u59cb\u72b6\u6001\u662f\u5df2\u7ecf\u5207\u4e86K\u5200\u4e86\u3002\u3002\u3002\n\n\u6076\u5fc3\u3002\u3002\u3002\n\n\u535a\u5f08\u90e8\u5206\u662f\u6b63\u5e38\u7684NIM\u6e38\u620f\u89c4\u5219\uff0c\u4f46\u662f\u5bf9\u4e8e\u56fe\u5f62\u7684\u5904\u7406\u597d\u9ebb\u70e6\u7684\u8bf4\n\nn*m\u7684\u77e9\u5f62\u7f51\u683c\uff0c\u5df2\u7ecf\u5207\u4e86K\u6761\u7ebf\u00a0\n\u518d\u4e24\u4eba\u8f6e\u6d41\u64cd\u4f5c \u5408\u6cd5\u64cd\u4f5c\u662f\u5728\u7f51\u683c\u4e0a\u753b\u6a2a\u7ebf\u6216\u7ad6\u7ebf\n\u957f\u5ea6\u81ea\u968f\u610f\uff0c\u4f46\u662f\u5fc5\u987b\u4ea7\u751f\u65b0\u7684\u5207\u75d5\n\u7f51\u683c\u7684\u8fb9\u754c\u4e0d\u80fd\u5207\n\u6700\u540e\u4e0d\u80fd\u64cd\u4f5c\u8005\u8d25\n\u4e0d\u96be\u53d1\u73b0\u884c\u548c\u5217\u662f\u76f8\u4e92\u72ec\u7acb\u7684\u00a0\n\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u5355\u72ec\u770b\u6210\u6210\u4e00\u5806\u77f3\u5b50\uff0c\n\u5b8c\u6574\u90e8\u5206\u7684\u957f\u5ea6\u5c31\u662f\u77f3\u5b50\u4e2a\u6570\uff0c\n\u6bcf\u5207\u4e00\u5200\u5c31\u76f8\u5f53\u4e8e\u53d6\u8d70\u82e5\u5e72\u77f3\u5b50\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define mem(a,x) memset(a,x,sizeof(a))\nusing namespace std;\ntypedef long long ll;\nconst int inf = 0x3f3f3f3f;\n/*\n\tn*m\u7684\u77e9\u5f62\u7f51\u683c\uff0c\u5df2\u7ecf\u5207\u4e86K\u6761\u7ebf \n\t\u518d\u4e24\u4eba\u8f6e\u6d41\u64cd\u4f5c \u5408\u6cd5\u64cd\u4f5c\u662f\u5728\u7f51\u683c\u4e0a\u753b\u6a2a\u7ebf\u6216\u7ad6\u7ebf\n\t\u957f\u5ea6\u81ea\u968f\u610f\uff0c\u4f46\u662f\u5fc5\u987b\u4ea7\u751f\u65b0\u7684\u5207\u75d5\n\t\u7f51\u683c\u7684\u8fb9\u754c\u4e0d\u80fd\u5207\n\t\u6700\u540e\u4e0d\u80fd\u64cd\u4f5c\u8005\u8d25\n\t\u4e0d\u96be\u53d1\u73b0\u884c\u548c\u5217\u662f\u76f8\u4e92\u72ec\u7acb\u7684 \n\t\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u5355\u72ec\u770b\u6210\u6210\u4e00\u5806\u77f3\u5b50\uff0c\n\t\u5b8c\u6574\u90e8\u5206\u7684\u957f\u5ea6\u5c31\u662f\u77f3\u5b50\u4e2a\u6570\uff0c\n\t\u6bcf\u5207\u4e00\u5200\u5c31\u76f8\u5f53\u4e8e\u53d6\u8d70\u82e5\u5e72\u77f3\u5b50\n\t\n*/ \nstruct Line \n{\n\tint l,r;\n\tLine(int l = 0,int r = 0):l(l),r(r){}\n};\nbool cmp(Line a,Line b)\n{\n\tif (a.l == b.l) return a.r < b.r;\n\treturn a.l < b.l;\n}\nconst int N = 100004;\nvector<Line>fs[N],sc[N];//fs\u4fdd\u5b58\u539f\u59cb\u8f93\u5165\u7684\u7ebf,sc\u4fdd\u5b58\u5904\u7406\u8fc7\u6ca1\u6709\u91cd\u53e0\u90e8\u5206\u7684\u7ebf\nint take[N];//take[i]\u8868\u793a\u7f16\u53f7\u4e3ai\u7684\u884c\u6216\u8005\u5217\u5df2\u7ecf\u88ab\u62ff\u8d70\u7684\u77f3\u5934\u6570\nint n,m,k;\nint id;//\u5212\u8fc7\u7ebf\u7684\u884c\u6216\u5217\u7684\u7f16\u53f7\nmap<int,int>row,cow;//row[i]\u8868\u793a\u7eb5\u5750\u6807\u4e3ai\u7684\u884c\u7684\u5750\u6807 \nvoid init()\n{\n\tmem(fs,0);mem(sc,0);mem(take,0);\n\trow.clear();cow.clear();\n\tid = 0;\n\t//\u8f93\u5165\n\tfor (int i = 0,x1,x2,y1,y2;i < k;++i)\n\t{\n\t\tscanf(\"%d %d %d %d\",&x1,&y1,&x2,&y2);\n\t\tif (x1 == x2)//\u7ad6\u7ebf\n\t\t{\n\t\t\tif (y1 > y2) swap(y1,y2);\n\t\t\tif (cow.find(x1) == cow.end())//\u8fd9\u4e00\u5217\u6ca1\u6709\u51fa\u73b0\u8fc7\n\t\t\t{\n\t\t\t\tcow[x1] = id;//\u7ed9\u4e2a\u7f16\u53f7 \n\t\t\t\tfs[id].push_back(Line(y1,y2));//\u7ed9\u8fd9\u4e2a\u7f16\u53f7\u7684\u5217\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\n\t\t\t\t++id ;//\u66f4\u65b0\u7f16\u53f7 \n\t\t\t} \n\t\t\telse //\u8fd9\u4e00\u5217\u5df2\u7ecf\u88ab\u5212\u8fc7 \u4e5f\u5c31\u662f\u5df2\u7ecf\u6709\u7f16\u53f7\u4e86\n\t\t\t{\n\t\t\t\tfs[cow[x1]].push_back(Line(y1,y2));//\u52a0\u5165\u7ebf\u6bb5 \n\t\t\t} \n\t\t} \n\t\telse //\u6a2a\u7ebf -- \u540c\u7406\n\t\t{\n\t\t\tif (x1 > x2) swap(x1,x2);\n\t\t\tif (row.find(y1) == row.end())\n\t\t\t{\n\t\t\t\trow[y1] = id;\n\t\t\t\tfs[id].push_back(Line(x1,x2));\n\t\t\t\t++id;\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\tfs[row[y1]].push_back(Line(x1,x2));\n\t\t\t}\n\t\t} \n\t} \n\t//\u5904\u7406\u91cd\u53e0\u7684\u7ebf \u4fdd\u5b58\u4e8esc\u4e2d\n\tfor (int i = 0;i < id;++i)\n\t{\n\t\tsort(fs[i].begin(),fs[i].end(),cmp);//\u8fd9\u4e00\u884c\u6216\u5217\u7684\u6240\u6709\u7ebf\u6392\u597d \n\t\tint l = fs[i][0].l,r = fs[i][0].r;//\u8fd9\u4e00\u884c\u6216\u5217\u7684\u7b2c\u4e00\u6761\u7ebf \n\t\tfor (int j = 1;j < fs[i].size();++j)\n\t\t{\n\t\t\tif (fs[i][j].l > r)//\u8fd9\u662f\u4e00\u6761\u548c\u524d\u9762\u4e00\u6761\u6ca1\u6709\u8986\u76d6\u7684\u7ebf\n\t\t\t{\n\t\t\t\tsc[i].push_back(Line(l,r));//\u524d\u9762\u4e00\u6761\u5b58\u8fdb\u53bb\n\t\t\t\ttake[i] +=  r-l;//\u5df2\u7ecf\u62ff\u8d70\u7684\u77f3\u5934\u6570 \n\t\t\t\tl = fs[i][j].l;//\u66f4\u65b0\n\t\t\t\tr = fs[i][j].r; \n\t\t\t} \n\t\t\telse //\u8986\u76d6\n\t\t\t{\n\t\t\t\tr = max(r,fs[i][j].r);//\u5ef6\u957f\u524d\u9762\u90a3\u6761\u7ebf\u5230\u540e\u9762\u90a3\u6761\u7ebf\u8fbe\u5230\u7684\u957f\u5ea6 \n\t\t\t} \n\t\t}\n\t\ttake[i]+=r-l;\n\t\tsc[i].push_back(Line(l,r));//\u6700\u540e\u4e00\u6839\u7ebf\u4e0d\u8981\u5fd8 \n\t} \n}\nvoid solve()//\u535a\u5f08\u7684\u8fc7\u7a0b\n{\n\tint s = 0;\n\tint r = m-row.size()-1,c = n-cow.size()-1;\n\t//r\u8868\u793a\u6ca1\u6709\u88ab\u5207\u8fc7\u7684\u5b8c\u6574\u7684\u884c\n\tif (r&1) s^=n;//\u5947\u6570\u4e2a\u5f02\u6216\u548c\u4e3an\uff0c\u5076\u6570\u4e2a \u5f02\u6216\u548c\u4e3a0\n\tif (c&1) s^=m;\n\t//\u535a\u5f08 -- \u5f53\u524d\u5c40\u9762\u7684\u5224\u65ad\n\tfor (map<int,int>::iterator it = row.begin();it!=row.end();++it)//\u5904\u7406\u884c \n\t{\n\t\tint rest = n-take[it->second];//take[it->second]\u662f\u8be5\u7f16\u53f7\u884c\u62ff\u8d70\u7684\u77f3\u5934\u6570\n\t\t//rest\u662f\u8be5\u884c\u5269\u4e0b\u7684\u77f3\u5934\u6570\n\t\ts^=rest; \n\t} \n\tfor (map<int,int>::iterator it = cow.begin();it!=cow.end();++it)//\u540c\u7406\u5904\u7406\u5217 \n\t{\n\t\tint rest = m - take[it->second];\n\t\ts^=rest;\n\t}\n\tif (s==0)//\u8d25\u6001 \n\t{\n\t\tputs(\"SECOND\");\n\t\treturn;\n\t}\n\tputs(\"FIRST\");\n\t//\u80dc\u6001\u9700\u8981\u8f93\u51fa\u7b2c\u4e00\u6b65\u7684\u8d70\u6cd5\n\t//\u9996\u5148\u8003\u8651\u5b8c\u6574\u7684\u884c\u6216\u5217\n\tfor (int i = 1;i < n;++i)\n\t{\n\t\tif (cow.find(i) == cow.end())\n\t\t{\n\t \t\tif (m>=(m^s))\n\t \t\t{\n\t \t\t\tint t = m - (m^s);\n\t \t\t\tprintf(\"%d %d %d %d\\n\",i,0,i,t);\n\t \t\t\treturn;\n\t\t\t}\n\t\t\telse break;//\u5b8c\u6574\u7684\u90fd\u662f\u4e00\u6837 \u53ea\u9700\u5c1d\u8bd5\u4e00\u6839\u5373\u53ef \n\t\t}\n\t}\n\tfor (int i = 1;i < m;++i)\n\t{\n\t \tif (row.find(i) == row.end())\n\t \t{\n\t \t\tif (n>=(n^s))\n\t \t\t{\n\t \t\t\tint t = n - (n^s);\n\t \t\t\tprintf(\"%d %d %d %d\\n\",0,i,t,i);\n\t \t\t\treturn;\n\t\t\t}\n\t\t\telse break;\n\t\t}\n\t} \n\tfor (map<int,int>::iterator it = row.begin();it != row.end();++it)\n\t{\n\t\tint id = it->second;\n\t\tint rest = n - take[id];\n\t\tif (rest >= (rest^s))\n\t\t{\n\t\t\tint t = rest - (rest^s);\n\t\t\tint sum = 0,p = 0;\n\t\t\tsc[id].push_back(Line(n,n));\n\t\t\tfor (int i = 0;i < sc[id].size();++i)\n\t\t\t{\n\t\t\t\tif (sum + sc[id][i].l- p >= t)\n\t\t\t\t{\n\t\t\t\t\tprintf(\"%d %d %d %d\\n\",0,it->first,p+t-sum,it->first);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsum += sc[id][i].l- p;\n\t\t\t\tp = sc[id][i].r;\n\t\t\t}\n\t\t}\n\t}\n\tfor (map<int,int>::iterator it = cow.begin();it != cow.end();++it)\n\t{\n\t\tint id = it->second,rest = m - take[id];\n\t\tif (rest >= (rest^s))\n\t\t{\n\t\t\tint t = rest - (rest^s);\n\t\t\tint sum = 0,p = 0;\n\t\t\tsc[id].push_back(Line(m,m));\n\t\t\tfor (int i = 0;i < sc[id].size();++i)\n\t\t\t{\n\t\t\t\tif (sum+sc[id][i].l - p >= t)\n\t\t\t\t{\n\t\t\t\t\tprintf(\"%d %d %d %d\\n\",it->first,0,it->first,p+t-sum);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsum += sc[id][i].l-p;\n\t\t\t\tp = sc[id][i].r;\n\t\t\t}\n\t\t}\n\t}\n} \nint main()\n{\n\twhile (cin>>n>>m>>k)\n\t{\n\t\tinit();//\u5efa\u56fe \n\t\tsolve();//\u535a\u5f08 \n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1556692466,
        "uid": 40198,
        "name": "FP\u00b7\u8377\u5170\u732a",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF277C \u3010Game\u3011"
    }
]
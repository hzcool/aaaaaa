[
    {
        "content": "\u9898\u610f\uff1a\u5b9a\u4e49\u4e24\u4e2a\u5b57\u7b26\u4e32 $a,b$ \u76f8\u7b49\u4e3a\u5176\u4e2d\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u5b57\u6bcd\u53ef\u4ee5\u66ff\u6362\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u5b57\u6bcd\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c$\\text{ccf=fft}$ \u3002\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6bcf\u6b21\u8be2\u95ee\u4e24\u4e2a\u5b50\u4e32\u95ee\u662f\u5426\u76f8\u7b49\u3002\n\n\u840c\u840c\u9898\uff0c\u8003\u8651\u6bcf\u4e2a\u5b57\u6bcd\u662f\u5426\u51fa\u73b0\u7684 $01$ \u5e8f\u5217\uff0c $\\text{Hash}$ \u4e4b\u540e\u6bcf\u6b21\u505a\u4e2a $26$ \u6b21\uff0c\u628a\u8f6c\u5316\u4e3a\u7684 $01$ \u5e8f\u5217\u585e\u5165\u4e00\u4e2a $\\text{vec}$ \u91cc\uff0c\u6392\u4e00\u4e0b\u5e8f\uff0c\u5224\u65ad\u662f\u5426\u76f8\u7b49\u5373\u53ef\u3002\n\n```cpp\n#define maxn 200010\ntypedef unsigned long long ull;\nconst int p=1e9+7;\nint n,m;\nchar s[maxn];\null f[maxn][26];\null pw[maxn];\null H(int l,int r,int k){\n\treturn (f[r][k]-f[l-1][k]*pw[r-l+1]%p+p)%p;\n}\nint l,r,len;\nvector<int>va,vb;\nsigned main(){\n#ifndef ONLINE_JUDGE\n\tfreopen(\"testdata.in\",\"r\",stdin);\n#endif\n\tcin>>n>>m;\n\tcin>>s+1;\n\tpw[0]=1;\n\tfor(int i=1;i<=n;i++)pw[i]=pw[i-1]*13331%p;\n\tfor(int i=0;i<26;i++)\n\tfor(int j=1;j<=n;j++)f[j][i]=(f[j-1][i]*13331+(s[j]==i+'a'))%p;\n\twhile(m--){\n\t\tcin>>l>>r>>len;\n\t\tva.clear(),vb.clear();\n\t\tfor(int i=0;i<26;i++)va.push_back(H(l,l+len-1,i));\n\t\tfor(int i=0;i<26;i++)vb.push_back(H(r,r+len-1,i));\n\t\tsort(va.begin(),va.end()),sort(vb.begin(),vb.end());\n\t\tcout<<(va==vb?\"YES\":\"NO\")<<endl;\n\t}\n#ifndef ONLINE_JUDGE\n\tcerr<<endl<<(double)clock()/CLOCKS_PER_SEC;\n#endif\n}\n```\n~~\u81ea\u7136\u6ea2\u51fa\u6302\u4e86\uff0c\u5dee\u8bc4\uff0c\u8fd9\u5c31\u662fCF\u5417~~",
        "postTime": 1631173517,
        "uid": 100325,
        "name": "peterwuyihong",
        "ccfLevel": 7,
        "title": "CF985F Isomorphic Strings \u8bb0\u5f55"
    },
    {
        "content": "## Solution\n\n\u54c8\u5e0c\u3002\n\n\u4e24\u4e2a\u5b57\u7b26\u4e32\u5339\u914d\uff0c\u4e0e\u5b57\u6bcd\u65e0\u5173\uff0c\u800c\u4e0e\u5b57\u6bcd\u51fa\u73b0\u7684\u4f4d\u7f6e\u6709\u5173\u3002\n\n\u5c06\u6bcf\u4e2a\u5b57\u6bcd\u51fa\u73b0\u7684\u4f4d\u7f6e\u7528 01 \u8868\u793a\u51fa\u6765\uff0c\u4f8b\u5982\uff1a```ababyz```\n\n$a \\to 101000$\n\n$b \\to 010100$\n\n$c \\to 000000$\n\n...\n\n\n$x \\to 000000$\n\n$y \\to 000010$\n\n$z \\to 000001$\n\n\u53ef\u4ee5\u5f97\u5230 $26$ \u4e2a\u6781\u957f\u7684\u4e8c\u8fdb\u5236\u6570\u3002\n\n\u7528\u7c7b\u4f3c\u4e8e[\u5b57\u7b26\u4e32\u54c8\u5e0c](https://www.luogu.com.cn/problem/P3370)\u7684\u65b9\u6cd5\uff0c\u5c06\u8fd9 $26$ \u4e2a\u6781\u957f\u7684\u4e8c\u8fdb\u5236\u6570\u538b\u7f29\u6210\u53ef\u4ee5\u5728 ll \u8303\u56f4\u5185\u5b58\u50a8\u7684\u6570\u3002\n\n\u5982\u679c\u4e24\u4e2a\u5b57\u7b26\u4e32\u5339\u914d\uff0c\u5c06\u8fd9 $26$ \u4e2a\u6570\u6392\u5e8f\u5f97\u5230\u7684\u6570\u5217\u80af\u5b9a\u662f\u76f8\u540c\u7684\u3002\n\n\u636e\u6b64\uff0c\u5373\u53ef\u5224\u5b9a\u4e24\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\u3002\n\n## Code\n\n\u5355\u54c8\u5e0c\u6bd4\u8f83\u5bb9\u6613\u88ab\u5361\uff0c\u5efa\u8bae\u4f7f\u7528\u53cc\u54c8\u5e0c\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long // \u4e0d\u5f00 ll \u89c1\u7956\u5b97\uff01\n#define go(i,x,y) for (int i=x;i<=y;i++)\nusing namespace std;\nconst int N=2e5+5;\ntemplate <typename type>\nvoid read(type &x){\n\tchar c=getchar();\n\tint F=0;\n\twhile (c!='-' && (c<'0' || c>'9')) c=getchar();\n\tif (c=='-') F=1,x=0; else x=(c^48);\n\tc=getchar();\n\twhile (c>='0' && c<='9') x=(x<<1)+(x<<3)+(c^48),c=getchar();\n\tif (F) x=-x;\n}\ntemplate <typename type,typename ... types>\nvoid read(type &x,types &... y){ read(x);read(y...);}\nstruct node{\n\tint num[26];\n\tbool operator == (const node &t) const {\n\t\tgo(i,0,25) if (num[i]!=t.num[i]) return 0;\n\t\treturn 1;\n\t}\n};\nint n,m,l,r,x;\nchar str[N];\nstruct Hash{\n\tint mod,base;\n\tint res[26][N],B[N];\n\tvoid clear(int t1,int t2){\n\t\tbase=t1,mod=t2;\n\t\tmemset(res,0,sizeof(res));\n\t\tmemset(B,0,sizeof(B));\n\t}\n\tvoid init(){\n\t\tgo(c,97,122)\n\t\t\tgo(i,1,n)\n\t\t\t\tres[c-97][i]=(res[c-97][i-1]*base%mod+(str[i]==c))%mod;\n\t\tB[0]=1;\n\t\tgo(i,1,n)\n\t\t\tB[i]=(B[i-1]*base)%mod;\n\t}\n\tint query(int l,int r,int c){\n\t\treturn (res[c][r]-res[c][l-1]*B[r-l+1]%mod+mod)%mod;\n\t}\n\tnode check(int l,int r){\n\t\tnode tmp;\n\t\tgo(c,0,25) tmp.num[c]=query(l,r,c);\n\t\tsort (tmp.num,tmp.num+26);\n\t\treturn tmp;\n\t}\n} H,H1;\nsigned main(){\n\tread(n,m), scanf(\"%s\",str+1);\n\tH.clear(2,1e9+7);\n\tH1.clear(131,994381747);\n\tH.init(),H1.init();\n\tgo(i,1,m){\n\t\tread(l,r,x);\n\t\tputs((H.check(l,l+x-1)==H.check(r,r+x-1) && H1.check(l,l+x-1)==H1.check(r,r+x-1)) ? \"YES\" : \"NO\");\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1679565690,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "CF985F \u505a\u9898\u7b14\u8bb0"
    },
    {
        "content": "\u60f3\u4e86\u51e0\u5206\u949f\u5c31\u4f1a\u4e86\u3002\n\n\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u5b57\u6bcd\u5728\u8fd9\u4e2a\u533a\u95f4\u7684\u51fa\u73b0\u72b6\u51b5\uff0c\u7528 01 \u8868\u793a\uff0c\u533a\u95f4\u7684 01 \u7528\u54c8\u5e0c\u503c\u8868\u793a\u3002\n\n\u8003\u8651\u641e 26 \u6b21\uff0c\u5982\u679c\u5bf9\u4e8e\u4e00\u4e2a\u5b57\u6bcd\u6709\u4e00\u4e2a\u548c\u5b83\u5bf9\u5e94\u7684\u54c8\u5e0c\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u662f\u53ef\u884c\u7684\u3002\n\n\u6240\u4ee5\u5c31\u505a\u5b8c\u4e86\u3002\n\n```cpp\n\nint n,m;\nconst int N = 2e5 + 1;\nchar s[N];\nconst int P = 1e9 + 7;\nconst int base = 2;\n\nint add(const int&x,const int&y){\n\tif(x+y>=P)\n\t\treturn x+y-P;\n\telse\n\t\treturn x+y;\n}\n\nint dec(const int&x,const int&y){\n\treturn add(x,P-y);\n}\n\nint mul(const int&x,const int&y){\n\treturn 1ll*x*y%P;\n}\nint pw[N];\nstruct gethsh{\n\tint hsh[N];\n\t\n\tint get(int l,int r) {return dec(hsh[r],mul(hsh[l-1],pw[r-l+1]));}\n\tvoid init(int k) {rep(i,1,n)hsh[i]=add(mul(hsh[i-1],base),s[i]=='a'+k);}\n} hsh[26];\n\nint main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(NULL);\n\t\n\tcin>>n>>m;\n\t\n\tpw[0]=1;\n\trep(i,1,n)pw[i]=mul(pw[i-1],base);\n\tcin>>s+1;\n\t\n\trep(i,0,25)hsh[i].init(i);\n\t\n\twhile(m--){\n\t\tint l1,l2,k;\n\t\tcin>>l1>>l2>>k;\n\t\tint r1=l1+k-1;\n\t\tint r2=l2+k-1;\n\t\tvector<int>a,b;\n\t\trep(i,0,25)a.push_back(hsh[i].get(l1,r1));\n\t\trep(i,0,25)b.push_back(hsh[i].get(l2,r2));\n\t\tsort(a),sort(b);\n\t\tif(a==b)cout<<\"YES\"<<'\\n';\n\t\telse cout<<\"NO\"<<'\\n';\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1600940195,
        "uid": 96580,
        "name": "SXNhdW5veWE",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF985F \u3010Isomorphic Strings\u3011"
    },
    {
        "content": "### CF985F Isomorphic Strings\n\n\u3010\u9898\u610f\u3011\n\n\u5b9a\u4e49\u4e24\u4e2a\u5b57\u7b26\u4e32$S1,S2$\u540c\u6784\u5f53\u4e14\u4ec5\u5f53\u6709\u4e00\u79cd\u6620\u5c04\u5173\u7cfb\uff0c\u4f7f\u5f97$S1$\u6620\u5c04\u540e\u4e0e$S2$\u76f8\u540c\n\n\u7136\u540e\u7ed9\u51fa\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7ed9\u51faQ\u7ec4\u8be2\u95ee\uff0c\u6bcf\u7ec4\u8be2\u95eeS1\u5b57\u7b26\u4e32\u4e2d$S1[x][x+len-1]$\u4e0e$S2[y][y+len-1]$\u7684\u5b50\u4e32\u662f\u5426\u662f\u540c\u6784\u7684\n\n\u3010\u5206\u6790\u3011\n\n\u8bfb\u5b8c\u9898\u4e4b\u540e\u4e00\u5934\u96fe\u6c34\u3002\u5148\u6253\u4e2a\u66b4\u529b\uff1fTLE 9\n\n\u4e4b\u540e\u53ea\u80fd\u591f\u60f3\u6b63\u89e3\u3002 \n\n\u6211\u4eec\u53d1\u73b0\u4e24\u4e2a\u5b57\u7b26\u4e32\u6210\u6620\u5c04\u5173\u7cfb\u5fc5\u987b\u6ee1\u8db3\u4ed6\u4eec\u7684\u76f8\u90bb\u76f8\u540c\u5b57\u6bcd\u7684\u6392\u5217\u65b9\u5f0f\u662f\u76f8\u540c\u7684\u3002\n\n\u53ef\u80fd\u6bd4\u8f83\u7ed5\uff0c\u6211\u4eec\u901a\u8fc7\u6837\u4f8b\u6765\u8bf4\u660e\u4e00\u4e0b\u3002\n\nS1\uff1a$aabbbc$\n\nS2\uff1a$ddeeef$\n\n\u4ed6\u4eec\u7684\u5b50\u4e32\u6392\u5217\u65b9\u5f0f\u90fd\u662f2+3+1\u7684\uff08aa + bbb + c \u548c dd + eee + f)\n\n\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\u6709\u4ec0\u4e48\u7528\uff1f \u5f53\u7136\u6709\u7528\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b57\u7b26\uff0c\u6211\u4eec\u54c8\u5e0c\u51fa\u4ed6\u4eec\u7684\u4f4d\u7f6e(~~\u4f4d\u7f6e\u8fd8\u80fd\u54c8\u5e0c\uff1f~~)\n\n\u600e\u4e48\u54c8\u5e0c\u6211\u5c31\u4e0d\u8bf4\u4e86\u5427\u3002\n\n\u4f8b\u5982$S1$\n\n\u679a\u4e3e$a$\u65f6\uff0c\u6211\u4eec\u7684\u54c8\u5e0c\u503c\u662f$(221111)$\n\n\u679a\u4e3e$b$\u65f6\uff0c\u6211\u4eec\u7684\u54c8\u5e0c\u503c\u662f$(112221)$\n\n\u679a\u4e3e$c$\u65f6\uff0c\u6211\u4eec\u7684\u54c8\u5e0c\u503c\u662f$(111112)$\n\n\u800c\u5176\u4ed6\u5b57\u7b26\u7684\u54c8\u5e0c\u503c\u90fd\u662f$(111111)$\n\n\u8fd9\u6837\u64cd\u4f5c\u53c8\u6709\u4ec0\u4e48\u7528?\u7528\u5904\u5927\u7740\u5462\n\n\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e$S2$\u7684\u54c8\u5e0c\u503c\u4e5f\u662f$(221111),(1122221),(111112)$,\u5176\u4f5923\u4e2a$(111111)$\n\n\u6211\u4eec\u53d1\u73b0\u4ed6\u4eec\u7684\u54c8\u5e0c\u503c\u4e5f\u6210\u5bf9\u5e94\u5173\u7cfb\n\n**\u592a\u68d2\u4e86\uff01 \u8fd9\u6837\u95ee\u9898\u5c31\u53ef\u4ee5\u89e3\u4e86\uff01**\n\n\u5927\u5bb6\u77e5\u9053\u518d\u600e\u4e48\u505a\u4e48\uff1f\u4e0d\u9700\u8981$O(26^2)$\u7684\u679a\u4e3e\u4e86\u3002\u76f4\u63a5\u641e\u4e24\u4e2a$multiset$\uff0c\u628a26\u4e2a\u54c8\u5e0c\u503c\u6254\u8fdb\u53bb\uff0c\u5224\u4e24\u4e2a$multiset$\u76f8\u540c\u5c31\u884c\u4e86\u3002\n\n\u7b97\u6cd5\u5f88\u725b\u903c666\n\n\u3010\u5173\u4e8e\u54c8\u5e0c\u7684\u7384\u5b66\u6545\u4e8b\u3011\n\n\u53cc\u54c8\u5e0c\u5728\u8fd9\u9898\u4e0a\u8dd1\u7684\u662f\u633a\u6162\u7684\uff0c\u6162\u7684\u6d4b\u8bd5\u70b92300ms\uff0c\u65f6\u9650\u662f3s\uff0c\u5f88\u614c\u7684\u3002\n\n\u4e09\u54c8\u5e0c\u80af\u5b9aTLE\u4e86\n\n\u6709\u4e00\u4f4d\u53eb\u505aKrK\u7684\u5927\u4f6c\uff0c\u8fc7\u4e86G\u9898\uff0cF\u9898\u53cc\u54c8\u5e0c\u88abHack\u4e86\uff01\u4e5f\u662f\u4e00\u4e2a\u7ea2\u540d\u5927\u4f6cHack\u7684\n\n\u672c\u6765\u8fd9\u4e2a\u4eba\u6700\u597dRank1\n\n\u6240\u4ee5\u5199\u54c8\u5e0c\u7684\u65f6\u5019\u79cd\u5b50\u6700\u597d\u662f$rand$\u4e00\u4e0b\u54c8\u3002\n\n\u73b0\u5728\u6ca1\u6709Hack\u4e86\u4e8e\u662f\u968f\u4fbf\u5199$seed$\u5c31\u884c\u4e86\u3002\n\n\u3010\u4ee3\u7801\u3011\n\n\u5934\u6587\u4ef6\u592a\u957f\u8bf7\u89c1\u8c05\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std ;\n\n#define rep(i, a, b) for (int (i) = (a); (i) <= (b); (i)++)\n#define Rep(i, a, b) for (int (i) = (a) - 1; (i) < (b); (i)++)\n#define REP(i, a, b) for (int (i) = (a); (i) >= (b); (i)--)\n#define Sort(a, len, cmp) sort(a + 1, a + len + 1, cmp)\n#define ass(a, sum) memset(a, sum, sizeof(a))\n\n#define ls ((rt) << 1)\n#define rs ((rt) << 1 | 1)\n#define lowbit(x) (x & -x)\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\n#define endl '\\n'\n#define ENDL cout << endl\n#define SZ(x) ((int)x.size())\n\ntypedef long long ll ;\ntypedef unsigned long long ull ;\ntypedef vector <int> vi ;\ntypedef pair <int, int> pii ;\ntypedef pair <ll, ll> pll ;\ntypedef map <int, int> mii ;\ntypedef map <string, int> msi ;\ntypedef map <ll, ll> mll ;\n\nconst int N = 200010 ;\nconst double eps = 1e-8 ;\nconst int iinf = INT_MAX ;\nconst ll linf = 2e18 ;\nconst double dinf = 1e30 ;\nconst int MOD1 = 1000000007 ;\nconst int MOD2 = 1000000009 ;\nconst int b1 = 41 ;\nconst int b2 = 37 ;\n\ninline int read(){\n    int X = 0, w = 0 ;\n    char ch = 0 ;\n    while (!isdigit(ch)) { w |= ch == '-' ; ch = getchar() ; }\n    while (isdigit(ch)) X = (X << 3) + (X << 1) + (ch ^ 48), ch = getchar() ;\n    return w ? - X : X ;\n}\n\nvoid write(int x){\n     if (x < 0) putchar('-'), x = - x ;\n     if (x > 9) write(x / 10) ;\n     putchar(x % 10 + '0') ;\n}\n\nvoid print(int x) {\n    cout << x << endl ;\n    exit(0) ;\n}\n\nvoid PRINT(string x) {\n    cout << x << endl ;\n    exit(0) ;\n}\n\nvoid douout(double x){\n     printf(\"%lf\\n\", x + 0.0000000001) ;\n}\n\npii H[30][N] ;\nint pw1[N], pw2[N] ;\nint n, m ;\nchar str[N] ;\n\npii Get(pii H[], int l, int r) {\n    pii ans = H[r] ;\n    l-- ;\n    if (l >= 0) {\n        ans.fi = (ans.fi - ll(H[l].fi) * pw1[r - l] % MOD1 + MOD1) % MOD1 ;\n        ans.se = (ans.se - ll(H[l].se) * pw2[r - l] % MOD2 + MOD2) % MOD2 ;\n    }\n    return ans ;\n}\n\nsigned main() {\n    pw1[0] = pw2[0] = 1 ;\n    scanf(\"%d%d\", &n, &m) ;\n    scanf(\"%s\", str + 1) ;\n    for (int i = 1; i <= n; i++) {\n        pw1[i] = 1ll * pw1[i - 1] * b1 % MOD1 ;\n        pw2[i] = 1ll * pw2[i - 1] * b2 % MOD2 ;\n    }\n    for (int i = 1; i <= n; i++)\n    for (int j = 0; j < 26; j++) {\n        H[j][i].fi = (ll(H[j][i - 1].fi) * b1 + ll(1 + ('a' + j == str[i]))) % MOD1 ;\n        H[j][i].se = (ll(H[j][i - 1].se) * b2 + ll(1 + ('a' + j == str[i]))) % MOD2 ;\n    }\n    while (m--) {\n        int x, y, len ;\n        scanf(\"%d%d%d\", &x, &y, &len) ;\n        multiset <pii> A, B ;\n        for (int i = 0; i < 26; i++) {\n            A.insert(Get(H[i], x, x + len - 1)) ;\n            B.insert(Get(H[i], y, y + len - 1)) ;\n        }\n        printf(\"%s\\n\", A == B ? \"YES\" : \"NO\") ;\n    }\n}\n```\n",
        "postTime": 1545616001,
        "uid": 54900,
        "name": "__Hacheylight__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF985F \u3010Isomorphic Strings\u3011"
    },
    {
        "content": "## \u5206\u6790\n\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u540c\u6784\u4e32\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u6bcf\u79cd\u5b57\u6bcd\uff0c\u7edf\u8ba1\u6bcf\u4e2a\u4f4d\u7f6e\u662f\u5426\u51fa\u73b0\u8fc7\u7684 $01$ \u5e8f\u5217\u3002\n\n\u8fd9\u6837\u6bcf\u4e2a\u8be2\u95ee\uff0c\u53ea\u8981\u628a\u5176\u4e2d\u4e00\u4e2a\u5b50\u4e32\u4e2d\u6bcf\u4e2a\u5b57\u6bcd\u7684 $01$ \u5e8f\u5217\u54c8\u5e0c\u503c\u4e22\u8fdb map \u91cc\u9762\uff0c\u82e5\u53e6\u4e00\u4e2a\u5b50\u4e32\u6240\u6709\u54c8\u5e0c\u503c\u90fd\u80fd\u5728 map \u4e2d\u627e\u5230\uff0c\u5219\u8fd9\u4e24\u4e2a\u4e32\u662f\u540c\u6784\u7684\u3002\n\n\u5982\u679c\u7528 unordered_map\uff0c\u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(m)$\u3002\n\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n#define N 200005\nusing namespace std;\nconst int P=1e9+7,base=13331;\nint n,m,h[26][N],b[N];\nchar s[N];\nunordered_map<int,bool> mp;\nint main() {\n\tscanf(\"%d%d%s\",&n,&m,s);\n\tb[0]=1;\n\tfor(int i=1;i<=n;++i) b[i]=1ll*b[i-1]*base%P;\n\tfor(int i=0;i<26;++i) {\n\t\tint res=0;\n\t\tfor(int j=0;j<n;++j) {\n\t\t\tres=(1ll*res*base+(s[j]-'a'==i))%P;\n\t\t\th[i][j]=res;\n\t\t}\n\t}\n\twhile(m--) {\n\t\tint xl,yl,len;\n\t\tscanf(\"%d%d%d\",&xl,&yl,&len);\n\t\txl--,yl--;\n\t\tmp.clear();\n\t\tint xr=xl+len-1,yr=yl+len-1;\n\t\tfor(int i=0;i<26;++i) {\n\t\t\tmp[((h[i][xr]-1ll*h[i][xl-1]*b[len]%P)%P+P)%P]=1;\n\t\t}\n\t\tbool flg=1;\n\t\tfor(int i=0;i<26&&flg;++i) {\n\t\t\tif(mp.find(((h[i][yr]-1ll*h[i][yl-1]*b[len]%P)%P+P)%P)==mp.end()) flg=0;\n\t\t}\n\t\tflg?puts(\"YES\"):puts(\"NO\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1664707354,
        "uid": 263112,
        "name": "Y_ATM_K",
        "ccfLevel": 7,
        "title": "CF985F Isomorphic Strings"
    },
    {
        "content": "**$\\verb|soltion:|$**\n\n- \u8003\u8651 $hash$\uff0c$hash$ \u51fa\u6bcf\u4e2a\u5b57\u7b26\u5728\u4e24\u4e2a\u533a\u95f4\u4e2d\u7684\u51fa\u73b0\u4f4d\u7f6e\uff0c\u7136\u540e\u6392\u5e8f\u5224\u662f\u5426\u76f8\u7b49\u5373\u53ef\n\n\u90a3\u4e48\u5982\u4f55 $hash$ \uff1f\n\n\u8981 $hash$ \u51fa\u6bcf\u4e2a\u5b57\u7b26\u51fa\u73b0\u4e3a\u6b62\u5230\u533a\u95f4\u5f00\u5934\u7684\u8ddd\u79bb\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u5b57\u7b26\u5b58\u4e0b\u6240\u6709\u7684\u51fa\u73b0\u4f4d\u7f6e\uff0c\u5373 $$h_i=pos_1\\times base^{tot-1}+pos_2\\times base^{tot-2}+\\cdots+pos_{tot}$$\n\n\u6bcf\u4e2a\u5b57\u7b26\u5230\u67e5\u8be2\u533a\u95f4\uff08$[l,r]$\uff09\u533a\u95f4\u5f00\u5934\u7684\u4f4d\u7f6e\u5373\u4e3a $$(pos_x-l)\\times base^{y-x}+(pos_{x+1}-l)\\times base^{y-x-1}+\\cdots+(pos_y-l)$$\n\n\u5373 $$pos_x\\times base^{y-x}+pos_{x+1}\\times base^{y-x-1}+\\cdots+pos_y-l(1+base+base^2+\\cdots base^{y-x})$$\n\n\u7528\u7b49\u6bd4\u6570\u5217\u6c42\u548c $$pos_x\\times base^{y-x}+pos_{x+1}\\times base^{y-x-1}+\\cdots+pos_y-\\frac{l\\times(base^{y-x+1}-1)}{base-1}$$\n\n\u6c42\u4e00\u4e0b\u9006\u5143\uff0c\u7136\u540e\u5c31\u666e\u901a $hash$ \u5c31\u597d\u4e86\n\n**\u4ee3\u7801\uff1a**\uff08\u7528\u7684\u53cc $hash$ ~~\u4ee3\u7801\u7565\u663e\u81c3\u80bf~~\uff0c\u53c8\u8bb0\u4e86\u4e00\u4e0b\u533a\u95f4\u5b57\u7b26\u4e2a\u6570\u9632\u88ab\u63d2 $Q\\omega Q$\uff09\n\n``` cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair <int, int> pii;\nconst int maxn = 2e5 + 10, base = 1e5 + 3, P1 = 1e9 + 7, P2 = 1e9 + 9, inv_b1 = 540539193, inv_b2 = 63828724;\nint n, m, sum[26][maxn], pow1[maxn], pow2[maxn]; char str[maxn]; pair <pii, int> s1[26], s2[26];\nstruct hashmap {\n\tvector <int> vec, sum1, sum2;\n\tvoid init(char c) {\n\t\tvec.push_back(0), sum1.push_back(0), sum2.push_back(0);\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tif (str[i] == c) {\n\t\t\t\tvec.push_back(i);\n\t\t\t\tsum1.push_back((1ll * base * sum1.back() + i) % P1);\n\t\t\t\tsum2.push_back((1ll * base * sum2.back() + i) % P2);\n\t\t\t}\n\t\t}\n\t}\n\tpii get(int l, int r) {\n\t\tint pl = lower_bound(vec.begin(), vec.end(), l) - vec.begin();\n\t\tint pr = upper_bound(vec.begin(), vec.end(), r) - vec.begin() - 1;\n\t\treturn pr < pl ? pii(-1, -1) :\n    \tpii(((sum1[pr] - 1ll * sum1[pl - 1] * pow1[pr - pl + 1] % P1 + P1) % P1 - 1ll * l * (pow1[pr - pl + 1] + P1 - 1) % P1 * inv_b1 % P1 + P1) % P1,\n            ((sum2[pr] - 1ll * sum2[pl - 1] * pow2[pr - pl + 1] % P2 + P2) % P2 - 1ll * l * (pow2[pr - pl + 1] + P2 - 1) % P2 * inv_b2 % P2 + P2) % P2);\n\t}\n} h[26];\n\nint main() {\n\tint p1, p2, k; pow1[0] = pow2[0] = 1;\n\tscanf(\"%d %d %s\", &n, &m, str + 1);\n\tfor (int i = 0; i < 26; i++) {\n\t\th[i].init('a' + i);\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tpow1[i] = 1ll * base * pow1[i - 1] % P1;\n\t\tpow2[i] = 1ll * base * pow2[i - 1] % P2;\n\t\tfor (int j = 0; j < 26; j++) {\n\t\t\tsum[j][i] = sum[j][i - 1];\n\t\t}\n\t\tsum[str[i] - 'a'][i]++;\n\t}\n\twhile (m--) {\n\t\tscanf(\"%d %d %d\", &p1, &p2, &k);\n\t\tfor (int i = 0; i < 26; i++) {\n\t\t\ts1[i] = make_pair(h[i].get(p1, p1 + k - 1), sum[i][p1 + k - 1] - sum[i][p1 - 1]);\n\t\t\ts2[i] = make_pair(h[i].get(p2, p2 + k - 1), sum[i][p2 + k - 1] - sum[i][p2 - 1]);\n\t\t}\n\t\tbool flg = 1;\n\t\tsort(s1, s1 + 26), sort(s2, s2 + 26);\n\t\tfor (int i = 0; i < 26 && flg; i++) {\n\t\t\tflg &= s1[i] == s2[i];\n\t\t}\n\t\tputs(flg ? \"YES\" : \"NO\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1545839915,
        "uid": 73934,
        "name": "Juanzhang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF985F \u3010Isomorphic Strings\u3011"
    },
    {
        "content": "\u5148\u8bb2\u4e0b\u9898\u610f\uff1a\u7ed9\u4f60\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0cm\u6b21\u67e5\u8be2\uff0c\u6bcf\u6b21\u67e5\u8be2\u7ed9\u4f60\u4e24\u4e2a\u8d77\u70b9\u548c\u957f\u5ea6\uff0c\u95ee\u8fd9\u4e24\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u540c\u6784\u5b57\u7b26\u4e32\uff08\u901a\u8fc7\u6620\u5c04\uff09\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u54c8\u5e0c\u6765\u505a\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u5b57\u6bcd\uff0c\u6211\u4eec\u8bb0\u5f55\u4ed6\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5e76\u4e14\u54c8\u5e0c\uff0c\u52a0\u524d\u7f00\u548c\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u67e5\u8be2\uff0c\u628a26\u4e2a\u5b57\u6bcd\u7684\u4f4d\u7f6e\u7684\u54c8\u5e0c\u503c\u653e\u5230multiset\u6216vector\u6392\u5e8f\n\u5982\u679c\u4e00\u6837\u5c31\u662fYES\u5426\u5219\u662fNO\n\n\u6700\u597d\u4f7f\u7528\u53cc\u54c8\u5e0c\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u88abhack\uff08KrK\u53cc\u54c8\u5e0c\u4e5f\u88abhack\u4e86-^^-\uff09\n\n\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=200005;\nconst int mod1=1000000007;\nconst int mod2=1000000009;\nconst int arg1=20040911;\nconst int arg2=20050715;\nint pw1[N],pw2[N];\nint n,m;\nchar str[N];\nvector<int>v;\npair<int,int>h[26][N];\npair<int,int>get(pair<int,int>h[],int lef,int rig)\n{\n\tpair<int,int>my=h[rig];\n\tlef--;\n\tif(lef>=0)\n\t{\n\t\tmy.first=(my.first-(long long)(h[lef].first)*pw1[rig-lef]%mod1+mod1)%mod1;\n\t\tmy.second=(my.second-(long long)(h[lef].second)*pw2[rig-lef]%mod2+mod2)%mod2;\n\t}\n\treturn my;\n} \nint main()\n{\n\tpw1[0]=pw2[0]=1;\n\tfor(int i=1;i<N;i++)\n\t{\n\t\tpw1[i]=(long long)pw1[i-1]*arg1%mod1;\n\t\tpw2[i]=(long long)pw2[i-1]*arg2%mod2;\n\t}\n\tscanf(\"%d%d\",&n,&m);\n\tscanf(\"%s\",str+1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=0;j<26;j++)\n\t\t{\n\t\t\th[j][i].first=((long long)(h[j][i-1].first)*arg1+(long long)(1+('a'+j==str[i])))%mod1;\n\t\t\th[j][i].second=((long long)(h[j][i-1].second)*arg2+(long long)(1+('a'+j==str[i])))%mod2;\n\t\t}\n\t}\n\twhile(m--)\n\t{\n\t\tint x,y,len;\n\t\tscanf(\"%d%d%d\",&x,&y,&len);\n\t\tmultiset<pair<int,int>>a,b;\n\t\tfor(int i=0;i<26;i++)\n\t\t{\n\t\t\ta.insert(get(h[i],x,x+len-1));\n\t\t\tb.insert(get(h[i],y,y+len-1));\n\t\t}\n\t\tprintf(\"%s\\n\",a==b?\"YES\":\"NO\");\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1545467601,
        "uid": 67896,
        "name": "AllureLove",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF985F \u3010Isomorphic Strings\u3011"
    },
    {
        "content": "#### \u601d\u8def\n\n\u5bf9\u6bcf\u4e00\u4e2a\u5b57\u7b26\u6784\u5efa\u4e00\u4e2a $ 01 $ \u4e32\uff0c\u8868\u793a\u539f\u5b57\u7b26\u4e32\u7b2c\u51e0\u4e2a\u4f4d\u7f6e\u662f\u5426\u662f\u8fd9\u4e2a\u5b57\u7b26\u3002\u6bcf\u6b21\u8be2\u95ee\u53ea\u9700\u5c06\u6240\u6709\u5c0f\u5199\u5b57\u6bcd\u7684 $ 01 $ \u4e32\u7684\u54c8\u5e0c\u503c\u627e\u51fa\uff0c\u6392\u5e8f\uff0c\u7136\u540e\u5224\u65ad\u662f\u5426\u4f9d\u4f9d\u76f8\u7b49\u5373\u53ef\u3002\n\n#### \u4ee3\u7801\n\n```\n#include <bits/stdc++.h>\nusing namespace std;\n#define sed 2\n#define mod 998244353\ntypedef long long ll;\nconst int N = 2e5 + 5 , M = 26 + 5;\nint n , m , x , y , len;\nchar s[N];\nll a[N][M] , h[N][M] , pw[N] , p[M] , q[M];\nll query(int l , int r , int p)\n{\n\treturn (h[r][p] - h[l - 1][p] * pw[r - l + 1] % mod + mod) % mod;\n}\nint main()\n{\n\tcin >> n >> m;\n\tcin >> (s + 1);\n\tpw[0] = 1;\n\tfor(int i = 1 ; i <= n ; ++ i )\n\t{\n\t\tpw[i] = pw[i - 1] * sed % mod;\n\t\tfor(int j = 'a' ; j <= 'z' ; ++ j )\n\t\t{\n\t\t\tint k = j - 'a' + 1;\n\t\t\ta[i][k] = (s[i] == j);\n\t\t\th[i][k] = (h[i - 1][k] * sed % mod + a[i][k]) % mod;\n\t\t}\n\t}\n\twhile(m --)\n\t{\n\t\tcin >> x >> y >> len;\n\t\tbool flag = 0;\n\t\tfor(int i = 1 ; i <= 26 ; ++ i)\n\t\t{\n\t\t\tp[i] = query(x , x + len - 1 , i);\n\t\t\tq[i] = query(y , y + len - 1 , i); \n\t\t}\n\t\tsort(p + 1 , p + 1 + 26);\n\t\tsort(q + 1 , q + 1 + 26);\n\t\tfor(int i = 1 ; i <= 26 ; ++ i)\n\t\t{\n\t\t\tif(p[i] != q[i])\n\t\t\t{\n\t\t\t\tflag = 1;\n\t\t\t\tbreak;\t\n\t\t\t}\t\n\t\t} \n\t\tif(!flag) cout << \"YES\" << endl;\n\t\telse cout << \"NO\" << endl;\n\t}\n\treturn 0;\n}",
        "postTime": 1649134640,
        "uid": 594904,
        "name": "TNTtramcar",
        "ccfLevel": 0,
        "title": "CF985F"
    },
    {
        "content": "\u8003\u8651\u4f7f\u7528\u5b57\u7b26\u4e32\u54c8\u5e0c\u3002\n\n\u7531\u4e8e\u5141\u8bb8\u5c06\u76f8\u540c\u7684\u5b57\u6bcd\u66ff\u6362\uff0c\u6211\u4eec\u8003\u8651\u600e\u4e48\u4fdd\u8bc1\u8fdb\u884c\u66ff\u6362\u524d\u540e\u7684\u54c8\u5e0c\u503c\u4e0d\u53d8\u3002\u5bb9\u6613\u60f3\u5230\u5206\u522b\u5bf9 $26$ \u4e2a\u5b57\u6bcd\uff0c\u5c06\u539f\u5b57\u7b26\u4e32\u4e2d\u5f53\u524d\u5b57\u6bcd\u66ff\u6362\u6210 $1$\uff0c\u5176\u5b83\u5b57\u6bcd\u66ff\u6362\u6210 $0$\uff0c\u5f97\u5230 $26$ \u4e2a `01` \u4e32\uff0c\u5bf9\u4ed6\u4eec\u8fdb\u884c\u54c8\u5e0c\u540e\u6392\u5e8f\u3002\u6b64\u65f6\u5bf9\u5b57\u6bcd\u8fdb\u884c\u66ff\u6362\u4e0d\u4f1a\u6539\u53d8\u6392\u5e8f\u540e\u7684 $26$ \u4e2a\u54c8\u5e0c\u503c\u3002\u7136\u540e\u5957\u6a21\u677f\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\uff0c\u6709 $26\\log{26}$ \u7684\u5e38\u6570\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n```cpp\n//By: Luogu@rui_er(122461)\n#include <bits/stdc++.h>\n#define rep(x,y,z) for(int x=y;x<=z;x++)\n#define per(x,y,z) for(int x=y;x>=z;x--)\n#define debug printf(\"Running %s on line %d...\\n\",__FUNCTION__,__LINE__)\nusing namespace std;\ntypedef long long ll;\nconst int N = 2e5+5, B = 101, P = 1e9+7;\n\nint n, m, a[26][N];\nchar s[N];\ntemplate<typename T> void chkmin(T &x, T y) {if(x > y) x = y;}\ntemplate<typename T> void chkmax(T &x, T y) {if(x < y) x = y;}\nstruct Hash {\n\tint h[N], pw[N];\n\tvoid init(int *p, int x) {\n\t\tpw[0] = 1;\n\t\trep(i, 1, x) h[i] = (1LL * h[i-1] * B % P + p[i]) % P;\n\t\trep(i, 1, x) pw[i] = 1LL * pw[i-1] * B % P;\n\t}\n\tint get(int L, int R) {\n\t\treturn (h[R] - 1LL * h[L-1] * pw[R-L+1] % P + P) % P;\n\t}\n}hsh[26];\nvector<int> D, K, ans;\n\nint main() {\n\tscanf(\"%d%d%s\", &n, &m, s+1);\n\trep(i, 1, n) ++a[s[i]-'a'][i];\n\trep(i, 0, 25) hsh[i].init(a[i], n);\n\trep(i, 1, m) {\n\t\tint x, y, len;\n\t\tscanf(\"%d%d%d\", &x, &y, &len);\n\t\tD.clear(); K.clear();\n\t\trep(k, 0, 25) D.push_back(hsh[k].get(x, x+len-1));\n\t\trep(k, 0, 25) K.push_back(hsh[k].get(y, y+len-1));\n\t\tsort(D.begin(), D.end());\n\t\tsort(K.begin(), K.end());\n\t\tputs(D==K?\"YES\":\"NO\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1629460089,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF985F\u3010Isomorphic Strings\u3011"
    },
    {
        "content": "\u5176\u5b9e\u54c8\u5e0c\u6709\u4e00\u4e2a\u6280\u5de7\uff0c\u5f00ull\u76f4\u63a5\u8ba9\u5b83\u81ea\u7136\u6ea2\u51fa\u3002\n\n~~\u5565\u4e8b\u6ca1\u6709\u3002~~\n\n\u54c8\u5e0c\u8fd8\u6709\u4e2a\u6280\u5de7\uff0c\u5728\u6bd4\u5bf9\u5b57\u7b26\u4e32\u7684\u65f6\u5019\u540c\u65f6\u6bd4\u8f83\u957f\u5ea6\uff0c\u8fd9\u6837\u51b2\u7a81\u7684\u6982\u7387\u4f1a\u5c0f\u4e00\u70b9\u3002\n\n\u8003\u8651\u4e24\u4e2a\u5b57\u7b26\u4e32\u5339\u914d\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u5b57\u7b26\u4e32\u91cc\u9762\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u5199\u51fa\u8fd9\u4e2a\u5b57\u6bcd\u5728\u4e32\u6bcf\u4e00\u4f4d\u662f\u5426\u5b58\u5728\u7684\u60c5\u51b5\uff0c\u4f8b\u5982\uff1a\n\n$abacabcaabbaab$\uff1a\n\n$a:10101001100110$\n\n$b:01000100011001$\n\n$c:00010010000000$\n\n$d\\to z:00000000000000$\n\n\u7136\u540e\u628a\u4e24\u4e2a\u5b57\u7b26\u4e32\u7528\u5b57\u7b26\u4e32\u54c8\u5e0c\u5904\u7406\u4e00\u4e0b\u4e22\u8fdb muliset \u91cc\u81ea\u5df1\u6bd4\u8f83\u662f\u5426\u76f8\u540c\u5c31\u884c\u4e86\u3002\n\n\u8fd0\u6c14\u597d\uff0c\u5355\u54c8\u5e0c\u80fd\u8fc7\uff1b~~\u8fd0\u6c14\u4e0d\u597d\uff0c\u53cc\u54c8\u5e0c\u4e5f\u4e0d\u4e00\u5b9a\u80fd\u8fc7...~~\n\n\u4f46\u662f\u53cc\u54c8\u5e0c\u8dd1\u5f97\u98de\u5feb\uff0c\u5355\u54c8\u5e0c\u6162\u6210\u4e86\u6811\u61d2\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nnamespace mystd {\n    inline int read() {\n        int w = 1, q = 0;\n        char ch = ' ';\n        while (ch != '-' && (ch < '0' || ch > '9')) ch = getchar();\n        if (ch == '-') w = -1, ch = getchar();\n        while (ch >= '0' && ch <= '9') q = q * 10 + ch - '0', ch = getchar();\n        return w * q;\n    }\n    inline void write(int x) {\n        if (x < 0) {\n            x = ~(x - 1);\n            putchar('-');\n        }\n        if (x > 9) write(x / 10);\n        putchar(x % 10 + '0');\n    }\n}\nusing namespace std;\nusing namespace mystd;\n\nconst int maxn = 2e5 + 200;;\nconst int mod = 1e9 + 7;\nconst int base = 114514;\n\nint n, m, pw[maxn], h[26][maxn];;\nchar ch[maxn];\n\nint get(int id, int l, int r) {\n    int res = h[id][r];\n    l--;\n    if (l >= 0) {\n        res = (res - h[id][l] * pw[r - l] % mod + mod) % mod;\n    }\n    return res;\n}\n\nsigned main() {\n    pw[0] = 1;\n    for (int i = 1; i < maxn; i++) {\n        pw[i] = pw[i - 1] * base % mod;\n    }\n    n = read();\n    m = read();\n    scanf(\"%s\", ch + 1);\n    for (int i = 1; i <= n; i++) {\n        for (int j = 0; j <= 25; j++) {\n            h[j][i] = (h[j][i - 1] * base + 1 + (j == ch[i] - 'a')) % mod;\n        }\n    }\n    for (int k = 1, l, r, len; k <= m; k++) {\n        l = read();\n        r = read();\n        len = read();\n        multiset<int> s, t;\n        for (int i = 0; i <= 25; i++) {\n            s.insert(get(i, l, l + len - 1));\n            t.insert(get(i, r, r + len - 1));\n        }\n        printf(\"%s\\n\", s == t ? \"YES\" : \"NO\");\n    }\n    return 0;\n}\n\n```",
        "postTime": 1626847394,
        "uid": 306573,
        "name": "Ender32k",
        "ccfLevel": 0,
        "title": "CF985F Isomorphic Strings \u9898\u89e3"
    }
]
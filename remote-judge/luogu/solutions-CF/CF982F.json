[
    {
        "content": "# The Meeting Place Cannot Be Changed\n\n## \u58f0\u660e\uff1a\n\n\u8fd9\u7bc7\u9898\u89e3\u662f\u672c\u849f\u84bb\u5199\u7684\u7b2c\u56db\u7bc7\u9898\u89e3\uff0c\u5982\u679c\u4ee3\u7801\u90e8\u5206\u6709\u95ee\u9898\uff0c\u656c\u8bf7\u8c05\u89e3\u3002\u53e6\u5916\uff0c\u5982\u679c\u6709\u63cf\u8ff0\u4e0d\u6070\u5f53\u7684\u5730\u65b9\uff0c\u6216\u8005\u9519\u8bef\u7684\u5730\u65b9\uff0c\u5e0c\u671b\u5927\u5bb6\u591a\u591a\u6307\u51fa\uff0c\u6b22\u8fce\u5927\u5bb6\u591a\u591a\u7559\u8a00\u8bc4\u8bba\uff0c\u5171\u540c\u8fdb\u6b65\u3002\n\n## \u9898\u76ee\u63cf\u8ff0\n\n### \u9898\u76ee\u4f20\u9001\u95e8\uff1a\n\nhttp://codeforces.com/problemset/problem/982/F\n\n### \u9898\u89e3\n\n\u7b54\u6848\u8981\u6c42\u7684\u8fd9\u4e2a\u70b9\u5fc5\u7136\u8981\u6ee1\u8db3\u7ecf\u8fc7\u8fd9\u5f20\u56fe\u4e0a\u6240\u6709\u7684\u73af\u3002\n\n\u6211\u4eec\u5148\u5728\u8fd9\u5f20\u56fe\u4e0a\u53d6\u51fa\u4efb\u610f\u7684\u4e00\u4e2a\u73af\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u73af\u4e0a\u6c42\u51fa\u6240\u6709\u4ece\u8be5\u73af\u4e0a\u67d0\u4e00\u70b9\u51fa\u67d0\u4e00\u70b9\u5165\u7684\u5f27\u3002\n\n\u5bf9\u4e8e\u4e00\u6761\u8fd9\u6837\u7684\u5f27\uff0c\u6ee1\u8db3\u8981\u6c42\u7684\u7b54\u6848\u70b9\u5fc5\u7136\u5728 \u51fa\u73af\u70b9 -> \u5165\u73af\u70b9 \u7684\u8def\u5f84\u7684\u8865\u96c6\u4e0a\uff0c\u6240\u4ee5\u6211\u4eec\u628a\u90a3\u6bb5\u70b9\u6253\u4e0a\u6807\u8bb0\u3002\n\n\u7279\u522b\u7684\uff0c\u5982\u679c\u5165\u73af\u70b9\u7b49\u4e8e\u51fa\u73af\u70b9\uff0c\u90a3\u4e48\u6253\u4e0a\u6807\u8bb0\u7684\u5c31\u53ea\u80fd\u662f\u90a3\u4e2a\u70b9\u3002\n\n\u6253\u597d\u6807\u8bb0\u8dd1\u4e2a\u524d\u7f00\u548c\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u70b9\u5b83\u7684\u6807\u8bb0\u6570\u7b49\u4e8e\u5f27\u7684\u6570\u91cf\u90a3\u4e48\u8fd9\u4e2a\u70b9\u5c31\u662f\u7b54\u6848\u3002\n\n\u5173\u4e8e\u65e0\u89e3\u7684\u60c5\u51b5\uff0c\u7b2c\u4e00\u79cd\u662f\u56fe\u4e0a\u6ca1\u73af\uff0c\u7b2c\u4e8c\u79cd\u662f\u5728\u53bb\u6389\u7b54\u6848\u90a3\u4e2a\u70b9\u4e4b\u540e\u8fd8\u80fd\u627e\u5230\u7b2c\u4e8c\u4e2a\u6ee1\u8db3\u8981\u6c42\u7684\u70b9\u3002\n\n\u5173\u4e8e\u600e\u4e48\u627e\u5f27\uff0c\u6211\u4eec\u628a\u5f27\u5206\u522b\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f\u5411\u524d\u7684\u5f27\uff0c\u4e00\u7c7b\u662f\u5411\u540e\u7684\u5f27\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e24\u7c7b\u5f27\uff0c\u6211\u4eec\u5206\u522b\u4ece\u524d\u5f80\u540e\u548c\u4ece\u540e\u5f80\u524d\u679a\u4e3e\u73af\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u5728dfs\u7684\u65f6\u5019\u5bf9\u8bbf\u95ee\u7684\u8282\u70b9\u6253\u4e2a\u6807\u8bb0\u3002\n\n\u4e00\u4e2a\u70b9\u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u88ab\u8bbf\u95ee\u8fc7\u4e86\uff0c\u90a3\u4e48\u73b0\u5728\u7684\u70b9\u518d\u8bbf\u95ee\u7684\u8bdd\u627e\u5230\u7684\u5f27\u53ea\u80fd\u662f\u539f\u6765\u627e\u5230\u7684\u5f27\u7684\u5b50\u96c6\uff0c\u5e76\u6ca1\u6709\u610f\u4e49\u3002\n\n\u6240\u4ee5\u8fd9\u9053\u9898\u5c31\u505a\u5b8c\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(n)\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>//\u4e2a\u4eba\u5efa\u8bae\u7528\u4e07\u80fd\u5934\nusing namespace std;//\u4e2a\u4eba\u5efa\u8bae\u52a0\u4e0a\u540d\u5b57\u7a7a\u95f4\nstruct node\n{\n\tint a,b;\n}e[500005];//\u6570\u7ec4\u522b\u5f00\u5c0f\u4e86\nint n,m,ans,res,k,tot,flag[100005],tag[100005],check[100005],sum[100005],la[100005],ff[500005],c[100005],p[100005],pre[100005],pos[100005];//\u6570\u7ec4\u522b\u5f00\u5c0f\u4e86\nvoid add(int a,int b)//add\u51fd\u6570\n{\n\te[++k]=(node){a,b};\n\tff[k]=la[a];\n\tla[a]=k;\n}\nvoid dfs1(int x)//dfs1\u51fd\u6570\n{\n\tint a; \n\tif(tot||check[x])return;c[x]=-1;\n\tfor(a=la[x];a&&!tot;a=ff[a])\n\t{\n\t\tif(check[e[a].b])continue;\n\t\tif(c[e[a].b]==-1)\n\t\t{\n\t\t\twhile(x!=e[a].b)p[++tot]=x,x=pre[x];\n\t\t\tp[++tot]=e[a].b;return;\n\t\t}\n\t\tif(!c[e[a].b])pre[e[a].b]=x,dfs1(e[a].b);\n\t}\n\tc[x]=1;\n}\nvoid dfs2(int s,int x)//dfs2\u51fd\u6570\n{\n\tint a,y;\n\tif(check[x])return;\n\tflag[x]=1;\n\tfor(a=la[x];a;a=ff[a])\n\t{\n\t\tif(check[e[a].b])continue;\n\t\tif(tag[e[a].b])\n\t\t{\n\t\t\tif(tag[x]&&tag[e[a].b])continue;\n\t\t\tif(pos[s]>=pos[e[a].b])continue;\n\t\t\ty=e[a].b;\n\t\t\tres++;\n\t\t\tsum[1]++;\n\t\t\tsum[pos[s]+1]--;\n\t\t\tsum[pos[y]]++;\n\t\t\tsum[tot+1]--;\n\t\t}\n\t\telse if(!flag[e[a].b])\n\t\t\tdfs2(s,e[a].b);\t\t\n\t}\n}\nvoid dfs3(int s,int x)//dfs3\u51fd\u6570\n{\n\tint a,y;\n\tif(check[x])return;flag[x]=1;\n\tfor(a=la[x];a;a=ff[a])\n\t{\n\t\tif(check[e[a].b])continue;\n\t\tif(tag[e[a].b])\n\t\t{\n\t\t\tif(tag[x]&&tag[e[a].b])continue;\n\t\t\tif(pos[s]<pos[e[a].b])continue;\n\t\t\ty=e[a].b;\n\t\t\tres++;\n\t\t\tsum[pos[y]]++;\n\t\t\tsum[pos[s]+1]--;\n\t\t}\n\t\telse if(!flag[e[a].b])dfs3(s,e[a].b);\t\t\n\t}\n}\nint solve()//solve\u51fd\u6570\n{\n\tint i,g=0;\n\tres=tot=0;\n\tmemset(c,0,sizeof(c));\n\tfor(i=1;i<=n&&!tot;i++)\n\t\tif(!c[i])\n\t\t\tdfs1(i);\n\tif(!tot)return 0;\n\treverse(p+1,p+tot+1);\n\tmemset(tag,0,sizeof(tag));\n\tmemset(pos,0,sizeof(pos));\n\tmemset(sum,0,sizeof(sum));\n\tfor(i=1;i<=tot;i++)\n\t{\n\t\ttag[p[i]]=1;\n\t\tpos[p[i]]=i;\n\t}\n\tmemset(flag,0,sizeof(flag));\n\tfor(i=1;i<=tot;i++)\n\t\tdfs2(p[i],p[i]);\n\tmemset(flag,0,sizeof(flag));\n\tfor(i=tot;i;i--)\n\t\tdfs3(p[i],p[i]);\n\tfor(i=1;i<=tot;i++)\n\t{\n\t\tsum[i]+=sum[i-1];\n\t\tif(sum[i]==res)\n\t\t{\n\t\t\tg=p[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\tcheck[g]=1;\n\treturn g;\n}\nint main()//\u4e3b\u51fd\u6570\n{\n\tint a,b,i;\n\tcin>>n>>m;//\u8f93\u5165\n\tfor(i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d%d\",&a,&b);//\u8f93\u5165\n\t\tadd(a,b);//\u8c03\u7528add\u51fd\u6570\n\t}\n\tans=solve();//\u8c03\u7528slove\u51fd\u6570\n   //\u8f93\u51fa\n\tif(!ans)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tif(!solve())\n\t{\n\t\tcout<<ans<<endl;\n\t}\n\telse\n\t{\n\t\tputs(\"-1\");\n\t}\n\treturn 0;\n}\u5343\u4e07\u4e0d\u8981\u6284\u88ad\u5440\uff01\n```\n",
        "postTime": 1609231529,
        "uid": 142293,
        "name": "LHN200861",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF982F \u3010The Meeting Place Cannot Be Changed\u3011"
    }
]
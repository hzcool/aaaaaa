[
    {
        "content": "\u975e\u5e38\u7b80\u5355\u7684\u9898\u3002\n\n\u4ed4\u7ec6\u60f3\u4e00\u4e0b\u4f1a\u53d1\u73b0\u4e00\u5b9a\u662f\u5927\u4e8e\u6839\u53f7n\u7684\u6570\u52a0\u4e0a\u4e00\u4e2a\u201c\u7b80\u5355\u6570\u201d\u8868\u793a\u7684\n\n\u9884\u5904\u7406\u5927\u4e8e\u6839\u53f7\u7684\u5e42\u6b21\u6570\n\n\u5c0f\u4e8e\u6839\u53f7\u7684\u5e42\u6b21\u6570\u4e00\u5b9a\u662f\u201c\u539f\u6570\u201d\u6700\u4f18\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nmap<ll,string>mp;\nll n;\nint main(){\n\tscanf(\"%I64d\",&n);\n\tfor (ll i=2;i*i<=n;i++){\n\t\tfor (ll j=i*i,k=2;j<=n;j*=i,k++){\n\t\t\tstring tmp=to_string(i)+\"^\"+to_string(k);\n\t\t\tif (!mp.count(j)) mp[j]=to_string(j);\n\t\t\tif (tmp.size()<mp[j].size()) mp[j]=tmp;\n\t\t}\n\t}\n\tstring ans=to_string(n);\n\tfor (auto x:mp){\n\t\tstring tmp=\"\";\n\t\tll k=n/x.first,b=n%x.first;\n\t\tif (k>1) tmp=(mp.count(k)?mp[k]:to_string(k))+\"*\";\n\t\ttmp+=x.second;\n\t\tif (b) tmp+=\"+\"+(mp.count(b)?mp[b]:to_string(b));\n\t\tif (tmp.size()<ans.size()) ans=tmp; \n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n} \n```\n\n\n",
        "postTime": 1533998858,
        "uid": 34444,
        "name": "\u5927\u83dc\u9e21fks",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF991F \u3010Concise and clear\u3011"
    },
    {
        "content": "# \u9898\u89e3 - $\\mathrm{CF991F}$\n\n## \u9898\u76ee\u610f\u601d\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF991F)\n\n## $\\mathrm{Sol}$\n\n\u6211\u7684\u65b9\u6cd5\u7279\u522b\u590d\u6742\uff0c\u7ec6\u8282\u53ca\u5176\u591a\uff0c\u4ee3\u7801\u957f\u8fbe $320$ \u884c\n\n\u6211\u4eec\u8003\u8651\u6784\u9020\u5f62\u5f0f\uff1a\n\n$x=a+b\\times c^d$\n\n$x=c^d+e^f$\n\n$x=c^d\\times e^f+a$\n\n$x=c^d\\times b+a$\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\u6211\u4eec\u66b4\u529b\u679a\u4e3e $c^d$ \u53ef\u4ee5\u8f7b\u677e\u7b97\u51fa $a,b$ \n\n\u5bf9\u4e8e $c^d+e^f$ \u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u628a $f_{x}$ \u8868\u793a $x$ \u7528 $b^c$ \u7c7b\u578b\u8868\u793a\u51fa\u6765\u7684\u6700\u77ed\u957f\u5ea6\u3002\u7136\u540e\u679a\u4e3e $c^d$ \u540c\u65f6\u53ef\u4ee5\u8bb0\u5f55 $e^f$ \u7684\u957f\u5ea6\u5230\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u7684\u65f6\u5019\u8fd8\u539f\u5e42\u6b21\u5f62\u5f0f\u5373\u53ef\u3002\u5e42\u4e58\u5e42\u540c\u7406\u53ef\u5f97\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e09\u548c\u56db\u7684\u60c5\u51b5\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u52a0\u7684\u6570 $a$ \u518d\u4e0e\u4e0a\u9762\u540c\u7406\u7684\u505a\u6cd5\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u6700\u540e\u7b54\u6848\u4e0e\u672c\u8eab\u957f\u5ea6\u53bb\u5c0f\u5373\u53ef\u3002\n\n```cpp\nconst int mod=1e9+7;\nconst int mo=998244353;\nconst int N=5e5+5;\n\nint n,ans,P,BA,CS,Mul;\nmap<int,int> f;\n\ninline int ksm(int x,int y)\n{\n\tint ans=1ll;\n\twhile(y)\n\t{\n\t\tif(y&1ll) ans=ans*x;\n\t\tx=x*x;\n\t\ty>>=1ll;\n\t}\n\treturn ans;\n}\n\ninline int calc(int x)\n{\n\tif(!x) return 0;\n\treturn (int)log10(x)+1;\n}\n\nsigned main()\n{\n\tio.read(n);\n\tans=calc(n);\n\tint S=sqrt(n);\n\tFor(i,2,S) For(j,2,50)\n\t{\n\t\tint x=ksm(i,j);\n\t\tif(x>n) break;\n\t\tif(!f[x]) f[x]=calc(i)+calc(j)+1;\n\t\telse f[x]=min(f[x],calc(i)+calc(j)+1);\n\t}\n\tint base=2;\n\tint AA=0,BB=0,CC=0,Else=0,fll=0,FF=0;\n\t\n\tFor(del,0,10)\n\t{\n\t\tint goal=n-del;\n\t\tbase=2;\n\t\tfor (;;)\n\t\t{\n\t\t\tif(base*base>goal) break;\n\t\t\tFor(i,2,50)\n\t\t\t{\n\t\t\t\tint x=ksm(base,i);\n\t\t\t\tif(x>goal) break;\n\t\t\t\tint step=f[goal-x];\n\t\t\t\tif(!step&&x!=goal) continue;\n\t\t\t\tif(x==goal) \n\t\t\t\t{\n\t\t\t\t\tint AD=calc(del)+(del>0);\n\t\t\t\t\tif(calc(base)+calc(i)+1+AD<ans) ans=AD+calc(base)+calc(i)+1,AA=base,BB=i,FF=del,CC=0;\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tint AD=calc(del)+(del>0);\n\t\t\t\t\tif(calc(base)+calc(i)+2+step+AD<ans) ans=AD+calc(base)+calc(i)+2+step,AA=base,BB=i,CC=goal-x,Else=step,FF=del;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbase++;\n\t\t}\n\t}\n\tint Ans1=ans;\n\tint AAA=0,BBB=0,CCC=0,EElse=0,FFF=0;\n\t\n\tFor(del,0,10)\n\t{\n\t\tint goal=n-del;\n\t\tbase=2;\n\t\tfor (;;)\n\t\t{\n\t\t\tif(base*base>goal) break;\n\t\t\tFor(i,1,50)\n\t\t\t{\n\t\t\t\tint x=ksm(base,i);\n\t\t\t\tif(x>goal) break;\n\t\t\t\tif(goal%x) continue;\n\t\t\t\tint step=f[goal/x];\n\t\t\t\tif(!step&&x!=goal) continue;\n\t\t\t\tif(x==goal) \n\t\t\t\t{\n\t\t\t\t\tint AD=calc(del)+(del>0);\n\t\t\t\t\tif(calc(base)+calc(i)+1+AD<ans) ans=AD+calc(base)+calc(i)+1,AAA=base,BBB=i,FFF=del,CCC=0;\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tint AD=calc(del)+(del>0);\n\t\t\t\t\tif(calc(base)+calc(i)+2+step+AD<ans) ans=AD+calc(base)+calc(i)+2+step,AAA=base,BBB=i,CCC=goal/x,EElse=step,FFF=del;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbase++;\n\t\t}\n\t}\n\t\n\tint Ans2=ans;\n\t\n\tP=n;\n\tbase=2;\n\tfor (;;)\n\t{\n\t\tif(base*base>n) break;\n\t\tFor(i,1,50)\n\t\t{\n\t\t\tint x=ksm(base,i);\n\t\t\tif(x>n) break;\n\t\t\tint rem=n/x;\n\t\t\tint A=calc(rem);\n\t\t\tif(rem==1) A=0;\n\t\t\tint B=calc(n-rem*x);\n\t\t\tif(f[n-rem*x]) B=min(B,f[n-rem*x]);\n\t\t\tint C=calc(i);\n\t\t\tint D=calc(base);\n\t\t\tif(n-rem*x) B++;\n\t\t\tif(i>1) C++;\n\t\t\tif(A>1) A++;\n\t\t\tif(A+B+C+D<ans) \n\t\t\t{\n\t\t\t\tans=A+B+C+D;\n\t\t\t\tP=n-rem*x;\n\t\t\t\tBA=base;\n\t\t\t\tCS=i;\n\t\t\t\tMul=rem;\n\t\t\t}\n\t\t}\n\t\tbase++;\n\t}\n\t\n\tif(ans==Ans2&&AAA&&BBB)\n\t{\n\t\tprintf(\"%lld^%lld\",AAA,BBB);\n\t\tint FFA=0,FFB=0;\n\t\tif(FFF)\n\t\t{\n\t\t\tint len=calc(FFF);\n\t\t\tif(f[FFF]<len)\n\t\t\t{\n\t\t\t\tFor(i,2,S) For(j,2,50)\n\t\t\t\t{\n\t\t\t\t\tint x=ksm(i,j);\n\t\t\t\t\tif(x>FFF) break;\n\t\t\t\t\tif(x==FFF) \n\t\t\t\t\t{\n\t\t\t\t\t\tif(calc(i)+calc(j)+1==f[FFF]) FFA=i,FFB=j;\n\t\t\t\t\t}\n\t\t\t\t\tif(FFA&&FFB) break;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(CCC)\n\t\t{\n\t\t\tputchar('*');\n\t\t\tint DD=0,EE=0;\n\t\t\tFor(i,2,S) For(j,2,50)\n\t\t\t{\n\t\t\t\tint x=ksm(i,j);\n\t\t\t\tif(x>n) break;\n\t\t\t\tif(x==CCC) \n\t\t\t\t{\n\t\t\t\t\tif(calc(i)+calc(j)+1==EElse) DD=i,EE=j;\n\t\t\t\t}\n\t\t\t\tif(DD&&EE) break;\n\t\t\t}\n\t\t\tprintf(\"%lld^%lld\",DD,EE);\n\t\t\tif(FFF) \n\t\t\t{\n\t\t\t\tputchar('+');\n\t\t\t\tif(FFA) printf(\"%lld^%lld\",FFA,FFB);\n\t\t\t\telse printf(\"%lld\",FFF);\n\t\t\t}\n\t\t}\n\t\telse if(FFF) \n\t\t{\n\t\t\tputchar('+');\n\t\t\tif(FFA) printf(\"%lld^%lld\",FFA,FFB);\n\t\t\telse printf(\"%lld\",FFF);\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\tif(ans==Ans1&&AA&&BB)\n\t{\n\t\tprintf(\"%lld^%lld\",AA,BB);\n\t\tint FFA=0,FFB=0;\n\t\tif(FF)\n\t\t{\n\t\t\tint len=calc(FF);\n\t\t\tif(f[FF]<len)\n\t\t\t{\n\t\t\t\tFor(i,2,S) For(j,2,50)\n\t\t\t\t{\n\t\t\t\t\tint x=ksm(i,j);\n\t\t\t\t\tif(x>FF) break;\n\t\t\t\t\tif(x==FF) \n\t\t\t\t\t{\n\t\t\t\t\t\tif(calc(i)+calc(j)+1==f[FF]) FFA=i,FFB=j;\n\t\t\t\t\t}\n\t\t\t\t\tif(FFA&&FFB) break;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(CC) \n\t\t{\n\t\t\tputchar('+');\n\t\t\tint DD=0,EE=0;\n\t\t\tFor(i,2,S) For(j,2,50)\n\t\t\t{\n\t\t\t\tint x=ksm(i,j);\n\t\t\t\tif(x>n) break;\n\t\t\t\tif(x==CC) \n\t\t\t\t{\n\t\t\t\t\tif(calc(i)+calc(j)+1==Else) DD=i,EE=j;\n\t\t\t\t}\n\t\t\t\tif(DD&&EE) break;\n\t\t\t}\n\t\t\tprintf(\"%lld^%lld\",DD,EE);\n\t\t\tif(FF) \n\t\t\t{\n\t\t\t\tputchar('+');\n\t\t\t\tif(FFA) printf(\"%lld^%lld\",FFA,FFB);\n\t\t\t\telse printf(\"%lld\",FF);\n\t\t\t}\n\t\t}\n\t\telse if(FF) \n\t\t{\n\t\t\tputchar('+');\n\t\t\tif(FFA) printf(\"%lld^%lld\",FFA,FFB);\n\t\t\telse printf(\"%lld\",FF);\n\t\t}\n\t\treturn 0;\n\t}\n\tif(P) \n\t{\n\t\tint FFA=0,FFB=0;\n\t\tint len=calc(P);\n\t\tif(f[P]<len)\n\t\t{\n\t\t\tFor(i,2,S) For(j,2,50)\n\t\t\t{\n\t\t\t\tint x=ksm(i,j);\n\t\t\t\tif(x>P) break;\n\t\t\t\tif(x==P) \n\t\t\t\t{\n\t\t\t\t\tif(calc(i)+calc(j)+1==f[P]) FFA=i,FFB=j;\n\t\t\t\t}\n\t\t\t\tif(FFA&&FFB) break;\n\t\t\t}\n\t\t}\n\t\tif(FFA) printf(\"%lld^%lld\",FFA,FFB);\n\t\telse printf(\"%lld\",P);\n\t}\n\tif(BA) \n\t{\n\t\tif(P) printf(\"+%lld^%lld\",BA,CS);\n\t\telse printf(\"%lld^%lld\",BA,CS);\n\t}\n\tif(Mul>1) printf(\"*%lld\",Mul);\n\treturn 0;\n}\n```\n",
        "postTime": 1602224298,
        "uid": 308464,
        "name": "\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF991F \u3010Concise and clear\u3011"
    },
    {
        "content": "\u56e0\u4e3a\u4e00\u4e2a\u6570\u672c\u8eab\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u7b54\u6848\uff0c\u6240\u4ee5\u539f\u4e32\u957f\u5ea6\u5373\u4e3a\u7b54\u6848\u4e0a\u9650\n\n\u7136\u540e\u53d1\u73b0\u4e00\u4e2a\u6570\u80af\u5b9a\u4f1a\u88ab\u62c6\u5206\u6210 $A\\times B+C$ \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d $A,B,C$ \u4e3a\u4e0d\u586b\u6216 $a^b$ \u7684\u5f62\u5f0f\n\n\u7136\u540e\u6240\u6709 $a^b$ \u76f4\u63a5\u9884\u5904\u7406\u7684\u590d\u6742\u5ea6\u662f\u5bf9\u7684\uff0c\u90a3\u4e48\u66b4\u529b\u9884\u5904\u7406\u7136\u540e\u585e\u8fdb `map` \u91cc\uff0c\u62c6\u6570\u65f6\u5728 `map `\u91cc\u67e5\u8be2\u5373\u53ef\n\n```cpp\n#include<bits/stdc++.h>\n#define iter map<int,string>::iterator\n#define int long long\n#define x first\n#define y second\nusing namespace std;\n\nint read()\n{\n\tint s=0;\n\tchar c=getchar(),lc='+';\n\twhile (c<'0'||'9'<c) lc=c,c=getchar();\n\twhile ('0'<=c&&c<='9') s=s*10+c-'0',c=getchar();\n\treturn lc=='-'?-s:s;\n}\nvoid write(int x)\n{\n\tif (x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tif (x<10) putchar(x+'0');\n\telse\n\t{\n\t\twrite(x/10);\n\t\tputchar(x%10+'0');\n\t}\n}\nvoid print(int x,char c='\\n')\n{\n\twrite(x);\n\tputchar(c);\n}\nmap<int,string>num;\n\nsigned main()\n{\n\tnum.clear();\n\tint n=read();\n\tfor (int i=2;i*i<=n;i++)\n\tfor (int j=2,k=i*i;k<=n;j++,k*=i)\n\t{\n\t\tstring now=to_string(i)+'^'+to_string(j);\n\t\tif (!num.count(k)) num[k]=now;\n\t\tif (num[k].length()>now.length()) num[k]=now;\n\t}\n    //\u66b4\u529b\u9884\u5904\u7406a^b\n\tstring ans=to_string(n);\n\tfor (iter i=num.begin();i!=num.end();i++)\n\tif (i->y.length()>to_string(i->x).length())\n\ti->y=to_string(i->x);\n    //\u56e0\u4e3aa^b\u8fd9\u4e2a\u4e32\uff08\u7531a^b\u6784\u6210\u7684\u4e32\uff09\u957f\u5ea6\u53ef\u80fd\u5927\u4e8ea^b\u8fd9\u4e2a\u6570\uff08a^b\u8fd9\u5355\u4e2a\u6570\uff09\u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u8981\u53d6\u4e2amin\n\tfor (iter i=num.begin();i!=num.end();i++)\n\t{\n\t\tstring now=i->y;\n\t\tint a=i->x,b=n/a,c=n-a*b;\n\t\tif (!num.count(b)) num[b]=to_string(b);\n\t\tif (!num.count(c)) num[c]=to_string(c);\n\t\tif (b>1) now+='*'+num[b];\n\t\tif (c) now+='+'+num[c];\n\t\tif (ans.length()>now.length()) ans=now;\n\t}\n    //\u62c6A*B+C\n\tcout<<ans;\n\n\treturn 0;\n}\n```",
        "postTime": 1604458341,
        "uid": 61120,
        "name": "QwQcOrZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF991F \u3010Concise and clear\u3011"
    }
]
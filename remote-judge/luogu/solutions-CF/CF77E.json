[
    {
        "content": "## \u9898\u9762\n\n[\u4f20\u9001\u95e8](http://codeforces.com/contest/77/problem/E)\n\n\u8fd9\u9898\u6709\u4e24\u79cd\u65b9\u6cd5~~\uff08\u7136\u800c\u4e24\u79cd\u6211\u90fd\u60f3\u4e0d\u5230\uff09~~\n\n## \u65b9\u6cd5\u4e00\n\n## \u524d\u7f6e\u829d\u58eb\n\n### \u7b1b\u5361\u5c14\u5b9a\u7406\n\n\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5706\u7684\u66f2\u7387\u4e3a$k=\\pm {1\\over r}$\uff0c\u5176\u4e2d$r$\u662f\u5706\u7684\u534a\u5f84\n\n\u82e5\u5728\u5e73\u9762\u4e0a\u6709\u4e24\u4e24\u76f8\u5207\uff0c\u4e14\u516d\u4e2a\u5207\u70b9\u4e92\u4e0d\u76f8\u540c\u7684\u56db\u4e2a\u5706\uff0c\u8bbe\u5176\u66f2\u7387\u5206\u522b\u4e3a$k1,k2,k3,k4$\uff08\u82e5\u8be5\u5706\u548c\u5176\u5b83\u6240\u6709\u5706\u90fd\u5916\u5207\uff0c\u5219\u5176\u66f2\u7387\u53d6\u6b63\uff0c\u5426\u5219\u66f2\u7387\u53d6\u8d1f\uff09\uff0c\u5219\u6709\n\n$$(k1+k2+k3+k4)^2=2(k1^2+k2^2+k3^2+k4^2)$$\n\n\u7c7b\u4f3c\u7684\uff0c\u82e5\u662f\u7a7a\u95f4\u4e2d\u6709\u4e24\u4e24\u76f8\u5207\u4e14\u5207\u70b9\u4e92\u4e0d\u76f8\u540c\u7684\u4e94\u4e2a\u7403\u4f53\uff0c\u5219\u6709\n\n$$(k1+k2+k3+k4+k5)^2=3(k1^2+k2^2+k3^2+k4^2+k5^2)$$\n\n## \u9898\u89e3\n\n\u9996\u5148\u90a3\u4e2a\u7c89\u8272\u5706\u7684\u76f4\u5f84\u5c31\u662f$R-r$\uff0c\u4e8e\u662f\u6211\u4eec\u73b0\u5728\u77e5\u9053\u524d\u4e09\u4e2a\u5706\u7684\u534a\u5f84\u4e86\n\n\u4e0a\u9762\u7684\u67ff\u5b50\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u5173\u4e8e$k4$\u7684\u65b9\u7a0b\uff0c\u5316\u7b80\u4e00\u4e0b\u53ef\u5f97\n\n$$k4^2-2(k1+k2+k3)k4+2(k1^2+k2^2+k3^2)-(k1+k2+k3)^2=0$$\n\n\u8fd9\u65b9\u7a0b\u4e00\u770b\u5c31\u5f88\u4e0d\u597d\u89e3\u7684\u6837\u5b50\u2026\u2026\n\n\u60f3\u60f3\u6211\u4eec\u521d\u4e2d\u65f6\u5019\u5b66\u8fc7\u7684\u97e6\u8fbe\u5b9a\u7406\uff0c\u5bf9\u4e8e\u65b9\u7a0b$ax^2+bx+c=0$\uff0c\u8bbe\u5b83\u7684\u4e24\u4e2a\u89e3\u4e3a$x_1,x_2$\uff0c\u5219\u6709\n\n$$x_1+x_2=-{b\\over a}$$\n\n\u8bbe$k3$\u4ee3\u8868\u7eff\u5706$i$\u7684\u66f2\u7387\uff0c$k2$\u4ee3\u8868\u9ec4\u5706\u7684\u66f2\u7387\uff0c$k1$\u4ee3\u8868\u6700\u5927\u7684\u5706\u7684\u66f2\u7387\uff0c\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f\u4e0e\u8fd9\u4e09\u4e2a\u5706\u90fd\u76f8\u5207\u7684\u5706\u7684\u66f2\u7387\u2026\u2026\n\n\u4f46\u662f\u8fd9\u91cc\u662f\u4e24\u4e2a\u89e3\u7684\u548c\u7684\u5f62\u5f0f\u600e\u4e48\u529e\u4e2b\u2026\u2026\n\n\u51b7\u9759\u60f3\u60f3\uff0c\u548c\u8fd9\u4e09\u4e2a\u5706\u90fd\u76f8\u5207\u7684\u5706\uff0c\u9664\u4e86\u7eff\u5706$i+1$\uff0c\u4f3c\u4e4e\u53ea\u5269\u4e0b\u7eff\u5706$i-1$\uff1f\u800c$i-1$\u7684\u66f2\u7387\u6211\u4eec\u4e4b\u524d\u5df2\u7ecf\u77e5\u9053\u4e86\uff1f\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5$O(n)$\u9012\u63a8\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(nT)$\n\n```cpp\n//minamoto\n#include<bits/stdc++.h>\n#define R register\n#define inline __inline__ __attribute__((always_inline))\n#define fp(i,a,b) for(R int i=(a),I=(b)+1;i<I;++i)\n#define fd(i,a,b) for(R int i=(a),I=(b)-1;i>I;--i)\n#define go(u) for(int i=head[u],v=e[i].v;i;i=e[i].nx,v=e[i].v)\nusing namespace std;\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline char getc(){return p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++;}\nint read(){\n    R int res;R char ch;\n    while((ch=getc())>'9'||ch<'0');\n    for(res=ch-'0';(ch=getc())>='0'&&ch<='9';res=res*10+ch-'0');\n    return res;\n}\nint n,R1,R2,R3;double r1,r2,r3,r4,r5;\nint main(){\n//\tfreopen(\"testdata.in\",\"r\",stdin);\n\tfor(int T=read();T;--T){\n\t\tR1=read(),R2=read(),n=read(),R3=R1-R2;\n\t\tr1=-1.0/R1,r2=1.0/R2,r3=1.0/R3,r4=r1+r2+r3;\n\t\tfp(i,2,n)r5=r3,r3=r4,r4=(r1+r2+r3)*2-r5;\n\t\tprintf(\"%.10lf\\n\",1.0/r4);\n\t}\n\treturn 0;\n}\n```\n\n## \u65b9\u6cd5\u4e8c\n\n## \u524d\u7f6e\u829d\u58eb\n\n### \u5706\u7684\u53cd\u6f14\n\n![](https://i.loli.net/2019/04/14/5cb29185ec115.png)\n\n## \u9898\u89e3\n\n\u6211\u4eec\u8bbe\u9ec4\u5706\u4e3a$A$\uff0c\u7eff\u5706\u4e3a$B$\uff0c\u5927\u5706\u5c31\u53eb\u5927\u5706\uff0c\u5e76\u4e14\u4ee5\u4e0b\u5047\u8bbe$A$\u548c\u5927\u5706\u7684\u4ea4\u70b9\u4e3a\u539f\u70b9\uff0c\u8fd9\u4e09\u4e2a\u5706\u5171\u540c\u7684\u76f4\u5f84\u4e3a$x$\u8f74\n\n\u5982\u679c\u6211\u4eec\u4ee5\u539f\u70b9\u4e3a\u53cd\u6f14\u4e2d\u5fc3\uff0c\u90a3\u4e48\u53cd\u6f14\u4e4b\u540e$A$\u548c\u5927\u5706\u4f1a\u53d8\u6210\u4e24\u6761\u76f4\u7ebf\u3002\u53c8\u56e0\u4e3a\u53cd\u6f14\u4e0d\u6539\u53d8\u76f8\u5207\u5173\u7cfb\uff0c\u6240\u4ee5$B$\u53cd\u6f14\u4e4b\u540e\u5c31\u5728\u8fd9\u4e24\u6761\u76f4\u7ebf\u4e2d\u95f4\u3002\u663e\u7136$B$\u53cd\u6f14\u4e4b\u540e\u7684\u5706\u5fc3\u4ecd\u5728$x$\u8f74\u4e0a\n\n\u5982\u679c\u6211\u4eec\u8fd8\u8981\u653e\u4e0a\u522b\u7684\u5706\uff08\u5047\u8bbe\u4e00\u76f4\u5f80\u4e0a\u653e\uff09\uff0c\u7531\u4e8e\u5b83\u4e0e\u8fd9\u4e09\u4e2a\u5706\u6709\u552f\u4e00\u4ea4\u70b9\uff0c\u6240\u4ee5\u80af\u5b9a\u662f\u88ab\u5361\u5728\u4e24\u6761\u76f4\u7ebf\u4e2d\u95f4\uff0c\u4e14\u521a\u597d\u5728\u4e4b\u524d\u7684\u5706\u4e0a\u65b9\n\n\u56e0\u4e3a\u8fd9\u4e9b\u5706\u7684\u534a\u5f84\u76f8\u540c\uff0c\u6211\u4eec\u53ef\u4ee5$O(1)$\u5f97\u5230\u7b2c$n$\u4e2a\u5706\u7684\u5706\u5fc3\u7684\u5750\u6807\u3002\u4e4b\u540e\u6211\u4eec\u8fde\u63a5\u5706\u5fc3\u548c\u539f\u70b9\uff0c\u8fd9\u6761\u76f4\u7ebf\u548c\u5706\u7684\u4e24\u4e2a\u4ea4\u70b9\u5206\u522b\u8bb0\u4e3a$p1,p2$\uff0c\u628a\u5b83\u4eec\u53cd\u6f14\u56de\u6765\uff0c\u5bf9\u5e94\u7684\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u5c31\u662f\u539f\u6765\u7684\u7b2c$n$\u4e2a\u5706\u7684\u534a\u5f84\u4e86\n\n```cpp\n//minamoto\n#include<bits/stdc++.h>\n#define R register\n#define inline __inline__ __attribute__((always_inline))\n#define fp(i,a,b) for(R int i=(a),I=(b)+1;i<I;++i)\n#define fd(i,a,b) for(R int i=(a),I=(b)-1;i>I;--i)\n#define go(u) for(int i=head[u],v=e[i].v;i;i=e[i].nx,v=e[i].v)\nusing namespace std;\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline char getc(){return p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++;}\nint read(){\n    R int res,f=1;R char ch;\n    while((ch=getc())>'9'||ch<'0')(ch=='-')&&(f=-1);\n    for(res=ch-'0';(ch=getc())>='0'&&ch<='9';res=res*10+ch-'0');\n    return res*f;\n}\nstruct node{\n\tdouble x,y;\n\tinline node(){}\n\tinline node(R double xx,R double yy):x(xx),y(yy){}\n\tinline node operator +(const node &b)const{return node(x+b.x,y+b.y);}\n\tinline node operator -(const node &b)const{return node(x-b.x,y-b.y);}\n\tinline node operator *(const double &b)const{return node(x*b,y*b);}\n\tinline double norm(){return sqrt(x*x+y*y);}\n}p,pp,o;\nint n,r1,r2;double r,lx,rx,ir;\nvoid get(R node o,R double k,R double b){\n\tdouble del=ir/sqrt(k*k+1);\n\tp=node(o.x-del,k*(o.x-del)+b),\n\tpp=node(o.x+del,k*(o.x+del)+b);\n}\ninline node inv(R node p){\n\tdouble len=1.0/p.norm();\n\treturn p*(r*r*len*len);\n}\nint main(){\n//\tfreopen(\"testdata.in\",\"r\",stdin);\n\tfor(int T=read();T;--T){\n\t\tr1=read(),r2=read(),n=read(),r=r2*0.5;\n\t\tlx=r*r/(r1*2),rx=r*r/(r2*2),ir=(rx-lx)*0.5;\n\t\to=node((lx+rx)*0.5,2*n*ir);\n\t\tget(o,o.y/o.x,0);\n\t\tprintf(\"%.10lf\\n\",(inv(p)-inv(pp)).norm()*0.5);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1555207023,
        "uid": 41781,
        "name": "bztMinamoto",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF77E \u3010Martian Food\u3011"
    },
    {
        "content": "## \u524d\u7f6e\u77e5\u8bc6\n\n\u7b1b\u5361\u5c14\u5b9a\u7406\u4e0e\u521d\u4e2d\u4ee3\u6570\n\n## \u5206\u6790\n\n\u9996\u5148\u521a\u770b\u5230\u9898\u7684\u65f6\u5019\u5f88\u660e\u663e\u5c31\u4f1a\u5f80\u51e0\u4f55\u7684\u65b9\u5411\u53bb\u60f3\uff0c\u4f46\u80fd\u4e0d\u80fd\u60f3\u5230\u8fd9\u4e2a\u975e\u5e38\u504f\u7684\u5b9a\u7406\u662f\u4e2a\u95ee\u9898\u3002\u8fd9\u4e2a\u5b9a\u7406\u4e00\u770b\u5c31\u53ef\u4ee5\u6210\u4e3a\u8fd9\u9053\u9898\u7684\u80cc\u666f\uff0c\u60f3\u5230\u8fd9\u4e2a\u5b9a\u7406\u8fd9\u9053\u9898\u5c31\u5b8c\u6210\u4e86\u4e00\u534a\u3002\n\n\u7b1b\u5361\u5c14\u5b9a\u7406\uff1a\n\n> \u82e5\u5e73\u9762\u4e0a\u56db\u4e2a\u534a\u5f84\u4e3ar1\u3001r2\u3001r3\u3001r4\u7684\u5706\u4e24\u4e24\u76f8\u5207\u4e8e\u4e0d\u540c\u70b9\uff0c\u5219\u5176\u534a\u5f84\u6ee1\u8db3\u4ee5\u4e0b\u7ed3\u8bba\n$$(\\sum\\limits_{i=1}^{4}\\dfrac{1}{r_i})^2 = 2 \\sum\\limits_{i=1}^{4}\\dfrac{1}{r_i^2}$$\n> \u5176\u4e2d\uff0c\u5982\u679c\u5916\u5207\u534a\u5f84\u53d6\u6b63\uff0c\u5185\u5207\u534a\u5f84\u53d6\u8d1f\n\n\u63a5\u4e0b\u6765\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u5706\u5f97\u540c\u65f6\u4e0e $G$ \u548c $P$ \u76f8\u5207\uff0c\u6240\u4ee5\u7b2c\u4e00\u4e2a\u5706\u7684\u5706\u5fc3\u5fc5\u987b\u5728 $G$ \u548c $P$ \u7684\u5706\u5fc3\u8fde\u7ebf\u4e0a\uff0c\u6240\u4ee5\u534a\u5f84\u5c31\u662f $R - r$\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u524d\u4e09\u4e2a\u5706\u7684\u534a\u5f84\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u5e94\u7528\u7b1b\u5361\u5c14\u5b9a\u7406\u4e86\u3002\n\n\u5047\u8bbe\u7b2c $i$ \u4e2a\u5706\u7684\u534a\u5f84\u4e3a $1 / r_{i+2}$\uff08\u8fd9\u4e48\u5199\u662f\u4e3a\u4e86\u8ba9 $G$ \u4e0e $P$ \u4e0d\u5fc5\u5355\u72ec\u62ff\u51fa\u6765\u5206\u7c7b\u8ba8\u8bba\uff09\uff0c$r_1 = 1 / R$\uff0c$r_2 = 1 / r$\uff0c\u90a3\u4e48\u6709\uff1a\n\n$$(-r_1 + r_{k-2} + r_2 + r_k) ^ 2 = 2(r_{2}^2 + r_{k-2}^2 + r_{1}^2 + r_k^2)$$\n\n\u7136\u540e\u5c31\u5f00\u59cb\u5316\u7b80\u4e86\uff1a\n\n$$r_k^2 - 2(r_{1} + r_{k - 2} + r_{2})r_k + 2(r_{1}^2 + r_{k - 2}^2 + r_{2}^2) - (r_{1} + r_{k - 2} + r_{2})^2 = 0$$\n\n\u7206\u7b97\u6c42 $\\Delta$\uff1a\n\n$$\\begin{aligned}\\Delta &= 4(r_{1} + r_{k - 2} + r_{2}) ^ 2 + 4(r_{1} + r_{k - 2} + r_{2})^2 - 8(r_{1}^2 + r_{k - 2}^2 + r_{2}^2)\\\\\n&=16(r_{1}r_{k - 2} + r_{k - 2}r_{2} + r_{1}r_{2})\\end{aligned}$$\n\n\u89e3\u5f97\u4e24\u4e2a\u89e3\u7684\u5f62\u5f0f\u5c31\u662f $\\dfrac{2(r_{1}+r_{k-2}+r_{2}) \\pm \\sqrt{16(r_{1}r_{k - 2} + r_{k - 2}r_{2} + r_{1}r_{2})}}{2}$\n\n\u770b\u8d77\u6765\u975e\u5e38\u7684\u9634\u95f4\u3002\u6240\u4ee5\u4e0d\u80fd\u7206\u7b97\n\n\n\u53d1\u73b0\u4e24\u4e2a\u89e3\u4e4b\u548c\u5c31\u662f $2(r_{1}+r_{k-2}+r_{2})$\u3002\n\n\u63a5\u4e0b\u6765\u662f\u975e\u5e38\u5de7\u7684\u4e00\u6b65\uff1a\u56e0\u4e3a\u4e24\u4e2a\u89e3\u548c\u77e5\u9053\u4e86\uff0c\u800c\u5df2\u7ecf\u6709\u4e00\u4e2a\u89e3\uff08$r_{k - 2}$\uff09\u77e5\u9053\u4e86\uff0c\u6240\u4ee5\u53e6\u5916\u4e00\u4e2a\u89e3\u4e5f\u53ef\u4ee5\u77e5\u9053\uff01\n\n\u6240\u4ee5\uff0c$r_k = 2(r_{1}+r_{k-2}+r_{2}) - r_{k-2}$\n\n\u6700\u540e\u9012\u63a8 $n - 1$ \u6b21\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h> \n#define lld long long \nusing namespace std;\nint n;\nint R, r;\ndouble r1, r2, r3;\nint T;\nint main() {\n\tscanf(\"%d\", &T);\n\tfor (; T --; ) {\n\t\tscanf(\"%d%d%d\", &R, &r, &n);\n\t\tr1 = 1.0 / (R - r);\n\t\tr2 = -1.0 / R + 1.0 / r + 1.0 / (R - r);\n\t\tfor (int i = 2; i <= n; ++ i)\n\t\t\tr3 = r1, r1 = r2, r2 = (-1.0 / R + 1.0 / r + r1) * 2 - r3;\n\t\tprintf(\"%lf\\n\", 1.0 / r2);\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1638787171,
        "uid": 228486,
        "name": "SunsetSamsara",
        "ccfLevel": 7,
        "title": "CF77E Martian Food \u9898\u89e3"
    }
]
[
    {
        "content": "### \u58f0\u660e\uff1a\n\n\u8fd9\u7bc7\u9898\u89e3\u662f\u672c\u849f\u84bb\u5199\u7684\u7b2c\u4e09\u7bc7\u9898\u89e3\uff0c\u5982\u679c\u4ee3\u7801\u90e8\u5206\u6709\u95ee\u9898\uff0c\u656c\u8bf7\u8c05\u89e3\u3002\u53e6\u5916\uff0c\u5982\u679c\u6709\u63cf\u8ff0\u4e0d\u6070\u5f53\u7684\u5730\u65b9\uff0c\u6216\u8005\u9519\u8bef\u7684\u5730\u65b9\uff0c\u5e0c\u671b\u5927\u5bb6\u591a\u591a\u6307\u51fa\uff0c\u6b22\u8fce\u5927\u5bb6\u591a\u591a\u7559\u8a00\u8bc4\u8bba\uff0c\u5171\u540c\u8fdb\u6b65\u3002\n\n### \u9898\u76ee\u94fe\u63a5\uff1a\n\n[\u9898\u76ee\uff08\u6d1b\u8c37\uff09](https://www.luogu.com.cn/problem/CF432C)\n\n[\u9898\u76ee\uff08CodeForces\uff09](https://codeforces.ml/problemset/problem/432/C)\n\n### \u89e3\u9898\u601d\u8def\n\n**1.\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\uff1a**\n\n\u7b2c\u4e00\u6761\uff1a\u6bcf\u4e2a\u5927\u4e8e2\u7684\u5076\u6570\u90fd\u662f\u4e24\u4e2a\u7d20\u6570\u4e4b\u548c\u3002\n\n\u7b2c\u4e8c\u6761\uff1a\u6bcf\u4e2a\u5927\u4e8e5\u7684\u5947\u6570\u90fd\u662f\u4e09\u4e2a\u7d20\u6570\u4e4b\u548c\u3002\n\n**2.\u89e3\u7b54\uff1a**\n\n\u53ea\u8981\u77e5\u9053\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u7684\u7b2c\u4e00\u6761\u5c31\u4e0d\u96be\u4e86\u3002\n\n\u2460\u5c06\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u4f5c\u4e3a\u4e0b\u6807\uff0c\u8bb0\u5f55\u8be5\u5143\u7d20\u6240\u5728\u7684\u4f4d\u7f6e\u3002\n\n\u2461\u6392\u5e8f\u7684\u65f6\u5019\u5224\u65ad\u8be5\u70b9\u662f\u5426\u4e3a\u672c\u8eab\u3002\u5982\u679c\u4e0d\u662f\u7684\u8bdd\uff0c\u5c31\u53bb\u5224\u65ad\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u662f\u5426\u4e3a\u7d20\u6570\uff0c\u4e0d\u662f\u5219\u53d8\u4e3a\u4e24\u4e2a\u7d20\u6570\u76f8\u52a0\u5373\u53ef\u3002\n\n**3.\u4ee3\u7801\uff1a**\n\n```cpp\n#include<bits/stdc++.h>//\u4e2a\u4eba\u5efa\u8bae\u7528\u4e07\u80fd\u5934\nusing namespace std;//\u4e2a\u4eba\u5efa\u8bae\u52a0\u4e0a\u540d\u5b57\u7a7a\u95f4\nbool p[100005],q[100005];//\u6570\u7ec4\u522b\u5f00\u5c0f\u4e86\nint v[100005],a[100005];//\u6570\u7ec4\u522b\u5f00\u5c0f\u4e86\nmap<int,int>m;//\u5b9a\u4e49map\nvector<pair<int,int> >ve;//\u5b9a\u4e49vector\nint main()\n{\n    int n,i,k,t;//\u5b9a\u4e49\uff0c\u4e0d\u591a\u89e3\u91ca\n    //\u4ee5\u4e0b\u90e8\u5206\u90fd\u662f\u521d\u59cb\u5316\uff1a\n    memset(p,0,sizeof(p));\n    memset(q,0,sizeof(q));\n    memset(v,0,sizeof(v));\n    for(i=2;i<100005;i++)\n    {\n        if(!q[i])\n        {\n            p[i]=1;\n            for(k=i;k<100005;k+=i)\n                q[k]=1;\n        }\n    }\n    for(i=2;i<100005;i++)//\u5c0f\u4e8e\u7b49\u4e8e\u8be5\u503c\u6700\u8fd1\u7684\u7d20\u6570\n    {\n    \tif(p[i])v[i]=i;\n        else v[i]=v[i-1];\n\t}\n    //\u8fdb\u5165\u6b63\u9898\uff1a\n    cin>>n;//\u8f93\u5165n\u3002\n    for(i=1;i<=n;i++)//\u8f93\u5165a\u6570\u7ec4\uff0c\u5e76\u521d\u59cb\u5316map\u3002\n    {\n        cin>>a[i];\n        m[a[i]]=i;\n    }\n    for(i=1;i<=n;i++)//\u6838\u5fc3\u4ee3\u7801\n    {\n        while(m[i]!=i)\n        {\n            t=m[i]-i+1,k=m[i]-v[t]+1;\n            ve.push_back(make_pair(k,m[i]));\n            m[a[k]]=m[i];\n            swap(a[m[i]],a[k]);\n            m[i]=k;\n        }\n    }\n    //\u4ee5\u4e0b\u90e8\u5206\u90fd\u662f\u8f93\u51fa\uff1a\n    cout<<ve.size()<<endl;\n    for(i=0;i<ve.size();i++)\n        cout<<ve[i].first<<\" \"<<ve[i].second<<endl;\n    return 0;//\u5b8c\u7f8e\u5730\u7ed3\u675f\n}\u5343\u4e07\u4e0d\u8981\u6284\u88ad\u5440\uff01\n```\n",
        "postTime": 1603450992,
        "uid": 142293,
        "name": "LHN200861",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF432C \u3010Prime Swaps\u3011"
    },
    {
        "content": "\u6765\u4e00\u7bc7\u4e0d\u540c\u7684\u9898\u89e3\u3002\n\n\u9996\u5148\u770b\u5230\u8fd9\u4e2a\u9898\uff0c\u5c31\u5e94\u8be5\u8054\u60f3\u5230\u8d28\u6570\u7684\u6709\u5173\u6027\u8d28\u3002\n\n\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u4ea4\u6362\u64cd\u4f5c\u76f8\u5f53\u4e8e\u4ea4\u6362\u5230 $j-i+1$ \u7684\u5730\u65b9 $+1$\uff0c\u76f8\u5f53\u4e8e\u5411\u5de6\u79fb\u52a8 $j-i+1$ \u6b65\u7136\u540e\u518d $+1$\u3002\n\n\u5177\u4f53\u7684\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\u5411\u5de6\u79fb\u52a8\u8d28\u6570\u51cf\u4e00\u6b65\u3002\n\n\u76f8\u5f53\u4e8e\u8d28\u6570\u52a0\u8d77\u6765\uff0c\u8fd9\u4e1c\u897f\u53ef\u4ee5\u5229\u7528\u54e5\u731c\u6765\u89e3\u51b3\u3002\n\n\u54e5\u731c\u662f\u5947\u6570\u4e00\u5b9a\u80fd\u88ab\u5206\u89e3\u6210 $3$ \u4e2a\u8d28\u6570\u7684\u548c\uff0c\u5076\u6570\u4e00\u5b9a\u80fd\u88ab\u5206\u89e3\u6210 $2$ \u4e2a\u8d28\u6570\u7684\u548c\u3002\n\n\u5bf9\u4e8e\u5947\u6570\u7684\u60c5\u51b5 $-3$ \u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5076\u6570\u7684\u60c5\u51b5\u3002\n\n\u7136\u540e\u6211\u4eec\u9700\u8981\u505a\u7684\u64cd\u4f5c\u5c31\u662f\u628a $j-i+1$ \u53d8\u6210\u51e0\u4e2a\u8d28\u6570\u7684\u548c\u3002\n\n\u4f46\u662f\uff01\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u4e1c\u897f\u5c45\u7136\u8fd8\u6709\u51cf\u4e00\u64cd\u4f5c\u3002\n\n\u4f46\u662f\u975e\u5e38\u975e\u5e38\u6709\u8da3\u7684\u662f\uff0c\u6211\u4eec\u5206\u89e3\u51fa\u6765\u7684 $3$ \u4e2a\u8d28\u6570\u7684\u4e2a\u6570 $3$ \u662f\u4e2a\u8d28\u6570\uff0c\u540c\u65f6\u5bf9\u4e8e\u5076\u6570 $2$ \u4e5f\u662f\u4e00\u4e2a\u8d28\u6570\uff01\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u518d\u5947\u6570\u540e\u9762\u52a0\u4e2a $3$\uff0c\u5076\u6570\u540e\u9762\u52a0\u4e2a $2$\u3002\n\n\u6211\u4eec\u64cd\u4f5c\u6b21\u6570\u7406\u8bba\u4e0b\u754c\u662f $4 \\times n$\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b8c\u5168\u8dd1\u4e0d\u5230\u3002\n\n\u8fd8\u6709\u4e00\u4e2a\u5b50\u95ee\u9898\u662f\u54e5\u731c\u7684\u5206\u89e3\uff0c\u8fd9\u4e1c\u897f\u4e8b\u5b9e\u4e0a $n$ \u4ee5\u5185\u7684\u8d28\u6570\u53ea\u6709\u4e0d\u5230 $10^4$\uff0c\u53ef\u4ee5\u7b5b\u51fa\u6765\u7136\u540e\u66b4\u529b\u641e\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <vector>\n#define pb push_back\nusing namespace std;\nconst int INF=2e5+5;\nint n,a[INF],f[INF],p[INF];\nbool prime[INF];\nint Prime[INF],P[INF][5];\nvector <int> ans[5];\nvoid calc(int x,int y) {\n\tif (x>y) swap(x,y);\n\tif (y-x+1==1) return ;\n//\tcout<<y-x+1<<\"\"\n\tif (!prime[y-x+1]) {\n\t\tint xx=y-x+1;\n\t\tans[0].pb(y);ans[1].pb(y-xx+1);\n\t\tswap(p[a[y]],p[a[y-xx+1]]);\n\t\tswap(a[y],a[y-xx+1]);\n\t\treturn ;\n\t}\n\tif ((y-x+1)%2==0) {\n//\t\ty=y-x+1;\n\t\tint xx=y-x+1;\n\t\tans[0].pb(y);ans[1].pb(y-P[xx][0]+1);\n\t\tswap(p[a[y]],p[a[y-P[xx][0]+1]]);\n\t\tswap(a[y],a[y-P[xx][0]+1]);\n\t\ty=y-P[xx][0]+1;\n\t\t\n//\t\tif (xx==26) \n//\t\t\tcout<<ans[0][ans[0].size()-1]<<\" \"<<ans[1][ans[0].size()-1]<<\" ?\\n\";\n\t\t\n\t\tans[0].pb(y);ans[1].pb(y-P[xx][1]+1);\n\t\tswap(p[a[y]],p[a[y-P[xx][1]+1]]);\n\t\tswap(a[y],a[y-P[xx][1]+1]);\n\t\ty=y-P[xx][1]+1;\n\t\t\n//\t\tif (xx==26) \n//\t\t\tcout<<ans[0][ans[0].size()-1]<<\" \"<<ans[1][ans[0].size()-1]<<\" ?1\\n\";\n\t\t\n\t\tans[0].pb(y);ans[1].pb(y-2+1);\n\t\tswap(p[a[y]],p[a[y-2+1]]);\n\t\tswap(a[y],a[y-2+1]);\n\t\t\n//\t\tif (xx==26) \n//\t\t\tcout<<ans[0][ans[0].size()-1]<<\" \"<<ans[1][ans[0].size()-1]<<\" ?1\\n\";\n\t}\n\t\n\telse {\n//\t\ty=y-x+1;\n\t\tint xx=y-x+1;\n\t\tans[0].pb(y);ans[1].pb(y-3+1);\n\t\tswap(p[a[y]],p[a[y-3+1]]);\n\t\tswap(a[y],a[y-3+1]);\n\t\ty=y-3+1;\n\t\t\n\t\tans[0].pb(y);ans[1].pb(y-3+1);\n\t\tswap(p[a[y]],p[a[y-3+1]]);\n\t\tswap(a[y],a[y-3+1]);\n\t\ty=y-3+1;\n\t\t\n\t\tans[0].pb(y);ans[1].pb(y-P[xx-3][0]+1);\n\t\tswap(p[a[y]],p[a[y-P[xx-3][0]+1]]);\n\t\tswap(a[y],a[y-P[xx-3][0]+1]);\n\t\ty=y-P[xx-3][0]+1;\n\t\t\n\t\tans[0].pb(y);ans[1].pb(y-P[xx-3][1]+1);\n\t\tswap(p[a[y]],p[a[y-P[xx-3][1]+1]]);\n\t\tswap(a[y],a[y-P[xx-3][1]+1]);\n\t}\n}\nsigned main()\n{\n//\tfreopen(\"test.in\",\"r\",stdin);\n//\tfreopen(\"test.out\",\"w\",stdout);\n\tios::sync_with_stdio(false);\n\tcin>>n;\n\tfor (int i=2;i<=2e5;i++) {\n\t\tif (!prime[i]) Prime[++Prime[0]]=i;\n\t\tfor (int j=1;j<=Prime[0] && Prime[j]*i<=2e5;j++) {\n\t\t\tprime[Prime[j]*i]=1;\n\t\t\tif (!(i%Prime[j])) break;\n\t\t}\n\t}\n\tfor (int i=1;i<=Prime[0];i++) {\n\t\tfor (int j=1;j<=Prime[0];j++) {\n\t\t\tint x=Prime[i]+Prime[j];\n\t\t\tif (x>2e5) break;\n\t\t\tif (!P[x][0]) \n\t\t\t\tP[x][0]=Prime[i],P[x][1]=Prime[j];\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++) cin>>a[i],p[a[i]]=i;\n\tfor (int i=1;i<=n;i++) {\n\t\tint x=p[i];\n\t\tcalc(i,x);\n\t} \n//\tfor (int i=1;i<=n;i++) cout<<a[i]<<\" \";\n//\tcout<<\"\\n\";\n\tcout<<ans[0].size()<<\"\\n\";\n\tint len=ans[0].size();\n\tfor (int i=0;i<len;i++)\n\t\tcout<<ans[1][i]<<\" \"<<ans[0][i]<<\"\\n\";\n\treturn 0;\n}\n```\n",
        "postTime": 1666099905,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF432C"
    },
    {
        "content": "**\u9898\u610f\uff1a**\n\n\u7ed9\u51fa\u957f\u5ea6\u4e3a $N$ \u7684\u6392\u5217\uff0c\u6bcf\u6b21\u4f60\u53ef\u4ee5\u9009\u62e9\u4e24\u4e2a\u4f4d\u7f6e $i$\uff0c$j$ \u5e76\u4ea4\u6362\u4e0a\u8fb9\u7684\u6570\uff0c\u524d\u63d0\u662f $j - i + 1$ \u662f\u8d28\u6570\u3002\n\n\u8981\u6c42\u5728 $5N$ \u6b21\u64cd\u4f5c\u5185\uff0c\u628a\u8fd9\u4e2a\u5e8f\u5217\u6392\u53f7\uff0c\u8f93\u51fa\u5177\u4f53\u6392\u5217\u7684\u64cd\u4f5c\u3002\n\n**\u9898\u89e3\uff1a**\n\n**\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3**: \u4efb\u610f\u5927\u4e8e\u4e8c\u7684\u5076\u6570,\u90fd\u53ef\u8868\u793a\u6210\u4e24\u4e2a\u7d20\u6570\u4e4b\u548c\u3002\n\n\u90a3\u4e48\u6211\u4eec\u6bcf\u6b21\u653e\u5fc3\u7684\u79fb\u52a8\u5c31\u597d\u4e86\uff01\n\n\u90a3\u6211\u4eec\u8d2a\u5fc3\u7684\u6309\u7167 $1, 2, 3, 4\u2026\u2026$ \u7684\u987a\u5e8f\u6765\u6392\uff0c\uff08\u5c31\u662f\u8ba9 $1$ \u5230\u7b2c\u4e00\u4f4d\u7f6e\uff0c$2$ \u5230\u7b2c\u4e8c\u4f4d\u7f6e\uff09\uff0c\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u4fdd\u8bc1\u4e86\u6211\u4eec\u6bcf\u6b21\u90fd\u53ef\u4ee5\u79fb\u5f97\u52a8\u3002\n\n\u6bcf\u6b21\u6211\u4eec\u628a\u4e00\u4e2a\u6570\u5f80\u524d\u79fb\u52a8 $x$ \u8ddd\u79bb\u65f6\uff0c\u6bcf\u6b65\u5148\u79fb\u52a8\u4e00\u4e2a\u5c3d\u91cf\u5927\u7684\u8d28\u6570\u8ddd\u79bb\u5373\u53ef\u3002\n\n\u7136\u540e\u7531\u4e8e $n$ \u4ee5\u5185\u7684\u8d28\u6570\u7684\u4e2a\u6570\u4e3a $\\pi(n) \\sim \\frac{n}{\\ln(n)}$ \u4e2a\uff0c\u8d28\u6570\u95f4\u7684\u5e73\u5747\u95f4\u8ddd\u4e3a $\\ln(n)$\uff0c\u6240\u4ee5\u53ef\u4ee5\u4fdd\u8bc1\u5728 $5N$ \u6b21\u4e00\u5b9a\u53ef\u4ee5\u5b8c\u6210\u3002\n\n\u4ee3\u7801\u4e2d\u9884\u5904\u7406\u54ea\u4e9b\u6570\u662f\u8d28\u6570\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\u6700\u5927\u8d28\u6570\u662f\u591a\u5c11\u3002\n\n```c\n/*\nDate:2021.8.21\nSource:CF432C\nkonwledge:\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3:\u4efb\u610f\u5927\u4e8e\u4e8c\u7684\u5076\u6570,\u90fd\u53ef\u8868\u793a\u6210\u4e24\u4e2a\u7d20\u6570\u4e4b\u548c\u3002\n*/\n#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <map>\n#define orz cout << \"AK IOI\"\n\nusing namespace std;\nconst int maxn = 1e5 + 10;\n\ninline int read()\n{\n\tint f = 0, x = 0; char ch = getchar();\n\twhile(!isdigit(ch)) f |= (ch == '-'), ch = getchar();\n\twhile(isdigit(ch)) x = x * 10 + (ch ^ 48), ch = getchar();\n\treturn f ? -x : x;\n}\ninline void print(int X)\n{\n\tif(X < 0) {X = ~(X - 1); putchar('-');}\n\tif(X > 9) print(X / 10);\n\tputchar(X % 10 + '0');\n}\nint n, a[maxn];\nmap<int, int> m;\nint cnt, flag[maxn];\nbool vis[maxn], prime[maxn];\nvector<pair<int, int> > ans;\nvoid init()\n{\n\tprime[1] = 1;\n\tfor(int i = 2; i <= maxn; i++) \n\t{\n\t\tif(!vis[i]) \n\t\t{\n\t\t\tprime[i] = 1;\n\t\t\tfor(int j = i; j <= maxn; j += i) vis[j] = 1;\n\t\t}\n\t}\n\tfor(int i = 2; i <= maxn; i++)\n\t\tif(prime[i]) flag[i] = i;\n\t\telse flag[i] = flag[i - 1];\n}\nint main()\n{\n\t//freopen(\".in\",\"r\",stdin);\n    //freopen(\".out\",\"w\",stdout);\n    n = read();\n    init();\n    for(int i = 1; i <= n; i++) \n    \ta[i] = read(), m[a[i]] = i;\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\twhile(m[i] != i)\n\t\t{\n\t\t\tint t = m[i] - i + 1;                  //\u9700\u8981\u79fb\u52a8\u7684\u8ddd\u79bb \n\t\t\tint step = m[i] - flag[t] + 1;         //flag[t] \u5c0f\u4e8e\u9700\u8981\u79fb\u52a8\u7684\u8ddd\u79bb\u7684\u6700\u5927\u7684\u8d28\u6570 \n\t\t\tans.push_back(make_pair(step, m[i]));\n\t\t\tm[a[step]] = m[i];                     //\u4ea4\u6362 \n\t\t\tswap(a[m[i]], a[step]);\n\t\t\tm[i] = step;\n\t\t}\n\t} \n    printf(\"%d\\n\", ans.size());\n    for(int i = 0; i < ans.size(); i++)\n    printf(\"%d %d\\n\", ans[i].first, ans[i].second);\n\treturn 0;\n}\n```\n\n\n\u611f\u8c22 https://lhn.blog.luogu.org/solution-cf432c \n\n\n",
        "postTime": 1629529687,
        "uid": 174685,
        "name": "\u7a0b\u95e8\u7acb\u96ea",
        "ccfLevel": 4,
        "title": "Prime Swaps \u9898\u89e3"
    }
]
[
    {
        "content": "\u6bcf\u6761\u8fb9\u6700\u591a\u7ecf\u8fc71\u6b21\n\n\u4e0d\u96be\u60f3\u5230\uff0c\u4e00\u4e2a\u73af\u4e0a\u5982\u679c\u6709\u4e00\u6761\u8fb9\u4e3a$1$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u73af\u4e0a\u6240\u6709\u70b9\u5bf9\u90fd\u662f\u7b26\u5408\u6761\u4ef6\u7684\n\n\u6240\u4ee5\u53ef\u4ee5\u7f29\u70b9\uff08\u8fb9\u53cc\uff09\uff0c\u7f29\u70b9\u540e\u7684\u6bcf\u4e2a\u70b9\uff0c\u5982\u679c\u5176\u4e2d\u6709\u4e00\u6761\u4e3a$1$\u7684\u8fb9\uff0c\u90a3\u4e48\u5c31\u628a\u8fd9\u4e2a\u70b9\u7684\u6743\u503c\u8d4b\u503c\u4e3a$1$\n\n\u7136\u540e\u8fd9\u4e2a\u56fe\u5c31\u53d8\u6210\u4e86\u4e00\u68f5\u6811\n\n\u7136\u540e\u95ee\u9898\u5c31\u53d8\u6210\u4e86\uff1a\u7ed9\u5b9a\u6811\u4e0a\u4e24\u4e2a\u70b9\uff0c\u8be2\u95ee\u4ed6\u4eec\u4e4b\u95f4\u7684\u8def\u5f84\uff0c\u662f\u5426\u6709\u70b9\u6216\u8fb9\u7684\u6743\u503c\u4e3a$1$\n\n\u8fd9\u91cc\u6211\u9009\u62e9\u7528$O(n)$\u7684dfs\u89e3\u51b3\n\n\u603b\u590d\u6742\u5ea6$O(n+m)$\n\n```cpp\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<stack>\nconst int MAXN = 3e5 + 5;\nconst int MAXM = 3e5 + 5;\nusing namespace std;\n\ninline void chk_min(int &a,int b){ if(a>b) a=b;}\n\nstruct Edge\n{\n\tint next,from,to,w;\n}e[MAXM*2];\nint head[MAXN],etot=0;\ninline void add(int u,int v,int w)\n{\n\t++etot;\n\te[etot]=(Edge){ head[u],u,v,w};\n\thead[u] = etot;\n}\n\nstack<int> s;\nint dfn[MAXN],low[MAXN],cnt=0;\nbool vis[MAXN];\nint clr[MAXN],ccnt=0;\nvoid tarjan(int u,int fa)\n{\n\tdfn[u]=low[u]=++cnt;\n\ts.push(u); vis[u]=1;\n\tfor(int i=head[u]; i; i=e[i].next)\n\t{\n\t\tint v=e[i].to;\n\t\tif(v==fa) continue;\n\t\tif(!dfn[v])\n\t\t{\n\t\t\ttarjan(v,u);\n\t\t\tchk_min(low[u],low[v]);\n\t\t}\n\t\telse if(vis[v]) chk_min(low[u], low[v]);\n\t}\n\t\n\tif(dfn[u]==low[u])\n\t{\n\t\tclr[u]=++ccnt;\n\t\twhile(s.top()!=u)\n\t\t{\n\t\t\tclr[s.top()]=ccnt;\n\t\t\tvis[s.top()]=0;\n\t\t\ts.pop();\n\t\t}\n\t\ts.pop(); vis[u]=0;\n\t}\n}\n\nbool can[MAXN];\n\nint to;\nbool pas[MAXN];\nvoid dfs(int u,bool f)\n{\n\tif(can[u]) f=1;\n\tif(u==to)\n\t{\n\t\tif(f) printf(\"YES\");\n\t\telse printf(\"NO\");\n\t\texit(0);\n\t}\n\tpas[u]=1;\n\tfor(int i=head[u]; i; i=e[i].next)\n\t{\n\t\tint v=e[i].to;\n\t\tif(!pas[v]) dfs(v,f|e[i].w);\n\t}\n}\n\nint main(void)\n{\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=m; ++i)\n\t{\n\t\tint u,v,w;\n\t\tscanf(\"%d%d%d\",&u,&v,&w);\n\t\tadd(u,v,w); add(v,u,w);\n\t}\n\ttarjan(1,0);\n\tfor(int i=1; i<=etot; i+=2)\n\t{\n\t\tif(clr[e[i].from] == clr[e[i].to] && e[i].w)\n\t\t{\n\t\t\tcan[clr[e[i].from]]=1;\n\t\t}\n\t}\n\t\n\t//for(int i=1; i<=n; ++i) printf(\"clr[%d]: %d\\n\",i,clr[i]);\n\t\n\tmemset(head,0,sizeof(head));\n\tetot=0;\n\tfor(int i=1; i<=m*2; ++i)\n\t{\n\t\tif(clr[e[i].from] != clr[e[i].to])\n\t\t{\n\t\t\tadd(clr[e[i].from],clr[e[i].to],e[i].w);\n\t\t}\n\t}\n\t\n\tint start;\n\tscanf(\"%d%d\",&start,&to);\n\tstart=clr[start]; to=clr[to];\n\tdfs(start,0);\n\treturn 0;\n}\n```\n",
        "postTime": 1567155553,
        "uid": 73687,
        "name": "He_Ren",
        "ccfLevel": 10,
        "title": "\u89e3\u9898\u62a5\u544a CF652E \u3010Pursuit For Artifacts\u3011"
    },
    {
        "content": "## \u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u7b80\u5355\u8054\u901a\u65e0\u5411\u56fe\uff0c\u8fb9\u6709\u8fb9\u6743\uff08$ 0 $ \u6216 $ 1 $\uff09\uff0c\u6bcf\u4e00\u6761\u8fb9\u53ea\u80fd\u7ecf\u8fc7 $ 1 $ \u6b21\uff0c\u6c42\u80fd\u4e0d\u80fd\u4ece $ a $ \u8d70\u5230 $ b $\uff0c\u4e14\u7ecf\u8fc7\u4e00\u6761\u8fb9\u6743\u4e3a $ 1 $ \u7684\u8fb9\u3002\n\n## \u601d\u8def\n\n\u5bf9\u4e8e\u4e00\u4e2a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\uff08\u540e\u7b80\u79f0\u8fb9\u53cc\uff09\uff0c\u5982\u679c\u5176\u4e2d\u6709\u4e00\u6761\u8fb9\u6743\u503c\u4e3a $ 1 $\uff0c\u90a3\u53ea\u8981\u80fd\u7ecf\u8fc7\u8fd9\u4e2a\u8fb9\u53cc\u5c31\u4e00\u5b9a\u53ef\u4ee5\u7ecf\u8fc7\u90a3\u4e2a\u8fb9\u6743\u4e3a $ 1 $ \u7684\u8fb9\u3002\n\n\u5c06\u539f\u56fe\u7f29\u70b9\uff0c\u56fe\u53d8\u6210\u4e00\u4e2a\u6811\u3002\u4ece $ a $ \u5f80 $ b $ \u8d70\uff0c\u53ea\u8981\u7ecf\u8fc7\u4e00\u4e2a\u6709\u5b9d\u85cf\u7684\u8fb9\u53cc\u5c31\u80fd\u591f\u627e\u5230\u5b9d\u85cf\uff0c\u7b54\u6848\u4e3a`YES`\uff0c\u5426\u5219\u7b54\u6848\u4e3a`NO`\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a,b,dfn[300005],low[300005],cnt,fa[300005];\nbool ans[300005];\nstruct edge{\n\tint end;\n\tbool v;\n};\nvector<edge>e[300005];\nbool asa;\nvoid dfs(int x,bool vis){\n\tlow[x]=dfn[x]=++cnt;\n\tbool t=false;\n\tif(x==b&&vis) asa=true;\n\tfor(int i=0;i<e[x].size();i++){\n\t\tint to=e[x][i].end;\n\t\tif(to==fa[x]) continue;\n\t\tif(dfn[to]==0){\n\t\t\tfa[to]=x;\n\t\t\tdfs(to,vis||e[x][i].v);\n\t\t\tlow[x]=min(low[to],low[x]);\n\t\t\tif(e[x][i].v&&low[to]<=dfn[x]) t=true;\n\t\t}\n\t\telse{\n\t\t\tlow[x]=min(dfn[to],low[x]);\n\t\t\tif(e[x][i].v&&dfn[to]<=dfn[x]) t=true;\n\t\t}\n\t}\n\tans[low[x]]|=(t||ans[dfn[x]]);\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1,x,y,z;i<=m;i++){\n\t\tscanf(\"%d %d %d\",&x,&y,&z);\n\t\te[x].push_back((edge){y,z});\n\t\te[y].push_back((edge){x,z});\n\t}\n\tcin>>a>>b;\n\tdfs(a,false);\n\tif(asa) cout<<\"YES\"<<endl;\n\telse{\n\t\twhile(b){\n\t\t\tif(ans[dfn[b]]){\n\t\t\t\tcout<<\"YES\"<<endl;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tb=fa[b];\n\t\t}\n\t\tcout<<\"NO\"<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1644159105,
        "uid": 429147,
        "name": "hxhhxh",
        "ccfLevel": 0,
        "title": "CF652E"
    },
    {
        "content": "\u7f29\u70b9+LCA\u677f\u9898\uff0c\u4e00\u773c\u7f29\u70b9\n\n\u8fb9\u53cc\u8054\u901a\u7f29\u70b9\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8fb9\u53cc\u4e2d\u7684\u8fb9\u90fd\u53ef\u4ee5\u90fd\u53ef\u4ee5\u7ecf\u8fc7\uff0c\u5982\u679c\u67091\u90a3\u4e48\u8fd9\u4e2a\u70b9\u7684\u6743\u503c\u662f1\uff0c\u5426\u5219\u662f0\u3002\n\n\u7136\u540e\u5c31\u662f\u4e00\u68f5\u6811\u4e86\uff0c\u53ef\u7528LCA\u6c42\u4e24\u70b9\u4e4b\u95f4\u6811\u4e0a\u8def\u5f84\uff0c\u672c\u6765\u51c6\u5907\u7ebf\u6bb5\u6811\u6216st\u8868\uff0c\u4f46\u8fd9\u9053\u7d2b\u9898\u8272\u4e0d\u7b26\u5b9e\uff0c\u53ea\u6c42\u4e00\u6b21\uff0c\u6240\u4ee5\u6211\u9009\u62e9\u66b4\u529b\u722c\u5c71~~\u8fd9\u4e5f\u7b97LCA\uff1f~~\n\n\u4e0a\u4ee3\u7801\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<stack>\n#include<cstring>\nusing namespace std;\n#define LL long long\n#define M 1000005\n#define N 20\n#define lowbit(i) (i&(-i))\n#define Mod 1000000007\n#define IMax 0x7fffffffffffffff \nvoid read(LL &x){\n\tx=0;char c=getchar();LL f=1;\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-')\n\t\t\tf=-f;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tx=(x<<3)+(x<<1)+c-'0';\n\t\tc=getchar();\n\t}\n\tx*=f;\n\treturn ;\n}\nvoid print(LL x){\n\tif(x<10){\n\t\tputchar(x+'0');\n\t\treturn ;\n\t}\n\tprint(x/10);\n\tputchar(x%10+'0');\n}\nvoid write(LL x){\n\tif(x<0)\n\t\tx=-x,putchar('-');\n\tprint(x);\n}\nLL maxt(LL a,LL b){\n\treturn a<b?b:a;\n}\nLL mint(LL a,LL b){\n\treturn a<b?a:b;\n}\nstruct node{\n\tLL v,id;\n\tnode(LL V,LL Id){\n\t\tv=V,id=Id;\n\t}\n};\nstack<LL>q,r;\nvector<node>R[M],G[M];\nvector<LL>E[M];\nLL n,m,dfn[M],low[M],cnt,w[M],s[M],bel[M],f[M],e[M],dep[M],col;\nvoid tarjan(LL u,LL fa){\n\tq.push(u);\n\tdfn[u]=low[u]=++cnt;\n\tfor(int i=0;i<R[u].size();i++){\n\t\tLL v=R[u][i].v,id=R[u][i].id;\n\t\tif(v==fa)\n\t\t\tcontinue;\n\t\tr.push(id);\n\t\tif(!dfn[v]){\n\t\t\ttarjan(v,u);\n\t\t\tlow[u]=mint(low[u],low[v]);\n\t\t\tif(low[v]>dfn[u]){\n\t\t\t\t++col;\n\t\t\t\twhile(r.top()!=id){\n\t\t\t\t\tif(w[r.top()])\n\t\t\t\t\t\ts[col]=1;\n\t\t\t\t\tr.pop();\n\t\t\t\t}\t\n\t\t\t\tr.pop();\n\t\t\t\twhile(q.top()!=v){\n\t\t\t\t\tbel[q.top()]=col;\n\t\t\t\t\tE[col].push_back(q.top());\n\t\t\t\t\tq.pop();\n\t\t\t\t}\n\t\t\t\tbel[v]=col;\n\t\t\t\tE[col].push_back(v);\n\t\t\t\tq.pop();\n\t\t\t}\n\t\t}else\n\t\t\tlow[u]=mint(low[u],dfn[v]);\n\t}\n\tif(fa==-1){\n\t\t++col;\n\t\twhile(!r.empty()){\n\t\t\tif(w[r.top()])\n\t\t\t\ts[col]=1;\n\t\t\t\tr.pop();\n\t\t}\t\n\t\twhile(!q.empty()){\n\t\t\tbel[q.top()]=col;\n\t\t\tE[col].push_back(q.top());\n\t\t\tq.pop();\n\t\t}\n\t}\n}\nvoid dfs(LL u,LL fa){\n\tf[u]=fa;\n\tdep[u]=dep[fa]+1;\n\tfor(int i=0;i<G[u].size();i++){\n\t\tLL v=G[u][i].v,id=G[u][i].id;\n\t\tif(v==fa)\n\t\t\tcontinue;\n\t\te[v]=id;\n\t\tdfs(v,u);\n\t}\n}\nint main(){\n\tread(n),read(m);\n\tfor(int i=1;i<=m;i++){\n\t\tLL u,v;\n\t\tread(u),read(v),read(w[i]);\n\t\tR[u].push_back(node(v,i));\n\t\tR[v].push_back(node(u,i));\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(!dfn[i])\n\t\t\ttarjan(i,-1);\n\tfor(int i=1;i<=col;i++)\n\t\tfor(int j=0;j<E[i].size();j++){\n\t\t\tLL u=E[i][j];\n\t\t\tfor(int k=0;k<R[u].size();k++){\n\t\t\t\tLL v=R[u][k].v,id=R[u][k].id;\n\t\t\t\tif(bel[u]!=bel[v])\n\t\t\t\t\tG[bel[u]].push_back(node(bel[v],id));\n\t\t\t}\n\t\t}\n\tdfs(1,1);\n\tLL a,b;\n\tbool fl=0;\n\tread(a),read(b);\n\ta=bel[a],b=bel[b];\n\tif(dep[a]<dep[b])\n\t\tswap(a,b);\n\twhile(dep[a]>dep[b]){\n\t\tif(w[e[a]]||s[a])\n\t\t\tfl=1;\n\t\ta=f[a];\n\t}\n\twhile(a!=b){\n\t\tif(w[e[a]]||w[e[b]]||s[a]||s[b])\n\t\t\tfl=1;\n\t\ta=f[a];\n\t\tb=f[b];\n\t}\n\tif(s[a])\n\t\tfl=1;\n\tif(fl)\n\t\tputs(\"YES\");\n\telse\n\t\tputs(\"NO\");\n}\n \n```\n",
        "postTime": 1598450712,
        "uid": 105090,
        "name": "wyl_AC",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF652E \u3010Pursuit For Artifacts\u3011"
    },
    {
        "content": "[\u9898\u76ee\u6233\u8fd9](https://www.luogu.com.cn/problem/CF652E)\n\n\u8fd9\u662f\u4e00\u9053\u5f88\u597d\u7684\u7ec3\u4e60\u5f3a\u8054\u901a\u7684\u9898\u76ee\u3002\n\u9996\u5148\uff0c\u4ece\u9898\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u9898\u76ee\u7684\u8981\u6c42\u5c31\u662f\u8981\u6211\u4eec\u6c42\u51fa\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u662f\u5426\u53ef\u4ee5\u7ecf\u8fc7flag = 1 \u7684\u8fb9\u3002\n\u7531\u4e8e\u662f\u65e0\u5411\u56fe\uff0c\u4e14\u8981\u6c42\u5f88\u591a\uff0c\u76f4\u63a5\u66b4\u529bdfs\u4f1a\u5f88\u51cc\u4e71\u3002\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u60f3\u5230\u4e00\u4e2a\u601d\u8def\uff1a\u80fd\u4e0d\u80fd\u5c3d\u91cf\u628a\u8fd9\u5f20\u56fe\u7f29\u5c0f\uff0c\u6807\u8bb0\u8f6c\u4e3a\u70b9\uff0c\u6700\u597d\u6210\u4e3a\u4e00\u6761\u4e00\u6761\u94fe\u5462\uff1f\n\n## tarjan\u7684\u7f29\u70b9\uff01\uff01\n\n\u6ca1\u9519\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u73af\uff0c\u53ef\u4ee5\u60f3\u5230\uff0c\u53ea\u8981\u8fd9\u4e2a\u73af\u4e2d\u6709\u4e00\u6761\u8fb9flag = 1\uff0c\u90a3\u4e48\u6240\u6709\u7684\u70b9\u6211\u4eec\u90fd\u53ef\u4ee5\u901a\u8fc7falg = 1\u7684\u8fb9\u5230\u8fbe\uff08\u56e0\u4e3a\u8fd9\u662f\u73af\uff09\u3002\u6240\u4ee5\uff0c\u4e0d\u59a8\u8fdb\u884ctarjan\u7f29\u70b9\uff0c\u53ea\u8981\u8fd9\u4e2a\u7f29\u70b9\u4e2d\u6709\u4e00\u6761\u8fb9falg = 1\uff0c\u6211\u4eec\u5c31\u628a\u8fd9\u4e2a\u7f29\u70b9\u6253\u4e0atag\u3002\n\n\u518d\u4e00\u60f3\uff0c\u7ecf\u8fc7\u7f29\u70b9\u4e4b\u540e\uff0c\u539f\u6765\u5341\u5206\u51cc\u4e71\u7684\u56fe\u5c31\u53d8\u6210\u4e86\u4e00\u68f5\u6811\u3002\u5230\u8fbe\u7ec8\u70b9\u7684\u8def\u7ebf\u4e5f\u5c31\u53ea\u6709\u56fa\u5b9a\u4e00\u6761\u4e86\u3002\u8fd9\u91cc\u6211\u9009\u62e9dfs\u3002\n\n\u601d\u8def\u5927\u4f53\u5c31\u662f\u8fd9\u6837\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6O(M + N)\n\n\u8bdd\u4e0d\u591a\u8bf4\uff0c\u5177\u4f53\u7ec6\u8282\u64cd\u4f5c\u6807\u8bb0\u5728\u4ee3\u7801\u91cc\u9762\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 500010\n#define isdigit(c) ((c)>='0'&&(c)<='9')\n\ninline int read(){\n\tint x = 0,s = 1;\n\tchar c = getchar();\n\twhile(!isdigit(c)){\n\t\tif(c == '-') s = -1;\n\t\tc = getchar();\n\t} \n\twhile(isdigit(c)){\n\t\tx = (x << 1) + (x << 3) + (c ^ '0');\n\t\tc = getchar();\n\t}\n\treturn x * s;\n}\n\nint n, m;\nstruct node{\n\tint u, v, flag;\n\tint next;\n} t[N << 1]; \nint f[N];//\u65e5\u5e38\u90bb\u63a5\u8868 \n\nint s, ht;//\u8d77\u70b9\uff0c \u7ec8\u70b9 \nint dfn[N], low[N], scc[N]; //scc\u5373\u4e3a\u7f29\u70b9\u540e\u6bcf\u4e2a\u7f29\u70b9\u7684\u7f16\u53f7 \nstack <int> stac;//\u7f29\u70b9\u7528\u7684\nbool vis[N];//\u4e00\u4e2a\u70b9\u662f\u5426\u88ab\u7ecf\u8fc7 \n\n\nint bian = 0;\nvoid add(int u, int v, int flag){\n\tbian++;\n\tt[bian].u = u;\n\tt[bian].v = v;\n\tt[bian].flag = flag;\n\tt[bian].next = f[u];\n\tf[u] = bian;\n\treturn ;\n}\n\nint cnt = 0, cac;//cac\u4e3a\u5f3a\u8054\u901a\u7684\u6570\u91cf \nvoid tarjan(int now, int fa){//\u65e0\u5411\u56fe\u7684tarjan\u5f3a\u8054\u901a \u677f\u5b50 \n\tdfn[now] = low[now] = ++cnt;\n\tvis[now] = 1;\n\tstac.push(now);\n\tfor(int i = f[now]; i;i = t[i].next){\n\t\tint v = t[i].v;\n\t\tif(v != fa){\n\t\t\tif(!dfn[v]){\n\t\t\t\ttarjan(v, now);\n\t\t\t\tlow[now] = min(low[now], low[v]);\n\t\t\t}\n\t\t\telse if(vis[v])low[now] = min(low[now], low[v]);\n\t\t}\n\t}\n\tif(dfn[now] == low[now]){\n\t\tint cur;\n\t\tcac++;\n\t\tdo{\n\t\t\tcur = stac.top();\n\t\t\tstac.pop();\n\t\t\tscc[cur] = cac;\n\t\t\tvis[cur] = 0;\n\t\t}while(cur != now);\n\t}\n\treturn ;\n}\n\nbool tong[N]; //tong\u4e3a\u6bcf\u4e2a\u7f29\u70b9\u88ab\u6253\u4e0a\u7684\u6807\u8bb0\uff0c\u5373\u4e0a\u6587\u6240\u8bf4\u7684\uff0c\u662f\u5426\u5305\u542bflag = 1\u7684\u8fb9 \nvoid dfs(int now, bool flag){\n\tif(tong[now])flag = 1;//\u8fd9\u4e2a\u7f29\u70b9\u6807\u8bb0\u4e3a1\u7684\u8bdd\uff0c\u8bb0\u4e0b\u6765 \n\tif(now == scc[ht]){\n\t\tif(flag)puts(\"YES\");//\u641c\u5230\u7ec8\u70b9\uff0c\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684 \n\t\telse puts(\"NO\");\n\t\treturn ;\n\t}\n\tfor(int i = f[now]; i;i = t[i].next){\n\t\tint v = t[i].v, u = t[i].u;\n\t\tif(!vis[v]){\n\t\t\tvis[v] = 1;\n\t\t\tdfs(v, flag | t[i].flag);//\u8fd9\u91cc\u8981\u6ce8\u610f\u4e0d\u8981\u6f0f\u6389\u4e86\u7f29\u70b9\u4e0e\u7f29\u70b9\u4e4b\u95f4\u7684\u8fb9\u7684 flag \n\t\t}\t\n\t}\n\treturn ;\n}\n\nint main(){\n\tn = read(), m = read();\n\tfor(int i = 1;i <= m; i++){\n\t\tint x = read(), y = read(), tag = read();\n\t\tadd(x, y, tag);add(y, x, tag);\n\t}\n\ts = read() , ht = read();\n\ttarjan(1, 0);\n\tfor(int i = 1;i <= bian; i += 2){\n\t\tif(scc[t[i].u] == scc[t[i].v] && t[i].flag){\n\t\t\ttong[scc[t[i].u]] = 1;//\u4e3a\u5f3a\u8054\u901a\u5206\u91cf\u4e2d\u7684\u8fb9\uff0c\u4e14flag = 1 \n\t\t}\n\t}\n\tmemset(f, 0, sizeof(f));//\u91cd\u590d\u5229\u7528 \n\tbian = 0;\n\tmemset(vis, 0, sizeof(vis));\n\tfor(int i = 1;i <= m << 1; i++){\n\t\tint u = t[i].u, v = t[i].v;\n\t\tif(scc[u] != scc[v]){\n\t\t\tadd(scc[u], scc[v], t[i].flag);//\u4e0d\u540c\u7f29\u70b9\u4e4b\u95f4\u7684\u8fde\u8fb9\uff0c\u9700\u8981\u4fdd\u7559\u3002flag\u4e0d\u80fd\u6539 \n\t\t}\n\t}\n\tvis[scc[s]] = 1;\n\tdfs(scc[s], 0);//dfs\u7684\u90fd\u662f\u7f29\u70b9\uff0c\u8fd9\u70b9\u4e0d\u8981\u5fd8\u4e86 \n\treturn 0;\n}\n```\n\n\u603b\u7684\u6765\u8bf4\uff0c\u7801\u91cf\u4e2d\u7b49\uff0c\u662f\u9053\u7ec3\u4e60\u5f3a\u8054\u901a\u7684\u597d\u9898\uff08\u4e0d\u8fc7\u4e3a\u4ec0\u4e48\u505a\u5f97\u4eba\u8fd9\u4e48\u5c11\u5462\uff09\n",
        "postTime": 1584710312,
        "uid": 234224,
        "name": "\u9752\u9e1f_Blue_Bird",
        "ccfLevel": 5,
        "title": "\u5f88\u597d\u7684\u5f3a\u8054\u901a\u9898"
    },
    {
        "content": "\u770b\u5230\u201c\u6bcf\u6761\u8fb9\u53ea\u80fd\u901a\u8fc7\u4e00\u6b21\u201d\u8111\u6d77\u4e2d\u95ea\u73b0\u5272\u8fb9\uff08\uff09\n\n\u8003\u8651\u4e00\u4e2a\u5f31\u5316\u7248\u672c\uff1a\u5982\u679c\u8fd9\u4e24\u4e2a\u70b9\u5728\u540c\u4e00\u4e2a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\uff08\u4e0d\u4f1a\u7684\u53ef\u4ee5\u53bb\u677f\u5b50\u9898\u770b\u770b\uff09\u91cc\u7684\u8bdd\uff0c\u663e\u7136\u53ea\u8981\u6709\u6743\u4e3a $1$ \u7684\u8fb9\u5c31\u6709\u89e3\uff0c\u56e0\u4e3a\u6211\u4e00\u5b9a\u53ef\u4ee5\u5f3a\u884c\u8d70\u5230\u90a3\u6761\u8fb9\u7136\u540e\u6362\u4e00\u6761\u8def\u8fc7\u53bb\u3002\n\n\u4efb\u610f\u4e00\u4e2a\u65e0\u5411\u56fe\u53ef\u89c6\u4f5c\u82e5\u5e72\u8fb9\u53cc\u7ec4\u6210\u7684**\u6811**\uff08\u6811\u8fb9\u662f\u5272\u8fb9\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e2a\u8fb9\u53cc\u6253\u6807\u8bb0\u8bb0\u5f55\u6709\u6ca1\u6709\u6743\u4e3a $1$ \u7684\u8fb9\uff0c\u53ea\u8981\u6709\uff0c\u4e14\u6211\u7ecf\u8fc7\u4e86\u8fd9\u4e2a\u8fb9\u53cc\u5c31\u4e00\u5b9a\u6709\u89e3\uff08\u5982\u4e0a\uff09\u3002\n\n\u7136\u540e\u76f4\u63a5\u641c\u8fc7\u53bb\uff08\u7b80\u5355\u8def\u5f84\u552f\u4e00\uff09\uff0c\u987a\u8def\u5224\u4e00\u4e0b\u5272\u8fb9\u7684\u6743\u503c\u662f\u4e0d\u662f $1$\uff0c\u53ea\u8981\u7ecf\u8fc7\u4e86\u662f $1$ \u7684\u8fb9\u53cc\u6216\u8fb9\uff08\u5305\u62ec\u8d77\u70b9\u548c\u7ec8\u70b9\uff09\u5c31\u6709\u89e3\uff0c\u53cd\u4e4b\u65e0\u89e3\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint tot,n,m,dfn[400005],d[400005],dp[400005][21],low[400005],sum,ans,scc[400005];\nstruct node{\n\tint first,second,w;\n};\nvector<node>nbr[400005],_nbr[400005];\nbool vis[400005],_vis[300005];\nvoid tarjan(int x,int edge){\n\tdfn[x]=low[x]=++tot;//\u5272\u8fb9\n\tfor(int i=0;i<nbr[x].size();++i){\n\t\tint to=nbr[x][i].first;\n\t\tif(nbr[x][i].second==edge)continue;//\u4e0d\u80fd\u53cd\u590d\u8d70\u8fb9\n\t\tif(!dfn[to]){\n\t\t\ttarjan(to,nbr[x][i].second);\n\t\t\tlow[x]=min(low[x],low[to]);\n\t\t\tif(low[to]>dfn[x]){\n\t\t\t\tvis[nbr[x][i].second]=1;\n\t\t\t\t++ans;\n\t\t\t}\n\t\t}\n\t\telse low[x]=min(low[x],dfn[to]);\n\t}\n\treturn;\n}\nbool flag[300005];\nint a,b;\nvoid dfs(int cur,int fa){\n\tscc[cur]=sum;\n\tfor(int i=0;i<nbr[cur].size();++i){\n\t\tint to=nbr[cur][i].first;//\u5212\u5206\u8fb9\u53cc\uff0c\u4e0d\u8d70\u5272\u8fb9\n\t\tif(_vis[to]||vis[nbr[cur][i].second])continue;\n//\t\tif(nbr[cur][i].w==1)flag[sum]=1,cout<<sum<<'\\n';\n\t\t_vis[to]=1;\n\t\tdfs(to,cur);\n\t}\n\treturn;\n}\nvoid find(int x,int fa,bool opt){\n\topt|=flag[x];\n\tif(x==scc[b]){//\u6709\u5373\u6709\u89e3\n\t\tif(opt==1)cout<<\"YES\";\n\t\telse cout<<\"NO\";\n\t\texit(0);\n\t}\n\tfor(auto to:_nbr[x]){\n\t\tif(to.first==fa)continue;\n\t\tfind(to.first,x,(bool)(opt|(to.w)));\n\t}\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;++i){\n\t\tint u,v,w;\n\t\tcin>>u>>v>>w;\n\t\tnbr[u].push_back({v,i,w});\n\t\tnbr[v].push_back({u,i,w});\n\t}\n\tcin>>a>>b;\n\tfor(int i=1;i<=n;++i)if(!dfn[i])tarjan(i,0);\n\tfor(int i=1;i<=n;++i)if(!_vis[i])++sum,dfs(i,0);\n\tfor(int i=1;i<=n;++i){\n\t\tfor(int j=0;j<nbr[i].size();++j){\n\t\t\tif(vis[nbr[i][j].second]){\n\t\t\t\t_nbr[scc[i]].push_back({scc[nbr[i][j].first],i,nbr[i][j].w});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(nbr[i][j].w==1)flag[scc[i]]=1;\n\t\t\t}\n\t\t}\n\t}\n//\tcout<<scc[a]<<' '<<scc[b]<<' '<<flag[1]<<' '<<flag[2]<<'\\n';\n\tfind(scc[a],0,flag[scc[a]]);\n\treturn 0;\n}\n```\n",
        "postTime": 1667617440,
        "uid": 359614,
        "name": "Forever1507",
        "ccfLevel": 6,
        "title": "CF652E Pursuit For Artifacts\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6709\u4e00\u4e2a\u663e\u800c\u6613\u89c1\u7684\u7ed3\u8bba\uff1a\u5982\u679c\u5f53\u524d\u8def\u5f84\u7ecf\u8fc7\u4e00\u4e2a\u73af\uff0c\u4e14\u73af\u4e0a\u6709\u4e00\u6761\u8fb9\u6743\u4e3a $1$ \u7684\u8fb9\uff0c\u90a3\u4e48\u8fd9\u6761\u8def\u5f84\u4e00\u5b9a\u662f\u542b $1$ \u7684\u3002\n\n\u8bbe\u60f3\u4e00\u4e0b\uff0c\u82e5\u5f53\u524d\u7ecf\u8fc7\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u5165\u73af\u7684\u70b9\u548c\u51fa\u73af\u7684\u70b9\u4e00\u5b9a\u5c06\u8fd9\u4e2a\u73af\u5206\u5272\u6210\u4e24\u90e8\u5206\uff0c\u800c\u8fd9\u6761\u8fb9\u6743\u4e3a $1$ \u7684\u8fb9\u4e00\u5b9a\u5904\u4e8e\u4e24\u90e8\u5206\u4e2d\u7684\u4e00\u4e2a\uff0c\u76f4\u63a5\u5411\u8fd9\u4e00\u90e8\u5206\u8d70\u5373\u53ef\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5c06\u6240\u6709\u542b\u8fb9\u6743\u4e3a $1$ \u7684\u8fb9\u7684\u73af\u7f29\u70b9\uff08\u56e0\u4e3a\u662f\u65e0\u5411\u56fe\uff0c\u800c\u4e14\u5904\u7406\u7684\u662f\u8fb9\uff0c\u6240\u4ee5\u662f\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\uff09\u3002\n\n\u7f29\u5b8c\u70b9\u4e4b\u540e\u4e00\u5b9a\u662f\u4e00\u4e2a\u65e0\u73af\u56fe\uff0c\u76f4\u63a5\u8dd1 dfs \u627e\u6709\u6ca1\u6709\u542b\u8fb9\u6743 $1$ \u7684\u8fb9\u5373\u53ef\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=6e5+5;\nstruct node\n{\n\tint to,nxt,len;\n}e[MAXN],e_[MAXN];\nint head[MAXN],cnt=1;\nint head_[MAXN],cnt_=1;\nint chu[MAXN];\ninline void add(int x,int y,int z)\n{\n\te[++cnt].to=y;\n\te[cnt].nxt=head[x];\n\te[cnt].len=z;\n\thead[x]=cnt;\n}\ninline void add_(int x,int y,int z)\n{\n\te_[++cnt_].to=y;\n\te_[cnt_].nxt=head_[x];\n\te_[cnt_].len=z;\n\thead_[x]=cnt_;\n}\nint n,m;\nint dfn[MAXN],low[MAXN],now;\nint scc[MAXN],sum;\nint x[MAXN],y[MAXN],z[MAXN];\nbitset<MAXN>cut;\ninline void tarjan(int x,int las)\n{\n\tlow[x]=dfn[x]=++now;\n\tfor(register int i=head[x];i;i=e[i].nxt)\n\t{\n\t\tint y=e[i].to;\n\t\tif(!dfn[y])\n\t\t{\n\t\t\ttarjan(y,i);\n\t\t\tlow[x]=min(low[x],low[y]);\n\t\t\tif(low[y]>dfn[x])cut[i]=cut[i^1]=1;\n\t\t}\n\t\telse if(i!=(las^1))low[x]=min(low[x],dfn[y]);\n\t}\n}\ninline void dfs(int x)\n{\n\tscc[x]=sum;\n\tfor(register int i=head[x];i;i=e[i].nxt)\n\t{\n\t\tint y=e[i].to;\n\t\tif(scc[y]||cut[i])continue;\n\t\tdfs(y);\n\t}\n}\nint a,b;\nbitset<MAXN>don;\nbitset<MAXN>vis;\ninline bool dfs(int x,bool flag)\n{\n    if(don[x])flag=1;\n    if(x==b)\n    {\n        if(flag)puts(\"YES\");\n        else puts(\"NO\");\n        exit(0);\n    }\n    vis[x]=1;\n    for(register int i=head_[x];i;i=e_[i].nxt)\n    {\n        int y=e_[i].to,z=e_[i].len;\n        if(!vis[y])\n        {\n            if(z)dfs(y,1);\n            else dfs(y,0);\n        }\n    }\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d%d%d\",&x[i],&y[i],&z[i]);\n\t\tadd(x[i],y[i],z[i]);\n\t\tadd(y[i],x[i],z[i]);\n\t}\n\tfor(register int i=1;i<=n;i++)\n\t\tif(!dfn[i])tarjan(i,0);\n\tfor(register int i=1;i<=n;i++)\n\t\tif(!scc[i])sum++,dfs(i);\n\tfor(register int i=1;i<=cnt;i++)\n\t{\n\t\tif(scc[x[i]]!=scc[y[i]])\n\t\t{\n\t\t\tadd_(scc[x[i]],scc[y[i]],z[i]);\n\t\t\tadd_(scc[y[i]],scc[x[i]],z[i]);\n\t\t}\n\t\tif(scc[x[i]]==scc[y[i]]&&z[i]==1)don[scc[x[i]]]=1;\n\t}\n\tscanf(\"%d%d\",&a,&b);\n\ta=scc[a],b=scc[b];\n\tdfs(a,0);\n\treturn 0;\n}\n```",
        "postTime": 1647096924,
        "uid": 126871,
        "name": "yzh_Error404",
        "ccfLevel": 6,
        "title": "\u9898\u89e3  CF652E \u3010Pursuit For Artifacts\u3011"
    },
    {
        "content": "## \u601d\u8def\n\u56e0\u4e3a\u5728\u4e00\u4e2a\u73af\u4e0a\u5b58\u5728\u4e00\u6761\u8fb9\u6743\u503c\u4e3a $1$\uff0c\u7ecf\u8fc7\u8fd9\u4e2a\u73af\u4e00\u5b9a\u53ef\u4ee5\u8d70\u8fc7\u4e00\u6761\u6743\u503c\u4e3a $1$ \u7684\u8fb9\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u628a\u6bcf\u4e2a E-DCC \u5408\u5e76\u5373\u53ef\u3002\n\n\u7f29\u70b9\u540e\u7684\u6bcf\u4e2a\u70b9\uff0c\u5982\u679c\u5176\u4e2d\u5b58\u5728\u4e00\u6761\u6743\u503c\u4e3a $1$ \u7684\u8fb9\uff0c\u5c31\u628a\u70b9\u6743\u53d8\u4e3a $1$\u3002\n\n\u5408\u5e76\u540e\u8fd9\u4e2a\u56fe\u5c31\u53d8\u4e3a\u4e86\u4e00\u68f5\u6811\uff0c\u76f4\u63a5\u4f7f\u7528 dfs \u89e3\u51b3\u5c31\u597d\u4e86\u3002\n## code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=3e5+5,maxm=6e5+5;\nint n,m;\nstruct node{\n\tint nxt,from,to,w;\n}edge[maxm];\nint head[maxn],tot;\nstack<int> s;\nint dfn[maxn],low[maxn],id,st,e;\nint edcc[maxn],cnt;\nbool vis[maxn],viss[maxn],vis2[maxn];\nvoid add(int u,int v,int w){\n\ttot++;\n\tedge[tot].from=u;\n\tedge[tot].to=v;\n\tedge[tot].w=w;\n\tedge[tot].nxt=head[u];\n\thead[u]=tot;\n}\nvoid tarjan(int u,int fa){\n\tdfn[u]=low[u]=++id;\n\ts.push(u);\n\tvis[u]=1;\n\tfor(int i=head[u];i;i=edge[i].nxt){\n\t\tint v=edge[i].to;\n\t\tif(v==fa){\n\t\t\tcontinue;\n\t\t}\n\t\tif(!dfn[v]){\n\t\t\ttarjan(v,u);\n\t\t\tlow[u]=min(low[u],low[v]);\n\t\t}\n\t\telse if(vis[v]){\n\t\t\tlow[u]=min(low[u], low[v]);\n\t\t}\n\t}\n\tif(dfn[u]==low[u]){\n\t\tedcc[u]=++cnt;\n\t\twhile(s.top()!=u){\n\t\t\tedcc[s.top()]=cnt;\n\t\t\tvis[s.top()]=0;\n\t\t\ts.pop();\n\t\t}\n\t\ts.pop();\n\t\tvis[u]=0;\n\t}\n}\nvoid dfs(int u,bool pos){\n\tif(viss[u]){\n\t\tpos=1;\t\n\t}\n\tif(u==e){\n\t\tif(pos){\n\t\t\tprintf(\"YES\");\t\n\t\t}\n\t\telse{\n\t\t\tprintf(\"NO\");\n\t\t}\n\t\texit(0);\n\t}\n\tvis2[u]=1;\n\tfor(int i=head[u];i;i=edge[i].nxt){\n\t\tint v=edge[i].to;\n\t\tif(!vis2[v]){\n\t\t\tdfs(v,pos|edge[i].w);\n\t\t}\n\t}\n}\nint main(void){\n\tcin>>n>>m;\n\tfor(int i=1; i<=m; ++i){\n\t\tint u,v,w;\n\t\tcin>>u>>v>>w;\n\t\tadd(u,v,w);\n\t\tadd(v,u,w);\n\t}\n\tcin>>st>>e;\n\ttarjan(1,0);\n\tfor(int i=1;i<=tot;i+=2){\n\t\tif(edcc[edge[i].from]==edcc[edge[i].to]&&edge[i].w){\n\t\t\tviss[edcc[edge[i].from]]=1;\n\t\t}\n\t}\n\tmemset(head,0,sizeof(head));\n\ttot=0;\n\tfor(int i=1;i<=m*2;++i){\n\t\tif(edcc[edge[i].from]!=edcc[edge[i].to]){\n\t\t\tadd(edcc[edge[i].from],edcc[edge[i].to],edge[i].w);\n\t\t}\n\t}\n\tst=edcc[st];\n\te=edcc[e];\n\tdfs(st,0);\n\treturn 0;\n}\n```",
        "postTime": 1647688956,
        "uid": 357311,
        "name": "little_cindy",
        "ccfLevel": 6,
        "title": "CF652E Pursuit For Artifacts \u9898\u89e3"
    }
]
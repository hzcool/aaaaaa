[
    {
        "content": "\u7b2c\u4e00\u6b65\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u628a\u539f\u6570\u4e0e\u5176\u4e0b\u6807\u4f5c\u5dee\uff0c\u5373 $a_i=i-a_i$\u3002\n\n\u7136\u540e\u53ef\u4ee5\u53d1\u73b0\u6bcf\u6b21\u53ef\u4ee5\u628a\u503c\u4e3a $0$ \u7684\u6570\u53bb\u6389\uff0c\u53bb\u6389\u540e\u5176\u540e\u9762\u6240\u6709\u6570\u90fd\u51cf\u53bb $1$\u3002\u5e76\u4e14\u503c\u4e3a\u8d1f\u6570\u7684\u6570\u662f\u6c38\u8fdc\u5220\u4e0d\u6389\u7684\u3002\n\n\u5173\u4e8e\u5220\u7684\u987a\u5e8f\u95ee\u9898\uff0c\u5c1d\u8bd5\u51e0\u79cd\u60c5\u51b5\u540e\u5bb9\u6613\u53d1\u73b0\uff1a**\u5728 $a_i\\ge 0$ \u65f6\uff0c\u82e5\u524d\u9762\u88ab\u5220\u6389\u7684\u6570\u7684\u4e2a\u6570 $\\ge a_i$\uff0c$a_i$ \u603b\u80fd\u88ab\u5220\u6389**\u3002\uff08\u5148\u5220\u540e\u9762\u4e0d\u4f1a\u5f71\u54cd\u524d\u9762\uff0c\u6240\u4ee5\u4e00\u5b9a\u5b58\u5728\u67d0\u79cd\u987a\u5e8f\u80fd\u628a $a_i$ \u5220\u6389\uff09\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u4f5c\u5dee\u540e\u7684\u5e8f\u5217\u4e3a $0,1,2,0,1,3,5$\uff0c\u5220\u9664\u7684\u4e0b\u6807\u987a\u5e8f\u4e3a $4,5,1,6,2,7,3$\u3002\n\n\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u8003\u8651\u5220\u7684\u5177\u4f53\u987a\u5e8f\u4e86\u3002\n\n\u5bf9\u6bcf\u4e2a\u8be2\u95ee\uff0c\u524d\u540e\u5404\u6709\u82e5\u5e72\u4f4d\u7f6e\u4e0d\u80fd\u88ab\u5220\uff0c\u8fd9\u5c31\u8ba9\u95ee\u9898\u53d8\u5f97\u6076\u5fc3\u4e86\u3002\n\n\u5982\u679c\u53ea\u56fa\u5b9a\u540e\u7f00\u4f4d\u7f6e\uff0c\u4ece\u5934\u5f00\u59cb\u8003\u8651\uff0c\u90a3\u8fd8\u662f\u5bb9\u6613\u6a21\u62df\u7684\u3002\n\n\u73b0\u5728\u8d77\u70b9\u4e0d\u552f\u4e00\u4e86\uff0c\u4e00\u79cd\u89e3\u51b3\u7684\u65b9\u6cd5\u662f\uff1a\u5bf9\u6240\u6709\u8be2\u95ee\u79bb\u7ebf\u5904\u7406\uff08\u6309\u7167\u53f3\u7aef\u70b9\u6392\u5e8f\uff09\uff0c\u6bcf\u6b21\u8003\u8651\u5230\u4e00\u4e2a\u65b0\u7684\u6570 $a_r$ \u65f6\uff0c\u7528\u67d0\u4e2a\u6570\u636e\u7ed3\u6784\u540c\u65f6\u7ef4\u62a4 $[f_1,f_2,\\cdots,f_n]$\uff0c\u5176\u4e2d $f_i$ \u8868\u793a\u4ee5 $i$ \u4e3a\u8d77\u70b9\u65f6\u80fd\u5220\u6389\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n$[f_1,f_2,\\cdots,f_n]$ \u663e\u7136\u662f\u5355\u8c03\u9012\u51cf\u7684\uff0c\u90a3\u4e48 $a_r$ \u53ea\u4f1a\u5728\u67d0\u4e2a\u524d\u7f00\u90e8\u5206\u91cc\u88ab\u5220\u9664\u3002\u8bf4\u7684\u660e\u767d\u70b9\uff0c\u8bbe\u88ab\u5220\u9664\u7684\u6700\u53f3\u8fb9\u4f4d\u7f6e\u662f $k$\uff0c\u90a3\u4e48\u6ee1\u8db3 $f_1\\ge f_2 \\ge \\ldots \\ge f_k \\ge a_r > f_{k+1}\\ge \\ldots \\ge f_n$\u3002\n\n\u6211\u4eec\u9700\u8981\u7528\u6570\u636e\u7ed3\u6784\u627e\u5230\u8fd9\u4e2a\u4f4d\u7f6e $k$ \uff0c\u7136\u540e\u628a\u533a\u95f4 $[1,k]$ \u90fd\u52a0 $1$ \u3002\n\n\u53ef\u4ee5\u7528\u6811\u72b6\u6570\u7ec4\u6765\u5b9e\u73b0\uff0c$[1,k]$ \u533a\u95f4\u52a0 $1$ \uff0c\u5bf9\u5e94\u5dee\u5206\u6570\u7ec4\u662f $d_1$ \u52a0 $1$ \uff0c$d_{k+1}$  \u51cf $1$ \u3002\u6bcf\u6b21\u90fd\u662f $d_1$ \u52a0 $1$ \uff0c\u90a3\u5e72\u8106\u53ea\u7ef4\u62a4\u6bcf\u4e2a\u4f4d\u7f6e\u51cf $1$ \u7684\u4e2a\u6570\u597d\u4e86\u3002\u90a3\u4e48\u600e\u4e48\u627e $k+1$ \u5462\uff1f\u5f53\u524d\u603b\u5171\u52a0\u7684\u6b21\u6570\u662f $r-1$ \uff0c\u90a3\u4e48\u51cf\u7684\u603b\u6570\u6700\u591a\u5230 $r-1-a_r$ \u8fd8\u662f\u53ef\u4ee5\u6ee1\u8db3 $f_i \\ge a_r$  \u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u5206\u754c\u70b9 $k+1$ \u5728\u7b2c $r-1-a_r+1$ \u4e2a\u51cf\u4e00\u64cd\u4f5c\u7684\u4f4d\u7f6e\u3002\u90a3\u4e48\u7528\u6811\u72b6\u6570\u7ec4\u6c42\u7b2c $K$ \u5c0f\u6765\u627e\u8fd9\u4e2a\u4f4d\u7f6e\u5373\u53ef\u3002\n\n\u53c2\u8003\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int INF = 0x3f3f3f3f;\nconst LL mod = 1e9 + 7;\nconst int N = 300005;\nint a[N];\n\nint c[N];\nint sum(int x) {\n    int res = 0;\n    while (x) {\n        res += c[x];\n        x -= x & -x;\n    }\n    return res;\n}\nvoid add(int x, int d, int n) {\n    while (x <= n) {\n        c[x] += d;\n        x += x & -x;\n    }\n}\nint kth(int k, int n) {\n    int x = 0;\n    for (int i = 1 << 18; i; i >>= 1) {\n        if (x + i <= n && k - c[x + i] > 0) {\n            x += i;\n            k -= c[x];\n        }\n    }\n    return x + 1;\n}\nstruct Node {\n    int x, y, id;\n} b[N];\nbool cmp(Node p1, Node p2) {\n    return p1.y < p2.y;\n}\nint ans[N];\nint main() {\n    int n, m;\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%d\", &a[i]);\n        a[i] = i - a[i];\n    }\n    for (int i = 0; i < m; i++) {\n        scanf(\"%d%d\", &b[i].x, &b[i].y);\n        b[i].x = 1 + b[i].x;\n        b[i].y = n - b[i].y;\n        b[i].id = i;\n    }\n    sort(b, b + m, cmp);\n    int pos = 1;\n    for (int i = 0; i < m; i++) {\n        while (pos <= b[i].y) {\n            int k = a[pos] < 0 ? 1 : min(kth(pos - a[pos], n), pos + 1);\n            add(k, 1, n);\n            pos++;\n        }\n        ans[b[i].id] = b[i].y - sum(b[i].x);\n    }\n    for (int i = 0; i < m; i++) {\n        printf(\"%d\\n\", ans[i]);\n    }\n    return 0;\n}\n```\n\n\n\n\n\n\n\n",
        "postTime": 1599476279,
        "uid": 54357,
        "name": "OMG_wc",
        "ccfLevel": 0,
        "title": "CF1404C \u9898\u89e3"
    },
    {
        "content": "> [\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1404C)\u3002\n\n> \u9898\u610f\u7b80\u8ff0\uff1a\u7ed9\u5b9a\u5e8f\u5217 $a$\uff0c\u4f60\u53ef\u4ee5\u5220\u9664 $a_i$ \u5f53\u4e14\u4ec5\u5f53 $a_i=i$\u3002\u591a\u6b21\u8be2\u95ee $x,y$\uff0c\u6c42\u51fa\u5982\u679c\u56fa\u5b9a\u524d $x$ \u4e2a\u6570\u548c\u540e $y$ \u4e2a\u6570\uff0c\u90a3\u4e48\u6700\u591a\u80fd\u5220\u9664\u591a\u5c11\u4e2a\u6570\u3002\n\n---\n\n\u5355\u6b21\u8be2\u95ee\u65e0\u9650\u5236\uff08$x=y=0$\uff09\u3002\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u4e00\u65e6 $a_i>i$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u6c38\u8fdc\u4e5f\u65e0\u6cd5\u88ab\u5220\u9664\uff0c\u800c**\u5220\u9664\u6700\u53f3\u8fb9\u7684\u80fd\u88ab\u5220\u9664\u7684\u6570\u4e0d\u4f1a\u5f71\u54cd\u7b54\u6848**\u3002\u6240\u4ee5\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u5e8f\u5217 $b_i$ \u8868\u793a\u5982\u679c\u8981\u5220\u9664 $a_i$\uff0c\u90a3\u4e48\u81f3\u5c11\u8981\u5220\u9664 $b_i$ \u4e2a $a_i$ \u524d\u9762\u7684\u6570\uff0c\u663e\u7136\uff1a\n\n$$b_i=\\begin{cases}\\infty\\quad&(a_i>i)\\\\i-a_i&(a_i\\leq i)\\end{cases}$$\n\n\u6bcf\u6b21\u627e\u5230\u5e8f\u5217 $b$ \u4e2d\u6700\u5927\u7684 $i$ \u6ee1\u8db3 $b_i=0$\uff0c\u5c06\u5176\u5220\u9664\uff0c\u8bbe\u7f6e $b_i=\\infty$ \u5e76\u5c06 $b_{i+1},b_{i+2},\\cdots,b_n$ \u51cf\u53bb $1$\uff0c\u76f4\u5230 $\\max b_i>0$\uff0c\u5219\u5220\u9664\u7684\u6570\u7684\u4e2a\u6570\u5373\u4e3a\u7b54\u6848\u3002\u8fd9\u4e00\u64cd\u4f5c\u53ef\u4ee5\u7528\u652f\u6301\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u52a0\u51cf\uff0c\u533a\u95f4\u6c42\u6700\u5c0f\u503c\u7684 lazytag \u7ebf\u6bb5\u6811\u5b8c\u6210\u3002\n\n---\n\n\u5355\u6b21\u8be2\u95ee\u6709\u9650\u5236\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5220\u9664\u7684 $a_i$\uff0c\u8003\u8651 $i$ \u662f\u5426\u4e0d\u5927\u4e8e $y$ \u5373\u53ef\u3002\n\n\u6216\u8005\u518d\u7ef4\u62a4\u4e00\u4e2a\u5e8f\u5217 $c_i$\uff0c\u8868\u793a $a_i$ \u80fd\u5426\u88ab\u5220\u9664\uff0c\u5219\u7b54\u6848\u4e3a\n\n$$\\sum_{i=x+1}^{y} c_i$$\n\n---\n\n\u591a\u6b21\u8be2\u95ee\u6709\u9650\u5236\u3002\n\n\u4e0d\u59a8\u5148\u5c06\u6240\u6709\u6570\u56fa\u5b9a\uff0c\u7136\u540e\u4ece\u540e\u5f80\u524d\u6dfb\u52a0\u53ef\u4ee5\u64cd\u4f5c\u7684\u6570\uff0c\u6bcf\u6dfb\u52a0\u4e00\u4e2a\u6570\u90fd\u8fdb\u884c\u4e0d\u65ad\u627e\u5230\u6700\u53f3\u8fb9\u7684 $0$ \u7684\u64cd\u4f5c\uff0c\u5e76\u66f4\u65b0 $c_i$\u3002\n\n\u65b9\u6cd5 1\uff1a\u56e0\u4e3a\u6bcf\u6b21\u6dfb\u52a0\u53ef\u4ee5\u64cd\u4f5c\u7684\u6570\u90fd\u8981\u7528\u4e00\u4e2a\u7ebf\u6bb5\u6811\u7ef4\u62a4 $c$\uff0c\u4e14\u6bcf\u4e2a\u7248\u672c\u7684\u7ebf\u6bb5\u6811\u662f\u76f4\u63a5\u5728\u524d\u4e00\u7248\u672c\u7684\u7ebf\u6bb5\u6811\u4e0a\u4fee\u6539\uff0c\u6240\u4ee5\u4f7f\u7528\u4e3b\u5e2d\u6811\u5373\u53ef\u3002\n\n\u65b9\u6cd5 2\uff1a\u5c06\u8be2\u95ee\u79bb\u7ebf\u540e\u6309\u7167 $x$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u5e76\u4e00\u4e00\u56de\u7b54\uff0c\u8fd9\u6837\u76f4\u63a5\u7528\u652f\u6301\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\u7684\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 $c$ \u5373\u53ef\u3002\n\n```cpp\nconst int N=3e5+5;\n\nint n,q,a[N],val[N<<2],tag[N<<2],ans[N];\n\nstruct query{\n\tint x,y,id;\n\tbool operator < (const query &v) const {\n\t\treturn x>v.x;\n\t}\n}c[N];\n\nvoid push(int x){\n\tif(tag[x]){\n\t\tval[x<<1]-=tag[x];\n\t\tval[x<<1|1]-=tag[x];\n\t\ttag[x<<1]+=tag[x];\n\t\ttag[x<<1|1]+=tag[x];\n\t\ttag[x]=0;\n\t}\n}\n\nvoid add(int l,int r,int pos,int x,int v){\n\tif(l==r){\n\t\tval[x]=v;\n\t\treturn;\n\t} int m=l+r>>1; push(x);\n\tif(pos<=m)add(l,m,pos,x<<1,v);\n\telse add(m+1,r,pos,x<<1|1,v);\n\tval[x]=min(val[x<<1],val[x<<1|1]);\n}\n\nint querypos(int l,int r,int p,int x){\n\tif(l==r&&val[x]>0)return 1e9;\n\tif(l==r&&val[x]==0)return l;\n\tint m=l+r>>1,ans; push(x);\n\tif(m<p)ans=querypos(m+1,r,p,x<<1|1);\n\telse if(val[x<<1|1]==0)ans=querypos(m+1,r,p,x<<1|1);\n\telse ans=querypos(l,m,p,x<<1);\n\tval[x]=min(val[x<<1],val[x<<1|1]);\n\treturn ans;\n}\n\nvoid modify(int l,int r,int ql,int qr,int x){\n\tif(ql>qr)return;\n\tif(ql<=l&&r<=qr){\n\t\tval[x]--,tag[x]++;\n\t\treturn;\n\t} int m=l+r>>1; push(x);\n\tif(ql<=m)modify(l,m,ql,qr,x<<1);\n\tif(m<qr)modify(m+1,r,ql,qr,x<<1|1);\n\tval[x]=min(val[x<<1],val[x<<1|1]);\n}\n\nint d[N];\nvoid add(int x){while(x<=n)d[x]++,x+=x&-x;}\nint query(int x){int ans=0; while(x)ans+=d[x],x-=x&-x; return ans;}\n\nvoid solve(){\n\tcin>>n>>q; mem(val,0x3f);\n\tfor(int i=1;i<=n;i++)cin>>a[i];\n\tfor(int i=1;i<=q;i++)cin>>c[i].x>>c[i].y,c[i].id=i;\n\tsort(c+1,c+q+1);\n\tint p=1; \n\tfor(int i=n;i;i--){\n\t\tadd(1,n,i,1,a[i]>i?1e9:i-a[i]);\n\t\twhile(val[1]==0){\n\t\t\tint pos=querypos(1,n,i,1);\n\t\t\tadd(pos),add(1,n,pos,1,1e9),modify(1,n,pos+1,n,1);\n\t\t}\n\t\twhile(p<=q&&c[p].x==i-1){\n\t\t\tans[c[p].id]=query(n-c[p].y);\n\t\t\tp++;\n\t\t}\n\t}\n\tfor(int i=1;i<=q;i++)cout<<ans[i]<<endl;\n}\n```",
        "postTime": 1599658405,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "# Codeforces Round #668 (Div. 1)  \n## C. Fixed Point Removal\n***\n## update  \n\n\u4e4b\u524d\u4ee3\u7801\u6709\u8bef\u73b0\u5728\u5df2\u7ecf\u66f4\u6b63  \n***\n### \u9898\u76ee\u5927\u610f  \n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a$n$\u7684\u5e8f\u5217\uff0c\u4e00\u6b21\u5220\u9664\u64cd\u4f5c\u53ef\u4ee5\u8fdb\u884c\u5f53\u4e14\u4ec5\u5f53$a[i] = i$,$i$\u4e3a\u8fd9\u4e2a\u5143\u7d20\u5230\u8fd9\u4e2a\u5e8f\u5217\u5934\u7684\u8ddd\u79bb\u3002  \n\n\u6ce8\u610f\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u540e\u5e8f\u5217\u4f1a\u91cd\u65b0\u62fc\u63a5\u8d77\u6765\u3002  \n\n\u5b9a\u4e49\u4e00\u4e2a\u5e8f\u5217\u7684\u6743\u91cd\u4e3a\u6700\u591a\u5220\u9664\u7684\u5143\u7d20\u4e2a\u6570\u3002  \n\n$q$\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u4e3a\u4e00\u4e2a\u5b50\u6bb5\u3002  \n\n\u6bcf\u4e2a\u8be2\u95ee\u8f93\u51fa\u5b50\u6bb5\u7684\u6743\u91cd\u3002  \n\n### \u601d\u8def  \n\u7531\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\u5220\u9664\u7684\u6761\u4ef6\u4e0d\u540c\uff0c\u53ef\u4ee5\u60f3\u5230\u6211\u4eec\u8981\u7edf\u4e00\u5220\u9664\u6761\u4ef6\uff0c\u5373$a[i]\\ -\\ i\\ = 0$  \n\u8fd9\u6837\u53ea\u8981\u6211\u4eec\u6bcf\u4e2a\u4f4d\u7f6e$a[i]$\u53d8\u4e3a$i\\ -\\ a[i]$\u53ea\u9700\u8981\u770b\u5f53\u524d\u4f4d\u7f6e\u662f\u5426\u4e3a$0$\u5373\u53ef\u3002  \n\u5047\u5982\u6211\u4eec\u5220\u9664\u4e00\u4e2a\u6570\uff0c\u5bf9\u540e\u9762\u6570\u7684\u5f71\u54cd\u663e\u7136\u662f\u6240\u6709\u7684$a[k](k > qi)$\u90fd\u51cf\u53bb$1$\u3002  \n  \n\u53ef\u4ee5\u8bb0$f[i,j]$\u4e3a\u5e8f\u5217$(i,j)$\u7684\u7b54\u6848\uff0c\u663e\u7136\u53ef\u4ee5\u4ece$f(i,j)$\u9012\u63a8\u5230$f(i, j + 1)$\u3002\u5047\u5982\u4e4b\u524d\u5220\u9664\u7684\u6570\u5927\u4e8e$a(i)$\u90a3\u4e48\u5fc5\u7136\u53ef\u4ee5\u6784\u9020\u4e00\u79cd\u65b9\u6cd5\u4f7f$a(i)$\u5148\u88ab\u5220\u9664\uff0c\u5e76\u4e14\u4e0d\u5f71\u54cd\u524d\u9762\u7684\u6570\u7684\u5220\u9664\uff0c\u4e8e\u662f\u5c31\u6709  \n$$f(i,j + 1) = f(i,j) + 1 \\ \\ \\ (if\\ f(i,j) \\geq a(j+1))$$  \n  \n\u8fd9\u6837\u5b50\u5c31\u53d1\u73b0\u8d77\u70b9\u76f8\u540c\u7684\u65f6\u5019\u7ec8\u70b9\u53ef\u4ee5\u9012\u63a8\uff0c\u6211\u4eec\u7684\u60f3\u6cd5\u662f\u786e\u5b9a\u7ec8\u70b9$r$\uff0c\u7136\u540e\u7ef4\u62a4\u6240\u6709\u7684$f(i,r)$\uff0c\u663e\u7136\u5e8f\u5217\u8d8a\u957f\u7b54\u6848\u8d8a\u5927\uff0c\u90a3\u4e48$f(1,r)$\u5230$f(r,r)$\u662f\u5355\u8c03\u9012\u51cf\u7684\uff0c\u53ef\u4ee5\u4e8c\u5206\u627e\u5230\u7b2c\u4e00\u4e2a$f(j,r) \\geq a(r+1)$\u7684\u4f4d\u7f6e\u3002  \n\n\u63a5\u4e0b\u6765\u8981\u5904\u7406\u7684\u5c31\u662f\u5355\u70b9\u67e5\u8be2\u4ee5\u53ca\u533a\u95f4\u4fee\u6539\uff0c\u7528\u5dee\u5206\u6811\u72b6\u6570\u7ec4\u5c31\u53ef\u4ee5\u5904\u7406\u3002  \n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O((n + q)log^2n)$\n\n### \u4ee3\u7801  \n```cpp\n#include <bits/stdc++.h>\n#define Mid ((l + r) >> 1)\n\nusing namespace std;\n\nconst int N = 3e5 + 1009;\nint read(){\n\tchar c; int num, f = 1;\n\twhile(c = getchar(),!isdigit(c)) if(c == '-')f = -1; num = c - '0';\n\twhile(c = getchar(), isdigit(c)) num = num * 10 + c - '0';\n\treturn num * f;\n}\nint n, q, ans[N], a[N], t[N];\nvector<int>GET[N], id[N];\nvoid modify(int x, int f){\n\tfor(;x <= n; x += x & -x)\n\t\tt[x] += f;\n}\nint query(int x){\n\tint ans = 0;\n\tfor(;x; x -= x & -x)\n\t\tans += t[x];\n\treturn ans;\n}\nint main()\n{\n\tn = read(); q = read();\n\tfor(int i = 1; i <= n; i++)\n\t\ta[i] = i - read();\n\tfor(int i = 1; i <= q; i++){\n\t\tint l = read() + 1, r = n - read();\n\t\tGET[r].push_back(l);\n\t\tid[r].push_back(i);\n\t}\n\tfor(int i = 1; i <= n; i++){\n\t\tif(a[i] > 0){\n\t\t\tint l = 1, r = i - 1;\n\t\t\twhile(l <= r){\n\t\t\t\tif(query(Mid) < a[i])r = Mid - 1;\n\t\t\t\telse l = Mid + 1;\n\t\t\t}\n\t\t\tif(r >= 1){\n\t\t\t\tmodify(1, 1); modify(r + 1, -1);\n\t\t\t}\n\t\t}\n\t\tif(!a[i]){\n\t\t\tmodify(1, 1), modify(i + 1, -1);\n\t\t}\n\t\tfor(int j = 0; j < GET[i].size(); j++)\n\t\t\tans[id[i][j]] = query(GET[i][j]);\n\t}\n\tfor(int i = 1; i <= q; i++){\n\t\tprintf(\"%d\\n\",ans[i]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1599662723,
        "uid": 66548,
        "name": "onglu",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "~~\u5feb\u53bb\u628aFee_cle6418\u7684\u4e24\u53ea log hack\u4e86~~\n\n\u9996\u5148\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u6570\u4e0d\u4f1a\u5bf9\u524d\u9762\u4ea7\u751f\u5f71\u54cd\uff0c\u6211\u4eec\u53ef\u4ee5\u79bb\u7ebf\u8be2\u95ee\uff0c\u7136\u540e\u4ece\u540e\u5f80\u524d\u5904\u7406\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a_i$\uff0c\u53d8\u4e3a $i-a_i$\uff0c\u82e5 $a_i\\geq 0$\uff0c\u5219\u8bf4\u660e \u82e5 $i$ \u88ab\u5220\u4e86 $a_i$ \u4e2a\u6570\uff0c\u5219\u8fd9\u4e2a\u6570\u53ef\u4ee5\u88ab\u5220\u3002\n\n\u4e8e\u662f\u5c31\u53d8\u5f97\u5f88\u660e\u786e\u4e86\u3002\n\n\u7528\u4e00\u4e2a\u6811\u72b6\u6570\u7ec4\u8bb0\u5f55\u88ab\u5220\u7684\u4f4d\u7f6e\uff0c\u5904\u7406\u8be2\u95ee\uff0c\u7528\u4e00\u68f5\u7ebf\u6bb5\u6811\u8bb0\u5f55\u521d\u59cb\u503c $\\geq0$ \u7684 $a_i$\uff0c\u6bcf\u6b21\u5220\u6389\u4e00\u4e2a\u6570\uff08$a_i=0$\uff09\u76f8\u5f53\u4e8e\u5728\u4e4b\u540e\u7684 $a_i$ \u90fd\u51cf\u4e00\uff0c\u7136\u540e\u5982\u679c\u5b58\u5728\u5c0f\u4e8e\u7b49\u4e8e $0$ \u7684\u6570\u76f4\u63a5\u8fde\u9501\u53cd\u5e94\u5373\u53ef\u3002\u53ef\u4ee5\u7528\u6700\u5c0f\u503c\u548c\u4f4d\u7f6e\u6807\u8bb0\u89e3\u51b3\u3002\n\n\u65f6\u95f4 $O(n\\log n)$\uff0c\u5177\u4f53\u53ef\u4ee5\u89c1\u4ee3\u7801\u5427\u3002\n\n```\n#include<bits/stdc++.h>\n#define re register\nusing namespace std;\ninline int read(){\n\tre int t=0;re char v=getchar();\n\twhile(v<'0')v=getchar();\n\twhile(v>='0')t=(t<<3)+(t<<1)+v-48,v=getchar();\n\treturn t; \n}\nint t,n,m,a[1000002],ans[1000002],c[1000002];\ninline void add(re int x){\n\tfor(;x<=n;x+=x&(-x))++c[x];\n}\ninline int ask(re int x){\n\tint sum=0;\n\tfor(;x;x-=x&(-x))sum+=c[x];\n\treturn sum;\n}\nvector<int>qry[1000002],b[1000002],id[1000002];\nbool vis[300002];\nint mn[1200002],mnp[1200002],pos,sans,tg[1200002];\ninline void del(re int p,re int x){\n\ttg[p]+=x;mn[p]-=x;\n}\ninline void pd(re int p){\n\tif(tg[p]){\n\t\tdel(p<<1,tg[p]),del(p<<1|1,tg[p]);\n\t\ttg[p]=0; \n\t}\n}\ninline void ins(re int p,re int l,re int r,re int x,re int y){\n\tif(l==r){\n\t\tmn[p]=y;mnp[p]=l;\n\t\treturn;\n\t}pd(p);\n\tre int mid=l+r>>1;\n\tif(x<=mid)ins(p<<1,l,mid,x,y);\n\telse ins(p<<1|1,mid+1,r,x,y);\n\tif(mn[p<<1]<mn[p<<1|1])mn[p]=mn[p<<1],mnp[p]=mnp[p<<1];\n\telse mn[p]=mn[p<<1|1],mnp[p]=mnp[p<<1|1];\n}\ninline void query(re int p,re int l,re int r,re int x,re int y){\n\tif(l>=x&&r<=y){\n\t\tif(mn[p]<sans)sans=mn[p],pos=mnp[p];\n\t\treturn;\n\t}\n\tpd(p);\n\tre int mid=l+r>>1;\n\tif(x<=mid)query(p<<1,l,mid,x,y);\n\tif(y>mid)query(p<<1|1,mid+1,r,x,y);\n}\ninline void del(re int p,re int l,re int r,re int x,re int y){\n\tif(l>=x&&r<=y){\n\t\tdel(p,1);\n\t\treturn;\n\t}\n\tpd(p);\n\tre int mid=l+r>>1;\n\tif(x<=mid)del(p<<1,l,mid,x,y);\n\tif(y>mid)del(p<<1|1,mid+1,r,x,y);\n\tif(mn[p<<1]<mn[p<<1|1])mn[p]=mn[p<<1],mnp[p]=mnp[p<<1];\n\telse mn[p]=mn[p<<1|1],mnp[p]=mnp[p<<1|1];\n}\nint main(){\n\tre int bs=0;\n\tmemset(mn,0x3f,sizeof(mn));\n\tn=read(),m=read();\n\tfor(re int i=1;i<=n;++i)a[i]=i-read();\n\tfor(re int i=1,x,y;i<=m;++i){\n\t\tx=read(),y=read();\n\t\tqry[x+1].push_back(n-y);\n\t\tid[x+1].push_back(i);\n\t}\n\tfor(re int i=n;i;--i){\n\t\tif(!a[i])add(i),del(1,1,n,i+1,n);\n\t\telse if(a[i]>0)ins(1,1,n,i,a[i]);\n\t\twhile(1){\n\t\t\tsans=1e9;\n\t\t\tquery(1,1,n,1,n);\n\t\t\tif(sans<=0){\n\t\t\t\tadd(pos);\n\t\t\t\tins(1,1,n,pos,1e9);\n\t\t\t\tdel(1,1,n,pos+1,n);\n\t\t\t}\n\t\t\telse break;\n\t\t}\n\t\t//for(re int j=i+1;j<=n;++j)if((!vis[j]))&&a[j]>0&&a[j]<=ask(j))add(j); \n\t\tfor(re int j=0;j<qry[i].size();++j)ans[id[i][j]]=ask(qry[i][j]);\n\t}\n\tfor(re int i=1;i<=m;++i)printf(\"%d\\n\",ans[i]);\n}\n```\n",
        "postTime": 1599662123,
        "uid": 41476,
        "name": "gyh20",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u4e0d\u96be\u53d1\u73b0\u6700\u4f18\u7b56\u7565\u662f\u6bcf\u6b21\u9009\u62e9\u80fd\u5220\u7684\u4e2d\u6700\u53f3\u8fb9\u7684\u90a3\u4e00\u4e2a\u5220\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u6240\u6709\u80fd\u5220\u7684\u5168\u90e8\u5220\u5b8c\u3002\n\n\u8bb0 $c_i$ \u4e3a $i-a_i$\uff08\u82e5\u5c0f\u4e8e $0$ \u5219\u89c6\u4e3a $10^9$\uff09\uff0c$s_i$ \u4e3a $i$ \u5de6\u8fb9\u80fd\u5220\u7684\u4e2a\u6570\uff0c\u5219 $s_i=s_{i-1}+[s_{i-1}\\ge c_i]$\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a $O(qn)$ \u7684\u505a\u6cd5\uff1a\u6bcf\u6b21\u5bf9\u533a\u95f4\u5185\u6c42\u4e00\u904d $s$ \u5373\u53ef\u3002\n\n\u8003\u8651\u4f18\u5316\u8fd9\u4e2a\u505a\u6cd5\u3002\u79bb\u7ebf\u8be2\u95ee\uff0c\u6309\u5de6\u7aef\u70b9\u4ece\u53f3\u5230\u5de6\u626b\u63cf\u3002\u5047\u5982\u67d0\u4e2a\u6570\uff08\u8bbe\u4e3a $a_w$\uff09\u539f\u6765\u4e0d\u80fd\u5220\uff0c\u73b0\u5728\u53ef\u4ee5\u5220\uff0c\u90a3\u4e48\u4f1a\u5bf9 $[w+1,n]$ \u7684\u6240\u6709 $s$ \u9020\u6210 $1$ \u7684\u8d21\u732e\u3002\u800c\u8fd9\u65f6\u53c8\u53ef\u80fd\u4f1a\u6709\u65b0\u7684 $w$ \u4ea7\u751f\uff0c\u9700\u8981\u91cd\u590d\u8fd9\u4e00\u8fc7\u7a0b\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u6bcf\u6b21\u53d6\u6700\u5de6\u8fb9\u7684\u53ef\u884c\u7684 $w$ \u603b\u662f\u6700\u4f18\u3002\n\n\u201c\u53ef\u4ee5\u5220\u201d\u7684\u6761\u4ef6 $s_{i-1}\\ge c_i$ \u53ef\u4ee5\u8f6c\u5316\u4e3a $i$ \u7684 $s$ \u88ab\u66f4\u65b0\u7684\u6b21\u6570 $\\ge c_i$\u3002\u76f8\u5f53\u4e8e\uff0c\u5728\u66f4\u65b0 $s$ \u65f6\u987a\u4fbf\u8ba9 $c$ \u51cf\u4e00\uff0c\u5047\u5982\u5c0f\u4e8e\u7b49\u4e8e $0$ \u5219\u8bf4\u660e\u53ef\u4ee5\u4f5c\u4e3a\u65b0\u7684 $w$\u3002\u6bcf\u4e2a\u6570\u81f3\u591a\u53ea\u4f1a\u88ab\u7528\u6765\u66f4\u65b0\u4e00\u6b21\uff0c\u56e0\u6b64\u5047\u5982\u7528\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u6765\u5b9e\u73b0\u7684\u8bdd\uff0c\u590d\u6742\u5ea6\u662f $O((n+q)\\log n)$\u3002\u4ee3\u7801\u4e2d\u4f7f\u7528\u7684\u662f\u4e8c\u5206\u518d\u52a0\u4e0a\u7ebf\u6bb5\u6811\uff0c\u590d\u6742\u5ea6\u662f $O(n\\log ^2n+q\\log n)$\uff0c\u4ecd\u7136\u80fd\u8fc7\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a[300005],ans[300005],tag[1200005];\nstruct P{\n\tint mx,sum,len;\n}t[1200005];\nP operator +(P a,P b){\n\treturn {max(a.mx,b.mx),a.sum+b.sum,a.len+b.len};\n}\nstruct Query{\n\tint r,id;\n};\nvector<Query> q[300005];\nvoid Build(int p,int l,int r){\n\tif(l==r)return t[p]={(a[l]>=0?-a[l]:-(1<<30)),0,1},void();\n\tint mid=(l+r)/2;\n\tBuild(p*2,l,mid),Build(p*2+1,mid+1,r);\n\tt[p]=t[p*2]+t[p*2+1];\n}\nvoid Tag(int p,int x){\n\ttag[p]+=x,t[p].sum+=t[p].len*x,t[p].mx+=x;\n}\nvoid Pushdown(int p){\n\tif(tag[p])Tag(p*2,tag[p]),Tag(p*2+1,tag[p]),tag[p]=0;\n}\nvoid Add(int p,int l,int r,int x,int y){\n\tif(x<=l&&r<=y)return Tag(p,1),void();\n\tPushdown(p);\n\tint mid=(l+r)/2;\n\tif(x<=mid)Add(p*2,l,mid,x,y);\n\tif(mid<y)Add(p*2+1,mid+1,r,x,y);\n\tt[p]=t[p*2]+t[p*2+1];\n}\nvoid Upd(int p,int l,int r,int x){\n\tif(l==r)return t[p]={-(1<<30),t[p].sum,1},void();\n\tPushdown(p);\n\tint mid=(l+r)/2;\n\tif(x<=mid)Upd(p*2,l,mid,x);\n\telse Upd(p*2+1,mid+1,r,x);\n\tt[p]=t[p*2]+t[p*2+1];\n}\nint Que(int p,int l,int r,int x){\n\tif(l==r)return t[p].sum;\n\tPushdown(p);\n\tint mid=(l+r)/2;\n\tif(x<=mid)return Que(p*2,l,mid,x);\n\telse return Que(p*2+1,mid+1,r,x);\n}\nP Que2(int p,int l,int r,int x,int y){\n\tif(x<=l&&r<=y)return t[p];\n\tPushdown(p);\n\tint mid=(l+r)/2;\n\tif(x>mid)return Que2(p*2+1,mid+1,r,x,y);\n\tif(y<=mid)return Que2(p*2,l,mid,x,y);\n\treturn Que2(p*2,l,mid,x,y)+Que2(p*2+1,mid+1,r,x,y);\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&a[i]),a[i]=i-a[i];\n\t//for(int i=1;i<=n;i++)cout<<a[i]<<'\\n';\n\tfor(int i=1,x,y;i<=m;i++)scanf(\"%d%d\",&x,&y),q[1+x].push_back({n-y,i});\n\tBuild(1,1,n);\n\tfor(int i=n;i>=1;i--){\n\t\twhile(1){\n\t\t\tint l=i,r=n,ans=n+1;\n\t\t\twhile(l<=r){\n\t\t\t\tint mid=(l+r)/2;\n\t\t\t\tif(Que2(1,1,n,i,mid).mx>=0)ans=mid,r=mid-1;\n\t\t\t\telse l=mid+1;\n\t\t\t}\n\t\t\tif(ans==n+1)break;\n\t\t\tAdd(1,1,n,ans,n);\n\t\t\tUpd(1,1,n,ans);\n\t\t\t//cout<<i<<' '<<ans<<endl;\n\t\t}\n\t\tfor(Query j:q[i])ans[j.id]=Que(1,1,n,j.r);\n\t}\n\tfor(int i=1;i<=m;i++)printf(\"%d\\n\",ans[i]);\n    return 0;\n}\n```",
        "postTime": 1599659062,
        "uid": 42156,
        "name": "feecle6418",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u6ce8\uff1a\u4e0b\u6587\u4e2d\u7684$l,r$\u6307\u53ef\u4ee5\u79fb\u9664\u6570\u5b57\u7684\u533a\u95f4\uff0c\u800c\u975e\u8f93\u5165\u683c\u5f0f\u4e2d\u7684$l,r$\n\n\u79fb\u9664\u4e00\u4e2a\u6570\u53ef\u4ee5\u4f7f\u5e8f\u5217\u96c6\u4f53\u5de6\u79fb\uff0c\u4f46\u4e0d\u53ef\u80fd\u53f3\u79fb\uff0c\u4e8e\u662f$a_i>i$\u4e00\u5b9a\u4e0d\u4f1a\u88ab\u79fb\u9664\u3002\n\n\u8003\u8651\u66b4\u529b\uff0c\u4ee4$num_i$\u8868\u793a$i$\u4e4b\u524d(\u542b)\u80fd\u88ab\u79fb\u9664\u7684\u6570\u7684\u4e2a\u6570\uff0c\n\n\u5219\u5982\u679c$i-num_{i-1}(num_i) \\leq a_i \\leq i$,\u5219\u8fd9\u4e2a\u6570\u80fd\u88ab\u5220\u9664\uff0c$num_i=num_{i-1}+1$,\u5426\u5219$num_i=num_{i-1}$\n\n\u7b54\u6848\u4e3a$num_r$\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6709$O(n^2)$\u7684\u505a\u6cd5\u4e86\u3002\n\n```\n//\u8fd9\u4e0d\u662fAC\u4ee3\u7801!\n#include <bits/stdc++.h>\nusing namespace std;\nint n, q, l, r, a[300011], num[300011];\nint main() {\n\tscanf(\"%d%d\", &n, &q);\n\tfor(int i = 1; i <= n; i++) scanf(\"%d\", &a[i]);\n\tfor(int i = 1; i <= q; i++) {\n\t\tscanf(\"%d%d\", &l, &r);\n\t\tr = n - r; l++;\n\t\tnum[l-1] = 0;\n\t\tfor(int j = l; j <= r; j++) {\n\t\t\tnum[j] = num[j-1];\n\t\t\tif(j >= a[j] && j - num[j-1] <= a[j]) num[j]++;\n\t\t}\n\t\tprintf(\"%d\\n\", num[r]);\n\t}\n\treturn 0;\n} //TLE on test 6\n```\n\n\u5982\u4f55\u4f18\u5316\u8fd9\u4e2a\u505a\u6cd5\u5462\uff1f\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u6570\uff0c\u5b83\u53ea\u80fd\u88ab\u79fb\u9664\u4e00\u6b21\u3002\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u5230\u4e86\u79bb\u7ebf\uff0c\u5c06$l$\u7aef\u70b9\u6309\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u4f9d\u6b21\u52a0\u5165\u5904\u7406\u3002\n\n\u4e00\u4e2a\u6570\u88ab\u79fb\u9664\uff0c\u4f1a\u4f7f\u5b83\u540e\u9762\u7684\u6570\u7684$num \\gets num+1$\n\n\u4e0a\u6587\u4e2d\u7684$i-num[i] \\leq a[i]$\u79fb\u9879\u5f97\u5230$i-a[i]-num[i] \\leq 0$\uff0c\u6211\u4eec\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u8fd9\u4e2a\u503c\u3002\n\n\u6bcf\u5f53\u4e00\u4e2a\u6570\u80fd\u88ab\u79fb\u9664\uff0c\u5c31\u5bf9\u540e\u9762\u7684\u503c\u5168\u90e8$-1$\uff0c\u5e76\u67e5\u627e\u662f\u5426\u6709$\\leq 0$\u7684\u6570\uff08\u6700\u9760\u5de6\uff09\uff0c\u5982\u679c\u6709\u5c31\u91cd\u590d\u8fd9\u4e2a\u64cd\u4f5c\u3002\n\n\u67e5\u8be2\u65f6\u53ef\u4ee5\u518d\u5f00\u4e00\u4e2a\u6811\u72b6\u6570\u7ec4/\u7ebf\u6bb5\u6811\uff0c\u628a\u79fb\u9664\u503c\u7684\u4f4d\u7f6e\u8d4b\u4e3a$1$,\u518d\u505a\u533a\u95f4\u6c42\u548c\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u6bcf\u4e2a\u6570\u53ea\u4f1a\u88ab\u79fb\u9664\u4e00\u6b21\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u4e3a$O(n \\log n)$\u3002\n\n```\n#include <bits/stdc++.h>\nusing namespace std;\nconst int inf = 1e6;\nint n, m, a[300011], num[300011];\nstruct ques {\n\tint l, r, id, ans;\n} q[300011];\nbool cmp1(const ques p1, const ques p2) {return p1.l > p2.l;}\nbool cmp2(const ques p1, const ques p2) {return p1.id < p2.id;}\nstruct segment_tree {\n\tint minn[1200011], tag[1200011]; \n\tvoid build(int k, int l, int r) {\n\t\tminn[k] = inf; tag[k] = 0;\n\t\tif(l == r) return;\n\t\tint mid = (l + r) >> 1;\n\t\tbuild(k*2, l, mid); build(k*2+1, mid+1, r);\n\t}\n\tvoid pushdown(int k) {\n\t\tif(tag[k]) {\n\t\t\tminn[k*2] += tag[k];\n\t\t\tminn[k*2+1] += tag[k];\n\t\t\ttag[k*2] += tag[k];\n\t\t\ttag[k*2+1] += tag[k];\n\t\t\ttag[k] = 0;\n\t\t}\n\t}\n\tvoid modify(int k, int l, int r, int w, int s) {\n\t\tif(l == r) {\n\t\t\tminn[k] = s;\n\t\t\treturn;\n\t\t}\n\t\tpushdown(k);\n\t\tint mid = (l + r) >> 1;\n\t\tif(w <= mid) modify(k*2, l, mid, w, s);\n\t\telse modify(k*2+1, mid+1, r, w, s);\n\t\tminn[k] = min(minn[k*2], minn[k*2+1]);\n\t} //\u5355\u70b9\u8d4b\u503c\n\tvoid Modify(int k, int l, int r, int L, int R) {\n\t\tif(l > R || r < L) return;\n\t\tif(l >= L && r <= R) {\n\t\t\ttag[k]--; minn[k]--;\n\t\t\treturn;\n\t\t}\n\t\tpushdown(k);\n\t\tint mid = (l + r) >> 1;\n\t\tModify(k*2, l, mid, L, R);\n\t\tModify(k*2+1, mid+1, r, L, R);\n\t\tminn[k] = min(minn[k*2], minn[k*2+1]);\n\t} //\u533a\u95f4-1 \n\tint find(int k, int l, int r) {\n\t\tif(l == r) {\n\t\t\tif(minn[k] <= 0) return l;\n\t\t\treturn 0;\n\t\t}\n\t\tpushdown(k);\n\t\tint mid = (l + r) >> 1;\n\t\tif(minn[k*2] <= 0) return find(k*2, l, mid);\n\t\telse if(minn[k*2+1] <= 0) return find(k*2+1, mid+1, r);\n\t\treturn 0;\n\t}\n} t;\nstruct TA {\n\tint s[300011];\n\tint lowbit(int sum) {\n\t\treturn sum & -sum;\n\t}\n\tvoid add(int w) {\n\t\tfor(int i = w; i <= n; i += lowbit(i)) \n\t\t\ts[i]++;\n\t}\n\tint query(int w) {\n\t\tint ret = 0;\n\t\tfor(int i = w; i; i -= lowbit(i))\n\t\t\tret += s[i];\n\t\treturn ret;\n\t}\n} T;\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor(int i = 1; i <= n; i++) \n\t\tscanf(\"%d\", &a[i]);\n\tfor(int i = 1; i <= m; i++) {\n\t\tscanf(\"%d%d\", &q[i].l, &q[i].r);\n\t\tq[i].r = n-q[i].r; q[i].l++; q[i].id = i;\n\t\tq[i].ans = 0;\n\t}\n\tsort(q+1, q+m+1, cmp1); int w = n+1;\n\tt.build(1, 1, n);\n\tfor(int i = 1; i <= m; i++) {\n\t\twhile(w > q[i].l) {\n\t\t\t-- w; if(w < a[w]) continue;\n\t\t\tt.modify(1, 1, n, w, w - a[w]);\n\t\t}\n\t\tint pos;\n\t\twhile(pos = t.find(1, 1, n)) {\n\t\t\tT.add(pos); \n\t\t\tt.modify(1, 1, n, pos, inf); //\u79fb\u9664\u540e\u5c31\u4e0d\u80fd\u518d\u79fb\u9664\uff0c\u8d4b\u503cinf\n\t\t\tt.Modify(1, 1, n, pos+1, n); \n\t\t}\n\t\tq[i].ans = T.query(q[i].r);\n\t}\n\tsort(q+1, q+m+1, cmp2);\n\tfor(int i = 1; i <= m; i++)\n\t\tprintf(\"%d\\n\", q[i].ans);\n\treturn 0;\n}\n```",
        "postTime": 1605856752,
        "uid": 14559,
        "name": "AFOier",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u8fd9\u662f\u6211\u6240\u505a\u4e0d\u51fa\u6765\u7684\u9898\u76ee\u3002\u6211\u4ec0\u4e48\u65f6\u5019\u624d\u80fd GM \u554a\uff1f\u8ba9\u6211\u56de\u4e2a IM \u4e5f\u597d\u561b\uff01\n\n> ### [\u6d1b\u8c37\u9898\u76ee\u9875\u9762\u4f20\u9001\u95e8]( https://www.luogu.com.cn/problem/CF1404C ) & [CF \u9898\u76ee\u9875\u9762\u4f20\u9001\u95e8]( https://codeforces.com/contest/1404/problem/C )\n>\n> \u9898\u610f\u89c1\u6d1b\u8c37\u3002\n\n\u9996\u5148\u63a2\u7d22\u4e00\u4e2a\u4e0b\u6807\u5e8f\u5217\u80fd\u591f\u5168\u90e8\u88ab\u5220\u9664\u7684\u5145\u8981\u6761\u4ef6\u3002\u6211\u4eec\u8bbe $b_i=i-a_i$\uff0c\u90a3\u4e48\u4efb\u610f\u65f6\u523b\uff0c\u663e\u7136 $a_i$ \u80fd\u88ab\u5220\u6389\u5f53\u4e14\u4ec5\u5f53 $b_i=0$\u3002\u4e8e\u662f\u6211\u4eec\u76ef\u7740\u8fd9\u4e2a $b$ \u770b\uff1a\u4e00\u5f00\u59cb\u80af\u5b9a\u8981\u6709\u4e00\u4e2a\u5148\u9a71\u8005 $b_i=0$ \u5bf9\u4e0d\u5bf9\uff0c\u7136\u540e\u5220\u9664\u4e4b\u540e\u5c31\u53ef\u4ee5\u8ba9\u540e\u9762\u7684 $b$ \u503c\u90fd\u51cf\u53bb $1$\u3002\u4e00\u4e2a $b_i$\uff0c\u5982\u679c\u5b83 $<0$ \u90a3\u663e\u7136\u6ca1\u6551\u4e86\uff1b\u5982\u679c $\\geq 0$ \u90a3\u4e48\u53ea\u9700\u8981\u5c06\u5b83\u51cf\u53bb $b_i$ \u6b21 $1$ \u5c31\u53d8\u6210 $0$ \u53ef\u4ee5\u88ab\u5220\u6389\u4e86\u3002\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a $b_i\\geq 0$ \u7684\u4f4d\u7f6e $i$ \u8981\u88ab\u5220\u6389\u5fc5\u987b\u6ee1\u8db3\u524d\u9762\u6709 $b_i$ \u4e2a\u5df2\u7ecf\u88ab\u5220\u6389\u4e86\u3002\u4e8e\u662f\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u5fc5\u8981\u6761\u4ef6\uff1a\u4e0b\u6807\u5e8f\u5217 $c$ \u80fd\u88ab\u5168\u90e8\u5220\u6389\u4ec5\u5f53 $c_i\\leq i-1$\u3002\n\n\u7136\u540e\u968f\u4fbf van van \u53d1\u73b0\u8fd9\u4e2a\u4e5f\u6ee1\u8db3\u5145\u5206\u6027\u7684\uff0c\u53ea\u9700\u8981\u6784\u9020\u51fa\u4e00\u4e2a\u65b9\u6848\u5373\u53ef\u8bc1\u660e\u3002\u90a3\u4e48\u65b9\u6848\u5f88\u597d\u6784\u9020\uff0c\u5c31\u6bcf\u6b21\u5220\u6389 $c$ \u4e2d\u6700\u53f3\u8fb9\u6ee1\u8db3 $b_{c_i}=0$ \u7684 $c_i$ \u5373\u53ef\u3002\n\n\u7136\u540e\u518d\u5bf9\u8be2\u95ee\u8fdb\u884c\u4e00\u756a\u663e\u7136\u7684\u8f6c\u5316\uff1a\u6bcf\u7ec4\u8be2\u95ee $x,y$ \u76f8\u5f53\u4e8e\u6c42 $b$ \u4e0a\u7684\u533a\u95f4 $[l=x+1,r=n-y]$ \u7684\u6700\u957f\u80fd\u88ab $[0,1,2,3,\\cdots]$ \u6240\u300c\u8986\u76d6\u300d\u7684\u5b50\u5e8f\u5217\u957f\u5ea6\u3002\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u770b\u4e0a\u53bb\u5f88\u6e05\u65b0\u7684 DS \u9898\u3002\n\n\u5982\u4f55\u6c42\u5462\uff1f\uff1f\n\n\u6682\u65f6\u60f3\u4e0d\u5230\u76f4\u63a5\u5bf9\u533a\u95f4\u7ef4\u62a4\u7684\uff0c\u4e0d\u59a8\u5047\u8bbe\u533a\u95f4\u5de6\u7aef\u70b9\u56fa\u5b9a\uff0c\u6765\u6c42\uff08\u8fd9\u4e2a\u5176\u5b9e\u662f\u8001\u5957\u8def\u4e86\uff09\u3002\u90a3\u4e48\u53ef\u4ee5\u7ef4\u62a4\u4ee5\u6bcf\u4e2a\u4f4d\u7f6e\u4e3a\u6700\u540e\u4e00\u4f4d\u7684\u6700\u957f\u5b50\u5e8f\u5217\u957f\u5ea6 $-1$\uff0c\u8fd9\u662f\u4e00\u4e2a $\\mathrm O(n)$ \u7684\u6570\u5217\u5bf9\u5427\u3002\u5982\u4f55\u6c42\u8fd9\u4e2a\u6570\u5217\u5f88\u5bb9\u6613\uff0c\u7c7b\u4f3c DP \u7684\uff0c\u5f53\u524d\u4f4d\u7f6e $i$ \u7b54\u6848\u4e3a $x$ \u8981\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n1. \u524d\u9762\u6709 $x-1$ \u957f\u5ea6\u7684\uff0c\u5373 $\\max\\limits_{j=1}^{i-1}\\{dp_j\\}\\geq x-1$\uff1b\n2. \u5f53\u524d\u8fd9\u4f4d\u8981\u6ee1\u8db3\uff0c\u5373 $x\\geq a_i$\u3002\n\n\u7efc\u5408\u8d77\u6765\u5c31\u662f $x\\in\\left[a_i,\\max\\limits_{j=1}^{i-1}\\{dp_j\\}+1\\right]$\u3002\u8981\u53d6\u6700\u957f\u7684\uff0c\u4e8e\u662f\u5982\u679c\u533a\u95f4\u4e0d\u4e3a\u7a7a\u5c31\u53d6\u53f3\u7aef\u70b9\uff0c\u5982\u679c\u4e3a\u7a7a\u5c31\u8bbe\u4e00\u4e2a\u9519\u8bef\u503c\uff0c\u6bd4\u5982 $-\\infty$ \u5427\u3002\u7136\u540e\u5982\u679c\u5149\u662f\u5de6\u7aef\u70b9\u56fa\u5b9a\u7684\u8bdd\uff0c\u8fd9\u4e2a\u5f88\u663e\u7136\u662f\u53ef\u4ee5 $\\mathrm O(n)$ \u7684\u3002\u53ef\u60dc\u56fa\u5b9a\u4e0d\u5f97\u3002\n\n\u4e8e\u662f\u8003\u8651\u4ece\u53f3\u5f80\u5de6\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u76f8\u5f53\u4e8e\u4f9d\u6b21 push_front \u7136\u540e\u7ef4\u62a4\u6574\u4e2a DP \u6570\u7ec4\uff08\u8ddf\u4e0a\u9762\u5957\u8def\u914d\u5957\u7684\u5957\u8def\uff09\u3002\u8003\u8651\u5982\u4f55\u7ef4\u62a4\u3002\n\n\u663e\u7136\u4efb\u610f\u65f6\u523b DP \u6570\u7ec4\u662f\u5728 $[0,1,2,3,\\cdots]$ \u91cc\u9762\u63d2\u82e5\u5e72\u4e2a $-\\infty$ \u8fd9\u4e2a\u5f62\u5f0f\u3002\u7136\u540e\u53d1\u73b0\u5728\u5f80\u524d\u9762 push \u7684\u8fc7\u7a0b\u4e2d\uff0cpush \u7684\u662f $0$\uff0c\u6240\u4ee5\u8fd9\u4e2a\u81ea\u7136\u6570\u5e8f\u5217\u8981\u5f80\u540e\u987a\u79fb\uff0c\u5373\u5168\u4f53\u52a0 $1$\u3002\u7136\u540e\u6240\u6709 $-\\infty$ \u5f53\u5e74\u6240\u5bf9\u5e94\u7684\u533a\u95f4\u4e5f\u5728\u52a0 $1$\uff0c\u6162\u6162\u52a0\u7684\u8bdd\u53ef\u80fd\u6709\u671d\u4e00\u65e5\u80fd\u4f7f\u90a3\u4e2a\u533a\u95f4\u4e0d\u4e3a\u7a7a\uff0c\u91cd\u83b7\u65b0\u751f\u3002\u53c8\u663e\u7136\u6700\u591a\u4f1a\u6709 $n$ \u6b21\u91cd\u83b7\u65b0\u751f\u7684\u8bf4\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5c31\u66b4\u529b\u4fee\u6539\u5c31\u53ef\u4ee5\u4e86\uff08\u6bcf\u4e2a\u65f6\u523b\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u4fee\u6539\uff0c\u6bcf\u6b21\u4fee\u6539\u8fd8\u8981\u9644\u5e26\u540e\u7f00\u52a0 $1$\uff09\u3002\u90a3\u4e48\u5982\u4f55\u6bcf\u6b21\u5feb\u901f\u627e\u5230\u590d\u6d3b\u7684\u4eba\u4eec\u5462\uff1f\u800c\u4e14\u4e0d\u4ec5\u8981\u627e\u5230\uff0c\u8fd8\u8981\u6bcf\u6b21\u627e\u5230\u7684\u662f\u6700\u524d\u9762\u7684\uff1f\u7ef4\u62a4\u4e00\u4e2a\u7ebf\u6bb5\u6811\uff0c\u7136\u540e\u7ebf\u6bb5\u6811\u4e8c\u5206\u5373\u53ef\u3002\n\n\u6700\u540e\uff0c\u8fd9\u4e2a\u300c\u8001\u5957\u8def\u300d\u79bb\u7ebf + \u7ebf\u6bb5\u6811\u5b9e\u73b0\u662f\u6bd4\u8f83\u65b9\u4fbf\u7684\uff0c\u4f46\u662f\u6ce8\u610f\u5230\u6bcf\u6b21\u662f\u5728\u524d\u4e00\u4e2a\u5386\u53f2\u7248\u672c\u4e0a\u76f4\u63a5\u4fee\u6539\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e3b\u5e2d\u6811\u9884\u5904\u7406\u6765\u5b9e\u73b0\u56de\u7b54\u8be2\u95ee\u7684\u5728\u7ebf\uff0c\u4e0d\u8fc7\u6211\u4e0d\u4f1a\uff0c\u800c\u4e14\u4e5f\u5f88\u7b80\u5355\u7684\u6837\u5b50\uff0c\u4e0d\u7ba1\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define pb push_back\nconst int inf=0x3f3f3f3f;\nconst int N=300000,QU=N;\nint n,qu;\nint a[N+1];\nstruct query{int l,r;}qry[QU+1];\nvector<int> pos[N+1];\nint ans[QU+1];\nstruct segtree{\n\tstruct node{int l,r,dif,rl,lz;}nd[N<<2];\n\t#define l(p) nd[p].l\n\t#define r(p) nd[p].r\n\t#define dif(p) nd[p].dif\n\t#define rl(p) nd[p].rl\n\t#define lz(p) nd[p].lz\n\tvoid bld(int l=1,int r=n,int p=1){\n\t\tl(p)=l;r(p)=r;dif(p)=rl(p)=-inf;lz(p)=0;\n\t\tif(l==r)return;\n\t\tint mid=l+r>>1;\n\t\tbld(l,mid,p<<1);bld(mid+1,r,p<<1|1);\n\t}\n\tvoid init(){bld();}\n\tvoid sprup(int p){dif(p)=max(dif(p<<1),dif(p<<1|1));rl(p)=max(rl(p<<1),rl(p<<1|1));}\n\tvoid sprdwn(int p){\n\t\tif(lz(p)){\n\t\t\tdif(p<<1)+=lz(p);rl(p<<1)+=lz(p);lz(p<<1)+=lz(p);\n\t\t\tdif(p<<1|1)+=lz(p);rl(p<<1|1)+=lz(p);lz(p<<1|1)+=lz(p);\n\t\t\tlz(p)=0;\n\t\t}\n\t}\n\tvoid chg(int x,int v1,int v2,int p=1){\n\t\tif(l(p)==r(p))return dif(p)=v1,rl(p)=v2,void();\n\t\tsprdwn(p);\n\t\tint mid=l(p)+r(p)>>1;\n\t\tchg(x,v1,v2,p<<1|(x>mid));\n\t\tsprup(p);\n\t}\n\tvoid add(int l,int r,int v,int p=1){\n\t\tif(l>r)return;\n\t\tif(l<=l(p)&&r>=r(p))return dif(p)+=v,rl(p)+=v,lz(p)+=v,void();\n\t\tsprdwn(p);\n\t\tint mid=l(p)+r(p)>>1;\n\t\tif(l<=mid)add(l,r,v,p<<1);\n\t\tif(r>mid)add(l,r,v,p<<1|1);\n\t\tsprup(p);\n\t}\n\tint mx(int l,int r,int p=1){\n\t\tif(l<=l(p)&&r>=r(p))return rl(p);\n\t\tsprdwn(p);\n\t\tint mid=l(p)+r(p)>>1,res=-inf;\n\t\tif(l<=mid)res=max(res,mx(l,r,p<<1));\n\t\tif(r>mid)res=max(res,mx(l,r,p<<1|1));\n\t\treturn res;\n\t}\n\tint fst(){\n\t\tint p=1;\n\t\tif(dif(p)<0)return 0;\n\t\twhile(l(p)<r(p)){\n\t\t\tsprdwn(p);\n\t\t\tif(dif(p<<1)>=0)p=p<<1;\n\t\t\telse p=p<<1|1;\n\t\t}\n\t\treturn l(p);\n\t}\n}segt;\nint main(){\n\tcin>>n>>qu;\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",a+i),a[i]=i-a[i];\n\tfor(int i=1;i<=qu;i++)scanf(\"%d%d\",&qry[i].l,&qry[i].r),qry[i].l++,qry[i].r=n-qry[i].r,pos[qry[i].l].pb(i);\n\tsegt.init();\n\tfor(int i=n;i;i--){\n\t\tif(a[i]==0){\n\t\t\tsegt.chg(i,-inf,0);segt.add(i+1,n,1);\n\t\t\tint fd;\n\t\t\twhile(fd=segt.fst()){\n\t\t\t\tsegt.chg(fd,-inf,segt.mx(1,fd-1)+1);segt.add(fd+1,n,1);\n\t\t\t}\n\t\t}\n\t\telse if(a[i]>0)segt.chg(i,-a[i],-inf);\n\t\tfor(int j=0;j<pos[i].size();j++)ans[pos[i][j]]=max(0,segt.mx(1,qry[pos[i][j]].r)+1);\n\t}\n\tfor(int i=1;i<=qu;i++)printf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1600092404,
        "uid": 138400,
        "name": "chenxia25",
        "ccfLevel": 9,
        "title": "CodeForces 1404C - Fixed Point Removal"
    },
    {
        "content": "\u597d\u4e45\u6ca1\u5199\u535a\u5ba2\u4e86\uff0c\u778e\u5199\u4e00\u4e0b\uff1a\n\nVP \u4e86\u8fd9\u573a\uff0c\u7ed3\u679c\u8fd9\u9898\u4e00\u5f00\u59cb\u5199\u4e86\u4e00\u4e2a\u5047\u7b97\u6cd5\uff0c\u5bfc\u81f4\u6392\u540d\u53ea\u6709 240+ /kk ...\n\n\u4f46\u662f\u6211\u7684\u505a\u6cd5\u6bd4\u5176\u4ed6\u4eba\u7b80\u5355\u5f88\u591a\uff1f\u4e0d\u8fc7\u8f6c\u5316\u6bd4\u8f83\u591a\u6709\u70b9\u70e7\u8111\u5c31\u662f\u4e86\u3002\n\n\u9996\u5148\u8003\u8651\u600e\u4e48\u5355\u6b21\u67e5\u8be2\u3002\n\n\u8bbe$i$\u524d\u9762\u5df2\u7ecf\u5220\u4e86$j$\u4e2a\uff0c\u90a3\u4e48$i$\u80fd\u5220\u5f53\u4e14\u4ec5\u5f53$i-j=a_i$\u3002\n\n\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u6709\u540e\u6548\u6027\uff0c\u4eff\u4f5b\u8fde $O(n^2)$ dp \u90fd\u505a\u4e0d\u4e86...\u90a3\u600e\u4e48\u529e\uff1f\n\n\u6ce8\u610f\u5230\u4e00\u4e2a\u6027\u8d28\uff0c\u6700\u540e\u4e00\u4e2a\u6570\u5220\u9664\u5bf9\u540e\u9762\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5f88\u81ea\u7136\u7684\u60f3\u5230\uff1a\u5f00\u4e00\u4e2a\u5806\uff0c\u6bcf\u4e00\u6b21\u5220\u9664\u6700\u540e\u9762\u7684\uff0c\u518d\u66f4\u65b0\u4e00\u4e0b\u90a3\u4e9b\u53ef\u4ee5\u91cd\u65b0\u52a0\u5165\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5$O(n\\log_2 n)$\uff0c\u5f3a\u884c\u4f18\u5316\u53ef\u4ee5$O(n)$\u3002\n\n\u591a\u7ec4\u8be2\u95ee\uff1f\u663e\u7136\u8fd9\u4e2a\u8be2\u95ee\u53ef\u4ee5\u8f6c\u5316\u6210$[l,r]$\u7684\u533a\u95f4\u67e5\u8be2\u3002\u7136\u540e\u600e\u4e48\u65b9\u4fbf\u7ef4\u62a4\uff1f\n\n~~\u53d1\u73b0\u6700\u524d\u9762\u90a3\u4e2a\u6570\u53ef\u4ee5\u6700\u540e\u5220\u9664\uff0c\u7136\u540e\u6211\u5c31\u7075\u611f\u7206\u53d1\uff0c\u5199\u4e86\u83ab\u961f\uff0c\u4e00\u770b\u65f6\u95f4\u9650\u5236 4s \u9a6c\u4e0a\u5f00\u5199\uff0c\u5199\u7740\u5199\u7740\u53d1\u73b0\u5047\u4e86\uff0c\u5f53\u573a\u53bb\u4e16\u3002~~\n\n\u5355\u8bcd\u67e5\u8be2\u8fd9\u4e2a\u505a\u6cd5\u542f\u793a\u4e86\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6700\u540e\u4e00\u4e2a\u6570\u3002\u8003\u8651\u626b\u63cf\u7ebf\uff0c\u7ef4\u62a4$[l,r]$\u6700\u591a\u80fd\u5220\u9664\u591a\u5c11\u6b21\uff0c\u5982\u679c\u6b21\u6570$\\geq i-a_i$\uff0c\u90a3\u4e48\u4e00\u5b9a\u6709\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5220\u6389\u5b83\u3002\n\n\u63a5\u4e0b\u6765\u7b49\u4ef7\u4e8e\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u652f\u6301\uff1a\n\n- \u628a\u5927\u4e8e x \u7684\u6570\u5168\u90e8\u52a0\u4e0a 1\u3002\n\n- \u5355\u70b9\u67e5\u8be2\u3002\n\n\u4e00\u770b\u5c31\u5f88\u4e0d\u6b63\u5e38\uff0c\u51b7\u9759\u4e00\u4e0b\u53d1\u73b0\u8fd9\u4e2a\u7b54\u6848\u662f\u5173\u4e8e$l$\u5355\u8c03\u9012\u51cf\u7684\u3002\u90a3\u4e48\u6bcf\u4e00\u6b21\u201c\u628a\u5927\u4e8e x \u7684\u6570\u5168\u90e8\u52a0\u4e0a 1\u201d\u53ea\u9700\u8981\u533a\u95f4\u52a0\u6cd5\u5373\u53ef\u3002\n\n\u90a3\u4e48\u4f7f\u7528\u7ebf\u6bb5\u6811\uff08\u533a\u95f4\u52a0\u5355\u70b9\u67e5\u8be2\uff09+\u4e8c\u5206\u5c31\u505a\u5b8c\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_2^2 n)$\uff0c\u5982\u679c\u4f7f\u7528\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u53ef\u4ee5\u505a\u5230$O(n\\log_2 n)$\u3002\u5f53\u7136\u65f6\u9650 4s\uff0c\u968f\u4fbf\u8fc7\u3002\n\n\u5982\u679c\u628a\u6bcf\u4e00\u4e2a$r$\u7684\u4fe1\u606f\u7528\u4e3b\u5e2d\u6811\u8bb0\u5f55\u4e0b\u6765\u5c31\u53ef\u4ee5\u505a\u5230\u5f3a\u5236\u5728\u7ebf\u4e86\uff0c\u65f6\u7a7a\u590d\u6742\u5ea6\u90fd\u662f$O(n\\log_2 n)$\u3002",
        "postTime": 1599988280,
        "uid": 20309,
        "name": "Fading",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\n\u63d0\u4f9b\u4e00\u4e2a\u5728\u7ebf\u505a\u6cd5\u3002\n\n\u663e\u7136$\\ ($\uff0c\u5bf9\u4e8e\u533a\u95f4 $[l,r]$ \u7684 $a_i$ $(l\\leq i \\leq r)$ \u6709\u4ee5\u4e0b\u7ed3\u8bba$:$   \n\u2460$.\\ a_i>i$\uff0c$a_i$ \u4e00\u5b9a\u4e0d\u80fd\u79fb\u9664  \n\u2461$.\\ a_i=i$\uff0c$a_i$ \u4e00\u5b9a\u80fd\u79fb\u9664  \n\u2462$.\\ a_i<i$\uff0c\u82e5 $[l,i)$ \u5b58\u5728\u81f3\u5c11 $i-a_i$ \u4e2a\u53ef\u79fb\u9664\u7684\u6570\uff0c\u5219 $a_i$ \u4e00\u5b9a\u80fd\u79fb\u9664  \n\u2463$.\\ $\u5b9a\u4e49 $p_i$ \u4e3a\u6700\u540e\u4e00\u4e2a\u4f7f\u5f97 $a_i$ \u53ef\u79fb\u9664\u7684\u7684\u4e0b\u6807\uff0c\u5219\u4e00\u4e2a\u533a\u95f4 $[l,r]$ \u53ef\u79fb\u9664\u7684\u4e0b\u6807\u96c6\u4e3a $\\{\\ i\\ |\\ p_i\\geq l\\ \\}$\uff0c\u533a\u95f4\u53ef\u79fb\u9664\u7684\u4e2a\u6570\u4e3a\u8be5\u96c6\u5408\u5927\u5c0f \u3002\n\n$\\ a_i>i \\ \\Rightarrow\\ p_i=0$  \n$\\ a_i=i \\ \\Rightarrow\\ p_i=i$  \n$\\ a_i<i$\uff0c\u6839\u636e $\u2462$ \u4e8c\u5206\u4e00\u4e2a\u6700\u5927\u7684 $m$, \u4f7f\u5f97 $[m,i)$ \u5b58\u5728\u81f3\u5c11 $i-a_i$ \u4e2a \u53ef\u4ee5\u79fb\u9664\u7684\u6570\uff0c\u5373\u6ee1\u8db3 $p_j \\geq m$ $(m\\leq j<i)$ \u7684\u6570\uff0c\u82e5\u5b58\u5728\u8fd9\u4e2a $m$\uff0c\u5219 $p_i=m$\uff0c\u5426\u5219 $p_i=0$\u3002\n\n\u4e3b\u5e2d\u6811\u7ef4\u62a4 $p_i$ \u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(nlognlogn+qlogn)$\u3002\n\n\n```cpp\nconstexpr auto Inf = 0X3F3F3F3F;\n#ifndef LOCAL\n\t#include <bits/stdc++.h>\n#endif\n\ntypedef long long LL;\nusing namespace std;\n\nnamespace IO {\n\tinline LL read() {\n\t\tLL o = 0, f = 1; char c = getchar();\n\t\twhile (c < '0' || c > '9') { if (c == '-') f = -1; c = getchar(); }\n\t\twhile (c > '/' && c < ':') { o = o * 10 + c - '0'; c = getchar(); }\n\t\treturn o * f;\n\t}\n\tinline char recd() {\n\t\tchar o; while ((o = getchar()) < '0' || o > '9'); return o;\n\t}\n\tinline double reod() {\n\t\tdouble o = read(), f = 1; char c;\n\t\twhile ((c = getchar()) > '/' && c < ':') o += (c - '0') / (f *= 10);\n\t\treturn o;\n\t}\n}\nusing namespace IO;\n\nconst int SIZE = 3E5 + 7, Mod = 1E9 + 7;\n\nstruct Node {\n\tint L, R, w;\n} Node[SIZE << 6]; int Root[SIZE], Ind;\n\nvoid Ins(int pRoot, int& sRoot, int L, int R, int pos) {\n\tsRoot = ++Ind, Node[sRoot] = Node[pRoot], Node[sRoot].w++;\n\tif (L == R) return;\n\tint M = (L + R) >> 1;\n\tif (pos > M) Ins(Node[pRoot].R, Node[sRoot].R, M + 1, R, pos);\n\telse Ins(Node[pRoot].L, Node[sRoot].L, L, M, pos);\n}\n\nint Ask(int pRoot, int sRoot, int L, int R, int w) {\n\tif (L >= w) return Node[sRoot].w - Node[pRoot].w;\n\tint M = (L + R) >> 1;\n\tif (w > M) return Ask(Node[pRoot].R, Node[sRoot].R, M + 1, R, w);\n\telse return Ask(Node[pRoot].L, Node[sRoot].L, L, M, w) + Ask(Node[pRoot].R, Node[sRoot].R, M + 1, R, w);\n}\n\nint main() {\n\tint N = read(), M = read();\n\tfor (int pos = 1; pos <= N; pos++) {\n\t\tint w = read();\n\t\tif (w > pos) Ins(Root[pos - 1], Root[pos], 0, N, 0);\n\t\telse if (w == pos) Ins(Root[pos - 1], Root[pos], 0, N, pos);\n\t\telse {\n\t\t\tint L = 1, R = pos - 1, M, res = 0;\n\t\t\twhile (L <= R) {\n\t\t\t\tM = (L + R) >> 1;\n\t\t\t\tif (Ask(Root[M - 1], Root[pos - 1], 0, N, M) >= pos - w)\n\t\t\t\t\tres = M, L = M + 1;\n\t\t\t\telse \n\t\t\t\t\tR = M - 1;\n\t\t\t} Ins(Root[pos - 1], Root[pos], 0, N, res);\n\t\t}\n\t}\n\n\tint L, R;\n\twhile (M--) {\n\t\tL = read(), R = read();\n\t\tprintf(\"%d\\n\", Ask(Root[L], Root[N - R], 0, N, L + 1));\n\t}\n}\n```\n",
        "postTime": 1599918927,
        "uid": 110572,
        "name": "\u7720\u3164\u3164\u3164",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "[CF1404C Fixed Point Removal](https://www.luogu.com.cn/problem/CF1404C)\u89e3\u9898\u62a5\u544a\uff1a\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://zybuluo.com/xiaoziyao/note/1812332)\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u957f\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u4e00\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6ee1\u8db3 $a_i=i$ \u7684\u4f4d\u7f6e $i$\uff0c\u540c\u65f6\u4e4b\u540e\u7684\u6570\u5411\u524d\u79fb\u52a8\u4e00\u4f4d\u3002\n$q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u7ed9\u5b9a $x,y$\uff0c\u6c42\u4e0d\u80fd\u5220\u53bb\u524d $x$ \u4e2a\u5143\u7d20\u4e0e\u540e $y$ \u4e2a\u5143\u7d20\u7684\u60c5\u51b5\u4e0b\u6700\u591a\u80fd\u5220\u9664\u591a\u5c11\u5143\u7d20\u3002\uff08$1\\leqslant n\\leqslant 3\\times 10^5$\uff09\n\n## \u5206\u6790\n\n\u5957\u8def\u9898\u3002\n\n\u89c2\u5bdf\u6570\u636e\u8303\u56f4\u53ef\u77e5\u7b97\u6cd5\u590d\u6742\u5ea6\u5dee\u4e0d\u591a\u662f\u5355 $\\log$\uff0c\u6839\u636e\u5957\u8def\uff0c\u6211\u4eec\u5c06\u8be2\u95ee\u6302\u5728\u53f3\u7aef\u70b9\u4e0a\uff0c\u5e76\u4ece\u5de6\u5f80\u53f3\u626b\uff0c\u7528\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u5de6\u7aef\u70b9\u4e3a $i$ \u65f6\u7684\u7b54\u6848\u3002\n\n\u5177\u4f53\u5730\uff0c\u6211\u4eec\u8bb0 $v_i$ \u4e3a\u53ef\u4ee5\u5220\u9664\u7684\u533a\u95f4\u5de6\u7aef\u70b9\u4e3a $i$ \u65f6\uff0c\u6709\u591a\u5c11\u4e2a\u70b9\u65e0\u6cd5\u5220\u9664\uff0c\u53ef\u4ee5\u53d1\u73b0\u52a0\u5165\u4e00\u4e2a\u70b9\u540e\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97\u5176\u5bf9\u4e00\u6bb5\u540e\u7f00\u7684\u8d21\u732e\u3002\n\n\u626b\u63cf\u5230 $i$ \u65f6\uff0c\u82e5 $i<a_i$\uff0c\u4e0d\u96be\u53d1\u73b0\u5176\u4e00\u5b9a\u65e0\u6cd5\u5220\u9664\uff0c\u4e8e\u662f\u76f4\u63a5\u5168\u5c40\u52a0\u4e00\u3002\u5426\u5219\uff0c\u6211\u4eec\u4e8c\u5206\u4e00\u4e2a\u4f4d\u7f6e\u4f7f\u5f97\u5176\u524d\u9762\u5df2\u7ecf\u6709 $a_i$ \u4e2a\u65e0\u6cd5\u5220\u9664\u7684\u4f4d\u7f6e\uff0c\u5c06\u8fd9\u4e2a\u4f4d\u7f6e\u5bf9\u5e94\u7684\u540e\u7f00\u4e0e $i+1$ \u5bf9\u5e94\u7684\u540e\u7f00\u53d6\u5e76\u5e76\u76f4\u63a5\u66f4\u65b0\u3002\n\n\u8fd9\u79cd\u64cd\u4f5c\u7528\u6811\u72b6\u6570\u7ec4\u53ef\u4ee5\u8f7b\u677e\u7ef4\u62a4\uff0c\u4e8c\u5206\u7684\u65f6\u5019\u5728\u6811\u72b6\u6570\u7ec4\u4e0a\u4e8c\u5206\u5c31\u53ef\u4ee5\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n## \u4ee3\u7801\n\n```\n#include<stdio.h>\n#include<vector>\n#define lowbit(x) x&-x\nusing namespace std;\nconst int maxn=300005;\nint n,m;\nint a[maxn],ans[maxn],t[maxn];\nvector< pair<int,int> >v[maxn];\nvoid update(int x,int v){\n\tfor(int i=x;i<=n;i+=lowbit(i))\n\t\tt[i]+=v;\n}\nint query(int x){\n\tint res=0;\n\tfor(int i=x;i;i-=lowbit(i))\n\t\tres+=t[i];\n\treturn res;\n}\nint getkth(int k){\n\tint res=0;\n\tfor(int i=18;i>=0;i--)\n\t\tif(res+(1<<i)<=n&&k>t[res+(1<<i)])\n\t\t\tk-=t[res+(1<<i)],res+=(1<<i);\n\treturn res+1;\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=m;i++){\n\t\tint x,y;\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tx++,y=n-y;\n\t\tif(x<=y)\n\t\t\tv[y].push_back(make_pair(x,i));\n\t}\n\tfor(int i=1,tot=0;i<=n;i++){\n\t\tif(i-a[i]>=0){\n\t\t\ttot++;\n\t\t\tint pos=getkth(a[i]);\n\t\t\tif(pos<=i)\n\t\t\t\tupdate(pos,1);\n\t\t\telse update(i+1,1);\n\t\t}\n\t\tfor(int j=0;j<v[i].size();j++)\n\t\t\tans[v[i][j].second]=tot-query(v[i][j].first);\n\t}\n\tfor(int i=1;i<=m;i++)\n\t\tprintf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```\n\n\u672c\u573a\u5168\u90e8\u9898\u89e3\u53ef\u89c1\uff1a[Codeforces Round 1404\u8003\u8bd5\u603b\u7ed3](https://zybuluo.com/xiaoziyao/note/1812279)",
        "postTime": 1627567646,
        "uid": 35754,
        "name": "Verdandi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1404C\u3010Fixed Point Removal\u3011"
    },
    {
        "content": "#### \u524d\u8a00\n\n\u63d0\u4f9b\u4e00\u79cd\u5c0f\u5e38\u6570\u7ebf\u6bb5\u6811 / \u6811\u72b6\u6570\u7ec4\u7684\u505a\u6cd5\u3002\n\n\u4f60\u4ec5\u4ec5\u53ea\u9700\u8981\u4f1a\u7ebf\u6bb5\u6811\u533a\u95f4 $+ 1$\uff0c\u533a\u95f4\u53d6 $min$\uff0c\u5355\u70b9\u67e5\u503c\uff0c\u6ca1\u4e86\u3002\n\n+ #### \u66b4\u529b\n\n\u9898\u76ee\u6bcf\u6b21\u76f8\u5f53\u4e8e\u67e5\u8be2\u533a\u95f4 $[x + 1, n - y]$ \u7684\u7b54\u6848\uff0c\u4e0d\u59a8\u7528 $L$ \u4ee3\u66ff $x + 1$, $R$ \u4ee3\u66ff $n - y$\uff0c\u5373\u4e3a\u6c42 $[L, R]$ \u7684\u7b54\u6848\u3002\n\n\u5957\u8def\u6027\u7684\u8bbe $b_i = a_i - i$\uff0c\u5220\u9664\u7b2c $i$ \u4e2a\u6570\u76f8\u5f53\u4e8e\u4f7f\u5f97 $j > i, b_j + 1$\uff0c\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6570\u5373\u5176\u5bf9\u5e94\u7684 $b_i = 0$\u3002\u6240\u4ee5\u8bf4\uff0c\u5bf9\u4e8e\u4e00\u5f00\u59cb $b_i > 0$ \u7684\u90a3\u4e9b\u6839\u672c\u4e0d\u9700\u8981\u8003\u8651\u3002\n\n\u4e0b\u9762\u53ea\u8003\u8651\u533a\u95f4 $\\forall i \u2208[L,R], b_i \\leq 0$ \u7684\u6570\u3002\n\n\u5047\u8bbe\u533a\u95f4 $[L,R]$ \u4e2d\u4e00\u5f00\u59cb\u6709\u591a\u4e2a $b_i = 0$\uff0c\u6bcf\u6b21\u5220\u9664\u6700\u53f3\u8fb9\u7684\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\u5173\u4e8e\u8fd9\u70b9\uff0c\u8bfb\u8005\u81ea\u8bc1\u4e0d\u96be\u3002\n\n\u76f8\u5f53\u4e8e\u8bf4\u6bcf\u6b21\u90fd\u9009\u62e9\u6700\u9760\u8fd1\u53f3\u7aef\u70b9\u7684 $b_i = 0$ \u7684\u6570\uff0c\u5018\u82e5\u5220\u6389\u4e00\u4e9b\u6570\u540e\u51fa\u73b0\u4e86\u4e00\u4e9b\u53ef\u4ee5\u5220\u9664\u7684\u6570\uff0c\u90a3\u4e48\u4e0b\u4e00\u6b21\u80af\u5b9a\u4f18\u5148\u5220\u9664\u51fa\u73b0\u7684\u6700\u53f3\u8fb9\u7684 $b_i = 0$ \u7684\u6570\u3002\u6309\u7167\u8fd9\u79cd\u7b56\u7565\u5220\u9664\u7684\u8bdd\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $-b_i \\leq s$ \u90fd\u53ef\u4ee5\u88ab\u5220\u9664\uff0c$s$ \u662f $i$ \u524d\u9762\u53ef\u4ee5\u88ab\u5220\u9664\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u7b54\u6848\u53ef\u4ee5\u62bd\u8c61\u4e3a\u8fd9\u6837\u4e00\u4e2a\u7a0b\u5e8f\uff1a\n\n```cpp\nans = 0;\nfor(int i = L ; i <= R ; i ++)\nans += (-b[i] <= ans && b[i] <= 0);\n```\n\n\u4f46\u662f\u8fd9\u4e2a\u7a0b\u5e8f\u7684\u590d\u6742\u5ea6\u662f $O(n^2)$ \u7684\uff0c\u65e0\u6cd5\u901a\u8fc7 $n \\leq 2 \\times 10^5$ \u7684\u6570\u636e\u8303\u56f4\uff0c\u4f60\u4f1a $TLE$ $on$ $test$ $6$\u3002\u8003\u8651\u4f18\u5316\u3002\n\n+ #### \u4f18\u5316\n\n\u770b\u9898\u76ee\u731c\u590d\u6742\u5ea6 : $O(n \\log n)$\u3002\n\n\u5c06\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\uff0c\u6309\u7167 $R$ \u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u6392\u5e8f\uff0c\u6211\u4eec\u6bcf\u6b21\u5411\u53f3\u79fb\u52a8\u5f53\u524d\u53f3\u6307\u9488 $nowr$\n\n\u8003\u8651\u5efa\u7acb\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u6211\u4eec\u6bcf\u6b21\u79fb\u52a8\u533a\u95f4\u7684\u53f3\u7aef\u70b9\uff0c\u5047\u8bbe\u662f $nowr$ \u5176\u53f6\u5b50\u8282\u70b9 $[L,L]$ \u5b58\u7684\u503c\u7684\u8868\u793a\u7684\u610f\u4e49\u5c31\u662f\u533a\u95f4 $[L,nowr]$ \u7684\u7b54\u6848\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e:\n\n```cpp\nans = 0;\nfor(int i = L ; i <= nowr ; i ++)\nans += (-b[i] <= ans && b[i] <= 0);\n```\n\u5f97\u5230\u7684 $ans$ \u3002\n\n\u8003\u8651\u5047\u5982\u6211\u4eec\u73b0\u5728\u9700\u8981\u53f3\u79fb\u53f3\u7aef\u70b9\uff0c\u5c06 $nowr$ \u53d8\u6210 $nowr + 1$\u3002\n\n\u53ea\u8981\u5bf9\u4e8e $[L,nowr]$ \u7684\u7b54\u6848\u5927\u4e8e\u7b49\u4e8e $-b[i]$ \u7684\u6240\u6709\u53f6\u5b50\u8282\u70b9\u7684\u7b54\u6848\u5c31\u4f1a $+ 1$\u3002\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a $ans$ \u662f\u5177\u6709\u5355\u8c03\u6027\u7684\uff0c**\u5bf9\u4e8e\u540c\u4e00\u4e2a\u53f3\u7aef\u70b9\uff0c\u5de6\u7aef\u70b9\u8d8a\u9760\u524d\u7684\u7b54\u6848\u5927\u4e8e\u7b49\u4e8e\u5de6\u7aef\u70b9\u9760\u540e\u7684**\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e8c\u5206\u3002\n\n\u5f53\u7136\u4e86\uff0c\u76f4\u63a5\u4e8c\u5206\u7684\u8bdd\uff0c\u590d\u6742\u5ea6\u662f $O(q \\log^2n)$ \u7684\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\uff0c\u5018\u82e5\u5de6\u513f\u5b50\u7684\u6700\u5c0f\u503c\u5927\u4e8e\u7b49\u4e8e $-b[i]$ \uff0c\u5c31\u76f4\u63a5\u6574\u4e2a\u5de6\u513f\u5b50\u7684\u6743\u503c $+ 1$\uff0c\u540c\u65f6\u5f80\u53f3\u513f\u5b50\u8d70\u3002\u5426\u5219\u5148\u4e0d\u52a0\uff0c\u5c31\u5f80\u5de6\u513f\u5b50\u65b9\u5411\u9012\u5f52\u3002\u8fd9\u6837\u4e0b\u6765\u590d\u6742\u5ea6\u5c31\u53d8\u6210 $O(q \\log n)$ \u4e86\u3002\n\n\u5bf9\u4e8e\u8be2\u95ee\u7684\u7b54\u6848\uff0c\u5047\u8bbe\u5f53\u524d\u95ee\u9898\u7684\u53f3\u7aef\u70b9 $R_i$ \u6070\u597d\u7b49\u4e8e\u73b0\u5728\u7684\u53f3\u6307\u9488 $nowr$ \uff0c\u5c31\u5faa\u73af\u8be2\u95ee\uff0c\u5355\u70b9\u6c42 $L_i$ \u7684\u503c\u5c31\u662f\u8fd9\u4e2a\u8be2\u95ee\u7684\u7b54\u6848\u4e86\u3002\n\n#### Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define mid ((T[x].l + T[x].r) >> 1)\ninline int read() {\n\tint x = 0, flag = 1;\n\tchar ch = getchar();\n\tfor( ; ch > '9' || ch < '0' ; ch = getchar()) if(ch == '-') flag = -1;\n\tfor( ; ch >= '0' && ch <= '9' ; ch = getchar()) x = (x << 3) + (x << 1) + ch - '0';\n\treturn x * flag;\n}\nconst int MAXN = 3e5 + 50;\nint n, m, b[MAXN], Ans[MAXN];\n \nstruct SegmentTree {\n\tint l, r, Min, laz;\n} T[MAXN << 2];\n \nstruct Ques {\n\tint l, r, id;\n} Q[MAXN];\nvoid ad(int x, int k) { T[x].Min += k, T[x].laz += k; }\nvoid update(int x) { T[x].Min = min(T[x << 1].Min, T[x << 1 | 1].Min); } \nbool cmp(Ques A, Ques B) { return A.r < B.r; }\nvoid pushdown(int x) { ad(x << 1, T[x].laz), ad(x << 1 | 1, T[x].laz); T[x].laz = 0; }\n \nvoid build(int x, int l, int r) {\n\tT[x].l = l, T[x].r = r, T[x].laz = 0;\n\tif(l == r) return ;\n\tbuild(x << 1, l, mid);\n\tbuild(x << 1 | 1, mid + 1, r);\n\treturn ;\n}\n \nvoid change(int x, int l, int r) { // \u533a\u95f4\u52a0\u6cd5\n\tif(T[x].l >= l && T[x].r <= r) { ad(x, 1); return ; }\n\tpushdown(x);\n\tif(l <= mid) change(x << 1, l, r);\n\tif(r  > mid) change(x << 1 | 1, l, r);\n\tupdate(x);\n\treturn ;\n}\n \nvoid modify(int x, int v) {\n\tif(T[x].l == T[x].r) { if(T[x].Min >= v) ad(x, 1); return ; }\n\tpushdown(x);\n\tif(T[x << 1].Min >= v) ad(x << 1, 1), modify(x << 1 | 1, v); // \u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\n\telse modify(x << 1, v);\n\tupdate(x);\n\treturn ;\n}\n \nint GetAns(int x, int pos) { // \u5355\u70b9\u6c42\u503c\n\tif(T[x].l == pos && T[x].r == pos) return T[x].Min;\n\tpushdown(x);\n\tif(pos <= mid) return GetAns(x << 1, pos);\n\telse return GetAns(x << 1 | 1, pos);\n}\n \nint main() {\n\tn = read(), m = read();\n\tfor(int i = 1 ; i <= n ; i ++) b[i] = read() - i;\n\tfor(int i = 1 ; i <= n ; i ++) if(b[i] > 0) b[i] = -1e9; // \u76f4\u63a5\u5ffd\u7565 > 0 \u7684\u5b58\u5728\n\tbuild(1, 1, n);\n\tfor(int i = 1 ; i <= m ; i ++) \n\t\tQ[i].l = read() + 1, Q[i].r = n - read(), Q[i].id = i;\n\tsort(Q + 1, Q + 1 + m, cmp);\n\tint now = 1;\n\tfor(int i = 1 ; i <= n ; i ++) {\n\t\tint v = -b[i];\n\t\tif(v == 0 || v == 1e9) { if(v == 0) change(1, 1, i); } // \u524d\u7f00\u52a0\u5c31\u5b8c\u4e8b\u4e86\n\t\telse modify(1, v);\n\t\twhile(Q[now].r == i) Ans[Q[now].id] = GetAns(1, Q[now].l), now ++;\n\t}\n\tfor(int i = 1 ; i <= m ; i ++) printf(\"%d\\n\", Ans[i]);\n\treturn 0;\n}\n```\n\n\u76ee\u524d\u6548\u7387 $rk1$ ($2021 / 5 / 9$)",
        "postTime": 1620547853,
        "uid": 67817,
        "name": "MuYC",
        "ccfLevel": 6,
        "title": "CF1404 C \u9898\u89e3"
    },
    {
        "content": "\u8003\u8651\u5148\u628a\u95ee\u9898\u8f6c\u5316\u3002\u8bbe $b_i=i-a_i$\uff0c$c_i$ \u4e3a\u539f\u6570\u5217\u4e2d $i$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u662f\u5426\u88ab\u5220\u9664\u3002\u5219\u539f\u6570\u5217\u4e2d $i$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u80fd\u88ab\u5220\u53bb\u7684\u5145\u8981\u6761\u4ef6\u662f $\\sum\\limits_{j=1}^{i-1} c_j\\geq b_i$\u3002\n\n\u4e0d\u59a8\u60f3\u60f3\u5355\u4e2a\u8be2\u95ee\u4e14\u65e0\u9650\u5236\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u6bcf\u6b21\u4f1a\u53d6\u51fa\u4e00\u4e2a\u5f53\u524d\u4f4d\u7f6e\u4e0a $b_i=0$ \u7684 $i$\uff0c\u4e3a\u4e86\u8ba9\u65b9\u6848\u6700\u4f18\u6211\u4eec\u81ea\u7136\u5e0c\u671b\u8ba9\u8fd9\u4e2a $i$ \u6700\u9760\u8fd1\u53f3\u8fb9\u3002\u7136\u540e\uff0c$i$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u88ab\u5220\u6389\uff0c$i+1\\sim n$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u5411\u524d\u79fb\u4e00\u4f4d\uff0c\u5bf9\u5e94\u7684\u5c31\u662f $k\\in(i+1,n],b_k=b_k-1$\u3002\u4f7f\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4 $1\\sim n$ \u7684\u6700\u53f3\u8fb9\u7684 $b_i=0$ \u7684 $i$ \u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\u3002\n\n\u73b0\u5728\u6765\u8003\u8651\u52a0\u5165\u591a\u4e2a\u8be2\u95ee\u53ca\u9650\u5236\u7684\u60c5\u51b5\u3002\u6ce8\u610f\u5230\u540e\u7f00\u9650\u5236\u5f71\u54cd\u7684\u90a3\u4e00\u90e8\u5206\u503c\u53ef\u4ee5\u76f4\u63a5\u5220\u53bb\uff0c\u800c\u524d\u7f00\u9650\u5236\u5f71\u54cd\u7684\u90a3\u4e00\u90e8\u5206\u503c\u4f1a\u5f71\u54cd\u4e4b\u540e\u7684\u503c\uff0c\u4e0d\u80fd\u76f4\u63a5\u5220\u53bb\u3002\u6240\u4ee5\u6211\u4eec\u79bb\u7ebf\u7edf\u8ba1\u6bcf\u4e2a\u8be2\u95ee\u3002\u5012\u7740\u52a0\u5165\u6bcf\u4e2a\u70b9\uff0c\u4eff\u7167\u5355\u4e2a\u8be2\u95ee\u7684\u505a\u6cd5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f97\u5230 $[i,n]$ \u5185 $c_i$ \u7684\u503c\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u6b63\u786e\u6027\u57fa\u4e8e\uff0c\u6bcf\u4e2a\u70b9\u7684 $b$ \u503c\u53ea\u4f1a\u8fbe\u5230\u4e00\u6b21 $0$\uff0c\u6240\u4ee5\u8fd9\u4e00\u90e8\u5206\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ecd\u4e3a $O(n \\log n)$\u3002\n\n\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e3b\u5e2d\u6811\uff0c\u7b2c $i$ \u68f5\u4e3b\u5e2d\u6811\u7ef4\u62a4 $i\\sim n$ \u5185\u7684 $c_i$ \uff0c\u8be2\u95ee $(x,y)$ \u65f6\u5373\u5728\u7b2c $x+1$ \u68f5\u4e3b\u5e2d\u6811\u4e0a\u67e5\u8be2 $[x+1,n-y]$ \u7684\u503c\u3002\u5bf9\u4e8e $c_i$\uff0c\u4ecd\u4f7f\u7528\u79bb\u7ebf\u65f6\u5904\u7406\u7684\u65b9\u6cd5\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a $O((Q+n) \\log n)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002",
        "postTime": 1606396028,
        "uid": 95244,
        "name": "tommymio",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u8f6c\u5316\u95ee\u9898\uff1a\n\n\u7528$i-a_i$ \u4ee3\u66ff $a_i$\n\n\u65b0\u7684\u64cd\u4f5c\u53d8\u4e3a\uff1a\u53bb\u6389\u4e00\u4e2a0\uff0c\u7136\u540e\u5c06\u4e4b\u540e\u7684\u5143\u7d20-1\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u63d0\u95ee\uff0c\u8bb0\u5f55$l=1+x,r=n-y$ \n\n\u5c06\u63d0\u95ee\u6309\u7167 $r$ \u518d\u6309\u7167 $l$ \u6392\u5e8f\u4ee5\u4fbf\u4e8e\u67e5\u8be2\u3002\n\n---\n\n$f(l,r)$ \u7ef4\u62a4\u5b50\u5e8f\u5217 $a[l...r]$ \u4e2d\u53ef\u4ee5\u79fb\u9664\u7684\u5143\u7d20\u7684\u6700\u5927\u6570\u91cf\u3002\n\n$r$ \u4ece $1$ \u53d8\u5316\u5230 $n$ \uff0c\u59cb\u7ec8\u7ef4\u62a4\u6bcf\u4e2a $l$ \u7684\u7b54\u6848\uff1a\n$f(1,r),f(2,r)...f(n,r)$\n\n\u8bbe$s_i=f(i,r)$\n\n\u51fa\u73b0\u4e00\u4e2a\u65b0\u5143\u7d20 $a_r$ \u65f6\uff0c\u5982\u679c $a_r\\ge 0$ \u4e14 $s_l\\le a_r,s_l$\u589e\u52a0 $1$\n\n\uff08\u663e\u7136\uff0c\u5f53\u4e14\u4ec5\u5f53$a_r\\ge 0$ \u4e14 $s_l\\le a_r,s_l$ \u53ef\u4ee5\u589e\u52a0 $1$ \uff0c\n\n\u5426\u5219\u8981\u4e48\u5c31\u662f$a_r<0$\u663e\u7136\u4e0d\u53ef\u80fd \u6216\u8005\u4e4b\u524d\u76840\u4e2a\u6570\u4e0d\u591f,$a_r$ \u8fd8\u6ca1\u6709\u6765\u5f97\u53ca\u51cf\u5230 $0$ \uff09\n\n---\n\n\u8bbe $lmax$ \u662f\u6700\u5927\u7684 $l$ \u4f7f\u5f97 $l\\le r$ \u4e14 $s_{lmax}\\ge a_r$,\u5c06\u4ee5 $lmax$ \u7ed3\u5c3e\u7684\u524d\u7f00 $+1$\u3002\n\n\u7531\u5b9a\u4e49\u53ef\u5f97\uff0c$s_1\u2265\u2026\u2265s_{lmax}\u2265a_r>s_{lmax+1}\u2265\u2026\u2265s_n$ s\u5355\u8c03\u9012\u51cf\u3002\n\n\u4e8c\u5206\u5bfb\u627e $lmax$ ( $s$ \u5355\u8c03\u9012\u51cf)\u3002\n\n\u4f7f\u7528 \u5dee\u5206+\u6811\u72b6\u6570\u7ec4 \u7ef4\u62a4 $s$ \u6570\u7ec4\u3002\n\n---\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n\\log^2 n+q\\log n)$\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\n\n\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002",
        "postTime": 1605102019,
        "uid": 106738,
        "name": "_Felix",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u6bd2\u7624 ds \u9898\u3002\n\n\u9996\u5148\u8003\u8651 $a_i$ \u4ec0\u4e48\u6761\u4ef6\u4e0b\u80fd\u5220\u6389\u3002\n\n\u663e\u7136\u53ea\u80fd\u662f\u5f53 $a_i\\le i$ \u65f6\u3002\n\n\u4e8e\u662f\u6211\u4eec\u7ef4\u62a4\u60f3\u5220\u6389 $a_i$ \u9700\u8981\u5728\u4ed6\u4e4b\u524d\u5220\u591a\u5c11\u4e2a\u6570\uff08$f_i$\uff09\uff0c\u5f53 $f_i=0$ \u7684\u65f6\u5019 $a_i$ \u5c31\u53ef\u4ee5\u5220\u9664\u4e86\u3002\n\n\u79bb\u7ebf\u4fdd\u5b58\u6240\u6709\u8be2\u95ee\uff0c\u6309\u5de6\u7aef\u70b9\u4ece\u53f3\u5f80\u5de6\u5904\u7406\u3002\n\n\u8fd9\u6837\u5f53\u6211\u4eec\u52a0\u5165\u4e00\u4e2a $j$ \u7684\u65f6\u5019\uff0c\u6709\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a\n\n- $f_j=0$\uff1a$j$ \u53ef\u4ee5\u5220\u6389\uff0c\u4e8e\u662f\u4ece $j+1$ \u5230 $n$ \u7684\u6240\u6709 $f_k$ \u5168\u90e8 $-1$\u3002\n\n- $f_j>0$\uff1a$j$ \u6682\u65f6\u4e0d\u80fd\u5220\u6389\uff0c\u4e8e\u662f\u5c06 $f_j$ \u6dfb\u52a0\u8fdb\u6765\u7ef4\u62a4\u3002\n\n\u6700\u540e\u7edf\u8ba1\u4e00\u4e0b\uff0c\u6709\u591a\u5c11\u4e2a $f_j=0$ \u7b54\u6848\u5c31\u662f\u591a\u5c11\u4e86\u3002\n\n\u4f7f\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4 $f$\uff0c\u6811\u72b6\u6570\u7ec4\u67e5\u8be2\u7b54\u6848\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a[300005],ans[300005],n,q;\nstruct Tree_Array{\n    int k[300005];\n    inline int lowbit(int x){return x&-x;}\n    void change(int p){while(p<=n)k[p]++,p+=lowbit(p);}\n    int ask(int p){\n        int ans=0;\n        while(p)ans+=k[p],p-=lowbit(p);\n        return ans;\n    }\n    int ask(int x,int y){return x<=y?ask(y)-ask(x-1):0;}\n}t;\nstruct Segment_Tree{\n    int tag[300005<<2],tree[300005<<2];\n    int lson(int p){return p<<1;}\n    int rson(int p){return (p<<1)|1;}\n    void push_up(int p){tree[p]=min(tree[lson(p)],tree[rson(p)]);}\n    void build(int p,int l,int r){\n        if(l==r){tree[p]=a[l];return;}\n        int m=(l+r)>>1;\n        build(lson(p),l,m);\n        build(rson(p),m+1,r);\n        push_up(p);\n    }\n    void lazy_tag(int p,int v){tree[p]+=v,tag[p]+=v;}\n    void push_down(int p){\n        if(tag[p]){\n            lazy_tag(lson(p),tag[p]);\n            lazy_tag(rson(p),tag[p]);\n            tag[p]=0;\n        }\n    }\n    void change(int p,int l,int r,int x,int y,int v){\n        if(x<=l&&r<=y){lazy_tag(p,v);return;}\n        push_down(p);\n        int m=(l+r)>>1;\n        if(x<=m)change(lson(p),l,m,x,y,v);\n        if(y>m)change(rson(p),m+1,r,x,y,v);\n    }\n    void ask(int p,int l,int r,int x,int y){\n        if(tree[p]>0)return;\n        if(l==r){\n            t.change(l);//\u53ef\u4ee5\u5220\u9664\uff0c\u5219\u4ecel~n\u5168\u90e8-1\n            if(r+1<=n)change(1,1,n,r+1,n,-1);\n            tree[p]=n;\n            return;\n        }\n        int m=(l+r)>>1;\n        push_down(p);\n        if(x<=m)ask(lson(p),l,m,x,y);\n        if(y>m)ask(rson(p),m+1,r,x,y);\n        push_up(p);\n    }\n}f;\nstruct Ask{\n    int x,y,id;\n    inline bool operator<(const Ask&p)const{return x>p.x;}\n}que[300005];\nint main(){\n    ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n    cin>>n>>q;\n    for(int i=1;i<=n;i++)cin>>a[i];\n    for(int i=1;i<=n;i++){\n        a[i]=i-a[i];\n        if(a[i]<0)a[i]=n+1;//\u9884\u5904\u7406\uff0c\u5c06ai\u53d8\u4e3ai-ai\n        //\u82e5i-ai<0\uff0c\u5219ai\u6c38\u8fdc\u5220\u4e0d\u6389\n    }\n    for(int i=1;i<=q;i++)cin>>que[i].x>>que[i].y,que[i].id=i;\n    sort(que+1,que+q+1);\n    f.build(1,1,n);//\u5efa\u6811\n    for(int i=1,z=n;i<=q;i++){\n        while(z>que[i].x){//\u52a0\u5165j\n            f.ask(1,1,n,z,n);\n            z--;\n        }\n        ans[que[i].id]=t.ask(que[i].x+1,n-que[i].y);//\u67e5\u8be2\u7b54\u6848\n    }\n    for(int i=1;i<=q;i++)cout<<ans[i]<<endl;\n    return 0;\n}\n```",
        "postTime": 1599658171,
        "uid": 39863,
        "name": "\u5f15\u9886\u5929\u4e0b",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "\u5f53 $a_i>i$ \u65f6\u4e0d\u53ef\u80fd\u88ab\u5220\u53bb\uff08\u4ee5\u4e0b\u4e0d\u8ba8\u8bba\uff09\n\n\u6bcf\u7ec4\u8be2\u95ee\u76f4\u63a5\u5f53\u8be2\u95ee $[l,r]$ \u6765\u770b\uff0c\u524d\u9762\u7684\u9884\u5904\u7406\u4e0d\u518d\u63d0\u53ca\n\n\u8bbe $b_i=i-a_i$ \u663e\u7136 $a_i$ \u80fd\u88ab\u5220\u53bb\u5f53\u4e14\u4ec5\u5f53\u5de6\u4fa7\u53ef\u88ab\u5220\u53bb\u6570\u4e2a\u6570\u5927\u4e8e\u7b49\u4e8e $b_i$\uff0c\u53ef\u4ee5\u8003\u8651\u8bbe $pre_i$ \u8868\u793a $[pre_i,i-1]$ \u6070\u597d\u53ef\u88ab\u5220\u53bb\u6570\u4e2a\u6570\u5927\u4e8e\u7b49\u4e8e $b_i$\n\n\u8003\u8651\u5982\u4f55\u8ba1\u7b97 $pre_i$\uff0c\u6709\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u601d\u8def\u662f\u4e8c\u5206 $pre_i=mid$\uff0c\u5219 $[mid,i-1]$ \u4e2d $a_j$ \u53ef\u88ab\u5220\u53bb\u5f53\u4e14\u4ec5\u5f53 $pre_j\\ge mid(j<i)$\uff0c\u5176\u4e2d\u540e\u9762\u7684\u6761\u4ef6\u53ea\u9700\u8981\u6309\u987a\u5e8f\u52a0\u5165\u5c31\u53ef\u4ee5\u89e3\u51b3\uff0c\u8003\u8651\u8bb0\u5f55\u70b9 $i$ \u662f $c_i$ \u4e2a\u6570\u7684 $pre$ \uff0c\u5219\u53ea\u9700\u8981\u7ef4\u62a4 $c$ \u5355\u70b9\u4fee\u6539\u533a\u95f4\u6c42\u548c\u5373\u53ef\uff0c\u53ef\u4ee5\u7528\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\uff0c\u590d\u6742\u5ea6 $O(nlog^2n)$\n\n\u6811\u72b6\u6570\u7ec4\u662f\u4e00\u4e2a\u548c\u4e8c\u5206\u5f88\u4e0d\u642d\u914d\u7684\u7ed3\u6784\uff0c\u800c\u7ebf\u6bb5\u6811\u548c\u4e8c\u5206\u66f4\u642d\u914d\uff0c\u53ef\u4ee5\u8003\u8651\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u518d\u5728\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\uff0c\u4f7f\u590d\u6742\u5ea6\u964d\u4f4e\u4e3a $O(nlogn)$\n\n\u8ba1\u7b97\u51fa $pre$ \u540e\uff0c\u628a $(pre_i,i)$ \u770b\u505a\u4e8c\u7ef4\u5e73\u9762\u7684\u70b9 $(x,y)$\uff0c\u5219\u6bcf\u7ec4\u8be2\u95ee $[l,r]$ \u76f8\u5f53\u4e8e\u8be2\u95ee $l\\le pre_i\\le i\\le r$ \u7684\u70b9\u6570\uff0c\u5373\u6807\u51c6\u7684\u4e8c\u7ef4\u6570\u70b9\u95ee\u9898\uff0c\u53ef\u4ee5\u7528 cdq \u5206\u6cbb\u6216\u6811\u72b6\u6570\u7ec4\u89e3\u51b3\n\n\u603b\u590d\u6742\u5ea6 $O(nlogn)$\n\n```\n#include <bits/stdc++.h>\n#include <math.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=3e5+2,M=1.2e6+2;\nint bel[N],a[N],l[M],r[M],ys[N],pre[N],s[M],ans[N],b[N];\nint n,m,c,fh,i,x,j,y;\ninline void read(int &x)\n{\n\tc=getchar();fh=1;\n\twhile ((c<48)||(c>57))\n\t{\n\t\tif (c=='-') {c=getchar();fh=-1;break;}\n\t\tc=getchar();\n\t}\n\tx=c^48;c=getchar();\n\twhile ((c>=48)&&(c<=57))\n\t{\n\t\tx=x*10+(c^48);\n\t\tc=getchar();\n\t}\n\tx*=fh;\n}\nvoid build(int x)\n{\n\tif (l[x]==r[x]) {ys[l[x]]=x;return;}\n\tl[c=x<<1]=l[x];r[c]=l[x]+r[x]>>1;\n\tl[c|1]=r[c]+1;r[c|1]=r[x];\n\tbuild(c);build(x<<1|1);\n}\ninline void add(register int x)\n{\n\tfor (register int i=x;i;i^=(i&(-i))) ++b[i]; \n}\ninline int sum(register int x)\n{\n\tregister int r=0;\n\tfor (register int i=x;i<=n;i+=(i&(-i))) r+=b[i];\n\treturn r;\n}\nstruct Q\n{\n\tint z,y,wz;\n\tbool operator<(const Q& x) const {return y<x.y;}\n};\nQ q[N];\nint main()\n{\n\tread(n);read(m);\n\tfor (i=1;i<=n;i++) {read(a[i]);if (a[i]<=i) a[i]=i-a[i]; else a[i]=n+1;}\n\tr[l[1]=1]=n;build(1);\n\tfor (i=1;i<=n;i++) if (a[i]<=s[1])\n\t{\n\t\tx=1;c=a[i];\n\t\twhile (l[x]!=r[x]) if (s[y=x<<1|1]>=c) x=y; else {c-=s[y];x<<=1;}\n\t\tif (l[x]>i) x=ys[i];\n\t\tpre[i]=l[x];++s[x];\n\t\twhile (x=x>>1) ++s[x];\n\t}\n\tfor (i=1;i<=m;i++) {read(q[i].z);read(q[q[i].wz=i].y);++q[i].z;q[i].y=n-q[i].y;}\n\tsort(q+1,q+m+1);\n\tfor (i=j=1;i<=m;i++)\n\t{\n\t\twhile (j<=q[i].y) \n\t\t{\n\t\t\tif (pre[j]) add(pre[j]);\n\t\t\t++j;\n\t\t}\n\t\tans[q[i].wz]=sum(q[i].z);\n\t}\n\tfor (i=1;i<=m;i++) printf(\"%d\\n\",ans[i]);\n}\n```",
        "postTime": 1599656290,
        "uid": 29826,
        "name": "SSerxhs",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u5e8f\u5217 $a[]$\uff0c\u6bcf\u6b21\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5f53\u4e14\u4ec5\u5f53 $a[i]=i$ \u7684\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u53bb\u6389\u8fd9\u4e2a\u6570\uff0c\u7136\u540e\u540e\u8fb9\u6bcf\u4e2a\u6570\u7684\u4e0b\u6807\u51cf1\u3002\n\n\u6709 $m$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u53bb\u6389\u524d $x$ \u4e2a\uff0c\u548c\u540e $y$ \u4e2a\uff0c\u95ee\u5982\u4f55\u64cd\u4f5c\u53ef\u4ee5\u53bb\u6389\u6700\u591a\u7684\u6570\uff0c\u8f93\u51fa\u53bb\u6389\u7684\u6570\u6700\u591a\u7684\u4e2a\u6570\u3002\n\n## Solution\n\n\u5de7\u5999\u7684\u89e3\u6cd5\uff0c\u6211\u4eec\u91cd\u5199 $a[]$ \u5e8f\u5217\u5373\u53ef\uff0c\u5177\u4f53\u7684\u64cd\u4f5c\u662f\uff1a\u7528 $i-a[i]$ \u66ff\u6362 $a[i]$\uff0c\uff08\u82e5$i-a[i]$ \u4e3a\u8d1f\u6570\uff0c\u90a3\u4e48\u4ee4\u5176\u4e3a $INF$\uff09\u8fd9\u6837\u4e00\u6b21\u64cd\u4f5c\u5c31\u53d8\u6210\u4e86\uff1a\u53bb\u6389\u4e00\u4e2a0\uff0c\u5c06\u540e\u8fb9\u7684\u6570\u5168\u90e8\u51cf1\u3002\n\n\u4e0d\u59a8\u8bbe\u8be2\u95ee\u7684 $l=1$\uff0c\u8fd9\u6837\u4fbf\u4e8e\u601d\u8003\u3002\u4f7f\u7528\u52a8\u6001\u89c4\u5212\u7684\u601d\u60f3\uff0c\u6211\u4eec\u4e4b\u524d\u6700\u591a\u53d6 $f(i-1)$ \u4e2a\u6570\uff0c\u90a3\u4e48\uff0c\u53ea\u8981 $a[i]\\le f(i-1)$\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u6709 $f(i)=f(i-1)+1$, \u5426\u5219 $f(i)=f(i-1)$\u3002\n\n\u8fd9\u6837\u5b50\u6211\u4eec\u505a\u4e86\u5168\u90e8 $l=1$ \u7684\u60c5\u51b5\uff0c\u5bf9\u4e8e\u8be2\u95ee\uff0c\u6211\u4eec\u6309\u7167 $r$ \u6392\u5e8f\uff0c\u5bf9\u4e8e\u4e00\u4e2a $r$\uff0c\u7ef4\u62a4\u6bcf\u4e2a $l$ \u7684\u7b54\u6848\u3002\u6bcf\u6b21\u4ece\u672b\u5c3e\u6dfb\u52a0\u4e00\u4e2a\u6570\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u51fa\u6765\u521a\u597d $\\ge a[i]$ \u7684\u4e0b\u6807\uff0c\u800c\u540e\u6811\u72b6\u6570\u7ec4\u4fee\u6539\u5373\u53ef\u3002\n\n\u8003\u8651\u8981\u5b8c\u6210\u533a\u95f4\u52a0\uff0c\u5355\u70b9\u67e5\u8be2\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u628a\u7ef4\u62a4\u7684\u503c\u5dee\u5206\u5373\u53ef\u3002\n\n\u5982\u679c\u5f3a\u5236\u5728\u7ebf\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u4e3b\u5e2d\u6811\u6765\u5b8c\u6210\u3002\u5173\u4e8e\u4e3b\u5e2d\u6811\u7684\u533a\u95f4\u64cd\u4f5c\uff0c\u7531\u4e8e\u6ca1\u6709\u590d\u6742\u7684 `tag` \u7ef4\u62a4\uff0c\u6240\u4ee5\u53ef\u4ee5\u91c7\u7528\u4e0d\u4e0b\u653e `tag` \u7684\u5199\u6cd5\uff0c\u5373\u6bcf\u4e2a $sum(k) = sum(ls(k))+sum(rs(k))+tag(k)*(R-L+1)$\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u6ce8\u610f\u4e0b\u5c31\u597d\u4e86\u3002\n\n\u8fd9\u6837\u5b50\u4f60\u5c31\u53ef\u4ee5\u5207\u4e86\u4ed6\u4e86\uff0c\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\u3002",
        "postTime": 1599646384,
        "uid": 232125,
        "name": "SiRiehn_nx",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1404C \u3010Fixed Point Removal\u3011"
    }
]
[
    {
        "content": "## \u601d\u8def\n\u535a\u5f08\u8bba\u9898\u76ee\uff0c\u9996\u5148\u8003\u8651 SG \u51fd\u6570\u3002  \n\u4e00\u4e2a\u72b6\u6001\u7684 SG \u4e3a\u6240\u6709\u540e\u7ee7\u72b6\u6001\uff08\u5206\u4e00\u6b21\u540e\u53ef\u8fbe\u5230\u7684\u72b6\u6001\uff09 SG \u7684 mex\uff08\u6700\u5c0f\u672a\u51fa\u73b0\u81ea\u7136\u6570\uff09\u3002  \n\u8003\u8651\u4e00\u5806\u5927\u5c0f\u4e3a $k$ \u7684\u77f3\u5934\u7684\u6240\u6709\u540e\u7ee7\u72b6\u6001\uff0c\u8bbe $x$ \u4e3a\u5206\u6210\u7684\u9879\u6570\uff0c$y$ \u8868\u793a\u9996\u9879\uff0c\u5219 $y=\\frac{k}{x}-\\frac{x-1}{2}$\u3002\u56e0\u4e3a $y$ \u4e3a\u6574\u6570\uff0c\u5f53 $x$ \u4e3a\u5947\u6570\uff0c\u5219 $k\\bmod x=0$\uff0c\u5f53 $x$ \u4e3a\u5076\u6570\uff0c\u5219 $k\\bmod x=\\frac{x}{2}$\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u7b5b\u51fa\u6bcf\u4e2a\u72b6\u6001\u7684\u540e\u7ee7\u72b6\u6001\uff0c\u590d\u6742\u5ea6\u8c03\u548c\u7ea7\u6570 $O(n\\log n)$\u3002  \n\u56e0\u4e3a\u540e\u7ee7\u72b6\u6001\u662f\u4ece\u5927\u5c0f $y$ \u81f3 $y+x-1$ \u7684\u77f3\u5b50\u5806\uff0c\u5176 SG \u4e3a\u6240\u6709\u77f3\u5b50\u5806\u7684 SG \u5f02\u6216\u548c\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ef4\u62a4 SG \u51fd\u6570\u7684\u524d\u7f00\u548c\u6c42\u51fa\u8be5\u540e\u7ee7\u72b6\u6001\u7684 SG\u3002\u518d\u901a\u8fc7\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u6c42\u51fa mex\uff0c\u5373\u8be5\u70b9\u7684 SG\u3002  \n\u5982\u679c\u5927\u5c0f $n$ \u7684\u77f3\u5b50 SG $= 0$ \u5219\u5fc5\u8d25\u3002\u5426\u5219\u679a\u4e3e\u540e\u7ee7\u72b6\u6001\uff0cSG \u4e3a\u96f6\u7684\u540e\u7ee7\u72b6\u6001\u4e3a\u5fc5\u80dc\u7b56\u7565\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<cstdio>\n#include<vector>\n#include<set>\n#include<assert.h>\nint n;\nstd::vector<int>tt[100009];\nint sg[100009],sgs[100009];\nstd::set<int>as;\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i(2);i<=n;++i)\n\t{\n\t\tif(i&1)for(int j(i+i);j<=n;j+=i)tt[j].push_back(i);//\u7b5b\u51fa\u53ef\u4ee5\u5206\u6210i\u9879\u7684\u77f3\u5b50\u5806\n\t\telse for(int j(i+(i>>1));j<=n;j+=i)tt[j].push_back(i);\n\t\tas.clear();\n\t\tfor(int j:tt[i])\n\t\t{\n\t\t\tint y((i+i+j-(long long)j*j)/(j+j));\n\t\t\tif(y>0)as.insert(sgs[y-1]^sgs[y+j-1]);//\u679a\u4e3e\u540e\u7ee7\u72b6\u6001\n\t\t}\n\t\tint ii(0);\n\t\twhile(as.count(ii))++ii;//\u627e\u51famex\n\t\tsg[i]=ii;\n\t\tsgs[i]=sgs[i-1]^ii;\n\t}\n\tif(sg[n]==0)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tfor(int j:tt[n])\n\t{\n\t\tint y((n+n+j-(long long)j*j)/(j+j));\n\t\tif(y>0&&(sgs[y-1]^sgs[y+j-1])==0)\n\t\t{\n\t\t\tprintf(\"%d\\n\",j);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n```\n",
        "postTime": 1648549205,
        "uid": 145017,
        "name": "2018ty43",
        "ccfLevel": 7,
        "title": "CF87C Interesting Game\u9898\u89e3"
    },
    {
        "content": "SG \u51fd\u6570\u7684\u5e94\u7528\u3002\n\n\u9898\u76ee\u4e2d\u7684\u7ea6\u675f\u6761\u4ef6\u7b49\u4ef7\u4e8e\u628a $n$ \u5206\u62c6\u4e3a $k$ \u4e2a\u8fde\u7eed\u7684\u6b63\u6574\u6570\uff08$k\\ge2$\uff09\u3002\n\n\u7136\u540e\u5c31\u662f\u5957\u7528 SG \u51fd\u6570\u4e86\uff0c\u4f8b\u5982\u67d0\u4e2a $n$ \u6709\u4e24\u79cd\u5206\u62c6\u65b9\u5f0f ${a_k}$ \u548c ${b_{k'}}$\uff0c\u5219\u6709\n\n$$ SG_n = mex\\{SG_{a_1}\\ xor\\ SG_{a_2}\\ xor\\dots\\ xor\\ SG_{a_k},\\  SG_{b_1}\\ xor\\ SG_{b_2}\\ xor\\dots\\ xor\\ SG_{b_{k'}}\\} $$\n\n\u82e5 $SG_n>0$ \u5219\u5148\u624b\u5fc5\u80dc\uff0c\u5426\u5219\u5148\u624b\u5fc5\u8d25\u3002\n\n\u5148\u624b\u5fc5\u80dc\u65f6\uff0c\u8fd4\u56de\u6ee1\u8db3 $SG_{a_1}\\ xor\\ SG_{a_2}\\ xor\\dots\\ xor\\ SG_{a_k}=0$ \u7684\u6700\u5c0f\u5206\u62c6\u957f\u5ea6\u3002\n\n\u5b9e\u73b0\u65f6\uff0c\u53ef\u4ee5\u5148\u521d\u59cb\u5316 $[3,n]$ \u7684\u6240\u6709\u8fde\u7eed\u5206\u62c6\uff0c\u7136\u540e\u7528\u9012\u63a8\u6765\u505a\u3002\n\n\u6b64\u5916\uff0c\u7531\u4e8e SG \u53d6\u503c\u662f\u8fde\u7eed\u7684\uff0c\u53ef\u4ee5\u7528\u5f02\u6216\u524d\u7f00\u548c\u52a0\u901f\u3002\n\n\u521d\u59cb\u5316\u90e8\u5206\u662f\u4e2a\u8c03\u548c\u7ea7\u6570\u4e4b\u548c\uff0c\u6545\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log n)$\u3002\n\nAC \u4ee3\u7801\uff08Golang\uff09:\n\n```go\npackage main\n\nimport . \"fmt\"\n\nfunc main() {\n\ttype pair struct{ a1, len int }\n\tconst mx = 1e5 + 5\n\tps := [mx][]pair{}\n\tsgSum := [mx]int{}\n\n\tvar n int\n\tScan(&n)\n\n\t// \u521d\u59cb\u5316 [3,n] \u7684\u6240\u6709\u8fde\u7eed\u5206\u62c6\n\tfor len := 2; (len+1)*len/2 <= n; len++ {\n\t\tfor a1 := 1; ; a1++ {\n\t\t\ts := (2*a1 + len - 1) * len / 2\n\t\t\tif s > n {\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tps[s] = append(ps[s], pair{a1, len})\n\t\t}\n\t}\n\n\tfor i := 3; i <= n; i++ {\n\t\tmex := map[int]bool{}\n\t\tfor _, p := range ps[i] {\n\t\t\ts := sgSum[p.a1] ^ sgSum[p.a1+p.len]\n\t\t\tif i == n && s == 0 {\n\t\t\t\tPrint(p.len)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tmex[s] = true\n\t\t}\n\t\tsg := 0\n\t\tfor ; mex[sg]; sg++ {\n\t\t}\n\t\tsgSum[i+1] = sgSum[i] ^ sg // SG \u524d\u7f00\u548c\n\t}\n\tPrint(-1)\n}\n```\n",
        "postTime": 1593275544,
        "uid": 266651,
        "name": "\u7075\u8336\u5c71\u827e\u5e9c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF87C \u3010Interesting Game\u3011"
    }
]
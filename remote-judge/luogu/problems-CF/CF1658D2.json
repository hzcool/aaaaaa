{
    "description": "This is the hard version of the problem. The difference in the constraints between both versions are colored below in red. You can make hacks only if all versions of the problem are solved.\n\nMarin and Gojou are playing hide-and-seek with an array.\n\nGojou initially perform the following steps:\n\n- First, Gojou chooses $ 2 $ integers $ l $ and $ r $ such that $ l \\leq r $ .\n- Then, Gojou will make an array $ a $ of length $ r-l+1 $ which is a permutation of the array $ [l,l+1,\\ldots,r] $ .\n- Finally, Gojou chooses a secret integer $ x $ and sets $ a_i $ to $ a_i \\oplus x $ for all $ i $ (where $ \\oplus $ denotes the [bitwise XOR operation](https://en.wikipedia.org/wiki/Bitwise_operation#XOR)).\n\nMarin is then given the values of $ l,r $ and the final array $ a $ . She needs to find the secret integer $ x $ to win. Can you help her?\n\nNote that there may be multiple possible $ x $ that Gojou could have chosen. Marin can find any possible $ x $ that could have resulted in the final value of $ a $ .",
    "inputFormat": "The first line contains a single integer $ t $ ( $ 1 \\leq t \\leq 10^5 $ ) \u2014 the number of test cases.\n\nIn the first line of each test case contains two integers $ l $ and $ r $ ( $ \\color{red}{\\boldsymbol{0} \\boldsymbol{\\le} \\boldsymbol{l}} \\le r < 2^{17} $ ).\n\nThe second line contains $ r - l + 1 $ space-seperated integers of $ a_1,a_2,\\ldots,a_{r-l+1} $ ( $ 0 \\le a_i < 2^{17} $ ). It is guaranteed that array $ a $ is valid.\n\nIt is guaranteed that the sum of $ r - l + 1 $ over all test cases does not exceed $ 2^{17} $ .",
    "outputFormat": "For each test case print an integer $ x $ . If there are multiple answers, print any.",
    "samples": [
        [
            "3\n4 7\n3 2 1 0\n4 7\n4 7 6 5\n1 3\n0 2 1",
            "4\n0\n3"
        ]
    ],
    "hint": "In the first test case, the original array is $ [7, 6, 5, 4] $ .\n\nIn the second test case, the original array is $ [4, 7, 6, 5] $ .\n\nIn the third test case, the original array is $ [3, 1, 2] $ .",
    "translation": "**\u672c\u9898\u4e0e CF1658D1 \u7684\u552f\u4e00\u533a\u522b\u5728\u4e8e $l$ \u7684\u8303\u56f4\u3002\u5728\u672c\u9898\u4e2d\uff0c$l\\geqslant 0$\u3002**\n\nMarin \u548c Gojou \u6b63\u5728\u73a9\u4e00\u4e2a\u548c\u6570\u7ec4\u6709\u5173\u7684\u6e38\u620f\u3002\n\nGojou \u4f1a\u4f9d\u6b21\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a\n\n- \u9009\u62e9\u4e24\u4e2a\u6574\u6570 $l,r$\uff0c\u4fdd\u8bc1 $l\\leqslant r$\u3002\n- \u6784\u9020\u51fa\u4e00\u4e2a\u957f\u5ea6\u4e3a $r-l+1$ \u7684\u6570\u7ec4 $a$\uff0c\u4fdd\u8bc1\u5176\u662f\u6570\u7ec4 $[l,l+1,\\cdots,r]$ \u7684\u4e00\u79cd\u6392\u5217\u3002\n- \u9009\u62e9\u4e00\u4e2a\u6574\u6570 $x$\uff0c\u7136\u540e\u5bf9\u4e8e\u6240\u6709\u7684 $1\\leqslant i\\leqslant r-l+1$\uff0c\u5c06 $a_i$ \u7684\u503c\u66ff\u6362\u4e3a $a_i\\oplus x$\u3002\u5176\u4e2d $\\oplus$ \u4e3a\u6309\u4f4d\u5f02\u6216\u8fd0\u7b97\u3002\n\n\u7136\u540e\uff0cGojou \u4f1a\u5c06 $l,r$ \u548c\u6700\u7ec8\u5f97\u5230\u7684\u6570\u7ec4 $a$ \u544a\u8bc9 Marin\u3002Marin \u9700\u8981\u6c42\u51fa\u80fd\u591f\u6ee1\u8db3\u8981\u6c42\u7684\u4efb\u610f\u4e00\u4e2a\u6574\u6570 $x$ \u624d\u80fd\u83b7\u80dc\u3002\n\n\u73b0\u5728\uff0c\u8bf7\u4f60\u5e2e\u52a9 Marin \u6c42\u51fa\u6574\u6570 $x$\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a\n\n- $t$ \u7ec4\u6570\u636e\uff0c$1\\leqslant t\\leqslant 10^5$\u3002\n- $\\color{red}{0\\leqslant l}\\color{black}\\leqslant r<2^{17}$\u3002\n- $0\\leqslant a_i<2^{17}$\u3002\n- $\\sum(r-l+1)\\leqslant 2^{17}$\u3002\n\nTranslated by Eason_AC"
}
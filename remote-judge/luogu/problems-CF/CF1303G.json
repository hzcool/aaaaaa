{
    "description": "We define the sum of prefix sums of an array $ [s_1, s_2, \\dots, s_k] $ as $ s_1 + (s_1 + s_2) + (s_1 + s_2 + s_3) + \\dots + (s_1 + s_2 + \\dots + s_k) $ .\n\nYou are given a tree consisting of $ n $ vertices. Each vertex $ i $ has an integer $ a_i $ written on it. We define the value of the simple path from vertex $ u $ to vertex $ v $ as follows: consider all vertices appearing on the path from $ u $ to $ v $ , write down all the numbers written on these vertices in the order they appear on the path, and compute the sum of prefix sums of the resulting sequence.\n\nYour task is to calculate the maximum value over all paths in the tree.",
    "inputFormat": "The first line contains one integer $ n $ ( $ 2 \\le n \\le 150000 $ ) \u2014 the number of vertices in the tree.\n\nThen $ n - 1 $ lines follow, representing the edges of the tree. Each line contains two integers $ u_i $ and $ v_i $ ( $ 1 \\le u_i, v_i \\le n $ , $ u_i \\ne v_i $ ), denoting an edge between vertices $ u_i $ and $ v_i $ . It is guaranteed that these edges form a tree.\n\nThe last line contains $ n $ integers $ a_1 $ , $ a_2 $ , ..., $ a_n $ ( $ 1 \\le a_i \\le 10^6 $ ).",
    "outputFormat": "Print one integer \u2014 the maximum value over all paths in the tree.",
    "samples": [
        [
            "4\n4 2\n3 2\n4 1\n1 3 3 7",
            "36"
        ]
    ],
    "hint": "The best path in the first example is from vertex $ 3 $ to vertex $ 1 $ . It gives the sequence $ [3, 3, 7, 1] $ , and the sum of prefix sums is $ 36 $ .",
    "translation": "- \u6709\u4e00\u9897 $n$ \u4e2a\u8282\u70b9\u7684\u6811 $(2 \\leq n \\leq 150000)$\n- \u6811\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u6743\u503c $a_i (1 \\leq a_i \\leq 10^6)$\n- \u5b9a\u4e49\u6811\u4e0a$u \\rightarrow v$\u7684\u94fe\u7684\u6743\u503c\u5982\u4e0b\uff1a\n  - \u5c06$u$\u5230$v$\u7684\u8def\u5f84\u4e0a\u70b9\u7684\u6743\u503c\u4f9d\u6b21\u6392\u5217\u5728\u6570\u7ec4\u4e2d\n  - \u8be5\u6570\u7ec4\u7684\u524d\u7f00\u548c\u7684\u548c\u5373\u8fd9\u6761\u8def\u5f84\u7684\u6743\u503c\n- \u8bf7\u6c42\u51fa\u6743\u503c\u6700\u5927\u7684\u94fe\uff0c\u8f93\u51fa\u6743\u503c"
}
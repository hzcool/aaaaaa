{
    "description": "Yuezheng Ling gives Luo Tianyi a tree which has $ n $ nodes, rooted at $ 1 $ .\n\nLuo Tianyi will tell you that the parent of the $ i $ -th node is $ a_i $ ( $ 1 \\leq a_i<i $ for $ 2 \\le i \\le n $ ), and she will ask you to perform $ q $ queries of $ 2 $ types:\n\n1. She'll give you three integers $ l $ , $ r $ and $ x $ ( $ 2 \\le l \\le r \\le n $ , $ 1 \\le x \\le 10^5 $ ). You need to replace $ a_i $ with $ \\max(a_i-x,1) $ for all $ i $ with $ l \\leq i \\leq r $ .\n2. She'll give you two integers $ u $ , $ v $ ( $ 1 \\le u, v \\le n $ ). You need to find the [LCA](https://en.wikipedia.org/wiki/Lowest_common_ancestor) of nodes $ u $ and $ v $ (their lowest common ancestor).",
    "inputFormat": "The first line contains two integers $ n $ and $ q $ ( $ 2\\leq n,q \\leq 10^5 $ ) \u2014 the number of nodes and the number of queries, respectively.\n\nThe second line contains $ n-1 $ integers $ a_2, a_3,\\dots, a_n $ ( $ 1 \\le a_i < i $ ), where $ a_i $ is the parent of the node $ i $ .\n\nNext $ q $ lines contain queries. For each query, the first integer of each line is $ t $ ( $ t = 1 $ or $ 2 $ ) \u2014 the type of the query.\n\n If $ t = 1 $ , this represents the query of the first type. Then, three integers will follow: $ l $ , $ r $ , $ x $ ( $ 2 \\le l \\le r \\le n $ , $ 1 \\le x \\le 10^5 $ ), meaning that you have to replace $ a_i $ with $ \\max(a_i-x,1) $ for all $ i $ with $ l \\leq i \\leq r $ .\n\n If $ t = 2 $ , this represents the query of the second type. Then, two integers will follow: $ u $ and $ v $ ( $ 1 \\le u, v \\le n $ ), and you have to find the LCA of $ u $ and $ v $ .\n\n It's guaranteed that there is at least one query of the second type.",
    "outputFormat": "For each query of the second type output answer on a new line.",
    "samples": [
        [
            "6 4\n1 2 3 3 4\n2 3 4\n1 2 3 1\n2 5 6\n2 2 3",
            "3\n3\n1"
        ]
    ],
    "hint": "The tree in example is shown below.\n\n ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1491H/818163092787871fe6b5fd7889d250d0fa5e8087.png)After the query of the first type, the tree changes and is looking as shown below.\n\n ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1491H/c2a6cdaaa81fc0062a546706c09a18121fedd155.png)",
    "translation": "\u7ed9\u5b9a\u4e00\u68f5\u5927\u5c0f\u4e3a $n$ \u7684 $1$ \u4e3a\u6839\u8282\u70b9\u7684\u6811\uff0c\u6811\u7528\u5982\u4e0b\u65b9\u5f0f\u7ed9\u51fa\uff1a\u8f93\u5165 $a_2,a_3,\\dots,a_n$\uff0c\u4fdd\u8bc1 $1\\leq a_i<i$\uff0c\u5c06 $a_i$ \u4e0e $i$ \u8fde\u8fb9\u5f62\u6210\u4e00\u68f5\u6811\u3002\n\n\u63a5\u4e0b\u6765\u6709\u4e24\u79cd\u64cd\u4f5c\uff1a\n- `1 l r x` \u4ee4 $a_i=\\max(a_i-x,1)(l\\leq i\\leq r)$\u3002\n- `2 u v` \u67e5\u8be2\u5728\u5f53\u524d\u7684 $a$ \u6570\u7ec4\u6784\u6210\u7684\u6811\u4e0a $u,v$ \u7684 LCA\u3002\n\n\u4e24\u79cd\u64cd\u4f5c\u5171\u6709 $q$ \u4e2a\u3002\n\n$2\\leq n,q\\leq 10^5$\uff0c$2\\leq l\\leq r\\leq n$\uff0c$1\\leq x\\leq 10^5$\uff0c$1\\leq u,v\\leq n$"
}
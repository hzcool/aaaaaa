{
    "description": "Given an integer sequence $ a_1, a_2, \\dots, a_n $ of length $ n $ , your task is to compute the number, modulo $ 998244353 $ , of ways to partition it into several non-empty continuous subsequences such that the sums of elements in the subsequences form a balanced sequence.\n\nA sequence $ s_1, s_2, \\dots, s_k $ of length $ k $ is said to be balanced, if $ s_{i} = s_{k-i+1} $ for every $ 1 \\leq i \\leq k $ . For example, $ [1, 2, 3, 2, 1] $ and $ [1,3,3,1] $ are balanced, but $ [1,5,15] $ is not.\n\nFormally, every partition can be described by a sequence of indexes $ i_1, i_2, \\dots, i_k $ of length $ k $ with $ 1 = i_1 < i_2 < \\dots < i_k \\leq n $ such that\n\n1. $ k $ is the number of non-empty continuous subsequences in the partition;\n2. For every $ 1 \\leq j \\leq k $ , the $ j $ -th continuous subsequence starts with $ a_{i_j} $ , and ends exactly before $ a_{i_{j+1}} $ , where $ i_{k+1} = n + 1 $ . That is, the $ j $ -th subsequence is $ a_{i_j}, a_{i_j+1}, \\dots, a_{i_{j+1}-1} $ .\n\n There are $ 2^{n-1} $ different partitions in total. Let $ s_1, s_2, \\dots, s_k $ denote the sums of elements in the subsequences with respect to the partition $ i_1, i_2, \\dots, i_k $ . Formally, for every $ 1 \\leq j \\leq k $ , $ $$$ s_j = \\sum_{i=i_{j}}^{i_{j+1}-1} a_i = a_{i_j} + a_{i_j+1} + \\dots + a_{i_{j+1}-1}.  $ $  For example, the partition  $ \\[1\\\\,|\\\\,2,3\\\\,|\\\\,4,5,6\\] $  of sequence  $ \\[1,2,3,4,5,6\\] $  is described by the sequence  $ \\[1,2,4\\] $  of indexes, and the sums of elements in the subsequences with respect to the partition is  $ \\[1,5,15\\] $ .</p><p>Two partitions  $ i\\_1, i\\_2, \\\\dots, i\\_k $  and  $ i'\\_1, i'\\_2, \\\\dots, i'\\_{k'} $  (described by sequences of indexes) are considered to be different, if at least one of the following holds. </p><ul> <li>  $ k \\\\neq k' $ , </li><li>  $ i\\_j \\\\neq i'\\_j $  for some  $ 1 \\\\leq j \\\\leq \\\\min\\\\left\\\\{ k, k' \\\\right\\\\}$$$.",
    "inputFormat": "Each test contains multiple test cases. The first line contains an integer $ t $ ( $ 1 \\leq t \\leq 10^5 $ ) \u2014 the number of test cases. The following lines contain the description of each test case.\n\nThe first line of each test case contains an integer $ n $ ( $ 1 \\leq n \\leq 10^5 $ ), indicating the length of the sequence $ a $ .\n\nThe second line of each test case contains $ n $ integers $ a_1, a_2, \\dots, a_n $ ( $ 0 \\leq a_i \\leq 10^9 $ ), indicating the elements of the sequence $ a $ .\n\nIt is guaranteed that the sum of $ n $ over all test cases does not exceed $ 10^5 $ .",
    "outputFormat": "For each test case, output the number of partitions with respect to which the sum of elements in each subsequence is balanced, modulo $ 998244353 $ .",
    "samples": [
        [
            "6\n1\n1000000000\n2\n1 1\n4\n0 0 1 0\n5\n1 2 3 2 1\n5\n1 3 5 7 9\n32\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0",
            "1\n2\n3\n4\n2\n150994942"
        ]
    ],
    "hint": "For the first test case, there is only one way to partition a sequence of length $ 1 $ , which is itself and is, of course, balanced.\n\nFor the second test case, there are $ 2 $ ways to partition it:\n\n- The sequence $ [1, 1] $ itself, then $ s = [2] $ is balanced;\n- Partition into two subsequences $ [1\\,|\\,1] $ , then $ s = [1, 1] $ is balanced.\n\nFor the third test case, there are $ 3 $ ways to partition it:\n\n- The sequence $ [0, 0, 1, 0] $ itself, then $ s = [1] $ is balanced;\n- $ [0 \\,|\\, 0, 1 \\,|\\, 0] $ , then $ s = [0, 1, 0] $ is balanced;\n- $ [0, 0 \\,|\\, 1 \\,|\\, 0] $ , then $ s = [0, 1, 0] $ is balanced.\n\nFor the fourth test case, there are $ 4 $ ways to partition it:\n\n- The sequence $ [1, 2, 3, 2, 1] $ itself, then $ s = [9] $ is balanced;\n- $ [1, 2 \\,|\\, 3 \\,|\\, 2, 1] $ , then $ s = [3, 3, 3] $ is balanced;\n- $ [1 \\,|\\, 2, 3, 2 \\,|\\, 1] $ , then $ s = [1, 7, 1] $ is balanced;\n- $ [1 \\,|\\, 2 \\,|\\, 3 \\,|\\, 2 \\,|\\, 1] $ , then $ s = [1, 2, 3, 2, 1] $ is balanced.\n\nFor the fifth test case, there are $ 2 $ ways to partition it:\n\n- The sequence $ [1, 3, 5, 7, 9] $ itself, then $ s = [25] $ is balanced;\n- $ [1, 3, 5 \\,|\\, 7 \\,|\\, 9] $ , then $ s = [9, 7, 9] $ is balanced.\n\nFor the sixth test case, every possible partition should be counted. So the answer is $ 2^{32-1} \\equiv 150994942 \\pmod {998244353} $ .",
    "translation": "\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u5c06 $a$ \u5212\u5206\u6210\u82e5\u5e72\u4e2a\u5b50\u4e32\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u8bbe\u6709\u5f53\u524d\u5212\u5206\u6709 $k$ \u4e2a\u5b50\u4e32\uff0c\u5206\u522b\u63cf\u8ff0\u4e3a $(l_1,r_1),(l_2,r_2)\\dots(l_k,r_k)$\uff0c\u5b9a\u4e49\u957f\u5ea6\u4e3a $k$ \u7684\u6570\u7ec4 $s$ \u6ee1\u8db3 $s_i=\\sum\\limits^{r_i}_{j=l_j}a_j$\u3002\u5982\u679c $s$ \u662f\u4e00\u4e2a\u56de\u6587\u6570\u7ec4\uff0c\u90a3\u4e48\u6211\u4eec\u79f0\u8fd9\u4e00\u79cd\u5212\u5206\u65b9\u5f0f\u662f\u597d\u7684\u3002\n\n\u6c42 $a$ \u6709\u591a\u5c11\u597d\u7684\u5212\u5206\u3002"
}
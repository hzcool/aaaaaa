{
    "description": "You are given $ n $ dominoes. Each domino has a left and a right cell. Each cell can be colored either black or white. Some cells are already colored, while some aren't yet.\n\nThe coloring is said to be valid if and only if it is possible to rearrange the dominoes in some order such that for each $ 1 \\le i \\le n $ the color of the right cell of the $ i $ -th domino is different from the color of the left cell of the $ ((i \\bmod n)+1) $ -st domino.\n\nNote that you can't rotate the dominoes, so the left cell always remains the left cell, and the right cell always remains the right cell.\n\nCount the number of valid ways to color the yet uncolored cells of dominoes. Two ways are considered different if there is a cell that is colored white in one way and black in the other. In particular, colorings BW WB and WB BW different (and both invalid).\n\nAs this number can be very big, output it modulo $ 998\\,244\\,353 $ .",
    "inputFormat": "The first line of the input contains a single integer $ n $ ( $ 1 \\le n \\le 10^5 $ ) \u2014 the number of dominoes.\n\nThe next $ n $ lines describe dominoes. Each line contains two characters which represent the left and the right cell. Character B means that the corresponding cell is black, character W means that the corresponding cell is white, and ? means that the cell is yet to be colored.",
    "outputFormat": "Print a single integer \u2014 the answer to the problem.",
    "samples": [
        [
            "1\n?W",
            "1"
        ],
        [
            "2\n??\nW?",
            "2"
        ],
        [
            "4\nBB\n??\nW?\n??",
            "10"
        ]
    ],
    "hint": "In the first test case, there is only one domino, and we need the color of its right cell to be different from the color of its left cell. There is only one way to achieve this.\n\nIn the second test case, there are only $ 2 $ such colorings:\n\nBB WW and WB WB.",
    "translation": "\u6709 $n$ \u4e2a\u591a\u7c73\u8bfa\u9aa8\u724c\uff0c\u6bcf\u4e2a\u9aa8\u724c\u7531\u5de6\u53f3\u4e24\u4e2a\u65b9\u683c\u7ec4\u6210\u3002\u6709\u7684\u65b9\u683c\u5df2\u7ecf\u88ab\u6d82\u4e0a\u4e86\u767d\u8272\uff08``W``\uff09\u6216\u8005\u9ed1\u8272\uff08``B``\uff09\uff0c\u5269\u4e0b\u7684\u65b9\u683c\uff08``?``\uff09\u8fd8\u6ca1\u6709\u88ab\u6d82\u8272\u3002\u4f60\u9700\u8981\u7ed9\u6240\u6709\u672a\u6d82\u8272\u7684\u65b9\u683c\u6d82\u4e0a\u9ed1\u8272\u6216\u8005\u767d\u8272\u3002\n\n\u4e00\u79cd\u6d82\u8272\u65b9\u6848\u88ab\u8ba4\u4e3a\u662f\u5408\u6cd5\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u4e00\u79cd\u6392\u5217\u9aa8\u724c\u65b9\u6848\u4f7f\u5f97\u4efb\u610f\u4e24\u4e2a\u76f8\u90bb\u7684\u9aa8\u724c\u76f8\u90bb\u65b9\u683c\u7684\u989c\u8272\u4e0d\u540c\u3002\u7279\u6b8a\u5730\uff0c\u7b2c\u4e00\u683c\u9aa8\u724c\u7684\u5de6\u7aef\u548c\u6700\u540e\u4e00\u4e2a\u9aa8\u724c\u7684\u53f3\u7aef\u88ab\u8ba4\u4e3a\u662f\u76f8\u90bb\u7684\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e0d\u80fd\u65cb\u8f6c\u5b83\u4eec\uff0c\u4e5f\u5c31\u662f\u4e0d\u80fd\u4ea4\u6362\u5de6\u53f3\u65b9\u683c\u7684\u989c\u8272\u3002\n\n\u4e24\u79cd\u6d82\u8272\u65b9\u6848\u88ab\u8ba4\u4e3a\u662f\u4e0d\u540c\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u4e00\u4e2a\u65b9\u683c\u5728\u4e00\u4e2a\u65b9\u6848\u4e2d\u88ab\u6d82\u767d\u5728\u53e6\u4e00\u4e2a\u65b9\u6848\u4e2d\u88ab\u6d82\u9ed1\u3002\u5f62\u5982 ``BW WB`` \u548c ``WB BW`` \u7684\u4e24\u4e2a\u65b9\u6848\u88ab\u8ba4\u4e3a\u662f\u4e0d\u540c\u7684\u65b9\u6848\u3002\uff08\u540c\u65f6\u4ed6\u4eec\u90fd\u662f\u975e\u6cd5\u7684\uff09\u3002\n\n\u6c42\u65b9\u6848\u6570\u5bf9 $998244353$ \u53d6\u6a21\u7684\u7ed3\u679c\u3002\n\nby [Error_Eric](/user/217300)."
}
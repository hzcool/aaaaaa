{
    "description": "There is a $ k \\times k $ grid, where $ k $ is even. The square in row $ r $ and column $ c $ is denoted by $ (r,c) $ . Two squares $ (r_1, c_1) $ and $ (r_2, c_2) $ are considered adjacent if $ \\lvert r_1 - r_2 \\rvert + \\lvert c_1 - c_2 \\rvert = 1 $ .\n\nAn array of adjacent pairs of squares is called strong if it is possible to cut the grid along grid lines into two connected, [congruent](https://en.wikipedia.org/wiki/Congruence_(geometry)) pieces so that each pair is part of the same piece. Two pieces are congruent if one can be matched with the other by translation, rotation, and reflection, or a combination of these.\n\n ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1627F/7a1cba5ad185443613d7aa270876dfc93648efec.png) The picture above represents the first test case. Arrows indicate pairs of squares, and the thick black line represents the cut. You are given an array $ a $ of $ n $ pairs of adjacent squares. Find the size of the largest strong subsequence of $ a $ . An array $ p $ is a subsequence of an array $ q $ if $ p $ can be obtained from $ q $ by deletion of several (possibly, zero or all) elements.",
    "inputFormat": "The input consists of multiple test cases. The first line contains an integer $ t $ ( $ 1 \\leq t \\leq 100 $ ) \u2014 the number of test cases. The description of the test cases follows.\n\nThe first line of each test case contains two space-separated integers $ n $ and $ k $ ( $ 1 \\leq n \\leq 10^5 $ ; $ 2 \\leq k \\leq 500 $ ,  $ k $ is even) \u2014 the length of $ a $ and the size of the grid, respectively.\n\nThen $ n $ lines follow. The $ i $ -th of these lines contains four space-separated integers $ r_{i,1} $ , $ c_{i,1} $ , $ r_{i,2} $ , and $ c_{i,2} $ ( $ 1 \\leq r_{i,1}, c_{i,1}, r_{i,2}, c_{i,2} \\leq k $ ) \u2014 the $ i $ -th element of $ a $ , represented by the row and column of the first square $ (r_{i,1}, c_{i,1}) $ and the row and column of the second square $ (r_{i,2}, c_{i,2}) $ . These squares are adjacent.\n\nIt is guaranteed that the sum of $ n $ over all test cases does not exceed $ 10^5 $ , and the sum of $ k $ over all test cases does not exceed $ 500 $ .",
    "outputFormat": "For each test case, output a single integer \u2014 the size of the largest strong subsequence of $ a $ .",
    "samples": [
        [
            "3\n8 4\n1 2 1 3\n2 2 2 3\n3 2 3 3\n4 2 4 3\n1 4 2 4\n2 1 3 1\n2 2 3 2\n4 1 4 2\n7 2\n1 1 1 2\n2 1 2 2\n1 1 1 2\n1 1 2 1\n1 2 2 2\n1 1 2 1\n1 2 2 2\n1 6\n3 3 3 4",
            "7\n4\n1"
        ]
    ],
    "hint": "In the first test case, the array $ a $ is not good, but if we take the subsequence $ [a_1, a_2, a_3, a_4, a_5, a_6, a_8] $ , then the square can be split as shown in the statement.\n\nIn the second test case, we can take the subsequence consisting of the last four elements of $ a $ and cut the square with a horizontal line through its center.",
    "translation": "### \u9898\u76ee\u63cf\u8ff0\n\u6709\u4e00\u8fb9\u957f\u4e3a\u5076\u6570 $k$ \u7684\u6b63\u65b9\u5f62\u7f51\u683c\u3002\u8bb0\u7b2c $r$ \u884c\u7b2c $c$ \u5217\u4e0a\u7684\u683c\u5b50\u4e3a $(r,c)$\u3002\u4e24\u683c\u5b50 $(r_1,c_1)$ \u4e0e $(r_2,c_2)$ \u662f\u76f8\u90bb\u7684\u5f53\u4e14\u4ec5\u5f53\u6ee1\u8db3 $\\left|r_1-r_2\\right|+\\left|c_1-c_2\\right| = 1$\u3002   \n\u5b9a\u4e49\u4e00\u4e32\u7531**\u76f8\u90bb\u7684\u7f51\u683c\u5bf9**\u6784\u6210\u7684\u5e8f\u5217\u662f\u201c\u597d\u7684\u201d\uff0c\u5f53\u4e14\u4ec5\u5f53\u5176\u6ee1\u8db3\u80fd\u7528\u82e5\u5e72\u6761\u7f51\u683c\u7ebf\u5c06\u7f51\u683c\u5206\u5272\u6210**\u5168\u7b49**\u7684\u4e24\u90e8\u5206\uff0c\u4e14\u6bcf\u5bf9\u7f51\u683c\u5747\u5728**\u540c\u4e00**\u90e8\u5206\u4e2d\u3002  \n\u7ed9\u5b9a\u4e00\u4e2a\u542b\u6709 $n$ \u5bf9\u76f8\u90bb\u683c\u5b50\u7684\u5e8f\u5217 $a$\uff0c\u6c42\u6700\u5927\u7684 $a$ \u7684\u201c\u597d\u7684\u201d\u5b50\u5e8f\u5217\u957f\u5ea6\u3002\u9898\u56fe\u4e3a\u6837\u4f8b 1 \u6570\u636e 1 \u7684\u6700\u4f73\u5206\u5272\u65b9\u6cd5\u3002\n### \u6570\u636e\u8303\u56f4\n- $t$ \u7ec4\u6570\u636e\uff0c$1\\le t\\le 100$\uff1b\n- $2\\le k\\le 500$ \u4e14 $k$ \u4e3a\u5076\u6570\uff0c\u7ed9\u51fa\u683c\u5b50\u7684\u5750\u6807\u5747\u5728\u683c\u5b50\u8303\u56f4\u5185\uff1b\n- $1\\le n\\le 10^5$\uff1b\n- \u6240\u6709\u6570\u636e\u7684 $n$ \u4e4b\u548c $\\le10^5$\uff0c$k$ \u4e4b\u548c $\\le500$\u3002"
}
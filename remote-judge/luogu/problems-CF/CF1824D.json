{
    "description": "LuoTianyi gives you an array $ a $ of $ n $ integers and the index begins from $ 1 $ .\n\nDefine $ g(i,j) $ as follows:\n\n- $ g(i,j) $ is the largest integer $ x $ that satisfies $ \\{a_p:i\\le p\\le j\\}\\subseteq\\{a_q:x\\le q\\le j\\} $ while $ i \\le j $ ;\n- and $ g(i,j)=0 $ while $ i>j $ .\n\nThere are $ q $ queries. For each query you are given four integers $ l,r,x,y $ , you need to calculate $ \\sum\\limits_{i=l}^{r}\\sum\\limits_{j=x}^{y}g(i,j) $ .",
    "inputFormat": "The first line contains two integers $ n $ and $ q $ ( $ 1\\le n,q\\le 10^6 $ ) \u2014 the length of the array $ a $ and the number of queries.\n\nThe second line contains $ n $ integers $ a_1,a_2,\\ldots,a_n $ ( $ 1\\le a_i\\le n $ ) \u2014 the elements of the array $ a $ .\n\nNext $ q $ lines describe a query. The $ i $ -th line contains four integers $ l,r,x,y $ ( $ 1\\le l\\le r\\le n, 1\\le x\\le y\\le n $ ) \u2014 the integers in the $ i $ -th query.",
    "outputFormat": "Print $ q $ lines where $ i $ -th line contains one integer \u2014 the answer for the $ i $ -th query.",
    "samples": [
        [
            "6 4\n1 2 2 1 3 4\n1 1 4 5\n2 3 3 3\n3 6 1 2\n6 6 6 6",
            "6\n6\n0\n6"
        ],
        [
            "10 5\n10 2 8 10 9 8 2 1 1 8\n1 1 10 10\n2 2 3 3\n6 6 6 6\n1 1 4 5\n4 8 4 8",
            "4\n2\n6\n4\n80"
        ]
    ],
    "hint": "In the first example:\n\nIn the first query, the answer is $ g(1,4)+g(1,5)=3+3=6 $ .\n\n $ x=1,2,3 $ can satisfies $ \\{a_p:1\\le p\\le 4\\}\\subseteq\\{a_q:x\\le q\\le 4\\} $ , $ 3 $ is the largest integer so $ g(1,4)=3 $ .\n\nIn the second query, the answer is $ g(2,3)+g(3,3)=3+3=6 $ .\n\nIn the third query, the answer is $ 0 $ , because all $ i > j $ and $ g(i,j)=0 $ .\n\nIn the fourth query, the answer is $ g(6,6)=6 $ .\n\nIn the second example:\n\nIn the second query, the answer is $ g(2,3)=2 $ .\n\nIn the fourth query, the answer is $ g(1,4)+g(1,5)=2+2=4 $ .",
    "translation": "Feyn \u7ed9\u4e86\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6574\u6570\u6570\u7ec4 $a$\uff0c\u4e0b\u6807\u7531 $1$ \u5f00\u59cb\u3002\n\n\u7528\u4ee5\u4e0b\u65b9\u5f0f\u5b9a\u4e49\u51fd\u6570 $g(i,j)$\uff1a\n\n+ \u5f53 $i\\le j$ \u65f6\uff0c$g(i,j)$ \u662f\u6ee1\u8db3 $ \\{a_p:i\\le p\\le j\\}\\subseteq\\{a_q:x\\le q\\le j\\} $ \u7684\u6700\u5927\u6574\u6570 $x$\uff1b\n+ \u5426\u5219 $g(i,j)=0$\u3002\n\n$q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u7ed9\u5b9a $l,r,x,y$\uff0c\u8bf7\u6c42\u51fa $\\sum\\limits_{i=l}^r\\sum\\limits_{j=x}^y g(i,j)$ \u7684\u503c\u3002\n\n(translated by 342873)"
}
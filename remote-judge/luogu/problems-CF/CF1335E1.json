{
    "description": "The only difference between easy and hard versions is constraints.\n\nYou are given a sequence $ a $ consisting of $ n $ positive integers.\n\nLet's define a three blocks palindrome as the sequence, consisting of at most two distinct elements (let these elements are $ a $ and $ b $ , $ a $ can be equal $ b $ ) and is as follows: $ [\\underbrace{a, a, \\dots, a}_{x}, \\underbrace{b, b, \\dots, b}_{y}, \\underbrace{a, a, \\dots, a}_{x}] $ . There $ x, y $ are integers greater than or equal to $ 0 $ . For example, sequences $ [] $ , $ [2] $ , $ [1, 1] $ , $ [1, 2, 1] $ , $ [1, 2, 2, 1] $ and $ [1, 1, 2, 1, 1] $ are three block palindromes but $ [1, 2, 3, 2, 1] $ , $ [1, 2, 1, 2, 1] $ and $ [1, 2] $ are not.\n\nYour task is to choose the maximum by length subsequence of $ a $ that is a three blocks palindrome.\n\nYou have to answer $ t $ independent test cases.\n\nRecall that the sequence $ t $ is a a subsequence of the sequence $ s $ if $ t $ can be derived from $ s $ by removing zero or more elements without changing the order of the remaining elements. For example, if $ s=[1, 2, 1, 3, 1, 2, 1] $ , then possible subsequences are: $ [1, 1, 1, 1] $ , $ [3] $ and $ [1, 2, 1, 3, 1, 2, 1] $ , but not $ [3, 2, 3] $ and $ [1, 1, 1, 1, 2] $ .",
    "inputFormat": "The first line of the input contains one integer $ t $ ( $ 1 \\le t \\le 2000 $ ) \u2014 the number of test cases. Then $ t $ test cases follow.\n\nThe first line of the test case contains one integer $ n $ ( $ 1 \\le n \\le 2000 $ ) \u2014 the length of $ a $ . The second line of the test case contains $ n $ integers $ a_1, a_2, \\dots, a_n $ ( $ 1 \\le a_i \\le 26 $ ), where $ a_i $ is the $ i $ -th element of $ a $ . Note that the maximum value of $ a_i $ can be up to $ 26 $ .\n\nIt is guaranteed that the sum of $ n $ over all test cases does not exceed $ 2000 $ ( $ \\sum n \\le 2000 $ ).",
    "outputFormat": "For each test case, print the answer \u2014 the maximum possible length of some subsequence of $ a $ that is a three blocks palindrome.",
    "samples": [
        [
            "6\n8\n1 1 2 2 3 2 1 1\n3\n1 3 3\n4\n1 10 10 1\n1\n26\n2\n2 1\n3\n1 1 1",
            "7\n2\n4\n1\n1\n3"
        ]
    ],
    "hint": "",
    "translation": "\u73b0\u5728\u7ed9\u4f60\u4e00\u4e2a\u6570\u5217\uff0c\u8981\u6c42\u4f60\u4ece\u4e2d\u5220\u6389\u4e00\u4e9b\u6570\uff0c\u8ba9\u5269\u4e0b\u7684\u6570\u5217\u6ee1\u8db3\u4e00\u4e0b\u6761\u4ef6\r\n\r\n- \u8be5\u6570\u5217\u957f\u5ea6\u4e3a $2x+y$\uff0c($x,y$\u53ef\u4ee5\u7b49\u4e8e $0$)\r\n- \u8be5\u6570\u5217\u7684\u524d $x$ \u4e2a\u6570\u548c\u540e $x$ \u4e2a\u6570\u5fc5\u987b\u5168\u90e8\u76f8\u540c\r\n- \u8be5\u6570\u5217\u7684\u4e2d\u95f4 $y$ \u4e2a\u6570\u5fc5\u987b\u5168\u90e8\u76f8\u540c\r\n\r\n\u5982\u5f53\u6570\u5217\u4e3a $1,2,1,3,1,2,1$ \u65f6\uff0c\u6700\u540e\u7684\u6570\u5217\u4e3a $1,1,3,1,1$\u6216\u8005 $3$ \u90fd\u662f\u53ef\u884c\u7684\uff0c\u4f46\u662f $1,1,1,1,2$ \u5c31\u662f\u4e0d\u53ef\u884c\u7684\r\n\r\n\u73b0\u5728\u95ee\u4f60\u5269\u4e0b\u7684\u5e8f\u5217\u6700\u957f\u80fd\u6709\u591a\u5c11"
}
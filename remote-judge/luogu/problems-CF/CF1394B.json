{
    "description": "Boboniu has a directed graph with $ n $ vertices and $ m $ edges.\n\nThe out-degree of each vertex is at most $ k $ .\n\nEach edge has an integer weight between $ 1 $ and $ m $ . No two edges have equal weights.\n\nBoboniu likes to walk on the graph with some specific rules, which is represented by a tuple $ (c_1,c_2,\\ldots,c_k) $ . If he now stands on a vertex $ u $ with out-degree $ i $ , then he will go to the next vertex by the edge with the $ c_i $ -th $ (1\\le c_i\\le i) $ smallest weight among all edges outgoing from $ u $ .\n\nNow Boboniu asks you to calculate the number of tuples $ (c_1,c_2,\\ldots,c_k) $ such that\n\n- $ 1\\le c_i\\le i $ for all $ i $ ( $ 1\\le i\\le k $ ).\n- Starting from any vertex $ u $ , it is possible to go back to $ u $ in finite time by walking on the graph under the described rules.",
    "inputFormat": "The first line contains three integers $ n $ , $ m $ and $ k $ ( $ 2\\le n\\le 2\\cdot 10^5 $ , $ 2\\le m\\le \\min(2\\cdot       10^5,n(n-1) ) $ , $ 1\\le k\\le 9 $ ).\n\nEach of the next $ m $ lines contains three integers $ u $ , $ v $ and $ w $ $ (1\\le u,v\\le n,u\\ne v,1\\le w\\le m) $ , denoting an edge from $ u $ to $ v $ with weight $ w $ . It is guaranteed that there are no self-loops or multiple edges and each vertex has at least one edge starting from itself.\n\nIt is guaranteed that the out-degree of each vertex is at most $ k $ and no two edges have equal weight.",
    "outputFormat": "Print one integer: the number of tuples.",
    "samples": [
        [
            "4 6 3\n4 2 1\n1 2 2\n2 4 3\n4 1 4\n4 3 5\n3 1 6",
            "2"
        ],
        [
            "5 5 1\n1 4 1\n5 1 2\n2 5 3\n4 3 4\n3 2 5",
            "1"
        ],
        [
            "6 13 4\n3 5 1\n2 5 2\n6 3 3\n1 4 4\n2 6 5\n5 3 6\n4 1 7\n4 3 8\n5 2 9\n4 2 10\n2 1 11\n6 1 12\n4 6 13",
            "1"
        ]
    ],
    "hint": "For the first example, there are two tuples: $ (1,1,3) $ and $ (1,2,3) $ . The blue edges in the picture denote the $ c_i $ -th smallest edges for each vertex, which Boboniu chooses to go through.\n\n  ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1394B/5474f0f6fffa7d56fd7564b7610d64e683f8dbda.png)For the third example, there's only one tuple: $ (1,2,2,2) $ .\n\n  ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1394B/274580f276e993aef252a750c707d368ffc4c21a.png)The out-degree of vertex $ u $ means the number of edges outgoing from $ u $ .",
    "translation": "## \u9898\u76ee\u63cf\u8ff0\r\n\r\nBoboniu\u6709\u4e00\u6761n\u4e2a\u70b9\u548cm\u6761\u8fb9\u7684\u6709\u5411\u56fe\r\n\r\n\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u6700\u5927\u4e3ak\r\n\r\n\u6bcf\u4e00\u6761\u8fb9\u90fd\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u6ca1\u6709\u4e24\u6761\u8fb9\u6709\u76f8\u540c\u7684\u6743\u503c\u3002\r\n\r\nBoboniu\u559c\u6b22\u5728\u56fe\u4e0a\u4ee5\u67d0\u79cd\u7279\u5b9a\u7684\u65b9\u5f0f\u8d70\u8def\uff0c\u8fd9\u4e2a\u65b9\u5f0f\u53ef\u4ee5\u8868\u793a\u4e3a\u7279\u5b9a\u7684\u96c6\u5408$(c_1,c_2,\\dots,c_k)$\u3002\u5982\u679c\u4ed6\u73b0\u5728\u5728\u7684\u70b9\u7684\u521d\u5ea6\u4e3a$i$\uff0c\u90a3\u4e48\u4ed6\u4f1a\u8d70\u5230u\u7684\u51fa\u8fb9\u4e2d\u6743\u503c\u7b2c$c_i$\u5c0f\u7684\u8fb9\r\n\r\n\u73b0\u5728bobiniu\u8981\u4f60\u8ba1\u7b97\u6240\u6709\u6ee1\u8db3\u4e0b\u5217\u6761\u4ef6\u7684\u8fb9\u6570\uff1a\r\n- \u5bf9\u4e8e\u4efb\u610f\u7684i\uff08$1 \\leq i \\leq k$\uff09\uff0c$1 \\leq c_i \\leq i$\r\n- \u5bf9\u4e8e\u4efb\u610f\u7684\u70b9u\uff0c\u6309\u4e0a\u8ff0\u65b9\u5f0f\u90fd\u53ef\u4ee5\u8d70\u56de\u81ea\u5df1\r\n\r\n## \u8f93\u5165\u683c\u5f0f\r\n\r\n\u7b2c\u4e00\u884c\u6709\u4e09\u4e2a\u6570n,m,k$(2 \\leq n \\leq 2*10^5,2 \\leq m \\leq min(2*10^5,n*(n-1)),1 \\leq k \\leq 9)$\r\n\r\n\u63a5\u4e0b\u6765\u6709m\u884c\uff0c\u6bcf\u884c\u4e09\u4e2a\u6570u,v,w$(1 \\leq u,v \\leq n,u \\neq v,1 \\leq w \\leq m)$\uff0c\u8868\u793a\u4e00\u6761\u4eceu\u5230v\u7684\u8fb9\u3002\u4fdd\u8bc1\u6ca1\u6709\u81ea\u73af\u548c\u91cd\u8fb9\u3002\u4fdd\u8bc1\u6240\u6709\u70b9\u90fd\u81f3\u5c11\u67091\u6761\u51fa\u8fb9\r\n\r\n\u4fdd\u8bc1\u6240\u6709\u70b9\u51fa\u5ea6\u6700\u591a\u4e3ak\uff0c\u4fdd\u8bc1\u6ca1\u6709\u4e24\u6761\u8fb9\u6743\u503c\u76f8\u540c\r\n\r\n## \u8f93\u51fa\u683c\u5f0f\r\n\r\n\u4e00\u4e2a\u6570\uff1a\u73af\u7684\u4e2a\u6570\r\n\r\n## \u8bf4\u660e\r\n\r\n\u6837\u4f8b1\u6709\u4e24\u79cd\u65b9\u6848\uff1a(1,1,3)\u548c(1,2,3)\uff0c\u56fe\u4e2d\u84dd\u7684\u8fb9\u662fboboniu\u51b3\u5b9a\u8d70\u7684\u8fb9\r\n\r\n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1394B/5474f0f6fffa7d56fd7564b7610d64e683f8dbda.png)\r\n\r\n\u6837\u4f8b3\u53ea\u6709\u4e00\u79cd\u65b9\u6848\uff1a(1,2,2,2)\r\n\r\n![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1394B/274580f276e993aef252a750c707d368ffc4c21a.png)\r\n\r\n\u70b9\u7684\u51fa\u5ea6\u8868\u793a\u4ece\u8fd9\u4e2a\u70b9\u51fa\u53bb\u7684\u8fb9\u7684\u6761\u6570"
}
{
    "description": "The only difference between this problem and the hard version is the constraints on $ t $ and $ n $ .\n\nYou are given an array $ a $ , consisting of $ n $ distinct integers $ a_1, a_2, \\ldots, a_n $ .\n\nDefine the beauty of an array $ p_1, p_2, \\ldots p_k $ as the minimum amount of time needed to sort this array using an arbitrary number of range-sort operations. In each range-sort operation, you will do the following:\n\n- Choose two integers $ l $ and $ r $ ( $ 1 \\le l < r \\le k $ ).\n- Sort the subarray $ p_l, p_{l + 1}, \\ldots, p_r $ in $ r - l $ seconds.\n\nPlease calculate the sum of beauty over all subarrays of array $ a $ .\n\nA subarray of an array is defined as a sequence of consecutive elements of the array.",
    "inputFormat": "Each test contains multiple test cases. The first line contains the number of test cases $ t $ ( $ 1 \\le t \\le 5 \\cdot 10^3 $ ). The description of the test cases follows.\n\nThe first line of each test case contains a single integer $ n $ ( $ 1 \\le n \\le 5 \\cdot 10^3 $ ) \u2014 the length of the array $ a $ .\n\nThe second line of each test case consists of $ n $ integers $ a_1,a_2,\\ldots, a_n $ ( $ 1\\le a_i\\le 10^9 $ ). It is guaranteed that all elements of $ a $ are pairwise distinct.\n\nIt is guaranteed that the sum of $ n $ over all test cases does not exceed $ 5 \\cdot 10^3 $ .",
    "outputFormat": "For each test case, output the sum of beauty over all subarrays of array $ a $ .",
    "samples": [
        [
            "5\n2\n6 4\n3\n3 10 6\n4\n4 8 7 2\n5\n9 8 2 4 6\n12\n2 6 13 3 15 5 10 8 16 9 11 18",
            "1\n2\n8\n16\n232"
        ]
    ],
    "hint": "In the first test case:\n\n- The subarray $ [6] $ is already sorted, so its beauty is $ 0 $ .\n- The subarray $ [4] $ is already sorted, so its beauty is $ 0 $ .\n- You can sort the subarray $ [6, 4] $ in one operation by choosing $ l = 1 $ and $ r = 2 $ . Its beauty is equal to $ 1 $ .\n\n The sum of beauty over all subarrays of the given array is equal to $ 0 + 0 + 1 = 1 $ .In the second test case:\n\n- The subarray $ [3] $ is already sorted, so its beauty is $ 0 $ .\n- The subarray $ [10] $ is already sorted, so its beauty is $ 0 $ .\n- The subarray $ [6] $ is already sorted, so its beauty is $ 0 $ .\n- The subarray $ [3, 10] $ is already sorted, so its beauty is $ 0 $ .\n- You can sort the subarray $ [10, 6] $ in one operation by choosing $ l = 1 $ and $ r = 2 $ . Its beauty is equal to $ 2 - 1 = 1 $ .\n- You can sort the subarray $ [3, 10, 6] $ in one operation by choosing $ l = 2 $ and $ r = 3 $ . Its beauty is equal to $ 3 - 2 = 1 $ .\n\n The sum of beauty over all subarrays of the given array is equal to $ 0 + 0 + 0 + 0 + 1 + 1 = 2 $ .",
    "translation": "\u5bf9\u4e00\u4e2a\u6570\u7ec4 $\\{p_i\\}$ \u7684\u4e00\u6bb5\u533a\u95f4 $[l,r]$ \u6392\u5e8f\u7684\u4ee3\u4ef7\u4e3a $r-l$ \uff0c\u5bf9\u6574\u4e2a\u6570\u7ec4 $p_i$ \u6392\u5e8f\u7684\u4ee3\u4ef7\u4e3a\u9009\u5b9a\u82e5\u5e72\u533a\u95f4\u5e76\u6392\u5e8f\uff0c\u4f7f\u5f97\u6574\u4e2a\u6570\u7ec4\u6709\u5e8f\u7684\u4ee3\u4ef7\u4e4b\u548c\u3002\n\n\u6c42 $\\{a_i\\}$ \u7684\u6240\u6709\u5b50\u6bb5\u6392\u5e8f\u7684\u4ee3\u4ef7\u4e4b\u548c\u3002"
}
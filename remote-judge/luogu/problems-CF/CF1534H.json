{
    "description": "This is an interactive problem.\n\nAs he qualified for IOI this year, Little Ericyi was given a gift from all his friends: a tree of $ n $ nodes!\n\nOn the flight to IOI Little Ericyi was very bored, so he decided to play a game with Little Yvonne with his new tree. First, Little Yvonne selects two (not necessarily different) nodes $ a $ and $ b $ on the tree (without telling Ericyi), and then gives him a hint $ f $ (which is some node on the path from $ a $ to $ b $ ).\n\nThen, Little Ericyi is able to ask the following question repeatedly:\n\n- If I rooted the tree at node $ r $ (Ericyi gets to choose $ r $ ), what would be the [Lowest Common Ancestor](https://en.wikipedia.org/wiki/Lowest_common_ancestor) of $ a $ and $ b $ ?\n\nLittle Ericyi's goal is to find the nodes $ a $ and $ b $ , and report them to Little Yvonne.\n\nHowever, Little Yvonne thought this game was too easy, so before he gives the hint $ f $ to Little Ericyi, he also wants him to first find the maximum number of queries required to determine $ a $ and $ b $ over all possibilities of $ a $ , $ b $ , and $ f $ assuming Little Ericyi plays optimally. Little Ericyi defines an optimal strategy as one that makes the minimum number of queries. Of course, once Little Ericyi replies with the maximum number of queries, Little Yvonne will only let him use that many queries in the game.\n\nThe tree, $ a $ , $ b $ , and $ f $ are all fixed before the start of the game and do not change as queries are made.",
    "inputFormat": "",
    "outputFormat": "First read a line containing the integer $ n $ ( $ 1 \\le n \\le 10^5 $ ), the number of nodes in the tree.\n\nThe next $ n\u22121 $ lines describe Little Ericyi's tree. These lines contain two integers $ u $ and $ v $ ( $ 1 \\le u,v \\le n $ ) denoting an edge between $ u $ and $ v $ ( $ u \\neq v $ ). It is guaranteed that these edges form a tree.\n\nAfter that you should output $ k $ , the maximum number of queries needed to determine $ a $ and $ b $ over all possibilities of $ a $ , $ b $ , and $ f $ assuming Little Ericyi plays optimally. You should output end of line and flush the output after printing $ k $ .\n\nAfter that read a line containing the integer $ f $ ( $ 1 \\le f \\le n $ ) \u2014 the hint: a node on the path from $ a $ to $ b $ , inclusive.\n\nAfter that, you can start making queries. You will be limited to making at most $ k $ queries, where $ k $ is the number you printed.\n\nEach query is made in the format \"? r\", where $ r $ is an integer $ 1 \\le r \\le n $ denoting the root node you want for the query.\n\nYou will then receive an integer $ x $ ( $ 1 \\le x \\le n $ ), the Lowest Common Ancestor of $ a $ and $ b $ if the tree was rooted at $ r $ .\n\nWhen your program has found the nodes $ a $ , $ b $ , report the answer in the following format: \"! a b\", where $ a $ and $ b $ are the two hidden nodes and terminate your program normally immediately after flushing the output stream. You may output $ a $ and $ b $ in any order.\n\nAfter printing a query do not forget to output end of line and flush the output. Otherwise, you will get Idleness limit exceeded. To do this, use:\n\n- fflush(stdout) or cout.flush() in C++;\n- System.out.flush() in Java;\n- flush(output) in Pascal;\n- stdout.flush() in Python;\n- see documentation for other languages.\n\nIf at any point you make an invalid output or make more than $ k $ queries, the interaction will terminate and you will receive a Wrong Answer verdict. An invalid output is defined as either an invalid query or a value of $ k $ less than $ 0 $ or greater than $ n $ .\n\nHacks\n\nTo hack a solution, use the following format:\n\nThe first line contains the integer $ n $ ( $ 1 \\le n \\le 10^5 $ ).\n\nThe next $ n\u22121 $ lines contain two integers $ u $ and $ v $ ( $ 1 \\le u,v \\le n $ ) denoting an edge between $ u $ and $ v $ ( $ u \\neq v $ ). These $ n-1 $ edges must form a tree.\n\nThe next line of input contains the nodes $ a $ and $ b $ ( $ 1 \\le a,b \\le n $ ), separated by a space.\n\nThe final line of input contains the integer $ f $ ( $ 1 \\le f \\le n $ ). Node $ f $ should be on the simple path from $ a $ to $ b $ (inclusive).",
    "samples": [
        [
            "4\n3 2\n2 1\n2 4\n\n1\n\n1\n\n2\n\n2",
            "3\n\n? 1\n\n? 2\n\n? 3\n\n! 4 1"
        ],
        [
            "5\n3 1\n1 4\n4 5\n4 2\n\n1\n\n4\n\n1\n\n4",
            "3\n\n? 4\n\n? 1\n\n? 5\n\n! 1 4"
        ]
    ],
    "hint": "Here is the the tree from the first sample interaction. Nodes $ a $ and $ b $ are highlighted.\n\n ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1534H/ef9156476c607156866cd84b167415014dc96463.png)Notice that $ a $ and $ b $ can be output in any order.\n\nAdditionally, here are the answers to querying every single node $ 1,2,\\ldots,n $ for your convenience:\n\n- $ 1 $ : $ 1 $\n- $ 2 $ : $ 2 $\n- $ 3 $ : $ 2 $\n- $ 4 $ : $ 4 $\n\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\n\nHere is the the tree from the second sample interaction. Again, nodes $ a $ and $ b $ are highlighted.\n\n ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1534H/2bda64573f0de18babf2cf55048d9334e8fe1d57.png)Lastly, here are the answers to querying every single node $ 1,2,\\ldots,n $ (in example $ 2 $ ) for your convenience:\n\n- $ 1 $ : $ 1 $\n- $ 2 $ : $ 4 $\n- $ 3 $ : $ 1 $\n- $ 4 $ : $ 4 $\n- $ 5 $ : $ 4 $",
    "translation": "\u8fd9\u662f\u4e00\u9053**\u4ea4\u4e92\u9898**\u3002  \n\u7ed9\u4f60\u4e00\u68f5\u5305\u542b $n$ \u4e2a\u8282\u70b9\u7684\u6811\u3002\u4f60\u9700\u8981\u731c\u6d4b\u51fa\u8fd9\u68f5\u6811\u4e0a\u7684\u4e24\u4e2a\u7279\u6b8a\u8282\u70b9 $a,b$\uff08$a$ \u4e0d\u4e00\u5b9a\u4e0e $b$ \u4e0d\u540c\uff09\u3002  \n\u9996\u5148\uff0c\u4f60\u4f1a\u88ab\u544a\u77e5\u4e00\u4e2a\u6574\u6570 $f$\uff0c\u6ee1\u8db3\u8282\u70b9 $f$ \u662f\u8282\u70b9 $a,b$ \u4e4b\u95f4\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u7684\u4e00\u70b9\u3002  \n\u63a5\u4e0b\u6765\u4f60\u53ef\u4ee5\u8fdb\u884c\u8be2\u95ee\uff0c\u5177\u4f53\u7684\uff0c\u6bcf\u6b21\u7ed9\u5b9a\u6574\u6570 $r$\uff0c\u4ea4\u4e92\u5668\u4f1a\u7ed9\u4f60\u5f53\u6811\u7684\u6839\u8282\u70b9\u4e3a $r$ \u65f6\uff0c\u8282\u70b9 $a,b$ \u7684\u6700\u8fd1\u516c\u5171\u7956\u5148\u662f\u54ea\u4e2a\u8282\u70b9\u3002  \n\u7279\u522b\u7684\uff0c\u5728\u7ed9\u5b9a\u6811\u7684\u5f62\u6001\u4e4b\u540e\uff0c\u4f60\u9700\u8981\u5148\u7ed9\u51fa\u5728\u6240\u6709 $a,b,f$ \u7684\u53ef\u80fd\u7684\u53d6\u503c\u4e2d\uff0c\u81f3\u5c11\u9700\u8981\u591a\u5c11\u6b21\u8be2\u95ee\u624d\u80fd\u4fdd\u8bc1\u5f97\u51fa\u7279\u6b8a\u8282\u70b9\u7684\u7f16\u53f7\u3002  \n$1\\leq n\\leq10^5;1\\leq a,b,f\\leq n$ \u4e14\u8282\u70b9 $f$ \u5728\u8282\u70b9 $a,b$ \u4e4b\u95f4\u7684\u7b80\u5355\u8def\u5f84\u4e0a\uff08\u5305\u62ec\u8282\u70b9 $a,b$\uff09\u3002  \n**\u4ea4\u4e92\u683c\u5f0f\u5982\u4e0b\uff1a**  \n\u9996\u5148\u8f93\u5165\u6574\u6570 $n$\uff0c\u8868\u793a\u6811\u7684\u8282\u70b9\u6570\u3002\u63a5\u4e0b\u6765 $n-1$ \u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 $u,v(1\\leq u,v\\leq n,u\\not=v)$ \u8868\u793a\u8282\u70b9 $u,v$ \u4e4b\u95f4\u6709\u4e00\u6761\u8fb9\u3002\u6211\u4eec\u4fdd\u8bc1\u7ed9\u5b9a\u7684\u662f\u4e00\u68f5\u6811\u3002  \n\u63a5\u4e0b\u6765\uff0c\u4f60\u9700\u8981\u5148\u8f93\u51fa\u5bf9\u4e8e\u8fd9\u68f5\u6811\uff0c\u786e\u5b9a $a,b$ \u6240\u9700\u8981\u7684\u6700\u5c0f\u8be2\u95ee\u6b21\u6570\uff0c\u6211\u4eec\u4fdd\u8bc1\u8fd9\u4e2a\u6700\u5c0f\u8be2\u95ee\u6b21\u6570 $\\in[0,n]$\uff0c\u63a5\u4e0b\u6765\u4f60\u7684\u8be2\u95ee\u6b21\u6570\u5c06\u88ab\u9650\u5236\u5728\u4f60\u6240\u8f93\u51fa\u7684\u8fd9\u4e2a\u6700\u5927\u8be2\u95ee\u6b21\u6570\u5185\u3002  \n\u63a5\u4e0b\u6765\u8f93\u5165 $f$\u3002\u4e4b\u540e\u4f60\u4fbf\u53ef\u4ee5\u5f00\u59cb\u8be2\u95ee\uff0c\u8be2\u95ee\u683c\u5f0f\u4e3a `? r`\uff0c\u4f60\u9700\u8981\u6ee1\u8db3 $1\\leq r\\leq n$\u3002\u5982\u679c\u4f60\u8ba4\u4e3a\u4f60\u5f97\u5230\u4e86\u7b54\u6848\uff0c\u6309\u7167 `! a b` \u7684\u683c\u5f0f\u8f93\u51fa\uff0c$a,b$ \u7684\u987a\u5e8f\u968f\u610f\u3002  \n\u7b54\u6848\u9519\u8bef\u3001\u7a0b\u5e8f\u6240\u8f93\u51fa\u7684\u8be2\u95ee\u6b21\u6570\u8fc7\u591a\u3001\u8be2\u95ee\u4e0d\u5408\u6cd5\u5747\u4f1a\u5bfc\u81f4 `Wrong Answer` \u7684\u8bc4\u6d4b\u7ed3\u679c\u3002\u540c\u65f6\uff0c\u8bf7\u6ce8\u610f\u5237\u65b0\u7f13\u51b2\u533a\u3002"
}
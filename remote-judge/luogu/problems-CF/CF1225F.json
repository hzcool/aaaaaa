{
    "description": "Bytelandian Tree Factory produces trees for all kinds of industrial applications. You have been tasked with optimizing the production of a certain type of tree for an especially large and important order.\n\nThe tree in question is a rooted tree with $ n $ vertices labelled with distinct integers from $ 0 $ to $ n - 1 $ . The vertex labelled $ 0 $ is the root of the tree, and for any non-root vertex $ v $ the label of its parent $ p(v) $ is less than the label of $ v $ .\n\nAll trees at the factory are made from bamboo blanks. A bamboo is a rooted tree such that each vertex has exactly one child, except for a single leaf vertex with no children. The vertices of a bamboo blank can be labelled arbitrarily before its processing is started.\n\nTo process a bamboo into another tree a single type of operation can be made: choose an arbitrary non-root vertex $ v $ such that its parent $ p(v) $ is not a root either. The operation consists of changing the parent of $ v $ to its parent's parent $ p(p(v)) $ . Note that parents of all other vertices remain unchanged, in particular, the subtree of $ v $ does not change.\n\nEfficiency is crucial, hence you have to minimize the number of operations to make the desired tree from a bamboo blank. Construct any optimal sequence of operations to produce the desired tree.\n\nNote that the labelling of the resulting tree has to coincide with the labelling of the desired tree. Formally, the labels of the roots have to be equal, and for non-root vertices with the same label the labels of their parents should be the same.\n\nIt is guaranteed that for any test present in this problem an answer exists, and further, an optimal sequence contains at most $ 10^6 $ operations. Note that any hack that does not meet these conditions will be invalid.",
    "inputFormat": "The first line contains a single integer $ n $ \u2014 the number of vertices in the tree ( $ 2 \\leq n \\leq 10^5 $ ).\n\nThe second line contains $ n - 1 $ integers $ p(1), \\ldots, p(n - 1) $ \u2014 indices of parent vertices of $ 1, \\ldots, n - 1 $ respectively ( $ 0 \\leq p(i) < i $ ).",
    "outputFormat": "In the first line, print $ n $ distinct integers $ id_1, \\ldots, id_n $ \u2014 the initial labelling of the bamboo blank starting from the root vertex ( $ 0 \\leq id_i < n $ ).\n\nIn the second line, print a single integer $ k $ \u2014 the number of operations in your sequence ( $ 0 \\leq k \\leq 10^6 $ ).\n\nIn the third line print $ k $ integers $ v_1, \\ldots, v_k $ describing operations in order. The $ i $ -th operation consists of changing $ p(v_i) $ to $ p(p(v_i)) $ . Each operation should be valid, i.e. neither $ v_i $ nor $ p(v_i) $ can be the root of the tree at the moment.",
    "samples": [
        [
            "5\n0 0 1 1\n",
            "0 2 1 4 3\n2\n1 3\n"
        ],
        [
            "4\n0 1 2\n",
            "0 1 2 3\n0\n\n"
        ]
    ],
    "hint": "",
    "translation": "Bytelandian Tree Factory\u751f\u4ea7\u5404\u79cd\u5de5\u4e1a\u7528\u9014\u7684\u6811\uff0c\u4f60\u7684\u4efb\u52a1\u662f\u4e3a\u4e00\u4e2a\u7279\u522b\u5927\u7684\u91cd\u8981\u8ba2\u5355\u4f18\u5316\u751f\u4ea7\n\n\u95ee\u9898\u4e2d\u7684\u6811\u662f\u4e00\u68f5\u6709$n$\u4e2a\u8282\u70b9\u7684\u6709\u6839\u6811\uff0c\u6bcf\u4e2a\u9876\u70b9\u7528\u4e0d\u540c\u7684\u6574\u6570\u6807\u8bb0\u4e3a$[0,1,...,n-1]$\uff0c\u5176\u4e2d$0$\u6807\u8bb0\u7740\u6839\u8282\u70b9\uff0c\u4e14\u5bf9\u4e8e\u4efb\u4f55\u975e\u6839\u8282\u70b9$v$\uff0c\u5b83\u7684\u7236\u8282\u70b9\u7684\u6807\u53f7$p(v)$\u8981\u6bd4\u5b83\u7684\u6807\u53f7$v$\u8981\u5c0f\u3002\n\n\u5de5\u5382\u91cc\u6240\u6709\u7684\u6811\u90fd\u662f\u7528\u7af9\u5b50\u505a\u7684\uff08\u53ef\u80fd\u4e0d\u51c6\u786e\u4f46\u4e0d\u5f71\u54cd\u9898\u610f\u7406\u89e3\uff09\uff0c\u8fd9\u79cd\u7af9\u5b50\u662f\u6709\u6839\u7684\u6811\uff0c\u4e14\u6bcf\u4e2a\u8282\u70b9\u53ea\u6709\u4e00\u4e2a\u5b50\u8282\u70b9\uff08\u9664\u4e86\u53f6\u5b50\u8282\u70b9\u6ca1\u6709\u5b50\u8282\u70b9\uff09\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u662f\u76f4\u7ebf\u5f62\u7684\u3002\u52a0\u5de5\u524d\uff0c\u7af9\u5b50\u7684\u9876\u70b9\u53ef\u4ee5\u968f\u610f\u6807\u6ce8\u3002\n\n\u8981\u52a0\u5de5\u7af9\u5b50\u4e3a\u4e00\u68f5\u6811\uff0c\u53ef\u4ee5\u8fdb\u884c\u8fd9\u6837\u7684\u64cd\u4f5c\uff1a\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u4e0d\u662f\u6839\u8282\u70b9\u4e14\u7236\u8282\u70b9\u4e5f\u4e0d\u662f\u6839\u8282\u70b9\u7684\u8282\u70b9$v$\uff0c\u5c06\u5b83\u7684\u7236\u8282\u70b9\u53d8\u6210\u539f\u5148\u7236\u8282\u70b9\u7684\u7236\u8282\u70b9\u5373$p(p(v))$\uff0c\u800c\u5176\u5b83\u8282\u70b9\u7684\u7236\u8282\u70b9\u90fd\u4fdd\u6301\u4e0d\u53d8\uff0c$v$\u7684\u5b50\u6811\u4e5f\u4e0d\u4f1a\u6539\u53d8\u3002\n\n\u6548\u7387\u662f\u81f3\u5173\u91cd\u8981\u7684\uff0c\u6240\u4ee5\u5728\u52a0\u5de5\u51fa\u6240\u9700\u8981\u7684\u6811\u7684\u524d\u63d0\u4e0b\u4f60\u5e94\u5f53\u6700\u5c0f\u5316\u64cd\u4f5c\u6570\u3002\u73b0\u5728\u8bf7\u4f60\u6784\u9020\u4efb\u4f55\u6700\u4f18\u7684\u64cd\u4f5c\u5e8f\u5217\u4ee5\u751f\u6210\u6240\u9700\u8981\u7684\u6811\n\n\u6ce8\u610f\uff1a\u52a0\u5de5\u51fa\u7684\u7ed3\u679c\u6811\u7684\u6807\u7b7e\u5fc5\u987b\u548c\u6240\u9700\u8981\u7684\u6811\u7684\u6807\u7b7e\u4e00\u81f4\uff0c\u5373\u6839\u8282\u70b9\u6807\u7b7e\u76f8\u540c\uff0c\u5176\u5b83\u6240\u6709\u5177\u6709\u76f8\u540c\u6807\u7b7e\u7684\u5b50\u8282\u70b9$v$\uff0c\u5176\u7236\u8282\u70b9\u6807\u7b7e$p(v)$\u4e5f\u5e94\u76f8\u540c\u3002\n\n\u6570\u636e\u4fdd\u8bc1\u4efb\u4f55\u8f93\u5165\u90fd\u81f3\u5c11\u6709\u4e00\u79cd\u53ef\u884c\u7684\u65b9\u6848\uff0c\u4e14\u6700\u4f18\u64cd\u4f5c\u5e8f\u5217\u6700\u591a\u5305\u542b$10^6$\u4e2a\u64cd\u4f5c\u3002\u800c\u4e0d\u7b26\u5408\u8fd9\u4e9b\u6761\u4ef6\u7684$hack$\u6570\u636e\u90fd\u662f\u65e0\u6548\u7684\uff08$codeforces$\u5141\u8bb8$hack$\u5176\u5b83\u4eba\uff0c\u6d1b\u8c37\u4e0a\u73b0\u5728\u53ef\u4ee5\u65e0\u89c6\u8fd9\u53e5\uff09\u3002\n### \u8f93\u5165\u683c\u5f0f\n\u8f93\u5165\u7b2c\u4e00\u884c\u662f\u4e00\u4e2a\u6b63\u6574\u6570$n$\uff0c\u8868\u793a\u9700\u6c42\u6811\u4e2d\u8282\u70b9\u7684\u6570\u91cf$(2\u2264n\u226410^5)$\n\n\u7b2c\u4e8c\u884c\u6709$n-1$\u4e2a\u6574\u6570$[p_1,p_2,...,p_{n-1}]$\uff0c$p_i$\u8868\u793a\u9700\u6c42\u6811\u4e0a\u8282\u70b9\u6807\u7b7e\u4e3a$i$\u7684\u7236\u8282\u70b9\u6807\u7b7e$p(i)(1\u2264p_i\u2264i)$\n### \u8f93\u51fa\u683c\u5f0f\n\u8f93\u51fa\u7b2c\u4e00\u884c\u4e3a$n$\u4e2a\u4e0d\u540c\u7684\u6574\u6570$[id_1,id_2,...,id_n]$\uff0c$id_i$\u8868\u793a\u4f7f\u7528\u7684\u7b2c$i$\u6839\u7af9\u5b50\u4e0a\u7684\u8282\u70b9\u6570\u91cf\uff08\u5373\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u7b2c\u51e0\u4e2a\u5b50\u8282\u70b9\u4e3a\u7a7a)$(0\u2264id_i<n)$\n\n\u7b2c\u4e8c\u884c\u8f93\u51fa\u4e00\u4e2a\u6b63\u6574\u6570$k$\uff0c\u8868\u793a\u4f60\u8f93\u51fa\u64cd\u4f5c\u5e8f\u5217\u4e2d\u7684\u64cd\u4f5c\u6570$(0\u2264k\u226410^6)$\n\n\u7b2c\u4e09\u884c\u8f93\u51fa$k$\u4e2a\u6574\u6570$[v_1,v_2,...,v_k]$\uff0c\u8868\u793a\u64cd\u4f5c\u5e8f\u5217\uff0c\u7b2c$i$\u4e2a\u6574\u6570\u8868\u793a\u64cd\u4f5c\u201c\u5c06$v_i$\u7684\u7236\u8282\u70b9\u4ece$p(v_i)$\u53d8\u6210$p(p(v_i))$\u201d\u3002\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u5e94\u5f53\u662f\u5408\u6cd5\u7684\u64cd\u4f5c\uff08\u5373$v_i$\u548c$p(v_i)$\u6b64\u65f6\u90fd\u4e0d\u662f\u6839\u8282\u70b9\uff09\u3002"
}
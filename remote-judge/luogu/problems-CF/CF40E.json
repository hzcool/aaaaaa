{
    "description": "As it has been found out recently, all the Berland's current economical state can be described using a simple table $ n\u00d7m $ in size. $ n $ \u2014 the number of days in each Berland month, $ m $ \u2014 the number of months. Thus, a table cell corresponds to a day and a month of the Berland's year. Each cell will contain either 1, or -1, which means the state's gains in a particular month, on a particular day. 1 corresponds to profits, -1 corresponds to losses. It turned out important for successful development to analyze the data on the state of the economy of the previous year, however when the treasurers referred to the archives to retrieve the data, it turned out that the table had been substantially damaged. In some table cells the number values had faded and were impossible to be deciphered. It is known that the number of cells in which the data had been preserved is strictly less than $ max(n,m) $ . However, there is additional information \u2014 the product of the numbers in each line and column equaled -1. Your task is to find out how many different tables may conform to the preserved data. As the answer to the task can be quite large, you have to find it modulo $ p $ .",
    "inputFormat": "The first line contains integers $ n $ and $ m $ ( $ 1<=n,m<=1000 $ ). The second line contains the integer $ k $ ( $ 0<=k&lt;max(n,m) $ ) \u2014 the number of cells in which the data had been preserved. The next $ k $ lines contain the data on the state of the table in the preserved cells. Each line is of the form \" $ a $ $ b $ $ c $ \", where $ a $ ( $ 1<=a<=n $ ) \u2014 the number of the table row, $ b $ ( $ 1<=b<=m $ ) \u2014 the number of the column, $ c $ \u2014 the value containing in the cell (1 or -1). They are numbered starting from $ 1 $ . It is guaranteed that no two lines with same $ a $ and $ b $ values exist. The last line contains an integer $ p $ ( $ 2<=p<=10^{9}+7 $ ).",
    "outputFormat": "Print the number of different tables that could conform to the preserved data modulo $ p $ .",
    "samples": [
        [
            "2 2\n0\n100\n",
            "2\n"
        ],
        [
            "2 2\n1\n1 1 -1\n100\n",
            "1\n"
        ]
    ],
    "hint": "",
    "translation": "**\u95ee\u9898\u63cf\u8ff0**\n\u6709\u4e00\u4e2an \u884cm \u5217\u7684\u68cb\u76d8\uff0c\u73b0\u5728\u68cb\u76d8\u4e0a\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u9700\u8981\u586b\u4e0a1 \u6216-1 \u3002\n\u5176\u4e2d\u6709k \u4e2a\u4f4d\u7f6e\u5df2\u7ecf\u586b\u4e0a\u4e86\u6570\uff0c\u800c\u5176\u5b83\u7684\u4f4d\u7f6e\u5219\u662f\u7a7a\u7684\u3002\n\u5b9a\u4e49\u4e00\u4e2a\u68cb\u76d8\u662f\u597d\u7684\u5f53\u4e14\u4ec5\u5f53\u5176\u6bcf\u4e00\u884c\u3001\u6bcf\u4e00\u5217\u90fd\u6ee1\u8db3\u6240\u6709\u6570\u7684\u4e58\u79ef\u662f\u22121 \u3002\n\u4f60\u9700\u8981\u8ba1\u7b97\u6709\u591a\u5c11\u79cd\u586b\u6570\u7684\u65b9\u6848\u662f\u597d\u7684\uff0c\u7b54\u6848\u5bf9p \u53d6\u6a21\u3002\n$0~\\leq~k~<~\\max\\{n,m\\}$"
}
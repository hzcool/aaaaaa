{
    "description": "An ant moves on the real line with constant speed of $ 1 $ unit per second. It starts at $ 0 $ and always moves to the right (so its position increases by $ 1 $ each second).\n\nThere are $ n $ portals, the $ i $ -th of which is located at position $ x_i $ and teleports to position $ y_i < x_i $ . Each portal can be either active or inactive. The initial state of the $ i $ -th portal is determined by $ s_i $ : if $ s_i=0 $ then the $ i $ -th portal is initially inactive, if $ s_i=1 $ then the $ i $ -th portal is initially active. When the ant travels through a portal (i.e., when its position coincides with the position of a portal):\n\n- if the portal is inactive, it becomes active (in this case the path of the ant is not affected);\n- if the portal is active, it becomes inactive and the ant is instantly teleported to the position $ y_i $ , where it keeps on moving as normal.\n\nHow long (from the instant it starts moving) does it take for the ant to reach the position $ x_n + 1 $ ? It can be shown that this happens in a finite amount of time. Since the answer may be very large, compute it modulo $ 998\\,244\\,353 $ .",
    "inputFormat": "The first line contains the integer $ n $ ( $ 1\\le n\\le 2\\cdot 10^5 $ ) \u2014 the number of portals.\n\nThe $ i $ -th of the next $ n $ lines contains three integers $ x_i $ , $ y_i $ and $ s_i $ ( $ 1\\le y_i < x_i\\le 10^9 $ , $ s_i\\in\\{0,1\\} $ ) \u2014 the position of the $ i $ -th portal, the position where the ant is teleported when it travels through the $ i $ -th portal (if it is active), and the initial state of the $ i $ -th portal.\n\nThe positions of the portals are strictly increasing, that is $ x_1<x_2<\\cdots<x_n $ . It is guaranteed that the $ 2n $ integers $ x_1, \\, x_2, \\, \\dots, \\, x_n, \\, y_1, \\, y_2, \\, \\dots, \\, y_n $ are all distinct.",
    "outputFormat": "Output the amount of time elapsed, in seconds, from the instant the ant starts moving to the instant it reaches the position $ x_n+1 $ . Since the answer may be very large, output it modulo $ 998\\,244\\,353 $ .",
    "samples": [
        [
            "4\n3 2 0\n6 5 1\n7 4 0\n8 1 1",
            "23"
        ],
        [
            "1\n454971987 406874902 1",
            "503069073"
        ],
        [
            "5\n243385510 42245605 0\n644426565 574769163 0\n708622105 208990040 0\n786625660 616437691 0\n899754846 382774619 0",
            "899754847"
        ],
        [
            "5\n200000000 100000000 1\n600000000 400000000 0\n800000000 300000000 0\n900000000 700000000 1\n1000000000 500000000 0",
            "3511295"
        ]
    ],
    "hint": "Explanation of the first sample: The ant moves as follows (a curvy arrow denotes a teleporting, a straight arrow denotes normal movement with speed $ 1 $ and the time spent during the movement is written above the arrow). $ $$$ 0 \\stackrel{6}{\\longrightarrow} 6 \\leadsto 5 \\stackrel{3}{\\longrightarrow} 8 \\leadsto 1 \\stackrel{2}{\\longrightarrow} 3 \\leadsto 2 \\stackrel{4}{\\longrightarrow} 6 \\leadsto 5 \\stackrel{2}{\\longrightarrow} 7 \\leadsto 4 \\stackrel{2}{\\longrightarrow} 6 \\leadsto 5 \\stackrel{4}{\\longrightarrow} 9  $ $  Notice that the total time is  $ 6+3+2+4+2+2+4=23 $ .</p><p><span class=\"tex-font-style-bf\">Explanation of the second sample:</span> The ant moves as follows (a curvy arrow denotes a teleporting, a straight arrow denotes normal movement with speed  $ 1 $  and the time spent during the movement is written above the arrow).  $ $  0 \\stackrel{454971987}{\\longrightarrow} 454971987 \\leadsto 406874902 \\stackrel{48097086}{\\longrightarrow} 454971988  $ $  Notice that the total time is  $ 454971987+48097086=503069073 $ .</p><p><span class=\"tex-font-style-bf\">Explanation of the third sample:</span> Since all portals are initially off, the ant will not be teleported and will go straight from  $ 0 $  to  $ x\\_n+1=899754846+1=899754847$$$.",
    "translation": "### **\u3010\u9898\u76ee\u5927\u610f\u3011**\n\n\u6709\u4e00\u53ea\u521d\u59cb\u5728\u4f4d\u7f6e $0$ \u7684\u8682\u8681\uff0c\u5b83\u6bcf\u79d2\u949f\u4f1a\u5411\u53f3\u8d70 $1$ \u4e00\u4e2a\u5355\u4f4d\u957f\u5ea6\u3002\n\n\u5728\u5730\u56fe\u4e0a\u6709 $n$ \u4e2a\u866b\u6d1e\uff0c\u7b2c $i$ \u4e2a\u866b\u6d1e\u5728\u4f4d\u7f6e $x_{i}$\uff0c\u5982\u679c\u5b83\u662f\u6d3b\u52a8\u7684\uff0c\u5b83\u5c31\u4f1a\u628a\u8682\u8681\u9001\u56de\u5230\u4f4d\u7f6e $y_{i}(y_{i}<x_{i})$\u3002\n\n\u521d\u59cb\u65f6\u6bcf\u4e2a\u866b\u6d1e\u6709\u4e00\u4e2a\u53c2\u6570 $s_{i}$\uff0c$s_{i}$ \u662f $0$ \u8868\u793a\u866b\u6d1e\u662f\u521d\u59cb\u9759\u6b62\u7684\uff0c\u800c $1$ \u8868\u793a\u866b\u6d1e\u521d\u59cb\u662f\u6d3b\u52a8\u7684\u3002\n\n\u5f53\u8682\u8681\u8e29\u5230\u866b\u6d1e $i$ \u65f6\uff1a\n\n- \u5982\u679c\u8fd9\u4e2a\u866b\u6d1e\u662f\u9759\u6b62\u7684\uff0c\u90a3\u4e48\u6b64\u866b\u6d1e\u4f1a\u53d8\u6210\u6d3b\u52a8\u7684\uff0c\u4f46\u662f\u8682\u8681\u7684\u4f4d\u7f6e\u4e0d\u6539\u53d8\u3002\n- \u5982\u679c\u8fd9\u4e2a\u866b\u6d1e\u662f\u6d3b\u52a8\uff0c\u90a3\u4e48\u6b64\u866b\u6d1e\u5c06\u53d8\u6210\u9759\u6b62\uff0c\u4e14\u4f1a\u628a\u8682\u8681\u9001\u56de $y_{i}$ \u4f4d\u7f6e\uff0c\u800c\u63a5\u4e0b\u6765\u8682\u8681\u5c06\u4fdd\u6301\u5411\u53f3\u6bcf\u79d2 $1$ \u4e2a\u5355\u4f4d\u7684\u901f\u5ea6\u524d\u8fdb\uff08\u5373\u4e0b\u4e00\u79d2\u5b83\u4f1a\u5230\u4f4d\u7f6e $y_{i}+1$\uff09\u3002\n\n\u73b0\u5728\u6211\u4eec\u60f3\u77e5\u9053\uff0c\u8fd9\u53ea\u8682\u8681\u9700\u8981\u591a\u5c11\u65f6\u95f4\u624d\u80fd\u5230\u4f4d\u7f6e $(x_{n}+1)$ \u5462\uff1f**\u7b54\u6848\u5bf9 $998244353$ \u53d6\u6a21**\u3002\n\n### \u3010\u8f93\u5165\u683c\u5f0f\u3011\n\n\u7b2c\u4e00\u884c $1$ \u4e2a\u6570 $n$\uff0c\u8868\u793a\u866b\u6d1e\u7684\u6570\u91cf\u3002\n\n\u63a5\u4e0b\u6765 $n$ \u884c\u6bcf\u884c $3$ \u4e2a\u6574\u6570\uff0c$x_{i},y_{i},s_{i}$\uff0c\u542b\u4e49\u89c1\u9898\u9762\u3002\n\n\u4fdd\u8bc1 $\\forall i \\in [1,n), \\quad  x_{i}<x_{i+1}$\uff0c\u4e14 $x_{1 \\cdots n},y_{1 \\cdots n}$ \u4e24\u4e24\u4e0d\u540c\u3002\n\n### \u3010\u8f93\u51fa\u683c\u5f0f\u3011\n\n\u4e00\u884c\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u7b54\u6848\u3002\n\n**\u7b54\u6848\u5bf9 $998244353$ \u53d6\u6a21**\u3002\n\n### \u3010\u6570\u636e\u8303\u56f4\u3011\n\n- $1 \\leq n \\leq 2 \\times 10^{5}$\u3002\n- $\\forall i \\in [1,n], \\quad 1 \\leq y_{i}<x_{i} \\leq 1 \\times 10^{9},s_{i} \\in \\{0,1 \\}$\u3002\n\nTranslated by @HPXXZYY"
}
{
    "description": "You are given an array $ a $ of length $ 2^n $ . You should process $ q $ queries on it. Each query has one of the following $ 4 $ types:\n\n1. $ Replace(x, k) $ \u2014 change $ a_x $ to $ k $ ;\n2. $ Reverse(k) $ \u2014 reverse each subarray $ [(i-1) \\cdot         2^k+1, i \\cdot 2^k] $ for all $ i $ ( $ i \\ge 1 $ );\n3. $ Swap(k) $ \u2014 swap subarrays $ [(2i-2) \\cdot 2^k+1, (2i-1)         \\cdot 2^k] $ and $ [(2i-1) \\cdot 2^k+1, 2i \\cdot 2^k] $ for all $ i $ ( $ i \\ge 1 $ );\n4. $ Sum(l, r) $ \u2014 print the sum of the elements of subarray $ [l, r] $ .\n\nWrite a program that can quickly process given queries.",
    "inputFormat": "The first line contains two integers $ n $ , $ q $ ( $ 0 \\le n       \\le 18 $ ; $ 1 \\le q \\le 10^5 $ ) \u2014 the length of array $ a $ and the number of queries.\n\nThe second line contains $ 2^n $ integers $ a_1, a_2, \\ldots,       a_{2^n} $ ( $ 0 \\le a_i \\le 10^9 $ ).\n\nNext $ q $ lines contains queries \u2014 one per line. Each query has one of $ 4 $ types:\n\n- \" $ 1 $ $ x $ $ k $ \" ( $ 1 \\le x \\le         2^n $ ; $ 0 \\le k \\le 10^9 $ ) \u2014 $ Replace(x, k) $ ;\n- \" $ 2 $ $ k $ \" ( $ 0 \\le k \\le n $ ) \u2014 $ Reverse(k) $ ;\n- \" $ 3 $ $ k $ \" ( $ 0 \\le k < n $ ) \u2014 $ Swap(k) $ ;\n- \" $ 4 $ $ l $ $ r $ \" ( $ 1 \\le l \\le r \\le         2^n $ ) \u2014 $ Sum(l, r) $ .\n\nIt is guaranteed that there is at least one $ Sum $ query.",
    "outputFormat": "Print the answer for each $ Sum $ query.",
    "samples": [
        [
            "2 3\n7 4 9 9\n1 2 8\n3 1\n4 2 4",
            "24"
        ],
        [
            "3 8\n7 0 8 8 7 1 5 2\n4 3 7\n2 1\n3 2\n4 1 6\n2 3\n1 5 16\n4 8 8\n3 0",
            "29\n22\n1"
        ]
    ],
    "hint": "In the first sample, initially, the array $ a $ is equal to $ \\{7,4,9,9\\} $ .\n\nAfter processing the first query. the array $ a $ becomes $ \\{7,8,9,9\\} $ .\n\nAfter processing the second query, the array $ a_i $ becomes $ \\{9,9,7,8\\} $\n\nTherefore, the answer to the third query is $ 9+7+8=24 $ .\n\nIn the second sample, initially, the array $ a $ is equal to $ \\{7,0,8,8,7,1,5,2\\} $ . What happens next is:\n\n1. $ Sum(3, 7) $ $ \\to $ $ 8 + 8 + 7 + 1 + 5 = 29 $ ;\n2. $ Reverse(1) $ $ \\to $ $ \\{0,7,8,8,1,7,2,5\\} $ ;\n3. $ Swap(2) $ $ \\to $ $ \\{1,7,2,5,0,7,8,8\\} $ ;\n4. $ Sum(1, 6) $ $ \\to $ $ 1 + 7 + 2 + 5 + 0 + 7 = 22 $ ;\n5. $ Reverse(3) $ $ \\to $ $ \\{8,8,7,0,5,2,7,1\\} $ ;\n6. $ Replace(5, 16) $ $ \\to $ $ \\{8,8,7,0,16,2,7,1\\} $ ;\n7. $ Sum(8, 8) $ $ \\to $ $ 1 $ ;\n8. $ Swap(0) $ $ \\to $ $ \\{8,8,0,7,2,16,1,7\\} $ .",
    "translation": "\u7ed9\u60a8\u4e00\u4e2a\u957f\u5ea6\u4e3a $2^n$ \u7684\u6570\u7ec4 $a$\uff0c\u60a8\u73b0\u5728\u9700\u8981\u5904\u7406 $q$ \u4e2a\u8be2\u95ee\uff0c\u6bcf\u4e2a\u8be2\u95ee\u662f\u4ee5\u4e0b 4 \u79cd\u7c7b\u578b\u4e4b\u4e00\uff1a\n\n1. $Replace(x, k)$ \u628a $a_x$ \u4fee\u6539\u4e3a $k$\uff1b\n2. $Reverse(k)$ \u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i(i\\ge 1)$ \uff0c\u628a\u533a\u95f4 $[(i-1)\\cdot 2^k+1, i\\cdot 2^k]$ \u7684\u5143\u7d20\u7ffb\u8f6c\uff1b\n3. $Swap(k)$ \u5bf9\u4e8e\u6bcf\u4e00\u4e2a  $i(i\\ge 1)$ \uff0c\u4ea4\u6362\u533a\u95f4 $[(2i-2)\\cdot2^k+1,(2i-1)\\cdot2^k]$ \u548c $[(2i-1)\\cdot2^k+1,2i\\cdot2^k]$ \u7684\u6240\u6709\u5143\u7d20\uff1b\n\n4. $Sum(l,r)$ \u8f93\u51fa\u533a\u95f4 $[l,r]$ \u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c\u3002\n\n\u60a8\u9700\u8981\u5199\u4e00\u4e2a\u80fd\u5feb\u901f\u5904\u7406\u4ee5\u4e0a\u8be2\u95ee\u7684\u7a0b\u5e8f\u3002\n\n"
}